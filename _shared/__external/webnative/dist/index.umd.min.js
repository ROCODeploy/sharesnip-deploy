(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define([], factory);
    } else if (typeof module === 'object' && module.exports) {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like environments that support module.exports,
        // like Node.
        module.exports = factory();
    } else {
        // Browser globals (root is window)
        root.webnative = factory();
  }
}(typeof self !== 'undefined' ? self : this, function () {  
"use strict";var webnative=(()=>{var h5=Object.create;var kh=Object.defineProperty;var p5=Object.getOwnPropertyDescriptor;var d5=Object.getOwnPropertyNames;var m5=Object.getPrototypeOf,y5=Object.prototype.hasOwnProperty;var g5=(r,e,t)=>e in r?kh(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Wu=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var Jw=(r,e)=>()=>(r&&(e=r(r=0)),e);var ue=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),xt=(r,e)=>{for(var t in e)kh(r,t,{get:e[t],enumerable:!0})},QA=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of d5(e))!y5.call(r,i)&&i!==t&&kh(r,i,{get:()=>e[i],enumerable:!(n=p5(e,i))||n.enumerable});return r};var Ze=(r,e,t)=>(t=r!=null?h5(m5(r)):{},QA(e||!r||!r.__esModule?kh(t,"default",{value:r,enumerable:!0}):t,r)),w5=r=>QA(kh({},"__esModule",{value:!0}),r);var Xw=(r,e,t)=>(g5(r,typeof e!="symbol"?e+"":e,t),t),ZA=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var is=(r,e,t)=>(ZA(r,e,"read from private field"),t?t.call(r):e.get(r)),Qw=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Zw=(r,e,t,n)=>(ZA(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);function tS(){throw new Error("setTimeout has not been defined")}function rS(){throw new Error("clearTimeout has not been defined")}function nS(r){if(La===setTimeout)return setTimeout(r,0);if((La===tS||!La)&&setTimeout)return La=setTimeout,setTimeout(r,0);try{return La(r,0)}catch{try{return La.call(null,r,0)}catch{return La.call(this,r,0)}}}function b5(r){if(Ua===clearTimeout)return clearTimeout(r);if((Ua===rS||!Ua)&&clearTimeout)return Ua=clearTimeout,clearTimeout(r);try{return Ua(r)}catch{try{return Ua.call(null,r)}catch{return Ua.call(this,r)}}}function v5(){!Pf||!Vu||(Pf=!1,Vu.length?qs=Vu.concat(qs):Dm=-1,qs.length&&iS())}function iS(){if(!Pf){var r=nS(v5);Pf=!0;for(var e=qs.length;e;){for(Vu=qs,qs=[];++Dm<e;)Vu&&Vu[Dm].run();Dm=-1,e=qs.length}Vu=null,Pf=!1,b5(r)}}function _5(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];qs.push(new oS(r,e)),qs.length===1&&!Pf&&nS(iS)}function oS(r,e){this.fun=r,this.array=e}function Hu(){}function N5(r){throw new Error("process.binding is not supported")}function M5(){return"/"}function K5(r){throw new Error("process.chdir is not supported")}function j5(){return 0}function z5(r){var e=$5.call(Cf)*.001,t=Math.floor(e),n=Math.floor(e%1*1e9);return r&&(t=t-r[0],n=n-r[1],n<0&&(t--,n+=1e9)),[t,n]}function W5(){var r=new Date,e=r-q5;return e/1e3}var La,Ua,qs,Pf,Vu,Dm,x5,E5,A5,S5,D5,C5,P5,I5,T5,k5,F5,B5,R5,O5,L5,U5,Cf,$5,q5,process,eS,h=Jw(()=>{La=tS,Ua=rS;typeof globalThis.setTimeout=="function"&&(La=setTimeout);typeof globalThis.clearTimeout=="function"&&(Ua=clearTimeout);qs=[],Pf=!1,Dm=-1;oS.prototype.run=function(){this.fun.apply(null,this.array)};x5="browser",E5="browser",A5=!0,S5={},D5=[],C5="",P5={},I5={},T5={};k5=Hu,F5=Hu,B5=Hu,R5=Hu,O5=Hu,L5=Hu,U5=Hu;Cf=globalThis.performance||{},$5=Cf.now||Cf.mozNow||Cf.msNow||Cf.oNow||Cf.webkitNow||function(){return new Date().getTime()};q5=new Date;process={nextTick:_5,title:x5,browser:A5,env:S5,argv:D5,version:C5,versions:P5,on:k5,addListener:F5,once:B5,off:R5,removeListener:O5,removeAllListeners:L5,emit:U5,binding:N5,cwd:M5,chdir:K5,umask:j5,hrtime:z5,platform:E5,release:I5,config:T5,uptime:W5},eS={};Object.keys(eS).forEach(r=>{let e=r.split("."),t=process;for(let n=0;n<e.length;n++){let i=e[n];n===e.length-1?t[i]=eS[r]:t=t[i]||(t[i]={})}})});function cS(){tb=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)os[e]=r[e],Qi[r.charCodeAt(e)]=e;Qi["-".charCodeAt(0)]=62,Qi["_".charCodeAt(0)]=63}function H5(r){tb||cS();var e,t,n,i,o,a,c=r.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[c-2]==="="?2:r[c-1]==="="?1:0,a=new V5(c*3/4-o),n=o>0?c-4:c;var f=0;for(e=0,t=0;e<n;e+=4,t+=3)i=Qi[r.charCodeAt(e)]<<18|Qi[r.charCodeAt(e+1)]<<12|Qi[r.charCodeAt(e+2)]<<6|Qi[r.charCodeAt(e+3)],a[f++]=i>>16&255,a[f++]=i>>8&255,a[f++]=i&255;return o===2?(i=Qi[r.charCodeAt(e)]<<2|Qi[r.charCodeAt(e+1)]>>4,a[f++]=i&255):o===1&&(i=Qi[r.charCodeAt(e)]<<10|Qi[r.charCodeAt(e+1)]<<4|Qi[r.charCodeAt(e+2)]>>2,a[f++]=i>>8&255,a[f++]=i&255),a}function G5(r){return os[r>>18&63]+os[r>>12&63]+os[r>>6&63]+os[r&63]}function Y5(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(G5(n));return i.join("")}function sS(r){tb||cS();for(var e,t=r.length,n=t%3,i="",o=[],a=16383,c=0,f=t-n;c<f;c+=a)o.push(Y5(r,c,c+a>f?f:c+a));return n===1?(e=r[t-1],i+=os[e>>2],i+=os[e<<4&63],i+="=="):n===2&&(e=(r[t-2]<<8)+r[t-1],i+=os[e>>10],i+=os[e>>4&63],i+=os[e<<2&63],i+="="),o.push(i),o.join("")}function Cm(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ws(r,e){if(Cm()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=Buffer.prototype):(r===null&&(r=new Buffer(e)),r.length=e),r}function Buffer(r,e,t){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return rb(this,r)}return fS(this,r,e,t)}function fS(r,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?Q5(r,e,t,n):typeof e=="string"?X5(r,e,t):Z5(r,e)}function lS(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function J5(r,e,t,n){return lS(e),e<=0?Ws(r,e):t!==void 0?typeof n=="string"?Ws(r,e).fill(t,n):Ws(r,e).fill(t):Ws(r,e)}function rb(r,e){if(lS(e),r=Ws(r,e<0?0:nb(e)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}function X5(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=hS(e,t)|0;r=Ws(r,n);var i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function eb(r,e){var t=e.length<0?0:nb(e.length)|0;r=Ws(r,t);for(var n=0;n<t;n+=1)r[n]=e[n]&255;return r}function Q5(r,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),Buffer.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=Buffer.prototype):r=eb(r,e),r}function Z5(r,e){if(ss(e)){var t=nb(e.length)|0;return r=Ws(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||w7(e.length)?Ws(r,0):eb(r,e);if(e.type==="Buffer"&&Array.isArray(e.data))return eb(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function nb(r){if(r>=Cm())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Cm().toString(16)+" bytes");return r|0}function ss(r){return!!(r!=null&&r._isBuffer)}function hS(r,e){if(ss(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Pm(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return bS(r).length;default:if(n)return Pm(r).length;e=(""+e).toLowerCase(),n=!0}}function e7(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return f7(this,e,t);case"utf8":case"utf-8":return mS(this,e,t);case"ascii":return u7(this,e,t);case"latin1":case"binary":return c7(this,e,t);case"base64":return s7(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l7(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}function Gu(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}function pS(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=Buffer.from(e,n)),ss(e))return e.length===0?-1:aS(r,e,t,n,i);if(typeof e=="number")return e=e&255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):aS(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function aS(r,e,t,n,i){var o=1,a=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,c/=2,t/=2}function f(T,F){return o===1?T[F]:T.readUInt16BE(F*o)}var d;if(i){var m=-1;for(d=t;d<a;d++)if(f(r,d)===f(e,m===-1?0:d-m)){if(m===-1&&(m=d),d-m+1===c)return m*o}else m!==-1&&(d-=d-m),m=-1}else for(t+c>a&&(t=a-c),d=t;d>=0;d--){for(var w=!0,E=0;E<c;E++)if(f(r,d+E)!==f(e,E)){w=!1;break}if(w)return d}return-1}function t7(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var c=parseInt(e.substr(a*2,2),16);if(isNaN(c))return a;r[t+a]=c}return a}function r7(r,e,t,n){return km(Pm(e,r.length-t),r,t,n)}function dS(r,e,t,n){return km(y7(e),r,t,n)}function n7(r,e,t,n){return dS(r,e,t,n)}function i7(r,e,t,n){return km(bS(e),r,t,n)}function o7(r,e,t,n){return km(g7(e,r.length-t),r,t,n)}function s7(r,e,t){return e===0&&t===r.length?sS(r):sS(r.slice(e,t))}function mS(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var o=r[i],a=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){var f,d,m,w;switch(c){case 1:o<128&&(a=o);break;case 2:f=r[i+1],(f&192)===128&&(w=(o&31)<<6|f&63,w>127&&(a=w));break;case 3:f=r[i+1],d=r[i+2],(f&192)===128&&(d&192)===128&&(w=(o&15)<<12|(f&63)<<6|d&63,w>2047&&(w<55296||w>57343)&&(a=w));break;case 4:f=r[i+1],d=r[i+2],m=r[i+3],(f&192)===128&&(d&192)===128&&(m&192)===128&&(w=(o&15)<<18|(f&63)<<12|(d&63)<<6|m&63,w>65535&&w<1114112&&(a=w))}}a===null?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=c}return a7(n)}function a7(r){var e=r.length;if(e<=uS)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=uS));return t}function u7(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function c7(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function f7(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",o=e;o<t;++o)i+=m7(r[o]);return i}function l7(r,e,t){for(var n=r.slice(e,t),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}function en(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}function Gn(r,e,t,n,i,o){if(!ss(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}function Im(r,e,t,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(r.length-t,2);i<o;++i)r[t+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}function Tm(r,e,t,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(r.length-t,4);i<o;++i)r[t+i]=e>>>(n?i:3-i)*8&255}function yS(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function gS(r,e,t,n,i){return i||yS(r,e,t,4,34028234663852886e22,-34028234663852886e22),_S(r,e,t,n,23,4),t+4}function wS(r,e,t,n,i){return i||yS(r,e,t,8,17976931348623157e292,-17976931348623157e292),_S(r,e,t,n,52,8),t+8}function p7(r){if(r=d7(r).replace(h7,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function d7(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function m7(r){return r<16?"0"+r.toString(16):r.toString(16)}function Pm(r,e){e=e||1/0;for(var t,n=r.length,i=null,o=[],a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function y7(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function g7(r,e){for(var t,n,i,o=[],a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function bS(r){return H5(p7(r))}function km(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function w7(r){return r!==r}function b7(r){return r!=null&&(!!r._isBuffer||vS(r)||v7(r))}function vS(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function v7(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&vS(r.slice(0,0))}function Fm(r,e,t,n,i){var o,a,c=i*8-n-1,f=(1<<c)-1,d=f>>1,m=-7,w=t?i-1:0,E=t?-1:1,T=r[e+w];for(w+=E,o=T&(1<<-m)-1,T>>=-m,m+=c;m>0;o=o*256+r[e+w],w+=E,m-=8);for(a=o&(1<<-m)-1,o>>=-m,m+=n;m>0;a=a*256+r[e+w],w+=E,m-=8);if(o===0)o=1-d;else{if(o===f)return a?NaN:(T?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-d}return(T?-1:1)*a*Math.pow(2,o-n)}function _S(r,e,t,n,i,o){var a,c,f,d=o*8-i-1,m=(1<<d)-1,w=m>>1,E=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=n?0:o-1,F=n?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=m):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+w>=1?e+=E/f:e+=E*Math.pow(2,1-w),e*f>=2&&(a++,f/=2),a+w>=m?(c=0,a=m):a+w>=1?(c=(e*f-1)*Math.pow(2,i),a=a+w):(c=e*Math.pow(2,w-1)*Math.pow(2,i),a=0));i>=8;r[t+T]=c&255,T+=F,c/=256,i-=8);for(a=a<<i|c,d+=i;d>0;r[t+T]=a&255,T+=F,a/=256,d-=8);r[t+T-F]|=N*128}var os,Qi,V5,tb,uS,h7,xS=Jw(()=>{h();p();os=[],Qi=[],V5=typeof Uint8Array<"u"?Uint8Array:Array,tb=!1;Buffer.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;Buffer.poolSize=8192;Buffer._augment=function(r){return r.__proto__=Buffer.prototype,r};Buffer.from=function(r,e,t){return fS(null,r,e,t)};Buffer.kMaxLength=Cm();Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer[Symbol.species]);Buffer.alloc=function(r,e,t){return J5(null,r,e,t)};Buffer.allocUnsafe=function(r){return rb(null,r)};Buffer.allocUnsafeSlow=function(r){return rb(null,r)};Buffer.isBuffer=b7;Buffer.compare=function(e,t){if(!ss(e)||!ss(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Buffer.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=Buffer.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!ss(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};Buffer.byteLength=hS;Buffer.prototype._isBuffer=!0;Buffer.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Gu(this,t,t+1);return this};Buffer.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Gu(this,t,t+3),Gu(this,t+1,t+2);return this};Buffer.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Gu(this,t,t+7),Gu(this,t+1,t+6),Gu(this,t+2,t+5),Gu(this,t+3,t+4);return this};Buffer.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?mS(this,0,e):e7.apply(this,arguments)};Buffer.prototype.equals=function(e){if(!ss(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Buffer.compare(this,e)===0};Buffer.prototype.compare=function(e,t,n,i,o){if(!ss(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var a=o-i,c=n-t,f=Math.min(a,c),d=this.slice(i,o),m=e.slice(t,n),w=0;w<f;++w)if(d[w]!==m[w]){a=d[w],c=m[w];break}return a<c?-1:c<a?1:0};Buffer.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};Buffer.prototype.indexOf=function(e,t,n){return pS(this,e,t,n,!0)};Buffer.prototype.lastIndexOf=function(e,t,n){return pS(this,e,t,n,!1)};Buffer.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return t7(this,e,t,n);case"utf8":case"utf-8":return r7(this,e,t,n);case"ascii":return dS(this,e,t,n);case"latin1":case"binary":return n7(this,e,t,n);case"base64":return i7(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o7(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};uS=4096;Buffer.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i;if(Buffer.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=Buffer.prototype;else{var o=t-e;i=new Buffer(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+e]}return i};Buffer.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||en(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return i};Buffer.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||en(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i};Buffer.prototype.readUInt8=function(e,t){return t||en(e,1,this.length),this[e]};Buffer.prototype.readUInt16LE=function(e,t){return t||en(e,2,this.length),this[e]|this[e+1]<<8};Buffer.prototype.readUInt16BE=function(e,t){return t||en(e,2,this.length),this[e]<<8|this[e+1]};Buffer.prototype.readUInt32LE=function(e,t){return t||en(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Buffer.prototype.readUInt32BE=function(e,t){return t||en(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Buffer.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||en(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};Buffer.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||en(e,t,this.length);for(var i=t,o=1,a=this[e+--i];i>0&&(o*=256);)a+=this[e+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};Buffer.prototype.readInt8=function(e,t){return t||en(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Buffer.prototype.readInt16LE=function(e,t){t||en(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Buffer.prototype.readInt16BE=function(e,t){t||en(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Buffer.prototype.readInt32LE=function(e,t){return t||en(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Buffer.prototype.readInt32BE=function(e,t){return t||en(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Buffer.prototype.readFloatLE=function(e,t){return t||en(e,4,this.length),Fm(this,e,!0,23,4)};Buffer.prototype.readFloatBE=function(e,t){return t||en(e,4,this.length),Fm(this,e,!1,23,4)};Buffer.prototype.readDoubleLE=function(e,t){return t||en(e,8,this.length),Fm(this,e,!0,52,8)};Buffer.prototype.readDoubleBE=function(e,t){return t||en(e,8,this.length),Fm(this,e,!1,52,8)};Buffer.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;Gn(this,e,t,n,o,0)}var a=1,c=0;for(this[t]=e&255;++c<n&&(a*=256);)this[t+c]=e/a&255;return t+n};Buffer.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;Gn(this,e,t,n,o,0)}var a=n-1,c=1;for(this[t+a]=e&255;--a>=0&&(c*=256);)this[t+a]=e/c&255;return t+n};Buffer.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||Gn(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};Buffer.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||Gn(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Im(this,e,t,!0),t+2};Buffer.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||Gn(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Im(this,e,t,!1),t+2};Buffer.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||Gn(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Tm(this,e,t,!0),t+4};Buffer.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||Gn(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Tm(this,e,t,!1),t+4};Buffer.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t|0,!i){var o=Math.pow(2,8*n-1);Gn(this,e,t,n,o-1,-o)}var a=0,c=1,f=0;for(this[t]=e&255;++a<n&&(c*=256);)e<0&&f===0&&this[t+a-1]!==0&&(f=1),this[t+a]=(e/c>>0)-f&255;return t+n};Buffer.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t|0,!i){var o=Math.pow(2,8*n-1);Gn(this,e,t,n,o-1,-o)}var a=n-1,c=1,f=0;for(this[t+a]=e&255;--a>=0&&(c*=256);)e<0&&f===0&&this[t+a+1]!==0&&(f=1),this[t+a]=(e/c>>0)-f&255;return t+n};Buffer.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||Gn(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};Buffer.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||Gn(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Im(this,e,t,!0),t+2};Buffer.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||Gn(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Im(this,e,t,!1),t+2};Buffer.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||Gn(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Tm(this,e,t,!0),t+4};Buffer.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||Gn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Tm(this,e,t,!1),t+4};Buffer.prototype.writeFloatLE=function(e,t,n){return gS(this,e,t,!0,n)};Buffer.prototype.writeFloatBE=function(e,t,n){return gS(this,e,t,!1,n)};Buffer.prototype.writeDoubleLE=function(e,t,n){return wS(this,e,t,!0,n)};Buffer.prototype.writeDoubleBE=function(e,t,n){return wS(this,e,t,!1,n)};Buffer.prototype.copy=function(e,t,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n,a;if(this===e&&n<t&&t<i)for(a=o-1;a>=0;--a)e[a+t]=this[a+n];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o};Buffer.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!Buffer.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var a;if(typeof e=="number")for(a=t;a<n;++a)this[a]=e;else{var c=ss(e)?e:Pm(new Buffer(e,i).toString()),f=c.length;for(a=0;a<n-t;++a)this[a+t]=c[a%f]}return this};h7=/[^+\/0-9A-Za-z-_]/g});var p=Jw(()=>{xS()});var Um=ue((zS,Sb)=>{h();p();(function(r){if(typeof zS=="object"&&typeof Sb<"u")Sb.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var e;typeof window<"u"?e=window:typeof globalThis<"u"?e=globalThis:typeof self<"u"?e=self:e=this,e.localforage=r()}})(function(){var r,e,t;return function n(i,o,a){function c(m,w){if(!o[m]){if(!i[m]){var E=typeof Wu=="function"&&Wu;if(!w&&E)return E(m,!0);if(f)return f(m,!0);var T=new Error("Cannot find module '"+m+"'");throw T.code="MODULE_NOT_FOUND",T}var F=o[m]={exports:{}};i[m][0].call(F.exports,function(N){var he=i[m][1][N];return c(he||N)},F,F.exports,n,i,o,a)}return o[m].exports}for(var f=typeof Wu=="function"&&Wu,d=0;d<a.length;d++)c(a[d]);return c}({1:[function(n,i,o){(function(a){"use strict";var c=a.MutationObserver||a.WebKitMutationObserver,f;if(c){var d=0,m=new c(N),w=a.document.createTextNode("");m.observe(w,{characterData:!0}),f=function(){w.data=d=++d%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var E=new a.MessageChannel;E.port1.onmessage=N,f=function(){E.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?f=function(){var de=a.document.createElement("script");de.onreadystatechange=function(){N(),de.onreadystatechange=null,de.parentNode.removeChild(de),de=null},a.document.documentElement.appendChild(de)}:f=function(){setTimeout(N,0)};var T,F=[];function N(){T=!0;for(var de,Pe,ie=F.length;ie;){for(Pe=F,F=[],de=-1;++de<ie;)Pe[de]();ie=F.length}T=!1}i.exports=he;function he(de){F.push(de)===1&&!T&&f()}}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,i,o){"use strict";var a=n(1);function c(){}var f={},d=["REJECTED"],m=["FULFILLED"],w=["PENDING"];i.exports=E;function E(Y){if(typeof Y!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,Y!==c&&he(this,Y)}E.prototype.catch=function(Y){return this.then(null,Y)},E.prototype.then=function(Y,ge){if(typeof Y!="function"&&this.state===m||typeof ge!="function"&&this.state===d)return this;var _e=new this.constructor(c);if(this.state!==w){var Me=this.state===m?Y:ge;F(_e,Me,this.outcome)}else this.queue.push(new T(_e,Y,ge));return _e};function T(Y,ge,_e){this.promise=Y,typeof ge=="function"&&(this.onFulfilled=ge,this.callFulfilled=this.otherCallFulfilled),typeof _e=="function"&&(this.onRejected=_e,this.callRejected=this.otherCallRejected)}T.prototype.callFulfilled=function(Y){f.resolve(this.promise,Y)},T.prototype.otherCallFulfilled=function(Y){F(this.promise,this.onFulfilled,Y)},T.prototype.callRejected=function(Y){f.reject(this.promise,Y)},T.prototype.otherCallRejected=function(Y){F(this.promise,this.onRejected,Y)};function F(Y,ge,_e){a(function(){var Me;try{Me=ge(_e)}catch(vt){return f.reject(Y,vt)}Me===Y?f.reject(Y,new TypeError("Cannot resolve promise with itself")):f.resolve(Y,Me)})}f.resolve=function(Y,ge){var _e=de(N,ge);if(_e.status==="error")return f.reject(Y,_e.value);var Me=_e.value;if(Me)he(Y,Me);else{Y.state=m,Y.outcome=ge;for(var vt=-1,Ut=Y.queue.length;++vt<Ut;)Y.queue[vt].callFulfilled(ge)}return Y},f.reject=function(Y,ge){Y.state=d,Y.outcome=ge;for(var _e=-1,Me=Y.queue.length;++_e<Me;)Y.queue[_e].callRejected(ge);return Y};function N(Y){var ge=Y&&Y.then;if(Y&&(typeof Y=="object"||typeof Y=="function")&&typeof ge=="function")return function(){ge.apply(Y,arguments)}}function he(Y,ge){var _e=!1;function Me(qt){_e||(_e=!0,f.reject(Y,qt))}function vt(qt){_e||(_e=!0,f.resolve(Y,qt))}function Ut(){ge(vt,Me)}var Rt=de(Ut);Rt.status==="error"&&Me(Rt.value)}function de(Y,ge){var _e={};try{_e.value=Y(ge),_e.status="success"}catch(Me){_e.status="error",_e.value=Me}return _e}E.resolve=Pe;function Pe(Y){return Y instanceof this?Y:f.resolve(new this(c),Y)}E.reject=ie;function ie(Y){var ge=new this(c);return f.reject(ge,Y)}E.all=be;function be(Y){var ge=this;if(Object.prototype.toString.call(Y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _e=Y.length,Me=!1;if(!_e)return this.resolve([]);for(var vt=new Array(_e),Ut=0,Rt=-1,qt=new this(c);++Rt<_e;)hr(Y[Rt],Rt);return qt;function hr(Mt,Kr){ge.resolve(Mt).then(Pn,function(Fr){Me||(Me=!0,f.reject(qt,Fr))});function Pn(Fr){vt[Kr]=Fr,++Ut===_e&&!Me&&(Me=!0,f.resolve(qt,vt))}}}E.race=Ae;function Ae(Y){var ge=this;if(Object.prototype.toString.call(Y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _e=Y.length,Me=!1;if(!_e)return this.resolve([]);for(var vt=-1,Ut=new this(c);++vt<_e;)Rt(Y[vt]);return Ut;function Rt(qt){ge.resolve(qt).then(function(hr){Me||(Me=!0,f.resolve(Ut,hr))},function(hr){Me||(Me=!0,f.reject(Ut,hr))})}}},{1:1}],3:[function(n,i,o){(function(a){"use strict";typeof a.Promise!="function"&&(a.Promise=n(2))}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,i,o){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};function c(_,k){if(!(_ instanceof k))throw new TypeError("Cannot call a class as a function")}function f(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var d=f();function m(){try{if(!d||!d.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),k=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!_||k)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function w(_,k){_=_||[],k=k||{};try{return new Blob(_,k)}catch(v){if(v.name!=="TypeError")throw v;for(var C=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,R=new C,O=0;O<_.length;O+=1)R.append(_[O]);return R.getBlob(k.type)}}typeof Promise>"u"&&n(3);var E=Promise;function T(_,k){k&&_.then(function(C){k(null,C)},function(C){k(C)})}function F(_,k,C){typeof k=="function"&&_.then(k),typeof C=="function"&&_.catch(C)}function N(_){return typeof _!="string"&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function he(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var de="local-forage-detect-blob-support",Pe=void 0,ie={},be=Object.prototype.toString,Ae="readonly",Y="readwrite";function ge(_){for(var k=_.length,C=new ArrayBuffer(k),R=new Uint8Array(C),O=0;O<k;O++)R[O]=_.charCodeAt(O);return C}function _e(_){return new E(function(k){var C=_.transaction(de,Y),R=w([""]);C.objectStore(de).put(R,"key"),C.onabort=function(O){O.preventDefault(),O.stopPropagation(),k(!1)},C.oncomplete=function(){var O=navigator.userAgent.match(/Chrome\/(\d+)/),v=navigator.userAgent.match(/Edge\//);k(v||!O||parseInt(O[1],10)>=43)}}).catch(function(){return!1})}function Me(_){return typeof Pe=="boolean"?E.resolve(Pe):_e(_).then(function(k){return Pe=k,Pe})}function vt(_){var k=ie[_.name],C={};C.promise=new E(function(R,O){C.resolve=R,C.reject=O}),k.deferredOperations.push(C),k.dbReady?k.dbReady=k.dbReady.then(function(){return C.promise}):k.dbReady=C.promise}function Ut(_){var k=ie[_.name],C=k.deferredOperations.pop();if(C)return C.resolve(),C.promise}function Rt(_,k){var C=ie[_.name],R=C.deferredOperations.pop();if(R)return R.reject(k),R.promise}function qt(_,k){return new E(function(C,R){if(ie[_.name]=ie[_.name]||wr(),_.db)if(k)vt(_),_.db.close();else return C(_.db);var O=[_.name];k&&O.push(_.version);var v=d.open.apply(d,O);k&&(v.onupgradeneeded=function(z){var H=v.result;try{H.createObjectStore(_.storeName),z.oldVersion<=1&&H.createObjectStore(de)}catch(X){if(X.name==="ConstraintError")console.warn('The database "'+_.name+'" has been upgraded from version '+z.oldVersion+" to version "+z.newVersion+', but the storage "'+_.storeName+'" already exists.');else throw X}}),v.onerror=function(z){z.preventDefault(),R(v.error)},v.onsuccess=function(){var z=v.result;z.onversionchange=function(H){H.target.close()},C(z),Ut(_)}})}function hr(_){return qt(_,!1)}function Mt(_){return qt(_,!0)}function Kr(_,k){if(!_.db)return!0;var C=!_.db.objectStoreNames.contains(_.storeName),R=_.version<_.db.version,O=_.version>_.db.version;if(R&&(_.version!==k&&console.warn('The database "'+_.name+`" can't be downgraded from version `+_.db.version+" to version "+_.version+"."),_.version=_.db.version),O||C){if(C){var v=_.db.version+1;v>_.version&&(_.version=v)}return!0}return!1}function Pn(_){return new E(function(k,C){var R=new FileReader;R.onerror=C,R.onloadend=function(O){var v=btoa(O.target.result||"");k({__local_forage_encoded_blob:!0,data:v,type:_.type})},R.readAsBinaryString(_)})}function Fr(_){var k=ge(atob(_.data));return w([k],{type:_.type})}function qr(_){return _&&_.__local_forage_encoded_blob}function Fs(_){var k=this,C=k._initReady().then(function(){var R=ie[k._dbInfo.name];if(R&&R.dbReady)return R.dbReady});return F(C,_,_),C}function er(_){vt(_);for(var k=ie[_.name],C=k.forages,R=0;R<C.length;R++){var O=C[R];O._dbInfo.db&&(O._dbInfo.db.close(),O._dbInfo.db=null)}return _.db=null,hr(_).then(function(v){return _.db=v,Kr(_)?Mt(_):v}).then(function(v){_.db=k.db=v;for(var z=0;z<C.length;z++)C[z]._dbInfo.db=v}).catch(function(v){throw Rt(_,v),v})}function Wt(_,k,C,R){R===void 0&&(R=1);try{var O=_.db.transaction(_.storeName,k);C(null,O)}catch(v){if(R>0&&(!_.db||v.name==="InvalidStateError"||v.name==="NotFoundError"))return E.resolve().then(function(){if(!_.db||v.name==="NotFoundError"&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),Mt(_)}).then(function(){return er(_).then(function(){Wt(_,k,C,R-1)})}).catch(C);C(v)}}function wr(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ve(_){var k=this,C={db:null};if(_)for(var R in _)C[R]=_[R];var O=ie[C.name];O||(O=wr(),ie[C.name]=O),O.forages.push(k),k._initReady||(k._initReady=k.ready,k.ready=Fs);var v=[];function z(){return E.resolve()}for(var H=0;H<O.forages.length;H++){var X=O.forages[H];X!==k&&v.push(X._initReady().catch(z))}var G=O.forages.slice(0);return E.all(v).then(function(){return C.db=O.db,hr(C)}).then(function(te){return C.db=te,Kr(C,k._defaultConfig.version)?Mt(C):te}).then(function(te){C.db=O.db=te,k._dbInfo=C;for(var me=0;me<G.length;me++){var $e=G[me];$e!==k&&($e._dbInfo.db=C.db,$e._dbInfo.version=C.version)}})}function Jr(_,k){var C=this;_=N(_);var R=new E(function(O,v){C.ready().then(function(){Wt(C._dbInfo,Ae,function(z,H){if(z)return v(z);try{var X=H.objectStore(C._dbInfo.storeName),G=X.get(_);G.onsuccess=function(){var te=G.result;te===void 0&&(te=null),qr(te)&&(te=Fr(te)),O(te)},G.onerror=function(){v(G.error)}}catch(te){v(te)}})}).catch(v)});return T(R,k),R}function Mi(_,k){var C=this,R=new E(function(O,v){C.ready().then(function(){Wt(C._dbInfo,Ae,function(z,H){if(z)return v(z);try{var X=H.objectStore(C._dbInfo.storeName),G=X.openCursor(),te=1;G.onsuccess=function(){var me=G.result;if(me){var $e=me.value;qr($e)&&($e=Fr($e));var Ue=_($e,me.key,te++);Ue!==void 0?O(Ue):me.continue()}else O()},G.onerror=function(){v(G.error)}}catch(me){v(me)}})}).catch(v)});return T(R,k),R}function Ki(_,k,C){var R=this;_=N(_);var O=new E(function(v,z){var H;R.ready().then(function(){return H=R._dbInfo,be.call(k)==="[object Blob]"?Me(H.db).then(function(X){return X?k:Pn(k)}):k}).then(function(X){Wt(R._dbInfo,Y,function(G,te){if(G)return z(G);try{var me=te.objectStore(R._dbInfo.storeName);X===null&&(X=void 0);var $e=me.put(X,_);te.oncomplete=function(){X===void 0&&(X=null),v(X)},te.onabort=te.onerror=function(){var Ue=$e.error?$e.error:$e.transaction.error;z(Ue)}}catch(Ue){z(Ue)}})}).catch(z)});return T(O,C),O}function es(_,k){var C=this;_=N(_);var R=new E(function(O,v){C.ready().then(function(){Wt(C._dbInfo,Y,function(z,H){if(z)return v(z);try{var X=H.objectStore(C._dbInfo.storeName),G=X.delete(_);H.oncomplete=function(){O()},H.onerror=function(){v(G.error)},H.onabort=function(){var te=G.error?G.error:G.transaction.error;v(te)}}catch(te){v(te)}})}).catch(v)});return T(R,k),R}function Br(_){var k=this,C=new E(function(R,O){k.ready().then(function(){Wt(k._dbInfo,Y,function(v,z){if(v)return O(v);try{var H=z.objectStore(k._dbInfo.storeName),X=H.clear();z.oncomplete=function(){R()},z.onabort=z.onerror=function(){var G=X.error?X.error:X.transaction.error;O(G)}}catch(G){O(G)}})}).catch(O)});return T(C,_),C}function ji(_){var k=this,C=new E(function(R,O){k.ready().then(function(){Wt(k._dbInfo,Ae,function(v,z){if(v)return O(v);try{var H=z.objectStore(k._dbInfo.storeName),X=H.count();X.onsuccess=function(){R(X.result)},X.onerror=function(){O(X.error)}}catch(G){O(G)}})}).catch(O)});return T(C,_),C}function wn(_,k){var C=this,R=new E(function(O,v){if(_<0){O(null);return}C.ready().then(function(){Wt(C._dbInfo,Ae,function(z,H){if(z)return v(z);try{var X=H.objectStore(C._dbInfo.storeName),G=!1,te=X.openKeyCursor();te.onsuccess=function(){var me=te.result;if(!me){O(null);return}_===0||G?O(me.key):(G=!0,me.advance(_))},te.onerror=function(){v(te.error)}}catch(me){v(me)}})}).catch(v)});return T(R,k),R}function Wr(_){var k=this,C=new E(function(R,O){k.ready().then(function(){Wt(k._dbInfo,Ae,function(v,z){if(v)return O(v);try{var H=z.objectStore(k._dbInfo.storeName),X=H.openKeyCursor(),G=[];X.onsuccess=function(){var te=X.result;if(!te){R(G);return}G.push(te.key),te.continue()},X.onerror=function(){O(X.error)}}catch(te){O(te)}})}).catch(O)});return T(C,_),C}function go(_,k){k=he.apply(this,arguments);var C=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||C.name,_.storeName=_.storeName||C.storeName);var R=this,O;if(!_.name)O=E.reject("Invalid arguments");else{var v=_.name===C.name&&R._dbInfo.db,z=v?E.resolve(R._dbInfo.db):hr(_).then(function(H){var X=ie[_.name],G=X.forages;X.db=H;for(var te=0;te<G.length;te++)G[te]._dbInfo.db=H;return H});_.storeName?O=z.then(function(H){if(!!H.objectStoreNames.contains(_.storeName)){var X=H.version+1;vt(_);var G=ie[_.name],te=G.forages;H.close();for(var me=0;me<te.length;me++){var $e=te[me];$e._dbInfo.db=null,$e._dbInfo.version=X}var Ue=new E(function(Qe,pt){var dt=d.open(_.name,X);dt.onerror=function(Ot){var cr=dt.result;cr.close(),pt(Ot)},dt.onupgradeneeded=function(){var Ot=dt.result;Ot.deleteObjectStore(_.storeName)},dt.onsuccess=function(){var Ot=dt.result;Ot.close(),Qe(Ot)}});return Ue.then(function(Qe){G.db=Qe;for(var pt=0;pt<te.length;pt++){var dt=te[pt];dt._dbInfo.db=Qe,Ut(dt._dbInfo)}}).catch(function(Qe){throw(Rt(_,Qe)||E.resolve()).catch(function(){}),Qe})}}):O=z.then(function(H){vt(_);var X=ie[_.name],G=X.forages;H.close();for(var te=0;te<G.length;te++){var me=G[te];me._dbInfo.db=null}var $e=new E(function(Ue,Qe){var pt=d.deleteDatabase(_.name);pt.onerror=function(){var dt=pt.result;dt&&dt.close(),Qe(pt.error)},pt.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},pt.onsuccess=function(){var dt=pt.result;dt&&dt.close(),Ue(dt)}});return $e.then(function(Ue){X.db=Ue;for(var Qe=0;Qe<G.length;Qe++){var pt=G[Qe];Ut(pt._dbInfo)}}).catch(function(Ue){throw(Rt(_,Ue)||E.resolve()).catch(function(){}),Ue})})}return T(O,k),O}var Ea={_driver:"asyncStorage",_initStorage:Ve,_support:m(),iterate:Mi,getItem:Jr,setItem:Ki,removeItem:es,clear:Br,length:ji,key:wn,keys:Wr,dropInstance:go};function In(){return typeof openDatabase=="function"}var bn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Aa="~~local_forage_type~",Xr=/^~~local_forage_type~([^~]+)~/,ur="__lfsc__:",$n=ur.length,zn="arbf",wo="blob",un="si08",$="ui08",J="uic8",le="si16",ve="si32",je="ur16",or="ui32",tt="fl32",ut="fl64",qe=$n+zn.length,yt=Object.prototype.toString;function ht(_){var k=_.length*.75,C=_.length,R,O=0,v,z,H,X;_[_.length-1]==="="&&(k--,_[_.length-2]==="="&&k--);var G=new ArrayBuffer(k),te=new Uint8Array(G);for(R=0;R<C;R+=4)v=bn.indexOf(_[R]),z=bn.indexOf(_[R+1]),H=bn.indexOf(_[R+2]),X=bn.indexOf(_[R+3]),te[O++]=v<<2|z>>4,te[O++]=(z&15)<<4|H>>2,te[O++]=(H&3)<<6|X&63;return G}function Ar(_){var k=new Uint8Array(_),C="",R;for(R=0;R<k.length;R+=3)C+=bn[k[R]>>2],C+=bn[(k[R]&3)<<4|k[R+1]>>4],C+=bn[(k[R+1]&15)<<2|k[R+2]>>6],C+=bn[k[R+2]&63];return k.length%3===2?C=C.substring(0,C.length-1)+"=":k.length%3===1&&(C=C.substring(0,C.length-2)+"=="),C}function bo(_,k){var C="";if(_&&(C=yt.call(_)),_&&(C==="[object ArrayBuffer]"||_.buffer&&yt.call(_.buffer)==="[object ArrayBuffer]")){var R,O=ur;_ instanceof ArrayBuffer?(R=_,O+=zn):(R=_.buffer,C==="[object Int8Array]"?O+=un:C==="[object Uint8Array]"?O+=$:C==="[object Uint8ClampedArray]"?O+=J:C==="[object Int16Array]"?O+=le:C==="[object Uint16Array]"?O+=je:C==="[object Int32Array]"?O+=ve:C==="[object Uint32Array]"?O+=or:C==="[object Float32Array]"?O+=tt:C==="[object Float64Array]"?O+=ut:k(new Error("Failed to get type for BinaryArray"))),k(O+Ar(R))}else if(C==="[object Blob]"){var v=new FileReader;v.onload=function(){var z=Aa+_.type+"~"+Ar(this.result);k(ur+wo+z)},v.readAsArrayBuffer(_)}else try{k(JSON.stringify(_))}catch(z){console.error("Couldn't convert value into a JSON string: ",_),k(null,z)}}function Bs(_){if(_.substring(0,$n)!==ur)return JSON.parse(_);var k=_.substring(qe),C=_.substring($n,qe),R;if(C===wo&&Xr.test(k)){var O=k.match(Xr);R=O[1],k=k.substring(O[0].length)}var v=ht(k);switch(C){case zn:return v;case wo:return w([v],{type:R});case un:return new Int8Array(v);case $:return new Uint8Array(v);case J:return new Uint8ClampedArray(v);case le:return new Int16Array(v);case je:return new Uint16Array(v);case ve:return new Int32Array(v);case or:return new Uint32Array(v);case tt:return new Float32Array(v);case ut:return new Float64Array(v);default:throw new Error("Unkown type: "+C)}}var vo={serialize:bo,deserialize:Bs,stringToBuffer:ht,bufferToString:Ar};function Rs(_,k,C,R){_.executeSql("CREATE TABLE IF NOT EXISTS "+k.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],C,R)}function Fu(_){var k=this,C={db:null};if(_)for(var R in _)C[R]=typeof _[R]!="string"?_[R].toString():_[R];var O=new E(function(v,z){try{C.db=openDatabase(C.name,String(C.version),C.description,C.size)}catch(H){return z(H)}C.db.transaction(function(H){Rs(H,C,function(){k._dbInfo=C,v()},function(X,G){z(G)})},z)});return C.serializer=vo,O}function $i(_,k,C,R,O,v){_.executeSql(C,R,O,function(z,H){H.code===H.SYNTAX_ERR?z.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[k.storeName],function(X,G){G.rows.length?v(X,H):Rs(X,k,function(){X.executeSql(C,R,O,v)},v)},v):v(z,H)},v)}function dh(_,k){var C=this;_=N(_);var R=new E(function(O,v){C.ready().then(function(){var z=C._dbInfo;z.db.transaction(function(H){$i(H,z,"SELECT * FROM "+z.storeName+" WHERE key = ? LIMIT 1",[_],function(X,G){var te=G.rows.length?G.rows.item(0).value:null;te&&(te=z.serializer.deserialize(te)),O(te)},function(X,G){v(G)})})}).catch(v)});return T(R,k),R}function si(_,k){var C=this,R=new E(function(O,v){C.ready().then(function(){var z=C._dbInfo;z.db.transaction(function(H){$i(H,z,"SELECT * FROM "+z.storeName,[],function(X,G){for(var te=G.rows,me=te.length,$e=0;$e<me;$e++){var Ue=te.item($e),Qe=Ue.value;if(Qe&&(Qe=z.serializer.deserialize(Qe)),Qe=_(Qe,Ue.key,$e+1),Qe!==void 0){O(Qe);return}}O()},function(X,G){v(G)})})}).catch(v)});return T(R,k),R}function zi(_,k,C,R){var O=this;_=N(_);var v=new E(function(z,H){O.ready().then(function(){k===void 0&&(k=null);var X=k,G=O._dbInfo;G.serializer.serialize(k,function(te,me){me?H(me):G.db.transaction(function($e){$i($e,G,"INSERT OR REPLACE INTO "+G.storeName+" (key, value) VALUES (?, ?)",[_,te],function(){z(X)},function(Ue,Qe){H(Qe)})},function($e){if($e.code===$e.QUOTA_ERR){if(R>0){z(zi.apply(O,[_,X,C,R-1]));return}H($e)}})})}).catch(H)});return T(v,C),v}function _o(_,k,C){return zi.apply(this,[_,k,C,1])}function Bu(_,k){var C=this;_=N(_);var R=new E(function(O,v){C.ready().then(function(){var z=C._dbInfo;z.db.transaction(function(H){$i(H,z,"DELETE FROM "+z.storeName+" WHERE key = ?",[_],function(){O()},function(X,G){v(G)})})}).catch(v)});return T(R,k),R}function Ru(_){var k=this,C=new E(function(R,O){k.ready().then(function(){var v=k._dbInfo;v.db.transaction(function(z){$i(z,v,"DELETE FROM "+v.storeName,[],function(){R()},function(H,X){O(X)})})}).catch(O)});return T(C,_),C}function df(_){var k=this,C=new E(function(R,O){k.ready().then(function(){var v=k._dbInfo;v.db.transaction(function(z){$i(z,v,"SELECT COUNT(key) as c FROM "+v.storeName,[],function(H,X){var G=X.rows.item(0).c;R(G)},function(H,X){O(X)})})}).catch(O)});return T(C,_),C}function Ou(_,k){var C=this,R=new E(function(O,v){C.ready().then(function(){var z=C._dbInfo;z.db.transaction(function(H){$i(H,z,"SELECT key FROM "+z.storeName+" WHERE id = ? LIMIT 1",[_+1],function(X,G){var te=G.rows.length?G.rows.item(0).key:null;O(te)},function(X,G){v(G)})})}).catch(v)});return T(R,k),R}function cn(_){var k=this,C=new E(function(R,O){k.ready().then(function(){var v=k._dbInfo;v.db.transaction(function(z){$i(z,v,"SELECT key FROM "+v.storeName,[],function(H,X){for(var G=[],te=0;te<X.rows.length;te++)G.push(X.rows.item(te).key);R(G)},function(H,X){O(X)})})}).catch(O)});return T(C,_),C}function Sa(_){return new E(function(k,C){_.transaction(function(R){R.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(O,v){for(var z=[],H=0;H<v.rows.length;H++)z.push(v.rows.item(H).name);k({db:_,storeNames:z})},function(O,v){C(v)})},function(R){C(R)})})}function b(_,k){k=he.apply(this,arguments);var C=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||C.name,_.storeName=_.storeName||C.storeName);var R=this,O;return _.name?O=new E(function(v){var z;_.name===C.name?z=R._dbInfo.db:z=openDatabase(_.name,"","",0),_.storeName?v({db:z,storeNames:[_.storeName]}):v(Sa(z))}).then(function(v){return new E(function(z,H){v.db.transaction(function(X){function G(Ue){return new E(function(Qe,pt){X.executeSql("DROP TABLE IF EXISTS "+Ue,[],function(){Qe()},function(dt,Ot){pt(Ot)})})}for(var te=[],me=0,$e=v.storeNames.length;me<$e;me++)te.push(G(v.storeNames[me]));E.all(te).then(function(){z()}).catch(function(Ue){H(Ue)})},function(X){H(X)})})}):O=E.reject("Invalid arguments"),T(O,k),O}var S={_driver:"webSQLStorage",_initStorage:Fu,_support:In(),iterate:si,getItem:dh,setItem:_o,removeItem:Bu,clear:Ru,length:df,key:Ou,keys:cn,dropInstance:b};function A(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function y(_,k){var C=_.name+"/";return _.storeName!==k.storeName&&(C+=_.storeName+"/"),C}function I(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch{return!0}}function M(){return!I()||localStorage.length>0}function j(_){var k=this,C={};if(_)for(var R in _)C[R]=_[R];return C.keyPrefix=y(_,k._defaultConfig),M()?(k._dbInfo=C,C.serializer=vo,E.resolve()):E.reject()}function oe(_){var k=this,C=k.ready().then(function(){for(var R=k._dbInfo.keyPrefix,O=localStorage.length-1;O>=0;O--){var v=localStorage.key(O);v.indexOf(R)===0&&localStorage.removeItem(v)}});return T(C,_),C}function ye(_,k){var C=this;_=N(_);var R=C.ready().then(function(){var O=C._dbInfo,v=localStorage.getItem(O.keyPrefix+_);return v&&(v=O.serializer.deserialize(v)),v});return T(R,k),R}function Ke(_,k){var C=this,R=C.ready().then(function(){for(var O=C._dbInfo,v=O.keyPrefix,z=v.length,H=localStorage.length,X=1,G=0;G<H;G++){var te=localStorage.key(G);if(te.indexOf(v)===0){var me=localStorage.getItem(te);if(me&&(me=O.serializer.deserialize(me)),me=_(me,te.substring(z),X++),me!==void 0)return me}}});return T(R,k),R}function De(_,k){var C=this,R=C.ready().then(function(){var O=C._dbInfo,v;try{v=localStorage.key(_)}catch{v=null}return v&&(v=v.substring(O.keyPrefix.length)),v});return T(R,k),R}function Pt(_){var k=this,C=k.ready().then(function(){for(var R=k._dbInfo,O=localStorage.length,v=[],z=0;z<O;z++){var H=localStorage.key(z);H.indexOf(R.keyPrefix)===0&&v.push(H.substring(R.keyPrefix.length))}return v});return T(C,_),C}function ke(_){var k=this,C=k.keys().then(function(R){return R.length});return T(C,_),C}function rt(_,k){var C=this;_=N(_);var R=C.ready().then(function(){var O=C._dbInfo;localStorage.removeItem(O.keyPrefix+_)});return T(R,k),R}function ot(_,k,C){var R=this;_=N(_);var O=R.ready().then(function(){k===void 0&&(k=null);var v=k;return new E(function(z,H){var X=R._dbInfo;X.serializer.serialize(k,function(G,te){if(te)H(te);else try{localStorage.setItem(X.keyPrefix+_,G),z(v)}catch(me){(me.name==="QuotaExceededError"||me.name==="NS_ERROR_DOM_QUOTA_REACHED")&&H(me),H(me)}})})});return T(O,C),O}function ct(_,k){if(k=he.apply(this,arguments),_=typeof _!="function"&&_||{},!_.name){var C=this.config();_.name=_.name||C.name,_.storeName=_.storeName||C.storeName}var R=this,O;return _.name?O=new E(function(v){_.storeName?v(y(_,R._defaultConfig)):v(_.name+"/")}).then(function(v){for(var z=localStorage.length-1;z>=0;z--){var H=localStorage.key(z);H.indexOf(v)===0&&localStorage.removeItem(H)}}):O=E.reject("Invalid arguments"),T(O,k),O}var lt={_driver:"localStorageWrapper",_initStorage:j,_support:A(),iterate:Ke,getItem:ye,setItem:ot,removeItem:rt,clear:oe,length:ke,key:De,keys:Pt,dropInstance:ct},et=function(k,C){return k===C||typeof k=="number"&&typeof C=="number"&&isNaN(k)&&isNaN(C)},ft=function(k,C){for(var R=k.length,O=0;O<R;){if(et(k[O],C))return!0;O++}return!1},nt=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"},Ie={},ze={},xe={INDEXEDDB:Ea,WEBSQL:S,LOCALSTORAGE:lt},Be=[xe.INDEXEDDB._driver,xe.WEBSQL._driver,xe.LOCALSTORAGE._driver],Re=["dropInstance"],Ee=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Re),q={description:"",driver:Be.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function W(_,k){_[k]=function(){var C=arguments;return _.ready().then(function(){return _[k].apply(_,C)})}}function fe(){for(var _=1;_<arguments.length;_++){var k=arguments[_];if(k)for(var C in k)k.hasOwnProperty(C)&&(nt(k[C])?arguments[0][C]=k[C].slice():arguments[0][C]=k[C])}return arguments[0]}var re=function(){function _(k){c(this,_);for(var C in xe)if(xe.hasOwnProperty(C)){var R=xe[C],O=R._driver;this[C]=O,Ie[O]||this.defineDriver(R)}this._defaultConfig=fe({},q),this._config=fe({},this._defaultConfig,k),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(C){if((typeof C>"u"?"undefined":a(C))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var R in C){if(R==="storeName"&&(C[R]=C[R].replace(/\W/g,"_")),R==="version"&&typeof C[R]!="number")return new Error("Database version must be a number.");this._config[R]=C[R]}return"driver"in C&&C.driver?this.setDriver(this._config.driver):!0}else return typeof C=="string"?this._config[C]:this._config},_.prototype.defineDriver=function(C,R,O){var v=new E(function(z,H){try{var X=C._driver,G=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!C._driver){H(G);return}for(var te=Ee.concat("_initStorage"),me=0,$e=te.length;me<$e;me++){var Ue=te[me],Qe=!ft(Re,Ue);if((Qe||C[Ue])&&typeof C[Ue]!="function"){H(G);return}}var pt=function(){for(var cr=function(z0){return function(){var Md=new Error("Method "+z0+" is not implemented by the current driver"),Kd=E.reject(Md);return T(Kd,arguments[arguments.length-1]),Kd}},br=0,Rr=Re.length;br<Rr;br++){var mh=Re[br];C[mh]||(C[mh]=cr(mh))}};pt();var dt=function(cr){Ie[X]&&console.info("Redefining LocalForage driver: "+X),Ie[X]=C,ze[X]=cr,z()};"_support"in C?C._support&&typeof C._support=="function"?C._support().then(dt,H):dt(!!C._support):dt(!0)}catch(Ot){H(Ot)}});return F(v,R,O),v},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(C,R,O){var v=Ie[C]?E.resolve(Ie[C]):E.reject(new Error("Driver not found."));return F(v,R,O),v},_.prototype.getSerializer=function(C){var R=E.resolve(vo);return F(R,C),R},_.prototype.ready=function(C){var R=this,O=R._driverSet.then(function(){return R._ready===null&&(R._ready=R._initDriver()),R._ready});return F(O,C,C),O},_.prototype.setDriver=function(C,R,O){var v=this;nt(C)||(C=[C]);var z=this._getSupportedDrivers(C);function H(){v._config.driver=v.driver()}function X(me){return v._extend(me),H(),v._ready=v._initStorage(v._config),v._ready}function G(me){return function(){var $e=0;function Ue(){for(;$e<me.length;){var Qe=me[$e];return $e++,v._dbInfo=null,v._ready=null,v.getDriver(Qe).then(X).catch(Ue)}H();var pt=new Error("No available storage method found.");return v._driverSet=E.reject(pt),v._driverSet}return Ue()}}var te=this._driverSet!==null?this._driverSet.catch(function(){return E.resolve()}):E.resolve();return this._driverSet=te.then(function(){var me=z[0];return v._dbInfo=null,v._ready=null,v.getDriver(me).then(function($e){v._driver=$e._driver,H(),v._wrapLibraryMethodsWithReady(),v._initDriver=G(z)})}).catch(function(){H();var me=new Error("No available storage method found.");return v._driverSet=E.reject(me),v._driverSet}),F(this._driverSet,R,O),this._driverSet},_.prototype.supports=function(C){return!!ze[C]},_.prototype._extend=function(C){fe(this,C)},_.prototype._getSupportedDrivers=function(C){for(var R=[],O=0,v=C.length;O<v;O++){var z=C[O];this.supports(z)&&R.push(z)}return R},_.prototype._wrapLibraryMethodsWithReady=function(){for(var C=0,R=Ee.length;C<R;C++)W(this,Ee[C])},_.prototype.createInstance=function(C){return new _(C)},_}(),ne=new re;i.exports=ne},{3:3}]},{},[4])(4)})});var iC=ue((nC,by)=>{h();p();(function(r){var e={36:n(Math.pow(36,5)),16:n(Math.pow(16,7)),10:n(Math.pow(10,9)),2:n(Math.pow(2,30))},t={36:n(36),16:n(16),10:n(10),2:n(2)};function n(c,f){if(!(this instanceof n))return new n(c,f);if(this._low=0,this._high=0,this.remainder=null,typeof f>"u")return o.call(this,c);if(typeof c=="string")return a.call(this,c,f);i.call(this,c,f)}function i(c,f){return this._low=c|0,this._high=f|0,this}n.prototype.fromBits=i;function o(c){return this._low=c&65535,this._high=c>>>16,this}n.prototype.fromNumber=o;function a(c,f){var d=parseInt(c,f||10);return this._low=d&65535,this._high=d>>>16,this}n.prototype.fromString=a,n.prototype.toNumber=function(){return this._high*65536+this._low},n.prototype.toString=function(c){return this.toNumber().toString(c||10)},n.prototype.add=function(c){var f=this._low+c._low,d=f>>>16;return d+=this._high+c._high,this._low=f&65535,this._high=d&65535,this},n.prototype.subtract=function(c){return this.add(c.clone().negate())},n.prototype.multiply=function(c){var f=this._high,d=this._low,m=c._high,w=c._low,E,T;return T=d*w,E=T>>>16,E+=f*w,E&=65535,E+=d*m,this._low=T&65535,this._high=E&65535,this},n.prototype.div=function(c){if(c._low==0&&c._high==0)throw Error("division by zero");if(c._high==0&&c._low==1)return this.remainder=new n(0),this;if(c.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(c))return this.remainder=new n(0),this._low=1,this._high=0,this;for(var f=c.clone(),d=-1;!this.lt(f);)f.shiftLeft(1,!0),d++;for(this.remainder=this.clone(),this._low=0,this._high=0;d>=0;d--)f.shiftRight(1),this.remainder.lt(f)||(this.remainder.subtract(f),d>=16?this._high|=1<<d-16:this._low|=1<<d);return this},n.prototype.negate=function(){var c=(~this._low&65535)+1;return this._low=c&65535,this._high=~this._high+(c>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(c){return this._low==c._low&&this._high==c._high},n.prototype.greaterThan=n.prototype.gt=function(c){return this._high>c._high?!0:this._high<c._high?!1:this._low>c._low},n.prototype.lessThan=n.prototype.lt=function(c){return this._high<c._high?!0:this._high>c._high?!1:this._low<c._low},n.prototype.or=function(c){return this._low|=c._low,this._high|=c._high,this},n.prototype.and=function(c){return this._low&=c._low,this._high&=c._high,this},n.prototype.not=function(){return this._low=~this._low&65535,this._high=~this._high&65535,this},n.prototype.xor=function(c){return this._low^=c._low,this._high^=c._high,this},n.prototype.shiftRight=n.prototype.shiftr=function(c){return c>16?(this._low=this._high>>c-16,this._high=0):c==16?(this._low=this._high,this._high=0):(this._low=this._low>>c|this._high<<16-c&65535,this._high>>=c),this},n.prototype.shiftLeft=n.prototype.shiftl=function(c,f){return c>16?(this._high=this._low<<c-16,this._low=0,f||(this._high&=65535)):c==16?(this._high=this._low,this._low=0):(this._high=this._high<<c|this._low>>16-c,this._low=this._low<<c&65535,f||(this._high&=65535)),this},n.prototype.rotateLeft=n.prototype.rotl=function(c){var f=this._high<<16|this._low;return f=f<<c|f>>>32-c,this._low=f&65535,this._high=f>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(c){var f=this._high<<16|this._low;return f=f>>>c|f<<32-c,this._low=f&65535,this._high=f>>>16,this},n.prototype.clone=function(){return new n(this._low,this._high)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof by<"u"&&by.exports?by.exports=n:r.UINT32=n})(nC)});var sC=ue((oC,vy)=>{h();p();(function(r){var e={16:n(Math.pow(16,5)),10:n(Math.pow(10,5)),2:n(Math.pow(2,5))},t={16:n(16),10:n(10),2:n(2)};function n(c,f,d,m){if(!(this instanceof n))return new n(c,f,d,m);if(this.remainder=null,typeof c=="string")return a.call(this,c,f);if(typeof f>"u")return o.call(this,c);i.apply(this,arguments)}function i(c,f,d,m){return typeof d>"u"?(this._a00=c&65535,this._a16=c>>>16,this._a32=f&65535,this._a48=f>>>16,this):(this._a00=c|0,this._a16=f|0,this._a32=d|0,this._a48=m|0,this)}n.prototype.fromBits=i;function o(c){return this._a00=c&65535,this._a16=c>>>16,this._a32=0,this._a48=0,this}n.prototype.fromNumber=o;function a(c,f){f=f||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var d=e[f]||new n(Math.pow(f,5)),m=0,w=c.length;m<w;m+=5){var E=Math.min(5,w-m),T=parseInt(c.slice(m,m+E),f);this.multiply(E<5?new n(Math.pow(f,E)):d).add(new n(T))}return this}n.prototype.fromString=a,n.prototype.toNumber=function(){return this._a16*65536+this._a00},n.prototype.toString=function(c){c=c||10;var f=t[c]||new n(c);if(!this.gt(f))return this.toNumber().toString(c);for(var d=this.clone(),m=new Array(64),w=63;w>=0&&(d.div(f),m[w]=d.remainder.toNumber().toString(c),!!d.gt(f));w--);return m[w-1]=d.toNumber().toString(c),m.join("")},n.prototype.add=function(c){var f=this._a00+c._a00,d=f>>>16;d+=this._a16+c._a16;var m=d>>>16;m+=this._a32+c._a32;var w=m>>>16;return w+=this._a48+c._a48,this._a00=f&65535,this._a16=d&65535,this._a32=m&65535,this._a48=w&65535,this},n.prototype.subtract=function(c){return this.add(c.clone().negate())},n.prototype.multiply=function(c){var f=this._a00,d=this._a16,m=this._a32,w=this._a48,E=c._a00,T=c._a16,F=c._a32,N=c._a48,he=f*E,de=he>>>16;de+=f*T;var Pe=de>>>16;de&=65535,de+=d*E,Pe+=de>>>16,Pe+=f*F;var ie=Pe>>>16;return Pe&=65535,Pe+=d*T,ie+=Pe>>>16,Pe&=65535,Pe+=m*E,ie+=Pe>>>16,ie+=f*N,ie&=65535,ie+=d*F,ie&=65535,ie+=m*T,ie&=65535,ie+=w*E,this._a00=he&65535,this._a16=de&65535,this._a32=Pe&65535,this._a48=ie&65535,this},n.prototype.div=function(c){if(c._a16==0&&c._a32==0&&c._a48==0){if(c._a00==0)throw Error("division by zero");if(c._a00==1)return this.remainder=new n(0),this}if(c.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(c))return this.remainder=new n(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var f=c.clone(),d=-1;!this.lt(f);)f.shiftLeft(1,!0),d++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;d>=0;d--)f.shiftRight(1),this.remainder.lt(f)||(this.remainder.subtract(f),d>=48?this._a48|=1<<d-48:d>=32?this._a32|=1<<d-32:d>=16?this._a16|=1<<d-16:this._a00|=1<<d);return this},n.prototype.negate=function(){var c=(~this._a00&65535)+1;return this._a00=c&65535,c=(~this._a16&65535)+(c>>>16),this._a16=c&65535,c=(~this._a32&65535)+(c>>>16),this._a32=c&65535,this._a48=~this._a48+(c>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(c){return this._a48==c._a48&&this._a00==c._a00&&this._a32==c._a32&&this._a16==c._a16},n.prototype.greaterThan=n.prototype.gt=function(c){return this._a48>c._a48?!0:this._a48<c._a48?!1:this._a32>c._a32?!0:this._a32<c._a32?!1:this._a16>c._a16?!0:this._a16<c._a16?!1:this._a00>c._a00},n.prototype.lessThan=n.prototype.lt=function(c){return this._a48<c._a48?!0:this._a48>c._a48?!1:this._a32<c._a32?!0:this._a32>c._a32?!1:this._a16<c._a16?!0:this._a16>c._a16?!1:this._a00<c._a00},n.prototype.or=function(c){return this._a00|=c._a00,this._a16|=c._a16,this._a32|=c._a32,this._a48|=c._a48,this},n.prototype.and=function(c){return this._a00&=c._a00,this._a16&=c._a16,this._a32&=c._a32,this._a48&=c._a48,this},n.prototype.xor=function(c){return this._a00^=c._a00,this._a16^=c._a16,this._a32^=c._a32,this._a48^=c._a48,this},n.prototype.not=function(){return this._a00=~this._a00&65535,this._a16=~this._a16&65535,this._a32=~this._a32&65535,this._a48=~this._a48&65535,this},n.prototype.shiftRight=n.prototype.shiftr=function(c){return c%=64,c>=48?(this._a00=this._a48>>c-48,this._a16=0,this._a32=0,this._a48=0):c>=32?(c-=32,this._a00=(this._a32>>c|this._a48<<16-c)&65535,this._a16=this._a48>>c&65535,this._a32=0,this._a48=0):c>=16?(c-=16,this._a00=(this._a16>>c|this._a32<<16-c)&65535,this._a16=(this._a32>>c|this._a48<<16-c)&65535,this._a32=this._a48>>c&65535,this._a48=0):(this._a00=(this._a00>>c|this._a16<<16-c)&65535,this._a16=(this._a16>>c|this._a32<<16-c)&65535,this._a32=(this._a32>>c|this._a48<<16-c)&65535,this._a48=this._a48>>c&65535),this},n.prototype.shiftLeft=n.prototype.shiftl=function(c,f){return c%=64,c>=48?(this._a48=this._a00<<c-48,this._a32=0,this._a16=0,this._a00=0):c>=32?(c-=32,this._a48=this._a16<<c|this._a00>>16-c,this._a32=this._a00<<c&65535,this._a16=0,this._a00=0):c>=16?(c-=16,this._a48=this._a32<<c|this._a16>>16-c,this._a32=(this._a16<<c|this._a00>>16-c)&65535,this._a16=this._a00<<c&65535,this._a00=0):(this._a48=this._a48<<c|this._a32>>16-c,this._a32=(this._a32<<c|this._a16>>16-c)&65535,this._a16=(this._a16<<c|this._a00>>16-c)&65535,this._a00=this._a00<<c&65535),f||(this._a48&=65535),this},n.prototype.rotateLeft=n.prototype.rotl=function(c){if(c%=64,c==0)return this;if(c>=32){var f=this._a00;if(this._a00=this._a32,this._a32=f,f=this._a48,this._a48=this._a16,this._a16=f,c==32)return this;c-=32}var d=this._a48<<16|this._a32,m=this._a16<<16|this._a00,w=d<<c|m>>>32-c,E=m<<c|d>>>32-c;return this._a00=E&65535,this._a16=E>>>16,this._a32=w&65535,this._a48=w>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(c){if(c%=64,c==0)return this;if(c>=32){var f=this._a00;if(this._a00=this._a32,this._a32=f,f=this._a48,this._a48=this._a16,this._a16=f,c==32)return this;c-=32}var d=this._a48<<16|this._a32,m=this._a16<<16|this._a00,w=d>>>c|m<<32-c,E=m>>>c|d<<32-c;return this._a00=E&65535,this._a16=E>>>16,this._a32=w&65535,this._a48=w>>>16,this},n.prototype.clone=function(){return new n(this._a00,this._a16,this._a32,this._a48)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof vy<"u"&&vy.exports?vy.exports=n:r.UINT64=n})(oC)});var Rv=ue(Bv=>{h();p();Bv.UINT32=iC();Bv.UINT64=sC()});var lC=ue((yse,fC)=>{h();p();var ea=Rv().UINT32;ea.prototype.xxh_update=function(r,e){var t=lp._low,n=lp._high,i,o;o=r*t,i=o>>>16,i+=e*t,i&=65535,i+=r*n;var a=this._low+(o&65535),c=a>>>16;c+=this._high+(i&65535);var f=c<<16|a&65535;f=f<<13|f>>>19,a=f&65535,c=f>>>16,t=fp._low,n=fp._high,o=a*t,i=o>>>16,i+=c*t,i&=65535,i+=a*n,this._low=o&65535,this._high=i&65535};var fp=ea("2654435761"),lp=ea("2246822519"),aC=ea("3266489917"),$j=ea("668265263"),uC=ea("374761393");function zj(r){for(var e=[],t=0,n=r.length;t<n;t++){var i=r.charCodeAt(t);i<128?e.push(i):i<2048?e.push(192|i>>6,128|i&63):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|i&63):(t++,i=65536+((i&1023)<<10|r.charCodeAt(t)&1023),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return new Uint8Array(e)}function lc(){if(arguments.length==2)return new lc(arguments[1]).update(arguments[0]).digest();if(!(this instanceof lc))return new lc(arguments[0]);cC.call(this,arguments[0])}function cC(r){return this.seed=r instanceof ea?r.clone():ea(r),this.v1=this.seed.clone().add(fp).add(lp),this.v2=this.seed.clone().add(lp),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(fp),this.total_len=0,this.memsize=0,this.memory=null,this}lc.prototype.init=cC;lc.prototype.update=function(r){var e=typeof r=="string",t;e&&(r=zj(r),e=!1,t=!0),typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer&&(t=!0,r=new Uint8Array(r));var n=0,i=r.length,o=n+i;if(i==0)return this;if(this.total_len+=i,this.memsize==0&&(e?this.memory="":t?this.memory=new Uint8Array(16):this.memory=new Buffer(16)),this.memsize+i<16)return e?this.memory+=r:t?this.memory.set(r.subarray(0,i),this.memsize):r.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){e?this.memory+=r.slice(0,16-this.memsize):t?this.memory.set(r.subarray(0,16-this.memsize),this.memsize):r.copy(this.memory,this.memsize,0,16-this.memsize);var a=0;e?(this.v1.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v2.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v3.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v4.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2))):(this.v1.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v2.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v3.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v4.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2])),n+=16-this.memsize,this.memsize=0,e&&(this.memory="")}if(n<=o-16){var c=o-16;do e?(this.v1.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v2.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v3.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v4.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2))):(this.v1.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v2.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v3.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v4.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2])),n+=4;while(n<=c)}return n<o&&(e?this.memory+=r.slice(n):t?this.memory.set(r.subarray(n,o),this.memsize):r.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this};lc.prototype.digest=function(){var r=this.memory,e=typeof r=="string",t=0,n=this.memsize,i,o,a=new ea;for(this.total_len>=16?i=this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):i=this.seed.clone().add(uC),i.add(a.fromNumber(this.total_len));t<=n-4;)e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2)):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2]),i.add(a.multiply(aC)).rotl(17).multiply($j),t+=4;for(;t<n;)a.fromBits(e?r.charCodeAt(t++):r[t++],0),i.add(a.multiply(uC)).rotl(11).multiply(fp);return o=i.clone().shiftRight(15),i.xor(o).multiply(lp),o=i.clone().shiftRight(13),i.xor(o).multiply(aC),o=i.clone().shiftRight(16),i.xor(o),this.init(this.seed),i};fC.exports=lc});var yC=ue((bse,mC)=>{h();p();var dr=Rv().UINT64,Gt=dr("11400714785074694791"),lr=dr("14029467366897019727"),hC=dr("1609587929392839161"),hp=dr("9650029242287828579"),pC=dr("2870177450012600261");function qj(r){for(var e=[],t=0,n=r.length;t<n;t++){var i=r.charCodeAt(t);i<128?e.push(i):i<2048?e.push(192|i>>6,128|i&63):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|i&63):(t++,i=65536+((i&1023)<<10|r.charCodeAt(t)&1023),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return new Uint8Array(e)}function hc(){if(arguments.length==2)return new hc(arguments[1]).update(arguments[0]).digest();if(!(this instanceof hc))return new hc(arguments[0]);dC.call(this,arguments[0])}function dC(r){return this.seed=r instanceof dr?r.clone():dr(r),this.v1=this.seed.clone().add(Gt).add(lr),this.v2=this.seed.clone().add(lr),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(Gt),this.total_len=0,this.memsize=0,this.memory=null,this}hc.prototype.init=dC;hc.prototype.update=function(r){var e=typeof r=="string",t;e&&(r=qj(r),e=!1,t=!0),typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer&&(t=!0,r=new Uint8Array(r));var n=0,i=r.length,o=n+i;if(i==0)return this;if(this.total_len+=i,this.memsize==0&&(e?this.memory="":t?this.memory=new Uint8Array(32):this.memory=new Buffer(32)),this.memsize+i<32)return e?this.memory+=r:t?this.memory.set(r.subarray(0,i),this.memsize):r.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){e?this.memory+=r.slice(0,32-this.memsize):t?this.memory.set(r.subarray(0,32-this.memsize),this.memsize):r.copy(this.memory,this.memsize,0,32-this.memsize);var a=0;if(e){var c;c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v1.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v2.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v3.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v4.add(c.multiply(lr)).rotl(31).multiply(Gt)}else{var c;c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v1.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v2.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v3.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v4.add(c.multiply(lr)).rotl(31).multiply(Gt)}n+=32-this.memsize,this.memsize=0,e&&(this.memory="")}if(n<=o-32){var f=o-32;do{if(e){var c;c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v1.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v2.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v3.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v4.add(c.multiply(lr)).rotl(31).multiply(Gt)}else{var c;c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v1.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v2.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v3.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v4.add(c.multiply(lr)).rotl(31).multiply(Gt)}n+=8}while(n<=f)}return n<o&&(e?this.memory+=r.slice(n):t?this.memory.set(r.subarray(n,o),this.memsize):r.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this};hc.prototype.digest=function(){var r=this.memory,e=typeof r=="string",t=0,n=this.memsize,i,o,a=new dr;for(this.total_len>=32?(i=this.v1.clone().rotl(1),i.add(this.v2.clone().rotl(7)),i.add(this.v3.clone().rotl(12)),i.add(this.v4.clone().rotl(18)),i.xor(this.v1.multiply(lr).rotl(31).multiply(Gt)),i.multiply(Gt).add(hp),i.xor(this.v2.multiply(lr).rotl(31).multiply(Gt)),i.multiply(Gt).add(hp),i.xor(this.v3.multiply(lr).rotl(31).multiply(Gt)),i.multiply(Gt).add(hp),i.xor(this.v4.multiply(lr).rotl(31).multiply(Gt)),i.multiply(Gt).add(hp)):i=this.seed.clone().add(pC),i.add(a.fromNumber(this.total_len));t<=n-8;)e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2),r.charCodeAt(t+5)<<8|r.charCodeAt(t+4),r.charCodeAt(t+7)<<8|r.charCodeAt(t+6)):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2],r[t+5]<<8|r[t+4],r[t+7]<<8|r[t+6]),a.multiply(lr).rotl(31).multiply(Gt),i.xor(a).rotl(27).multiply(Gt).add(hp),t+=8;for(t+4<=n&&(e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2),0,0):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2],0,0),i.xor(a.multiply(Gt)).rotl(23).multiply(lr).add(hC),t+=4);t<n;)a.fromBits(e?r.charCodeAt(t++):r[t++],0,0,0),i.xor(a.multiply(pC)).rotl(11).multiply(Gt);return o=i.clone().shiftRight(33),i.xor(o).multiply(lr),o=i.clone().shiftRight(29),i.xor(o).multiply(hC),o=i.clone().shiftRight(32),i.xor(o),this.init(this.seed),i};mC.exports=hc});var wC=ue((xse,gC)=>{h();p();gC.exports={h32:lC(),h64:yC()}});var _C=ue(_y=>{"use strict";h();p();_y.byteLength=Vj;_y.toByteArray=Gj;_y.fromByteArray=Xj;var ys=[],so=[],Wj=typeof Uint8Array<"u"?Uint8Array:Array,Ov="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(pc=0,bC=Ov.length;pc<bC;++pc)ys[pc]=Ov[pc],so[Ov.charCodeAt(pc)]=pc;var pc,bC;so["-".charCodeAt(0)]=62;so["_".charCodeAt(0)]=63;function vC(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Vj(r){var e=vC(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Hj(r,e,t){return(e+t)*3/4-t}function Gj(r){var e,t=vC(r),n=t[0],i=t[1],o=new Wj(Hj(r,n,i)),a=0,c=i>0?n-4:n,f;for(f=0;f<c;f+=4)e=so[r.charCodeAt(f)]<<18|so[r.charCodeAt(f+1)]<<12|so[r.charCodeAt(f+2)]<<6|so[r.charCodeAt(f+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return i===2&&(e=so[r.charCodeAt(f)]<<2|so[r.charCodeAt(f+1)]>>4,o[a++]=e&255),i===1&&(e=so[r.charCodeAt(f)]<<10|so[r.charCodeAt(f+1)]<<4|so[r.charCodeAt(f+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function Yj(r){return ys[r>>18&63]+ys[r>>12&63]+ys[r>>6&63]+ys[r&63]}function Jj(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(Yj(n));return i.join("")}function Xj(r){for(var e,t=r.length,n=t%3,i=[],o=16383,a=0,c=t-n;a<c;a+=o)i.push(Jj(r,a,a+o>c?c:a+o));return n===1?(e=r[t-1],i.push(ys[e>>2]+ys[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(ys[e>>10]+ys[e>>4&63]+ys[e<<2&63]+"=")),i.join("")}});var xC=ue(Lv=>{h();p();Lv.read=function(r,e,t,n,i){var o,a,c=i*8-n-1,f=(1<<c)-1,d=f>>1,m=-7,w=t?i-1:0,E=t?-1:1,T=r[e+w];for(w+=E,o=T&(1<<-m)-1,T>>=-m,m+=c;m>0;o=o*256+r[e+w],w+=E,m-=8);for(a=o&(1<<-m)-1,o>>=-m,m+=n;m>0;a=a*256+r[e+w],w+=E,m-=8);if(o===0)o=1-d;else{if(o===f)return a?NaN:(T?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-d}return(T?-1:1)*a*Math.pow(2,o-n)};Lv.write=function(r,e,t,n,i,o){var a,c,f,d=o*8-i-1,m=(1<<d)-1,w=m>>1,E=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=n?0:o-1,F=n?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=m):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+w>=1?e+=E/f:e+=E*Math.pow(2,1-w),e*f>=2&&(a++,f/=2),a+w>=m?(c=0,a=m):a+w>=1?(c=(e*f-1)*Math.pow(2,i),a=a+w):(c=e*Math.pow(2,w-1)*Math.pow(2,i),a=0));i>=8;r[t+T]=c&255,T+=F,c/=256,i-=8);for(a=a<<i|c,d+=i;d>0;r[t+T]=a&255,T+=F,a/=256,d-=8);r[t+T-F]|=N*128}});var mc=ue(ul=>{"use strict";h();p();var Uv=_C(),sl=xC(),EC=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ul.Buffer=Q;ul.SlowBuffer=n$;ul.INSPECT_MAX_BYTES=50;var xy=2147483647;ul.kMaxLength=xy;Q.TYPED_ARRAY_SUPPORT=Qj();!Q.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Qj(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(Q.prototype,"parent",{enumerable:!0,get:function(){if(!!Q.isBuffer(this))return this.buffer}});Object.defineProperty(Q.prototype,"offset",{enumerable:!0,get:function(){if(!!Q.isBuffer(this))return this.byteOffset}});function ta(r){if(r>xy)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,Q.prototype),e}function Q(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return jv(r)}return CC(r,e,t)}Q.poolSize=8192;function CC(r,e,t){if(typeof r=="string")return e$(r,e);if(ArrayBuffer.isView(r))return t$(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(gs(r,ArrayBuffer)||r&&gs(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(gs(r,SharedArrayBuffer)||r&&gs(r.buffer,SharedArrayBuffer)))return Mv(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return Q.from(n,e,t);let i=r$(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return Q.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}Q.from=function(r,e,t){return CC(r,e,t)};Object.setPrototypeOf(Q.prototype,Uint8Array.prototype);Object.setPrototypeOf(Q,Uint8Array);function PC(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Zj(r,e,t){return PC(r),r<=0?ta(r):e!==void 0?typeof t=="string"?ta(r).fill(e,t):ta(r).fill(e):ta(r)}Q.alloc=function(r,e,t){return Zj(r,e,t)};function jv(r){return PC(r),ta(r<0?0:$v(r)|0)}Q.allocUnsafe=function(r){return jv(r)};Q.allocUnsafeSlow=function(r){return jv(r)};function e$(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Q.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=IC(r,e)|0,n=ta(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Nv(r){let e=r.length<0?0:$v(r.length)|0,t=ta(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function t$(r){if(gs(r,Uint8Array)){let e=new Uint8Array(r);return Mv(e.buffer,e.byteOffset,e.byteLength)}return Nv(r)}function Mv(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,Q.prototype),n}function r$(r){if(Q.isBuffer(r)){let e=$v(r.length)|0,t=ta(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||qv(r.length)?ta(0):Nv(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Nv(r.data)}function $v(r){if(r>=xy)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+xy.toString(16)+" bytes");return r|0}function n$(r){return+r!=r&&(r=0),Q.alloc(+r)}Q.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==Q.prototype};Q.compare=function(e,t){if(gs(e,Uint8Array)&&(e=Q.from(e,e.offset,e.byteLength)),gs(t,Uint8Array)&&(t=Q.from(t,t.offset,t.byteLength)),!Q.isBuffer(e)||!Q.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};Q.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Q.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Q.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=Q.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let a=e[n];if(gs(a,Uint8Array))o+a.length>i.length?(Q.isBuffer(a)||(a=Q.from(a)),a.copy(i,o)):Uint8Array.prototype.set.call(i,a,o);else if(Q.isBuffer(a))a.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=a.length}return i};function IC(r,e){if(Q.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||gs(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Kv(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return NC(r).length;default:if(i)return n?-1:Kv(r).length;e=(""+e).toLowerCase(),i=!0}}Q.byteLength=IC;function i$(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return d$(this,e,t);case"utf8":case"utf-8":return kC(this,e,t);case"ascii":return h$(this,e,t);case"latin1":case"binary":return p$(this,e,t);case"base64":return f$(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m$(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}Q.prototype._isBuffer=!0;function dc(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}Q.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)dc(this,t,t+1);return this};Q.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)dc(this,t,t+3),dc(this,t+1,t+2);return this};Q.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)dc(this,t,t+7),dc(this,t+1,t+6),dc(this,t+2,t+5),dc(this,t+3,t+4);return this};Q.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?kC(this,0,e):i$.apply(this,arguments)};Q.prototype.toLocaleString=Q.prototype.toString;Q.prototype.equals=function(e){if(!Q.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Q.compare(this,e)===0};Q.prototype.inspect=function(){let e="",t=ul.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};EC&&(Q.prototype[EC]=Q.prototype.inspect);Q.prototype.compare=function(e,t,n,i,o){if(gs(e,Uint8Array)&&(e=Q.from(e,e.offset,e.byteLength)),!Q.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let a=o-i,c=n-t,f=Math.min(a,c),d=this.slice(i,o),m=e.slice(t,n);for(let w=0;w<f;++w)if(d[w]!==m[w]){a=d[w],c=m[w];break}return a<c?-1:c<a?1:0};function TC(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,qv(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=Q.from(e,n)),Q.isBuffer(e))return e.length===0?-1:AC(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):AC(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function AC(r,e,t,n,i){let o=1,a=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,c/=2,t/=2}function f(m,w){return o===1?m[w]:m.readUInt16BE(w*o)}let d;if(i){let m=-1;for(d=t;d<a;d++)if(f(r,d)===f(e,m===-1?0:d-m)){if(m===-1&&(m=d),d-m+1===c)return m*o}else m!==-1&&(d-=d-m),m=-1}else for(t+c>a&&(t=a-c),d=t;d>=0;d--){let m=!0;for(let w=0;w<c;w++)if(f(r,d+w)!==f(e,w)){m=!1;break}if(m)return d}return-1}Q.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};Q.prototype.indexOf=function(e,t,n){return TC(this,e,t,n,!0)};Q.prototype.lastIndexOf=function(e,t,n){return TC(this,e,t,n,!1)};function o$(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let a;for(a=0;a<n;++a){let c=parseInt(e.substr(a*2,2),16);if(qv(c))return a;r[t+a]=c}return a}function s$(r,e,t,n){return Ey(Kv(e,r.length-t),r,t,n)}function a$(r,e,t,n){return Ey(b$(e),r,t,n)}function u$(r,e,t,n){return Ey(NC(e),r,t,n)}function c$(r,e,t,n){return Ey(v$(e,r.length-t),r,t,n)}Q.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let a=!1;for(;;)switch(i){case"hex":return o$(this,e,t,n);case"utf8":case"utf-8":return s$(this,e,t,n);case"ascii":case"latin1":case"binary":return a$(this,e,t,n);case"base64":return u$(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c$(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};Q.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function f$(r,e,t){return e===0&&t===r.length?Uv.fromByteArray(r):Uv.fromByteArray(r.slice(e,t))}function kC(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],a=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){let f,d,m,w;switch(c){case 1:o<128&&(a=o);break;case 2:f=r[i+1],(f&192)===128&&(w=(o&31)<<6|f&63,w>127&&(a=w));break;case 3:f=r[i+1],d=r[i+2],(f&192)===128&&(d&192)===128&&(w=(o&15)<<12|(f&63)<<6|d&63,w>2047&&(w<55296||w>57343)&&(a=w));break;case 4:f=r[i+1],d=r[i+2],m=r[i+3],(f&192)===128&&(d&192)===128&&(m&192)===128&&(w=(o&15)<<18|(f&63)<<12|(d&63)<<6|m&63,w>65535&&w<1114112&&(a=w))}}a===null?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=c}return l$(n)}var SC=4096;function l$(r){let e=r.length;if(e<=SC)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=SC));return t}function h$(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function p$(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function d$(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=_$[r[o]];return i}function m$(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}Q.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,Q.prototype),i};function nn(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}Q.prototype.readUintLE=Q.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||nn(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return i};Q.prototype.readUintBE=Q.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||nn(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};Q.prototype.readUint8=Q.prototype.readUInt8=function(e,t){return e=e>>>0,t||nn(e,1,this.length),this[e]};Q.prototype.readUint16LE=Q.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||nn(e,2,this.length),this[e]|this[e+1]<<8};Q.prototype.readUint16BE=Q.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||nn(e,2,this.length),this[e]<<8|this[e+1]};Q.prototype.readUint32LE=Q.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||nn(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Q.prototype.readUint32BE=Q.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||nn(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Q.prototype.readBigUInt64LE=Ja(function(e){e=e>>>0,al(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pp(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});Q.prototype.readBigUInt64BE=Ja(function(e){e=e>>>0,al(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pp(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});Q.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||nn(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};Q.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||nn(e,t,this.length);let i=t,o=1,a=this[e+--i];for(;i>0&&(o*=256);)a+=this[e+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};Q.prototype.readInt8=function(e,t){return e=e>>>0,t||nn(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Q.prototype.readInt16LE=function(e,t){e=e>>>0,t||nn(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Q.prototype.readInt16BE=function(e,t){e=e>>>0,t||nn(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Q.prototype.readInt32LE=function(e,t){return e=e>>>0,t||nn(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Q.prototype.readInt32BE=function(e,t){return e=e>>>0,t||nn(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Q.prototype.readBigInt64LE=Ja(function(e){e=e>>>0,al(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pp(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});Q.prototype.readBigInt64BE=Ja(function(e){e=e>>>0,al(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pp(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});Q.prototype.readFloatLE=function(e,t){return e=e>>>0,t||nn(e,4,this.length),sl.read(this,e,!0,23,4)};Q.prototype.readFloatBE=function(e,t){return e=e>>>0,t||nn(e,4,this.length),sl.read(this,e,!1,23,4)};Q.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||nn(e,8,this.length),sl.read(this,e,!0,52,8)};Q.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||nn(e,8,this.length),sl.read(this,e,!1,52,8)};function Qn(r,e,t,n,i,o){if(!Q.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}Q.prototype.writeUintLE=Q.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Qn(this,e,t,n,c,0)}let o=1,a=0;for(this[t]=e&255;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n};Q.prototype.writeUintBE=Q.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Qn(this,e,t,n,c,0)}let o=n-1,a=1;for(this[t+o]=e&255;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n};Q.prototype.writeUint8=Q.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,1,255,0),this[t]=e&255,t+1};Q.prototype.writeUint16LE=Q.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};Q.prototype.writeUint16BE=Q.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};Q.prototype.writeUint32LE=Q.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};Q.prototype.writeUint32BE=Q.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function FC(r,e,t,n,i){UC(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,t}function BC(r,e,t,n,i){UC(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=a,a=a>>8,r[t+2]=a,a=a>>8,r[t+1]=a,a=a>>8,r[t]=a,t+8}Q.prototype.writeBigUInt64LE=Ja(function(e,t=0){return FC(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});Q.prototype.writeBigUInt64BE=Ja(function(e,t=0){return BC(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});Q.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*n-1);Qn(this,e,t,n,f-1,-f)}let o=0,a=1,c=0;for(this[t]=e&255;++o<n&&(a*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};Q.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*n-1);Qn(this,e,t,n,f-1,-f)}let o=n-1,a=1,c=0;for(this[t+o]=e&255;--o>=0&&(a*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};Q.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};Q.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};Q.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};Q.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};Q.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Qn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};Q.prototype.writeBigInt64LE=Ja(function(e,t=0){return FC(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Q.prototype.writeBigInt64BE=Ja(function(e,t=0){return BC(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function RC(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function OC(r,e,t,n,i){return e=+e,t=t>>>0,i||RC(r,e,t,4,34028234663852886e22,-34028234663852886e22),sl.write(r,e,t,n,23,4),t+4}Q.prototype.writeFloatLE=function(e,t,n){return OC(this,e,t,!0,n)};Q.prototype.writeFloatBE=function(e,t,n){return OC(this,e,t,!1,n)};function LC(r,e,t,n,i){return e=+e,t=t>>>0,i||RC(r,e,t,8,17976931348623157e292,-17976931348623157e292),sl.write(r,e,t,n,52,8),t+8}Q.prototype.writeDoubleLE=function(e,t,n){return LC(this,e,t,!0,n)};Q.prototype.writeDoubleBE=function(e,t,n){return LC(this,e,t,!1,n)};Q.prototype.copy=function(e,t,n,i){if(!Q.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};Q.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!Q.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let a=e.charCodeAt(0);(i==="utf8"&&a<128||i==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let a=Q.isBuffer(e)?e:Q.from(e,i),c=a.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%c]}return this};var ol={};function zv(r,e,t){ol[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}zv("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);zv("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);zv("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=DC(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=DC(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function DC(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function y$(r,e,t){al(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&pp(e,r.length-(t+1))}function UC(r,e,t,n,i,o){if(r>t||r<e){let a=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${a} and < 2${a} ** ${(o+1)*8}${a}`:c=`>= -(2${a} ** ${(o+1)*8-1}${a}) and < 2 ** ${(o+1)*8-1}${a}`:c=`>= ${e}${a} and <= ${t}${a}`,new ol.ERR_OUT_OF_RANGE("value",c,r)}y$(n,i,o)}function al(r,e){if(typeof r!="number")throw new ol.ERR_INVALID_ARG_TYPE(e,"number",r)}function pp(r,e,t){throw Math.floor(r)!==r?(al(r,t),new ol.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new ol.ERR_BUFFER_OUT_OF_BOUNDS:new ol.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var g$=/[^+/0-9A-Za-z-_]/g;function w$(r){if(r=r.split("=")[0],r=r.trim().replace(g$,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Kv(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function b$(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function v$(r,e){let t,n,i,o=[];for(let a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function NC(r){return Uv.toByteArray(w$(r))}function Ey(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function gs(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function qv(r){return r!==r}var _$=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function Ja(r){return typeof BigInt>"u"?x$:r}function x$(){throw new Error("BigInt not supported")}});var ao=ue(mr=>{"use strict";h();p();var E$=mr&&mr.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A$=mr&&mr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mr,"__esModule",{value:!0});var On=A$(wC()),S$=mc();function D$(r,e){for(var t=new Array(r),n=typeof e=="function"?e:function(){return e},i=0;i<r;i++)t[i]=n();return t}mr.allocateArray=D$;function Wv(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=ra());var n=On.default.h64(r,t+1),i=On.default.h64(r,t+2);if(e)return{first:n.toNumber(),second:i.toNumber()};var o=n.toString(16);o.length<16&&(o="0".repeat(16-o.length)+o);var a=i.toString(16);return a.length<16&&(a="0".repeat(16-a.length)+a),{first:Number(o),second:Number(a)}}mr.hashTwice=Wv;function C$(r,e){e===void 0&&(e=ra());var t=On.default.h64(r,e+1),n=On.default.h64(r,e+2),i=t.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{first:i,second:o}}mr.hashTwiceAsString=C$;function P$(r,e){e===void 0&&(e=ra());var t=On.default.h64(r,e+1),n=On.default.h64(r,e+2),i=t.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{int:{first:t.toNumber(),second:n.toNumber()},string:{first:i,second:o}}}mr.allInOneHashTwice=P$;function Vv(r,e,t,n){return Math.abs((e+r*t)%n)}mr.doubleHashing=Vv;function I$(r,e,t,n){n===void 0&&(n=ra());function i(o,a,c,f,d){if(d===void 0&&(d=[]),d.length===f)return d;var m=Wv(a,!0,n+c%o),w=Vv(o,m.first,m.second,c);return d.includes(w)||d.push(w),i(o+1,a,c,f,d)}return i(1,r,e,t)}mr.getDistinctIndices=I$;function T$(r,e,t,n){n===void 0&&(n=ra());for(var i=[],o=1;o<=t;o++){var a=Wv(r,!0,n+e%o);i.push(Vv(o,a.first,a.second,e))}if(i.length!==t)throw new Error("report this, please, shouldnt be of different size");return i}mr.getIndices=T$;function k$(r,e,t){t===void 0&&(t=Math.random),r=Math.ceil(r),e=Math.floor(e);var n=t();return Math.floor(n*(e-r+1))+r}mr.randomInt=k$;function F$(r,e){for(var t=Math.max(r.length,e.length),n=S$.Buffer.allocUnsafe(t).fill(0),i=0;i<t;++i)i<r.length&&i<e.length?n[t-i-1]=r[r.length-i-1]^e[e.length-i-1]:i<r.length&&i>=e.length?n[t-i-1]^=r[r.length-i-1]:i<e.length&&i>=r.length&&(n[t-i-1]^=e[e.length-i-1]);for(var o=0,a=n.values(),c=a.next();!c.done&&c.value===0;)o++,c=a.next();var f=n.slice(o);return f}mr.xorBuffer=F$;function B$(r){var e,t;if(r===null||!r)return!0;try{for(var n=E$(r),i=n.next();!i.done;i=n.next()){var o=i.value;if(o!==0)return!1}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return!0}mr.isEmptyBuffer=B$;function R$(r,e,t){switch(e===void 0&&(e=ra()),t){case 32:return On.default.h32(r,e).toNumber();case 64:return On.default.h64(r,e).toNumber();default:return On.default.h64(r,e).toNumber()}}mr.hashAsInt=R$;function O$(r,e,t,n){e===void 0&&(e=ra()),t===void 0&&(t=16),n===void 0&&(n=64);var i;switch(n){case 32:i=On.default.h32(r,e);break;case 64:i=On.default.h64(r,e);break;default:i=On.default.h64(r,e);break}var o="";return t===16?(o=i.toString(t),o.length<n/4&&(o="0".repeat(n/4-o.length)+o)):t===2&&(o=Hv(i.toString(16)),o.length<n&&(o="0".repeat(n-o.length)+o)),o}mr.hashAsString=O$;function L$(r,e,t,n){e===void 0&&(e=ra()),t===void 0&&(t=16),n===void 0&&(n=64);var i;switch(n){case 32:i=On.default.h32(r,e);break;case 64:i=On.default.h64(r,e);break;default:i=On.default.h64(r,e);break}var o="";return t===16?(o=i.toString(t),o.length<n/4&&(o="0".repeat(n/4-o.length)+o)):t===2&&(o=Hv(i.toString(16)),o.length<n&&(o="0".repeat(n-o.length)+o)),{int:i.toNumber(),string:o}}mr.hashIntAndString=L$;function ra(){return 78187493520}mr.getDefaultSeed=ra;function U$(r){return Math.ceil(Math.pow(2,Math.floor(Math.log(r)/Math.log(2))))}mr.power2=U$;function Hv(r){return parseInt(r,16).toString(2)}mr.hex2bin=Hv;function N$(r){return[128,64,32,16,8,4,2,1].map(function(e){return(e&r)>0?1:0})}mr.uint8ToBits=N$;function M$(r){return r.reduce(function(e,t,n){if(t===0)return e;if(t===1)return e+Math.pow(2,7-n);throw new Error("Not binary")},0)}mr.bitsToUint8=M$});var KC=ue((MC,Gv)=>{h();p();(function(r,e,t){function n(c){var f=this,d=a();f.next=function(){var m=2091639*f.s0+f.c*23283064365386963e-26;return f.s0=f.s1,f.s1=f.s2,f.s2=m-(f.c=m|0)},f.c=1,f.s0=d(" "),f.s1=d(" "),f.s2=d(" "),f.s0-=d(c),f.s0<0&&(f.s0+=1),f.s1-=d(c),f.s1<0&&(f.s1+=1),f.s2-=d(c),f.s2<0&&(f.s2+=1),d=null}function i(c,f){return f.c=c.c,f.s0=c.s0,f.s1=c.s1,f.s2=c.s2,f}function o(c,f){var d=new n(c),m=f&&f.state,w=d.next;return w.int32=function(){return d.next()*4294967296|0},w.double=function(){return w()+(w()*2097152|0)*11102230246251565e-32},w.quick=w,m&&(typeof m=="object"&&i(m,d),w.state=function(){return i(d,{})}),w}function a(){var c=4022871197,f=function(d){d=String(d);for(var m=0;m<d.length;m++){c+=d.charCodeAt(m);var w=.02519603282416938*c;c=w>>>0,w-=c,w*=c,c=w>>>0,w-=c,c+=w*4294967296}return(c>>>0)*23283064365386963e-26};return f}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.alea=o})(MC,typeof Gv=="object"&&Gv,typeof define=="function"&&define)});var $C=ue((jC,Yv)=>{h();p();(function(r,e,t){function n(a){var c=this,f="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var m=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^m^m>>>8},a===(a|0)?c.x=a:f+=a;for(var d=0;d<f.length+64;d++)c.x^=f.charCodeAt(d)|0,c.next()}function i(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c}function o(a,c){var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,E=(f.next()>>>0)/4294967296,T=(w+E)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(typeof d=="object"&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor128=o})(jC,typeof Yv=="object"&&Yv,typeof define=="function"&&define)});var qC=ue((zC,Jv)=>{h();p();(function(r,e,t){function n(a){var c=this,f="";c.next=function(){var m=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(m^m<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,a===(a|0)?c.x=a:f+=a;for(var d=0;d<f.length+64;d++)c.x^=f.charCodeAt(d)|0,d==f.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c.v=a.v,c.d=a.d,c}function o(a,c){var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,E=(f.next()>>>0)/4294967296,T=(w+E)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(typeof d=="object"&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorwow=o})(zC,typeof Jv=="object"&&Jv,typeof define=="function"&&define)});var VC=ue((WC,Xv)=>{h();p();(function(r,e,t){function n(a){var c=this;c.next=function(){var d=c.x,m=c.i,w,E,T;return w=d[m],w^=w>>>7,E=w^w<<24,w=d[m+1&7],E^=w^w>>>10,w=d[m+3&7],E^=w^w>>>3,w=d[m+4&7],E^=w^w<<7,w=d[m+7&7],w=w^w<<13,E^=w^w<<9,d[m]=E,c.i=m+1&7,E};function f(d,m){var w,E,T=[];if(m===(m|0))E=T[0]=m;else for(m=""+m,w=0;w<m.length;++w)T[w&7]=T[w&7]<<15^m.charCodeAt(w)+T[w+1&7]<<13;for(;T.length<8;)T.push(0);for(w=0;w<8&&T[w]===0;++w);for(w==8?E=T[7]=-1:E=T[w],d.x=T,d.i=0,w=256;w>0;--w)d.next()}f(c,a)}function i(a,c){return c.x=a.x.slice(),c.i=a.i,c}function o(a,c){a==null&&(a=+new Date);var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,E=(f.next()>>>0)/4294967296,T=(w+E)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(d.x&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorshift7=o})(WC,typeof Xv=="object"&&Xv,typeof define=="function"&&define)});var GC=ue((HC,Qv)=>{h();p();(function(r,e,t){function n(a){var c=this;c.next=function(){var d=c.w,m=c.X,w=c.i,E,T;return c.w=d=d+1640531527|0,T=m[w+34&127],E=m[w=w+1&127],T^=T<<13,E^=E<<17,T^=T>>>15,E^=E>>>12,T=m[w]=T^E,c.i=w,T+(d^d>>>16)|0};function f(d,m){var w,E,T,F,N,he=[],de=128;for(m===(m|0)?(E=m,m=null):(m=m+"\0",E=0,de=Math.max(de,m.length)),T=0,F=-32;F<de;++F)m&&(E^=m.charCodeAt((F+32)%m.length)),F===0&&(N=E),E^=E<<10,E^=E>>>15,E^=E<<4,E^=E>>>13,F>=0&&(N=N+1640531527|0,w=he[F&127]^=E+N,T=w==0?T+1:0);for(T>=128&&(he[(m&&m.length||0)&127]=-1),T=127,F=4*128;F>0;--F)E=he[T+34&127],w=he[T=T+1&127],E^=E<<13,w^=w<<17,E^=E>>>15,w^=w>>>12,he[T]=E^w;d.w=N,d.X=he,d.i=T}f(c,a)}function i(a,c){return c.i=a.i,c.w=a.w,c.X=a.X.slice(),c}function o(a,c){a==null&&(a=+new Date);var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,E=(f.next()>>>0)/4294967296,T=(w+E)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(d.X&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor4096=o})(HC,typeof Qv=="object"&&Qv,typeof define=="function"&&define)});var JC=ue((YC,Zv)=>{h();p();(function(r,e,t){function n(a){var c=this,f="";c.next=function(){var m=c.b,w=c.c,E=c.d,T=c.a;return m=m<<25^m>>>7^w,w=w-E|0,E=E<<24^E>>>8^T,T=T-m|0,c.b=m=m<<20^m>>>12^w,c.c=w=w-E|0,c.d=E<<16^w>>>16^T,c.a=T-m|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,a===Math.floor(a)?(c.a=a/4294967296|0,c.b=a|0):f+=a;for(var d=0;d<f.length+20;d++)c.b^=f.charCodeAt(d)|0,c.next()}function i(a,c){return c.a=a.a,c.b=a.b,c.c=a.c,c.d=a.d,c}function o(a,c){var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,E=(f.next()>>>0)/4294967296,T=(w+E)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(typeof d=="object"&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.tychei=o})(YC,typeof Zv=="object"&&Zv,typeof define=="function"&&define)});var e_=ue(()=>{h();p()});var QC=ue((XC,Ay)=>{h();p();(function(r,e,t){var n=256,i=6,o=52,a="random",c=t.pow(n,i),f=t.pow(2,o),d=f*2,m=n-1,w;function E(ie,be,Ae){var Y=[];be=be==!0?{entropy:!0}:be||{};var ge=he(N(be.entropy?[ie,Pe(e)]:ie??de(),3),Y),_e=new T(Y),Me=function(){for(var vt=_e.g(i),Ut=c,Rt=0;vt<f;)vt=(vt+Rt)*n,Ut*=n,Rt=_e.g(1);for(;vt>=d;)vt/=2,Ut/=2,Rt>>>=1;return(vt+Rt)/Ut};return Me.int32=function(){return _e.g(4)|0},Me.quick=function(){return _e.g(4)/4294967296},Me.double=Me,he(Pe(_e.S),e),(be.pass||Ae||function(vt,Ut,Rt,qt){return qt&&(qt.S&&F(qt,_e),vt.state=function(){return F(_e,{})}),Rt?(t[a]=vt,Ut):vt})(Me,ge,"global"in be?be.global:this==t,be.state)}function T(ie){var be,Ae=ie.length,Y=this,ge=0,_e=Y.i=Y.j=0,Me=Y.S=[];for(Ae||(ie=[Ae++]);ge<n;)Me[ge]=ge++;for(ge=0;ge<n;ge++)Me[ge]=Me[_e=m&_e+ie[ge%Ae]+(be=Me[ge])],Me[_e]=be;(Y.g=function(vt){for(var Ut,Rt=0,qt=Y.i,hr=Y.j,Mt=Y.S;vt--;)Ut=Mt[qt=m&qt+1],Rt=Rt*n+Mt[m&(Mt[qt]=Mt[hr=m&hr+Ut])+(Mt[hr]=Ut)];return Y.i=qt,Y.j=hr,Rt})(n)}function F(ie,be){return be.i=ie.i,be.j=ie.j,be.S=ie.S.slice(),be}function N(ie,be){var Ae=[],Y=typeof ie,ge;if(be&&Y=="object")for(ge in ie)try{Ae.push(N(ie[ge],be-1))}catch{}return Ae.length?Ae:Y=="string"?ie:ie+"\0"}function he(ie,be){for(var Ae=ie+"",Y,ge=0;ge<Ae.length;)be[m&ge]=m&(Y^=be[m&ge]*19)+Ae.charCodeAt(ge++);return Pe(be)}function de(){try{var ie;return w&&(ie=w.randomBytes)?ie=ie(n):(ie=new Uint8Array(n),(r.crypto||r.msCrypto).getRandomValues(ie)),Pe(ie)}catch{var be=r.navigator,Ae=be&&be.plugins;return[+new Date,r,Ae,r.screen,Pe(e)]}}function Pe(ie){return String.fromCharCode.apply(0,ie)}if(he(t.random(),e),typeof Ay=="object"&&Ay.exports){Ay.exports=E;try{w=e_()}catch{}}else typeof define=="function"&&define.amd?define(function(){return E}):t["seed"+a]=E})(typeof self<"u"?self:XC,[],Math)});var eP=ue((rae,ZC)=>{h();p();var K$=KC(),j$=$C(),$$=qC(),z$=VC(),q$=GC(),W$=JC(),yc=QC();yc.alea=K$;yc.xor128=j$;yc.xorwow=$$;yc.xorshift7=z$;yc.xor4096=q$;yc.tychei=W$;ZC.exports=yc});var Bo=ue(gc=>{"use strict";h();p();var V$=gc&&gc.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},H$=gc&&gc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gc,"__esModule",{value:!0});var G$=V$(ao()),tP=H$(eP()),Y$=function(){function r(){this._seed=G$.getDefaultSeed(),this._rng=tP.default(""+this._seed)}return Object.defineProperty(r.prototype,"seed",{get:function(){return this._seed},set:function(e){this._seed=e,this._rng=tP.default(""+this._seed)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"random",{get:function(){return this._rng},enumerable:!0,configurable:!0}),r.prototype.saveAsJSON=function(){throw new Error("not-implemented")},r.fromJSON=function(e){throw new Error("not-implemented")},r}();gc.default=Y$});var nP=ue(()=>{h();p();var rP;(function(r){(function(e){var t=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(r);typeof t.Reflect>"u"?t.Reflect=r:n=i(t.Reflect,n),e(n);function i(o,a){return function(c,f){typeof o[c]!="function"&&Object.defineProperty(o,c,{configurable:!0,writable:!0,value:f}),a&&a(c,f)}}})(function(e){var t=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",c={__proto__:[]}instanceof Array,f=!a&&!c,d={create:a?function(){return un(Object.create(null))}:c?function(){return un({__proto__:null})}:function(){return un({})},has:f?function($,J){return t.call($,J)}:function($,J){return J in $},get:f?function($,J){return t.call($,J)?$[J]:void 0}:function($,J){return $[J]}},m=Object.getPrototypeOf(Function),w=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",E=!w&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:$n(),T=!w&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:zn(),F=!w&&typeof WeakMap=="function"?WeakMap:wo(),N=new F;function he($,J,le,ve){if(er(le)){if(!ji($))throw new TypeError;if(!Wr(J))throw new TypeError;return vt($,J)}else{if(!ji($))throw new TypeError;if(!Ve(J))throw new TypeError;if(!Ve(ve)&&!er(ve)&&!Wt(ve))throw new TypeError;return Wt(ve)&&(ve=void 0),le=Br(le),Ut($,J,le,ve)}}e("decorate",he);function de($,J){function le(ve,je){if(!Ve(ve))throw new TypeError;if(!er(je)&&!go(je))throw new TypeError;Pn($,J,ve,je)}return le}e("metadata",de);function Pe($,J,le,ve){if(!Ve(le))throw new TypeError;return er(ve)||(ve=Br(ve)),Pn($,J,le,ve)}e("defineMetadata",Pe);function ie($,J,le){if(!Ve(J))throw new TypeError;return er(le)||(le=Br(le)),qt($,J,le)}e("hasMetadata",ie);function be($,J,le){if(!Ve(J))throw new TypeError;return er(le)||(le=Br(le)),hr($,J,le)}e("hasOwnMetadata",be);function Ae($,J,le){if(!Ve(J))throw new TypeError;return er(le)||(le=Br(le)),Mt($,J,le)}e("getMetadata",Ae);function Y($,J,le){if(!Ve(J))throw new TypeError;return er(le)||(le=Br(le)),Kr($,J,le)}e("getOwnMetadata",Y);function ge($,J){if(!Ve($))throw new TypeError;return er(J)||(J=Br(J)),Fr($,J)}e("getMetadataKeys",ge);function _e($,J){if(!Ve($))throw new TypeError;return er(J)||(J=Br(J)),qr($,J)}e("getOwnMetadataKeys",_e);function Me($,J,le){if(!Ve(J))throw new TypeError;er(le)||(le=Br(le));var ve=Rt(J,le,!1);if(er(ve)||!ve.delete($))return!1;if(ve.size>0)return!0;var je=N.get(J);return je.delete(le),je.size>0||N.delete(J),!0}e("deleteMetadata",Me);function vt($,J){for(var le=$.length-1;le>=0;--le){var ve=$[le],je=ve(J);if(!er(je)&&!Wt(je)){if(!Wr(je))throw new TypeError;J=je}}return J}function Ut($,J,le,ve){for(var je=$.length-1;je>=0;--je){var or=$[je],tt=or(J,le,ve);if(!er(tt)&&!Wt(tt)){if(!Ve(tt))throw new TypeError;ve=tt}}return ve}function Rt($,J,le){var ve=N.get($);if(er(ve)){if(!le)return;ve=new E,N.set($,ve)}var je=ve.get(J);if(er(je)){if(!le)return;je=new E,ve.set(J,je)}return je}function qt($,J,le){var ve=hr($,J,le);if(ve)return!0;var je=ur(J);return Wt(je)?!1:qt($,je,le)}function hr($,J,le){var ve=Rt(J,le,!1);return er(ve)?!1:Ki(ve.has($))}function Mt($,J,le){var ve=hr($,J,le);if(ve)return Kr($,J,le);var je=ur(J);if(!Wt(je))return Mt($,je,le)}function Kr($,J,le){var ve=Rt(J,le,!1);if(!er(ve))return ve.get($)}function Pn($,J,le,ve){var je=Rt(le,ve,!0);je.set($,J)}function Fr($,J){var le=qr($,J),ve=ur($);if(ve===null)return le;var je=Fr(ve,J);if(je.length<=0)return le;if(le.length<=0)return je;for(var or=new T,tt=[],ut=0,qe=le;ut<qe.length;ut++){var yt=qe[ut],ht=or.has(yt);ht||(or.add(yt),tt.push(yt))}for(var Ar=0,bo=je;Ar<bo.length;Ar++){var yt=bo[Ar],ht=or.has(yt);ht||(or.add(yt),tt.push(yt))}return tt}function qr($,J){var le=[],ve=Rt($,J,!1);if(er(ve))return le;for(var je=ve.keys(),or=In(je),tt=0;;){var ut=Aa(or);if(!ut)return le.length=tt,le;var qe=bn(ut);try{le[tt]=qe}catch(yt){try{Xr(or)}finally{throw yt}}tt++}}function Fs($){if($===null)return 1;switch(typeof $){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return $===null?1:6;default:return 6}}function er($){return $===void 0}function Wt($){return $===null}function wr($){return typeof $=="symbol"}function Ve($){return typeof $=="object"?$!==null:typeof $=="function"}function Jr($,J){switch(Fs($)){case 0:return $;case 1:return $;case 2:return $;case 3:return $;case 4:return $;case 5:return $}var le=J===3?"string":J===5?"number":"default",ve=Ea($,i);if(ve!==void 0){var je=ve.call($,le);if(Ve(je))throw new TypeError;return je}return Mi($,le==="default"?"number":le)}function Mi($,J){if(J==="string"){var le=$.toString;if(wn(le)){var ve=le.call($);if(!Ve(ve))return ve}var je=$.valueOf;if(wn(je)){var ve=je.call($);if(!Ve(ve))return ve}}else{var je=$.valueOf;if(wn(je)){var ve=je.call($);if(!Ve(ve))return ve}var or=$.toString;if(wn(or)){var ve=or.call($);if(!Ve(ve))return ve}}throw new TypeError}function Ki($){return!!$}function es($){return""+$}function Br($){var J=Jr($,3);return wr(J)?J:es(J)}function ji($){return Array.isArray?Array.isArray($):$ instanceof Object?$ instanceof Array:Object.prototype.toString.call($)==="[object Array]"}function wn($){return typeof $=="function"}function Wr($){return typeof $=="function"}function go($){switch(Fs($)){case 3:return!0;case 4:return!0;default:return!1}}function Ea($,J){var le=$[J];if(le!=null){if(!wn(le))throw new TypeError;return le}}function In($){var J=Ea($,o);if(!wn(J))throw new TypeError;var le=J.call($);if(!Ve(le))throw new TypeError;return le}function bn($){return $.value}function Aa($){var J=$.next();return J.done?!1:J}function Xr($){var J=$.return;J&&J.call($)}function ur($){var J=Object.getPrototypeOf($);if(typeof $!="function"||$===m||J!==m)return J;var le=$.prototype,ve=le&&Object.getPrototypeOf(le);if(ve==null||ve===Object.prototype)return J;var je=ve.constructor;return typeof je!="function"||je===$?J:je}function $n(){var $={},J=[],le=function(){function tt(ut,qe,yt){this._index=0,this._keys=ut,this._values=qe,this._selector=yt}return tt.prototype["@@iterator"]=function(){return this},tt.prototype[o]=function(){return this},tt.prototype.next=function(){var ut=this._index;if(ut>=0&&ut<this._keys.length){var qe=this._selector(this._keys[ut],this._values[ut]);return ut+1>=this._keys.length?(this._index=-1,this._keys=J,this._values=J):this._index++,{value:qe,done:!1}}return{value:void 0,done:!0}},tt.prototype.throw=function(ut){throw this._index>=0&&(this._index=-1,this._keys=J,this._values=J),ut},tt.prototype.return=function(ut){return this._index>=0&&(this._index=-1,this._keys=J,this._values=J),{value:ut,done:!0}},tt}();return function(){function tt(){this._keys=[],this._values=[],this._cacheKey=$,this._cacheIndex=-2}return Object.defineProperty(tt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),tt.prototype.has=function(ut){return this._find(ut,!1)>=0},tt.prototype.get=function(ut){var qe=this._find(ut,!1);return qe>=0?this._values[qe]:void 0},tt.prototype.set=function(ut,qe){var yt=this._find(ut,!0);return this._values[yt]=qe,this},tt.prototype.delete=function(ut){var qe=this._find(ut,!1);if(qe>=0){for(var yt=this._keys.length,ht=qe+1;ht<yt;ht++)this._keys[ht-1]=this._keys[ht],this._values[ht-1]=this._values[ht];return this._keys.length--,this._values.length--,ut===this._cacheKey&&(this._cacheKey=$,this._cacheIndex=-2),!0}return!1},tt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=$,this._cacheIndex=-2},tt.prototype.keys=function(){return new le(this._keys,this._values,ve)},tt.prototype.values=function(){return new le(this._keys,this._values,je)},tt.prototype.entries=function(){return new le(this._keys,this._values,or)},tt.prototype["@@iterator"]=function(){return this.entries()},tt.prototype[o]=function(){return this.entries()},tt.prototype._find=function(ut,qe){return this._cacheKey!==ut&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=ut)),this._cacheIndex<0&&qe&&(this._cacheIndex=this._keys.length,this._keys.push(ut),this._values.push(void 0)),this._cacheIndex},tt}();function ve(tt,ut){return tt}function je(tt,ut){return ut}function or(tt,ut){return[tt,ut]}}function zn(){return function(){function $(){this._map=new E}return Object.defineProperty($.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),$.prototype.has=function(J){return this._map.has(J)},$.prototype.add=function(J){return this._map.set(J,J),this},$.prototype.delete=function(J){return this._map.delete(J)},$.prototype.clear=function(){this._map.clear()},$.prototype.keys=function(){return this._map.keys()},$.prototype.values=function(){return this._map.values()},$.prototype.entries=function(){return this._map.entries()},$.prototype["@@iterator"]=function(){return this.keys()},$.prototype[o]=function(){return this.keys()},$}()}function wo(){var $=16,J=d.create(),le=ve();return function(){function qe(){this._key=ve()}return qe.prototype.has=function(yt){var ht=je(yt,!1);return ht!==void 0?d.has(ht,this._key):!1},qe.prototype.get=function(yt){var ht=je(yt,!1);return ht!==void 0?d.get(ht,this._key):void 0},qe.prototype.set=function(yt,ht){var Ar=je(yt,!0);return Ar[this._key]=ht,this},qe.prototype.delete=function(yt){var ht=je(yt,!1);return ht!==void 0?delete ht[this._key]:!1},qe.prototype.clear=function(){this._key=ve()},qe}();function ve(){var qe;do qe="@@WeakMap@@"+ut();while(d.has(J,qe));return J[qe]=!0,qe}function je(qe,yt){if(!t.call(qe,le)){if(!yt)return;Object.defineProperty(qe,le,{value:d.create()})}return qe[le]}function or(qe,yt){for(var ht=0;ht<yt;++ht)qe[ht]=Math.random()*255|0;return qe}function tt(qe){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(qe)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(qe)):or(new Uint8Array(qe),qe):or(new Array(qe),qe)}function ut(){var qe=tt($);qe[6]=qe[6]&79|64,qe[8]=qe[8]&191|128;for(var yt="",ht=0;ht<$;++ht){var Ar=qe[ht];(ht===4||ht===6||ht===8)&&(yt+="-"),Ar<16&&(yt+="0"),yt+=Ar.toString(16).toLowerCase()}return yt}}function un($){return $.__=void 0,delete $.__,$}})})(rP||(rP={}))});var _i=ue(uo=>{"use strict";h();p();var J$=uo&&uo.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},X$=uo&&uo.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(J$(arguments[e]));return r};Object.defineProperty(uo,"__esModule",{value:!0});nP();function dp(r){return r==null?r:Array.isArray(r)?r.map(dp):typeof r=="object"?"saveAsJSON"in r?r.saveAsJSON():Object.assign({},r):r}uo.cloneField=dp;function Q$(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(n){var i={type:r};return e.forEach(function(o){i[o]=dp(n[o])}),i}}uo.cloneObject=Q$;function Z$(r){return function(e){return e.prototype.saveAsJSON=function(){return r.export(this)},e.fromJSON=function(t){return r.import(t)},e}}uo.Exportable=Z$;var t_=Symbol("bloom-filters:exportable:class-name"),cl=Symbol("bloom-filters:exportable:fields"),fl=Symbol("bloom-filters:exportable:constructor-parameters");function ez(r,e){return r===void 0&&(r=dp),e===void 0&&(e=function(t){return t}),function(t,n){var i=[];Reflect.hasMetadata(cl,t)&&(i=Reflect.getMetadata(cl,t)),i.push({name:n,exporter:r,importer:e}),Reflect.defineMetadata(cl,i,t)}}uo.Field=ez;function tz(r){return function(e,t,n){var i=new Map;Reflect.hasMetadata(fl,e)&&(i=Reflect.getMetadata(fl,e)),i.set(r,n),Reflect.defineMetadata(fl,i,e)}}uo.Parameter=tz;function rz(r,e){return e===void 0&&(e=[]),function(t){if(Reflect.defineMetadata(t_,r,t.prototype),!Reflect.hasMetadata(cl,t.prototype)||e.length===0)throw new SyntaxError("No exported fields declared when @AutoExportable is called");Reflect.hasMetadata(fl,t)||Reflect.defineMetadata(fl,new Map,t),t.prototype.saveAsJSON=function(){var n=this,i={type:Reflect.getMetadata(t_,t.prototype)},o=Reflect.getMetadata(cl,t.prototype);return o.forEach(function(a){i[a.name]=a.exporter(n[a.name])}),e.forEach(function(a){i[a]=dp(n[a])}),i},t.fromJSON=function(n){var i=Reflect.getMetadata(t_,t.prototype),o=Reflect.getMetadata(fl,t),a=Reflect.getMetadata(cl,t.prototype);if(n.type!==i)throw new Error("Cannot create an object "+i+' from a JSON export with type "'+n.type+'"');var c=[],f=[];e.map(function(m){return{name:m,importer:function(w){return w}}}).concat(a).forEach(function(m){if(!(m.name in n))throw new Error('Invalid import: required field "'+m+'" not found in JSON export "'+n+'"');o.has(m.name)?c[o.get(m.name)]=m.importer(n[m.name]):f.push({name:m.name,value:m.importer(n[m.name])})});var d=new(t.bind.apply(t,X$([void 0],c)));return f.forEach(function(m){d[m.name]=m.value}),d}}}uo.AutoExportable=rz});var Dy=ue(Sy=>{"use strict";h();p();Object.defineProperty(Sy,"__esModule",{value:!0});function nz(r,e){return Math.ceil(-(r*Math.log(e)/Math.pow(Math.log(2),2)))}Sy.optimalFilterSize=nz;function iz(r,e){return Math.ceil(r/e*Math.log(2))}Sy.optimalHashes=iz});var sP=ue(xi=>{"use strict";h();p();var oz=xi&&xi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mp=xi&&xi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},yp=xi&&xi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},iP=xi&&xi.__param||function(r,e){return function(t,n){e(t,n,r)}},sz=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var az=sz(Bo()),wc=_i(),oP=Dy(),gp=ao(),uz=function(r){oz(e,r);function e(n,i){var o=r.call(this)||this;if(i<1)throw new Error("A BloomFilter cannot uses less than one hash function, while you tried to use "+i+".");return o._size=n,o._nbHashes=i,o._filter=gp.allocateArray(o._size,0),o._length=0,o}t=e,e.create=function(n,i){var o=oP.optimalFilterSize(n,i),a=oP.optimalHashes(o,n);return new t(o,a)},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},e.fromBytes=function(n,i){for(var o=[],a=0;a<n.length;a++){var c=gp.uint8ToBits(n[a]);o=o.concat(c)}var f=new t(o.length,i);return f._filter=o,f},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=gp.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)this._filter[i[o]]=1;this._length++},e.prototype.has=function(n){for(var i=gp.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)if(!this._filter[i[o]])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes?!1:this._filter.every(function(i,o){return n._filter[o]===i})},e.prototype.toBytes=function(){for(var n=new Uint8Array(Math.ceil(this._size/8)),i=0;i<n.length;i++){var o=this._filter.slice(i*8,i*8+8);n[i]=gp.bitsToUint8(o)}return n};var t;return mp([wc.Field(),yp("design:type",Number)],e.prototype,"_size",void 0),mp([wc.Field(),yp("design:type",Number)],e.prototype,"_nbHashes",void 0),mp([wc.Field(),yp("design:type",Array)],e.prototype,"_filter",void 0),mp([wc.Field(),yp("design:type",Number)],e.prototype,"_length",void 0),e=t=mp([wc.AutoExportable("BloomFilter",["_seed"]),iP(0,wc.Parameter("_size")),iP(1,wc.Parameter("_nbHashes")),yp("design:paramtypes",[Number,Number])],e),e}(az.default);xi.default=uz});var cP=ue(Ei=>{"use strict";h();p();var cz=Ei&&Ei.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wp=Ei&&Ei.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},bp=Ei&&Ei.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},aP=Ei&&Ei.__param||function(r,e){return function(t,n){e(t,n,r)}},fz=Ei&&Ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ei,"__esModule",{value:!0});var lz=fz(Bo()),bc=_i(),uP=Dy(),Cy=ao(),hz=function(r){cz(e,r);function e(n,i){var o=r.call(this)||this;if(i<1)throw new Error("A CountingBloomFilter must used at least one hash function, but you tried to use "+i+" functions. Consider increasing it.");return o._size=n,o._nbHashes=i,o._filter=Cy.allocateArray(o._size,function(){return[0,0]}),o._length=0,o}t=e,e.create=function(n,i){var o=uP.optimalFilterSize(n,i);return new t(o,uP.optimalHashes(o,n))},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=Cy.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)this._filter[i[o]][1]+=1,this._filter[i[o]][1]>0&&(this._filter[i[o]][0]=1);this._length++},e.prototype.remove=function(n){for(var i=Cy.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=!0,a=0;a<i.length;a++)this._filter[i[a]][1]-=1,this._filter[i[a]][1]<=0&&(this._filter[i[a]][0]=0);return this._length--,o},e.prototype.has=function(n){for(var i=Cy.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)if(!this._filter[i[o]][0])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length?!1:this._filter.every(function(i,o){return n._filter[o][0]===i[0]&&n._filter[o][1]===i[1]})};var t;return wp([bc.Field(),bp("design:type",Number)],e.prototype,"_size",void 0),wp([bc.Field(),bp("design:type",Number)],e.prototype,"_nbHashes",void 0),wp([bc.Field(),bp("design:type",Array)],e.prototype,"_filter",void 0),wp([bc.Field(),bp("design:type",Number)],e.prototype,"_length",void 0),e=t=wp([bc.AutoExportable("CountingBloomFilter",["_seed"]),aP(0,bc.Parameter("_size")),aP(1,bc.Parameter("_nbHashes")),bp("design:paramtypes",[Number,Number])],e),e}(lz.default);Ei.default=hz});var fP=ue(Ai=>{"use strict";h();p();var pz=Ai&&Ai.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xa=Ai&&Ai.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Qa=Ai&&Ai.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Py=Ai&&Ai.__param||function(r,e){return function(t,n){e(t,n,r)}},dz=Ai&&Ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ai,"__esModule",{value:!0});var mz=dz(Bo()),co=_i(),Iy=ao();function yz(r,e){return Math.ceil(Math.log(r)/Math.log(e))}function gz(r,e,t){return Math.ceil(r*-Math.log(e)/(Math.log(t)*Math.log(1-t)))}function wz(r,e,t){return Math.ceil(r*(Math.log(e)*Math.log(1-e))/-(t*Math.log(e)))}var bz=function(r){pz(e,r);function e(n,i,o,a){var c=r.call(this)||this;return c._size=n,c._nbHashes=i,c._loadFactor=o,c._m=Math.ceil(c._size/c._nbHashes),c._filter=Iy.allocateArray(c._nbHashes,function(){return Iy.allocateArray(c._m,0)}),c._capacity=a!==void 0?a:wz(c._size,o,i),c._length=0,c}t=e,e.create=function(n,i,o){o===void 0&&(o=.5);var a=gz(n,i,o),c=yz(i,o);return new t(a,c,o,n)},e.from=function(n,i,o){o===void 0&&(o=.5);var a=Array.from(n),c=t.create(a.length,i,o);return a.forEach(function(f){return c.add(f)}),c},Object.defineProperty(e.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadFactor",{get:function(){return this._loadFactor},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=Iy.getIndices(n,this._m,this._nbHashes,this.seed),o=0;o<this._nbHashes;o++)this._filter[o][i[o]]=1;this._length++},e.prototype.has=function(n){for(var i=Iy.getIndices(n,this._m,this._nbHashes,this.seed),o=0;o<this._nbHashes;o++)if(!this._filter[o][i[o]])return!1;return!0},e.prototype.rate=function(){var n=this._currentload();return Math.pow(n,this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length||this._loadFactor!==n._loadFactor?!1:this._filter.every(function(i,o){return n._filter[o].every(function(a,c){return i[c]===a})})},e.prototype._currentload=function(){var n=this._filter.map(function(o){return o.reduce(function(a,c){return a+c},0)}),i=n.reduce(function(o,a){return o+a},0);return i/this._size};var t;return Xa([co.Field(),Qa("design:type",Number)],e.prototype,"_size",void 0),Xa([co.Field(),Qa("design:type",Number)],e.prototype,"_nbHashes",void 0),Xa([co.Field(),Qa("design:type",Number)],e.prototype,"_loadFactor",void 0),Xa([co.Field(),Qa("design:type",Number)],e.prototype,"_m",void 0),Xa([co.Field(),Qa("design:type",Array)],e.prototype,"_filter",void 0),Xa([co.Field(),Qa("design:type",Number)],e.prototype,"_capacity",void 0),Xa([co.Field(),Qa("design:type",Number)],e.prototype,"_length",void 0),e=t=Xa([co.AutoExportable("PartitionedBloomFilter",["_seed"]),Py(0,co.Parameter("_size")),Py(1,co.Parameter("_nbHashes")),Py(2,co.Parameter("_loadFactor")),Py(3,co.Parameter("_capacity")),Qa("design:paramtypes",[Number,Number,Number,Number])],e),e}(mz.default);Ai.default=bz});var r_=ue(Ln=>{"use strict";h();p();var vz=Ln&&Ln.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vp=Ln&&Ln.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_p=Ln&&Ln.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},lP=Ln&&Ln.__param||function(r,e){return function(t,n){e(t,n,r)}},_z=Ln&&Ln.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xz=Ln&&Ln.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ln,"__esModule",{value:!0});var Ez=xz(Bo()),vc=_i(),Ty=ao(),Az=function(r){vz(e,r);function e(n,i){var o=r.call(this)||this;return o._columns=n,o._rows=i,o._matrix=Ty.allocateArray(o._rows,function(){return Ty.allocateArray(o._columns,0)}),o._allSums=0,o}t=e,e.create=function(n,i){i===void 0&&(i=.999);var o=Math.ceil(Math.E/n),a=Math.ceil(Math.log(1/i));return new t(o,a)},e.from=function(n,i,o){var a,c;o===void 0&&(o=.999);var f=t.create(i,o);try{for(var d=_z(n),m=d.next();!m.done;m=d.next()){var w=m.value;f.update(w)}}catch(E){a={error:E}}finally{try{m&&!m.done&&(c=d.return)&&c.call(d)}finally{if(a)throw a.error}}return f},Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sum",{get:function(){return this._allSums},enumerable:!0,configurable:!0}),e.prototype.update=function(n,i){i===void 0&&(i=1),this._allSums+=i;for(var o=Ty.getDistinctIndices(n,this._columns,this._rows,this.seed),a=0;a<this._rows;a++)this._matrix[a][o[a]]+=i},e.prototype.count=function(n){for(var i=1/0,o=Ty.getDistinctIndices(n,this._columns,this._rows,this.seed),a=0;a<this._rows;a++){var c=this._matrix[a][o[a]];i=Math.min(c,i)}return i},e.prototype.equals=function(n){if(this._columns!==n._columns||this._rows!==n._rows)return!1;for(var i=0;i<this._rows;i++)for(var o=0;o<this._columns;o++)if(this._matrix[i][o]!==n._matrix[i][o])return!1;return!0},e.prototype.merge=function(n){if(this._columns!==n._columns)throw new Error("Cannot merge two sketches with different number of columns");if(this._rows!==n._rows)throw new Error("Cannot merge two sketches with different number of rows");for(var i=0;i<this._rows;i++)for(var o=0;o<this._columns;o++)this._matrix[i][o]+=n._matrix[i][o]},e.prototype.clone=function(){var n=new t(this._columns,this._rows);return n.merge(this),n.seed=this.seed,n};var t;return vp([vc.Field(),_p("design:type",Number)],e.prototype,"_columns",void 0),vp([vc.Field(),_p("design:type",Number)],e.prototype,"_rows",void 0),vp([vc.Field(),_p("design:type",Array)],e.prototype,"_matrix",void 0),vp([vc.Field(),_p("design:type",Number)],e.prototype,"_allSums",void 0),e=t=vp([vc.AutoExportable("CountMinSketch",["_seed"]),lP(0,vc.Parameter("_columns")),lP(1,vc.Parameter("_rows")),_p("design:paramtypes",[Number,Number])],e),e}(Ez.default);Ln.default=Az});var pP=ue(Si=>{"use strict";h();p();var Sz=Si&&Si.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xp=Si&&Si.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ep=Si&&Si.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Dz=Si&&Si.__param||function(r,e){return function(t,n){e(t,n,r)}},Cz=Si&&Si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Si,"__esModule",{value:!0});var Pz=Cz(Bo()),ll=_i(),hP=ao(),n_=Math.pow(2,32);function Iz(r){switch(r){case 16:return .673;case 32:return .697;case 64:return .709;default:return .7213/(1+1.079/r)}}var Tz=function(r){Sz(e,r);function e(n){var i=r.call(this)||this;return i._nbRegisters=n,i._nbBytesPerHash=Math.round(Math.log2(n)),i._correctionBias=Iz(n),i._registers=hP.allocateArray(i._nbRegisters,0),i}t=e,Object.defineProperty(e.prototype,"nbRegisters",{get:function(){return this._nbRegisters},enumerable:!0,configurable:!0}),e.prototype.update=function(n){for(var i=hP.hashAsInt(n,this.seed).toString(2),o=1+parseInt(i.slice(0,this._nbBytesPerHash-1),2),a=i.slice(this._nbBytesPerHash),c=0;a[c]!=="1"&&c<a.length-1;)c++;this._registers[o]=Math.max(this._registers[o],c)},e.prototype.count=function(n){n===void 0&&(n=!1);var i=this._registers.reduce(function(a,c){return a+Math.pow(2,-c)},0),o=this._correctionBias*Math.pow(this._nbRegisters,2)/i;return o>n_/30&&(o=-n_*Math.log(1-o/n_)),n&&(o=Math.round(o)),o},e.prototype.accuracy=function(){return 1.04/Math.sqrt(this._nbRegisters)},e.prototype.merge=function(n){if(this.nbRegisters!==n.nbRegisters)throw new Error("Two HyperLogLog must have the same number of registers to be merged. Tried to merge two HyperLogLog with m = "+this.nbRegisters+" and m = "+n.nbRegisters);for(var i=new t(this.nbRegisters),o=0;o<this.nbRegisters-1;o++)i._registers[o]=Math.max(this._registers[o],n._registers[o]);return i},e.prototype.equals=function(n){if(this.nbRegisters!==n.nbRegisters)return!1;for(var i=0;i<this.nbRegisters-1;i++)if(this._registers[i]!==n._registers[i])return!1;return!0};var t;return xp([ll.Field(),Ep("design:type",Number)],e.prototype,"_nbRegisters",void 0),xp([ll.Field(),Ep("design:type",Number)],e.prototype,"_nbBytesPerHash",void 0),xp([ll.Field(),Ep("design:type",Number)],e.prototype,"_correctionBias",void 0),xp([ll.Field(),Ep("design:type",Array)],e.prototype,"_registers",void 0),e=t=xp([ll.AutoExportable("HyperLogLog",["_seed"]),Dz(0,ll.Parameter("_nbRegisters")),Ep("design:paramtypes",[Number])],e),e}(Pz.default);Si.default=Tz});var ky=ue((hl,Ap)=>{h();p();(function(){var r,e="4.17.21",t=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",d=1,m=2,w=4,E=1,T=2,F=1,N=2,he=4,de=8,Pe=16,ie=32,be=64,Ae=128,Y=256,ge=512,_e=30,Me="...",vt=800,Ut=16,Rt=1,qt=2,hr=3,Mt=1/0,Kr=9007199254740991,Pn=17976931348623157e292,Fr=0/0,qr=4294967295,Fs=qr-1,er=qr>>>1,Wt=[["ary",Ae],["bind",F],["bindKey",N],["curry",de],["curryRight",Pe],["flip",ge],["partial",ie],["partialRight",be],["rearg",Y]],wr="[object Arguments]",Ve="[object Array]",Jr="[object AsyncFunction]",Mi="[object Boolean]",Ki="[object Date]",es="[object DOMException]",Br="[object Error]",ji="[object Function]",wn="[object GeneratorFunction]",Wr="[object Map]",go="[object Number]",Ea="[object Null]",In="[object Object]",bn="[object Promise]",Aa="[object Proxy]",Xr="[object RegExp]",ur="[object Set]",$n="[object String]",zn="[object Symbol]",wo="[object Undefined]",un="[object WeakMap]",$="[object WeakSet]",J="[object ArrayBuffer]",le="[object DataView]",ve="[object Float32Array]",je="[object Float64Array]",or="[object Int8Array]",tt="[object Int16Array]",ut="[object Int32Array]",qe="[object Uint8Array]",yt="[object Uint8ClampedArray]",ht="[object Uint16Array]",Ar="[object Uint32Array]",bo=/\b__p \+= '';/g,Bs=/\b(__p \+=) '' \+/g,vo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Rs=/&(?:amp|lt|gt|quot|#39);/g,Fu=/[&<>"']/g,$i=RegExp(Rs.source),dh=RegExp(Fu.source),si=/<%-([\s\S]+?)%>/g,zi=/<%([\s\S]+?)%>/g,_o=/<%=([\s\S]+?)%>/g,Bu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ru=/^\w*$/,df=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ou=/[\\^$.*+?()[\]{}|]/g,cn=RegExp(Ou.source),Sa=/^\s+/,b=/\s/,S=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,A=/\{\n\/\* \[wrapped with (.+)\] \*/,y=/,? & /,I=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,M=/[()=,{}\[\]\/\s]/,j=/\\(\\)?/g,oe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ye=/\w*$/,Ke=/^[-+]0x[0-9a-f]+$/i,De=/^0b[01]+$/i,Pt=/^\[object .+?Constructor\]$/,ke=/^0o[0-7]+$/i,rt=/^(?:0|[1-9]\d*)$/,ot=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ct=/($^)/,lt=/['\n\r\u2028\u2029\\]/g,et="\\ud800-\\udfff",ft="\\u0300-\\u036f",nt="\\ufe20-\\ufe2f",Ie="\\u20d0-\\u20ff",ze=ft+nt+Ie,xe="\\u2700-\\u27bf",Be="a-z\\xdf-\\xf6\\xf8-\\xff",Re="\\xac\\xb1\\xd7\\xf7",Ee="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",q="\\u2000-\\u206f",W=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fe="A-Z\\xc0-\\xd6\\xd8-\\xde",re="\\ufe0e\\ufe0f",ne=Re+Ee+q+W,_="['\u2019]",k="["+et+"]",C="["+ne+"]",R="["+ze+"]",O="\\d+",v="["+xe+"]",z="["+Be+"]",H="[^"+et+ne+O+xe+Be+fe+"]",X="\\ud83c[\\udffb-\\udfff]",G="(?:"+R+"|"+X+")",te="[^"+et+"]",me="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="["+fe+"]",Qe="\\u200d",pt="(?:"+z+"|"+H+")",dt="(?:"+Ue+"|"+H+")",Ot="(?:"+_+"(?:d|ll|m|re|s|t|ve))?",cr="(?:"+_+"(?:D|LL|M|RE|S|T|VE))?",br=G+"?",Rr="["+re+"]?",mh="(?:"+Qe+"(?:"+[te,me,$e].join("|")+")"+Rr+br+")*",qE="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",z0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Md=Rr+br+mh,Kd="(?:"+[v,me,$e].join("|")+")"+Md,vR="(?:"+[te+R+"?",R,me,$e,k].join("|")+")",_R=RegExp(_,"g"),xR=RegExp(R,"g"),q0=RegExp(X+"(?="+X+")|"+vR+Md,"g"),ER=RegExp([Ue+"?"+z+"+"+Ot+"(?="+[C,Ue,"$"].join("|")+")",dt+"+"+cr+"(?="+[C,Ue+pt,"$"].join("|")+")",Ue+"?"+pt+"+"+Ot,Ue+"+"+cr,z0,qE,O,Kd].join("|"),"g"),AR=RegExp("["+Qe+et+ze+re+"]"),SR=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,DR=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],CR=-1,fr={};fr[ve]=fr[je]=fr[or]=fr[tt]=fr[ut]=fr[qe]=fr[yt]=fr[ht]=fr[Ar]=!0,fr[wr]=fr[Ve]=fr[J]=fr[Mi]=fr[le]=fr[Ki]=fr[Br]=fr[ji]=fr[Wr]=fr[go]=fr[In]=fr[Xr]=fr[ur]=fr[$n]=fr[un]=!1;var sr={};sr[wr]=sr[Ve]=sr[J]=sr[le]=sr[Mi]=sr[Ki]=sr[ve]=sr[je]=sr[or]=sr[tt]=sr[ut]=sr[Wr]=sr[go]=sr[In]=sr[Xr]=sr[ur]=sr[$n]=sr[zn]=sr[qe]=sr[yt]=sr[ht]=sr[Ar]=!0,sr[Br]=sr[ji]=sr[un]=!1;var PR={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},IR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},TR={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},kR={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},FR=parseFloat,BR=parseInt,WE=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,RR=typeof self=="object"&&self&&self.Object===Object&&self,Qr=WE||RR||Function("return this")(),W0=typeof hl=="object"&&hl&&!hl.nodeType&&hl,Lu=W0&&typeof Ap=="object"&&Ap&&!Ap.nodeType&&Ap,VE=Lu&&Lu.exports===W0,V0=VE&&WE.process,qi=function(){try{var U=Lu&&Lu.require&&Lu.require("util").types;return U||V0&&V0.binding&&V0.binding("util")}catch{}}(),HE=qi&&qi.isArrayBuffer,GE=qi&&qi.isDate,YE=qi&&qi.isMap,JE=qi&&qi.isRegExp,XE=qi&&qi.isSet,QE=qi&&qi.isTypedArray;function ai(U,ee,V){switch(V.length){case 0:return U.call(ee);case 1:return U.call(ee,V[0]);case 2:return U.call(ee,V[0],V[1]);case 3:return U.call(ee,V[0],V[1],V[2])}return U.apply(ee,V)}function OR(U,ee,V,Ne){for(var gt=-1,zt=U==null?0:U.length;++gt<zt;){var Vr=U[gt];ee(Ne,Vr,V(Vr),U)}return Ne}function Wi(U,ee){for(var V=-1,Ne=U==null?0:U.length;++V<Ne&&ee(U[V],V,U)!==!1;);return U}function LR(U,ee){for(var V=U==null?0:U.length;V--&&ee(U[V],V,U)!==!1;);return U}function ZE(U,ee){for(var V=-1,Ne=U==null?0:U.length;++V<Ne;)if(!ee(U[V],V,U))return!1;return!0}function Da(U,ee){for(var V=-1,Ne=U==null?0:U.length,gt=0,zt=[];++V<Ne;){var Vr=U[V];ee(Vr,V,U)&&(zt[gt++]=Vr)}return zt}function jd(U,ee){var V=U==null?0:U.length;return!!V&&mf(U,ee,0)>-1}function H0(U,ee,V){for(var Ne=-1,gt=U==null?0:U.length;++Ne<gt;)if(V(ee,U[Ne]))return!0;return!1}function pr(U,ee){for(var V=-1,Ne=U==null?0:U.length,gt=Array(Ne);++V<Ne;)gt[V]=ee(U[V],V,U);return gt}function Ca(U,ee){for(var V=-1,Ne=ee.length,gt=U.length;++V<Ne;)U[gt+V]=ee[V];return U}function G0(U,ee,V,Ne){var gt=-1,zt=U==null?0:U.length;for(Ne&&zt&&(V=U[++gt]);++gt<zt;)V=ee(V,U[gt],gt,U);return V}function UR(U,ee,V,Ne){var gt=U==null?0:U.length;for(Ne&&gt&&(V=U[--gt]);gt--;)V=ee(V,U[gt],gt,U);return V}function Y0(U,ee){for(var V=-1,Ne=U==null?0:U.length;++V<Ne;)if(ee(U[V],V,U))return!0;return!1}var NR=J0("length");function MR(U){return U.split("")}function KR(U){return U.match(I)||[]}function e2(U,ee,V){var Ne;return V(U,function(gt,zt,Vr){if(ee(gt,zt,Vr))return Ne=zt,!1}),Ne}function $d(U,ee,V,Ne){for(var gt=U.length,zt=V+(Ne?1:-1);Ne?zt--:++zt<gt;)if(ee(U[zt],zt,U))return zt;return-1}function mf(U,ee,V){return ee===ee?QR(U,ee,V):$d(U,t2,V)}function jR(U,ee,V,Ne){for(var gt=V-1,zt=U.length;++gt<zt;)if(Ne(U[gt],ee))return gt;return-1}function t2(U){return U!==U}function r2(U,ee){var V=U==null?0:U.length;return V?Q0(U,ee)/V:Fr}function J0(U){return function(ee){return ee==null?r:ee[U]}}function X0(U){return function(ee){return U==null?r:U[ee]}}function n2(U,ee,V,Ne,gt){return gt(U,function(zt,Vr,tr){V=Ne?(Ne=!1,zt):ee(V,zt,Vr,tr)}),V}function $R(U,ee){var V=U.length;for(U.sort(ee);V--;)U[V]=U[V].value;return U}function Q0(U,ee){for(var V,Ne=-1,gt=U.length;++Ne<gt;){var zt=ee(U[Ne]);zt!==r&&(V=V===r?zt:V+zt)}return V}function Z0(U,ee){for(var V=-1,Ne=Array(U);++V<U;)Ne[V]=ee(V);return Ne}function zR(U,ee){return pr(ee,function(V){return[V,U[V]]})}function i2(U){return U&&U.slice(0,u2(U)+1).replace(Sa,"")}function ui(U){return function(ee){return U(ee)}}function ew(U,ee){return pr(ee,function(V){return U[V]})}function yh(U,ee){return U.has(ee)}function o2(U,ee){for(var V=-1,Ne=U.length;++V<Ne&&mf(ee,U[V],0)>-1;);return V}function s2(U,ee){for(var V=U.length;V--&&mf(ee,U[V],0)>-1;);return V}function qR(U,ee){for(var V=U.length,Ne=0;V--;)U[V]===ee&&++Ne;return Ne}var WR=X0(PR),VR=X0(IR);function HR(U){return"\\"+kR[U]}function GR(U,ee){return U==null?r:U[ee]}function yf(U){return AR.test(U)}function YR(U){return SR.test(U)}function JR(U){for(var ee,V=[];!(ee=U.next()).done;)V.push(ee.value);return V}function tw(U){var ee=-1,V=Array(U.size);return U.forEach(function(Ne,gt){V[++ee]=[gt,Ne]}),V}function a2(U,ee){return function(V){return U(ee(V))}}function Pa(U,ee){for(var V=-1,Ne=U.length,gt=0,zt=[];++V<Ne;){var Vr=U[V];(Vr===ee||Vr===f)&&(U[V]=f,zt[gt++]=V)}return zt}function zd(U){var ee=-1,V=Array(U.size);return U.forEach(function(Ne){V[++ee]=Ne}),V}function XR(U){var ee=-1,V=Array(U.size);return U.forEach(function(Ne){V[++ee]=[Ne,Ne]}),V}function QR(U,ee,V){for(var Ne=V-1,gt=U.length;++Ne<gt;)if(U[Ne]===ee)return Ne;return-1}function ZR(U,ee,V){for(var Ne=V+1;Ne--;)if(U[Ne]===ee)return Ne;return Ne}function gf(U){return yf(U)?tO(U):NR(U)}function xo(U){return yf(U)?rO(U):MR(U)}function u2(U){for(var ee=U.length;ee--&&b.test(U.charAt(ee)););return ee}var eO=X0(TR);function tO(U){for(var ee=q0.lastIndex=0;q0.test(U);)++ee;return ee}function rO(U){return U.match(q0)||[]}function nO(U){return U.match(ER)||[]}var iO=function U(ee){ee=ee==null?Qr:Ia.defaults(Qr.Object(),ee,Ia.pick(Qr,DR));var V=ee.Array,Ne=ee.Date,gt=ee.Error,zt=ee.Function,Vr=ee.Math,tr=ee.Object,rw=ee.RegExp,oO=ee.String,Vi=ee.TypeError,qd=V.prototype,sO=zt.prototype,wf=tr.prototype,Wd=ee["__core-js_shared__"],Vd=sO.toString,Yt=wf.hasOwnProperty,aO=0,c2=function(){var s=/[^.]+$/.exec(Wd&&Wd.keys&&Wd.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Hd=wf.toString,uO=Vd.call(tr),cO=Qr._,fO=rw("^"+Vd.call(Yt).replace(Ou,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gd=VE?ee.Buffer:r,Ta=ee.Symbol,Yd=ee.Uint8Array,f2=Gd?Gd.allocUnsafe:r,Jd=a2(tr.getPrototypeOf,tr),l2=tr.create,h2=wf.propertyIsEnumerable,Xd=qd.splice,p2=Ta?Ta.isConcatSpreadable:r,gh=Ta?Ta.iterator:r,Uu=Ta?Ta.toStringTag:r,Qd=function(){try{var s=$u(tr,"defineProperty");return s({},"",{}),s}catch{}}(),lO=ee.clearTimeout!==Qr.clearTimeout&&ee.clearTimeout,hO=Ne&&Ne.now!==Qr.Date.now&&Ne.now,pO=ee.setTimeout!==Qr.setTimeout&&ee.setTimeout,Zd=Vr.ceil,em=Vr.floor,nw=tr.getOwnPropertySymbols,dO=Gd?Gd.isBuffer:r,d2=ee.isFinite,mO=qd.join,yO=a2(tr.keys,tr),Hr=Vr.max,vn=Vr.min,gO=Ne.now,wO=ee.parseInt,m2=Vr.random,bO=qd.reverse,iw=$u(ee,"DataView"),wh=$u(ee,"Map"),ow=$u(ee,"Promise"),bf=$u(ee,"Set"),bh=$u(ee,"WeakMap"),vh=$u(tr,"create"),tm=bh&&new bh,vf={},vO=zu(iw),_O=zu(wh),xO=zu(ow),EO=zu(bf),AO=zu(bh),rm=Ta?Ta.prototype:r,_h=rm?rm.valueOf:r,y2=rm?rm.toString:r;function D(s){if(Sr(s)&&!bt(s)&&!(s instanceof Bt)){if(s instanceof Hi)return s;if(Yt.call(s,"__wrapped__"))return gA(s)}return new Hi(s)}var _f=function(){function s(){}return function(u){if(!vr(u))return{};if(l2)return l2(u);s.prototype=u;var l=new s;return s.prototype=r,l}}();function nm(){}function Hi(s,u){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=r}D.templateSettings={escape:si,evaluate:zi,interpolate:_o,variable:"",imports:{_:D}},D.prototype=nm.prototype,D.prototype.constructor=D,Hi.prototype=_f(nm.prototype),Hi.prototype.constructor=Hi;function Bt(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=qr,this.__views__=[]}function SO(){var s=new Bt(this.__wrapped__);return s.__actions__=qn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=qn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=qn(this.__views__),s}function DO(){if(this.__filtered__){var s=new Bt(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function CO(){var s=this.__wrapped__.value(),u=this.__dir__,l=bt(s),g=u<0,x=l?s.length:0,P=M4(0,x,this.__views__),B=P.start,L=P.end,K=L-B,se=g?L:B-1,ae=this.__iteratees__,pe=ae.length,Ce=0,He=vn(K,this.__takeCount__);if(!l||!g&&x==K&&He==K)return K2(s,this.__actions__);var st=[];e:for(;K--&&Ce<He;){se+=u;for(var Et=-1,at=s[se];++Et<pe;){var It=ae[Et],Lt=It.iteratee,li=It.type,Fn=Lt(at);if(li==qt)at=Fn;else if(!Fn){if(li==Rt)continue e;break e}}st[Ce++]=at}return st}Bt.prototype=_f(nm.prototype),Bt.prototype.constructor=Bt;function Nu(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var g=s[u];this.set(g[0],g[1])}}function PO(){this.__data__=vh?vh(null):{},this.size=0}function IO(s){var u=this.has(s)&&delete this.__data__[s];return this.size-=u?1:0,u}function TO(s){var u=this.__data__;if(vh){var l=u[s];return l===a?r:l}return Yt.call(u,s)?u[s]:r}function kO(s){var u=this.__data__;return vh?u[s]!==r:Yt.call(u,s)}function FO(s,u){var l=this.__data__;return this.size+=this.has(s)?0:1,l[s]=vh&&u===r?a:u,this}Nu.prototype.clear=PO,Nu.prototype.delete=IO,Nu.prototype.get=TO,Nu.prototype.has=kO,Nu.prototype.set=FO;function Os(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var g=s[u];this.set(g[0],g[1])}}function BO(){this.__data__=[],this.size=0}function RO(s){var u=this.__data__,l=im(u,s);if(l<0)return!1;var g=u.length-1;return l==g?u.pop():Xd.call(u,l,1),--this.size,!0}function OO(s){var u=this.__data__,l=im(u,s);return l<0?r:u[l][1]}function LO(s){return im(this.__data__,s)>-1}function UO(s,u){var l=this.__data__,g=im(l,s);return g<0?(++this.size,l.push([s,u])):l[g][1]=u,this}Os.prototype.clear=BO,Os.prototype.delete=RO,Os.prototype.get=OO,Os.prototype.has=LO,Os.prototype.set=UO;function Ls(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var g=s[u];this.set(g[0],g[1])}}function NO(){this.size=0,this.__data__={hash:new Nu,map:new(wh||Os),string:new Nu}}function MO(s){var u=ym(this,s).delete(s);return this.size-=u?1:0,u}function KO(s){return ym(this,s).get(s)}function jO(s){return ym(this,s).has(s)}function $O(s,u){var l=ym(this,s),g=l.size;return l.set(s,u),this.size+=l.size==g?0:1,this}Ls.prototype.clear=NO,Ls.prototype.delete=MO,Ls.prototype.get=KO,Ls.prototype.has=jO,Ls.prototype.set=$O;function Mu(s){var u=-1,l=s==null?0:s.length;for(this.__data__=new Ls;++u<l;)this.add(s[u])}function zO(s){return this.__data__.set(s,a),this}function qO(s){return this.__data__.has(s)}Mu.prototype.add=Mu.prototype.push=zO,Mu.prototype.has=qO;function Eo(s){var u=this.__data__=new Os(s);this.size=u.size}function WO(){this.__data__=new Os,this.size=0}function VO(s){var u=this.__data__,l=u.delete(s);return this.size=u.size,l}function HO(s){return this.__data__.get(s)}function GO(s){return this.__data__.has(s)}function YO(s,u){var l=this.__data__;if(l instanceof Os){var g=l.__data__;if(!wh||g.length<t-1)return g.push([s,u]),this.size=++l.size,this;l=this.__data__=new Ls(g)}return l.set(s,u),this.size=l.size,this}Eo.prototype.clear=WO,Eo.prototype.delete=VO,Eo.prototype.get=HO,Eo.prototype.has=GO,Eo.prototype.set=YO;function g2(s,u){var l=bt(s),g=!l&&qu(s),x=!l&&!g&&Oa(s),P=!l&&!g&&!x&&Sf(s),B=l||g||x||P,L=B?Z0(s.length,oO):[],K=L.length;for(var se in s)(u||Yt.call(s,se))&&!(B&&(se=="length"||x&&(se=="offset"||se=="parent")||P&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||Ks(se,K)))&&L.push(se);return L}function w2(s){var u=s.length;return u?s[yw(0,u-1)]:r}function JO(s,u){return gm(qn(s),Ku(u,0,s.length))}function XO(s){return gm(qn(s))}function sw(s,u,l){(l!==r&&!Ao(s[u],l)||l===r&&!(u in s))&&Us(s,u,l)}function xh(s,u,l){var g=s[u];(!(Yt.call(s,u)&&Ao(g,l))||l===r&&!(u in s))&&Us(s,u,l)}function im(s,u){for(var l=s.length;l--;)if(Ao(s[l][0],u))return l;return-1}function QO(s,u,l,g){return ka(s,function(x,P,B){u(g,x,l(x),B)}),g}function b2(s,u){return s&&rs(u,Zr(u),s)}function ZO(s,u){return s&&rs(u,Vn(u),s)}function Us(s,u,l){u=="__proto__"&&Qd?Qd(s,u,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[u]=l}function aw(s,u){for(var l=-1,g=u.length,x=V(g),P=s==null;++l<g;)x[l]=P?r:jw(s,u[l]);return x}function Ku(s,u,l){return s===s&&(l!==r&&(s=s<=l?s:l),u!==r&&(s=s>=u?s:u)),s}function Gi(s,u,l,g,x,P){var B,L=u&d,K=u&m,se=u&w;if(l&&(B=x?l(s,g,x,P):l(s)),B!==r)return B;if(!vr(s))return s;var ae=bt(s);if(ae){if(B=j4(s),!L)return qn(s,B)}else{var pe=_n(s),Ce=pe==ji||pe==wn;if(Oa(s))return z2(s,L);if(pe==In||pe==wr||Ce&&!x){if(B=K||Ce?{}:uA(s),!L)return K?T4(s,ZO(B,s)):I4(s,b2(B,s))}else{if(!sr[pe])return x?s:{};B=$4(s,pe,L)}}P||(P=new Eo);var He=P.get(s);if(He)return He;P.set(s,B),UA(s)?s.forEach(function(at){B.add(Gi(at,u,l,at,s,P))}):OA(s)&&s.forEach(function(at,It){B.set(It,Gi(at,u,l,It,s,P))});var st=se?K?Cw:Dw:K?Vn:Zr,Et=ae?r:st(s);return Wi(Et||s,function(at,It){Et&&(It=at,at=s[It]),xh(B,It,Gi(at,u,l,It,s,P))}),B}function e4(s){var u=Zr(s);return function(l){return v2(l,s,u)}}function v2(s,u,l){var g=l.length;if(s==null)return!g;for(s=tr(s);g--;){var x=l[g],P=u[x],B=s[x];if(B===r&&!(x in s)||!P(B))return!1}return!0}function _2(s,u,l){if(typeof s!="function")throw new Vi(i);return Ih(function(){s.apply(r,l)},u)}function Eh(s,u,l,g){var x=-1,P=jd,B=!0,L=s.length,K=[],se=u.length;if(!L)return K;l&&(u=pr(u,ui(l))),g?(P=H0,B=!1):u.length>=t&&(P=yh,B=!1,u=new Mu(u));e:for(;++x<L;){var ae=s[x],pe=l==null?ae:l(ae);if(ae=g||ae!==0?ae:0,B&&pe===pe){for(var Ce=se;Ce--;)if(u[Ce]===pe)continue e;K.push(ae)}else P(u,pe,g)||K.push(ae)}return K}var ka=G2(ts),x2=G2(cw,!0);function t4(s,u){var l=!0;return ka(s,function(g,x,P){return l=!!u(g,x,P),l}),l}function om(s,u,l){for(var g=-1,x=s.length;++g<x;){var P=s[g],B=u(P);if(B!=null&&(L===r?B===B&&!fi(B):l(B,L)))var L=B,K=P}return K}function r4(s,u,l,g){var x=s.length;for(l=_t(l),l<0&&(l=-l>x?0:x+l),g=g===r||g>x?x:_t(g),g<0&&(g+=x),g=l>g?0:MA(g);l<g;)s[l++]=u;return s}function E2(s,u){var l=[];return ka(s,function(g,x,P){u(g,x,P)&&l.push(g)}),l}function fn(s,u,l,g,x){var P=-1,B=s.length;for(l||(l=q4),x||(x=[]);++P<B;){var L=s[P];u>0&&l(L)?u>1?fn(L,u-1,l,g,x):Ca(x,L):g||(x[x.length]=L)}return x}var uw=Y2(),A2=Y2(!0);function ts(s,u){return s&&uw(s,u,Zr)}function cw(s,u){return s&&A2(s,u,Zr)}function sm(s,u){return Da(u,function(l){return js(s[l])})}function ju(s,u){u=Ba(u,s);for(var l=0,g=u.length;s!=null&&l<g;)s=s[ns(u[l++])];return l&&l==g?s:r}function S2(s,u,l){var g=u(s);return bt(s)?g:Ca(g,l(s))}function Tn(s){return s==null?s===r?wo:Ea:Uu&&Uu in tr(s)?N4(s):X4(s)}function fw(s,u){return s>u}function n4(s,u){return s!=null&&Yt.call(s,u)}function i4(s,u){return s!=null&&u in tr(s)}function o4(s,u,l){return s>=vn(u,l)&&s<Hr(u,l)}function lw(s,u,l){for(var g=l?H0:jd,x=s[0].length,P=s.length,B=P,L=V(P),K=1/0,se=[];B--;){var ae=s[B];B&&u&&(ae=pr(ae,ui(u))),K=vn(ae.length,K),L[B]=!l&&(u||x>=120&&ae.length>=120)?new Mu(B&&ae):r}ae=s[0];var pe=-1,Ce=L[0];e:for(;++pe<x&&se.length<K;){var He=ae[pe],st=u?u(He):He;if(He=l||He!==0?He:0,!(Ce?yh(Ce,st):g(se,st,l))){for(B=P;--B;){var Et=L[B];if(!(Et?yh(Et,st):g(s[B],st,l)))continue e}Ce&&Ce.push(st),se.push(He)}}return se}function s4(s,u,l,g){return ts(s,function(x,P,B){u(g,l(x),P,B)}),g}function Ah(s,u,l){u=Ba(u,s),s=hA(s,u);var g=s==null?s:s[ns(Ji(u))];return g==null?r:ai(g,s,l)}function D2(s){return Sr(s)&&Tn(s)==wr}function a4(s){return Sr(s)&&Tn(s)==J}function u4(s){return Sr(s)&&Tn(s)==Ki}function Sh(s,u,l,g,x){return s===u?!0:s==null||u==null||!Sr(s)&&!Sr(u)?s!==s&&u!==u:c4(s,u,l,g,Sh,x)}function c4(s,u,l,g,x,P){var B=bt(s),L=bt(u),K=B?Ve:_n(s),se=L?Ve:_n(u);K=K==wr?In:K,se=se==wr?In:se;var ae=K==In,pe=se==In,Ce=K==se;if(Ce&&Oa(s)){if(!Oa(u))return!1;B=!0,ae=!1}if(Ce&&!ae)return P||(P=new Eo),B||Sf(s)?oA(s,u,l,g,x,P):L4(s,u,K,l,g,x,P);if(!(l&E)){var He=ae&&Yt.call(s,"__wrapped__"),st=pe&&Yt.call(u,"__wrapped__");if(He||st){var Et=He?s.value():s,at=st?u.value():u;return P||(P=new Eo),x(Et,at,l,g,P)}}return Ce?(P||(P=new Eo),U4(s,u,l,g,x,P)):!1}function f4(s){return Sr(s)&&_n(s)==Wr}function hw(s,u,l,g){var x=l.length,P=x,B=!g;if(s==null)return!P;for(s=tr(s);x--;){var L=l[x];if(B&&L[2]?L[1]!==s[L[0]]:!(L[0]in s))return!1}for(;++x<P;){L=l[x];var K=L[0],se=s[K],ae=L[1];if(B&&L[2]){if(se===r&&!(K in s))return!1}else{var pe=new Eo;if(g)var Ce=g(se,ae,K,s,u,pe);if(!(Ce===r?Sh(ae,se,E|T,g,pe):Ce))return!1}}return!0}function C2(s){if(!vr(s)||V4(s))return!1;var u=js(s)?fO:Pt;return u.test(zu(s))}function l4(s){return Sr(s)&&Tn(s)==Xr}function h4(s){return Sr(s)&&_n(s)==ur}function p4(s){return Sr(s)&&Em(s.length)&&!!fr[Tn(s)]}function P2(s){return typeof s=="function"?s:s==null?Hn:typeof s=="object"?bt(s)?k2(s[0],s[1]):T2(s):JA(s)}function pw(s){if(!Ph(s))return yO(s);var u=[];for(var l in tr(s))Yt.call(s,l)&&l!="constructor"&&u.push(l);return u}function d4(s){if(!vr(s))return J4(s);var u=Ph(s),l=[];for(var g in s)g=="constructor"&&(u||!Yt.call(s,g))||l.push(g);return l}function dw(s,u){return s<u}function I2(s,u){var l=-1,g=Wn(s)?V(s.length):[];return ka(s,function(x,P,B){g[++l]=u(x,P,B)}),g}function T2(s){var u=Iw(s);return u.length==1&&u[0][2]?fA(u[0][0],u[0][1]):function(l){return l===s||hw(l,s,u)}}function k2(s,u){return kw(s)&&cA(u)?fA(ns(s),u):function(l){var g=jw(l,s);return g===r&&g===u?$w(l,s):Sh(u,g,E|T)}}function am(s,u,l,g,x){s!==u&&uw(u,function(P,B){if(x||(x=new Eo),vr(P))m4(s,u,B,l,am,g,x);else{var L=g?g(Bw(s,B),P,B+"",s,u,x):r;L===r&&(L=P),sw(s,B,L)}},Vn)}function m4(s,u,l,g,x,P,B){var L=Bw(s,l),K=Bw(u,l),se=B.get(K);if(se){sw(s,l,se);return}var ae=P?P(L,K,l+"",s,u,B):r,pe=ae===r;if(pe){var Ce=bt(K),He=!Ce&&Oa(K),st=!Ce&&!He&&Sf(K);ae=K,Ce||He||st?bt(L)?ae=L:Or(L)?ae=qn(L):He?(pe=!1,ae=z2(K,!0)):st?(pe=!1,ae=q2(K,!0)):ae=[]:Th(K)||qu(K)?(ae=L,qu(L)?ae=KA(L):(!vr(L)||js(L))&&(ae=uA(K))):pe=!1}pe&&(B.set(K,ae),x(ae,K,g,P,B),B.delete(K)),sw(s,l,ae)}function F2(s,u){var l=s.length;if(!!l)return u+=u<0?l:0,Ks(u,l)?s[u]:r}function B2(s,u,l){u.length?u=pr(u,function(P){return bt(P)?function(B){return ju(B,P.length===1?P[0]:P)}:P}):u=[Hn];var g=-1;u=pr(u,ui(it()));var x=I2(s,function(P,B,L){var K=pr(u,function(se){return se(P)});return{criteria:K,index:++g,value:P}});return $R(x,function(P,B){return P4(P,B,l)})}function y4(s,u){return R2(s,u,function(l,g){return $w(s,g)})}function R2(s,u,l){for(var g=-1,x=u.length,P={};++g<x;){var B=u[g],L=ju(s,B);l(L,B)&&Dh(P,Ba(B,s),L)}return P}function g4(s){return function(u){return ju(u,s)}}function mw(s,u,l,g){var x=g?jR:mf,P=-1,B=u.length,L=s;for(s===u&&(u=qn(u)),l&&(L=pr(s,ui(l)));++P<B;)for(var K=0,se=u[P],ae=l?l(se):se;(K=x(L,ae,K,g))>-1;)L!==s&&Xd.call(L,K,1),Xd.call(s,K,1);return s}function O2(s,u){for(var l=s?u.length:0,g=l-1;l--;){var x=u[l];if(l==g||x!==P){var P=x;Ks(x)?Xd.call(s,x,1):bw(s,x)}}return s}function yw(s,u){return s+em(m2()*(u-s+1))}function w4(s,u,l,g){for(var x=-1,P=Hr(Zd((u-s)/(l||1)),0),B=V(P);P--;)B[g?P:++x]=s,s+=l;return B}function gw(s,u){var l="";if(!s||u<1||u>Kr)return l;do u%2&&(l+=s),u=em(u/2),u&&(s+=s);while(u);return l}function Dt(s,u){return Rw(lA(s,u,Hn),s+"")}function b4(s){return w2(Df(s))}function v4(s,u){var l=Df(s);return gm(l,Ku(u,0,l.length))}function Dh(s,u,l,g){if(!vr(s))return s;u=Ba(u,s);for(var x=-1,P=u.length,B=P-1,L=s;L!=null&&++x<P;){var K=ns(u[x]),se=l;if(K==="__proto__"||K==="constructor"||K==="prototype")return s;if(x!=B){var ae=L[K];se=g?g(ae,K,L):r,se===r&&(se=vr(ae)?ae:Ks(u[x+1])?[]:{})}xh(L,K,se),L=L[K]}return s}var L2=tm?function(s,u){return tm.set(s,u),s}:Hn,_4=Qd?function(s,u){return Qd(s,"toString",{configurable:!0,enumerable:!1,value:qw(u),writable:!0})}:Hn;function x4(s){return gm(Df(s))}function Yi(s,u,l){var g=-1,x=s.length;u<0&&(u=-u>x?0:x+u),l=l>x?x:l,l<0&&(l+=x),x=u>l?0:l-u>>>0,u>>>=0;for(var P=V(x);++g<x;)P[g]=s[g+u];return P}function E4(s,u){var l;return ka(s,function(g,x,P){return l=u(g,x,P),!l}),!!l}function um(s,u,l){var g=0,x=s==null?g:s.length;if(typeof u=="number"&&u===u&&x<=er){for(;g<x;){var P=g+x>>>1,B=s[P];B!==null&&!fi(B)&&(l?B<=u:B<u)?g=P+1:x=P}return x}return ww(s,u,Hn,l)}function ww(s,u,l,g){var x=0,P=s==null?0:s.length;if(P===0)return 0;u=l(u);for(var B=u!==u,L=u===null,K=fi(u),se=u===r;x<P;){var ae=em((x+P)/2),pe=l(s[ae]),Ce=pe!==r,He=pe===null,st=pe===pe,Et=fi(pe);if(B)var at=g||st;else se?at=st&&(g||Ce):L?at=st&&Ce&&(g||!He):K?at=st&&Ce&&!He&&(g||!Et):He||Et?at=!1:at=g?pe<=u:pe<u;at?x=ae+1:P=ae}return vn(P,Fs)}function U2(s,u){for(var l=-1,g=s.length,x=0,P=[];++l<g;){var B=s[l],L=u?u(B):B;if(!l||!Ao(L,K)){var K=L;P[x++]=B===0?0:B}}return P}function N2(s){return typeof s=="number"?s:fi(s)?Fr:+s}function ci(s){if(typeof s=="string")return s;if(bt(s))return pr(s,ci)+"";if(fi(s))return y2?y2.call(s):"";var u=s+"";return u=="0"&&1/s==-Mt?"-0":u}function Fa(s,u,l){var g=-1,x=jd,P=s.length,B=!0,L=[],K=L;if(l)B=!1,x=H0;else if(P>=t){var se=u?null:R4(s);if(se)return zd(se);B=!1,x=yh,K=new Mu}else K=u?[]:L;e:for(;++g<P;){var ae=s[g],pe=u?u(ae):ae;if(ae=l||ae!==0?ae:0,B&&pe===pe){for(var Ce=K.length;Ce--;)if(K[Ce]===pe)continue e;u&&K.push(pe),L.push(ae)}else x(K,pe,l)||(K!==L&&K.push(pe),L.push(ae))}return L}function bw(s,u){return u=Ba(u,s),s=hA(s,u),s==null||delete s[ns(Ji(u))]}function M2(s,u,l,g){return Dh(s,u,l(ju(s,u)),g)}function cm(s,u,l,g){for(var x=s.length,P=g?x:-1;(g?P--:++P<x)&&u(s[P],P,s););return l?Yi(s,g?0:P,g?P+1:x):Yi(s,g?P+1:0,g?x:P)}function K2(s,u){var l=s;return l instanceof Bt&&(l=l.value()),G0(u,function(g,x){return x.func.apply(x.thisArg,Ca([g],x.args))},l)}function vw(s,u,l){var g=s.length;if(g<2)return g?Fa(s[0]):[];for(var x=-1,P=V(g);++x<g;)for(var B=s[x],L=-1;++L<g;)L!=x&&(P[x]=Eh(P[x]||B,s[L],u,l));return Fa(fn(P,1),u,l)}function j2(s,u,l){for(var g=-1,x=s.length,P=u.length,B={};++g<x;){var L=g<P?u[g]:r;l(B,s[g],L)}return B}function _w(s){return Or(s)?s:[]}function xw(s){return typeof s=="function"?s:Hn}function Ba(s,u){return bt(s)?s:kw(s,u)?[s]:yA(Vt(s))}var A4=Dt;function Ra(s,u,l){var g=s.length;return l=l===r?g:l,!u&&l>=g?s:Yi(s,u,l)}var $2=lO||function(s){return Qr.clearTimeout(s)};function z2(s,u){if(u)return s.slice();var l=s.length,g=f2?f2(l):new s.constructor(l);return s.copy(g),g}function Ew(s){var u=new s.constructor(s.byteLength);return new Yd(u).set(new Yd(s)),u}function S4(s,u){var l=u?Ew(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.byteLength)}function D4(s){var u=new s.constructor(s.source,ye.exec(s));return u.lastIndex=s.lastIndex,u}function C4(s){return _h?tr(_h.call(s)):{}}function q2(s,u){var l=u?Ew(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.length)}function W2(s,u){if(s!==u){var l=s!==r,g=s===null,x=s===s,P=fi(s),B=u!==r,L=u===null,K=u===u,se=fi(u);if(!L&&!se&&!P&&s>u||P&&B&&K&&!L&&!se||g&&B&&K||!l&&K||!x)return 1;if(!g&&!P&&!se&&s<u||se&&l&&x&&!g&&!P||L&&l&&x||!B&&x||!K)return-1}return 0}function P4(s,u,l){for(var g=-1,x=s.criteria,P=u.criteria,B=x.length,L=l.length;++g<B;){var K=W2(x[g],P[g]);if(K){if(g>=L)return K;var se=l[g];return K*(se=="desc"?-1:1)}}return s.index-u.index}function V2(s,u,l,g){for(var x=-1,P=s.length,B=l.length,L=-1,K=u.length,se=Hr(P-B,0),ae=V(K+se),pe=!g;++L<K;)ae[L]=u[L];for(;++x<B;)(pe||x<P)&&(ae[l[x]]=s[x]);for(;se--;)ae[L++]=s[x++];return ae}function H2(s,u,l,g){for(var x=-1,P=s.length,B=-1,L=l.length,K=-1,se=u.length,ae=Hr(P-L,0),pe=V(ae+se),Ce=!g;++x<ae;)pe[x]=s[x];for(var He=x;++K<se;)pe[He+K]=u[K];for(;++B<L;)(Ce||x<P)&&(pe[He+l[B]]=s[x++]);return pe}function qn(s,u){var l=-1,g=s.length;for(u||(u=V(g));++l<g;)u[l]=s[l];return u}function rs(s,u,l,g){var x=!l;l||(l={});for(var P=-1,B=u.length;++P<B;){var L=u[P],K=g?g(l[L],s[L],L,l,s):r;K===r&&(K=s[L]),x?Us(l,L,K):xh(l,L,K)}return l}function I4(s,u){return rs(s,Tw(s),u)}function T4(s,u){return rs(s,sA(s),u)}function fm(s,u){return function(l,g){var x=bt(l)?OR:QO,P=u?u():{};return x(l,s,it(g,2),P)}}function xf(s){return Dt(function(u,l){var g=-1,x=l.length,P=x>1?l[x-1]:r,B=x>2?l[2]:r;for(P=s.length>3&&typeof P=="function"?(x--,P):r,B&&kn(l[0],l[1],B)&&(P=x<3?r:P,x=1),u=tr(u);++g<x;){var L=l[g];L&&s(u,L,g,P)}return u})}function G2(s,u){return function(l,g){if(l==null)return l;if(!Wn(l))return s(l,g);for(var x=l.length,P=u?x:-1,B=tr(l);(u?P--:++P<x)&&g(B[P],P,B)!==!1;);return l}}function Y2(s){return function(u,l,g){for(var x=-1,P=tr(u),B=g(u),L=B.length;L--;){var K=B[s?L:++x];if(l(P[K],K,P)===!1)break}return u}}function k4(s,u,l){var g=u&F,x=Ch(s);function P(){var B=this&&this!==Qr&&this instanceof P?x:s;return B.apply(g?l:this,arguments)}return P}function J2(s){return function(u){u=Vt(u);var l=yf(u)?xo(u):r,g=l?l[0]:u.charAt(0),x=l?Ra(l,1).join(""):u.slice(1);return g[s]()+x}}function Ef(s){return function(u){return G0(GA(HA(u).replace(_R,"")),s,"")}}function Ch(s){return function(){var u=arguments;switch(u.length){case 0:return new s;case 1:return new s(u[0]);case 2:return new s(u[0],u[1]);case 3:return new s(u[0],u[1],u[2]);case 4:return new s(u[0],u[1],u[2],u[3]);case 5:return new s(u[0],u[1],u[2],u[3],u[4]);case 6:return new s(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new s(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var l=_f(s.prototype),g=s.apply(l,u);return vr(g)?g:l}}function F4(s,u,l){var g=Ch(s);function x(){for(var P=arguments.length,B=V(P),L=P,K=Af(x);L--;)B[L]=arguments[L];var se=P<3&&B[0]!==K&&B[P-1]!==K?[]:Pa(B,K);if(P-=se.length,P<l)return tA(s,u,lm,x.placeholder,r,B,se,r,r,l-P);var ae=this&&this!==Qr&&this instanceof x?g:s;return ai(ae,this,B)}return x}function X2(s){return function(u,l,g){var x=tr(u);if(!Wn(u)){var P=it(l,3);u=Zr(u),l=function(L){return P(x[L],L,x)}}var B=s(u,l,g);return B>-1?x[P?u[B]:B]:r}}function Q2(s){return Ms(function(u){var l=u.length,g=l,x=Hi.prototype.thru;for(s&&u.reverse();g--;){var P=u[g];if(typeof P!="function")throw new Vi(i);if(x&&!B&&mm(P)=="wrapper")var B=new Hi([],!0)}for(g=B?g:l;++g<l;){P=u[g];var L=mm(P),K=L=="wrapper"?Pw(P):r;K&&Fw(K[0])&&K[1]==(Ae|de|ie|Y)&&!K[4].length&&K[9]==1?B=B[mm(K[0])].apply(B,K[3]):B=P.length==1&&Fw(P)?B[L]():B.thru(P)}return function(){var se=arguments,ae=se[0];if(B&&se.length==1&&bt(ae))return B.plant(ae).value();for(var pe=0,Ce=l?u[pe].apply(this,se):ae;++pe<l;)Ce=u[pe].call(this,Ce);return Ce}})}function lm(s,u,l,g,x,P,B,L,K,se){var ae=u&Ae,pe=u&F,Ce=u&N,He=u&(de|Pe),st=u&ge,Et=Ce?r:Ch(s);function at(){for(var It=arguments.length,Lt=V(It),li=It;li--;)Lt[li]=arguments[li];if(He)var Fn=Af(at),hi=qR(Lt,Fn);if(g&&(Lt=V2(Lt,g,x,He)),P&&(Lt=H2(Lt,P,B,He)),It-=hi,He&&It<se){var Lr=Pa(Lt,Fn);return tA(s,u,lm,at.placeholder,l,Lt,Lr,L,K,se-It)}var So=pe?l:this,zs=Ce?So[s]:s;return It=Lt.length,L?Lt=Q4(Lt,L):st&&It>1&&Lt.reverse(),ae&&K<It&&(Lt.length=K),this&&this!==Qr&&this instanceof at&&(zs=Et||Ch(zs)),zs.apply(So,Lt)}return at}function Z2(s,u){return function(l,g){return s4(l,s,u(g),{})}}function hm(s,u){return function(l,g){var x;if(l===r&&g===r)return u;if(l!==r&&(x=l),g!==r){if(x===r)return g;typeof l=="string"||typeof g=="string"?(l=ci(l),g=ci(g)):(l=N2(l),g=N2(g)),x=s(l,g)}return x}}function Aw(s){return Ms(function(u){return u=pr(u,ui(it())),Dt(function(l){var g=this;return s(u,function(x){return ai(x,g,l)})})})}function pm(s,u){u=u===r?" ":ci(u);var l=u.length;if(l<2)return l?gw(u,s):u;var g=gw(u,Zd(s/gf(u)));return yf(u)?Ra(xo(g),0,s).join(""):g.slice(0,s)}function B4(s,u,l,g){var x=u&F,P=Ch(s);function B(){for(var L=-1,K=arguments.length,se=-1,ae=g.length,pe=V(ae+K),Ce=this&&this!==Qr&&this instanceof B?P:s;++se<ae;)pe[se]=g[se];for(;K--;)pe[se++]=arguments[++L];return ai(Ce,x?l:this,pe)}return B}function eA(s){return function(u,l,g){return g&&typeof g!="number"&&kn(u,l,g)&&(l=g=r),u=$s(u),l===r?(l=u,u=0):l=$s(l),g=g===r?u<l?1:-1:$s(g),w4(u,l,g,s)}}function dm(s){return function(u,l){return typeof u=="string"&&typeof l=="string"||(u=Xi(u),l=Xi(l)),s(u,l)}}function tA(s,u,l,g,x,P,B,L,K,se){var ae=u&de,pe=ae?B:r,Ce=ae?r:B,He=ae?P:r,st=ae?r:P;u|=ae?ie:be,u&=~(ae?be:ie),u&he||(u&=~(F|N));var Et=[s,u,x,He,pe,st,Ce,L,K,se],at=l.apply(r,Et);return Fw(s)&&pA(at,Et),at.placeholder=g,dA(at,s,u)}function Sw(s){var u=Vr[s];return function(l,g){if(l=Xi(l),g=g==null?0:vn(_t(g),292),g&&d2(l)){var x=(Vt(l)+"e").split("e"),P=u(x[0]+"e"+(+x[1]+g));return x=(Vt(P)+"e").split("e"),+(x[0]+"e"+(+x[1]-g))}return u(l)}}var R4=bf&&1/zd(new bf([,-0]))[1]==Mt?function(s){return new bf(s)}:Hw;function rA(s){return function(u){var l=_n(u);return l==Wr?tw(u):l==ur?XR(u):zR(u,s(u))}}function Ns(s,u,l,g,x,P,B,L){var K=u&N;if(!K&&typeof s!="function")throw new Vi(i);var se=g?g.length:0;if(se||(u&=~(ie|be),g=x=r),B=B===r?B:Hr(_t(B),0),L=L===r?L:_t(L),se-=x?x.length:0,u&be){var ae=g,pe=x;g=x=r}var Ce=K?r:Pw(s),He=[s,u,l,g,x,ae,pe,P,B,L];if(Ce&&Y4(He,Ce),s=He[0],u=He[1],l=He[2],g=He[3],x=He[4],L=He[9]=He[9]===r?K?0:s.length:Hr(He[9]-se,0),!L&&u&(de|Pe)&&(u&=~(de|Pe)),!u||u==F)var st=k4(s,u,l);else u==de||u==Pe?st=F4(s,u,L):(u==ie||u==(F|ie))&&!x.length?st=B4(s,u,l,g):st=lm.apply(r,He);var Et=Ce?L2:pA;return dA(Et(st,He),s,u)}function nA(s,u,l,g){return s===r||Ao(s,wf[l])&&!Yt.call(g,l)?u:s}function iA(s,u,l,g,x,P){return vr(s)&&vr(u)&&(P.set(u,s),am(s,u,r,iA,P),P.delete(u)),s}function O4(s){return Th(s)?r:s}function oA(s,u,l,g,x,P){var B=l&E,L=s.length,K=u.length;if(L!=K&&!(B&&K>L))return!1;var se=P.get(s),ae=P.get(u);if(se&&ae)return se==u&&ae==s;var pe=-1,Ce=!0,He=l&T?new Mu:r;for(P.set(s,u),P.set(u,s);++pe<L;){var st=s[pe],Et=u[pe];if(g)var at=B?g(Et,st,pe,u,s,P):g(st,Et,pe,s,u,P);if(at!==r){if(at)continue;Ce=!1;break}if(He){if(!Y0(u,function(It,Lt){if(!yh(He,Lt)&&(st===It||x(st,It,l,g,P)))return He.push(Lt)})){Ce=!1;break}}else if(!(st===Et||x(st,Et,l,g,P))){Ce=!1;break}}return P.delete(s),P.delete(u),Ce}function L4(s,u,l,g,x,P,B){switch(l){case le:if(s.byteLength!=u.byteLength||s.byteOffset!=u.byteOffset)return!1;s=s.buffer,u=u.buffer;case J:return!(s.byteLength!=u.byteLength||!P(new Yd(s),new Yd(u)));case Mi:case Ki:case go:return Ao(+s,+u);case Br:return s.name==u.name&&s.message==u.message;case Xr:case $n:return s==u+"";case Wr:var L=tw;case ur:var K=g&E;if(L||(L=zd),s.size!=u.size&&!K)return!1;var se=B.get(s);if(se)return se==u;g|=T,B.set(s,u);var ae=oA(L(s),L(u),g,x,P,B);return B.delete(s),ae;case zn:if(_h)return _h.call(s)==_h.call(u)}return!1}function U4(s,u,l,g,x,P){var B=l&E,L=Dw(s),K=L.length,se=Dw(u),ae=se.length;if(K!=ae&&!B)return!1;for(var pe=K;pe--;){var Ce=L[pe];if(!(B?Ce in u:Yt.call(u,Ce)))return!1}var He=P.get(s),st=P.get(u);if(He&&st)return He==u&&st==s;var Et=!0;P.set(s,u),P.set(u,s);for(var at=B;++pe<K;){Ce=L[pe];var It=s[Ce],Lt=u[Ce];if(g)var li=B?g(Lt,It,Ce,u,s,P):g(It,Lt,Ce,s,u,P);if(!(li===r?It===Lt||x(It,Lt,l,g,P):li)){Et=!1;break}at||(at=Ce=="constructor")}if(Et&&!at){var Fn=s.constructor,hi=u.constructor;Fn!=hi&&"constructor"in s&&"constructor"in u&&!(typeof Fn=="function"&&Fn instanceof Fn&&typeof hi=="function"&&hi instanceof hi)&&(Et=!1)}return P.delete(s),P.delete(u),Et}function Ms(s){return Rw(lA(s,r,vA),s+"")}function Dw(s){return S2(s,Zr,Tw)}function Cw(s){return S2(s,Vn,sA)}var Pw=tm?function(s){return tm.get(s)}:Hw;function mm(s){for(var u=s.name+"",l=vf[u],g=Yt.call(vf,u)?l.length:0;g--;){var x=l[g],P=x.func;if(P==null||P==s)return x.name}return u}function Af(s){var u=Yt.call(D,"placeholder")?D:s;return u.placeholder}function it(){var s=D.iteratee||Ww;return s=s===Ww?P2:s,arguments.length?s(arguments[0],arguments[1]):s}function ym(s,u){var l=s.__data__;return W4(u)?l[typeof u=="string"?"string":"hash"]:l.map}function Iw(s){for(var u=Zr(s),l=u.length;l--;){var g=u[l],x=s[g];u[l]=[g,x,cA(x)]}return u}function $u(s,u){var l=GR(s,u);return C2(l)?l:r}function N4(s){var u=Yt.call(s,Uu),l=s[Uu];try{s[Uu]=r;var g=!0}catch{}var x=Hd.call(s);return g&&(u?s[Uu]=l:delete s[Uu]),x}var Tw=nw?function(s){return s==null?[]:(s=tr(s),Da(nw(s),function(u){return h2.call(s,u)}))}:Gw,sA=nw?function(s){for(var u=[];s;)Ca(u,Tw(s)),s=Jd(s);return u}:Gw,_n=Tn;(iw&&_n(new iw(new ArrayBuffer(1)))!=le||wh&&_n(new wh)!=Wr||ow&&_n(ow.resolve())!=bn||bf&&_n(new bf)!=ur||bh&&_n(new bh)!=un)&&(_n=function(s){var u=Tn(s),l=u==In?s.constructor:r,g=l?zu(l):"";if(g)switch(g){case vO:return le;case _O:return Wr;case xO:return bn;case EO:return ur;case AO:return un}return u});function M4(s,u,l){for(var g=-1,x=l.length;++g<x;){var P=l[g],B=P.size;switch(P.type){case"drop":s+=B;break;case"dropRight":u-=B;break;case"take":u=vn(u,s+B);break;case"takeRight":s=Hr(s,u-B);break}}return{start:s,end:u}}function K4(s){var u=s.match(A);return u?u[1].split(y):[]}function aA(s,u,l){u=Ba(u,s);for(var g=-1,x=u.length,P=!1;++g<x;){var B=ns(u[g]);if(!(P=s!=null&&l(s,B)))break;s=s[B]}return P||++g!=x?P:(x=s==null?0:s.length,!!x&&Em(x)&&Ks(B,x)&&(bt(s)||qu(s)))}function j4(s){var u=s.length,l=new s.constructor(u);return u&&typeof s[0]=="string"&&Yt.call(s,"index")&&(l.index=s.index,l.input=s.input),l}function uA(s){return typeof s.constructor=="function"&&!Ph(s)?_f(Jd(s)):{}}function $4(s,u,l){var g=s.constructor;switch(u){case J:return Ew(s);case Mi:case Ki:return new g(+s);case le:return S4(s,l);case ve:case je:case or:case tt:case ut:case qe:case yt:case ht:case Ar:return q2(s,l);case Wr:return new g;case go:case $n:return new g(s);case Xr:return D4(s);case ur:return new g;case zn:return C4(s)}}function z4(s,u){var l=u.length;if(!l)return s;var g=l-1;return u[g]=(l>1?"& ":"")+u[g],u=u.join(l>2?", ":" "),s.replace(S,`{
/* [wrapped with `+u+`] */
`)}function q4(s){return bt(s)||qu(s)||!!(p2&&s&&s[p2])}function Ks(s,u){var l=typeof s;return u=u??Kr,!!u&&(l=="number"||l!="symbol"&&rt.test(s))&&s>-1&&s%1==0&&s<u}function kn(s,u,l){if(!vr(l))return!1;var g=typeof u;return(g=="number"?Wn(l)&&Ks(u,l.length):g=="string"&&u in l)?Ao(l[u],s):!1}function kw(s,u){if(bt(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||fi(s)?!0:Ru.test(s)||!Bu.test(s)||u!=null&&s in tr(u)}function W4(s){var u=typeof s;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?s!=="__proto__":s===null}function Fw(s){var u=mm(s),l=D[u];if(typeof l!="function"||!(u in Bt.prototype))return!1;if(s===l)return!0;var g=Pw(l);return!!g&&s===g[0]}function V4(s){return!!c2&&c2 in s}var H4=Wd?js:Yw;function Ph(s){var u=s&&s.constructor,l=typeof u=="function"&&u.prototype||wf;return s===l}function cA(s){return s===s&&!vr(s)}function fA(s,u){return function(l){return l==null?!1:l[s]===u&&(u!==r||s in tr(l))}}function G4(s){var u=_m(s,function(g){return l.size===c&&l.clear(),g}),l=u.cache;return u}function Y4(s,u){var l=s[1],g=u[1],x=l|g,P=x<(F|N|Ae),B=g==Ae&&l==de||g==Ae&&l==Y&&s[7].length<=u[8]||g==(Ae|Y)&&u[7].length<=u[8]&&l==de;if(!(P||B))return s;g&F&&(s[2]=u[2],x|=l&F?0:he);var L=u[3];if(L){var K=s[3];s[3]=K?V2(K,L,u[4]):L,s[4]=K?Pa(s[3],f):u[4]}return L=u[5],L&&(K=s[5],s[5]=K?H2(K,L,u[6]):L,s[6]=K?Pa(s[5],f):u[6]),L=u[7],L&&(s[7]=L),g&Ae&&(s[8]=s[8]==null?u[8]:vn(s[8],u[8])),s[9]==null&&(s[9]=u[9]),s[0]=u[0],s[1]=x,s}function J4(s){var u=[];if(s!=null)for(var l in tr(s))u.push(l);return u}function X4(s){return Hd.call(s)}function lA(s,u,l){return u=Hr(u===r?s.length-1:u,0),function(){for(var g=arguments,x=-1,P=Hr(g.length-u,0),B=V(P);++x<P;)B[x]=g[u+x];x=-1;for(var L=V(u+1);++x<u;)L[x]=g[x];return L[u]=l(B),ai(s,this,L)}}function hA(s,u){return u.length<2?s:ju(s,Yi(u,0,-1))}function Q4(s,u){for(var l=s.length,g=vn(u.length,l),x=qn(s);g--;){var P=u[g];s[g]=Ks(P,l)?x[P]:r}return s}function Bw(s,u){if(!(u==="constructor"&&typeof s[u]=="function")&&u!="__proto__")return s[u]}var pA=mA(L2),Ih=pO||function(s,u){return Qr.setTimeout(s,u)},Rw=mA(_4);function dA(s,u,l){var g=u+"";return Rw(s,z4(g,Z4(K4(g),l)))}function mA(s){var u=0,l=0;return function(){var g=gO(),x=Ut-(g-l);if(l=g,x>0){if(++u>=vt)return arguments[0]}else u=0;return s.apply(r,arguments)}}function gm(s,u){var l=-1,g=s.length,x=g-1;for(u=u===r?g:u;++l<u;){var P=yw(l,x),B=s[P];s[P]=s[l],s[l]=B}return s.length=u,s}var yA=G4(function(s){var u=[];return s.charCodeAt(0)===46&&u.push(""),s.replace(df,function(l,g,x,P){u.push(x?P.replace(j,"$1"):g||l)}),u});function ns(s){if(typeof s=="string"||fi(s))return s;var u=s+"";return u=="0"&&1/s==-Mt?"-0":u}function zu(s){if(s!=null){try{return Vd.call(s)}catch{}try{return s+""}catch{}}return""}function Z4(s,u){return Wi(Wt,function(l){var g="_."+l[0];u&l[1]&&!jd(s,g)&&s.push(g)}),s.sort()}function gA(s){if(s instanceof Bt)return s.clone();var u=new Hi(s.__wrapped__,s.__chain__);return u.__actions__=qn(s.__actions__),u.__index__=s.__index__,u.__values__=s.__values__,u}function eL(s,u,l){(l?kn(s,u,l):u===r)?u=1:u=Hr(_t(u),0);var g=s==null?0:s.length;if(!g||u<1)return[];for(var x=0,P=0,B=V(Zd(g/u));x<g;)B[P++]=Yi(s,x,x+=u);return B}function tL(s){for(var u=-1,l=s==null?0:s.length,g=0,x=[];++u<l;){var P=s[u];P&&(x[g++]=P)}return x}function rL(){var s=arguments.length;if(!s)return[];for(var u=V(s-1),l=arguments[0],g=s;g--;)u[g-1]=arguments[g];return Ca(bt(l)?qn(l):[l],fn(u,1))}var nL=Dt(function(s,u){return Or(s)?Eh(s,fn(u,1,Or,!0)):[]}),iL=Dt(function(s,u){var l=Ji(u);return Or(l)&&(l=r),Or(s)?Eh(s,fn(u,1,Or,!0),it(l,2)):[]}),oL=Dt(function(s,u){var l=Ji(u);return Or(l)&&(l=r),Or(s)?Eh(s,fn(u,1,Or,!0),r,l):[]});function sL(s,u,l){var g=s==null?0:s.length;return g?(u=l||u===r?1:_t(u),Yi(s,u<0?0:u,g)):[]}function aL(s,u,l){var g=s==null?0:s.length;return g?(u=l||u===r?1:_t(u),u=g-u,Yi(s,0,u<0?0:u)):[]}function uL(s,u){return s&&s.length?cm(s,it(u,3),!0,!0):[]}function cL(s,u){return s&&s.length?cm(s,it(u,3),!0):[]}function fL(s,u,l,g){var x=s==null?0:s.length;return x?(l&&typeof l!="number"&&kn(s,u,l)&&(l=0,g=x),r4(s,u,l,g)):[]}function wA(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var x=l==null?0:_t(l);return x<0&&(x=Hr(g+x,0)),$d(s,it(u,3),x)}function bA(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var x=g-1;return l!==r&&(x=_t(l),x=l<0?Hr(g+x,0):vn(x,g-1)),$d(s,it(u,3),x,!0)}function vA(s){var u=s==null?0:s.length;return u?fn(s,1):[]}function lL(s){var u=s==null?0:s.length;return u?fn(s,Mt):[]}function hL(s,u){var l=s==null?0:s.length;return l?(u=u===r?1:_t(u),fn(s,u)):[]}function pL(s){for(var u=-1,l=s==null?0:s.length,g={};++u<l;){var x=s[u];g[x[0]]=x[1]}return g}function _A(s){return s&&s.length?s[0]:r}function dL(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var x=l==null?0:_t(l);return x<0&&(x=Hr(g+x,0)),mf(s,u,x)}function mL(s){var u=s==null?0:s.length;return u?Yi(s,0,-1):[]}var yL=Dt(function(s){var u=pr(s,_w);return u.length&&u[0]===s[0]?lw(u):[]}),gL=Dt(function(s){var u=Ji(s),l=pr(s,_w);return u===Ji(l)?u=r:l.pop(),l.length&&l[0]===s[0]?lw(l,it(u,2)):[]}),wL=Dt(function(s){var u=Ji(s),l=pr(s,_w);return u=typeof u=="function"?u:r,u&&l.pop(),l.length&&l[0]===s[0]?lw(l,r,u):[]});function bL(s,u){return s==null?"":mO.call(s,u)}function Ji(s){var u=s==null?0:s.length;return u?s[u-1]:r}function vL(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var x=g;return l!==r&&(x=_t(l),x=x<0?Hr(g+x,0):vn(x,g-1)),u===u?ZR(s,u,x):$d(s,t2,x,!0)}function _L(s,u){return s&&s.length?F2(s,_t(u)):r}var xL=Dt(xA);function xA(s,u){return s&&s.length&&u&&u.length?mw(s,u):s}function EL(s,u,l){return s&&s.length&&u&&u.length?mw(s,u,it(l,2)):s}function AL(s,u,l){return s&&s.length&&u&&u.length?mw(s,u,r,l):s}var SL=Ms(function(s,u){var l=s==null?0:s.length,g=aw(s,u);return O2(s,pr(u,function(x){return Ks(x,l)?+x:x}).sort(W2)),g});function DL(s,u){var l=[];if(!(s&&s.length))return l;var g=-1,x=[],P=s.length;for(u=it(u,3);++g<P;){var B=s[g];u(B,g,s)&&(l.push(B),x.push(g))}return O2(s,x),l}function Ow(s){return s==null?s:bO.call(s)}function CL(s,u,l){var g=s==null?0:s.length;return g?(l&&typeof l!="number"&&kn(s,u,l)?(u=0,l=g):(u=u==null?0:_t(u),l=l===r?g:_t(l)),Yi(s,u,l)):[]}function PL(s,u){return um(s,u)}function IL(s,u,l){return ww(s,u,it(l,2))}function TL(s,u){var l=s==null?0:s.length;if(l){var g=um(s,u);if(g<l&&Ao(s[g],u))return g}return-1}function kL(s,u){return um(s,u,!0)}function FL(s,u,l){return ww(s,u,it(l,2),!0)}function BL(s,u){var l=s==null?0:s.length;if(l){var g=um(s,u,!0)-1;if(Ao(s[g],u))return g}return-1}function RL(s){return s&&s.length?U2(s):[]}function OL(s,u){return s&&s.length?U2(s,it(u,2)):[]}function LL(s){var u=s==null?0:s.length;return u?Yi(s,1,u):[]}function UL(s,u,l){return s&&s.length?(u=l||u===r?1:_t(u),Yi(s,0,u<0?0:u)):[]}function NL(s,u,l){var g=s==null?0:s.length;return g?(u=l||u===r?1:_t(u),u=g-u,Yi(s,u<0?0:u,g)):[]}function ML(s,u){return s&&s.length?cm(s,it(u,3),!1,!0):[]}function KL(s,u){return s&&s.length?cm(s,it(u,3)):[]}var jL=Dt(function(s){return Fa(fn(s,1,Or,!0))}),$L=Dt(function(s){var u=Ji(s);return Or(u)&&(u=r),Fa(fn(s,1,Or,!0),it(u,2))}),zL=Dt(function(s){var u=Ji(s);return u=typeof u=="function"?u:r,Fa(fn(s,1,Or,!0),r,u)});function qL(s){return s&&s.length?Fa(s):[]}function WL(s,u){return s&&s.length?Fa(s,it(u,2)):[]}function VL(s,u){return u=typeof u=="function"?u:r,s&&s.length?Fa(s,r,u):[]}function Lw(s){if(!(s&&s.length))return[];var u=0;return s=Da(s,function(l){if(Or(l))return u=Hr(l.length,u),!0}),Z0(u,function(l){return pr(s,J0(l))})}function EA(s,u){if(!(s&&s.length))return[];var l=Lw(s);return u==null?l:pr(l,function(g){return ai(u,r,g)})}var HL=Dt(function(s,u){return Or(s)?Eh(s,u):[]}),GL=Dt(function(s){return vw(Da(s,Or))}),YL=Dt(function(s){var u=Ji(s);return Or(u)&&(u=r),vw(Da(s,Or),it(u,2))}),JL=Dt(function(s){var u=Ji(s);return u=typeof u=="function"?u:r,vw(Da(s,Or),r,u)}),XL=Dt(Lw);function QL(s,u){return j2(s||[],u||[],xh)}function ZL(s,u){return j2(s||[],u||[],Dh)}var eU=Dt(function(s){var u=s.length,l=u>1?s[u-1]:r;return l=typeof l=="function"?(s.pop(),l):r,EA(s,l)});function AA(s){var u=D(s);return u.__chain__=!0,u}function tU(s,u){return u(s),s}function wm(s,u){return u(s)}var rU=Ms(function(s){var u=s.length,l=u?s[0]:0,g=this.__wrapped__,x=function(P){return aw(P,s)};return u>1||this.__actions__.length||!(g instanceof Bt)||!Ks(l)?this.thru(x):(g=g.slice(l,+l+(u?1:0)),g.__actions__.push({func:wm,args:[x],thisArg:r}),new Hi(g,this.__chain__).thru(function(P){return u&&!P.length&&P.push(r),P}))});function nU(){return AA(this)}function iU(){return new Hi(this.value(),this.__chain__)}function oU(){this.__values__===r&&(this.__values__=NA(this.value()));var s=this.__index__>=this.__values__.length,u=s?r:this.__values__[this.__index__++];return{done:s,value:u}}function sU(){return this}function aU(s){for(var u,l=this;l instanceof nm;){var g=gA(l);g.__index__=0,g.__values__=r,u?x.__wrapped__=g:u=g;var x=g;l=l.__wrapped__}return x.__wrapped__=s,u}function uU(){var s=this.__wrapped__;if(s instanceof Bt){var u=s;return this.__actions__.length&&(u=new Bt(this)),u=u.reverse(),u.__actions__.push({func:wm,args:[Ow],thisArg:r}),new Hi(u,this.__chain__)}return this.thru(Ow)}function cU(){return K2(this.__wrapped__,this.__actions__)}var fU=fm(function(s,u,l){Yt.call(s,l)?++s[l]:Us(s,l,1)});function lU(s,u,l){var g=bt(s)?ZE:t4;return l&&kn(s,u,l)&&(u=r),g(s,it(u,3))}function hU(s,u){var l=bt(s)?Da:E2;return l(s,it(u,3))}var pU=X2(wA),dU=X2(bA);function mU(s,u){return fn(bm(s,u),1)}function yU(s,u){return fn(bm(s,u),Mt)}function gU(s,u,l){return l=l===r?1:_t(l),fn(bm(s,u),l)}function SA(s,u){var l=bt(s)?Wi:ka;return l(s,it(u,3))}function DA(s,u){var l=bt(s)?LR:x2;return l(s,it(u,3))}var wU=fm(function(s,u,l){Yt.call(s,l)?s[l].push(u):Us(s,l,[u])});function bU(s,u,l,g){s=Wn(s)?s:Df(s),l=l&&!g?_t(l):0;var x=s.length;return l<0&&(l=Hr(x+l,0)),Am(s)?l<=x&&s.indexOf(u,l)>-1:!!x&&mf(s,u,l)>-1}var vU=Dt(function(s,u,l){var g=-1,x=typeof u=="function",P=Wn(s)?V(s.length):[];return ka(s,function(B){P[++g]=x?ai(u,B,l):Ah(B,u,l)}),P}),_U=fm(function(s,u,l){Us(s,l,u)});function bm(s,u){var l=bt(s)?pr:I2;return l(s,it(u,3))}function xU(s,u,l,g){return s==null?[]:(bt(u)||(u=u==null?[]:[u]),l=g?r:l,bt(l)||(l=l==null?[]:[l]),B2(s,u,l))}var EU=fm(function(s,u,l){s[l?0:1].push(u)},function(){return[[],[]]});function AU(s,u,l){var g=bt(s)?G0:n2,x=arguments.length<3;return g(s,it(u,4),l,x,ka)}function SU(s,u,l){var g=bt(s)?UR:n2,x=arguments.length<3;return g(s,it(u,4),l,x,x2)}function DU(s,u){var l=bt(s)?Da:E2;return l(s,xm(it(u,3)))}function CU(s){var u=bt(s)?w2:b4;return u(s)}function PU(s,u,l){(l?kn(s,u,l):u===r)?u=1:u=_t(u);var g=bt(s)?JO:v4;return g(s,u)}function IU(s){var u=bt(s)?XO:x4;return u(s)}function TU(s){if(s==null)return 0;if(Wn(s))return Am(s)?gf(s):s.length;var u=_n(s);return u==Wr||u==ur?s.size:pw(s).length}function kU(s,u,l){var g=bt(s)?Y0:E4;return l&&kn(s,u,l)&&(u=r),g(s,it(u,3))}var FU=Dt(function(s,u){if(s==null)return[];var l=u.length;return l>1&&kn(s,u[0],u[1])?u=[]:l>2&&kn(u[0],u[1],u[2])&&(u=[u[0]]),B2(s,fn(u,1),[])}),vm=hO||function(){return Qr.Date.now()};function BU(s,u){if(typeof u!="function")throw new Vi(i);return s=_t(s),function(){if(--s<1)return u.apply(this,arguments)}}function CA(s,u,l){return u=l?r:u,u=s&&u==null?s.length:u,Ns(s,Ae,r,r,r,r,u)}function PA(s,u){var l;if(typeof u!="function")throw new Vi(i);return s=_t(s),function(){return--s>0&&(l=u.apply(this,arguments)),s<=1&&(u=r),l}}var Uw=Dt(function(s,u,l){var g=F;if(l.length){var x=Pa(l,Af(Uw));g|=ie}return Ns(s,g,u,l,x)}),IA=Dt(function(s,u,l){var g=F|N;if(l.length){var x=Pa(l,Af(IA));g|=ie}return Ns(u,g,s,l,x)});function TA(s,u,l){u=l?r:u;var g=Ns(s,de,r,r,r,r,r,u);return g.placeholder=TA.placeholder,g}function kA(s,u,l){u=l?r:u;var g=Ns(s,Pe,r,r,r,r,r,u);return g.placeholder=kA.placeholder,g}function FA(s,u,l){var g,x,P,B,L,K,se=0,ae=!1,pe=!1,Ce=!0;if(typeof s!="function")throw new Vi(i);u=Xi(u)||0,vr(l)&&(ae=!!l.leading,pe="maxWait"in l,P=pe?Hr(Xi(l.maxWait)||0,u):P,Ce="trailing"in l?!!l.trailing:Ce);function He(Lr){var So=g,zs=x;return g=x=r,se=Lr,B=s.apply(zs,So),B}function st(Lr){return se=Lr,L=Ih(It,u),ae?He(Lr):B}function Et(Lr){var So=Lr-K,zs=Lr-se,XA=u-So;return pe?vn(XA,P-zs):XA}function at(Lr){var So=Lr-K,zs=Lr-se;return K===r||So>=u||So<0||pe&&zs>=P}function It(){var Lr=vm();if(at(Lr))return Lt(Lr);L=Ih(It,Et(Lr))}function Lt(Lr){return L=r,Ce&&g?He(Lr):(g=x=r,B)}function li(){L!==r&&$2(L),se=0,g=K=x=L=r}function Fn(){return L===r?B:Lt(vm())}function hi(){var Lr=vm(),So=at(Lr);if(g=arguments,x=this,K=Lr,So){if(L===r)return st(K);if(pe)return $2(L),L=Ih(It,u),He(K)}return L===r&&(L=Ih(It,u)),B}return hi.cancel=li,hi.flush=Fn,hi}var RU=Dt(function(s,u){return _2(s,1,u)}),OU=Dt(function(s,u,l){return _2(s,Xi(u)||0,l)});function LU(s){return Ns(s,ge)}function _m(s,u){if(typeof s!="function"||u!=null&&typeof u!="function")throw new Vi(i);var l=function(){var g=arguments,x=u?u.apply(this,g):g[0],P=l.cache;if(P.has(x))return P.get(x);var B=s.apply(this,g);return l.cache=P.set(x,B)||P,B};return l.cache=new(_m.Cache||Ls),l}_m.Cache=Ls;function xm(s){if(typeof s!="function")throw new Vi(i);return function(){var u=arguments;switch(u.length){case 0:return!s.call(this);case 1:return!s.call(this,u[0]);case 2:return!s.call(this,u[0],u[1]);case 3:return!s.call(this,u[0],u[1],u[2])}return!s.apply(this,u)}}function UU(s){return PA(2,s)}var NU=A4(function(s,u){u=u.length==1&&bt(u[0])?pr(u[0],ui(it())):pr(fn(u,1),ui(it()));var l=u.length;return Dt(function(g){for(var x=-1,P=vn(g.length,l);++x<P;)g[x]=u[x].call(this,g[x]);return ai(s,this,g)})}),Nw=Dt(function(s,u){var l=Pa(u,Af(Nw));return Ns(s,ie,r,u,l)}),BA=Dt(function(s,u){var l=Pa(u,Af(BA));return Ns(s,be,r,u,l)}),MU=Ms(function(s,u){return Ns(s,Y,r,r,r,u)});function KU(s,u){if(typeof s!="function")throw new Vi(i);return u=u===r?u:_t(u),Dt(s,u)}function jU(s,u){if(typeof s!="function")throw new Vi(i);return u=u==null?0:Hr(_t(u),0),Dt(function(l){var g=l[u],x=Ra(l,0,u);return g&&Ca(x,g),ai(s,this,x)})}function $U(s,u,l){var g=!0,x=!0;if(typeof s!="function")throw new Vi(i);return vr(l)&&(g="leading"in l?!!l.leading:g,x="trailing"in l?!!l.trailing:x),FA(s,u,{leading:g,maxWait:u,trailing:x})}function zU(s){return CA(s,1)}function qU(s,u){return Nw(xw(u),s)}function WU(){if(!arguments.length)return[];var s=arguments[0];return bt(s)?s:[s]}function VU(s){return Gi(s,w)}function HU(s,u){return u=typeof u=="function"?u:r,Gi(s,w,u)}function GU(s){return Gi(s,d|w)}function YU(s,u){return u=typeof u=="function"?u:r,Gi(s,d|w,u)}function JU(s,u){return u==null||v2(s,u,Zr(u))}function Ao(s,u){return s===u||s!==s&&u!==u}var XU=dm(fw),QU=dm(function(s,u){return s>=u}),qu=D2(function(){return arguments}())?D2:function(s){return Sr(s)&&Yt.call(s,"callee")&&!h2.call(s,"callee")},bt=V.isArray,ZU=HE?ui(HE):a4;function Wn(s){return s!=null&&Em(s.length)&&!js(s)}function Or(s){return Sr(s)&&Wn(s)}function eN(s){return s===!0||s===!1||Sr(s)&&Tn(s)==Mi}var Oa=dO||Yw,tN=GE?ui(GE):u4;function rN(s){return Sr(s)&&s.nodeType===1&&!Th(s)}function nN(s){if(s==null)return!0;if(Wn(s)&&(bt(s)||typeof s=="string"||typeof s.splice=="function"||Oa(s)||Sf(s)||qu(s)))return!s.length;var u=_n(s);if(u==Wr||u==ur)return!s.size;if(Ph(s))return!pw(s).length;for(var l in s)if(Yt.call(s,l))return!1;return!0}function iN(s,u){return Sh(s,u)}function oN(s,u,l){l=typeof l=="function"?l:r;var g=l?l(s,u):r;return g===r?Sh(s,u,r,l):!!g}function Mw(s){if(!Sr(s))return!1;var u=Tn(s);return u==Br||u==es||typeof s.message=="string"&&typeof s.name=="string"&&!Th(s)}function sN(s){return typeof s=="number"&&d2(s)}function js(s){if(!vr(s))return!1;var u=Tn(s);return u==ji||u==wn||u==Jr||u==Aa}function RA(s){return typeof s=="number"&&s==_t(s)}function Em(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Kr}function vr(s){var u=typeof s;return s!=null&&(u=="object"||u=="function")}function Sr(s){return s!=null&&typeof s=="object"}var OA=YE?ui(YE):f4;function aN(s,u){return s===u||hw(s,u,Iw(u))}function uN(s,u,l){return l=typeof l=="function"?l:r,hw(s,u,Iw(u),l)}function cN(s){return LA(s)&&s!=+s}function fN(s){if(H4(s))throw new gt(n);return C2(s)}function lN(s){return s===null}function hN(s){return s==null}function LA(s){return typeof s=="number"||Sr(s)&&Tn(s)==go}function Th(s){if(!Sr(s)||Tn(s)!=In)return!1;var u=Jd(s);if(u===null)return!0;var l=Yt.call(u,"constructor")&&u.constructor;return typeof l=="function"&&l instanceof l&&Vd.call(l)==uO}var Kw=JE?ui(JE):l4;function pN(s){return RA(s)&&s>=-Kr&&s<=Kr}var UA=XE?ui(XE):h4;function Am(s){return typeof s=="string"||!bt(s)&&Sr(s)&&Tn(s)==$n}function fi(s){return typeof s=="symbol"||Sr(s)&&Tn(s)==zn}var Sf=QE?ui(QE):p4;function dN(s){return s===r}function mN(s){return Sr(s)&&_n(s)==un}function yN(s){return Sr(s)&&Tn(s)==$}var gN=dm(dw),wN=dm(function(s,u){return s<=u});function NA(s){if(!s)return[];if(Wn(s))return Am(s)?xo(s):qn(s);if(gh&&s[gh])return JR(s[gh]());var u=_n(s),l=u==Wr?tw:u==ur?zd:Df;return l(s)}function $s(s){if(!s)return s===0?s:0;if(s=Xi(s),s===Mt||s===-Mt){var u=s<0?-1:1;return u*Pn}return s===s?s:0}function _t(s){var u=$s(s),l=u%1;return u===u?l?u-l:u:0}function MA(s){return s?Ku(_t(s),0,qr):0}function Xi(s){if(typeof s=="number")return s;if(fi(s))return Fr;if(vr(s)){var u=typeof s.valueOf=="function"?s.valueOf():s;s=vr(u)?u+"":u}if(typeof s!="string")return s===0?s:+s;s=i2(s);var l=De.test(s);return l||ke.test(s)?BR(s.slice(2),l?2:8):Ke.test(s)?Fr:+s}function KA(s){return rs(s,Vn(s))}function bN(s){return s?Ku(_t(s),-Kr,Kr):s===0?s:0}function Vt(s){return s==null?"":ci(s)}var vN=xf(function(s,u){if(Ph(u)||Wn(u)){rs(u,Zr(u),s);return}for(var l in u)Yt.call(u,l)&&xh(s,l,u[l])}),jA=xf(function(s,u){rs(u,Vn(u),s)}),Sm=xf(function(s,u,l,g){rs(u,Vn(u),s,g)}),_N=xf(function(s,u,l,g){rs(u,Zr(u),s,g)}),xN=Ms(aw);function EN(s,u){var l=_f(s);return u==null?l:b2(l,u)}var AN=Dt(function(s,u){s=tr(s);var l=-1,g=u.length,x=g>2?u[2]:r;for(x&&kn(u[0],u[1],x)&&(g=1);++l<g;)for(var P=u[l],B=Vn(P),L=-1,K=B.length;++L<K;){var se=B[L],ae=s[se];(ae===r||Ao(ae,wf[se])&&!Yt.call(s,se))&&(s[se]=P[se])}return s}),SN=Dt(function(s){return s.push(r,iA),ai($A,r,s)});function DN(s,u){return e2(s,it(u,3),ts)}function CN(s,u){return e2(s,it(u,3),cw)}function PN(s,u){return s==null?s:uw(s,it(u,3),Vn)}function IN(s,u){return s==null?s:A2(s,it(u,3),Vn)}function TN(s,u){return s&&ts(s,it(u,3))}function kN(s,u){return s&&cw(s,it(u,3))}function FN(s){return s==null?[]:sm(s,Zr(s))}function BN(s){return s==null?[]:sm(s,Vn(s))}function jw(s,u,l){var g=s==null?r:ju(s,u);return g===r?l:g}function RN(s,u){return s!=null&&aA(s,u,n4)}function $w(s,u){return s!=null&&aA(s,u,i4)}var ON=Z2(function(s,u,l){u!=null&&typeof u.toString!="function"&&(u=Hd.call(u)),s[u]=l},qw(Hn)),LN=Z2(function(s,u,l){u!=null&&typeof u.toString!="function"&&(u=Hd.call(u)),Yt.call(s,u)?s[u].push(l):s[u]=[l]},it),UN=Dt(Ah);function Zr(s){return Wn(s)?g2(s):pw(s)}function Vn(s){return Wn(s)?g2(s,!0):d4(s)}function NN(s,u){var l={};return u=it(u,3),ts(s,function(g,x,P){Us(l,u(g,x,P),g)}),l}function MN(s,u){var l={};return u=it(u,3),ts(s,function(g,x,P){Us(l,x,u(g,x,P))}),l}var KN=xf(function(s,u,l){am(s,u,l)}),$A=xf(function(s,u,l,g){am(s,u,l,g)}),jN=Ms(function(s,u){var l={};if(s==null)return l;var g=!1;u=pr(u,function(P){return P=Ba(P,s),g||(g=P.length>1),P}),rs(s,Cw(s),l),g&&(l=Gi(l,d|m|w,O4));for(var x=u.length;x--;)bw(l,u[x]);return l});function $N(s,u){return zA(s,xm(it(u)))}var zN=Ms(function(s,u){return s==null?{}:y4(s,u)});function zA(s,u){if(s==null)return{};var l=pr(Cw(s),function(g){return[g]});return u=it(u),R2(s,l,function(g,x){return u(g,x[0])})}function qN(s,u,l){u=Ba(u,s);var g=-1,x=u.length;for(x||(x=1,s=r);++g<x;){var P=s==null?r:s[ns(u[g])];P===r&&(g=x,P=l),s=js(P)?P.call(s):P}return s}function WN(s,u,l){return s==null?s:Dh(s,u,l)}function VN(s,u,l,g){return g=typeof g=="function"?g:r,s==null?s:Dh(s,u,l,g)}var qA=rA(Zr),WA=rA(Vn);function HN(s,u,l){var g=bt(s),x=g||Oa(s)||Sf(s);if(u=it(u,4),l==null){var P=s&&s.constructor;x?l=g?new P:[]:vr(s)?l=js(P)?_f(Jd(s)):{}:l={}}return(x?Wi:ts)(s,function(B,L,K){return u(l,B,L,K)}),l}function GN(s,u){return s==null?!0:bw(s,u)}function YN(s,u,l){return s==null?s:M2(s,u,xw(l))}function JN(s,u,l,g){return g=typeof g=="function"?g:r,s==null?s:M2(s,u,xw(l),g)}function Df(s){return s==null?[]:ew(s,Zr(s))}function XN(s){return s==null?[]:ew(s,Vn(s))}function QN(s,u,l){return l===r&&(l=u,u=r),l!==r&&(l=Xi(l),l=l===l?l:0),u!==r&&(u=Xi(u),u=u===u?u:0),Ku(Xi(s),u,l)}function ZN(s,u,l){return u=$s(u),l===r?(l=u,u=0):l=$s(l),s=Xi(s),o4(s,u,l)}function eM(s,u,l){if(l&&typeof l!="boolean"&&kn(s,u,l)&&(u=l=r),l===r&&(typeof u=="boolean"?(l=u,u=r):typeof s=="boolean"&&(l=s,s=r)),s===r&&u===r?(s=0,u=1):(s=$s(s),u===r?(u=s,s=0):u=$s(u)),s>u){var g=s;s=u,u=g}if(l||s%1||u%1){var x=m2();return vn(s+x*(u-s+FR("1e-"+((x+"").length-1))),u)}return yw(s,u)}var tM=Ef(function(s,u,l){return u=u.toLowerCase(),s+(l?VA(u):u)});function VA(s){return zw(Vt(s).toLowerCase())}function HA(s){return s=Vt(s),s&&s.replace(ot,WR).replace(xR,"")}function rM(s,u,l){s=Vt(s),u=ci(u);var g=s.length;l=l===r?g:Ku(_t(l),0,g);var x=l;return l-=u.length,l>=0&&s.slice(l,x)==u}function nM(s){return s=Vt(s),s&&dh.test(s)?s.replace(Fu,VR):s}function iM(s){return s=Vt(s),s&&cn.test(s)?s.replace(Ou,"\\$&"):s}var oM=Ef(function(s,u,l){return s+(l?"-":"")+u.toLowerCase()}),sM=Ef(function(s,u,l){return s+(l?" ":"")+u.toLowerCase()}),aM=J2("toLowerCase");function uM(s,u,l){s=Vt(s),u=_t(u);var g=u?gf(s):0;if(!u||g>=u)return s;var x=(u-g)/2;return pm(em(x),l)+s+pm(Zd(x),l)}function cM(s,u,l){s=Vt(s),u=_t(u);var g=u?gf(s):0;return u&&g<u?s+pm(u-g,l):s}function fM(s,u,l){s=Vt(s),u=_t(u);var g=u?gf(s):0;return u&&g<u?pm(u-g,l)+s:s}function lM(s,u,l){return l||u==null?u=0:u&&(u=+u),wO(Vt(s).replace(Sa,""),u||0)}function hM(s,u,l){return(l?kn(s,u,l):u===r)?u=1:u=_t(u),gw(Vt(s),u)}function pM(){var s=arguments,u=Vt(s[0]);return s.length<3?u:u.replace(s[1],s[2])}var dM=Ef(function(s,u,l){return s+(l?"_":"")+u.toLowerCase()});function mM(s,u,l){return l&&typeof l!="number"&&kn(s,u,l)&&(u=l=r),l=l===r?qr:l>>>0,l?(s=Vt(s),s&&(typeof u=="string"||u!=null&&!Kw(u))&&(u=ci(u),!u&&yf(s))?Ra(xo(s),0,l):s.split(u,l)):[]}var yM=Ef(function(s,u,l){return s+(l?" ":"")+zw(u)});function gM(s,u,l){return s=Vt(s),l=l==null?0:Ku(_t(l),0,s.length),u=ci(u),s.slice(l,l+u.length)==u}function wM(s,u,l){var g=D.templateSettings;l&&kn(s,u,l)&&(u=r),s=Vt(s),u=Sm({},u,g,nA);var x=Sm({},u.imports,g.imports,nA),P=Zr(x),B=ew(x,P),L,K,se=0,ae=u.interpolate||ct,pe="__p += '",Ce=rw((u.escape||ct).source+"|"+ae.source+"|"+(ae===_o?oe:ct).source+"|"+(u.evaluate||ct).source+"|$","g"),He="//# sourceURL="+(Yt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++CR+"]")+`
`;s.replace(Ce,function(at,It,Lt,li,Fn,hi){return Lt||(Lt=li),pe+=s.slice(se,hi).replace(lt,HR),It&&(L=!0,pe+=`' +
__e(`+It+`) +
'`),Fn&&(K=!0,pe+=`';
`+Fn+`;
__p += '`),Lt&&(pe+=`' +
((__t = (`+Lt+`)) == null ? '' : __t) +
'`),se=hi+at.length,at}),pe+=`';
`;var st=Yt.call(u,"variable")&&u.variable;if(!st)pe=`with (obj) {
`+pe+`
}
`;else if(M.test(st))throw new gt(o);pe=(K?pe.replace(bo,""):pe).replace(Bs,"$1").replace(vo,"$1;"),pe="function("+(st||"obj")+`) {
`+(st?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(K?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+pe+`return __p
}`;var Et=YA(function(){return zt(P,He+"return "+pe).apply(r,B)});if(Et.source=pe,Mw(Et))throw Et;return Et}function bM(s){return Vt(s).toLowerCase()}function vM(s){return Vt(s).toUpperCase()}function _M(s,u,l){if(s=Vt(s),s&&(l||u===r))return i2(s);if(!s||!(u=ci(u)))return s;var g=xo(s),x=xo(u),P=o2(g,x),B=s2(g,x)+1;return Ra(g,P,B).join("")}function xM(s,u,l){if(s=Vt(s),s&&(l||u===r))return s.slice(0,u2(s)+1);if(!s||!(u=ci(u)))return s;var g=xo(s),x=s2(g,xo(u))+1;return Ra(g,0,x).join("")}function EM(s,u,l){if(s=Vt(s),s&&(l||u===r))return s.replace(Sa,"");if(!s||!(u=ci(u)))return s;var g=xo(s),x=o2(g,xo(u));return Ra(g,x).join("")}function AM(s,u){var l=_e,g=Me;if(vr(u)){var x="separator"in u?u.separator:x;l="length"in u?_t(u.length):l,g="omission"in u?ci(u.omission):g}s=Vt(s);var P=s.length;if(yf(s)){var B=xo(s);P=B.length}if(l>=P)return s;var L=l-gf(g);if(L<1)return g;var K=B?Ra(B,0,L).join(""):s.slice(0,L);if(x===r)return K+g;if(B&&(L+=K.length-L),Kw(x)){if(s.slice(L).search(x)){var se,ae=K;for(x.global||(x=rw(x.source,Vt(ye.exec(x))+"g")),x.lastIndex=0;se=x.exec(ae);)var pe=se.index;K=K.slice(0,pe===r?L:pe)}}else if(s.indexOf(ci(x),L)!=L){var Ce=K.lastIndexOf(x);Ce>-1&&(K=K.slice(0,Ce))}return K+g}function SM(s){return s=Vt(s),s&&$i.test(s)?s.replace(Rs,eO):s}var DM=Ef(function(s,u,l){return s+(l?" ":"")+u.toUpperCase()}),zw=J2("toUpperCase");function GA(s,u,l){return s=Vt(s),u=l?r:u,u===r?YR(s)?nO(s):KR(s):s.match(u)||[]}var YA=Dt(function(s,u){try{return ai(s,r,u)}catch(l){return Mw(l)?l:new gt(l)}}),CM=Ms(function(s,u){return Wi(u,function(l){l=ns(l),Us(s,l,Uw(s[l],s))}),s});function PM(s){var u=s==null?0:s.length,l=it();return s=u?pr(s,function(g){if(typeof g[1]!="function")throw new Vi(i);return[l(g[0]),g[1]]}):[],Dt(function(g){for(var x=-1;++x<u;){var P=s[x];if(ai(P[0],this,g))return ai(P[1],this,g)}})}function IM(s){return e4(Gi(s,d))}function qw(s){return function(){return s}}function TM(s,u){return s==null||s!==s?u:s}var kM=Q2(),FM=Q2(!0);function Hn(s){return s}function Ww(s){return P2(typeof s=="function"?s:Gi(s,d))}function BM(s){return T2(Gi(s,d))}function RM(s,u){return k2(s,Gi(u,d))}var OM=Dt(function(s,u){return function(l){return Ah(l,s,u)}}),LM=Dt(function(s,u){return function(l){return Ah(s,l,u)}});function Vw(s,u,l){var g=Zr(u),x=sm(u,g);l==null&&!(vr(u)&&(x.length||!g.length))&&(l=u,u=s,s=this,x=sm(u,Zr(u)));var P=!(vr(l)&&"chain"in l)||!!l.chain,B=js(s);return Wi(x,function(L){var K=u[L];s[L]=K,B&&(s.prototype[L]=function(){var se=this.__chain__;if(P||se){var ae=s(this.__wrapped__),pe=ae.__actions__=qn(this.__actions__);return pe.push({func:K,args:arguments,thisArg:s}),ae.__chain__=se,ae}return K.apply(s,Ca([this.value()],arguments))})}),s}function UM(){return Qr._===this&&(Qr._=cO),this}function Hw(){}function NM(s){return s=_t(s),Dt(function(u){return F2(u,s)})}var MM=Aw(pr),KM=Aw(ZE),jM=Aw(Y0);function JA(s){return kw(s)?J0(ns(s)):g4(s)}function $M(s){return function(u){return s==null?r:ju(s,u)}}var zM=eA(),qM=eA(!0);function Gw(){return[]}function Yw(){return!1}function WM(){return{}}function VM(){return""}function HM(){return!0}function GM(s,u){if(s=_t(s),s<1||s>Kr)return[];var l=qr,g=vn(s,qr);u=it(u),s-=qr;for(var x=Z0(g,u);++l<s;)u(l);return x}function YM(s){return bt(s)?pr(s,ns):fi(s)?[s]:qn(yA(Vt(s)))}function JM(s){var u=++aO;return Vt(s)+u}var XM=hm(function(s,u){return s+u},0),QM=Sw("ceil"),ZM=hm(function(s,u){return s/u},1),e5=Sw("floor");function t5(s){return s&&s.length?om(s,Hn,fw):r}function r5(s,u){return s&&s.length?om(s,it(u,2),fw):r}function n5(s){return r2(s,Hn)}function i5(s,u){return r2(s,it(u,2))}function o5(s){return s&&s.length?om(s,Hn,dw):r}function s5(s,u){return s&&s.length?om(s,it(u,2),dw):r}var a5=hm(function(s,u){return s*u},1),u5=Sw("round"),c5=hm(function(s,u){return s-u},0);function f5(s){return s&&s.length?Q0(s,Hn):0}function l5(s,u){return s&&s.length?Q0(s,it(u,2)):0}return D.after=BU,D.ary=CA,D.assign=vN,D.assignIn=jA,D.assignInWith=Sm,D.assignWith=_N,D.at=xN,D.before=PA,D.bind=Uw,D.bindAll=CM,D.bindKey=IA,D.castArray=WU,D.chain=AA,D.chunk=eL,D.compact=tL,D.concat=rL,D.cond=PM,D.conforms=IM,D.constant=qw,D.countBy=fU,D.create=EN,D.curry=TA,D.curryRight=kA,D.debounce=FA,D.defaults=AN,D.defaultsDeep=SN,D.defer=RU,D.delay=OU,D.difference=nL,D.differenceBy=iL,D.differenceWith=oL,D.drop=sL,D.dropRight=aL,D.dropRightWhile=uL,D.dropWhile=cL,D.fill=fL,D.filter=hU,D.flatMap=mU,D.flatMapDeep=yU,D.flatMapDepth=gU,D.flatten=vA,D.flattenDeep=lL,D.flattenDepth=hL,D.flip=LU,D.flow=kM,D.flowRight=FM,D.fromPairs=pL,D.functions=FN,D.functionsIn=BN,D.groupBy=wU,D.initial=mL,D.intersection=yL,D.intersectionBy=gL,D.intersectionWith=wL,D.invert=ON,D.invertBy=LN,D.invokeMap=vU,D.iteratee=Ww,D.keyBy=_U,D.keys=Zr,D.keysIn=Vn,D.map=bm,D.mapKeys=NN,D.mapValues=MN,D.matches=BM,D.matchesProperty=RM,D.memoize=_m,D.merge=KN,D.mergeWith=$A,D.method=OM,D.methodOf=LM,D.mixin=Vw,D.negate=xm,D.nthArg=NM,D.omit=jN,D.omitBy=$N,D.once=UU,D.orderBy=xU,D.over=MM,D.overArgs=NU,D.overEvery=KM,D.overSome=jM,D.partial=Nw,D.partialRight=BA,D.partition=EU,D.pick=zN,D.pickBy=zA,D.property=JA,D.propertyOf=$M,D.pull=xL,D.pullAll=xA,D.pullAllBy=EL,D.pullAllWith=AL,D.pullAt=SL,D.range=zM,D.rangeRight=qM,D.rearg=MU,D.reject=DU,D.remove=DL,D.rest=KU,D.reverse=Ow,D.sampleSize=PU,D.set=WN,D.setWith=VN,D.shuffle=IU,D.slice=CL,D.sortBy=FU,D.sortedUniq=RL,D.sortedUniqBy=OL,D.split=mM,D.spread=jU,D.tail=LL,D.take=UL,D.takeRight=NL,D.takeRightWhile=ML,D.takeWhile=KL,D.tap=tU,D.throttle=$U,D.thru=wm,D.toArray=NA,D.toPairs=qA,D.toPairsIn=WA,D.toPath=YM,D.toPlainObject=KA,D.transform=HN,D.unary=zU,D.union=jL,D.unionBy=$L,D.unionWith=zL,D.uniq=qL,D.uniqBy=WL,D.uniqWith=VL,D.unset=GN,D.unzip=Lw,D.unzipWith=EA,D.update=YN,D.updateWith=JN,D.values=Df,D.valuesIn=XN,D.without=HL,D.words=GA,D.wrap=qU,D.xor=GL,D.xorBy=YL,D.xorWith=JL,D.zip=XL,D.zipObject=QL,D.zipObjectDeep=ZL,D.zipWith=eU,D.entries=qA,D.entriesIn=WA,D.extend=jA,D.extendWith=Sm,Vw(D,D),D.add=XM,D.attempt=YA,D.camelCase=tM,D.capitalize=VA,D.ceil=QM,D.clamp=QN,D.clone=VU,D.cloneDeep=GU,D.cloneDeepWith=YU,D.cloneWith=HU,D.conformsTo=JU,D.deburr=HA,D.defaultTo=TM,D.divide=ZM,D.endsWith=rM,D.eq=Ao,D.escape=nM,D.escapeRegExp=iM,D.every=lU,D.find=pU,D.findIndex=wA,D.findKey=DN,D.findLast=dU,D.findLastIndex=bA,D.findLastKey=CN,D.floor=e5,D.forEach=SA,D.forEachRight=DA,D.forIn=PN,D.forInRight=IN,D.forOwn=TN,D.forOwnRight=kN,D.get=jw,D.gt=XU,D.gte=QU,D.has=RN,D.hasIn=$w,D.head=_A,D.identity=Hn,D.includes=bU,D.indexOf=dL,D.inRange=ZN,D.invoke=UN,D.isArguments=qu,D.isArray=bt,D.isArrayBuffer=ZU,D.isArrayLike=Wn,D.isArrayLikeObject=Or,D.isBoolean=eN,D.isBuffer=Oa,D.isDate=tN,D.isElement=rN,D.isEmpty=nN,D.isEqual=iN,D.isEqualWith=oN,D.isError=Mw,D.isFinite=sN,D.isFunction=js,D.isInteger=RA,D.isLength=Em,D.isMap=OA,D.isMatch=aN,D.isMatchWith=uN,D.isNaN=cN,D.isNative=fN,D.isNil=hN,D.isNull=lN,D.isNumber=LA,D.isObject=vr,D.isObjectLike=Sr,D.isPlainObject=Th,D.isRegExp=Kw,D.isSafeInteger=pN,D.isSet=UA,D.isString=Am,D.isSymbol=fi,D.isTypedArray=Sf,D.isUndefined=dN,D.isWeakMap=mN,D.isWeakSet=yN,D.join=bL,D.kebabCase=oM,D.last=Ji,D.lastIndexOf=vL,D.lowerCase=sM,D.lowerFirst=aM,D.lt=gN,D.lte=wN,D.max=t5,D.maxBy=r5,D.mean=n5,D.meanBy=i5,D.min=o5,D.minBy=s5,D.stubArray=Gw,D.stubFalse=Yw,D.stubObject=WM,D.stubString=VM,D.stubTrue=HM,D.multiply=a5,D.nth=_L,D.noConflict=UM,D.noop=Hw,D.now=vm,D.pad=uM,D.padEnd=cM,D.padStart=fM,D.parseInt=lM,D.random=eM,D.reduce=AU,D.reduceRight=SU,D.repeat=hM,D.replace=pM,D.result=qN,D.round=u5,D.runInContext=U,D.sample=CU,D.size=TU,D.snakeCase=dM,D.some=kU,D.sortedIndex=PL,D.sortedIndexBy=IL,D.sortedIndexOf=TL,D.sortedLastIndex=kL,D.sortedLastIndexBy=FL,D.sortedLastIndexOf=BL,D.startCase=yM,D.startsWith=gM,D.subtract=c5,D.sum=f5,D.sumBy=l5,D.template=wM,D.times=GM,D.toFinite=$s,D.toInteger=_t,D.toLength=MA,D.toLower=bM,D.toNumber=Xi,D.toSafeInteger=bN,D.toString=Vt,D.toUpper=vM,D.trim=_M,D.trimEnd=xM,D.trimStart=EM,D.truncate=AM,D.unescape=SM,D.uniqueId=JM,D.upperCase=DM,D.upperFirst=zw,D.each=SA,D.eachRight=DA,D.first=_A,Vw(D,function(){var s={};return ts(D,function(u,l){Yt.call(D.prototype,l)||(s[l]=u)}),s}(),{chain:!1}),D.VERSION=e,Wi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){D[s].placeholder=D}),Wi(["drop","take"],function(s,u){Bt.prototype[s]=function(l){l=l===r?1:Hr(_t(l),0);var g=this.__filtered__&&!u?new Bt(this):this.clone();return g.__filtered__?g.__takeCount__=vn(l,g.__takeCount__):g.__views__.push({size:vn(l,qr),type:s+(g.__dir__<0?"Right":"")}),g},Bt.prototype[s+"Right"]=function(l){return this.reverse()[s](l).reverse()}}),Wi(["filter","map","takeWhile"],function(s,u){var l=u+1,g=l==Rt||l==hr;Bt.prototype[s]=function(x){var P=this.clone();return P.__iteratees__.push({iteratee:it(x,3),type:l}),P.__filtered__=P.__filtered__||g,P}}),Wi(["head","last"],function(s,u){var l="take"+(u?"Right":"");Bt.prototype[s]=function(){return this[l](1).value()[0]}}),Wi(["initial","tail"],function(s,u){var l="drop"+(u?"":"Right");Bt.prototype[s]=function(){return this.__filtered__?new Bt(this):this[l](1)}}),Bt.prototype.compact=function(){return this.filter(Hn)},Bt.prototype.find=function(s){return this.filter(s).head()},Bt.prototype.findLast=function(s){return this.reverse().find(s)},Bt.prototype.invokeMap=Dt(function(s,u){return typeof s=="function"?new Bt(this):this.map(function(l){return Ah(l,s,u)})}),Bt.prototype.reject=function(s){return this.filter(xm(it(s)))},Bt.prototype.slice=function(s,u){s=_t(s);var l=this;return l.__filtered__&&(s>0||u<0)?new Bt(l):(s<0?l=l.takeRight(-s):s&&(l=l.drop(s)),u!==r&&(u=_t(u),l=u<0?l.dropRight(-u):l.take(u-s)),l)},Bt.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Bt.prototype.toArray=function(){return this.take(qr)},ts(Bt.prototype,function(s,u){var l=/^(?:filter|find|map|reject)|While$/.test(u),g=/^(?:head|last)$/.test(u),x=D[g?"take"+(u=="last"?"Right":""):u],P=g||/^find/.test(u);!x||(D.prototype[u]=function(){var B=this.__wrapped__,L=g?[1]:arguments,K=B instanceof Bt,se=L[0],ae=K||bt(B),pe=function(It){var Lt=x.apply(D,Ca([It],L));return g&&Ce?Lt[0]:Lt};ae&&l&&typeof se=="function"&&se.length!=1&&(K=ae=!1);var Ce=this.__chain__,He=!!this.__actions__.length,st=P&&!Ce,Et=K&&!He;if(!P&&ae){B=Et?B:new Bt(this);var at=s.apply(B,L);return at.__actions__.push({func:wm,args:[pe],thisArg:r}),new Hi(at,Ce)}return st&&Et?s.apply(this,L):(at=this.thru(pe),st?g?at.value()[0]:at.value():at)})}),Wi(["pop","push","shift","sort","splice","unshift"],function(s){var u=qd[s],l=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",g=/^(?:pop|shift)$/.test(s);D.prototype[s]=function(){var x=arguments;if(g&&!this.__chain__){var P=this.value();return u.apply(bt(P)?P:[],x)}return this[l](function(B){return u.apply(bt(B)?B:[],x)})}}),ts(Bt.prototype,function(s,u){var l=D[u];if(l){var g=l.name+"";Yt.call(vf,g)||(vf[g]=[]),vf[g].push({name:u,func:l})}}),vf[lm(r,N).name]=[{name:"wrapper",func:r}],Bt.prototype.clone=SO,Bt.prototype.reverse=DO,Bt.prototype.value=CO,D.prototype.at=rU,D.prototype.chain=nU,D.prototype.commit=iU,D.prototype.next=oU,D.prototype.plant=aU,D.prototype.reverse=uU,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=cU,D.prototype.first=D.prototype.head,gh&&(D.prototype[gh]=sU),D},Ia=iO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Qr._=Ia,define(function(){return Ia})):Lu?((Lu.exports=Ia)._=Ia,W0._=Ia):Qr._=Ia}).call(hl)});var mP=ue(Un=>{"use strict";h();p();var kz=Un&&Un.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pl=Un&&Un.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},dl=Un&&Un.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},i_=Un&&Un.__param||function(r,e){return function(t,n){e(t,n,r)}},Fz=Un&&Un.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){t.label=d[1];break}if(d[0]===6&&t.label<o[1]){t.label=o[1],o=d;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(d);break}o[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},dP=Un&&Un.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Un,"__esModule",{value:!0});var Bz=dP(Bo()),o_=dP(r_()),na=_i(),Rz=ky(),s_=function(){function r(){this._content=[]}return Object.defineProperty(r.prototype,"length",{get:function(){return this._content.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e},enumerable:!0,configurable:!0}),r.prototype.get=function(e){return this._content[e]},r.prototype.add=function(e){var t=Rz.sortedIndexBy(this._content,e,function(n){return n.frequency});this._content.splice(t,0,e)},r.prototype.remove=function(e){this._content.splice(e,1)},r.prototype.popMin=function(){return this._content.shift()},r.prototype.indexOf=function(e){return this._content.findIndex(function(t){return t.value===e})},r.prototype.clear=function(){this._content=[]},r}(),Oz=function(r){kz(e,r);function e(t,n,i){var o=r.call(this)||this;return o._k=t,o._errorRate=n,o._accuracy=i,o._sketch=o_.default.create(n,i),o._heap=new s_,o}return e.prototype.add=function(t){this._sketch.update(t);var n=this._sketch.count(t);if(this._heap.length<this._k||n>=this._heap.get(0).frequency){var i=this._heap.indexOf(t);i>-1&&this._heap.remove(i),this._heap.add({value:t,frequency:n}),this._heap.length>this._k&&this._heap.popMin()}},e.prototype.clear=function(){this._sketch=o_.default.create(this._errorRate,this._accuracy),this._heap.clear()},e.prototype.values=function(){for(var t=[],n=this._heap.length-1;n>=0;n--){var i=this._heap.get(n);t.push({value:i.value,frequency:i.frequency,rank:this._heap.length-n})}return t},e.prototype.iterator=function(){var t=this._heap;return function(){var n,i;return Fz(this,function(o){switch(o.label){case 0:n=t.length-1,o.label=1;case 1:return n>=0?(i=t.get(n),[4,{value:i.value,frequency:i.frequency,rank:t.length-n}]):[3,4];case 2:o.sent(),o.label=3;case 3:return n--,[3,1];case 4:return[2]}})}()},pl([na.Field(),dl("design:type",Number)],e.prototype,"_k",void 0),pl([na.Field(),dl("design:type",Number)],e.prototype,"_errorRate",void 0),pl([na.Field(),dl("design:type",Number)],e.prototype,"_accuracy",void 0),pl([na.Field(),dl("design:type",o_.default)],e.prototype,"_sketch",void 0),pl([na.Field(function(t){return t.content},function(t){var n=new s_;return n.content=t,n}),dl("design:type",s_)],e.prototype,"_heap",void 0),e=pl([na.AutoExportable("TopK",["_seed"]),i_(0,na.Parameter("_k")),i_(1,na.Parameter("_errorRate")),i_(2,na.Parameter("_accuracy")),dl("design:paramtypes",[Number,Number,Number])],e),e}(Bz.default);Un.default=Oz});var a_=ue(mn=>{"use strict";h();p();var wP=mn&&mn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fy=mn&&mn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},By=mn&&mn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},yP=mn&&mn.__param||function(r,e){return function(t,n){e(t,n,r)}},Lz=mn&&mn.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Uz=mn&&mn.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Lz(arguments[e]));return r},Nz=mn&&mn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mn,"__esModule",{value:!0});var Mz=Nz(Bo()),ml=_i(),Kz=ao(),jz=ky(),$z=function(r){wP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Error);function gP(r,e){return(e.a*r+e.b)%e.c}var zz=function(r){wP(e,r);function e(t,n){var i=r.call(this)||this;return i._nbHashes=t,i._hashFunctions=n,i._signature=Kz.allocateArray(i._nbHashes,1/0),i}return Object.defineProperty(e.prototype,"nbHashes",{get:function(){return this._nbHashes},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this._signature[0]===1/0},e.prototype.add=function(t){for(var n=0;n<this._nbHashes;n++)this._signature[n]=Math.min(this._signature[n],gP(t,this._hashFunctions[n]))},e.prototype.bulkLoad=function(t){for(var n=this,i=function(c){var f=t.map(function(d){return gP(d,n._hashFunctions[c])});o._signature[c]=Math.min.apply(Math,Uz([o._signature[c]],f))},o=this,a=0;a<this._nbHashes;a++)i(a)},e.prototype.compareWith=function(t){if(this.isEmpty()||t.isEmpty())throw new $z("Cannot compute a Jaccard similairty with a MinHash that contains no values");return jz.intersection(this._signature,t._signature).length/this._nbHashes},Fy([ml.Field(),By("design:type",Number)],e.prototype,"_nbHashes",void 0),Fy([ml.Field(),By("design:type",Array)],e.prototype,"_hashFunctions",void 0),Fy([ml.Field(),By("design:type",Array)],e.prototype,"_signature",void 0),e=Fy([ml.AutoExportable("MinHash",["_seed"]),yP(0,ml.Parameter("_nbHashes")),yP(1,ml.Parameter("_hashFunctions")),By("design:paramtypes",[Number,Array])],e),e}(Mz.default);mn.MinHash=zz});var vP=ue(u_=>{"use strict";h();p();Object.defineProperty(u_,"__esModule",{value:!0});var qz=a_(),bP=ky();function Wz(r){if(r!==2&&r%2===0)return!1;for(var e=2;e<Math.sqrt(r);e++)if(r%e===0)return!1;return!0}function Vz(r){for(var e=0;;){if(Wz(r+e))return r+e;e++}}var Hz=function(){function r(e,t){this._nbHashes=e,this._maxValue=t,this._hashFunctions=[];for(var n=Vz(this._maxValue),i=0;i<this._nbHashes;i++){var o=bP.random(0,this._maxValue,!1),a=bP.random(0,this._maxValue,!1);this._hashFunctions.push({a:o,b:a,c:n})}}return r.prototype.create=function(){return new qz.MinHash(this._nbHashes,this._hashFunctions)},r}();u_.default=Hz});var xP=ue((qae,_P)=>{h();p();function Gz(r,e){return r===e||r!==r&&e!==e}_P.exports=Gz});var CP=ue((Hae,DP)=>{h();p();var EP=1/0,Yz=17976931348623157e292,AP=0/0,Jz="[object Symbol]",Xz=/^\s+|\s+$/g,Qz=/^[-+]0x[0-9a-f]+$/i,Zz=/^0b[01]+$/i,eq=/^0o[0-7]+$/i,tq=parseInt;function rq(r,e,t,n){for(var i=r.length,o=t+(n?1:-1);n?o--:++o<i;)if(e(r[o],o,r))return o;return-1}function nq(r,e,t){if(e!==e)return rq(r,iq,t);for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}function iq(r){return r!==r}var oq=Object.prototype,sq=oq.toString,aq=Math.max;function uq(r,e,t){var n=r?r.length:0;if(!n)return-1;var i=t==null?0:hq(t);return i<0&&(i=aq(n+i,0)),nq(r,e,i)}function SP(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function cq(r){return!!r&&typeof r=="object"}function fq(r){return typeof r=="symbol"||cq(r)&&sq.call(r)==Jz}function lq(r){if(!r)return r===0?r:0;if(r=pq(r),r===EP||r===-EP){var e=r<0?-1:1;return e*Yz}return r===r?r:0}function hq(r){var e=lq(r),t=e%1;return e===e?t?e-t:e:0}function pq(r){if(typeof r=="number")return r;if(fq(r))return AP;if(SP(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=SP(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(Xz,"");var t=Zz.test(r);return t||eq.test(r)?tq(r.slice(2),t?2:8):Qz.test(r)?AP:+r}DP.exports=uq});var TP=ue(Ro=>{"use strict";h();p();var dq=Ro&&Ro.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mq=Ro&&Ro.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},IP=Ro&&Ro.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},yq=Ro&&Ro.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(Ro,"__esModule",{value:!0});var gq=IP(xP()),c_=IP(CP()),PP=yq(ao()),wq=_i(),bq=_i(),vq=function(){function r(t){this._elements=PP.allocateArray(t,null),this._size=t,this._length=0}e=r,Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),r.prototype.isFree=function(){return this._length<this._size},r.prototype.nextEmptySlot=function(){return c_.default(this._elements,null)},r.prototype.at=function(t){return this._elements[t]},r.prototype.add=function(t){return t===null||!this.isFree()?!1:(this.set(this.nextEmptySlot(),t),this._length++,!0)},r.prototype.remove=function(t){var n=c_.default(this._elements,t);return n<=-1?!1:(this.unset(n),!0)},r.prototype.has=function(t){return c_.default(this._elements,t)>-1},r.prototype.set=function(t,n){this._elements[t]=n},r.prototype.unset=function(t){this._elements[t]=null,this._length--},r.prototype.swapRandom=function(t,n){n===void 0&&(n=Math.random);var i=PP.randomInt(0,this._length-1,n),o=this._elements[i];return this._elements[i]=t,o},r.prototype.swap=function(t,n){var i=this._elements[t];return this._elements[t]=n,i},r.prototype.equals=function(t){return this._size!==t.size||this._length!==t.length?!1:this._elements.every(function(n,i){return gq.default(t.at(i),n)})};var e;return r=e=dq([wq.Exportable({export:bq.cloneObject("Bucket","_size","_elements"),import:function(t){if(t.type!=="Bucket"||"_size"in t,!("_elements"in t))throw new Error("Cannot create a Bucket from a JSON export which does not represent a bucket");var n=new e(t._size);return t._elements.forEach(function(i,o){i!==null&&(n._elements[o]=i,n._length++)}),n}}),mq("design:paramtypes",[Number])],r),r}();Ro.default=vq});var RP=ue(Oo=>{"use strict";h();p();var _q=Oo&&Oo.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xq=Oo&&Oo.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Eq=Oo&&Oo.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},BP=Oo&&Oo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oo,"__esModule",{value:!0});var Aq=BP(Bo()),kP=BP(TP()),FP=_i(),Sp=ao();function Sq(r,e){var t=Math.ceil(Math.log2(1/e)+Math.log2(2*r));return Math.ceil(t/4)}var Dq=function(r){_q(e,r);function e(n,i,o,a){a===void 0&&(a=500);var c=r.call(this)||this;return c._filter=Sp.allocateArray(n,function(){return new kP.default(o)}),c._size=n,c._bucketSize=o,c._fingerprintLength=i,c._length=0,c._maxKicks=a,c}t=e,e.create=function(n,i,o,a){o===void 0&&(o=4),a===void 0&&(a=500);var c=Sq(o,i),f=Math.ceil(n/o/.955);return new t(f,c,o,a)},e.from=function(n,i,o,a){o===void 0&&(o=4),a===void 0&&(a=500);var c=Array.from(n),f=t.create(c.length,i,o,a);return c.forEach(function(d){return f.add(d)}),f},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullSize",{get:function(){return this.size*this.bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fingerprintLength",{get:function(){return this._fingerprintLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketSize",{get:function(){return this._bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxKicks",{get:function(){return this._maxKicks},enumerable:!0,configurable:!0}),e.prototype.add=function(n,i,o){i===void 0&&(i=!1),o===void 0&&(o=!1);var a=this._locations(n);if(this._filter[a.firstIndex].isFree())this._filter[a.firstIndex].add(a.fingerprint);else if(this._filter[a.secondIndex].isFree())this._filter[a.secondIndex].add(a.fingerprint);else{for(var c=this.random()<.5?a.firstIndex:a.secondIndex,f=a.fingerprint,d=[],m=0;m<this._maxKicks;m++){var w=Sp.randomInt(0,this._filter[c].length-1,this.random),E=this._filter[c].at(w);d.push([c,w,E]),this._filter[c].set(w,f),f=E;var T=Sp.hashAsInt(f,this.seed,64);if(c=Math.abs(c^Math.abs(T))%this._filter.length,this._filter[c].isFree())return this._filter[c].add(f),this._length++,!0}if(!o)for(var F=d.length-1;F>=0;F--){var N=d[F];this._filter[N[0]].set(N[1],N[2])}if(i)throw new Error('The Cuckoo Filter is full, cannot insert element "'+n+'"');return!1}return this._length++,!0},e.prototype.remove=function(n){var i=this._locations(n);return this._filter[i.firstIndex].has(i.fingerprint)?(this._filter[i.firstIndex].remove(i.fingerprint),this._length--,!0):this._filter[i.secondIndex].has(i.fingerprint)?(this._filter[i.secondIndex].remove(i.fingerprint),this._length--,!0):!1},e.prototype.has=function(n){var i=this._locations(n);return this._filter[i.firstIndex].has(i.fingerprint)||this._filter[i.secondIndex].has(i.fingerprint)},e.prototype.rate=function(){var n=this._computeHashTableLoad(),i=this._fingerprintLength/n.load;return Math.pow(2,Math.log2(2*this._bucketSize)-n.load*i)},e.prototype._computeHashTableLoad=function(){var n=this._filter.length*this._bucketSize,i=this._filter.reduce(function(o,a){return o+a.length},0);return{used:i,free:n-i,size:n,load:i/n}},e.prototype._locations=function(n){var i=Sp.hashIntAndString(n,this.seed,16,64),o=i.int;if(this._fingerprintLength>i.string.length)throw new Error("The fingerprint length ("+this._fingerprintLength+") is higher than the hash length ("+i.string.length+"). Please reduce the fingerprint length or report if it is an unexpected behavior.");var a=i.string.substring(0,this._fingerprintLength),c=Math.abs(o),f=Math.abs(Sp.hashAsInt(a,this.seed,64)),d=Math.abs(c^f),m={fingerprint:a,firstIndex:c%this._size,secondIndex:d%this._size};return m},e.prototype.equals=function(n){for(var i=0,o=!0;o&&i<this._filter.length;){var a=this._filter[i];n._filter[i].equals(a)||(o=!1),i++}return o};var t;return e=t=xq([FP.Exportable({export:FP.cloneObject("CuckooFilter","_size","_fingerprintLength","_length","_maxKicks","_filter","_seed"),import:function(n){if(n.type!=="CuckooFilter"||!("_size"in n)||!("_fingerprintLength"in n)||!("_length"in n)||!("_maxKicks"in n)||!("_filter"in n)||!("_seed"in n))throw new Error("Cannot create a CuckooFilter from a JSON export which does not represent a cuckoo filter");var i=new t(n._size,n._fingerprintLength,n._bucketSize,n._maxKicks);return i._length=n._length,i._filter=n._filter.map(function(o){var a=new kP.default(o._size);return o._elements.forEach(function(c,f){c!==null&&(a._elements[f]=c,a._length++)}),a}),i.seed=n.seed,i}}),Eq("design:paramtypes",[Number,Number,Number,Number])],e),e}(Aq.default);Oo.default=Dq});var l_=ue(Di=>{"use strict";h();p();var Cq=Di&&Di.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ry=Di&&Di.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Oy=Di&&Di.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},f_=Di&&Di.__param||function(r,e){return function(t,n){e(t,n,r)}},Pq=Di&&Di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Di,"__esModule",{value:!0});var _c=mc(),Dp=ao(),xc=_i(),Iq=Pq(Bo()),Tq=Symbol.for("nodejs.util.inspect.custom"),kq=function(r){Cq(e,r);function e(n,i,o){var a=r.call(this)||this;return a._idSum=n,a._hashSum=i,a._count=o,a}t=e,e.empty=function(){return new t(_c.Buffer.allocUnsafe(0).fill(0),_c.Buffer.allocUnsafe(0).fill(0),0)},e.prototype[Tq]=function(){return"Cell:<"+JSON.stringify(this._idSum.toJSON().data)+", "+JSON.stringify(this._hashSum.toJSON().data)+", "+this._count+">"},Object.defineProperty(e.prototype,"idSum",{get:function(){return this._idSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hashSum",{get:function(){return this._hashSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.add=function(n,i){this._idSum=Dp.xorBuffer(this._idSum,n),this._hashSum=Dp.xorBuffer(this._hashSum,i),this._count++},e.prototype.xorm=function(n){return new t(Dp.xorBuffer(this._idSum,n.idSum),Dp.xorBuffer(this._hashSum,n.hashSum),this._count-n.count)},e.prototype.isEmpty=function(){return this._idSum.equals(_c.Buffer.from(""))&&this._hashSum.equals(_c.Buffer.from(""))&&this._count===0},e.prototype.equals=function(n){return this._count===n.count&&this._idSum.equals(n.idSum)&&this._hashSum.equals(n.hashSum)},e.prototype.isPure=function(){if(this.isEmpty()||this._count!==1&&this._count!==-1)return!1;var n=Dp.hashTwiceAsString(JSON.stringify(this._idSum.toJSON()),this.seed);return this._hashSum.equals(_c.Buffer.from(n.first))};var t;return Ry([xc.Field(function(n){return n.toString()},_c.Buffer.from),Oy("design:type",Object)],e.prototype,"_idSum",void 0),Ry([xc.Field(function(n){return n.toString()},_c.Buffer.from),Oy("design:type",Object)],e.prototype,"_hashSum",void 0),Ry([xc.Field(),Oy("design:type",Number)],e.prototype,"_count",void 0),e=t=Ry([xc.AutoExportable("Cell",["_seed"]),f_(0,xc.Parameter("_idSum")),f_(1,xc.Parameter("_hashSum")),f_(2,xc.Parameter("_count")),Oy("design:paramtypes",[Object,Object,Number])],e),e}(Iq.default);Di.default=kq});var MP=ue(Nn=>{"use strict";h();p();var Fq=Nn&&Nn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ly=Nn&&Nn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Uy=Nn&&Nn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},OP=Nn&&Nn.__param||function(r,e){return function(t,n){e(t,n,r)}},LP=Nn&&Nn.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){t.label=d[1];break}if(d[0]===6&&t.label<o[1]){t.label=o[1],o=d;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(d);break}o[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},NP=Nn&&Nn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nn,"__esModule",{value:!0});var Ec=mc(),Bq=NP(Bo()),Ny=NP(l_()),yl=_i(),ia=ao(),UP=Dy(),Rq=function(r){Fq(e,r);function e(n,i){i===void 0&&(i=3);var o=r.call(this)||this;if(Ec.Buffer===void 0)throw new Error('No native Buffer implementation bound in your JavaScript env. If you are in a Web browser, consider importing the polyfill "feross/buffer" (https://github.com/feross/buffer).');if(i<=0)throw new Error("The hashCount must be a non-zero, positive integer");return o._size=n,o._hashCount=i,o._elements=ia.allocateArray(o._size,function(){return Ny.default.empty()}),o}t=e,e.create=function(n,i){var o=UP.optimalFilterSize(n,i),a=UP.optimalHashes(o,n);return new t(o,a)},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},Object.defineProperty(e.prototype,"hashCount",{get:function(){return this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.reduce(function(n,i){return n+i.count},0)/this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=ia.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=ia.getDistinctIndices(i.string.first,this._size,this._hashCount,this.seed),a=0;a<this._hashCount;++a)this._elements[o[a]].add(n,Ec.Buffer.from(i.string.first))},e.prototype.remove=function(n){for(var i=ia.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=ia.getDistinctIndices(i.string.first,this.size,this._hashCount,this.seed),a=0;a<this._hashCount;++a)this._elements[o[a]]=this._elements[o[a]].xorm(new Ny.default(Ec.Buffer.from(n),Ec.Buffer.from(i.string.first),1));return!0},e.prototype.has=function(n){for(var i=ia.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=ia.getDistinctIndices(i.string.first,this.size,this._hashCount,this.seed),a=0;a<this._hashCount;++a){if(this._elements[o[a]].count===0)return!1;if(this._elements[o[a]].count===1)return!!this._elements[o[a]].idSum.equals(n)}return!0},e.prototype.listEntries=function(){var n=this,i=[];return function(){var o,a,c;return LP(this,function(f){switch(f.label){case 0:o=function(d){var m;return LP(this,function(w){switch(w.label){case 0:return m=n._elements[d],m.count>0&&i.findIndex(function(E){return E.equals(m.idSum)})===-1?n.has(m.idSum)?(i.push(m.idSum),[4,m.idSum]):[3,2]:[3,3];case 1:return w.sent(),[3,3];case 2:return[2,{value:!1}];case 3:return[2]}})},a=0,f.label=1;case 1:return a<n._elements.length-1?[5,o(a)]:[3,4];case 2:if(c=f.sent(),typeof c=="object")return[2,c.value];f.label=3;case 3:return a++,[3,1];case 4:return[2,!0]}})}()},e.prototype.substract=function(n){if(this.size!==n.size)throw new Error("The two Invertible Bloom Filters must be of the same size");var i=new t(n._size,n._hashCount);i.seed=this.seed;for(var o=0;o<this.size;++o)i._elements[o]=this._elements[o].xorm(n._elements[o]);return i},e.prototype.equals=function(n){if(n._size!==this._size||n._hashCount!==this._hashCount||n.seed!==this.seed)return!1;for(var i=0;i<n._elements.length;++i)if(!n._elements[i].equals(this._elements[i]))return!1;return!0},e.prototype.decode=function(n,i){n===void 0&&(n=[]),i===void 0&&(i=[]);for(var o=[],a=null,c=0;c<this._elements.length;++c)a=this._elements[c],a.isPure()&&o.push(c);for(;o.length!==0;){a=this._elements[o.pop()];var f=a.idSum,d=a.count;if(a.isPure()){if(d===1)n.push(f);else if(d===-1)i.push(f);else throw new Error("Please report, not possible");for(var m=ia.allInOneHashTwice(JSON.stringify(f.toJSON()),this.seed),w=ia.getDistinctIndices(m.string.first,this._size,this._hashCount,this.seed),c=0;c<w.length;++c)this._elements[w[c]]=this._elements[w[c]].xorm(new Ny.default(f,Ec.Buffer.from(m.string.first),d)),this._elements[w[c]].isPure()&&o.push(w[c])}}return this._elements.findIndex(function(E){return!E.isEmpty()})>-1?{success:!1,reason:{cell:a,iblt:this},additional:n,missing:i}:{success:!0,additional:n,missing:i}};var t;return Ly([yl.Field(),Uy("design:type",Number)],e.prototype,"_size",void 0),Ly([yl.Field(),Uy("design:type",Number)],e.prototype,"_hashCount",void 0),Ly([yl.Field(void 0,function(n){return n.map(function(i){var o=new Ny.default(Ec.Buffer.from(i._idSum),Ec.Buffer.from(i._hashSum),i._count);return o.seed=i._seed,o})}),Uy("design:type",Array)],e.prototype,"_elements",void 0),e=t=Ly([yl.AutoExportable("InvertibleBloomFilter",["_seed"]),OP(0,yl.Parameter("_size")),OP(1,yl.Parameter("_hashCount")),Uy("design:paramtypes",[Number,Number])],e),e}(Bq.default);Nn.default=Rq});var KP=ue(Ci=>{"use strict";h();p();Object.defineProperty(Ci,"__esModule",{value:!0});var Oq=sP();Ci.BloomFilter=Oq.default;var Lq=cP();Ci.CountingBloomFilter=Lq.default;var Uq=fP();Ci.PartitionedBloomFilter=Uq.default;var Nq=r_();Ci.CountMinSketch=Nq.default;var Mq=pP();Ci.HyperLogLog=Mq.default;var Kq=mP();Ci.TopK=Kq.default;var jq=a_();Ci.MinHash=jq.MinHash;var $q=vP();Ci.MinHashFactory=$q.default;var zq=RP();Ci.CuckooFilter=zq.default;var qq=MP();Ci.InvertibleBloomFilter=qq.default;var Wq=l_();Ci.Cell=Wq.default});var wI=ue((Ele,Jy)=>{h();p();(function(r){"use strict";var e=function(b){var S,A=new Float64Array(16);if(b)for(S=0;S<b.length;S++)A[S]=b[S];return A},t=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=e(),a=e([1]),c=e([56129,1]),f=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),w=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),E=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function T(b,S,A,y){b[S]=A>>24&255,b[S+1]=A>>16&255,b[S+2]=A>>8&255,b[S+3]=A&255,b[S+4]=y>>24&255,b[S+5]=y>>16&255,b[S+6]=y>>8&255,b[S+7]=y&255}function F(b,S,A,y,I){var M,j=0;for(M=0;M<I;M++)j|=b[S+M]^A[y+M];return(1&j-1>>>8)-1}function N(b,S,A,y){return F(b,S,A,y,16)}function he(b,S,A,y){return F(b,S,A,y,32)}function de(b,S,A,y){for(var I=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,M=A[0]&255|(A[1]&255)<<8|(A[2]&255)<<16|(A[3]&255)<<24,j=A[4]&255|(A[5]&255)<<8|(A[6]&255)<<16|(A[7]&255)<<24,oe=A[8]&255|(A[9]&255)<<8|(A[10]&255)<<16|(A[11]&255)<<24,ye=A[12]&255|(A[13]&255)<<8|(A[14]&255)<<16|(A[15]&255)<<24,Ke=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,De=S[0]&255|(S[1]&255)<<8|(S[2]&255)<<16|(S[3]&255)<<24,Pt=S[4]&255|(S[5]&255)<<8|(S[6]&255)<<16|(S[7]&255)<<24,ke=S[8]&255|(S[9]&255)<<8|(S[10]&255)<<16|(S[11]&255)<<24,rt=S[12]&255|(S[13]&255)<<8|(S[14]&255)<<16|(S[15]&255)<<24,ot=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,ct=A[16]&255|(A[17]&255)<<8|(A[18]&255)<<16|(A[19]&255)<<24,lt=A[20]&255|(A[21]&255)<<8|(A[22]&255)<<16|(A[23]&255)<<24,et=A[24]&255|(A[25]&255)<<8|(A[26]&255)<<16|(A[27]&255)<<24,ft=A[28]&255|(A[29]&255)<<8|(A[30]&255)<<16|(A[31]&255)<<24,nt=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,Ie=I,ze=M,xe=j,Be=oe,Re=ye,Ee=Ke,q=De,W=Pt,fe=ke,re=rt,ne=ot,_=ct,k=lt,C=et,R=ft,O=nt,v,z=0;z<20;z+=2)v=Ie+k|0,Re^=v<<7|v>>>32-7,v=Re+Ie|0,fe^=v<<9|v>>>32-9,v=fe+Re|0,k^=v<<13|v>>>32-13,v=k+fe|0,Ie^=v<<18|v>>>32-18,v=Ee+ze|0,re^=v<<7|v>>>32-7,v=re+Ee|0,C^=v<<9|v>>>32-9,v=C+re|0,ze^=v<<13|v>>>32-13,v=ze+C|0,Ee^=v<<18|v>>>32-18,v=ne+q|0,R^=v<<7|v>>>32-7,v=R+ne|0,xe^=v<<9|v>>>32-9,v=xe+R|0,q^=v<<13|v>>>32-13,v=q+xe|0,ne^=v<<18|v>>>32-18,v=O+_|0,Be^=v<<7|v>>>32-7,v=Be+O|0,W^=v<<9|v>>>32-9,v=W+Be|0,_^=v<<13|v>>>32-13,v=_+W|0,O^=v<<18|v>>>32-18,v=Ie+Be|0,ze^=v<<7|v>>>32-7,v=ze+Ie|0,xe^=v<<9|v>>>32-9,v=xe+ze|0,Be^=v<<13|v>>>32-13,v=Be+xe|0,Ie^=v<<18|v>>>32-18,v=Ee+Re|0,q^=v<<7|v>>>32-7,v=q+Ee|0,W^=v<<9|v>>>32-9,v=W+q|0,Re^=v<<13|v>>>32-13,v=Re+W|0,Ee^=v<<18|v>>>32-18,v=ne+re|0,_^=v<<7|v>>>32-7,v=_+ne|0,fe^=v<<9|v>>>32-9,v=fe+_|0,re^=v<<13|v>>>32-13,v=re+fe|0,ne^=v<<18|v>>>32-18,v=O+R|0,k^=v<<7|v>>>32-7,v=k+O|0,C^=v<<9|v>>>32-9,v=C+k|0,R^=v<<13|v>>>32-13,v=R+C|0,O^=v<<18|v>>>32-18;Ie=Ie+I|0,ze=ze+M|0,xe=xe+j|0,Be=Be+oe|0,Re=Re+ye|0,Ee=Ee+Ke|0,q=q+De|0,W=W+Pt|0,fe=fe+ke|0,re=re+rt|0,ne=ne+ot|0,_=_+ct|0,k=k+lt|0,C=C+et|0,R=R+ft|0,O=O+nt|0,b[0]=Ie>>>0&255,b[1]=Ie>>>8&255,b[2]=Ie>>>16&255,b[3]=Ie>>>24&255,b[4]=ze>>>0&255,b[5]=ze>>>8&255,b[6]=ze>>>16&255,b[7]=ze>>>24&255,b[8]=xe>>>0&255,b[9]=xe>>>8&255,b[10]=xe>>>16&255,b[11]=xe>>>24&255,b[12]=Be>>>0&255,b[13]=Be>>>8&255,b[14]=Be>>>16&255,b[15]=Be>>>24&255,b[16]=Re>>>0&255,b[17]=Re>>>8&255,b[18]=Re>>>16&255,b[19]=Re>>>24&255,b[20]=Ee>>>0&255,b[21]=Ee>>>8&255,b[22]=Ee>>>16&255,b[23]=Ee>>>24&255,b[24]=q>>>0&255,b[25]=q>>>8&255,b[26]=q>>>16&255,b[27]=q>>>24&255,b[28]=W>>>0&255,b[29]=W>>>8&255,b[30]=W>>>16&255,b[31]=W>>>24&255,b[32]=fe>>>0&255,b[33]=fe>>>8&255,b[34]=fe>>>16&255,b[35]=fe>>>24&255,b[36]=re>>>0&255,b[37]=re>>>8&255,b[38]=re>>>16&255,b[39]=re>>>24&255,b[40]=ne>>>0&255,b[41]=ne>>>8&255,b[42]=ne>>>16&255,b[43]=ne>>>24&255,b[44]=_>>>0&255,b[45]=_>>>8&255,b[46]=_>>>16&255,b[47]=_>>>24&255,b[48]=k>>>0&255,b[49]=k>>>8&255,b[50]=k>>>16&255,b[51]=k>>>24&255,b[52]=C>>>0&255,b[53]=C>>>8&255,b[54]=C>>>16&255,b[55]=C>>>24&255,b[56]=R>>>0&255,b[57]=R>>>8&255,b[58]=R>>>16&255,b[59]=R>>>24&255,b[60]=O>>>0&255,b[61]=O>>>8&255,b[62]=O>>>16&255,b[63]=O>>>24&255}function Pe(b,S,A,y){for(var I=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,M=A[0]&255|(A[1]&255)<<8|(A[2]&255)<<16|(A[3]&255)<<24,j=A[4]&255|(A[5]&255)<<8|(A[6]&255)<<16|(A[7]&255)<<24,oe=A[8]&255|(A[9]&255)<<8|(A[10]&255)<<16|(A[11]&255)<<24,ye=A[12]&255|(A[13]&255)<<8|(A[14]&255)<<16|(A[15]&255)<<24,Ke=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,De=S[0]&255|(S[1]&255)<<8|(S[2]&255)<<16|(S[3]&255)<<24,Pt=S[4]&255|(S[5]&255)<<8|(S[6]&255)<<16|(S[7]&255)<<24,ke=S[8]&255|(S[9]&255)<<8|(S[10]&255)<<16|(S[11]&255)<<24,rt=S[12]&255|(S[13]&255)<<8|(S[14]&255)<<16|(S[15]&255)<<24,ot=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,ct=A[16]&255|(A[17]&255)<<8|(A[18]&255)<<16|(A[19]&255)<<24,lt=A[20]&255|(A[21]&255)<<8|(A[22]&255)<<16|(A[23]&255)<<24,et=A[24]&255|(A[25]&255)<<8|(A[26]&255)<<16|(A[27]&255)<<24,ft=A[28]&255|(A[29]&255)<<8|(A[30]&255)<<16|(A[31]&255)<<24,nt=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,Ie=I,ze=M,xe=j,Be=oe,Re=ye,Ee=Ke,q=De,W=Pt,fe=ke,re=rt,ne=ot,_=ct,k=lt,C=et,R=ft,O=nt,v,z=0;z<20;z+=2)v=Ie+k|0,Re^=v<<7|v>>>32-7,v=Re+Ie|0,fe^=v<<9|v>>>32-9,v=fe+Re|0,k^=v<<13|v>>>32-13,v=k+fe|0,Ie^=v<<18|v>>>32-18,v=Ee+ze|0,re^=v<<7|v>>>32-7,v=re+Ee|0,C^=v<<9|v>>>32-9,v=C+re|0,ze^=v<<13|v>>>32-13,v=ze+C|0,Ee^=v<<18|v>>>32-18,v=ne+q|0,R^=v<<7|v>>>32-7,v=R+ne|0,xe^=v<<9|v>>>32-9,v=xe+R|0,q^=v<<13|v>>>32-13,v=q+xe|0,ne^=v<<18|v>>>32-18,v=O+_|0,Be^=v<<7|v>>>32-7,v=Be+O|0,W^=v<<9|v>>>32-9,v=W+Be|0,_^=v<<13|v>>>32-13,v=_+W|0,O^=v<<18|v>>>32-18,v=Ie+Be|0,ze^=v<<7|v>>>32-7,v=ze+Ie|0,xe^=v<<9|v>>>32-9,v=xe+ze|0,Be^=v<<13|v>>>32-13,v=Be+xe|0,Ie^=v<<18|v>>>32-18,v=Ee+Re|0,q^=v<<7|v>>>32-7,v=q+Ee|0,W^=v<<9|v>>>32-9,v=W+q|0,Re^=v<<13|v>>>32-13,v=Re+W|0,Ee^=v<<18|v>>>32-18,v=ne+re|0,_^=v<<7|v>>>32-7,v=_+ne|0,fe^=v<<9|v>>>32-9,v=fe+_|0,re^=v<<13|v>>>32-13,v=re+fe|0,ne^=v<<18|v>>>32-18,v=O+R|0,k^=v<<7|v>>>32-7,v=k+O|0,C^=v<<9|v>>>32-9,v=C+k|0,R^=v<<13|v>>>32-13,v=R+C|0,O^=v<<18|v>>>32-18;b[0]=Ie>>>0&255,b[1]=Ie>>>8&255,b[2]=Ie>>>16&255,b[3]=Ie>>>24&255,b[4]=Ee>>>0&255,b[5]=Ee>>>8&255,b[6]=Ee>>>16&255,b[7]=Ee>>>24&255,b[8]=ne>>>0&255,b[9]=ne>>>8&255,b[10]=ne>>>16&255,b[11]=ne>>>24&255,b[12]=O>>>0&255,b[13]=O>>>8&255,b[14]=O>>>16&255,b[15]=O>>>24&255,b[16]=q>>>0&255,b[17]=q>>>8&255,b[18]=q>>>16&255,b[19]=q>>>24&255,b[20]=W>>>0&255,b[21]=W>>>8&255,b[22]=W>>>16&255,b[23]=W>>>24&255,b[24]=fe>>>0&255,b[25]=fe>>>8&255,b[26]=fe>>>16&255,b[27]=fe>>>24&255,b[28]=re>>>0&255,b[29]=re>>>8&255,b[30]=re>>>16&255,b[31]=re>>>24&255}function ie(b,S,A,y){de(b,S,A,y)}function be(b,S,A,y){Pe(b,S,A,y)}var Ae=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Y(b,S,A,y,I,M,j){var oe=new Uint8Array(16),ye=new Uint8Array(64),Ke,De;for(De=0;De<16;De++)oe[De]=0;for(De=0;De<8;De++)oe[De]=M[De];for(;I>=64;){for(ie(ye,oe,j,Ae),De=0;De<64;De++)b[S+De]=A[y+De]^ye[De];for(Ke=1,De=8;De<16;De++)Ke=Ke+(oe[De]&255)|0,oe[De]=Ke&255,Ke>>>=8;I-=64,S+=64,y+=64}if(I>0)for(ie(ye,oe,j,Ae),De=0;De<I;De++)b[S+De]=A[y+De]^ye[De];return 0}function ge(b,S,A,y,I){var M=new Uint8Array(16),j=new Uint8Array(64),oe,ye;for(ye=0;ye<16;ye++)M[ye]=0;for(ye=0;ye<8;ye++)M[ye]=y[ye];for(;A>=64;){for(ie(j,M,I,Ae),ye=0;ye<64;ye++)b[S+ye]=j[ye];for(oe=1,ye=8;ye<16;ye++)oe=oe+(M[ye]&255)|0,M[ye]=oe&255,oe>>>=8;A-=64,S+=64}if(A>0)for(ie(j,M,I,Ae),ye=0;ye<A;ye++)b[S+ye]=j[ye];return 0}function _e(b,S,A,y,I){var M=new Uint8Array(32);be(M,y,I,Ae);for(var j=new Uint8Array(8),oe=0;oe<8;oe++)j[oe]=y[oe+16];return ge(b,S,A,j,M)}function Me(b,S,A,y,I,M,j){var oe=new Uint8Array(32);be(oe,M,j,Ae);for(var ye=new Uint8Array(8),Ke=0;Ke<8;Ke++)ye[Ke]=M[Ke+16];return Y(b,S,A,y,I,ye,oe)}var vt=function(b){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var S,A,y,I,M,j,oe,ye;S=b[0]&255|(b[1]&255)<<8,this.r[0]=S&8191,A=b[2]&255|(b[3]&255)<<8,this.r[1]=(S>>>13|A<<3)&8191,y=b[4]&255|(b[5]&255)<<8,this.r[2]=(A>>>10|y<<6)&7939,I=b[6]&255|(b[7]&255)<<8,this.r[3]=(y>>>7|I<<9)&8191,M=b[8]&255|(b[9]&255)<<8,this.r[4]=(I>>>4|M<<12)&255,this.r[5]=M>>>1&8190,j=b[10]&255|(b[11]&255)<<8,this.r[6]=(M>>>14|j<<2)&8191,oe=b[12]&255|(b[13]&255)<<8,this.r[7]=(j>>>11|oe<<5)&8065,ye=b[14]&255|(b[15]&255)<<8,this.r[8]=(oe>>>8|ye<<8)&8191,this.r[9]=ye>>>5&127,this.pad[0]=b[16]&255|(b[17]&255)<<8,this.pad[1]=b[18]&255|(b[19]&255)<<8,this.pad[2]=b[20]&255|(b[21]&255)<<8,this.pad[3]=b[22]&255|(b[23]&255)<<8,this.pad[4]=b[24]&255|(b[25]&255)<<8,this.pad[5]=b[26]&255|(b[27]&255)<<8,this.pad[6]=b[28]&255|(b[29]&255)<<8,this.pad[7]=b[30]&255|(b[31]&255)<<8};vt.prototype.blocks=function(b,S,A){for(var y=this.fin?0:2048,I,M,j,oe,ye,Ke,De,Pt,ke,rt,ot,ct,lt,et,ft,nt,Ie,ze,xe,Be=this.h[0],Re=this.h[1],Ee=this.h[2],q=this.h[3],W=this.h[4],fe=this.h[5],re=this.h[6],ne=this.h[7],_=this.h[8],k=this.h[9],C=this.r[0],R=this.r[1],O=this.r[2],v=this.r[3],z=this.r[4],H=this.r[5],X=this.r[6],G=this.r[7],te=this.r[8],me=this.r[9];A>=16;)I=b[S+0]&255|(b[S+1]&255)<<8,Be+=I&8191,M=b[S+2]&255|(b[S+3]&255)<<8,Re+=(I>>>13|M<<3)&8191,j=b[S+4]&255|(b[S+5]&255)<<8,Ee+=(M>>>10|j<<6)&8191,oe=b[S+6]&255|(b[S+7]&255)<<8,q+=(j>>>7|oe<<9)&8191,ye=b[S+8]&255|(b[S+9]&255)<<8,W+=(oe>>>4|ye<<12)&8191,fe+=ye>>>1&8191,Ke=b[S+10]&255|(b[S+11]&255)<<8,re+=(ye>>>14|Ke<<2)&8191,De=b[S+12]&255|(b[S+13]&255)<<8,ne+=(Ke>>>11|De<<5)&8191,Pt=b[S+14]&255|(b[S+15]&255)<<8,_+=(De>>>8|Pt<<8)&8191,k+=Pt>>>5|y,ke=0,rt=ke,rt+=Be*C,rt+=Re*(5*me),rt+=Ee*(5*te),rt+=q*(5*G),rt+=W*(5*X),ke=rt>>>13,rt&=8191,rt+=fe*(5*H),rt+=re*(5*z),rt+=ne*(5*v),rt+=_*(5*O),rt+=k*(5*R),ke+=rt>>>13,rt&=8191,ot=ke,ot+=Be*R,ot+=Re*C,ot+=Ee*(5*me),ot+=q*(5*te),ot+=W*(5*G),ke=ot>>>13,ot&=8191,ot+=fe*(5*X),ot+=re*(5*H),ot+=ne*(5*z),ot+=_*(5*v),ot+=k*(5*O),ke+=ot>>>13,ot&=8191,ct=ke,ct+=Be*O,ct+=Re*R,ct+=Ee*C,ct+=q*(5*me),ct+=W*(5*te),ke=ct>>>13,ct&=8191,ct+=fe*(5*G),ct+=re*(5*X),ct+=ne*(5*H),ct+=_*(5*z),ct+=k*(5*v),ke+=ct>>>13,ct&=8191,lt=ke,lt+=Be*v,lt+=Re*O,lt+=Ee*R,lt+=q*C,lt+=W*(5*me),ke=lt>>>13,lt&=8191,lt+=fe*(5*te),lt+=re*(5*G),lt+=ne*(5*X),lt+=_*(5*H),lt+=k*(5*z),ke+=lt>>>13,lt&=8191,et=ke,et+=Be*z,et+=Re*v,et+=Ee*O,et+=q*R,et+=W*C,ke=et>>>13,et&=8191,et+=fe*(5*me),et+=re*(5*te),et+=ne*(5*G),et+=_*(5*X),et+=k*(5*H),ke+=et>>>13,et&=8191,ft=ke,ft+=Be*H,ft+=Re*z,ft+=Ee*v,ft+=q*O,ft+=W*R,ke=ft>>>13,ft&=8191,ft+=fe*C,ft+=re*(5*me),ft+=ne*(5*te),ft+=_*(5*G),ft+=k*(5*X),ke+=ft>>>13,ft&=8191,nt=ke,nt+=Be*X,nt+=Re*H,nt+=Ee*z,nt+=q*v,nt+=W*O,ke=nt>>>13,nt&=8191,nt+=fe*R,nt+=re*C,nt+=ne*(5*me),nt+=_*(5*te),nt+=k*(5*G),ke+=nt>>>13,nt&=8191,Ie=ke,Ie+=Be*G,Ie+=Re*X,Ie+=Ee*H,Ie+=q*z,Ie+=W*v,ke=Ie>>>13,Ie&=8191,Ie+=fe*O,Ie+=re*R,Ie+=ne*C,Ie+=_*(5*me),Ie+=k*(5*te),ke+=Ie>>>13,Ie&=8191,ze=ke,ze+=Be*te,ze+=Re*G,ze+=Ee*X,ze+=q*H,ze+=W*z,ke=ze>>>13,ze&=8191,ze+=fe*v,ze+=re*O,ze+=ne*R,ze+=_*C,ze+=k*(5*me),ke+=ze>>>13,ze&=8191,xe=ke,xe+=Be*me,xe+=Re*te,xe+=Ee*G,xe+=q*X,xe+=W*H,ke=xe>>>13,xe&=8191,xe+=fe*z,xe+=re*v,xe+=ne*O,xe+=_*R,xe+=k*C,ke+=xe>>>13,xe&=8191,ke=(ke<<2)+ke|0,ke=ke+rt|0,rt=ke&8191,ke=ke>>>13,ot+=ke,Be=rt,Re=ot,Ee=ct,q=lt,W=et,fe=ft,re=nt,ne=Ie,_=ze,k=xe,S+=16,A-=16;this.h[0]=Be,this.h[1]=Re,this.h[2]=Ee,this.h[3]=q,this.h[4]=W,this.h[5]=fe,this.h[6]=re,this.h[7]=ne,this.h[8]=_,this.h[9]=k},vt.prototype.finish=function(b,S){var A=new Uint16Array(10),y,I,M,j;if(this.leftover){for(j=this.leftover,this.buffer[j++]=1;j<16;j++)this.buffer[j]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(y=this.h[1]>>>13,this.h[1]&=8191,j=2;j<10;j++)this.h[j]+=y,y=this.h[j]>>>13,this.h[j]&=8191;for(this.h[0]+=y*5,y=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=y,y=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=y,A[0]=this.h[0]+5,y=A[0]>>>13,A[0]&=8191,j=1;j<10;j++)A[j]=this.h[j]+y,y=A[j]>>>13,A[j]&=8191;for(A[9]-=1<<13,I=(y^1)-1,j=0;j<10;j++)A[j]&=I;for(I=~I,j=0;j<10;j++)this.h[j]=this.h[j]&I|A[j];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,M=this.h[0]+this.pad[0],this.h[0]=M&65535,j=1;j<8;j++)M=(this.h[j]+this.pad[j]|0)+(M>>>16)|0,this.h[j]=M&65535;b[S+0]=this.h[0]>>>0&255,b[S+1]=this.h[0]>>>8&255,b[S+2]=this.h[1]>>>0&255,b[S+3]=this.h[1]>>>8&255,b[S+4]=this.h[2]>>>0&255,b[S+5]=this.h[2]>>>8&255,b[S+6]=this.h[3]>>>0&255,b[S+7]=this.h[3]>>>8&255,b[S+8]=this.h[4]>>>0&255,b[S+9]=this.h[4]>>>8&255,b[S+10]=this.h[5]>>>0&255,b[S+11]=this.h[5]>>>8&255,b[S+12]=this.h[6]>>>0&255,b[S+13]=this.h[6]>>>8&255,b[S+14]=this.h[7]>>>0&255,b[S+15]=this.h[7]>>>8&255},vt.prototype.update=function(b,S,A){var y,I;if(this.leftover){for(I=16-this.leftover,I>A&&(I=A),y=0;y<I;y++)this.buffer[this.leftover+y]=b[S+y];if(A-=I,S+=I,this.leftover+=I,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(A>=16&&(I=A-A%16,this.blocks(b,S,I),S+=I,A-=I),A){for(y=0;y<A;y++)this.buffer[this.leftover+y]=b[S+y];this.leftover+=A}};function Ut(b,S,A,y,I,M){var j=new vt(M);return j.update(A,y,I),j.finish(b,S),0}function Rt(b,S,A,y,I,M){var j=new Uint8Array(16);return Ut(j,0,A,y,I,M),N(b,S,j,0)}function qt(b,S,A,y,I){var M;if(A<32)return-1;for(Me(b,0,S,0,A,y,I),Ut(b,16,b,32,A-32,b),M=0;M<16;M++)b[M]=0;return 0}function hr(b,S,A,y,I){var M,j=new Uint8Array(32);if(A<32||(_e(j,0,32,y,I),Rt(S,16,S,32,A-32,j)!==0))return-1;for(Me(b,0,S,0,A,y,I),M=0;M<32;M++)b[M]=0;return 0}function Mt(b,S){var A;for(A=0;A<16;A++)b[A]=S[A]|0}function Kr(b){var S,A,y=1;for(S=0;S<16;S++)A=b[S]+y+65535,y=Math.floor(A/65536),b[S]=A-y*65536;b[0]+=y-1+37*(y-1)}function Pn(b,S,A){for(var y,I=~(A-1),M=0;M<16;M++)y=I&(b[M]^S[M]),b[M]^=y,S[M]^=y}function Fr(b,S){var A,y,I,M=e(),j=e();for(A=0;A<16;A++)j[A]=S[A];for(Kr(j),Kr(j),Kr(j),y=0;y<2;y++){for(M[0]=j[0]-65517,A=1;A<15;A++)M[A]=j[A]-65535-(M[A-1]>>16&1),M[A-1]&=65535;M[15]=j[15]-32767-(M[14]>>16&1),I=M[15]>>16&1,M[14]&=65535,Pn(j,M,1-I)}for(A=0;A<16;A++)b[2*A]=j[A]&255,b[2*A+1]=j[A]>>8}function qr(b,S){var A=new Uint8Array(32),y=new Uint8Array(32);return Fr(A,b),Fr(y,S),he(A,0,y,0)}function Fs(b){var S=new Uint8Array(32);return Fr(S,b),S[0]&1}function er(b,S){var A;for(A=0;A<16;A++)b[A]=S[2*A]+(S[2*A+1]<<8);b[15]&=32767}function Wt(b,S,A){for(var y=0;y<16;y++)b[y]=S[y]+A[y]}function wr(b,S,A){for(var y=0;y<16;y++)b[y]=S[y]-A[y]}function Ve(b,S,A){var y,I,M=0,j=0,oe=0,ye=0,Ke=0,De=0,Pt=0,ke=0,rt=0,ot=0,ct=0,lt=0,et=0,ft=0,nt=0,Ie=0,ze=0,xe=0,Be=0,Re=0,Ee=0,q=0,W=0,fe=0,re=0,ne=0,_=0,k=0,C=0,R=0,O=0,v=A[0],z=A[1],H=A[2],X=A[3],G=A[4],te=A[5],me=A[6],$e=A[7],Ue=A[8],Qe=A[9],pt=A[10],dt=A[11],Ot=A[12],cr=A[13],br=A[14],Rr=A[15];y=S[0],M+=y*v,j+=y*z,oe+=y*H,ye+=y*X,Ke+=y*G,De+=y*te,Pt+=y*me,ke+=y*$e,rt+=y*Ue,ot+=y*Qe,ct+=y*pt,lt+=y*dt,et+=y*Ot,ft+=y*cr,nt+=y*br,Ie+=y*Rr,y=S[1],j+=y*v,oe+=y*z,ye+=y*H,Ke+=y*X,De+=y*G,Pt+=y*te,ke+=y*me,rt+=y*$e,ot+=y*Ue,ct+=y*Qe,lt+=y*pt,et+=y*dt,ft+=y*Ot,nt+=y*cr,Ie+=y*br,ze+=y*Rr,y=S[2],oe+=y*v,ye+=y*z,Ke+=y*H,De+=y*X,Pt+=y*G,ke+=y*te,rt+=y*me,ot+=y*$e,ct+=y*Ue,lt+=y*Qe,et+=y*pt,ft+=y*dt,nt+=y*Ot,Ie+=y*cr,ze+=y*br,xe+=y*Rr,y=S[3],ye+=y*v,Ke+=y*z,De+=y*H,Pt+=y*X,ke+=y*G,rt+=y*te,ot+=y*me,ct+=y*$e,lt+=y*Ue,et+=y*Qe,ft+=y*pt,nt+=y*dt,Ie+=y*Ot,ze+=y*cr,xe+=y*br,Be+=y*Rr,y=S[4],Ke+=y*v,De+=y*z,Pt+=y*H,ke+=y*X,rt+=y*G,ot+=y*te,ct+=y*me,lt+=y*$e,et+=y*Ue,ft+=y*Qe,nt+=y*pt,Ie+=y*dt,ze+=y*Ot,xe+=y*cr,Be+=y*br,Re+=y*Rr,y=S[5],De+=y*v,Pt+=y*z,ke+=y*H,rt+=y*X,ot+=y*G,ct+=y*te,lt+=y*me,et+=y*$e,ft+=y*Ue,nt+=y*Qe,Ie+=y*pt,ze+=y*dt,xe+=y*Ot,Be+=y*cr,Re+=y*br,Ee+=y*Rr,y=S[6],Pt+=y*v,ke+=y*z,rt+=y*H,ot+=y*X,ct+=y*G,lt+=y*te,et+=y*me,ft+=y*$e,nt+=y*Ue,Ie+=y*Qe,ze+=y*pt,xe+=y*dt,Be+=y*Ot,Re+=y*cr,Ee+=y*br,q+=y*Rr,y=S[7],ke+=y*v,rt+=y*z,ot+=y*H,ct+=y*X,lt+=y*G,et+=y*te,ft+=y*me,nt+=y*$e,Ie+=y*Ue,ze+=y*Qe,xe+=y*pt,Be+=y*dt,Re+=y*Ot,Ee+=y*cr,q+=y*br,W+=y*Rr,y=S[8],rt+=y*v,ot+=y*z,ct+=y*H,lt+=y*X,et+=y*G,ft+=y*te,nt+=y*me,Ie+=y*$e,ze+=y*Ue,xe+=y*Qe,Be+=y*pt,Re+=y*dt,Ee+=y*Ot,q+=y*cr,W+=y*br,fe+=y*Rr,y=S[9],ot+=y*v,ct+=y*z,lt+=y*H,et+=y*X,ft+=y*G,nt+=y*te,Ie+=y*me,ze+=y*$e,xe+=y*Ue,Be+=y*Qe,Re+=y*pt,Ee+=y*dt,q+=y*Ot,W+=y*cr,fe+=y*br,re+=y*Rr,y=S[10],ct+=y*v,lt+=y*z,et+=y*H,ft+=y*X,nt+=y*G,Ie+=y*te,ze+=y*me,xe+=y*$e,Be+=y*Ue,Re+=y*Qe,Ee+=y*pt,q+=y*dt,W+=y*Ot,fe+=y*cr,re+=y*br,ne+=y*Rr,y=S[11],lt+=y*v,et+=y*z,ft+=y*H,nt+=y*X,Ie+=y*G,ze+=y*te,xe+=y*me,Be+=y*$e,Re+=y*Ue,Ee+=y*Qe,q+=y*pt,W+=y*dt,fe+=y*Ot,re+=y*cr,ne+=y*br,_+=y*Rr,y=S[12],et+=y*v,ft+=y*z,nt+=y*H,Ie+=y*X,ze+=y*G,xe+=y*te,Be+=y*me,Re+=y*$e,Ee+=y*Ue,q+=y*Qe,W+=y*pt,fe+=y*dt,re+=y*Ot,ne+=y*cr,_+=y*br,k+=y*Rr,y=S[13],ft+=y*v,nt+=y*z,Ie+=y*H,ze+=y*X,xe+=y*G,Be+=y*te,Re+=y*me,Ee+=y*$e,q+=y*Ue,W+=y*Qe,fe+=y*pt,re+=y*dt,ne+=y*Ot,_+=y*cr,k+=y*br,C+=y*Rr,y=S[14],nt+=y*v,Ie+=y*z,ze+=y*H,xe+=y*X,Be+=y*G,Re+=y*te,Ee+=y*me,q+=y*$e,W+=y*Ue,fe+=y*Qe,re+=y*pt,ne+=y*dt,_+=y*Ot,k+=y*cr,C+=y*br,R+=y*Rr,y=S[15],Ie+=y*v,ze+=y*z,xe+=y*H,Be+=y*X,Re+=y*G,Ee+=y*te,q+=y*me,W+=y*$e,fe+=y*Ue,re+=y*Qe,ne+=y*pt,_+=y*dt,k+=y*Ot,C+=y*cr,R+=y*br,O+=y*Rr,M+=38*ze,j+=38*xe,oe+=38*Be,ye+=38*Re,Ke+=38*Ee,De+=38*q,Pt+=38*W,ke+=38*fe,rt+=38*re,ot+=38*ne,ct+=38*_,lt+=38*k,et+=38*C,ft+=38*R,nt+=38*O,I=1,y=M+I+65535,I=Math.floor(y/65536),M=y-I*65536,y=j+I+65535,I=Math.floor(y/65536),j=y-I*65536,y=oe+I+65535,I=Math.floor(y/65536),oe=y-I*65536,y=ye+I+65535,I=Math.floor(y/65536),ye=y-I*65536,y=Ke+I+65535,I=Math.floor(y/65536),Ke=y-I*65536,y=De+I+65535,I=Math.floor(y/65536),De=y-I*65536,y=Pt+I+65535,I=Math.floor(y/65536),Pt=y-I*65536,y=ke+I+65535,I=Math.floor(y/65536),ke=y-I*65536,y=rt+I+65535,I=Math.floor(y/65536),rt=y-I*65536,y=ot+I+65535,I=Math.floor(y/65536),ot=y-I*65536,y=ct+I+65535,I=Math.floor(y/65536),ct=y-I*65536,y=lt+I+65535,I=Math.floor(y/65536),lt=y-I*65536,y=et+I+65535,I=Math.floor(y/65536),et=y-I*65536,y=ft+I+65535,I=Math.floor(y/65536),ft=y-I*65536,y=nt+I+65535,I=Math.floor(y/65536),nt=y-I*65536,y=Ie+I+65535,I=Math.floor(y/65536),Ie=y-I*65536,M+=I-1+37*(I-1),I=1,y=M+I+65535,I=Math.floor(y/65536),M=y-I*65536,y=j+I+65535,I=Math.floor(y/65536),j=y-I*65536,y=oe+I+65535,I=Math.floor(y/65536),oe=y-I*65536,y=ye+I+65535,I=Math.floor(y/65536),ye=y-I*65536,y=Ke+I+65535,I=Math.floor(y/65536),Ke=y-I*65536,y=De+I+65535,I=Math.floor(y/65536),De=y-I*65536,y=Pt+I+65535,I=Math.floor(y/65536),Pt=y-I*65536,y=ke+I+65535,I=Math.floor(y/65536),ke=y-I*65536,y=rt+I+65535,I=Math.floor(y/65536),rt=y-I*65536,y=ot+I+65535,I=Math.floor(y/65536),ot=y-I*65536,y=ct+I+65535,I=Math.floor(y/65536),ct=y-I*65536,y=lt+I+65535,I=Math.floor(y/65536),lt=y-I*65536,y=et+I+65535,I=Math.floor(y/65536),et=y-I*65536,y=ft+I+65535,I=Math.floor(y/65536),ft=y-I*65536,y=nt+I+65535,I=Math.floor(y/65536),nt=y-I*65536,y=Ie+I+65535,I=Math.floor(y/65536),Ie=y-I*65536,M+=I-1+37*(I-1),b[0]=M,b[1]=j,b[2]=oe,b[3]=ye,b[4]=Ke,b[5]=De,b[6]=Pt,b[7]=ke,b[8]=rt,b[9]=ot,b[10]=ct,b[11]=lt,b[12]=et,b[13]=ft,b[14]=nt,b[15]=Ie}function Jr(b,S){Ve(b,S,S)}function Mi(b,S){var A=e(),y;for(y=0;y<16;y++)A[y]=S[y];for(y=253;y>=0;y--)Jr(A,A),y!==2&&y!==4&&Ve(A,A,S);for(y=0;y<16;y++)b[y]=A[y]}function Ki(b,S){var A=e(),y;for(y=0;y<16;y++)A[y]=S[y];for(y=250;y>=0;y--)Jr(A,A),y!==1&&Ve(A,A,S);for(y=0;y<16;y++)b[y]=A[y]}function es(b,S,A){var y=new Uint8Array(32),I=new Float64Array(80),M,j,oe=e(),ye=e(),Ke=e(),De=e(),Pt=e(),ke=e();for(j=0;j<31;j++)y[j]=S[j];for(y[31]=S[31]&127|64,y[0]&=248,er(I,A),j=0;j<16;j++)ye[j]=I[j],De[j]=oe[j]=Ke[j]=0;for(oe[0]=De[0]=1,j=254;j>=0;--j)M=y[j>>>3]>>>(j&7)&1,Pn(oe,ye,M),Pn(Ke,De,M),Wt(Pt,oe,Ke),wr(oe,oe,Ke),Wt(Ke,ye,De),wr(ye,ye,De),Jr(De,Pt),Jr(ke,oe),Ve(oe,Ke,oe),Ve(Ke,ye,Pt),Wt(Pt,oe,Ke),wr(oe,oe,Ke),Jr(ye,oe),wr(Ke,De,ke),Ve(oe,Ke,c),Wt(oe,oe,De),Ve(Ke,Ke,oe),Ve(oe,De,ke),Ve(De,ye,I),Jr(ye,Pt),Pn(oe,ye,M),Pn(Ke,De,M);for(j=0;j<16;j++)I[j+16]=oe[j],I[j+32]=Ke[j],I[j+48]=ye[j],I[j+64]=De[j];var rt=I.subarray(32),ot=I.subarray(16);return Mi(rt,rt),Ve(ot,ot,rt),Fr(b,ot),0}function Br(b,S){return es(b,S,i)}function ji(b,S){return t(S,32),Br(b,S)}function wn(b,S,A){var y=new Uint8Array(32);return es(y,A,S),be(b,n,y,Ae)}var Wr=qt,go=hr;function Ea(b,S,A,y,I,M){var j=new Uint8Array(32);return wn(j,I,M),Wr(b,S,A,y,j)}function In(b,S,A,y,I,M){var j=new Uint8Array(32);return wn(j,I,M),go(b,S,A,y,j)}var bn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Aa(b,S,A,y){for(var I=new Int32Array(16),M=new Int32Array(16),j,oe,ye,Ke,De,Pt,ke,rt,ot,ct,lt,et,ft,nt,Ie,ze,xe,Be,Re,Ee,q,W,fe,re,ne,_,k=b[0],C=b[1],R=b[2],O=b[3],v=b[4],z=b[5],H=b[6],X=b[7],G=S[0],te=S[1],me=S[2],$e=S[3],Ue=S[4],Qe=S[5],pt=S[6],dt=S[7],Ot=0;y>=128;){for(Re=0;Re<16;Re++)Ee=8*Re+Ot,I[Re]=A[Ee+0]<<24|A[Ee+1]<<16|A[Ee+2]<<8|A[Ee+3],M[Re]=A[Ee+4]<<24|A[Ee+5]<<16|A[Ee+6]<<8|A[Ee+7];for(Re=0;Re<80;Re++)if(j=k,oe=C,ye=R,Ke=O,De=v,Pt=z,ke=H,rt=X,ot=G,ct=te,lt=me,et=$e,ft=Ue,nt=Qe,Ie=pt,ze=dt,q=X,W=dt,fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=(v>>>14|Ue<<32-14)^(v>>>18|Ue<<32-18)^(Ue>>>41-32|v<<32-(41-32)),W=(Ue>>>14|v<<32-14)^(Ue>>>18|v<<32-18)^(v>>>41-32|Ue<<32-(41-32)),fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,q=v&z^~v&H,W=Ue&Qe^~Ue&pt,fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,q=bn[Re*2],W=bn[Re*2+1],fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,q=I[Re%16],W=M[Re%16],fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,xe=ne&65535|_<<16,Be=fe&65535|re<<16,q=xe,W=Be,fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=(k>>>28|G<<32-28)^(G>>>34-32|k<<32-(34-32))^(G>>>39-32|k<<32-(39-32)),W=(G>>>28|k<<32-28)^(k>>>34-32|G<<32-(34-32))^(k>>>39-32|G<<32-(39-32)),fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,q=k&C^k&R^C&R,W=G&te^G&me^te&me,fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,rt=ne&65535|_<<16,ze=fe&65535|re<<16,q=Ke,W=et,fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=xe,W=Be,fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,Ke=ne&65535|_<<16,et=fe&65535|re<<16,C=j,R=oe,O=ye,v=Ke,z=De,H=Pt,X=ke,k=rt,te=ot,me=ct,$e=lt,Ue=et,Qe=ft,pt=nt,dt=Ie,G=ze,Re%16===15)for(Ee=0;Ee<16;Ee++)q=I[Ee],W=M[Ee],fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=I[(Ee+9)%16],W=M[(Ee+9)%16],fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,xe=I[(Ee+1)%16],Be=M[(Ee+1)%16],q=(xe>>>1|Be<<32-1)^(xe>>>8|Be<<32-8)^xe>>>7,W=(Be>>>1|xe<<32-1)^(Be>>>8|xe<<32-8)^(Be>>>7|xe<<32-7),fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,xe=I[(Ee+14)%16],Be=M[(Ee+14)%16],q=(xe>>>19|Be<<32-19)^(Be>>>61-32|xe<<32-(61-32))^xe>>>6,W=(Be>>>19|xe<<32-19)^(xe>>>61-32|Be<<32-(61-32))^(Be>>>6|xe<<32-6),fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,I[Ee]=ne&65535|_<<16,M[Ee]=fe&65535|re<<16;q=k,W=G,fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=b[0],W=S[0],fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,b[0]=k=ne&65535|_<<16,S[0]=G=fe&65535|re<<16,q=C,W=te,fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=b[1],W=S[1],fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,b[1]=C=ne&65535|_<<16,S[1]=te=fe&65535|re<<16,q=R,W=me,fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=b[2],W=S[2],fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,b[2]=R=ne&65535|_<<16,S[2]=me=fe&65535|re<<16,q=O,W=$e,fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=b[3],W=S[3],fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,b[3]=O=ne&65535|_<<16,S[3]=$e=fe&65535|re<<16,q=v,W=Ue,fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=b[4],W=S[4],fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,b[4]=v=ne&65535|_<<16,S[4]=Ue=fe&65535|re<<16,q=z,W=Qe,fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=b[5],W=S[5],fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,b[5]=z=ne&65535|_<<16,S[5]=Qe=fe&65535|re<<16,q=H,W=pt,fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=b[6],W=S[6],fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,b[6]=H=ne&65535|_<<16,S[6]=pt=fe&65535|re<<16,q=X,W=dt,fe=W&65535,re=W>>>16,ne=q&65535,_=q>>>16,q=b[7],W=S[7],fe+=W&65535,re+=W>>>16,ne+=q&65535,_+=q>>>16,re+=fe>>>16,ne+=re>>>16,_+=ne>>>16,b[7]=X=ne&65535|_<<16,S[7]=dt=fe&65535|re<<16,Ot+=128,y-=128}return y}function Xr(b,S,A){var y=new Int32Array(8),I=new Int32Array(8),M=new Uint8Array(256),j,oe=A;for(y[0]=1779033703,y[1]=3144134277,y[2]=1013904242,y[3]=2773480762,y[4]=1359893119,y[5]=2600822924,y[6]=528734635,y[7]=1541459225,I[0]=4089235720,I[1]=2227873595,I[2]=4271175723,I[3]=1595750129,I[4]=2917565137,I[5]=725511199,I[6]=4215389547,I[7]=327033209,Aa(y,I,S,A),A%=128,j=0;j<A;j++)M[j]=S[oe-A+j];for(M[A]=128,A=256-128*(A<112?1:0),M[A-9]=0,T(M,A-8,oe/536870912|0,oe<<3),Aa(y,I,M,A),j=0;j<8;j++)T(b,8*j,y[j],I[j]);return 0}function ur(b,S){var A=e(),y=e(),I=e(),M=e(),j=e(),oe=e(),ye=e(),Ke=e(),De=e();wr(A,b[1],b[0]),wr(De,S[1],S[0]),Ve(A,A,De),Wt(y,b[0],b[1]),Wt(De,S[0],S[1]),Ve(y,y,De),Ve(I,b[3],S[3]),Ve(I,I,d),Ve(M,b[2],S[2]),Wt(M,M,M),wr(j,y,A),wr(oe,M,I),Wt(ye,M,I),Wt(Ke,y,A),Ve(b[0],j,oe),Ve(b[1],Ke,ye),Ve(b[2],ye,oe),Ve(b[3],j,Ke)}function $n(b,S,A){var y;for(y=0;y<4;y++)Pn(b[y],S[y],A)}function zn(b,S){var A=e(),y=e(),I=e();Mi(I,S[2]),Ve(A,S[0],I),Ve(y,S[1],I),Fr(b,y),b[31]^=Fs(A)<<7}function wo(b,S,A){var y,I;for(Mt(b[0],o),Mt(b[1],a),Mt(b[2],a),Mt(b[3],o),I=255;I>=0;--I)y=A[I/8|0]>>(I&7)&1,$n(b,S,y),ur(S,b),ur(b,b),$n(b,S,y)}function un(b,S){var A=[e(),e(),e(),e()];Mt(A[0],m),Mt(A[1],w),Mt(A[2],a),Ve(A[3],m,w),wo(b,A,S)}function $(b,S,A){var y=new Uint8Array(64),I=[e(),e(),e(),e()],M;for(A||t(S,32),Xr(y,S,32),y[0]&=248,y[31]&=127,y[31]|=64,un(I,y),zn(b,I),M=0;M<32;M++)S[M+32]=b[M];return 0}var J=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function le(b,S){var A,y,I,M;for(y=63;y>=32;--y){for(A=0,I=y-32,M=y-12;I<M;++I)S[I]+=A-16*S[y]*J[I-(y-32)],A=Math.floor((S[I]+128)/256),S[I]-=A*256;S[I]+=A,S[y]=0}for(A=0,I=0;I<32;I++)S[I]+=A-(S[31]>>4)*J[I],A=S[I]>>8,S[I]&=255;for(I=0;I<32;I++)S[I]-=A*J[I];for(y=0;y<32;y++)S[y+1]+=S[y]>>8,b[y]=S[y]&255}function ve(b){var S=new Float64Array(64),A;for(A=0;A<64;A++)S[A]=b[A];for(A=0;A<64;A++)b[A]=0;le(b,S)}function je(b,S,A,y){var I=new Uint8Array(64),M=new Uint8Array(64),j=new Uint8Array(64),oe,ye,Ke=new Float64Array(64),De=[e(),e(),e(),e()];Xr(I,y,32),I[0]&=248,I[31]&=127,I[31]|=64;var Pt=A+64;for(oe=0;oe<A;oe++)b[64+oe]=S[oe];for(oe=0;oe<32;oe++)b[32+oe]=I[32+oe];for(Xr(j,b.subarray(32),A+32),ve(j),un(De,j),zn(b,De),oe=32;oe<64;oe++)b[oe]=y[oe];for(Xr(M,b,A+64),ve(M),oe=0;oe<64;oe++)Ke[oe]=0;for(oe=0;oe<32;oe++)Ke[oe]=j[oe];for(oe=0;oe<32;oe++)for(ye=0;ye<32;ye++)Ke[oe+ye]+=M[oe]*I[ye];return le(b.subarray(32),Ke),Pt}function or(b,S){var A=e(),y=e(),I=e(),M=e(),j=e(),oe=e(),ye=e();return Mt(b[2],a),er(b[1],S),Jr(I,b[1]),Ve(M,I,f),wr(I,I,b[2]),Wt(M,b[2],M),Jr(j,M),Jr(oe,j),Ve(ye,oe,j),Ve(A,ye,I),Ve(A,A,M),Ki(A,A),Ve(A,A,I),Ve(A,A,M),Ve(A,A,M),Ve(b[0],A,M),Jr(y,b[0]),Ve(y,y,M),qr(y,I)&&Ve(b[0],b[0],E),Jr(y,b[0]),Ve(y,y,M),qr(y,I)?-1:(Fs(b[0])===S[31]>>7&&wr(b[0],o,b[0]),Ve(b[3],b[0],b[1]),0)}function tt(b,S,A,y){var I,M=new Uint8Array(32),j=new Uint8Array(64),oe=[e(),e(),e(),e()],ye=[e(),e(),e(),e()];if(A<64||or(ye,y))return-1;for(I=0;I<A;I++)b[I]=S[I];for(I=0;I<32;I++)b[I+32]=y[I];if(Xr(j,b,A),ve(j),wo(oe,ye,j),un(ye,S.subarray(32)),ur(oe,ye),zn(M,oe),A-=64,he(S,0,M,0)){for(I=0;I<A;I++)b[I]=0;return-1}for(I=0;I<A;I++)b[I]=S[I+64];return A}var ut=32,qe=24,yt=32,ht=16,Ar=32,bo=32,Bs=32,vo=32,Rs=32,Fu=qe,$i=yt,dh=ht,si=64,zi=32,_o=64,Bu=32,Ru=64;r.lowlevel={crypto_core_hsalsa20:be,crypto_stream_xor:Me,crypto_stream:_e,crypto_stream_salsa20_xor:Y,crypto_stream_salsa20:ge,crypto_onetimeauth:Ut,crypto_onetimeauth_verify:Rt,crypto_verify_16:N,crypto_verify_32:he,crypto_secretbox:qt,crypto_secretbox_open:hr,crypto_scalarmult:es,crypto_scalarmult_base:Br,crypto_box_beforenm:wn,crypto_box_afternm:Wr,crypto_box:Ea,crypto_box_open:In,crypto_box_keypair:ji,crypto_hash:Xr,crypto_sign:je,crypto_sign_keypair:$,crypto_sign_open:tt,crypto_secretbox_KEYBYTES:ut,crypto_secretbox_NONCEBYTES:qe,crypto_secretbox_ZEROBYTES:yt,crypto_secretbox_BOXZEROBYTES:ht,crypto_scalarmult_BYTES:Ar,crypto_scalarmult_SCALARBYTES:bo,crypto_box_PUBLICKEYBYTES:Bs,crypto_box_SECRETKEYBYTES:vo,crypto_box_BEFORENMBYTES:Rs,crypto_box_NONCEBYTES:Fu,crypto_box_ZEROBYTES:$i,crypto_box_BOXZEROBYTES:dh,crypto_sign_BYTES:si,crypto_sign_PUBLICKEYBYTES:zi,crypto_sign_SECRETKEYBYTES:_o,crypto_sign_SEEDBYTES:Bu,crypto_hash_BYTES:Ru,gf:e,D:f,L:J,pack25519:Fr,unpack25519:er,M:Ve,A:Wt,S:Jr,Z:wr,pow2523:Ki,add:ur,set25519:Mt,modL:le,scalarmult:wo,scalarbase:un};function df(b,S){if(b.length!==ut)throw new Error("bad key size");if(S.length!==qe)throw new Error("bad nonce size")}function Ou(b,S){if(b.length!==Bs)throw new Error("bad public key size");if(S.length!==vo)throw new Error("bad secret key size")}function cn(){for(var b=0;b<arguments.length;b++)if(!(arguments[b]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Sa(b){for(var S=0;S<b.length;S++)b[S]=0}r.randomBytes=function(b){var S=new Uint8Array(b);return t(S,b),S},r.secretbox=function(b,S,A){cn(b,S,A),df(A,S);for(var y=new Uint8Array(yt+b.length),I=new Uint8Array(y.length),M=0;M<b.length;M++)y[M+yt]=b[M];return qt(I,y,y.length,S,A),I.subarray(ht)},r.secretbox.open=function(b,S,A){cn(b,S,A),df(A,S);for(var y=new Uint8Array(ht+b.length),I=new Uint8Array(y.length),M=0;M<b.length;M++)y[M+ht]=b[M];return y.length<32||hr(I,y,y.length,S,A)!==0?null:I.subarray(yt)},r.secretbox.keyLength=ut,r.secretbox.nonceLength=qe,r.secretbox.overheadLength=ht,r.scalarMult=function(b,S){if(cn(b,S),b.length!==bo)throw new Error("bad n size");if(S.length!==Ar)throw new Error("bad p size");var A=new Uint8Array(Ar);return es(A,b,S),A},r.scalarMult.base=function(b){if(cn(b),b.length!==bo)throw new Error("bad n size");var S=new Uint8Array(Ar);return Br(S,b),S},r.scalarMult.scalarLength=bo,r.scalarMult.groupElementLength=Ar,r.box=function(b,S,A,y){var I=r.box.before(A,y);return r.secretbox(b,S,I)},r.box.before=function(b,S){cn(b,S),Ou(b,S);var A=new Uint8Array(Rs);return wn(A,b,S),A},r.box.after=r.secretbox,r.box.open=function(b,S,A,y){var I=r.box.before(A,y);return r.secretbox.open(b,S,I)},r.box.open.after=r.secretbox.open,r.box.keyPair=function(){var b=new Uint8Array(Bs),S=new Uint8Array(vo);return ji(b,S),{publicKey:b,secretKey:S}},r.box.keyPair.fromSecretKey=function(b){if(cn(b),b.length!==vo)throw new Error("bad secret key size");var S=new Uint8Array(Bs);return Br(S,b),{publicKey:S,secretKey:new Uint8Array(b)}},r.box.publicKeyLength=Bs,r.box.secretKeyLength=vo,r.box.sharedKeyLength=Rs,r.box.nonceLength=Fu,r.box.overheadLength=r.secretbox.overheadLength,r.sign=function(b,S){if(cn(b,S),S.length!==_o)throw new Error("bad secret key size");var A=new Uint8Array(si+b.length);return je(A,b,b.length,S),A},r.sign.open=function(b,S){if(cn(b,S),S.length!==zi)throw new Error("bad public key size");var A=new Uint8Array(b.length),y=tt(A,b,b.length,S);if(y<0)return null;for(var I=new Uint8Array(y),M=0;M<I.length;M++)I[M]=A[M];return I},r.sign.detached=function(b,S){for(var A=r.sign(b,S),y=new Uint8Array(si),I=0;I<y.length;I++)y[I]=A[I];return y},r.sign.detached.verify=function(b,S,A){if(cn(b,S,A),S.length!==si)throw new Error("bad signature size");if(A.length!==zi)throw new Error("bad public key size");var y=new Uint8Array(si+b.length),I=new Uint8Array(si+b.length),M;for(M=0;M<si;M++)y[M]=S[M];for(M=0;M<b.length;M++)y[M+si]=b[M];return tt(I,y,y.length,A)>=0},r.sign.keyPair=function(){var b=new Uint8Array(zi),S=new Uint8Array(_o);return $(b,S),{publicKey:b,secretKey:S}},r.sign.keyPair.fromSecretKey=function(b){if(cn(b),b.length!==_o)throw new Error("bad secret key size");for(var S=new Uint8Array(zi),A=0;A<S.length;A++)S[A]=b[32+A];return{publicKey:S,secretKey:new Uint8Array(b)}},r.sign.keyPair.fromSeed=function(b){if(cn(b),b.length!==Bu)throw new Error("bad seed size");for(var S=new Uint8Array(zi),A=new Uint8Array(_o),y=0;y<32;y++)A[y]=b[y];return $(S,A,!0),{publicKey:S,secretKey:A}},r.sign.publicKeyLength=zi,r.sign.secretKeyLength=_o,r.sign.seedLength=Bu,r.sign.signatureLength=si,r.hash=function(b){cn(b);var S=new Uint8Array(Ru);return Xr(S,b,b.length),S},r.hash.hashLength=Ru,r.verify=function(b,S){return cn(b,S),b.length===0||S.length===0||b.length!==S.length?!1:F(b,0,S,0,b.length)===0},r.setPRNG=function(b){t=b},function(){var b=typeof self<"u"?self.crypto||self.msCrypto:null;if(b&&b.getRandomValues){var S=65536;r.setPRNG(function(A,y){var I,M=new Uint8Array(y);for(I=0;I<y;I+=S)b.getRandomValues(M.subarray(I,I+Math.min(y-I,S)));for(I=0;I<y;I++)A[I]=M[I];Sa(M)})}else typeof Wu<"u"&&(b=e_(),b&&b.randomBytes&&r.setPRNG(function(A,y){var I,M=b.randomBytes(y);for(I=0;I<y;I++)A[I]=M[I];Sa(M)}))}()})(typeof Jy<"u"&&Jy.exports?Jy.exports:self.nacl=self.nacl||{})});var h3=ue((rme,l3)=>{h();p();l3.exports=Q_;var f3=128,wH=127,bH=~wH,vH=Math.pow(2,31);function Q_(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw Q_.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=vH;)e[t++]=r&255|f3,r/=128;for(;r&bH;)e[t++]=r&255|f3,r>>>=7;return e[t]=r|0,Q_.bytes=t-n+1,e}});var m3=ue((ome,d3)=>{h();p();d3.exports=Z_;var _H=128,p3=127;function Z_(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c||i>49)throw Z_.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&p3)<<i:(a&p3)*Math.pow(2,i),i+=7}while(a>=_H);return Z_.bytes=o-n,t}});var g3=ue((ume,y3)=>{h();p();var xH=Math.pow(2,7),EH=Math.pow(2,14),AH=Math.pow(2,21),SH=Math.pow(2,28),DH=Math.pow(2,35),CH=Math.pow(2,42),PH=Math.pow(2,49),IH=Math.pow(2,56),TH=Math.pow(2,63);y3.exports=function(r){return r<xH?1:r<EH?2:r<AH?3:r<SH?4:r<DH?5:r<CH?6:r<PH?7:r<IH?8:r<TH?9:10}});var Up=ue((lme,w3)=>{h();p();w3.exports={encode:h3(),decode:m3(),encodingLength:g3()}});var zo=ue((jme,C3)=>{"use strict";h();p();function D3(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function HH(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return D3(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),D3(new i,t)}}C3.exports=HH});var K3=ue((vye,M3)=>{h();p();var Bl=1e3,Rl=Bl*60,Ol=Rl*60,Bc=Ol*24,nG=Bc*7,iG=Bc*365.25;M3.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return oG(r);if(t==="number"&&isFinite(r))return e.long?aG(r):sG(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function oG(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*iG;case"weeks":case"week":case"w":return t*nG;case"days":case"day":case"d":return t*Bc;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ol;case"minutes":case"minute":case"mins":case"min":case"m":return t*Rl;case"seconds":case"second":case"secs":case"sec":case"s":return t*Bl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function sG(r){var e=Math.abs(r);return e>=Bc?Math.round(r/Bc)+"d":e>=Ol?Math.round(r/Ol)+"h":e>=Rl?Math.round(r/Rl)+"m":e>=Bl?Math.round(r/Bl)+"s":r+"ms"}function aG(r){var e=Math.abs(r);return e>=Bc?hg(r,e,Bc,"day"):e>=Ol?hg(r,e,Ol,"hour"):e>=Rl?hg(r,e,Rl,"minute"):e>=Bl?hg(r,e,Bl,"second"):r+" ms"}function hg(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var $3=ue((Eye,j3)=>{h();p();function uG(r){t.debug=t,t.default=t,t.coerce=f,t.disable=o,t.enable=i,t.enabled=a,t.humanize=K3(),t.destroy=d,Object.keys(r).forEach(m=>{t[m]=r[m]}),t.names=[],t.skips=[],t.formatters={};function e(m){let w=0;for(let E=0;E<m.length;E++)w=(w<<5)-w+m.charCodeAt(E),w|=0;return t.colors[Math.abs(w)%t.colors.length]}t.selectColor=e;function t(m){let w,E=null,T,F;function N(...he){if(!N.enabled)return;let de=N,Pe=Number(new Date),ie=Pe-(w||Pe);de.diff=ie,de.prev=w,de.curr=Pe,w=Pe,he[0]=t.coerce(he[0]),typeof he[0]!="string"&&he.unshift("%O");let be=0;he[0]=he[0].replace(/%([a-zA-Z%])/g,(Y,ge)=>{if(Y==="%%")return"%";be++;let _e=t.formatters[ge];if(typeof _e=="function"){let Me=he[be];Y=_e.call(de,Me),he.splice(be,1),be--}return Y}),t.formatArgs.call(de,he),(de.log||t.log).apply(de,he)}return N.namespace=m,N.useColors=t.useColors(),N.color=t.selectColor(m),N.extend=n,N.destroy=t.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(T!==t.namespaces&&(T=t.namespaces,F=t.enabled(m)),F),set:he=>{E=he}}),typeof t.init=="function"&&t.init(N),N}function n(m,w){let E=t(this.namespace+(typeof w>"u"?":":w)+m);return E.log=this.log,E}function i(m){t.save(m),t.namespaces=m,t.names=[],t.skips=[];let w,E=(typeof m=="string"?m:"").split(/[\s,]+/),T=E.length;for(w=0;w<T;w++)!E[w]||(m=E[w].replace(/\*/g,".*?"),m[0]==="-"?t.skips.push(new RegExp("^"+m.slice(1)+"$")):t.names.push(new RegExp("^"+m+"$")))}function o(){let m=[...t.names.map(c),...t.skips.map(c).map(w=>"-"+w)].join(",");return t.enable(""),m}function a(m){if(m[m.length-1]==="*")return!0;let w,E;for(w=0,E=t.skips.length;w<E;w++)if(t.skips[w].test(m))return!1;for(w=0,E=t.names.length;w<E;w++)if(t.names[w].test(m))return!0;return!1}function c(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function f(m){return m instanceof Error?m.stack||m.message:m}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}j3.exports=uG});var qo=ue((Fi,pg)=>{h();p();Fi.formatArgs=fG;Fi.save=lG;Fi.load=hG;Fi.useColors=cG;Fi.storage=pG();Fi.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Fi.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function cG(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function fG(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+pg.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Fi.log=console.debug||console.log||(()=>{});function lG(r){try{r?Fi.storage.setItem("debug",r):Fi.storage.removeItem("debug")}catch{}}function hG(){let r;try{r=Fi.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function pG(){try{return localStorage}catch{}}pg.exports=$3()(Fi);var{formatters:dG}=pg.exports;dG.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var e6=ue((dge,Z3)=>{"use strict";h();p();Z3.exports=xG;function xG(r,e){for(var t=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)t[n++]=arguments[i++];return new Promise(function(c,f){t[n]=function(m){if(o)if(o=!1,m)f(m);else{for(var w=new Array(arguments.length-1),E=0;E<w.length;)w[E++]=arguments[E];c.apply(null,w)}};try{r.apply(e||null,t)}catch(d){o&&(o=!1,f(d))}})}});var i6=ue(n6=>{"use strict";h();p();var wg=n6;wg.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Ll=new Array(64),r6=new Array(123);for(Wo=0;Wo<64;)r6[Ll[Wo]=Wo<26?Wo+65:Wo<52?Wo+71:Wo<62?Wo-4:Wo-59|43]=Wo++;var Wo;wg.encode=function(e,t,n){for(var i=null,o=[],a=0,c=0,f;t<n;){var d=e[t++];switch(c){case 0:o[a++]=Ll[d>>2],f=(d&3)<<4,c=1;break;case 1:o[a++]=Ll[f|d>>4],f=(d&15)<<2,c=2;break;case 2:o[a++]=Ll[f|d>>6],o[a++]=Ll[d&63],c=0;break}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=Ll[f],o[a++]=61,c===1&&(o[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var t6="invalid encoding";wg.decode=function(e,t,n){for(var i=n,o=0,a,c=0;c<e.length;){var f=e.charCodeAt(c++);if(f===61&&o>1)break;if((f=r6[f])===void 0)throw Error(t6);switch(o){case 0:a=f,o=1;break;case 1:t[n++]=a<<2|(f&48)>>4,a=f,o=2;break;case 2:t[n++]=(a&15)<<4|(f&60)>>2,a=f,o=3;break;case 3:t[n++]=(a&3)<<6|f,o=0;break}}if(o===1)throw Error(t6);return n-i};wg.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var s6=ue((vge,o6)=>{"use strict";h();p();o6.exports=bg;function bg(){this._listeners={}}bg.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};bg.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this};bg.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}});var p6=ue((Ege,h6)=>{"use strict";h();p();h6.exports=a6(a6);function a6(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(f,d,m){e[0]=f,d[m]=t[0],d[m+1]=t[1],d[m+2]=t[2],d[m+3]=t[3]}function o(f,d,m){e[0]=f,d[m]=t[3],d[m+1]=t[2],d[m+2]=t[1],d[m+3]=t[0]}r.writeFloatLE=n?i:o,r.writeFloatBE=n?o:i;function a(f,d){return t[0]=f[d],t[1]=f[d+1],t[2]=f[d+2],t[3]=f[d+3],e[0]}function c(f,d){return t[3]=f[d],t[2]=f[d+1],t[1]=f[d+2],t[0]=f[d+3],e[0]}r.readFloatLE=n?a:c,r.readFloatBE=n?c:a}():function(){function e(n,i,o,a){var c=i<0?1:0;if(c&&(i=-i),i===0)n(1/i>0?0:2147483648,o,a);else if(isNaN(i))n(2143289344,o,a);else if(i>34028234663852886e22)n((c<<31|2139095040)>>>0,o,a);else if(i<11754943508222875e-54)n((c<<31|Math.round(i/1401298464324817e-60))>>>0,o,a);else{var f=Math.floor(Math.log(i)/Math.LN2),d=Math.round(i*Math.pow(2,-f)*8388608)&8388607;n((c<<31|f+127<<23|d)>>>0,o,a)}}r.writeFloatLE=e.bind(null,u6),r.writeFloatBE=e.bind(null,c6);function t(n,i,o){var a=n(i,o),c=(a>>31)*2+1,f=a>>>23&255,d=a&8388607;return f===255?d?NaN:c*(1/0):f===0?c*1401298464324817e-60*d:c*Math.pow(2,f-150)*(d+8388608)}r.readFloatLE=t.bind(null,f6),r.readFloatBE=t.bind(null,l6)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(f,d,m){e[0]=f,d[m]=t[0],d[m+1]=t[1],d[m+2]=t[2],d[m+3]=t[3],d[m+4]=t[4],d[m+5]=t[5],d[m+6]=t[6],d[m+7]=t[7]}function o(f,d,m){e[0]=f,d[m]=t[7],d[m+1]=t[6],d[m+2]=t[5],d[m+3]=t[4],d[m+4]=t[3],d[m+5]=t[2],d[m+6]=t[1],d[m+7]=t[0]}r.writeDoubleLE=n?i:o,r.writeDoubleBE=n?o:i;function a(f,d){return t[0]=f[d],t[1]=f[d+1],t[2]=f[d+2],t[3]=f[d+3],t[4]=f[d+4],t[5]=f[d+5],t[6]=f[d+6],t[7]=f[d+7],e[0]}function c(f,d){return t[7]=f[d],t[6]=f[d+1],t[5]=f[d+2],t[4]=f[d+3],t[3]=f[d+4],t[2]=f[d+5],t[1]=f[d+6],t[0]=f[d+7],e[0]}r.readDoubleLE=n?a:c,r.readDoubleBE=n?c:a}():function(){function e(n,i,o,a,c,f){var d=a<0?1:0;if(d&&(a=-a),a===0)n(0,c,f+i),n(1/a>0?0:2147483648,c,f+o);else if(isNaN(a))n(0,c,f+i),n(2146959360,c,f+o);else if(a>17976931348623157e292)n(0,c,f+i),n((d<<31|2146435072)>>>0,c,f+o);else{var m;if(a<22250738585072014e-324)m=a/5e-324,n(m>>>0,c,f+i),n((d<<31|m/4294967296)>>>0,c,f+o);else{var w=Math.floor(Math.log(a)/Math.LN2);w===1024&&(w=1023),m=a*Math.pow(2,-w),n(m*4503599627370496>>>0,c,f+i),n((d<<31|w+1023<<20|m*1048576&1048575)>>>0,c,f+o)}}}r.writeDoubleLE=e.bind(null,u6,0,4),r.writeDoubleBE=e.bind(null,c6,4,0);function t(n,i,o,a,c){var f=n(a,c+i),d=n(a,c+o),m=(d>>31)*2+1,w=d>>>20&2047,E=4294967296*(d&1048575)+f;return w===2047?E?NaN:m*(1/0):w===0?m*5e-324*E:m*Math.pow(2,w-1075)*(E+4503599627370496)}r.readDoubleLE=t.bind(null,f6,0,4),r.readDoubleBE=t.bind(null,l6,4,0)}(),r}function u6(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function c6(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function f6(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function l6(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var d6=ue((exports,module)=>{"use strict";h();p();module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var y6=ue(m6=>{"use strict";h();p();var hx=m6;hx.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};hx.read=function(e,t,n){var i=n-t;if(i<1)return"";for(var o=null,a=[],c=0,f;t<n;)f=e[t++],f<128?a[c++]=f:f>191&&f<224?a[c++]=(f&31)<<6|e[t++]&63:f>239&&f<365?(f=((f&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,a[c++]=55296+(f>>10),a[c++]=56320+(f&1023)):a[c++]=(f&15)<<12|(e[t++]&63)<<6|e[t++]&63,c>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),c=0);return o?(c&&o.push(String.fromCharCode.apply(String,a.slice(0,c))),o.join("")):String.fromCharCode.apply(String,a.slice(0,c))};hx.write=function(e,t,n){for(var i=n,o,a,c=0;c<e.length;++c)o=e.charCodeAt(c),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&((a=e.charCodeAt(c+1))&64512)===56320?(o=65536+((o&1023)<<10)+(a&1023),++c,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128);return n-i}});var w6=ue((kge,g6)=>{"use strict";h();p();g6.exports=EG;function EG(r,e,t){var n=t||8192,i=n>>>1,o=null,a=n;return function(f){if(f<1||f>i)return r(f);a+f>n&&(o=r(n),a=0);var d=e.call(o,a,a+=f);return a&7&&(a=(a|7)+1),d}}});var v6=ue((Rge,b6)=>{"use strict";h();p();b6.exports=sn;var Hp=cu();function sn(r,e){this.lo=r>>>0,this.hi=e>>>0}var Oc=sn.zero=new sn(0,0);Oc.toNumber=function(){return 0};Oc.zzEncode=Oc.zzDecode=function(){return this};Oc.length=function(){return 1};var AG=sn.zeroHash="\0\0\0\0\0\0\0\0";sn.fromNumber=function(e){if(e===0)return Oc;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new sn(n,i)};sn.from=function(e){if(typeof e=="number")return sn.fromNumber(e);if(Hp.isString(e))if(Hp.Long)e=Hp.Long.fromString(e);else return sn.fromNumber(parseInt(e,10));return e.low||e.high?new sn(e.low>>>0,e.high>>>0):Oc};sn.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};sn.prototype.toLong=function(e){return Hp.Long?new Hp.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var uu=String.prototype.charCodeAt;sn.fromHash=function(e){return e===AG?Oc:new sn((uu.call(e,0)|uu.call(e,1)<<8|uu.call(e,2)<<16|uu.call(e,3)<<24)>>>0,(uu.call(e,4)|uu.call(e,5)<<8|uu.call(e,6)<<16|uu.call(e,7)<<24)>>>0)};sn.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};sn.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};sn.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};sn.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var cu=ue(px=>{"use strict";h();p();var Xe=px;Xe.asPromise=e6();Xe.base64=i6();Xe.EventEmitter=s6();Xe.float=p6();Xe.inquire=d6();Xe.utf8=y6();Xe.pool=w6();Xe.LongBits=v6();Xe.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);Xe.global=Xe.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||px;Xe.emptyArray=Object.freeze?Object.freeze([]):[];Xe.emptyObject=Object.freeze?Object.freeze({}):{};Xe.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Xe.isString=function(e){return typeof e=="string"||e instanceof String};Xe.isObject=function(e){return e&&typeof e=="object"};Xe.isset=Xe.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};Xe.Buffer=function(){try{var r=Xe.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();Xe._Buffer_from=null;Xe._Buffer_allocUnsafe=null;Xe.newBuffer=function(e){return typeof e=="number"?Xe.Buffer?Xe._Buffer_allocUnsafe(e):new Xe.Array(e):Xe.Buffer?Xe._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};Xe.Array=typeof Uint8Array<"u"?Uint8Array:Array;Xe.Long=Xe.global.dcodeIO&&Xe.global.dcodeIO.Long||Xe.global.Long||Xe.inquire("long");Xe.key2Re=/^true|false|0|1$/;Xe.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Xe.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Xe.longToHash=function(e){return e?Xe.LongBits.from(e).toHash():Xe.LongBits.zeroHash};Xe.longFromHash=function(e,t){var n=Xe.LongBits.fromHash(e);return Xe.Long?Xe.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function _6(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}Xe.merge=_6;Xe.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function x6(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&_6(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}Xe.newError=x6;Xe.ProtocolError=x6("ProtocolError");Xe.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(t[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};Xe.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};Xe.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Xe._configure=function(){var r=Xe.Buffer;if(!r){Xe._Buffer_from=Xe._Buffer_allocUnsafe=null;return}Xe._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},Xe._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var vx=ue((Kge,D6)=>{"use strict";h();p();D6.exports=Nt;var lo=cu(),dx,vg=lo.LongBits,E6=lo.base64,A6=lo.utf8;function Gp(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function yx(){}function SG(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function Nt(){this.len=0,this.head=new Gp(yx,0,0),this.tail=this.head,this.states=null}var S6=function(){return lo.Buffer?function(){return(Nt.create=function(){return new dx})()}:function(){return new Nt}};Nt.create=S6();Nt.alloc=function(e){return new lo.Array(e)};lo.Array!==Array&&(Nt.alloc=lo.pool(Nt.alloc,lo.Array.prototype.subarray));Nt.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Gp(e,t,n),this.len+=t,this};function gx(r,e,t){e[t]=r&255}function DG(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function wx(r,e){this.len=r,this.next=void 0,this.val=e}wx.prototype=Object.create(Gp.prototype);wx.prototype.fn=DG;Nt.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new wx((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Nt.prototype.int32=function(e){return e<0?this._push(bx,10,vg.fromNumber(e)):this.uint32(e)};Nt.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function bx(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}Nt.prototype.uint64=function(e){var t=vg.from(e);return this._push(bx,t.length(),t)};Nt.prototype.int64=Nt.prototype.uint64;Nt.prototype.sint64=function(e){var t=vg.from(e).zzEncode();return this._push(bx,t.length(),t)};Nt.prototype.bool=function(e){return this._push(gx,1,e?1:0)};function mx(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}Nt.prototype.fixed32=function(e){return this._push(mx,4,e>>>0)};Nt.prototype.sfixed32=Nt.prototype.fixed32;Nt.prototype.fixed64=function(e){var t=vg.from(e);return this._push(mx,4,t.lo)._push(mx,4,t.hi)};Nt.prototype.sfixed64=Nt.prototype.fixed64;Nt.prototype.float=function(e){return this._push(lo.float.writeFloatLE,4,e)};Nt.prototype.double=function(e){return this._push(lo.float.writeDoubleLE,8,e)};var CG=lo.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};Nt.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(gx,1,0);if(lo.isString(e)){var n=Nt.alloc(t=E6.length(e));E6.decode(e,n,0),e=n}return this.uint32(t)._push(CG,t,e)};Nt.prototype.string=function(e){var t=A6.length(e);return t?this.uint32(t)._push(A6.write,t,e):this._push(gx,1,0)};Nt.prototype.fork=function(){return this.states=new SG(this),this.head=this.tail=new Gp(yx,0,0),this.len=0,this};Nt.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Gp(yx,0,0),this.len=0),this};Nt.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};Nt.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};Nt._configure=function(r){dx=r,Nt.create=S6(),dx._configure()}});var I6=ue((zge,P6)=>{"use strict";h();p();P6.exports=xs;var C6=vx();(xs.prototype=Object.create(C6.prototype)).constructor=xs;var fu=cu();function xs(){C6.call(this)}xs._configure=function(){xs.alloc=fu._Buffer_allocUnsafe,xs.writeBytesBuffer=fu.Buffer&&fu.Buffer.prototype instanceof Uint8Array&&fu.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};xs.prototype.bytes=function(e){fu.isString(e)&&(e=fu._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(xs.writeBytesBuffer,t,e),this};function PG(r,e,t){r.length<40?fu.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}xs.prototype.string=function(e){var t=fu.Buffer.byteLength(e);return this.uint32(t),t&&this._push(PG,t,e),this};xs._configure()});var Ex=ue((Vge,R6)=>{"use strict";h();p();R6.exports=Nr;var Es=cu(),xx,F6=Es.LongBits,IG=Es.utf8;function Vo(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function Nr(r){this.buf=r,this.pos=0,this.len=r.length}var T6=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Nr(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Nr(e);throw Error("illegal buffer")},B6=function(){return Es.Buffer?function(t){return(Nr.create=function(i){return Es.Buffer.isBuffer(i)?new xx(i):T6(i)})(t)}:T6};Nr.create=B6();Nr.prototype._slice=Es.Array.prototype.subarray||Es.Array.prototype.slice;Nr.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Vo(this,10);return e}}();Nr.prototype.int32=function(){return this.uint32()|0};Nr.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function _x(){var r=new F6(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Vo(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw Vo(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}Nr.prototype.bool=function(){return this.uint32()!==0};function _g(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}Nr.prototype.fixed32=function(){if(this.pos+4>this.len)throw Vo(this,4);return _g(this.buf,this.pos+=4)};Nr.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Vo(this,4);return _g(this.buf,this.pos+=4)|0};function k6(){if(this.pos+8>this.len)throw Vo(this,8);return new F6(_g(this.buf,this.pos+=4),_g(this.buf,this.pos+=4))}Nr.prototype.float=function(){if(this.pos+4>this.len)throw Vo(this,4);var e=Es.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Nr.prototype.double=function(){if(this.pos+8>this.len)throw Vo(this,4);var e=Es.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Nr.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw Vo(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};Nr.prototype.string=function(){var e=this.bytes();return IG.read(e,0,e.length)};Nr.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Vo(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Vo(this);while(this.buf[this.pos++]&128);return this};Nr.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};Nr._configure=function(r){xx=r,Nr.create=B6(),xx._configure();var e=Es.Long?"toLong":"toNumber";Es.merge(Nr.prototype,{int64:function(){return _x.call(this)[e](!1)},uint64:function(){return _x.call(this)[e](!0)},sint64:function(){return _x.call(this).zzDecode()[e](!1)},fixed64:function(){return k6.call(this)[e](!0)},sfixed64:function(){return k6.call(this)[e](!1)}})}});var N6=ue((Yge,U6)=>{"use strict";h();p();U6.exports=Lc;var L6=Ex();(Lc.prototype=Object.create(L6.prototype)).constructor=Lc;var O6=cu();function Lc(r){L6.call(this,r)}Lc._configure=function(){O6.Buffer&&(Lc.prototype._slice=O6.Buffer.prototype.slice)};Lc.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Lc._configure()});var K6=ue((Qge,M6)=>{"use strict";h();p();M6.exports=Yp;var Ax=cu();(Yp.prototype=Object.create(Ax.EventEmitter.prototype)).constructor=Yp;function Yp(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");Ax.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}Yp.prototype.rpcCall=function r(e,t,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return Ax.asPromise(r,a,e,t,n,i);if(!a.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return a.rpcImpl(e,t[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(f,d){if(f)return a.emit("error",f,e),o(f);if(d===null){a.end(!0);return}if(!(d instanceof n))try{d=n[a.responseDelimited?"decodeDelimited":"decode"](d)}catch(m){return a.emit("error",m,e),o(m)}return a.emit("data",d,e),o(null,d)})}catch(c){a.emit("error",c,e),setTimeout(function(){o(c)},0);return}};Yp.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var $6=ue(j6=>{"use strict";h();p();var TG=j6;TG.Service=K6()});var q6=ue((i0e,z6)=>{"use strict";h();p();z6.exports={}});var H6=ue(V6=>{"use strict";h();p();var ri=V6;ri.build="minimal";ri.Writer=vx();ri.BufferWriter=I6();ri.Reader=Ex();ri.BufferReader=N6();ri.util=cu();ri.rpc=$6();ri.roots=q6();ri.configure=W6;function W6(){ri.util._configure(),ri.Writer._configure(ri.BufferWriter),ri.Reader._configure(ri.BufferReader)}W6()});var lu=ue((f0e,G6)=>{"use strict";h();p();G6.exports=H6()});var Q6=ue((Sx,X6)=>{"use strict";h();p();Object.defineProperty(Sx,"__esModule",{value:!0});Eg.BASE=2166136261;function Eg(r,e=Eg.BASE){let t=r.length;for(let n=0;n<t;n++)e^=r.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}Sx.default=Eg;X6.exports=Eg});var CT=ue((Rbe,Rg)=>{"use strict";h();p();Rg.exports=nY;Rg.exports.format=ST;Rg.exports.parse=DT;var eY=/\B(?=(\d{3})+(?!\d))/g,tY=/(?:\.0*|(\.[^0]+)0+)$/,mu={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},rY=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function nY(r,e){return typeof r=="string"?DT(r):typeof r=="number"?ST(r,e):null}function ST(r,e){if(!Number.isFinite(r))return null;var t=Math.abs(r),n=e&&e.thousandsSeparator||"",i=e&&e.unitSeparator||"",o=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,a=Boolean(e&&e.fixedDecimals),c=e&&e.unit||"";(!c||!mu[c.toLowerCase()])&&(t>=mu.pb?c="PB":t>=mu.tb?c="TB":t>=mu.gb?c="GB":t>=mu.mb?c="MB":t>=mu.kb?c="KB":c="B");var f=r/mu[c.toLowerCase()],d=f.toFixed(o);return a||(d=d.replace(tY,"$1")),n&&(d=d.split(".").map(function(m,w){return w===0?m.replace(eY,n):m}).join(".")),d+i+c}function DT(r){if(typeof r=="number"&&!isNaN(r))return r;if(typeof r!="string")return null;var e=rY.exec(r),t,n="b";return e?(t=parseFloat(e[1]),n=e[4].toLowerCase()):(t=parseInt(r,10),n="b"),isNaN(t)?null:Math.floor(mu[n]*t)}});var IT=ue((Ube,PT)=>{"use strict";h();p();PT.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}});var OT=ue((BT,RT)=>{"use strict";h();p();var Og=IT(),{hasOwnProperty:kT}=Object.prototype,{propertyIsEnumerable:iY}=Object,Vl=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),oY=BT,TT={concatArrays:!1,ignoreUndefined:!1},Lg=r=>{let e=[];for(let t in r)kT.call(r,t)&&e.push(t);if(Object.getOwnPropertySymbols){let t=Object.getOwnPropertySymbols(r);for(let n of t)iY.call(r,n)&&e.push(n)}return e};function Hl(r){return Array.isArray(r)?sY(r):Og(r)?aY(r):r}function sY(r){let e=r.slice(0,0);return Lg(r).forEach(t=>{Vl(e,t,Hl(r[t]))}),e}function aY(r){let e=Object.getPrototypeOf(r)===null?Object.create(null):{};return Lg(r).forEach(t=>{Vl(e,t,Hl(r[t]))}),e}var FT=(r,e,t,n)=>(t.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in r&&r[i]!==Object.getPrototypeOf(r)?Vl(r,i,qx(r[i],e[i],n)):Vl(r,i,Hl(e[i])))}),r),uY=(r,e,t)=>{let n=r.slice(0,0),i=0;return[r,e].forEach(o=>{let a=[];for(let c=0;c<o.length;c++)!kT.call(o,c)||(a.push(String(c)),o===r?Vl(n,i++,o[c]):Vl(n,i++,Hl(o[c])));n=FT(n,o,Lg(o).filter(c=>!a.includes(c)),t)}),n};function qx(r,e,t){return t.concatArrays&&Array.isArray(r)&&Array.isArray(e)?uY(r,e,t):!Og(e)||!Og(r)?Hl(e):FT(r,e,Lg(e),t)}RT.exports=function(...r){let e=qx(Hl(TT),this!==oY&&this||{},TT),t={_:{}};for(let n of r)if(n!==void 0){if(!Og(n))throw new TypeError("`"+n+"` is not an Option Object");t=qx(t,{_:n},e)}return t._}});var HT=ue((Cve,Hx)=>{"use strict";h();p();var pY=Object.prototype.hasOwnProperty,jn="~";function rd(){}Object.create&&(rd.prototype=Object.create(null),new rd().__proto__||(jn=!1));function dY(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function VT(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new dY(t,n||r,i),a=jn?jn+e:e;return r._events[a]?r._events[a].fn?r._events[a]=[r._events[a],o]:r._events[a].push(o):(r._events[a]=o,r._eventsCount++),r}function jg(r,e){--r._eventsCount===0?r._events=new rd:delete r._events[e]}function Dn(){this._events=new rd,this._eventsCount=0}Dn.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)pY.call(t,n)&&e.push(jn?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Dn.prototype.listeners=function(e){var t=jn?jn+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a};Dn.prototype.listenerCount=function(e){var t=jn?jn+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Dn.prototype.emit=function(e,t,n,i,o,a){var c=jn?jn+e:e;if(!this._events[c])return!1;var f=this._events[c],d=arguments.length,m,w;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),d){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,n),!0;case 4:return f.fn.call(f.context,t,n,i),!0;case 5:return f.fn.call(f.context,t,n,i,o),!0;case 6:return f.fn.call(f.context,t,n,i,o,a),!0}for(w=1,m=new Array(d-1);w<d;w++)m[w-1]=arguments[w];f.fn.apply(f.context,m)}else{var E=f.length,T;for(w=0;w<E;w++)switch(f[w].once&&this.removeListener(e,f[w].fn,void 0,!0),d){case 1:f[w].fn.call(f[w].context);break;case 2:f[w].fn.call(f[w].context,t);break;case 3:f[w].fn.call(f[w].context,t,n);break;case 4:f[w].fn.call(f[w].context,t,n,i);break;default:if(!m)for(T=1,m=new Array(d-1);T<d;T++)m[T-1]=arguments[T];f[w].fn.apply(f[w].context,m)}}return!0};Dn.prototype.on=function(e,t,n){return VT(this,e,t,n,!1)};Dn.prototype.once=function(e,t,n){return VT(this,e,t,n,!0)};Dn.prototype.removeListener=function(e,t,n,i){var o=jn?jn+e:e;if(!this._events[o])return this;if(!t)return jg(this,o),this;var a=this._events[o];if(a.fn)a.fn===t&&(!i||a.once)&&(!n||a.context===n)&&jg(this,o);else{for(var c=0,f=[],d=a.length;c<d;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&f.push(a[c]);f.length?this._events[o]=f.length===1?f[0]:f:jg(this,o)}return this};Dn.prototype.removeAllListeners=function(e){var t;return e?(t=jn?jn+e:e,this._events[t]&&jg(this,t)):(this._events=new rd,this._eventsCount=0),this};Dn.prototype.off=Dn.prototype.removeListener;Dn.prototype.addListener=Dn.prototype.on;Dn.prefixed=jn;Dn.EventEmitter=Dn;typeof Hx<"u"&&(Hx.exports=Dn)});var Pk=ue((E1e,Ck)=>{h();p();Ck.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var kk=ue((C1e,Tk)=>{h();p();var Ik=Pk();Tk.exports=class{constructor(e){this.hwm=e||16,this.head=new Ik(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let t=this.head;this.head=t.next=new Ik(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}});var Bk=ue((T1e,Fk)=>{h();p();var A1=kk();Fk.exports=r=>{r=r||{};let e;typeof r=="function"?(e=r,r={}):e=r.onEnd;let t=new A1,n,i,o,a=()=>{if(!t.isEmpty()){if(r.writev){let N,he=[];for(;!t.isEmpty();){if(N=t.shift(),N.error)throw N.error;he.push(N.value)}return{done:N.done,value:he}}let F=t.shift();if(F.error)throw F.error;return F}return o?{done:!0}:new Promise((F,N)=>{i=he=>(i=null,he.error?N(he.error):r.writev&&!he.done?F({done:he.done,value:[he.value]}):F(he),n)})},c=F=>i?i(F):(t.push(F),n),f=F=>(t=new A1,i?i({error:F}):(t.push({error:F}),n)),d=F=>o?n:c({done:!1,value:F}),m=F=>o?n:(o=!0,F?f(F):c({done:!0})),w=()=>(t=new A1,m(),{done:!0}),E=F=>(m(F),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:a,return:w,throw:E,push:d,end:m},!e)return n;let T=n;return n={[Symbol.asyncIterator](){return this},next(){return T.next()},throw(F){return T.throw(F),e&&(e(F),e=null),{done:!0}},return(){return T.return(),e&&(e(),e=null),{done:!0}},push:d,end(F){return T.end(F),e&&(e(F),e=null),n}},n}});var S1=ue((B1e,Rk)=>{"use strict";h();p();var TY=Bk(),kY=async function*(...r){let e=TY();setTimeout(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}},0),yield*e};Rk.exports=kY});var n0=ue((xEe,zk)=>{"use strict";h();p();var zY=async r=>{for await(let e of r);};zk.exports=zY});var i0=ue((SEe,qk)=>{"use strict";h();p();var qY=async function*(r,e){for await(let t of r)await e(t)&&(yield t)};qk.exports=qY});var o0=ue((PEe,Wk)=>{"use strict";h();p();var WY=async function*(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}};Wk.exports=WY});var T1=ue((kEe,Vk)=>{"use strict";h();p();var VY=async r=>{let e=[];for await(let t of r)e.push(t);return e};Vk.exports=VY});var eF=ue((d2e,Zk)=>{"use strict";h();p();var XY=async function*(r,e){for await(let t of r)yield e(t)};Zk.exports=XY});var iF=ue(nF=>{"use strict";h();p();nF.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var Xo=ue((OAe,oF)=>{"use strict";h();p();oF.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var M1=ue((NAe,sF)=>{"use strict";h();p();var N1=null;sF.exports=function(){return N1===null&&(N1={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),N1}});var $1=ue(aF=>{"use strict";h();p();var K1=Xo(),nJ=new Set(["buffer","view","utf8"]),j1=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!nJ.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new K1(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new K1(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new K1(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};aF.Encoding=j1});var V1=ue(l0=>{"use strict";h();p();var{Buffer:q1}=mc()||{},{Encoding:W1}=$1(),iJ=M1(),gd=class extends W1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new wd({encode:this.encode,decode:e=>this.decode(q1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},wd=class extends W1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new gd({encode:e=>{let t=this.encode(e);return q1.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},z1=class extends W1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new gd({encode:e=>q1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=iJ();return new wd({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};l0.BufferFormat=gd;l0.ViewFormat=wd;l0.UTF8Format=z1});var lF=ue(Jc=>{"use strict";h();p();var{Buffer:Cn}=mc()||{Buffer:{isBuffer:()=>!1}},{textEncoder:cF,textDecoder:uF}=M1()(),{BufferFormat:bd,ViewFormat:H1,UTF8Format:fF}=V1(),h0=r=>r;Jc.utf8=new fF({encode:function(r){return Cn.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?uF.decode(r):String(r)},decode:h0,name:"utf8",createViewTranscoder(){return new H1({encode:function(r){return ArrayBuffer.isView(r)?r:cF.encode(r)},decode:function(r){return uF.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new bd({encode:function(r){return Cn.isBuffer(r)?r:ArrayBuffer.isView(r)?Cn.from(r.buffer,r.byteOffset,r.byteLength):Cn.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});Jc.json=new fF({encode:JSON.stringify,decode:JSON.parse,name:"json"});Jc.buffer=new bd({encode:function(r){return Cn.isBuffer(r)?r:ArrayBuffer.isView(r)?Cn.from(r.buffer,r.byteOffset,r.byteLength):Cn.from(String(r),"utf8")},decode:h0,name:"buffer",createViewTranscoder(){return new H1({encode:function(r){return ArrayBuffer.isView(r)?r:Cn.from(String(r),"utf8")},decode:function(r){return Cn.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});Jc.view=new H1({encode:function(r){return ArrayBuffer.isView(r)?r:cF.encode(r)},decode:h0,name:"view",createBufferTranscoder(){return new bd({encode:function(r){return Cn.isBuffer(r)?r:ArrayBuffer.isView(r)?Cn.from(r.buffer,r.byteOffset,r.byteLength):Cn.from(String(r),"utf8")},decode:h0,name:`${this.name}+buffer`})}});Jc.hex=new bd({encode:function(r){return Cn.isBuffer(r)?r:Cn.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});Jc.base64=new bd({encode:function(r){return Cn.isBuffer(r)?r:Cn.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var dF=ue(pF=>{"use strict";h();p();var hF=Xo(),d0=lF(),{Encoding:oJ}=$1(),{BufferFormat:sJ,ViewFormat:aJ,UTF8Format:uJ}=V1(),vd=Symbol("formats"),p0=Symbol("encodings"),cJ=new Set(["buffer","view","utf8"]),G1=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>cJ.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[p0]=new Map,this[vd]=new Set(e);for(let t in d0)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[p0].values()))}encoding(e){let t=this[p0].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=pJ[e],!t)throw new hF(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=fJ(e)}let{name:n,format:i}=t;if(!this[vd].has(i))if(this[vd].has("view"))t=t.createViewTranscoder();else if(this[vd].has("buffer"))t=t.createBufferTranscoder();else if(this[vd].has("utf8"))t=t.createUTF8Transcoder();else throw new hF(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[p0].set(o,t)}return t}};pF.Transcoder=G1;function fJ(r){if(r instanceof oJ)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${dJ++}`;switch(lJ(r)){case"view":return new aJ({...r,name:t});case"utf8":return new uJ({...r,name:t});case"buffer":return new sJ({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function lJ(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var hJ={binary:d0.buffer,"utf-8":d0.utf8},pJ={...d0,...hJ},dJ=0});var SF=ue((ZAe,Y1)=>{"use strict";h();p();var eh=typeof Reflect=="object"?Reflect:null,mF=eh&&typeof eh.apply=="function"?eh.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},m0;eh&&typeof eh.ownKeys=="function"?m0=eh.ownKeys:Object.getOwnPropertySymbols?m0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:m0=function(e){return Object.getOwnPropertyNames(e)};function mJ(r){console&&console.warn&&console.warn(r)}var gF=Number.isNaN||function(e){return e!==e};function Zt(){Zt.init.call(this)}Y1.exports=Zt;Y1.exports.once=bJ;Zt.EventEmitter=Zt;Zt.prototype._events=void 0;Zt.prototype._eventsCount=0;Zt.prototype._maxListeners=void 0;var yF=10;function y0(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Zt,"defaultMaxListeners",{enumerable:!0,get:function(){return yF},set:function(r){if(typeof r!="number"||r<0||gF(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");yF=r}});Zt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Zt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||gF(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function wF(r){return r._maxListeners===void 0?Zt.defaultMaxListeners:r._maxListeners}Zt.prototype.getMaxListeners=function(){return wF(this)};Zt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var f=o[e];if(f===void 0)return!1;if(typeof f=="function")mF(f,this,t);else for(var d=f.length,m=EF(f,d),n=0;n<d;++n)mF(m[n],this,t);return!0};function bF(r,e,t,n){var i,o,a;if(y0(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),a=o[e]),a===void 0)a=o[e]=t,++r._eventsCount;else if(typeof a=="function"?a=o[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),i=wF(r),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=r,c.type=e,c.count=a.length,mJ(c)}return r}Zt.prototype.addListener=function(e,t){return bF(this,e,t,!1)};Zt.prototype.on=Zt.prototype.addListener;Zt.prototype.prependListener=function(e,t){return bF(this,e,t,!0)};function yJ(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vF(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=yJ.bind(n);return i.listener=t,n.wrapFn=i,i}Zt.prototype.once=function(e,t){return y0(t),this.on(e,vF(this,e,t)),this};Zt.prototype.prependOnceListener=function(e,t){return y0(t),this.prependListener(e,vF(this,e,t)),this};Zt.prototype.removeListener=function(e,t){var n,i,o,a,c;if(y0(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){c=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():gJ(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};Zt.prototype.off=Zt.prototype.removeListener;Zt.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function _F(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?wJ(i):EF(i,i.length)}Zt.prototype.listeners=function(e){return _F(this,e,!0)};Zt.prototype.rawListeners=function(e){return _F(this,e,!1)};Zt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):xF.call(r,e)};Zt.prototype.listenerCount=xF;function xF(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Zt.prototype.eventNames=function(){return this._eventsCount>0?m0(this._events):[]};function EF(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function gJ(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function wJ(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function bJ(r,e){return new Promise(function(t,n){function i(a){r.removeListener(e,o),n(a)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}AF(r,e,o,{once:!0}),e!=="error"&&vJ(r,i,{once:!0})})}function vJ(r,e,t){typeof r.on=="function"&&AF(r,"error",e,t)}function AF(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var CF=ue((rSe,DF)=>{h();p();DF.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var _d=ue(J1=>{"use strict";h();p();var PF=CF();J1.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,a){o?i(o):n(a)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};J1.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){PF(()=>e(null,t))}).catch(function(t){PF(()=>e(t))})}});var g0=ue(X1=>{"use strict";h();p();X1.getCallback=function(r,e){return typeof r=="function"?r:e};X1.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var Pu=ue(_0=>{"use strict";h();p();var{fromCallback:Q1}=_d(),Li=Xo(),{getOptions:Z1,getCallback:IF}=g0(),Xc=Symbol("promise"),th=Symbol("callback"),Is=Symbol("working"),Qc=Symbol("handleOne"),ya=Symbol("handleMany"),eE=Symbol("autoClose"),Du=Symbol("finishWork"),Ts=Symbol("returnMany"),Eu=Symbol("closing"),xd=Symbol("handleClose"),w0=Symbol("closed"),Ed=Symbol("closeCallbacks"),Su=Symbol("keyEncoding"),Zc=Symbol("valueEncoding"),tE=Symbol("abortOnClose"),b0=Symbol("legacy"),rE=Symbol("keys"),nE=Symbol("values"),Au=Symbol("limit"),mo=Symbol("count"),v0=Object.freeze({}),_J=()=>{},TF=!1,Ad=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[w0]=!1,this[Ed]=[],this[Is]=!1,this[Eu]=!1,this[eE]=!1,this[th]=null,this[Qc]=this[Qc].bind(this),this[ya]=this[ya].bind(this),this[xd]=this[xd].bind(this),this[Su]=t[Su],this[Zc]=t[Zc],this[b0]=n,this[Au]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[mo]=0,this[tE]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[mo]}get limit(){return this[Au]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,a,c)=>{o?i(o):this[b0]?a===void 0&&c===void 0?n():n([a,c]):n(a)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Eu]?this.nextTick(e,new Li("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Is]?this.nextTick(e,new Li("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Is]=!0,this[th]=e,this[mo]>=this[Au]?this.nextTick(this[Qc],null):this._next(this[Qc])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=IF(t,n),n=Q1(n,Xc),t=Z1(t,v0),Number.isInteger(e)?(this[Eu]?this.nextTick(n,new Li("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Is]?this.nextTick(n,new Li("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Au]<1/0&&(e=Math.min(e,this[Au]-this[mo])),this[Is]=!0,this[th]=n,e<=0?this.nextTick(this[ya],null,[]):this._nextv(e,t,this[ya])),n[Xc]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Xc])}_nextv(e,t,n){let i=[],o=(a,c,f)=>{if(a)return n(a);if(this[b0]?c===void 0&&f===void 0:c===void 0)return n(null,i);i.push(this[b0]?[c,f]:c),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=IF(e,t),t=Q1(t,Xc),e=Z1(e,v0),this[Eu]?this.nextTick(t,new Li("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Is]?this.nextTick(t,new Li("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Is]=!0,this[th]=t,this[eE]=!0,this[mo]>=this[Au]?this.nextTick(this[ya],null,[]):this._all(e,this[ya])),t[Xc]}_all(e,t){let n=this[mo],i=[],o=()=>{let c=this[Au]<1/0?Math.min(1e3,this[Au]-n):1e3;c<=0?this.nextTick(t,null,i):this._nextv(c,v0,a)},a=(c,f)=>{c?t(c):f.length===0?t(null,i):(i.push.apply(i,f),n+=f.length,o())};o()}[Du](){let e=this[th];return this[tE]&&e===null?_J:(this[Is]=!1,this[th]=null,this[Eu]&&this._close(this[xd]),e)}[Ts](e,t,n){this[eE]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=Z1(t,v0),!this[Eu]){if(this[Is])throw new Li("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[Su]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new Li("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=Q1(e,Xc),this[w0]?this.nextTick(e):this[Eu]?this[Ed].push(e):(this[Eu]=!0,this[Ed].push(e),this[Is]?this[tE]&&this[Du]()(new Li("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[xd])),e[Xc]}_close(e){this.nextTick(e)}[xd](){this[w0]=!0,this.db.detachResource(this);let e=this[Ed];this[Ed]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[w0]||await this.close()}}},rh=class extends Ad{constructor(e,t){super(e,t,!0),this[rE]=t.keys!==!1,this[nE]=t.values!==!1}[Qc](e,t,n){let i=this[Du]();if(e)return i(e);try{t=this[rE]&&t!==void 0?this[Su].decode(t):void 0,n=this[nE]&&n!==void 0?this[Zc].decode(n):void 0}catch(o){return i(new Cu("entry",o))}t===void 0&&n===void 0||this[mo]++,i(null,t,n)}[ya](e,t){let n=this[Du]();if(e)return this[Ts](n,e);try{for(let i of t){let o=i[0],a=i[1];i[0]=this[rE]&&o!==void 0?this[Su].decode(o):void 0,i[1]=this[nE]&&a!==void 0?this[Zc].decode(a):void 0}}catch(i){return this[Ts](n,new Cu("entries",i))}this[mo]+=t.length,this[Ts](n,null,t)}end(e){return!TF&&typeof console<"u"&&(TF=!0,console.warn(new Li("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},iE=class extends Ad{constructor(e,t){super(e,t,!1)}[Qc](e,t){let n=this[Du]();if(e)return n(e);try{t=t!==void 0?this[Su].decode(t):void 0}catch(i){return n(new Cu("key",i))}t!==void 0&&this[mo]++,n(null,t)}[ya](e,t){let n=this[Du]();if(e)return this[Ts](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Su].decode(o):void 0}}catch(i){return this[Ts](n,new Cu("keys",i))}this[mo]+=t.length,this[Ts](n,null,t)}},oE=class extends Ad{constructor(e,t){super(e,t,!1)}[Qc](e,t){let n=this[Du]();if(e)return n(e);try{t=t!==void 0?this[Zc].decode(t):void 0}catch(i){return n(new Cu("value",i))}t!==void 0&&this[mo]++,n(null,t)}[ya](e,t){let n=this[Du]();if(e)return this[Ts](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Zc].decode(o):void 0}}catch(i){return this[Ts](n,new Cu("values",i))}this[mo]+=t.length,this[Ts](n,null,t)}},Cu=class extends Li{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(rh.prototype,r.split(" ")[0],{get(){throw new Li(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Li(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});rh.keyEncoding=Su;rh.valueEncoding=Zc;_0.AbstractIterator=rh;_0.AbstractKeyIterator=iE;_0.AbstractValueIterator=oE});var kF=ue(sE=>{"use strict";h();p();var{AbstractKeyIterator:xJ,AbstractValueIterator:EJ}=Pu(),ef=Symbol("iterator"),Sd=Symbol("callback"),nh=Symbol("handleOne"),tf=Symbol("handleMany"),Dd=class extends xJ{constructor(e,t){super(e,t),this[ef]=e.iterator({...t,keys:!0,values:!1}),this[nh]=this[nh].bind(this),this[tf]=this[tf].bind(this)}},x0=class extends EJ{constructor(e,t){super(e,t),this[ef]=e.iterator({...t,keys:!1,values:!0}),this[nh]=this[nh].bind(this),this[tf]=this[tf].bind(this)}};for(let r of[Dd,x0]){let e=r===Dd,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[Sd]=n,this[ef].next(this[nh])},r.prototype[nh]=function(n,i,o){let a=this[Sd];n?a(n):a(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[Sd]=o,this[ef].nextv(n,i,this[tf])},r.prototype._all=function(n,i){this[Sd]=i,this[ef].all(n,this[tf])},r.prototype[tf]=function(n,i){let o=this[Sd];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[ef].seek(n,i)},r.prototype._close=function(n){this[ef].close(n)}}sE.DefaultKeyIterator=Dd;sE.DefaultValueIterator=x0});var FF=ue(P0=>{"use strict";h();p();var{AbstractIterator:AJ,AbstractKeyIterator:SJ,AbstractValueIterator:DJ}=Pu(),aE=Xo(),oi=Symbol("nut"),D0=Symbol("undefer"),C0=Symbol("factory"),E0=class extends AJ{constructor(e,t){super(e,t),this[oi]=null,this[C0]=()=>e.iterator(t),this.db.defer(()=>this[D0]())}},A0=class extends SJ{constructor(e,t){super(e,t),this[oi]=null,this[C0]=()=>e.keys(t),this.db.defer(()=>this[D0]())}},S0=class extends DJ{constructor(e,t){super(e,t),this[oi]=null,this[C0]=()=>e.values(t),this.db.defer(()=>this[D0]())}};for(let r of[E0,A0,S0])r.prototype[D0]=function(){this.db.status==="open"&&(this[oi]=this[C0]())},r.prototype._next=function(e){this[oi]!==null?this[oi].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new aE("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[oi]!==null?this[oi].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new aE("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[oi]!==null?this[oi].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new aE("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[oi]!==null?this[oi]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[oi]!==null?this[oi].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};P0.DeferredIterator=E0;P0.DeferredKeyIterator=A0;P0.DeferredValueIterator=S0});var cE=ue(RF=>{"use strict";h();p();var{fromCallback:BF}=_d(),I0=Xo(),{getCallback:CJ,getOptions:PJ}=g0(),T0=Symbol("promise"),yo=Symbol("status"),ih=Symbol("operations"),Cd=Symbol("finishClose"),oh=Symbol("closeCallbacks"),uE=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[ih]=[],this[oh]=[],this[yo]="open",this[Cd]=this[Cd].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[ih].length}put(e,t,n){if(this[yo]!=="open")throw new I0("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,a=n,c=o.keyEncoding(n&&n.keyEncoding),f=o.valueEncoding(n&&n.valueEncoding),d=c.format;n={...n,keyEncoding:d,valueEncoding:f.format},o!==this.db&&(n.sublevel=null);let m=o.prefixKey(c.encode(e),d),w=f.encode(t);return this._put(m,w,n),this[ih].push({...a,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[yo]!=="open")throw new I0("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,a=i.keyEncoding(t&&t.keyEncoding),c=a.format;return t={...t,keyEncoding:c},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(a.encode(e),c),t),this[ih].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[yo]!=="open")throw new I0("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[ih]=[],this}_clear(){}write(e,t){return t=CJ(e,t),t=BF(t,T0),e=PJ(e),this[yo]!=="open"?this.nextTick(t,new I0("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[yo]="writing",this._write(e,n=>{this[yo]="closing",this[oh].push(()=>t(n)),n||this.db.emit("batch",this[ih]),this._close(this[Cd])})),t[T0]}_write(e,t){}close(e){return e=BF(e,T0),this[yo]==="closing"?this[oh].push(e):this[yo]==="closed"?this.nextTick(e):(this[oh].push(e),this[yo]!=="writing"&&(this[yo]="closing",this._close(this[Cd]))),e[T0]}_close(e){this.nextTick(e)}[Cd](){this[yo]="closed",this.db.detachResource(this);let e=this[oh];this[oh]=[];for(let t of e)t()}};RF.AbstractChainedBatch=uE});var LF=ue(OF=>{"use strict";h();p();var{AbstractChainedBatch:IJ}=cE(),TJ=Xo(),sh=Symbol("encoded"),fE=class extends IJ{constructor(e){super(e),this[sh]=[]}_put(e,t,n){this[sh].push({...n,type:"put",key:e,value:t})}_del(e,t){this[sh].push({...t,type:"del",key:e})}_clear(){this[sh]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[sh].length===0?this.nextTick(t):this.db._batch(this[sh],e,t):this.nextTick(t,new TJ("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};OF.DefaultChainedBatch=fE});var MF=ue((DSe,NF)=>{"use strict";h();p();var UF=Xo(),kJ=Object.prototype.hasOwnProperty,FJ=new Set(["lt","lte","gt","gte"]);NF.exports=function(r,e){let t={};for(let n in r)if(!!kJ.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new UF(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new UF("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});FJ.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var lE=ue((ISe,jF)=>{h();p();var KF;jF.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):r=>(KF||(KF=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var qF=ue((FSe,zF)=>{"use strict";h();p();var $F=lE();zF.exports=function(r,...e){e.length===0?$F(r):$F(()=>r(...e))}});var WF=ue(k0=>{"use strict";h();p();var{AbstractIterator:BJ,AbstractKeyIterator:RJ,AbstractValueIterator:OJ}=Pu(),ah=Symbol("unfix"),Qo=Symbol("iterator"),rf=Symbol("handleOne"),Iu=Symbol("handleMany"),ga=Symbol("callback"),Pd=class extends BJ{constructor(e,t,n,i){super(e,t),this[Qo]=n,this[ah]=i,this[rf]=this[rf].bind(this),this[Iu]=this[Iu].bind(this),this[ga]=null}[rf](e,t,n){let i=this[ga];if(e)return i(e);t!==void 0&&(t=this[ah](t)),i(e,t,n)}[Iu](e,t){let n=this[ga];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[ah](o))}n(e,t)}},Id=class extends RJ{constructor(e,t,n,i){super(e,t),this[Qo]=n,this[ah]=i,this[rf]=this[rf].bind(this),this[Iu]=this[Iu].bind(this),this[ga]=null}[rf](e,t){let n=this[ga];if(e)return n(e);t!==void 0&&(t=this[ah](t)),n(e,t)}[Iu](e,t){let n=this[ga];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[ah](o))}n(e,t)}},Td=class extends OJ{constructor(e,t,n){super(e,t),this[Qo]=n}};for(let r of[Pd,Id])r.prototype._next=function(e){this[ga]=e,this[Qo].next(this[rf])},r.prototype._nextv=function(e,t,n){this[ga]=n,this[Qo].nextv(e,t,this[Iu])},r.prototype._all=function(e,t){this[ga]=t,this[Qo].all(e,this[Iu])};for(let r of[Td])r.prototype._next=function(e){this[Qo].next(e)},r.prototype._nextv=function(e,t,n){this[Qo].nextv(e,t,n)},r.prototype._all=function(e,t){this[Qo].all(e,t)};for(let r of[Pd,Id,Td])r.prototype._seek=function(e,t){this[Qo].seek(e,t)},r.prototype._close=function(e){this[Qo].close(e)};k0.AbstractSublevelIterator=Pd;k0.AbstractSublevelKeyIterator=Id;k0.AbstractSublevelValueIterator=Td});var YF=ue((NSe,GF)=>{"use strict";h();p();var hE=Xo(),{Buffer:mE}=mc()||{},{AbstractSublevelIterator:LJ,AbstractSublevelKeyIterator:UJ,AbstractSublevelValueIterator:NJ}=WF(),wa=Symbol("prefix"),VF=Symbol("upperBound"),kd=Symbol("prefixRange"),Ui=Symbol("parent"),pE=Symbol("unfix"),HF=new TextEncoder,MJ={separator:"!"};GF.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new hE("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new hE("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?MJ:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:a,manifest:c,...f}=e.defaults(o);i=jJ(i,a);let d=a.charCodeAt(0)+1,m=n[Ui]||n;if(!HF.encode(i).every(T=>T>d&&T<127))throw new hE(`Prefix must use bytes > ${d} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(KJ(m,c),f);let w=(n.prefix||"")+a+i+a,E=w.slice(0,-1)+String.fromCharCode(d);this[Ui]=m,this[wa]=new F0(w),this[VF]=new F0(E),this[pE]=new yE,this.nextTick=m.nextTick}prefixKey(n,i){if(i==="utf8")return this[wa].utf8+n;if(n.byteLength===0)return this[wa][i];if(i==="view"){let o=this[wa].view,a=new Uint8Array(o.byteLength+n.byteLength);return a.set(o,0),a.set(n,o.byteLength),a}else{let o=this[wa].buffer;return mE.concat([o,n],o.byteLength+n.byteLength)}}[kd](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[wa][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[VF][i]}get prefix(){return this[wa].utf8}get db(){return this[Ui]}_open(n,i){this[Ui].open({passive:!0},i)}_put(n,i,o,a){this[Ui].put(n,i,o,a)}_get(n,i,o){this[Ui].get(n,i,o)}_getMany(n,i,o){this[Ui].getMany(n,i,o)}_del(n,i,o){this[Ui].del(n,i,o)}_batch(n,i,o){this[Ui].batch(n,i,o)}_clear(n,i){this[kd](n,n.keyEncoding),this[Ui].clear(n,i)}_iterator(n){this[kd](n,n.keyEncoding);let i=this[Ui].iterator(n),o=this[pE].get(this[wa].utf8.length,n.keyEncoding);return new LJ(this,n,i,o)}_keys(n){this[kd](n,n.keyEncoding);let i=this[Ui].keys(n),o=this[pE].get(this[wa].utf8.length,n.keyEncoding);return new UJ(this,n,i,o)}_values(n){this[kd](n,n.keyEncoding);let i=this[Ui].values(n);return new NJ(this,n,i)}}return{AbstractSublevel:e}};var KJ=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:dE(r,"utf8"),buffer:dE(r,"buffer"),view:dE(r,"view")}}},dE=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},F0=class{constructor(e){this.utf8=e,this.view=HF.encode(e),this.buffer=mE?mE.from(this.view.buffer,0,this.view.byteLength):{}}},yE=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},jJ=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var _E=ue(vE=>{"use strict";h();p();var{supports:$J}=iF(),{Transcoder:zJ}=dF(),{EventEmitter:qJ}=SF(),{fromCallback:Tu}=_d(),Zo=Xo(),{AbstractIterator:nf}=Pu(),{DefaultKeyIterator:WJ,DefaultValueIterator:VJ}=kF(),{DeferredIterator:HJ,DeferredKeyIterator:GJ,DeferredValueIterator:YJ}=FF(),{DefaultChainedBatch:JF}=LF(),{getCallback:of,getOptions:ku}=g0(),B0=MF(),St=Symbol("promise"),ba=Symbol("landed"),sf=Symbol("resources"),gE=Symbol("closeResources"),Fd=Symbol("operations"),Bd=Symbol("undefer"),R0=Symbol("deferOpen"),XF=Symbol("options"),Ft=Symbol("status"),af=Symbol("defaultOptions"),uh=Symbol("transcoder"),O0=Symbol("keyEncoding"),wE=Symbol("valueEncoding"),JJ=()=>{},Rd=class extends qJ{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=ku(t);let{keyEncoding:n,valueEncoding:i,passive:o,...a}=t;this[sf]=new Set,this[Fd]=[],this[R0]=!0,this[XF]=a,this[Ft]="opening",this.supports=$J(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[uh]=new zJ(XJ(this)),this[O0]=this[uh].encoding(n||"utf8"),this[wE]=this[uh].encoding(i||"utf8");for(let c of this[uh].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[af]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[O0].commonName,valueEncoding:this[wE].commonName}),key:Object.freeze({keyEncoding:this[O0].commonName})},this.nextTick(()=>{this[R0]&&this.open({passive:!1},JJ)})}get status(){return this[Ft]}keyEncoding(e){return this[uh].encoding(e??this[O0])}valueEncoding(e){return this[uh].encoding(e??this[wE])}open(e,t){t=of(e,t),t=Tu(t,St),e={...this[XF],...ku(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[Ft]==="closing"||this[Ft]==="opening"?this.once(ba,i?()=>n(i):n):this[Ft]!=="open"?t(new Zo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[Ft]==="opening"?this.once(ba,n):this.nextTick(n):this[Ft]==="closed"||this[R0]?(this[R0]=!1,this[Ft]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[Ft]="closed",this[gE](()=>{this.emit(ba),n(i)}),this[Bd]();return}this[Ft]="open",this[Bd](),this.emit(ba),this[Ft]==="open"&&this.emit("open"),this[Ft]==="open"&&this.emit("ready"),n()})):this[Ft]==="open"?this.nextTick(n):this.once(ba,()=>this.open(e,t)),t[St]}_open(e,t){this.nextTick(t)}close(e){e=Tu(e,St);let t=n=>{this[Ft]==="opening"||this[Ft]==="closing"?this.once(ba,n?t(n):t):this[Ft]!=="closed"?e(new Zo("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[Ft]==="open"){this[Ft]="closing",this.emit("closing");let n=i=>{this[Ft]="open",this[Bd](),this.emit(ba),t(i)};this[gE](()=>{this._close(i=>{if(i)return n(i);this[Ft]="closed",this[Bd](),this.emit(ba),this[Ft]==="closed"&&this.emit("closed"),t()})})}else this[Ft]==="closed"?this.nextTick(t):this.once(ba,()=>this.close(e));return e[St]}[gE](e){if(this[sf].size===0)return this.nextTick(e);let t=this[sf].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[sf])o.close(i);n=!1,this[sf].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=of(t,n),n=Tu(n,St),t=ku(t,this[af].entry),this[Ft]==="opening")return this.defer(()=>this.get(e,t,n)),n[St];if(ch(this,n))return n[St];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[St];let o=this.keyEncoding(t.keyEncoding),a=this.valueEncoding(t.valueEncoding),c=o.format,f=a.format;return(t.keyEncoding!==c||t.valueEncoding!==f)&&(t=Object.assign({},t,{keyEncoding:c,valueEncoding:f})),this._get(this.prefixKey(o.encode(e),c),t,(d,m)=>{if(d)return(d.code==="LEVEL_NOT_FOUND"||d.notFound||/NotFound/i.test(d))&&(d.code||(d.code="LEVEL_NOT_FOUND"),d.notFound||(d.notFound=!0),d.status||(d.status=404)),n(d);try{m=a.decode(m)}catch(w){return n(new Zo("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:w}))}n(null,m)}),n[St]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=of(t,n),n=Tu(n,St),t=ku(t,this[af].entry),this[Ft]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[St];if(ch(this,n))return n[St];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[St];if(e.length===0)return this.nextTick(n,null,[]),n[St];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),a=i.format,c=o.format;(t.keyEncoding!==a||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:a,valueEncoding:c}));let f=new Array(e.length);for(let d=0;d<e.length;d++){let m=e[d],w=this._checkKey(m);if(w)return this.nextTick(n,w),n[St];f[d]=this.prefixKey(i.encode(m),a)}return this._getMany(f,t,(d,m)=>{if(d)return n(d);try{for(let w=0;w<m.length;w++)m[w]!==void 0&&(m[w]=o.decode(m[w]))}catch(w){return n(new Zo(`Could not decode one or more of ${m.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:w}))}n(null,m)}),n[St]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=of(n,i),i=Tu(i,St),n=ku(n,this[af].entry),this[Ft]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[St];if(ch(this,i))return i[St];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[St];let a=this.keyEncoding(n.keyEncoding),c=this.valueEncoding(n.valueEncoding),f=a.format,d=c.format;(n.keyEncoding!==f||n.valueEncoding!==d)&&(n=Object.assign({},n,{keyEncoding:f,valueEncoding:d}));let m=this.prefixKey(a.encode(e),f),w=c.encode(t);return this._put(m,w,n,E=>{if(E)return i(E);this.emit("put",e,t),i()}),i[St]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=of(t,n),n=Tu(n,St),t=ku(t,this[af].key),this[Ft]==="opening")return this.defer(()=>this.del(e,t,n)),n[St];if(ch(this,n))return n[St];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[St];let o=this.keyEncoding(t.keyEncoding),a=o.format;return t.keyEncoding!==a&&(t=Object.assign({},t,{keyEncoding:a})),this._del(this.prefixKey(o.encode(e),a),t,c=>{if(c)return n(c);this.emit("del",e),n()}),n[St]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[Ft]==="opening")return new JF(this);if(this[Ft]!=="open")throw new Zo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=of(t,n),n=Tu(n,St),t=ku(t,this[af].empty),this[Ft]==="opening")return this.defer(()=>this.batch(e,t,n)),n[St];if(ch(this,n))return n[St];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[St];if(e.length===0)return this.nextTick(n),n[St];let i=new Array(e.length),{keyEncoding:o,valueEncoding:a,...c}=t;for(let f=0;f<e.length;f++){if(typeof e[f]!="object"||e[f]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[St];let d=Object.assign({},e[f]);if(d.type!=="put"&&d.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[St];let m=this._checkKey(d.key);if(m)return this.nextTick(n,m),n[St];let w=d.sublevel!=null?d.sublevel:this,E=w.keyEncoding(d.keyEncoding||o),T=E.format;if(d.key=w.prefixKey(E.encode(d.key),T),d.keyEncoding=T,d.type==="put"){let F=this._checkValue(d.value);if(F)return this.nextTick(n,F),n[St];let N=w.valueEncoding(d.valueEncoding||a);d.value=N.encode(d.value),d.valueEncoding=N.format}w!==this&&(d.sublevel=null),i[f]=d}return this._batch(i,c,f=>{if(f)return n(f);this.emit("batch",e),n()}),n[St]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,bE.defaults(t))}_sublevel(e,t){return new bE(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=of(e,t),t=Tu(t,St),e=ku(e,this[af].empty),this[Ft]==="opening")return this.defer(()=>this.clear(e,t)),t[St];if(ch(this,t))return t[St];let n=e,i=this.keyEncoding(e.keyEncoding);return e=B0(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[St]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=B0(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[nf.keyEncoding]=t,e[nf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ft]==="opening")return new HJ(this,e);if(this[Ft]!=="open")throw new Zo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new nf(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=B0(e,t),e[nf.keyEncoding]=t,e[nf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ft]==="opening")return new GJ(this,e);if(this[Ft]!=="open")throw new Zo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new WJ(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=B0(e,t),e[nf.keyEncoding]=t,e[nf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ft]==="opening")return new YJ(this,e);if(this[Ft]!=="open")throw new Zo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new VJ(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Fd].push(e)}[Bd](){if(this[Fd].length===0)return;let e=this[Fd];this[Fd]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[sf].add(e)}detachResource(e){this[sf].delete(e)}_chainedBatch(){return new JF(this)}_checkKey(e){if(e==null)return new Zo("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new Zo("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Rd.prototype.nextTick=qF();var{AbstractSublevel:bE}=YF()({AbstractLevel:Rd});vE.AbstractLevel=Rd;vE.AbstractSublevel=bE;var ch=function(r,e){return r[Ft]!=="open"?(r.nextTick(e,new Zo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},XJ=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var xE=ue(uf=>{"use strict";h();p();uf.AbstractLevel=_E().AbstractLevel;uf.AbstractSublevel=_E().AbstractSublevel;uf.AbstractIterator=Pu().AbstractIterator;uf.AbstractKeyIterator=Pu().AbstractKeyIterator;uf.AbstractValueIterator=Pu().AbstractValueIterator;uf.AbstractChainedBatch=cE().AbstractChainedBatch});var ZF=ue((HSe,QF)=>{h();p();QF.exports=ZJ;var QJ=lE();function ZJ(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,a,c,f=!0,d;Array.isArray(r)?(n=[],o=i=r.length):(a=Object.keys(r),n={},o=i=a.length);function m(E){function T(){t&&t(E,n),t=null}f?QJ(T):T()}function w(E,T,F){if(n[E]=F,T&&(c=!0),--o===0||T)m(T);else if(!c&&d<i){let N;a?(N=a[d],d+=1,r[N](function(he,de){w(N,he,de)})):(N=d,d+=1,r[N](function(he,de){w(N,he,de)}))}}d=e,o?a?a.some(function(E,T){return r[E](function(F,N){w(E,F,N)}),T===e-1}):r.some(function(E,T){return E(function(F,N){w(T,F,N)}),T===e-1}):m(null),f=!1}});var EE=ue((JSe,eB)=>{"use strict";h();p();eB.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var AE=ue((ZSe,tB)=>{"use strict";h();p();var eX=new TextEncoder;tB.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):eX.encode(r)}});var sB=ue(oB=>{"use strict";h();p();var{AbstractIterator:tX}=xE(),rB=EE(),L0=AE(),ks=Symbol("cache"),va=Symbol("finished"),Ni=Symbol("options"),_a=Symbol("currentOptions"),cf=Symbol("position"),SE=Symbol("location"),fh=Symbol("first"),nB={},DE=class extends tX{constructor(e,t,n){super(e,n),this[ks]=[],this[va]=this.limit===0,this[Ni]=n,this[_a]={...n},this[cf]=void 0,this[SE]=t,this[fh]=!0}_nextv(e,t,n){if(this[fh]=!1,this[va])return this.nextTick(n,null,[]);if(this[ks].length>0)return e=Math.min(e,this[ks].length),this.nextTick(n,null,this[ks].splice(0,e));this[cf]!==void 0&&(this[Ni].reverse?(this[_a].lt=this[cf],this[_a].lte=void 0):(this[_a].gt=this[cf],this[_a].gte=void 0));let i;try{i=rB(this[_a])}catch{return this[va]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[SE]],"readonly"),a=o.objectStore(this[SE]),c=[];if(this[Ni].reverse){let f=!this[Ni].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[f](i,"prev").onsuccess=d=>{let m=d.target.result;if(m){let{key:w,value:E}=m;this[cf]=w,c.push([this[Ni].keys&&w!==void 0?L0(w):void 0,this[Ni].values&&E!==void 0?L0(E):void 0]),c.length<e?m.continue():iB(o)}else this[va]=!0}}else{let f,d,m=()=>{if(f===void 0||d===void 0)return;let w=Math.max(f.length,d.length);w===0||e===1/0?this[va]=!0:this[cf]=f[w-1],c.length=w;for(let E=0;E<w;E++){let T=f[E],F=d[E];c[E]=[this[Ni].keys&&T!==void 0?L0(T):void 0,this[Ni].values&&F!==void 0?L0(F):void 0]}iB(o)};this[Ni].keys||e<1/0?a.getAllKeys(i,e<1/0?e:void 0).onsuccess=w=>{f=w.target.result,m()}:(f=[],this.nextTick(m)),this[Ni].values?a.getAll(i,e<1/0?e:void 0).onsuccess=w=>{d=w.target.result,m()}:(d=[],this.nextTick(m))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,c),n=null}}_next(e){if(this[ks].length>0){let[t,n]=this[ks].shift();this.nextTick(e,null,t,n)}else if(this[va])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[fh]&&(this[fh]=!1,t=1),this._nextv(t,nB,(n,i)=>{if(n)return e(n);this[ks]=i,this._next(e)})}}_all(e,t){this[fh]=!1;let n=this[ks].splice(0,this[ks].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,nB,(o,a)=>{if(o)return t(o);n.length>0&&(a=n.concat(a)),t(null,a)})}_seek(e,t){this[fh]=!0,this[ks]=[],this[va]=!1,this[cf]=void 0,this[_a]={...this[Ni]};let n;try{n=rB(this[Ni])}catch{this[va]=!0;return}n!==null&&!n.includes(e)?this[va]=!0:this[Ni].reverse?this[_a].lte=e:this[_a].gte=e}};oB.Iterator=DE;function iB(r){typeof r.commit=="function"&&r.commit()}});var uB=ue((o8e,aB)=>{"use strict";h();p();aB.exports=function(e,t,n,i,o){if(i.limit===0)return e.nextTick(o);let a=e.db.transaction([t],"readwrite"),c=a.objectStore(t),f=0;a.oncomplete=function(){o()},a.onabort=function(){o(a.error||new Error("aborted by user"))};let d=c.openKeyCursor?"openKeyCursor":"openCursor",m=i.reverse?"prev":"next";c[d](n,m).onsuccess=function(w){let E=w.target.result;E&&(c.delete(E.key).onsuccess=function(){(i.limit<=0||++f<i.limit)&&E.continue()})}}});var dB=ue(pB=>{"use strict";h();p();var{AbstractLevel:rX}=xE(),cB=Xo(),nX=ZF(),{fromCallback:iX}=_d(),{Iterator:oX}=sB(),fB=AE(),sX=uB(),aX=EE(),hB="level-js-",Od=Symbol("idb"),CE=Symbol("namePrefix"),xa=Symbol("location"),PE=Symbol("version"),ff=Symbol("store"),Ld=Symbol("onComplete"),lB=Symbol("promise"),U0=class extends rX{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new cB("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...a}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof e!="string")throw new Error("constructor requires a location string argument");this[xa]=e,this[CE]=i??hB,this[PE]=parseInt(o||1,10),this[Od]=null}get location(){return this[xa]}get namePrefix(){return this[CE]}get version(){return this[PE]}get db(){return this[Od]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[CE]+this[xa],this[PE]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Od]=n.result,t()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[xa])||o.createObjectStore(this[xa])}}[ff](e){return this[Od].transaction([this[xa]],e).objectStore(this[xa])}[Ld](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[ff]("readonly"),o;try{o=i.get(e)}catch(a){return this.nextTick(n,a)}this[Ld](o,function(a,c){if(a)return n(a);if(c===void 0)return n(new cB("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,fB(c))})}_getMany(e,t,n){let i=this[ff]("readonly"),o=e.map(a=>c=>{let f;try{f=i.get(a)}catch(d){return c(d)}f.onsuccess=()=>{let d=f.result;c(null,d===void 0?d:fB(d))},f.onerror=d=>{d.stopPropagation(),c(f.error)}});nX(o,16,n)}_del(e,t,n){let i=this[ff]("readwrite"),o;try{o=i.delete(e)}catch(a){return this.nextTick(n,a)}this[Ld](o,n)}_put(e,t,n,i){let o=this[ff]("readwrite"),a;try{a=o.put(t,e)}catch(c){return this.nextTick(i,c)}this[Ld](a,i)}_iterator(e){return new oX(this,this[xa],e)}_batch(e,t,n){let i=this[ff]("readwrite"),o=i.transaction,a=0,c;o.onabort=function(){n(c||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function f(){let d=e[a++],m=d.key,w;try{w=d.type==="del"?i.delete(m):i.put(d.value,m)}catch(E){c=E,o.abort();return}a<e.length?w.onsuccess=f:typeof o.commit=="function"&&o.commit()}f()}_clear(e,t){let n,i;try{n=aX(e)}catch{return this.nextTick(t)}if(e.limit>=0)return sX(this,this[xa],n,e,t);try{let o=this[ff]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(t,o)}this[Ld](i,t)}_close(e){this[Od].close(),this.nextTick(e)}};U0.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=hB),t=iX(t,lB);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[lB]};pB.BrowserLevel=U0});var yB=ue(mB=>{h();p();mB.Level=dB().BrowserLevel});var uQ={};xt(uQ,{Auth:()=>nR,CID:()=>we,Capabilities:()=>iR,Crypto:()=>zf,Depot:()=>oR,EMPTY_CID:()=>qm,FileSystem:()=>iu,Manners:()=>sR,ProgramError:()=>fR,ROOT_FILESYSTEM_PERMISSIONS:()=>$h,Reference:()=>aR,Session:()=>fs,Storage:()=>uR,VERSION:()=>Nf,WASM_WNFS_VERSION:()=>Vb,addRootFileSystemPermissions:()=>U9,appId:()=>Fb,apps:()=>NE,assemble:()=>mR,auth:()=>lR,capabilities:()=>hR,compositions:()=>sQ,decodeCID:()=>Oe,defaultAuthComponent:()=>gR,defaultCapabilitiesComponent:()=>wR,defaultCryptoComponent:()=>ph,defaultDepotComponent:()=>KE,defaultMannersComponent:()=>Nd,defaultReferenceComponent:()=>jE,defaultStorageComponent:()=>pf,depot:()=>pR,did:()=>di,encodeCID:()=>Jn,extractConfig:()=>$E,fission:()=>Sn,gatherComponents:()=>yR,isCapabilityBasedAuthConfiguration:()=>zE,isSupported:()=>bR,namespace:()=>Vf,path:()=>Bn,permissionPaths:()=>zh,program:()=>oQ,reference:()=>dR,ucan:()=>En});h();p();h();p();h();p();h();p();h();p();h();p();function Yu(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Fh(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Yu(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Bh(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));let t=Fh(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return Yu(t)}h();p();h();p();h();p();h();p();var ub={};xt(ub,{identity:()=>D7});h();p();h();p();h();p();function _7(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var c=r.length,f=r.charAt(0),d=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function w(F){if(F instanceof Uint8Array||(ArrayBuffer.isView(F)?F=new Uint8Array(F.buffer,F.byteOffset,F.byteLength):Array.isArray(F)&&(F=Uint8Array.from(F))),!(F instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(F.length===0)return"";for(var N=0,he=0,de=0,Pe=F.length;de!==Pe&&F[de]===0;)de++,N++;for(var ie=(Pe-de)*m+1>>>0,be=new Uint8Array(ie);de!==Pe;){for(var Ae=F[de],Y=0,ge=ie-1;(Ae!==0||Y<he)&&ge!==-1;ge--,Y++)Ae+=256*be[ge]>>>0,be[ge]=Ae%c>>>0,Ae=Ae/c>>>0;if(Ae!==0)throw new Error("Non-zero carry");he=Y,de++}for(var _e=ie-he;_e!==ie&&be[_e]===0;)_e++;for(var Me=f.repeat(N);_e<ie;++_e)Me+=r.charAt(be[_e]);return Me}function E(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return new Uint8Array;var N=0;if(F[N]!==" "){for(var he=0,de=0;F[N]===f;)he++,N++;for(var Pe=(F.length-N)*d+1>>>0,ie=new Uint8Array(Pe);F[N];){var be=t[F.charCodeAt(N)];if(be===255)return;for(var Ae=0,Y=Pe-1;(be!==0||Ae<de)&&Y!==-1;Y--,Ae++)be+=c*ie[Y]>>>0,ie[Y]=be%256>>>0,be=be/256>>>0;if(be!==0)throw new Error("Non-zero carry");de=Ae,N++}if(F[N]!==" "){for(var ge=Pe-de;ge!==Pe&&ie[ge]===0;)ge++;for(var _e=new Uint8Array(he+(Pe-ge)),Me=he;ge!==Pe;)_e[Me++]=ie[ge++];return _e}}}function T(F){var N=E(F);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:E,decode:T}}var x7=_7,E7=x7,ES=E7;h();p();var UQ=new Uint8Array(0);var AS=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Vs=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var SS=r=>new TextEncoder().encode(r),DS=r=>new TextDecoder().decode(r);var ib=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},ob=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return PS(this,e)}},sb=class{constructor(e){this.decoders=e}or(e){return PS(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},PS=(r,e)=>new sb({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),ab=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new ib(e,t,n),this.decoder=new ob(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},If=({name:r,prefix:e,encode:t,decode:n})=>new ab(r,e,t,n),Na=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=ES(t,e);return If({prefix:r,name:e,encode:n,decode:o=>Vs(i(o))})},A7=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),c=0,f=0,d=0;for(let m=0;m<o;++m){let w=i[r[m]];if(w===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<t|w,c+=t,c>=8&&(c-=8,a[d++]=255&f>>c)}if(c>=t||255&f<<8-c)throw new SyntaxError("Unexpected end of data");return a},S7=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,c=0;for(let f=0;f<r.length;++f)for(c=c<<8|r[f],a+=8;a>t;)a-=t,o+=e[i&c>>a];if(a&&(o+=e[i&c<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Dr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>If({prefix:e,name:r,encode(i){return S7(i,n,t)},decode(i){return A7(i,n,t,r)}});var D7=If({prefix:"\0",name:"identity",encode:r=>DS(r),decode:r=>SS(r)});var cb={};xt(cb,{base2:()=>C7});h();p();var C7=Dr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fb={};xt(fb,{base8:()=>P7});h();p();var P7=Dr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var lb={};xt(lb,{base10:()=>I7});h();p();var I7=Na({prefix:"9",name:"base10",alphabet:"0123456789"});var hb={};xt(hb,{base16:()=>T7,base16upper:()=>k7});h();p();var T7=Dr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),k7=Dr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var pb={};xt(pb,{base32:()=>Tf,base32hex:()=>O7,base32hexpad:()=>U7,base32hexpadupper:()=>N7,base32hexupper:()=>L7,base32pad:()=>B7,base32padupper:()=>R7,base32upper:()=>F7,base32z:()=>M7});h();p();var Tf=Dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),F7=Dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),B7=Dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),R7=Dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),O7=Dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),L7=Dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),U7=Dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),N7=Dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),M7=Dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var db={};xt(db,{base36:()=>K7,base36upper:()=>j7});h();p();var K7=Na({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),j7=Na({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var mb={};xt(mb,{base58btc:()=>as,base58flickr:()=>$7});h();p();var as=Na({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$7=Na({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var yb={};xt(yb,{base64:()=>z7,base64pad:()=>q7,base64url:()=>W7,base64urlpad:()=>V7});h();p();var z7=Dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),q7=Dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),W7=Dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),V7=Dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var gb={};xt(gb,{base256emoji:()=>X7});h();p();var IS=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),H7=IS.reduce((r,e,t)=>(r[t]=e,r),[]),G7=IS.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Y7(r){return r.reduce((e,t)=>(e+=H7[t],e),"")}function J7(r){let e=[];for(let t of r){let n=G7[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var X7=If({prefix:"\u{1F680}",name:"base256emoji",encode:Y7,decode:J7});var _b={};xt(_b,{sha256:()=>yK,sha512:()=>gK});h();p();h();p();h();p();h();p();h();p();var Q7=FS,TS=128,Z7=127,eK=~Z7,tK=Math.pow(2,31);function FS(r,e,t){e=e||[],t=t||0;for(var n=t;r>=tK;)e[t++]=r&255|TS,r/=128;for(;r&eK;)e[t++]=r&255|TS,r>>>=7;return e[t]=r|0,FS.bytes=t-n+1,e}var rK=wb,nK=128,kS=127;function wb(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c)throw wb.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&kS)<<i:(a&kS)*Math.pow(2,i),i+=7}while(a>=nK);return wb.bytes=o-n,t}var iK=Math.pow(2,7),oK=Math.pow(2,14),sK=Math.pow(2,21),aK=Math.pow(2,28),uK=Math.pow(2,35),cK=Math.pow(2,42),fK=Math.pow(2,49),lK=Math.pow(2,56),hK=Math.pow(2,63),pK=function(r){return r<iK?1:r<oK?2:r<sK?3:r<aK?4:r<uK?5:r<cK?6:r<fK?7:r<lK?8:r<hK?9:10},dK={encode:Q7,decode:rK,encodingLength:pK},mK=dK,Rh=mK;var Oh=(r,e=0)=>[Rh.decode(r,e),Rh.decode.bytes],kf=(r,e,t=0)=>(Rh.encode(r,e,t),e),Ff=r=>Rh.encodingLength(r);var Ju=(r,e)=>{let t=e.byteLength,n=Ff(r),i=n+Ff(t),o=new Uint8Array(i+t);return kf(r,o,0),kf(t,o,n),o.set(e,i),new Bf(r,t,e,o)},BS=r=>{let e=Vs(r),[t,n]=Oh(e),[i,o]=Oh(e.subarray(n)),a=e.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new Bf(t,i,a,e)},RS=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&AS(r.bytes,e.bytes),Bf=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var vb=({name:r,code:e,encode:t})=>new bb(r,e,t),bb=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Ju(this.code,t):t.then(n=>Ju(this.code,n))}else throw Error("Unknown type, must be binary type")}};var LS=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),yK=vb({name:"sha2-256",code:18,encode:LS("SHA-256")}),gK=vb({name:"sha2-512",code:19,encode:LS("SHA-512")});var xb={};xt(xb,{identity:()=>vK});h();p();var US=0,wK="identity",NS=Vs,bK=r=>Ju(US,NS(r)),vK={code:US,name:wK,encode:NS,digest:bK};h();p();h();p();var $Z=new TextEncoder,zZ=new TextDecoder;h();p();h();p();var Gr=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Om,byteLength:Om,code:Rm,version:Rm,multihash:Rm,bytes:Rm,_baseCache:Om,asCID:Om})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==Uh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==DK)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Gr.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Ju(e,t);return Gr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&RS(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return AK(t,i,e||as.encoder);default:return SK(t,i,e||Tf.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return PK(/^0\.0/,IK),!!(e&&(e[KS]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Gr)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new Gr(t,n,i,o||MS(t,n,i.bytes))}else if(e!=null&&e[KS]===!0){let{version:t,multihash:n,code:i}=e,o=BS(n);return Gr.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==Uh)throw new Error(`Version 0 CID must use dag-pb (code: ${Uh}) block encoding`);return new Gr(e,t,n,n.bytes)}case 1:{let i=MS(e,t,n.bytes);return new Gr(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Gr.create(0,Uh,e)}static createV1(e,t){return Gr.create(1,e,t)}static decode(e){let[t,n]=Gr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Gr.inspectBytes(e),n=t.size-t.multihashSize,i=Vs(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),a=new Bf(t.multihashCode,t.digestSize,o,i);return[t.version===0?Gr.createV0(a):Gr.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[w,E]=Oh(e.subarray(t));return t+=E,w},i=n(),o=Uh;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=t,c=n(),f=n(),d=t+f,m=d-a;return{version:i,codec:o,multihashCode:c,digestSize:f,multihashSize:m,size:d}}static parse(e,t){let[n,i]=EK(e,t),o=Gr.decode(i);return o._baseCache.set(n,e),o}},EK=(r,e)=>{switch(r[0]){case"Q":{let t=e||as;return[as.prefix,t.decode(`${as.prefix}${r}`)]}case as.prefix:{let t=e||as;return[as.prefix,t.decode(r)]}case Tf.prefix:{let t=e||Tf;return[Tf.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},AK=(r,e,t)=>{let{prefix:n}=t;if(n!==as.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},SK=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},Uh=112,DK=18,MS=(r,e,t)=>{let n=Ff(r),i=n+Ff(e),o=new Uint8Array(i+t.byteLength);return kf(r,o,0),kf(e,o,n),o.set(t,i),o},KS=Symbol.for("@ipld/js-cid/CID"),Rm={writable:!1,configurable:!1,enumerable:!0},Om={writable:!1,enumerable:!1,configurable:!1},CK="0.0.0-dev",PK=(r,e)=>{if(r.test(CK))console.warn(e);else throw new Error(e)},IK=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var Eb={...ub,...cb,...fb,...lb,...hb,...pb,...db,...mb,...yb,...gb},nee={..._b,...xb};function $S(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var jS=$S("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Ab=$S("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Fh(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),TK={utf8:jS,"utf-8":jS,hex:Eb.base16,latin1:Ab,ascii:Ab,binary:Ab,...Eb},Lm=TK;function Te(r,e="utf8"){let t=Lm[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Yu(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}h();p();function Ge(r,e="utf8"){let t=Lm[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();var ME=Ze(Um(),1);h();p();h();p();var Bn={};xt(Bn,{Branch:()=>pi,Kind:()=>qS,appData:()=>Mh,combine:()=>jh,directory:()=>xn,file:()=>Db,fromPosix:()=>Kh,isBranch:()=>cs,isDirectory:()=>Yr,isFile:()=>us,isRootDirectory:()=>WS,isSameBranch:()=>Nm,isSameKind:()=>Cb,kind:()=>Mm,log:()=>Do,map:()=>Pb,parent:()=>Ib,removeBranch:()=>Xu,root:()=>Nh,terminus:()=>Tb,toPosix:()=>Cr,unwrap:()=>nr});h();p();var pi=(c=>(c.Public="public",c.Pretty="p",c.Private="private",c.PrivateLog="privateLog",c.Shared="shared",c.SharedCounter="sharedCounter",c.Version="version",c))(pi||{}),qS=(t=>(t.Directory="directory",t.File="file",t))(qS||{});function xn(...r){if(r.some(e=>e.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{directory:r}}function Db(...r){if(r.some(e=>e.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{file:r}}function Nh(){return{directory:[]}}function Mh(r,e){let t=xn("private","Apps",r.creator,r.name);return e?jh(t,e):t}function Kh(r){let e=r.replace(/^\/+/,"").split("/");return r.endsWith("/")?{directory:e.slice(0,-1)}:r===""?Nh():{file:e}}function Cr(r,{absolute:e}={absolute:!1}){let t=e?"/":"",n=nr(r).join("/");return Yr(r)?t+n+(n.length?"/":""):t+n}function jh(r,e){return Pb(t=>nr(r).concat(t),e)}function cs(r,e){return nr(e)[0]===r}function Yr(r){return!!r.directory}function us(r){return!!r.file}function WS(r){return r.directory.length===0}function Nm(r,e){return nr(r)[0]===nr(e)[0]}function Cb(r,e){return Yr(r)&&Yr(e)?!0:!!(us(r)&&us(e))}function Mm(r){return Yr(r)?"directory":"file"}function Pb(r,e){return Yr(e)?{directory:r(e.directory)}:us(e)?{file:r(e.file)}:e}function Ib(r){return Yr(r)&&WS(r)?null:xn(...nr(r).slice(0,-1))}function Xu(r){return Pb(e=>Yr(r)||e.length>1?e.slice(1):e,r)}function Tb(r){let e=nr(r);return e.length<1?null:e[e.length-1]}function nr(r){return Yr(r)?r.directory:us(r)?r.file:[]}function Do(r){return`[ ${r.join(", ")} ]`}async function Km({crypto:r,accountDID:e,path:t}){return`wnfs:${e}:bareNameFilter:${await VS(r,t)}`}async function Qu({crypto:r,accountDID:e,path:t}){return`wnfs:${e}:readKey:${await VS(r,t)}`}async function VS(r,e){return Ge(await r.hash.sha256(Te("/"+nr(e).join("/"),"utf8")),"base64pad")}h();p();var $h={fs:{private:[Nh()],public:[Nh()]}};function Fb(r){return`${r.creator}/${r.name}`}function zh(r){let e=[];return r.app&&e.push(Mh(r.app)),r.fs?.private&&(e=e.concat(r.fs?.private.map(t=>jh(xn("private"),t)))),r.fs?.public&&(e=e.concat(r.fs?.public.map(t=>jh(xn("public"),t)))),e}h();p();var En={};xt(En,{build:()=>hn,decode:()=>Xn,encode:()=>tn,encodeHeader:()=>Vm,encodePayload:()=>Hm,isExpired:()=>Gs,isSelfSigned:()=>Hb,isValid:()=>ja,rootIssuer:()=>$a,sign:()=>d8});h();p();h();p();h();p();h();p();var jm={};xt(jm,{equal:()=>FK});h();p();var FK=(r,e)=>{let t=new Uint8Array(r),n=new Uint8Array(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0};var Hs={};xt(Hs,{decode:()=>HS,encode:()=>GS,makeUrlSafe:()=>YS,makeUrlUnsafe:()=>JS,urlDecode:()=>BK,urlEncode:()=>Bb});h();p();function HS(r){return Ge(Te(r,"base64pad"))}function GS(r){return Ge(Te(r),"base64pad")}function BK(r){return HS(JS(r))}function Bb(r){return YS(GS(r))}function YS(r){return r.replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}function JS(r){return r.replace(/_/g,"/").replace(/-/g,"+")}h();p();var XS=async r=>new Promise((e,t)=>{let n=()=>t(new Error("Failed to read file")),i=new FileReader;i.addEventListener("load",o=>{let a=o?.target?.result||null;if(a==null){n();return}if(typeof a=="string"){e(Te(a));return}e(new Uint8Array(a))}),i.addEventListener("error",()=>i.abort()),i.addEventListener("abort",n),i.readAsArrayBuffer(r)});h();p();h();p();h();p();h();p();var RK=t8,ZS=128,OK=127,LK=~OK,UK=Math.pow(2,31);function t8(r,e,t){e=e||[],t=t||0;for(var n=t;r>=UK;)e[t++]=r&255|ZS,r/=128;for(;r&LK;)e[t++]=r&255|ZS,r>>>=7;return e[t]=r|0,t8.bytes=t-n+1,e}var NK=Rb,MK=128,e8=127;function Rb(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c)throw Rb.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&e8)<<i:(a&e8)*Math.pow(2,i),i+=7}while(a>=MK);return Rb.bytes=o-n,t}var KK=Math.pow(2,7),jK=Math.pow(2,14),$K=Math.pow(2,21),zK=Math.pow(2,28),qK=Math.pow(2,35),WK=Math.pow(2,42),VK=Math.pow(2,49),HK=Math.pow(2,56),GK=Math.pow(2,63),YK=function(r){return r<KK?1:r<jK?2:r<$K?3:r<zK?4:r<qK?5:r<WK?6:r<VK?7:r<HK?8:r<GK?9:10},JK={encode:RK,decode:NK,encodingLength:YK},XK=JK,qh=XK;var Wh=(r,e=0)=>[qh.decode(r,e),qh.decode.bytes],Rf=(r,e,t=0)=>(qh.encode(r,e,t),e),Of=r=>qh.encodingLength(r);h();p();h();p();var ste=new Uint8Array(0);var r8=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Co=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var n8=r=>new TextEncoder().encode(r),i8=r=>new TextDecoder().decode(r);var Ma=(r,e)=>{let t=e.byteLength,n=Of(r),i=n+Of(t),o=new Uint8Array(i+t);return Rf(r,o,0),Rf(t,o,n),o.set(e,i),new Lf(r,t,e,o)},ln=r=>{let e=Co(r),[t,n]=Wh(e),[i,o]=Wh(e.subarray(n)),a=e.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new Lf(t,i,a,e)},o8=(r,e)=>{if(r===e)return!0;{let t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&r8(r.bytes,t.bytes)}},Lf=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var Kb={};xt(Kb,{base58btc:()=>Ir,base58flickr:()=>n9});h();p();h();p();h();p();function QK(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var c=r.length,f=r.charAt(0),d=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function w(F){if(F instanceof Uint8Array||(ArrayBuffer.isView(F)?F=new Uint8Array(F.buffer,F.byteOffset,F.byteLength):Array.isArray(F)&&(F=Uint8Array.from(F))),!(F instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(F.length===0)return"";for(var N=0,he=0,de=0,Pe=F.length;de!==Pe&&F[de]===0;)de++,N++;for(var ie=(Pe-de)*m+1>>>0,be=new Uint8Array(ie);de!==Pe;){for(var Ae=F[de],Y=0,ge=ie-1;(Ae!==0||Y<he)&&ge!==-1;ge--,Y++)Ae+=256*be[ge]>>>0,be[ge]=Ae%c>>>0,Ae=Ae/c>>>0;if(Ae!==0)throw new Error("Non-zero carry");he=Y,de++}for(var _e=ie-he;_e!==ie&&be[_e]===0;)_e++;for(var Me=f.repeat(N);_e<ie;++_e)Me+=r.charAt(be[_e]);return Me}function E(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return new Uint8Array;var N=0;if(F[N]!==" "){for(var he=0,de=0;F[N]===f;)he++,N++;for(var Pe=(F.length-N)*d+1>>>0,ie=new Uint8Array(Pe);F[N];){var be=t[F.charCodeAt(N)];if(be===255)return;for(var Ae=0,Y=Pe-1;(be!==0||Ae<de)&&Y!==-1;Y--,Ae++)be+=c*ie[Y]>>>0,ie[Y]=be%256>>>0,be=be/256>>>0;if(be!==0)throw new Error("Non-zero carry");de=Ae,N++}if(F[N]!==" "){for(var ge=Pe-de;ge!==Pe&&ie[ge]===0;)ge++;for(var _e=new Uint8Array(he+(Pe-ge)),Me=he;ge!==Pe;)_e[Me++]=ie[ge++];return _e}}}function T(F){var N=E(F);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:E,decode:T}}var ZK=QK,e9=ZK,s8=e9;h();p();var Lb=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ub=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return a8(this,e)}},Nb=class{constructor(e){this.decoders=e}or(e){return a8(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},a8=(r,e)=>new Nb({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),Mb=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Lb(e,t,n),this.decoder=new Ub(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Uf=({name:r,prefix:e,encode:t,decode:n})=>new Mb(r,e,t,n),Ka=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=s8(t,e);return Uf({prefix:r,name:e,encode:n,decode:o=>Co(i(o))})},t9=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),c=0,f=0,d=0;for(let m=0;m<o;++m){let w=i[r[m]];if(w===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<t|w,c+=t,c>=8&&(c-=8,a[d++]=255&f>>c)}if(c>=t||255&f<<8-c)throw new SyntaxError("Unexpected end of data");return a},r9=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,c=0;for(let f=0;f<r.length;++f)for(c=c<<8|r[f],a+=8;a>t;)a-=t,o+=e[i&c>>a];if(a&&(o+=e[i&c<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Pr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Uf({prefix:e,name:r,encode(i){return r9(i,n,t)},decode(i){return t9(i,n,t,r)}});var Ir=Ka({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),n9=Ka({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $b={};xt($b,{base32:()=>Kt,base32hex:()=>s9,base32hexpad:()=>u9,base32hexpadupper:()=>c9,base32hexupper:()=>a9,base32pad:()=>jb,base32padupper:()=>o9,base32upper:()=>i9,base32z:()=>f9});h();p();var Kt=Pr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),i9=Pr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jb=Pr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),o9=Pr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),s9=Pr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),a9=Pr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),u9=Pr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),c9=Pr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),f9=Pr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});h();p();var l9=(r,e)=>{let{bytes:t,version:n}=r;switch(n){case 0:return p9(t,zb(r),e||Ir.encoder);default:return d9(t,zb(r),e||Kt.encoder)}},u8=new WeakMap,zb=r=>{let e=u8.get(r);if(e==null){let t=new Map;return u8.set(r,t),t}return e},we=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==Vh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==m9)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return we.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Ma(e,t);return we.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return we.equals(this,e)}static equals(e,t){let n=t;return n&&e.code===n.code&&e.version===n.version&&o8(e.multihash,n.multihash)}toString(e){return l9(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof we)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:i,multihash:o,bytes:a}=t;return new we(n,i,o,a||c8(n,i,o.bytes))}else if(t[y9]===!0){let{version:n,multihash:i,code:o}=t,a=ln(i);return we.create(n,o,a)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Vh)throw new Error(`Version 0 CID must use dag-pb (code: ${Vh}) block encoding`);return new we(e,t,n,n.bytes)}case 1:{let i=c8(e,t,n.bytes);return new we(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return we.create(0,Vh,e)}static createV1(e,t){return we.create(1,e,t)}static decode(e){let[t,n]=we.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=we.inspectBytes(e),n=t.size-t.multihashSize,i=Co(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),a=new Lf(t.multihashCode,t.digestSize,o,i);return[t.version===0?we.createV0(a):we.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[w,E]=Wh(e.subarray(t));return t+=E,w},i=n(),o=Vh;if(i===18?(i=0,t=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=t,c=n(),f=n(),d=t+f,m=d-a;return{version:i,codec:o,multihashCode:c,digestSize:f,multihashSize:m,size:d}}static parse(e,t){let[n,i]=h9(e,t),o=we.decode(i);return zb(o).set(n,e),o}},h9=(r,e)=>{switch(r[0]){case"Q":{let t=e||Ir;return[Ir.prefix,t.decode(`${Ir.prefix}${r}`)]}case Ir.prefix:{let t=e||Ir;return[Ir.prefix,t.decode(r)]}case Kt.prefix:{let t=e||Kt;return[Kt.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},p9=(r,e,t)=>{let{prefix:n}=t;if(n!==Ir.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},d9=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},Vh=112,m9=18,c8=(r,e,t)=>{let n=Of(r),i=n+Of(e),o=new Uint8Array(i+t.byteLength);return Rf(r,o,0),Rf(e,o,n),o.set(t,i),o},y9=Symbol.for("@ipld/js-cid/CID");h();p();function mt(r,e){return typeof r=="object"&&r!=null&&e in r}var g9=r=>r!==void 0,zm=r=>r!==null;var f8=r=>g9(r)&&zm(r),qb=r=>typeof r=="boolean";function Hh(r){return mt(r,"algorithm")&&mt(r,"extractable")&&mt(r,"type")}var Yn=r=>typeof r=="number",Ht=r=>typeof r=="string",Ye=r=>r!==null&&typeof r=="object",l8=r=>typeof Blob>"u"?!1:r instanceof Blob||Ye(r)&&r?.constructor?.name==="Blob";var qm="Qmc5m94Gu7z62RC8waSKkZUrCCBJPyHbkpmGzEePxy2oXJ";function Oe(r){let e=we.asCID(r);if(e)return e;if(typeof r=="string")return we.parse(r);if(typeof r=="object"&&"version"in r&&"code"in r&&"multihash"in r)return we.create(r.version,r.code,r.multihash);if(typeof r=="object"&&mt(r,"version")&&mt(r,"code")&&Yn(r.code)&&mt(r,"hash")&&Ye(r.hash)&&Object.values(r.hash).every(Yn)){let t=ln(new Uint8Array(Object.values(r.hash)));return we.create(r.version,r.code,t)}throw new Error(`Could not decode CID: ${JSON.stringify(r)}`)}function Jn(r){return typeof r=="string"?r:r.toString()}h();p();h();p();var Wb=(r,e)=>{let{[e]:t,...n}=r;return n};var h8=(r,e)=>{let t={};return Object.entries(r).forEach(([n,i])=>{t[n]=e(i,n)}),t};h();p();var Nf="0.35.2",Vb="0.1.7";h();p();var w9=typeof self<"u"&&typeof self.location=="object",Gh=r=>{if(!w9)throw new Error(`Must be in browser to use method. Provide a node-compatible implementation for ${r}`)};h();p();h();p();var Wm="did:key:z",p8=(r,e)=>jm.equal(e,r.slice(0,e.byteLength));function Mf(r,e,t){let n=r.did.keyTypes[t]?.magicBytes;if(n===null)throw new Error(`Key type '${t}' not supported, available types: ${Object.keys(r.did.keyTypes).join(", ")}`);let i=Bh([n,e]);return Wm+Ge(i,"base58btc")}function Zu(r,e){if(!e.startsWith(Wm))throw new Error("Please use a base58-encoded DID formatted `did:key:z...`");let t=e.substr(Wm.length),n=Te(t,"base58btc"),i=Object.entries(r.did.keyTypes).find(([o,a])=>p8(n,a.magicBytes));if(!i)throw new Error("Unsupported key algorithm.");return{publicKey:n.slice(i[1].magicBytes.length),type:i[0]}}async function hn({addSignature:r=!0,audience:e,dependencies:t,facts:n=[],issuer:i,lifetimeInSeconds:o=30,expiration:a,potency:c="APPEND",proof:f,resource:d}){let m=Math.floor(Date.now()/1e3),w=f?typeof f=="string"?Xn(f):f:null,E={alg:await t.crypto.keystore.getUcanAlgorithm(),typ:"JWT",uav:"1.0.0"},T=a||m+o,F=m-60;if(w){let de=w.payload;T=Math.min(de.exp,T),F=Math.max(de.nbf,F)}let N={aud:e,exp:T,fct:n,iss:i,nbf:F,prf:f?typeof f=="string"?f:tn(f):null,ptc:c,rsc:d||(w?w.payload.rsc:"*")},he=r?await d8(t.crypto,E,N):null;return{header:E,payload:N,signature:he}}function Xn(r){let e=r.split("."),t=JSON.parse(Hs.urlDecode(e[0])),n=JSON.parse(Hs.urlDecode(e[1]));return{header:t,payload:n,signature:e[2]||null}}function tn(r){let e=Vm(r.header),t=Hm(r.payload);return e+"."+t+"."+r.signature}function Vm(r){return Hs.urlEncode(JSON.stringify(r))}function Hm(r){return Hs.urlEncode(JSON.stringify({...r}))}function Gs(r){return r.payload.exp<=Math.floor(Date.now()/1e3)}function Hb(r){return r.payload.iss===r.payload.aud}async function ja(r,e){try{let t=Vm(e.header),n=Hm(e.payload),{publicKey:i,type:o}=Zu(r,e.payload.iss),c=await r.did.keyTypes[o].verify({publicKey:i,message:Te(`${t}.${n}`,"utf8"),signature:Te(e.signature||"","base64url")});if(!c)return c;if(!e.payload.prf)return!0;let f=Xn(e.payload.prf),d=f.payload.aud===e.payload.iss;return d&&await ja(r,f)}catch{return!1}}function $a(r,e=0){let t=typeof r=="string"?v9(r,e):r.payload;return t.prf?$a(t.prf,e+1):t.iss}async function d8(r,e,t){let n=Vm(e),i=Hm(t);return Ge(await r.keystore.sign(Te(`${n}.${i}`,"utf8")),"base64url")}function v9(r,e){try{return JSON.parse(Hs.urlDecode(r.split(".")[1]))}catch{throw new Error(`Invalid UCAN (${e} level${e===1?"":"s"} deep): \`${r}\``)}}h();p();var ec=class{constructor({storage:e,storageName:t}){this.memoryCache=[],this.dictionary={},this.storage=e,this.storageName=t}static async create(e){let t=new this.prototype.constructor(e);return t.memoryCache=await t.getAll(),t.dictionary=t.toDictionary(t.memoryCache),t}async add(e){let t=Array.isArray(e)?e:[e];this.memoryCache=[...this.memoryCache,...t],this.dictionary=this.toDictionary(this.memoryCache),await this.storage.setItem(this.storageName,this.memoryCache.map(this.toJSON).join("|||"))}clear(){return this.memoryCache=[],this.dictionary={},this.storage.removeItem(this.storageName)}find(e){return this.memoryCache.find(e)||null}getByIndex(e){return this.memoryCache[e]}async getAll(){let e=await this.storage.getItem(this.storageName);return Ht(e)?e.split("|||").map(this.fromJSON):[]}indexOf(e){return this.memoryCache.indexOf(e)}length(){return this.memoryCache.length}fromJSON(e){return JSON.parse(e)}toJSON(e){return JSON.stringify(e)}getByKey(e){return this.dictionary[e]}toDictionary(e){return e.reduce((t,n,i)=>({...t,[i.toString()]:n}),{})}};function m8({storage:r}){return Gb.create({storage:r,storageName:r.KEYS.UCANS})}var Gb=class extends ec{constructor(e){super(e)}fromJSON(e){return Xn(e)}toJSON(e){return tn(e)}toDictionary(e){return e.reduce((t,n)=>({...t,[Jb(n.payload.rsc)]:n}),{})}async lookupFilesystemUcan(e){let t=this.getByKey("*");if(t)return t;let n=e==="*",i=n?!1:Yr(e),o=n?["*"]:nr(e),a=Yb();return o.reduce((c,f,d)=>{if(c)return c;let m=d===0,w=o.slice(0,o.length-d),E=Cr(m&&!i?Db(...w):xn(...w));return this.getByKey(`${a}${E}`)||null},null)}async lookupAppUcan(e){return this.getByKey("*")||this.getByKey("app:*")||this.getByKey(`app:${e}`)}},y8="wnfs";function Yb(r){return y8+":"}function Jb(r){if(typeof r!="object")return r;let e=Array.from(Object.entries(r))[0];return e[0]+":"+(e[0]===y8?e[1].replace(/^\/+/,""):e[1])}var Kf="capabilities";async function w8({capabilities:r,crypto:e,reference:t,storage:n}){if(r.ucans.length===0)throw new Error("Expected at least one UCAN");await x9({reference:t,ucans:r.ucans});let i=await t.didRoot.lookup(r.username);await r.fileSystemSecrets.reduce(async(o,a)=>{await o,await _9({accountDID:i,crypto:e,storage:n,bareNameFilter:a.bareNameFilter,readKey:a.readKey,path:a.path})},Promise.resolve())}async function _9({accountDID:r,bareNameFilter:e,crypto:t,path:n,readKey:i,storage:o}){let a=await Qu({accountDID:r,crypto:t,path:n}),c=await Km({accountDID:r,crypto:t,path:n});await t.keystore.importSymmKey(i,a),await o.setItem(c,e)}async function x9({reference:r,ucans:e}){await r.repositories.ucans.add(e)}function b8(r,{app:e,fs:t,raw:n}){let i,o=Yb(),a=r.getByKey("*");if(a&&!Gs(a)&&!Hb(a))return a;if(e){let c=o+Cr(Mh(e)),f=r.getByKey(c);if(!f||Gs(f))return null;i=f}return t?.private&&!t.private.every(f=>{let d=`${o}private/`+Cr(f),m=r.getByKey(d);return i=m,m&&!Gs(m)})||t?.public&&!t.public.every(f=>{let d=`${o}public/`+Cr(f),m=r.getByKey(d);return i=m,m&&!Gs(m)})||n&&!n.every(f=>{let d=Jb(f.rsc),m=r.getByKey(d);return i=m,m&&!Gs(m)})?null:i||null}async function v8(r,e,t){return zh(t).reduce((n,i)=>n.then(async o=>{if(o===!1||cs("public",i))return o;let a=await Qu({accountDID:e,crypto:r,path:i});return r.keystore.keyExists(a)}),Promise.resolve(!0))}h();p();async function za(r){let e=await r.keystore.publicExchangeKey(),t=await r.keystore.getAlgorithm();return Mf(r,e,t)}async function ar(r){let e=await r.keystore.publicWriteKey(),t=await r.keystore.getAlgorithm();return Mf(r,e,t)}h();p();async function Xb({crypto:r,accountDID:e}){let t=await x8(r,e);return r.keystore.exportSymmKey(t)}async function jf({crypto:r,accountDID:e,readKey:t}){let n=await x8(r,e);return r.keystore.importSymmKey(t,n)}function _8(r){return Te(r,"base64pad")}function x8(r,e){let t=xn("private");return Qu({crypto:r,path:t,accountDID:e})}h();p();var Yh=(r,e,t)=>({major:r,minor:e,patch:t}),tc=r=>{let e=r.split(".").map(t=>parseInt(t));return e.length!==3||e.some(t=>typeof t!="number")?null:{major:e[0],minor:e[1],patch:e[2]}},rc=r=>{let{major:e,minor:t,patch:n}=r;return`${e}.${t}.${n}`},Zb=(r,e)=>r.major===e.major&&r.minor===e.minor&&r.patch===e.patch,Gm=(r,e)=>r.major!=e.major?r.major<e.major:r.minor!=e.minor?r.minor<e.minor:r.patch<e.patch,E8=(r,e)=>Gm(e,r);function A8(r,e){return Gm(e,r)||Zb(r,e)}h();p();var Jh,eo,fs=class{constructor(e){Qw(this,Jh,void 0);Qw(this,eo,void 0);Zw(this,Jh,e.crypto),Zw(this,eo,e.storage),this.fs=e.fs,this.type=e.type,this.username=e.username}async destroy(){await is(this,eo).removeItem(is(this,eo).KEYS.ACCOUNT_UCAN),await is(this,eo).removeItem(is(this,eo).KEYS.CID_LOG),await is(this,eo).removeItem(is(this,eo).KEYS.SESSION),await is(this,eo).removeItem(is(this,eo).KEYS.UCANS),await is(this,Jh).keystore.clearStore(),this.fs&&this.fs.deactivate()}};Jh=new WeakMap,eo=new WeakMap;function S9(r){return Ye(r)&&mt(r,"username")&&mt(r,"type")}async function ev(r){return r.getItem(r.KEYS.SESSION).then(e=>e||null).then(e=>e?JSON.parse(e):null).then(e=>S9(e)?e:null)}function nc(r,e){return r.setItem(r.KEYS.SESSION,JSON.stringify({type:e.type,username:e.username}))}h();p();var di={};xt(di,{agent:()=>ar,didToPublicKey:()=>Zu,exchange:()=>za,publicKeyToDid:()=>Mf,sharing:()=>za,ucan:()=>ar,write:()=>ar});h();p();var Io="webCrypto";async function rv(r,e){let t=await r.reference.didRoot.lookup(e),n=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN);if(n){let i=$a(n),o=Xn(n),{ptc:a}=o.payload;return t===i&&a==="SUPER_USER"}else{let i=await ar(r.crypto);return t===i}}async function nv(r,e,t){let n=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN)??void 0,i=await hn({dependencies:r,audience:t,issuer:await ar(r.crypto),lifetimeInSeconds:60*60*24*30*12*1e3,potency:"SUPER_USER",proof:n});return{token:tn(i)}}async function D9(r,e,t){let{token:n}=t,i=Xn(n);await ja(r.crypto,i)&&(await r.storage.setItem(r.storage.KEYS.ACCOUNT_UCAN,n),await nc(r.storage,{type:Io,username:e}))}async function iv(r,e){return await nc(r.storage,{type:e.type||Io,username:e.username}),{success:!0}}async function C9(r,e,t){return e?new fs({crypto:r.crypto,storage:r.storage,type:Io,username:e}):null}function Ym(r){return{type:Io,canDelegateAccount:(...e)=>rv(r,...e),delegateAccount:(...e)=>nv(r,...e),linkDevice:(...e)=>D9(r,...e),register:(...e)=>iv(r,...e),session:C9,createChannel:()=>{throw new Error("Not implemented")},isUsernameValid:()=>{throw new Error("Not implemented")},isUsernameAvailable:()=>{throw new Error("Not implemented")}}}h();p();h();p();var zf={};xt(zf,{SymmAlg:()=>jt});h();p();h();p();var ls;(function(r){r.ECC="ecc",r.RSA="rsa"})(ls||(ls={}));var Jm;(function(r){r.P_256="P-256",r.P_384="P-384",r.P_521="P-521"})(Jm||(Jm={}));var Xm;(function(r){r[r.B1024=1024]="B1024",r[r.B2048=2048]="B2048",r[r.B4096=4096]="B4096"})(Xm||(Xm={}));var jt;(function(r){r.AES_CTR="AES-CTR",r.AES_CBC="AES-CBC",r.AES_GCM="AES-GCM"})(jt||(jt={}));var ic;(function(r){r[r.B128=128]="B128",r[r.B192=192]="B192",r[r.B256=256]="B256"})(ic||(ic={}));var $f;(function(r){r.SHA_1="SHA-1",r.SHA_256="SHA-256",r.SHA_384="SHA-384",r.SHA_512="SHA-512"})($f||($f={}));var oc;(function(r){r[r.B8=8]="B8",r[r.B16=16]="B16"})(oc||(oc={}));var _r;(function(r){r.Exchange="exchange",r.Write="write"})(_r||(_r={}));h();p();var jr=class extends Error{constructor(e){super(e),this.name="LinkingError"}},to=class extends Error{constructor(e){super(e),this.name="LinkingWarning"}},Qm=(r,e)=>{switch(e.name){case"LinkingWarning":r.warn(e.message);break;case"LinkingError":throw e;default:throw e}},qf=(r,e,t)=>{try{let n=JSON.parse(r);return e(n)?{ok:!0,value:n}:{ok:!1,error:new to(`${t.participant} received an unexpected message in ${t.callSite}: ${r}. Ignoring message.`)}}catch{return{ok:!1,error:new to(`${t.participant} received a message in ${t.callSite} that it could not parse: ${r}. Ignoring message.`)}}};h();p();var Wf=class{constructor(){this.events=new Map}on(e,t){let n=this.events.get(e);n===void 0?this.events.set(e,new Set([t])):n.add(t)}removeListener(e,t){let n=this.events.get(e);n!==void 0&&(n.delete(t),n.size===0&&this.events.delete(e))}emit(e,t){this.events.get(e)?.forEach(n=>{n.apply(this,[t])})}};var ov=async(r,e)=>{let{username:t}=e,n=m=>Qm(r.manners,m),i=new Wf,o={username:t,sessionKey:null,temporaryRsaPair:null,step:"BROADCAST"},a=async m=>{let{data:w}=m,E=w.arrayBuffer?new TextDecoder().decode(await w.arrayBuffer()):w;switch(o.step){case"BROADCAST":return n(new to("Consumer is not ready to start linking"));case"NEGOTIATION":if(o.sessionKey)n(new to("Consumer already received a session key"));else if(!o.temporaryRsaPair||!o.temporaryRsaPair.privateKey)n(new jr("Consumer missing RSA key pair when handling session key message"));else{let T=await T9(r.crypto,o.temporaryRsaPair.privateKey,E);if(T.ok){o.sessionKey=T.value;let{pin:F,challenge:N}=await k9(r.crypto,o.sessionKey);f.send(N),i?.emit("challenge",{pin:Array.from(F)}),o.step="DELEGATION"}else n(T.error)}break;case"DELEGATION":if(!o.sessionKey)n(new jr("Consumer was missing session key when linking device"));else if(!o.username)n(new jr("Consumer was missing username when linking device"));else{let T=await F9(r.auth,r.crypto,o.sessionKey,o.username,E);if(T.ok){let{approved:F}=T.value;i?.emit("link",{approved:F,username:o.username}),await c()}else n(T.error)}break}},c=async()=>{i?.emit("done",void 0),i=null,f.close(),clearInterval(d)},f=await r.auth.createChannel({handleMessage:a,username:t}),d=setInterval(async()=>{if(o.sessionKey)clearInterval(d);else{let{temporaryRsaPair:m,temporaryDID:w}=await I9(r.crypto);o.temporaryRsaPair=m,o.step="NEGOTIATION",await f.send(w)}},2e3);return{on:(...m)=>i?.on(...m),cancel:c}},I9=async r=>{let e=await r.rsa.genKey(),t=await r.rsa.exportPublicKey(e.publicKey),n=Mf(r,t,"rsa");return{temporaryRsaPair:e,temporaryDID:n}},T9=async(r,e,t)=>{let i=qf(t,o=>Ye(o)&&"iv"in o&&typeof o.iv=="string"&&"msg"in o&&typeof o.msg=="string"&&"sessionKey"in o&&typeof o.sessionKey=="string",{participant:"Consumer",callSite:"handleSessionKey"});if(i.ok){let{iv:o,msg:a,sessionKey:c}=i.value,f=Te(o,"base64pad"),d;try{let F=Te(c,"base64pad");d=await r.rsa.decrypt(F,e)}catch{return{ok:!1,error:new to(`Consumer received a session key in handleSessionKey that it could not decrypt: ${t}. Ignoring message`)}}let m=null;try{m=await r.aes.decrypt(Te(a,"base64pad"),d,jt.AES_GCM,f)}catch{return{ok:!1,error:new jr("Consumer could not decrypt closed UCAN with provided session key.")}}let w=Xn(Ge(m,"utf8"));if(await ja(r,w)===!1)return{ok:!1,error:new jr("Consumer received an invalid closed UCAN")};if(w.payload.ptc)return{ok:!1,error:new jr("Consumer received a closed UCAN with potency. Closed UCAN must not have potency.")};let E=w.payload.fct[0]&&w.payload.fct[0].sessionKey;if(!E)return{ok:!1,error:new jr("Consumer received a closed UCAN that was missing a session key in facts.")};let T=Ge(d,"base64pad");return E!==T?{ok:!1,error:new jr("Consumer received a closed UCAN session key does not match the session key")}:{ok:!0,value:d}}else return i},k9=async(r,e)=>{let t=Array.from(r.misc.randomNumbers({amount:6})).map(a=>a%9),n=r.misc.randomNumbers({amount:16}),i=await r.aes.encrypt(Te(JSON.stringify({did:await ar(r),pin:t}),"utf8"),e,jt.AES_GCM,n),o=JSON.stringify({iv:Ge(n,"base64pad"),msg:Ge(i,"base64pad")});return{pin:t,challenge:o}},F9=async(r,e,t,n,i)=>{let a=qf(i,c=>Ye(c)&&"iv"in c&&typeof c.iv=="string"&&"msg"in c&&typeof c.msg=="string",{participant:"Consumer",callSite:"linkDevice"});if(a.ok){let{iv:c,msg:f}=a.value,d=Te(c,"base64"),m=null;try{m=await e.aes.decrypt(Te(f,"base64pad"),t,jt.AES_GCM,d)}catch{return{ok:!1,error:new to("Consumer ignoring message that could not be decrypted in linkDevice.")}}let w=qf(Ge(m,"utf8"),Ye,{participant:"Consumer",callSite:"linkDevice"});return w.ok?w?.value.linkStatus==="DENIED"?{ok:!0,value:{approved:!1}}:(await r.linkDevice(n,w.value),{ok:!0,value:{approved:!0}}):w}else return a};h();p();var sv=async(r,e)=>{let{username:t}=e,n=E=>Qm(r.manners,E);if(!await r.auth.canDelegateAccount(t))throw new jr(`Producer cannot delegate account for username ${t}`);let o=new Wf,a={username:t,sessionKey:null,step:"BROADCAST"},c=async E=>{let{data:T}=E,F=T.arrayBuffer?new TextDecoder().decode(await T.arrayBuffer()):T;switch(a.step){case"BROADCAST":{let{sessionKey:N,sessionKeyMessage:he}=await B9(r.crypto,F);return a.sessionKey=N,a.step="NEGOTIATION",w.send(he)}case"NEGOTIATION":if(a.sessionKey){let N=await R9(r.crypto,a.sessionKey,F);if(a.step="DELEGATION",N.ok){let{pin:he,audience:de}=N.value,Pe=()=>{let Ae=!1;return{confirmPin:async()=>{Ae||(Ae=!0,a.sessionKey?await O9(r.auth,r.crypto,a.sessionKey,t,de,f):n(new jr("Producer missing session key when delegating account")))},rejectPin:async()=>{Ae||(Ae=!0,a.sessionKey?await L9(r.crypto,a.sessionKey,f):n(new jr("Producer missing session key when declining account delegation")))}}},{confirmPin:ie,rejectPin:be}=Pe();o?.emit("challenge",{pin:he,confirmPin:ie,rejectPin:be})}else n(N.error)}else n(new jr("Producer missing session key when handling user challenge"));break;case"DELEGATION":return n(new to("Producer received an unexpected message while delegating an account. The message will be ignored."))}},f=async(E,T)=>{await w.send(E),a.username!=null&&(o?.emit("link",{approved:T,username:a.username}),d())},d=()=>{a.sessionKey=null,a.step="BROADCAST"},m=async()=>{o?.emit("done",void 0),o=null,w.close()},w=await r.auth.createChannel({username:t,handleMessage:c});return{on:(...E)=>o?.on(...E),cancel:m}},B9=async(r,e)=>{let t=await r.aes.genKey(jt.AES_GCM),n=await r.aes.exportKey(t),{publicKey:i}=Zu(r,e),o=await r.rsa.encrypt(n,i),a=await hn({dependencies:{crypto:r},issuer:await ar(r),audience:e,lifetimeInSeconds:60*5,facts:[{sessionKey:Ge(n,"base64pad")}],potency:null}),c=r.misc.randomNumbers({amount:16}),f=await r.aes.encrypt(Te(tn(a),"utf8"),t,jt.AES_GCM,c),d=JSON.stringify({iv:Ge(c,"base64pad"),msg:Ge(f,"base64pad"),sessionKey:Ge(o,"base64pad")});return{sessionKey:t,sessionKeyMessage:d}},R9=async(r,e,t)=>{let i=qf(t,o=>Ye(o)&&"iv"in o&&typeof o.iv=="string"&&"msg"in o&&typeof o.msg=="string",{participant:"Producer",callSite:"handleUserChallenge"});if(i.ok){let{iv:o,msg:a}=i.value,c=Te(o,"base64pad"),f=null;try{f=await r.aes.decrypt(Te(a,"base64pad"),e,jt.AES_GCM,c)}catch{return{ok:!1,error:new to("Ignoring message that could not be decrypted.")}}let d=JSON.parse(Ge(f,"utf8")),m=d.pin??null,w=d.did??null;return m!==null&&w!==null?{ok:!0,value:{pin:m,audience:w}}:{ok:!1,error:new jr(`Producer received invalid pin ${d.pin} or audience ${d.audience}`)}}else return i},O9=async(r,e,t,n,i,o)=>{let a=await r.delegateAccount(n,i),c=JSON.stringify(a),f=e.misc.randomNumbers({amount:16}),d=await e.aes.encrypt(Te(c,"utf8"),t,jt.AES_GCM,f),m=JSON.stringify({iv:Ge(f,"base64pad"),msg:Ge(d,"base64pad")});await o(m,!0)},L9=async(r,e,t)=>{let n=JSON.stringify({linkStatus:"DENIED"}),i=r.misc.randomNumbers({amount:16}),o=await r.aes.encrypt(Te(n,"utf8"),e,jt.AES_GCM,i),a=JSON.stringify({iv:Ge(i,"base64pad"),msg:Ge(o,"base64pad")});await t(a,!1)};h();p();function U9(r){return{...r,permissions:{...r.permissions,...$h}}}function Vf(r){return Ht(r.namespace)?r.namespace:Fb(r.namespace)}h();p();h();p();var Tt={};xt(Tt,{DEFAULT_AES_ALG:()=>Ya,getEncryptedFile:()=>Dv,getFile:()=>up,getFileSystemLinks:()=>Oj,getSimpleLinks:()=>il,putEncryptedFile:()=>Cv,putFile:()=>cc,putLinks:()=>fc});h();p();var bi={};xt(bi,{code:()=>Va,decode:()=>oo,encode:()=>ps,name:()=>np});h();p();h();p();h();p();h();p();var N9=["string","number","bigint","symbol"],M9=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function P8(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(N9.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(K9(r))return"Buffer";let t=j9(r);return t||"Object"}function K9(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function j9(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(M9.includes(e))return e}h();p();var Z=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};Z.uint=new Z(0,"uint",!0);Z.negint=new Z(1,"negint",!0);Z.bytes=new Z(2,"bytes",!0);Z.string=new Z(3,"string",!0);Z.array=new Z(4,"array",!1);Z.map=new Z(5,"map",!1);Z.tag=new Z(6,"tag",!1);Z.float=new Z(7,"float",!0);Z.false=new Z(7,"false",!0);Z.true=new Z(7,"true",!0);Z.null=new Z(7,"null",!0);Z.undefined=new Z(7,"undefined",!0);Z.break=new Z(7,"break",!0);var Fe=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};h();p();h();p();var Hf=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",$9=new TextDecoder,z9=new TextEncoder;function Zm(r){return Hf&&globalThis.Buffer.isBuffer(r)}function av(r){return r instanceof Uint8Array?Zm(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var F8=Hf?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):T8(r,e,t):(r,e,t)=>t-e>64?$9.decode(r.subarray(e,t)):T8(r,e,t),B8=Hf?r=>r.length>64?globalThis.Buffer.from(r):I8(r):r=>r.length>64?z9.encode(r):I8(r),hs=r=>Uint8Array.from(r),Gf=Hf?(r,e,t)=>Zm(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),R8=Hf?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),av(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},O8=Hf?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function L8(r,e){if(Zm(r)&&Zm(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function I8(r,e=1/0){let t,n=r.length,i=null,o=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function T8(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,a=i>239?4:i>223?3:i>191?2:1;if(e+a<=t){let c,f,d,m;switch(a){case 1:i<128&&(o=i);break;case 2:c=r[e+1],(c&192)===128&&(m=(i&31)<<6|c&63,m>127&&(o=m));break;case 3:c=r[e+1],f=r[e+2],(c&192)===128&&(f&192)===128&&(m=(i&15)<<12|(c&63)<<6|f&63,m>2047&&(m<55296||m>57343)&&(o=m));break;case 4:c=r[e+1],f=r[e+2],d=r[e+3],(c&192)===128&&(f&192)===128&&(d&192)===128&&(m=(i&15)<<18|(c&63)<<12|(f&63)<<6|d&63,m>65535&&m<1114112&&(o=m))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=a}return q9(n)}var k8=4096;function q9(r){let e=r.length;if(e<=k8)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=k8));return t}var W9=256,Xh=class{constructor(e=W9){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=O8(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Gf(n,0,this.cursor)}else t=R8(this.chunks,this.cursor);return e&&this.reset(),t}};h();p();var wt="CBOR decode error:",uv="CBOR encode error:",Qh=[];Qh[23]=1;Qh[24]=2;Qh[25]=3;Qh[26]=5;Qh[27]=9;function Ys(r,e,t){if(r.length-e<t)throw new Error(`${wt} not enough data for type`)}h();p();h();p();var rn=[24,256,65536,4294967296,BigInt("18446744073709551616")];function mi(r,e,t){Ys(r,e,1);let n=r[e];if(t.strict===!0&&n<rn[0])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);return n}function yi(r,e,t){Ys(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<rn[1])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);return n}function gi(r,e,t){Ys(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<rn[2])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);return n}function wi(r,e,t){Ys(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<rn[3])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${wt} integers outside of the safe integer range are not supported`)}function U8(r,e,t,n){return new Fe(Z.uint,mi(r,e+1,n),2)}function N8(r,e,t,n){return new Fe(Z.uint,yi(r,e+1,n),3)}function M8(r,e,t,n){return new Fe(Z.uint,gi(r,e+1,n),5)}function K8(r,e,t,n){return new Fe(Z.uint,wi(r,e+1,n),9)}function ro(r,e){return pn(r,0,e.value)}function pn(r,e,t){if(t<rn[0]){let n=Number(t);r.push([e|n])}else if(t<rn[1]){let n=Number(t);r.push([e|24,n])}else if(t<rn[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<rn[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<rn[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=a&255,a=a>>8,i[3]=a&255,a=a>>8,i[2]=a&255,a=a>>8,i[1]=a&255,r.push(i)}else throw new Error(`${wt} encountered BigInt larger than allowable range`)}}ro.encodedSize=function(e){return pn.encodedSize(e.value)};pn.encodedSize=function(e){return e<rn[0]?1:e<rn[1]?2:e<rn[2]?3:e<rn[3]?5:9};ro.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};h();p();function j8(r,e,t,n){return new Fe(Z.negint,-1-mi(r,e+1,n),2)}function $8(r,e,t,n){return new Fe(Z.negint,-1-yi(r,e+1,n),3)}function z8(r,e,t,n){return new Fe(Z.negint,-1-gi(r,e+1,n),5)}var cv=BigInt(-1),q8=BigInt(1);function W8(r,e,t,n){let i=wi(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new Fe(Z.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${wt} integers outside of the safe integer range are not supported`);return new Fe(Z.negint,cv-BigInt(i),9)}function ey(r,e){let t=e.value,n=typeof t=="bigint"?t*cv-q8:t*-1-1;pn(r,e.type.majorEncoded,n)}ey.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*cv-q8:t*-1-1;return n<rn[0]?1:n<rn[1]?2:n<rn[2]?3:n<rn[3]?5:9};ey.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};h();p();function Zh(r,e,t,n){Ys(r,e,t+n);let i=Gf(r,e+t,e+t+n);return new Fe(Z.bytes,i,t+n)}function V8(r,e,t,n){return Zh(r,e,1,t)}function H8(r,e,t,n){return Zh(r,e,2,mi(r,e+1,n))}function G8(r,e,t,n){return Zh(r,e,3,yi(r,e+1,n))}function Y8(r,e,t,n){return Zh(r,e,5,gi(r,e+1,n))}function J8(r,e,t,n){let i=wi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer bytes lengths not supported`);return Zh(r,e,9,i)}function ty(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Z.string?B8(r.value):r.value),r.encodedBytes}function Yf(r,e){let t=ty(e);pn(r,e.type.majorEncoded,t.length),r.push(t)}Yf.encodedSize=function(e){let t=ty(e);return pn.encodedSize(t.length)+t.length};Yf.compareTokens=function(e,t){return H9(ty(e),ty(t))};function H9(r,e){return r.length<e.length?-1:r.length>e.length?1:L8(r,e)}h();p();function ep(r,e,t,n,i){let o=t+n;Ys(r,e,o);let a=new Fe(Z.string,F8(r,e+t,e+o),o);return i.retainStringBytes===!0&&(a.byteValue=Gf(r,e+t,e+o)),a}function X8(r,e,t,n){return ep(r,e,1,t,n)}function Q8(r,e,t,n){return ep(r,e,2,mi(r,e+1,n),n)}function Z8(r,e,t,n){return ep(r,e,3,yi(r,e+1,n),n)}function eD(r,e,t,n){return ep(r,e,5,gi(r,e+1,n),n)}function tD(r,e,t,n){let i=wi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer string lengths not supported`);return ep(r,e,9,i,n)}var rD=Yf;h();p();function Jf(r,e,t,n){return new Fe(Z.array,n,t)}function nD(r,e,t,n){return Jf(r,e,1,t)}function iD(r,e,t,n){return Jf(r,e,2,mi(r,e+1,n))}function oD(r,e,t,n){return Jf(r,e,3,yi(r,e+1,n))}function sD(r,e,t,n){return Jf(r,e,5,gi(r,e+1,n))}function aD(r,e,t,n){let i=wi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer array lengths not supported`);return Jf(r,e,9,i)}function uD(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${wt} indefinite length items not allowed`);return Jf(r,e,1,1/0)}function ry(r,e){pn(r,Z.array.majorEncoded,e.value)}ry.compareTokens=ro.compareTokens;ry.encodedSize=function(e){return pn.encodedSize(e.value)};h();p();function Xf(r,e,t,n){return new Fe(Z.map,n,t)}function cD(r,e,t,n){return Xf(r,e,1,t)}function fD(r,e,t,n){return Xf(r,e,2,mi(r,e+1,n))}function lD(r,e,t,n){return Xf(r,e,3,yi(r,e+1,n))}function hD(r,e,t,n){return Xf(r,e,5,gi(r,e+1,n))}function pD(r,e,t,n){let i=wi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer map lengths not supported`);return Xf(r,e,9,i)}function dD(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${wt} indefinite length items not allowed`);return Xf(r,e,1,1/0)}function ny(r,e){pn(r,Z.map.majorEncoded,e.value)}ny.compareTokens=ro.compareTokens;ny.encodedSize=function(e){return pn.encodedSize(e.value)};h();p();function mD(r,e,t,n){return new Fe(Z.tag,t,1)}function yD(r,e,t,n){return new Fe(Z.tag,mi(r,e+1,n),2)}function gD(r,e,t,n){return new Fe(Z.tag,yi(r,e+1,n),3)}function wD(r,e,t,n){return new Fe(Z.tag,gi(r,e+1,n),5)}function bD(r,e,t,n){return new Fe(Z.tag,wi(r,e+1,n),9)}function iy(r,e){pn(r,Z.tag.majorEncoded,e.value)}iy.compareTokens=ro.compareTokens;iy.encodedSize=function(e){return pn.encodedSize(e.value)};h();p();var Z9=20,ej=21,tj=22,rj=23;function vD(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${wt} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Fe(Z.null,null,1):new Fe(Z.undefined,void 0,1)}function _D(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${wt} indefinite length items not allowed`);return new Fe(Z.break,void 0,1)}function fv(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${wt} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${wt} Infinity values are not supported`)}return new Fe(Z.float,r,e)}function xD(r,e,t,n){return fv(lv(r,e+1),3,n)}function ED(r,e,t,n){return fv(hv(r,e+1),5,n)}function AD(r,e,t,n){return fv(PD(r,e+1),9,n)}function oy(r,e,t){let n=e.value;if(n===!1)r.push([Z.float.majorEncoded|Z9]);else if(n===!0)r.push([Z.float.majorEncoded|ej]);else if(n===null)r.push([Z.float.majorEncoded|tj]);else if(n===void 0)r.push([Z.float.majorEncoded|rj]);else{let i,o=!1;(!t||t.float64!==!0)&&(DD(n),i=lv(To,1),n===i||Number.isNaN(n)?(To[0]=249,r.push(To.slice(0,3)),o=!0):(CD(n),i=hv(To,1),n===i&&(To[0]=250,r.push(To.slice(0,5)),o=!0))),o||(nj(n),i=PD(To,1),To[0]=251,r.push(To.slice(0,9)))}}oy.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){DD(n);let i=lv(To,1);if(n===i||Number.isNaN(n))return 3;if(CD(n),i=hv(To,1),n===i)return 5}return 9};var SD=new ArrayBuffer(9),no=new DataView(SD,1),To=new Uint8Array(SD,0);function DD(r){if(r===1/0)no.setUint16(0,31744,!1);else if(r===-1/0)no.setUint16(0,64512,!1);else if(Number.isNaN(r))no.setUint16(0,32256,!1);else{no.setFloat32(0,r);let e=no.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)no.setUint16(0,31744,!1);else if(t===0)no.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?no.setUint16(0,0):i<-14?no.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):no.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function lv(r,e){if(r.length-e<2)throw new Error(`${wt} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function CD(r){no.setFloat32(0,r,!1)}function hv(r,e){if(r.length-e<4)throw new Error(`${wt} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function nj(r){no.setFloat64(0,r,!1)}function PD(r,e){if(r.length-e<8)throw new Error(`${wt} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}oy.compareTokens=ro.compareTokens;function $t(r,e,t){throw new Error(`${wt} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function sy(r){return()=>{throw new Error(`${wt} ${r}`)}}var Se=[];for(let r=0;r<=23;r++)Se[r]=$t;Se[24]=U8;Se[25]=N8;Se[26]=M8;Se[27]=K8;Se[28]=$t;Se[29]=$t;Se[30]=$t;Se[31]=$t;for(let r=32;r<=55;r++)Se[r]=$t;Se[56]=j8;Se[57]=$8;Se[58]=z8;Se[59]=W8;Se[60]=$t;Se[61]=$t;Se[62]=$t;Se[63]=$t;for(let r=64;r<=87;r++)Se[r]=V8;Se[88]=H8;Se[89]=G8;Se[90]=Y8;Se[91]=J8;Se[92]=$t;Se[93]=$t;Se[94]=$t;Se[95]=sy("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)Se[r]=X8;Se[120]=Q8;Se[121]=Z8;Se[122]=eD;Se[123]=tD;Se[124]=$t;Se[125]=$t;Se[126]=$t;Se[127]=sy("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)Se[r]=nD;Se[152]=iD;Se[153]=oD;Se[154]=sD;Se[155]=aD;Se[156]=$t;Se[157]=$t;Se[158]=$t;Se[159]=uD;for(let r=160;r<=183;r++)Se[r]=cD;Se[184]=fD;Se[185]=lD;Se[186]=hD;Se[187]=pD;Se[188]=$t;Se[189]=$t;Se[190]=$t;Se[191]=dD;for(let r=192;r<=215;r++)Se[r]=mD;Se[216]=yD;Se[217]=gD;Se[218]=wD;Se[219]=bD;Se[220]=$t;Se[221]=$t;Se[222]=$t;Se[223]=$t;for(let r=224;r<=243;r++)Se[r]=sy("simple values are not supported");Se[244]=$t;Se[245]=$t;Se[246]=$t;Se[247]=vD;Se[248]=sy("simple values are not supported");Se[249]=xD;Se[250]=ED;Se[251]=AD;Se[252]=$t;Se[253]=$t;Se[254]=$t;Se[255]=_D;var ko=[];for(let r=0;r<24;r++)ko[r]=new Fe(Z.uint,r,1);for(let r=-1;r>=-24;r--)ko[31-r]=new Fe(Z.negint,r,1);ko[64]=new Fe(Z.bytes,new Uint8Array(0),1);ko[96]=new Fe(Z.string,"",1);ko[128]=new Fe(Z.array,0,1);ko[160]=new Fe(Z.map,0,1);ko[244]=new Fe(Z.false,!1,1);ko[245]=new Fe(Z.true,!0,1);ko[246]=new Fe(Z.null,null,1);function ID(r){switch(r.type){case Z.false:return hs([244]);case Z.true:return hs([245]);case Z.null:return hs([246]);case Z.bytes:return r.value.length?void 0:hs([64]);case Z.string:return r.value===""?hs([96]):void 0;case Z.array:return r.value===0?hs([128]):void 0;case Z.map:return r.value===0?hs([160]):void 0;case Z.uint:return r.value<24?hs([Number(r.value)]):void 0;case Z.negint:if(r.value>=-24)return hs([31-Number(r.value)])}}var oj={float64:!1,mapSorter:uj,quickEncodeToken:ID};function sj(){let r=[];return r[Z.uint.major]=ro,r[Z.negint.major]=ey,r[Z.bytes.major]=Yf,r[Z.string.major]=rD,r[Z.array.major]=ry,r[Z.map.major]=ny,r[Z.tag.major]=iy,r[Z.float.major]=oy,r}var TD=sj(),pv=new Xh,Qf=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${uv} object contains circular references`);return new Qf(t,e)}},qa={null:new Fe(Z.null,null),undefined:new Fe(Z.undefined,void 0),true:new Fe(Z.true,!0),false:new Fe(Z.false,!1),emptyArray:new Fe(Z.array,0),emptyMap:new Fe(Z.map,0)},Wa={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Fe(Z.float,r):r>=0?new Fe(Z.uint,r):new Fe(Z.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new Fe(Z.uint,r):new Fe(Z.negint,r)},Uint8Array(r,e,t,n){return new Fe(Z.bytes,r)},string(r,e,t,n){return new Fe(Z.string,r)},boolean(r,e,t,n){return r?qa.true:qa.false},null(r,e,t,n){return qa.null},undefined(r,e,t,n){return qa.undefined},ArrayBuffer(r,e,t,n){return new Fe(Z.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new Fe(Z.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[qa.emptyArray,new Fe(Z.break)]:qa.emptyArray;n=Qf.createCheck(n,r);let i=[],o=0;for(let a of r)i[o++]=ay(a,t,n);return t.addBreakTokens?[new Fe(Z.array,r.length),i,new Fe(Z.break)]:[new Fe(Z.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),a=i?r.size:o.length;if(!a)return t.addBreakTokens===!0?[qa.emptyMap,new Fe(Z.break)]:qa.emptyMap;n=Qf.createCheck(n,r);let c=[],f=0;for(let d of o)c[f++]=[ay(d,t,n),ay(i?r.get(d):r[d],t,n)];return aj(c,t),t.addBreakTokens?[new Fe(Z.map,a),c,new Fe(Z.break)]:[new Fe(Z.map,a),c]}};Wa.Map=Wa.Object;Wa.Buffer=Wa.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Wa[`${r}Array`]=Wa.DataView;function ay(r,e={},t){let n=P8(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||Wa[n];if(typeof i=="function"){let a=i(r,n,e,t);if(a!=null)return a}let o=Wa[n];if(!o)throw new Error(`${uv} unsupported type: ${n}`);return o(r,n,e,t)}function aj(r,e){e.mapSorter&&r.sort(e.mapSorter)}function uj(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,o=TD[i].compareTokens(t,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function kD(r,e,t,n){if(Array.isArray(e))for(let i of e)kD(r,i,t,n);else t[e.type.major](r,e,n)}function cj(r,e,t){let n=ay(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let a=o.encodedSize(n,t),c=new Xh(a);if(o(c,n,t),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return av(c.chunks[0])}}return pv.reset(),kD(pv,n,e,t),pv.toBytes(!0)}function Js(r,e){return e=Object.assign({},oj,e),cj(r,TD,e)}h();p();var fj={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},dv=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=ko[e];if(t===void 0){let n=Se[e];if(!n)throw new Error(`${wt} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},tp=Symbol.for("DONE"),uy=Symbol.for("BREAK");function lj(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=rp(e,t);if(o===uy){if(r.value===1/0)break;throw new Error(`${wt} got unexpected break to lengthed array`)}if(o===tp)throw new Error(`${wt} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function hj(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let a=0;a<r.value;a++){let c=rp(e,t);if(c===uy){if(r.value===1/0)break;throw new Error(`${wt} got unexpected break to lengthed map`)}if(c===tp)throw new Error(`${wt} found map but not enough entries (got ${a} [no key], expected ${r.value})`);if(n!==!0&&typeof c!="string")throw new Error(`${wt} non-string keys not supported (got ${typeof c})`);let f=rp(e,t);if(f===tp)throw new Error(`${wt} found map but not enough entries (got ${a} [no value], expected ${r.value})`);n?o.set(c,f):i[c]=f}return n?o:i}function rp(r,e){if(r.done())return tp;let t=r.next();if(t.type===Z.break)return uy;if(t.type.terminal)return t.value;if(t.type===Z.array)return lj(t,r,e);if(t.type===Z.map)return hj(t,r,e);if(t.type===Z.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=rp(r,e);return e.tags[t.value](n)}throw new Error(`${wt} tag not supported (${t.value})`)}throw new Error("unsupported")}function io(r,e){if(!(r instanceof Uint8Array))throw new Error(`${wt} data to decode must be a Uint8Array`);e=Object.assign({},fj,e);let t=e.tokenizer||new dv(r,e),n=rp(t,e);if(n===tp)throw new Error(`${wt} did not find any content to decode`);if(n===uy)throw new Error(`${wt} got unexpected break`);if(!t.done())throw new Error(`${wt} too many terminals, data makes no sense`);return n}var FD=42;function pj(r){if(r.asCID!==r&&r["/"]!==r.bytes)return null;let e=we.asCID(r);if(!e)return null;let t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new Fe(Z.tag,FD),new Fe(Z.bytes,t)]}function dj(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function mj(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var yj={float64:!0,typeEncoders:{Object:pj,undefined:dj,number:mj}};function gj(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return we.decode(r.subarray(1))}var BD={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};BD.tags[FD]=gj;var np="dag-cbor",Va=113,ps=r=>Js(r,yj),oo=r=>io(r,BD);var vi={};xt(vi,{code:()=>dn,createLink:()=>ac,createNode:()=>fy,decode:()=>Ga,encode:()=>Ha,name:()=>op,prepare:()=>wv,validate:()=>bv});h();p();h();p();var wj=new TextDecoder;function yv(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function cy(r,e){let t;[t,e]=yv(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function RD(r,e){let t;return[t,e]=yv(r,e),[t&7,t>>3,e]}function bj(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=RD(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=cy(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=cy(r,n),e.Name=wj.decode(a)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=yv(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function OD(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let c,f;if([c,f,t]=RD(r,t),c!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${c}`);if(f===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=cy(r,t),n&&(i=!0)}else if(f===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let d;[d,t]=cy(r,t),n.push(bj(d))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${f}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let a={};return o&&(a.Data=o),a.Links=n||[],a}h();p();var UD=new TextEncoder,LD=2**32,vj=2**31;function _j(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=ip(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=UD.encode(r.Name);t-=n.length,e.set(n,t),t=ip(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=ip(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function ND(r){let e=Ej(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=ip(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=_j(r.Links[i],t.subarray(0,n));n-=o,n=ip(t,n,o)-1,t[n]=18}return t}function xj(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+Zf(t)}if(typeof r.Name=="string"){let t=UD.encode(r.Name).length;e+=1+t+Zf(t)}return typeof r.Tsize=="number"&&(e+=1+Zf(r.Tsize)),e}function Ej(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+Zf(t)}if(r.Links)for(let t of r.Links){let n=xj(t);e+=1+n+Zf(n)}return e}function ip(r,e,t){e-=Zf(t);let n=e;for(;t>=vj;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function Zf(r){return r%2===0&&r++,Math.floor((Aj(r)+6)/7)}function Aj(r){let e=0;return r>=LD&&(r=Math.floor(r/LD),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+Sj[r]}var Sj=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];h();p();var Dj=["Data","Links"],Cj=["Hash","Name","Tsize"],gv=new TextEncoder;function KD(r,e){if(r===e)return 0;let t=r.Name?gv.encode(r.Name):[],n=e.Name?gv.encode(e.Name):[],i=t.length,o=n.length;for(let a=0,c=Math.min(i,o);a<c;++a)if(t[a]!==n[a]){i=t[a],o=n[a];break}return i<o?-1:o<i?1:0}function MD(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function jD(r){if(typeof r.asCID=="object"){let t=we.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Hash){let t=we.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=we.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=we.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function wv(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=gv.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(jD),e.Links.sort(KD);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function bv(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!MD(r,Dj))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!MD(t,Cj))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&KD(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function fy(r,e=[]){return wv({Data:r,Links:e})}function ac(r,e,t){return jD({Hash:t,Name:r,Tsize:e})}var op="dag-pb",dn=112;function Ha(r){bv(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),ND(e)}function Ga(r){let e=OD(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=we.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}h();p();h();p();var Fo={};xt(Fo,{code:()=>ds,decode:()=>Ij,encode:()=>Pj,name:()=>sp});h();p();var sp="raw",ds=85,Pj=r=>Co(r),Ij=r=>Co(r);var $D={[op]:vi,[np]:bi,[sp]:Fo},zD={[dn]:vi,[Va]:bi,[ds]:Fo};function vv(r){let e=zD[r];if(!e)throw new Error(`No codec was registered for the code: ${_v(r)}. Is it part of the multicodec table (https://github.com/multiformats/multicodec/blob/master/table.csv)?`);return e}function Tj(r){let e=$D[r];if(!e)throw new Error(`No codec was registered for the name: ${r}`);return e}function ly(r){return typeof r=="string"?Tj(r):vv(r)}function qD(r,e){let t=ly(r);if(e.code!==t.code){let n=vv(e.code);throw new Error(`Expected a ${t.name} CID, found a ${n.name} CID instead.`)}}function WD(r){return typeof r=="string"?!!$D[r]:!!zD[r]}function _v(r){let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,r),`0x${Ge(e,"hex").replace(/^(00)*/,"")}`}var kj=new Uint8Array([8,1]);async function el(r,e){return qD(dn,e),Ga(await r.getBlock(e))}function ap(r,e){let t=fy(kj,e);return r.putBlock(Ha(t),dn)}h();p();var Tr=r=>Ye(r)&&r.content!==void 0,hy=r=>Ye(r)&&r.ls!==void 0,Ev=r=>Ye(r)&&Ht(r.name)&&Yn(r.size)&&qb(r.isFile),HD=r=>Ye(r)&&Ht(r.name)&&Yn(r.size)&&ms(r.cid),Ur=r=>Ye(r)&&Ht(r.name)&&Ht(r.ipns),GD=r=>{if(Ye(r)){let e=Object.values(r);return e.length>0&&e.every(Ur)}return!1},YD=r=>Array.isArray(r)&&r.every(Ur),Fj=r=>Ev(r)&&ms(r.cid),JD=r=>Ye(r)&&Object.values(r).every(e=>Fj(e)||Ur(e)),Bj=r=>Ye(r)&&Yn(r.mtime)&&Yn(r.ctime)&&Yn(r.mode)&&Ht(r._type),uc=r=>Ye(r)&&Bj(r.unixMeta)&&qb(r.isFile)&&Rj(r.version),py=r=>Ye(r)&&Object.values(r).every(dy),dy=r=>Ye(r)&&ms(r.cid)&&ms(r.userland)&&ms(r.metadata)&&py(r.subSkeleton)||Ur(r),Av=r=>Ye(r)&&py(r.skeleton)&&uc(r.metadata)&&r.metadata.isFile===!1,XD=r=>Av(r)&&ms(r.userland),Sv=r=>Ye(r)&&uc(r.metadata)&&r.metadata.isFile===!0,QD=r=>Sv(r)&&ms(r.userland),ms=r=>!!we.asCID(r)||Ht(r)||r&&"code"in r&&"version"in r&&("multihash"in r||"hash"in r),Rj=r=>{if(!Ye(r))return!1;let{major:e,minor:t,patch:n}=r;return Yn(e)&&Yn(t)&&Yn(n)};h();p();var tl=r=>r.reduce((e,t)=>(e[t.name]=t,e),{}),rl=r=>{let e=r.Name||"",t=r.Hash,n=r.Tsize||0;return{name:e,cid:t,size:n}},Rn=(r,e,t,n)=>({name:r,cid:Jn(e),size:n,isFile:t}),my=r=>{let{name:e,cid:t,size:n}=r;return ac(e,n,Oe(t))};var Ya=jt.AES_CTR,up=async(r,e)=>r.getUnixFile(e),Dv=async(r,e,t,n)=>{let i=await up(r,t),o;try{o=oo(i)}catch{return i}if(!mt(o,"alg")||!mt(o,"cip")||!Lj(o.alg)||!ArrayBuffer.isView(o.cip))throw new Error('Unexpected private block. Expected "alg" and "cip" field.');let a=o.alg,c=new Uint8Array(o.cip.buffer),f=await e.aes.decrypt(c,n,a),d=oo(f);return d instanceof Uint8Array?d:typeof d=="string"?Te(d,"utf8"):Te(JSON.stringify(d),"utf8")},cc=async(r,e)=>r.putChunked(e),Cv=async(r,e,t,n)=>{let i=l8(t)?await XS(t):t,o=ps(i),a=jt.AES_GCM,c=await e.aes.encrypt(o,n,a),f=ps({alg:a,cip:c});return cc(r,f)},il=async(r,e)=>{let t=await el(r,e);return tl(t.Links.map(rl))},Oj=async(r,e)=>{let t=await el(r,e),n=await Promise.all(t.Links.map(async i=>{let o=await el(r,i.Hash),a=tl(o.Links.map(rl));if(!!a.softLink){let d=await r.getUnixFile(Oe(a.softLink.cid)),m=new TextDecoder().decode(d);return JSON.parse(m)}let f=await oo(await up(r,Oe(a.metadata.cid)));return{...rl(i),isFile:mt(f,"isFile")?f.isFile:!1}}));return tl(n)},fc=async(r,e)=>{let t=Object.values(e).reduce(async(i,o)=>{let a=await i;if(Ur(o)){let c=await r.putChunked(Te(JSON.stringify(o),"utf8")),f=await ap(r,[ac("softLink",c.size,c.cid)]),d=await r.size(f);return[...a,ac(o.name,d,f)]}else return mt(o,"Hash")&&o.Hash?[...a,o]:HD(o)?[...a,my(o)]:a},Promise.resolve([])),n=await ap(r,await t);return{cid:n,isFile:!1,size:await r.size(n)}};function Lj(r){return Ht(r)&&Object.values(jt).includes(r)}var Qs={};xt(Qs,{checkValue:()=>eC,get:()=>Mj,getAndCheckValue:()=>Iv,getValue:()=>ZD,getValueFromLinks:()=>Pv,putFile:()=>Nj,putTree:()=>Uj});h();p();var Uj=async(r,e,t,n,i)=>{let o=await fc(r,e),a=Rn("userland",o.cid,!0,o.size),[c,f]=await Promise.all([Tv(r,"metadata",n),Tv(r,"skeleton",t)]),d=i!=null?Rn("previous",i,!1,await r.size(i)):void 0,m={metadata:c,skeleton:f,userland:a,previous:d},{cid:w,size:E}=await fc(r,m);return{cid:w,userland:Oe(a.cid),metadata:Oe(c.cid),size:E,isFile:!1,skeleton:t}},Nj=async(r,e,t,n)=>{let i=await cc(r,e),o=Rn("userland",i.cid,!0,i.size),a=await Tv(r,"metadata",t),c=n!=null?Rn("previous",n,!1,await r.size(n)):void 0,f={metadata:a,userland:o,previous:c},{cid:d,size:m}=await fc(r,f);return{cid:d,userland:Oe(o.cid),metadata:Oe(a.cid),size:m,isFile:!0,skeleton:{}}},Mj=async(r,e)=>{let t=await il(r,e),n=await Iv(r,t,"metadata",uc),i=n.isFile?void 0:await Iv(r,t,"skeleton",py),o=t.userland?.cid||null;if(!ms(o))throw new Error("Could not find userland");let a=t.previous?.cid||void 0;return{userland:o,metadata:n,previous:a,skeleton:i}},ZD=async(r,e,t)=>{let n=we.asCID(e);if(ms(e)){if(!n)return null;let i=await il(r,n);return Pv(r,i,t)}return Pv(r,e,t)},Pv=async(r,e,t)=>{let n=e[t]?.cid;if(!n)return null;let i=await up(r,Oe(n)),o=oo(i),a;return o instanceof Uint8Array?a=JSON.parse(Ge(o,"utf8")):a=o,a},Iv=async(r,e,t,n,i=!1)=>{let o=await ZD(r,e,t);return eC(o,t,n,i)},eC=(r,e,t,n=!1)=>{if(!f8(r)){if(n)return r;throw new Error(`Could not find header value: ${e}`)}if(t(r))return r;throw new Error(`Improperly formatted header value: ${e}`)};async function Tv(r,e,t){let{cid:n,size:i}=await cc(r,ps(t));return Rn(e,n,!0,i)}var on={};xt(on,{addNode:()=>Qq,findLatestRevision:()=>GP,getByCID:()=>Ky,getByName:()=>Zq,getLatestByBareNameFilter:()=>eW,getLatestByCID:()=>HP,getLatestByName:()=>VP,getRevision:()=>m_,readNode:()=>WP});h();p();h();p();var yy=r=>cp(r)||Zs(r)||Ur(r),Zs=r=>Ye(r)&&uc(r.metadata)&&r.metadata.isFile&&Ht(r.key)&&zm(r.content),cp=r=>Ye(r)&&uc(r.metadata)&&r.metadata.isFile===!1&&Yn(r.revision)&&Kj(r.links)&&tC(r.skeleton),kv=r=>Ev(r)&&Ht(r.key)&&Ht(r.pointer),Kj=r=>Ye(r)&&Object.values(r).every(e=>kv(e)||Ur(e)),tC=r=>Ye(r)&&Object.values(r).every(e=>Fv(e)||Ur(e)),Fv=r=>Ye(r)&&zm(r.cid)&&Ht(r.key)&&tC(r.subSkeleton);h();p();h();p();var wy=r=>Array.prototype.map.call(r,e=>("00"+e.toString(16)).slice(-2)).join(""),rC=r=>{let e=new Uint8Array(r.length/2);for(let t=0;t<e.length;t++)e[t]=parseInt(r.slice(t*2,t*2+2),16);return e};var jP=Ze(KP(),1),Vq=1024,Hq=16,$P=320,h_=async(r,e)=>{let t="0".repeat(Vq/4);return fo(r,t,Lo(e,"base64pad"))},fo=async(r,e,t)=>{let n=d_(e),i=await r.hash.sha256(t);return n.add(Ge(i,"hex")),await qP(n)},oa=async(r,e,t,n)=>{let i=Ge(t,"base64pad"),o=Te(`${n}${i}`,"utf8");return await fo(r,e,o)},sa=async(r,e)=>{let t=await p_(r,d_(e));return Gq(r,t)},Gq=async(r,e)=>{let t=e.toBytes(),n=await r.hash.sha256(t);return wy(n)},zP=async(r,e,t=$P)=>{let n=await p_(r,d_(e),t);return await qP(n)},p_=async(r,e,t=$P)=>{if(t>e.toBytes().byteLength*8)throw new Error("threshold is bigger than filter size");if(Yq(e)>=t)return e;let i=e.toBytes(),o=i;do{let a=await r.hash.sha256(o);e.add(wy(a)),o=a}while(Jq(i,e.toBytes()));return p_(r,e,t)},Yq=r=>{let e=new Uint32Array(r.toBytes()),t=0;for(let n=0;n<e.length;n++)t+=Xq(e[n]);return t},qP=r=>wy(r.toBytes()),d_=r=>{let e=rC(r);return jP.BloomFilter.fromBytes(e,Hq)},Jq=(r,e)=>{if(r.byteLength!==e.byteLength)return!1;let t=new Uint8Array(r),n=new Uint8Array(e);for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0},Xq=r=>{let e=r-(r>>1&1431655765),t=(e&858993459)+(e>>2&858993459);return(t+(t>>4)&252645135)*16843009>>24};function Lo(r,e){return Te(Ge(r,e),"utf8")}var Qq=async(r,e,t,n,i)=>{let{cid:o,size:a}=await Cv(r,e,n,i),c=await oa(e,n.bareNameFilter,i,n.revision),f=await sa(e,c);if(await t.add(f,o),Zs(n)){let w=Te(n.key,"base64pad"),E=await fo(e,n.bareNameFilter,Lo(w,"base64pad")),T=await oa(e,E,w,n.revision),F=await sa(e,T);await t.add(F,Oe(n.content))}let[d,m]=Zs(n)?[{},!0]:[n.skeleton,!1];return{cid:o,name:f,key:i,size:a,isFile:m,skeleton:d}},WP=async(r,e,t,n)=>{let i=await Dv(r,e,t,n),o=JSON.parse(Ge(i,"utf8"));if(!yy(o))throw new Error(`Could not parse a valid filesystem object: ${o}`);return o},Zq=async(r,e,t,n,i)=>{let o=await t.get(n);return o===null?null:Ky(r,e,o,i)},Ky=async(r,e,t,n)=>await WP(r,e,t,n),VP=async(r,e,t,n,i)=>{let o=await t.get(n);return o===null?null:HP(r,e,t,o,i)},HP=async(r,e,t,n,i)=>{let o=await Ky(r,e,n,i),a=await GP(e,t,o.bareNameFilter,i,o.revision);return a?.cid?await Ky(r,e,Oe(a?.cid),i):o},eW=async(r,e,t,n,i)=>{let o=await oa(e,n,i,1),a=await sa(e,o);return VP(r,e,t,a,i)},GP=async(r,e,t,n,i)=>{let o=i,a=null,c=0,f=null;for(;a===null;){let d=i+Math.pow(2,c),m=await m_(r,e,t,n,d);m!==null?(f=m,o=d):a=d,c++}for(;o<a-1;){let d=Math.floor((a+o)/2),m=await m_(r,e,t,n,d);m!==null?(f=m,o=d):a=d}return f},m_=async(r,e,t,n,i)=>{let o=await oa(r,t,n,i),a=await sa(r,o),c=await e.get(a);return c?{cid:c,name:a,number:i}:null};h();p();var YP=r=>Gm(r,Pi)?"too-low":E8(r,Ac)?"too-high":!0,JP=Yh(0,0,0),bue=Yh(1,0,0),Pi=Yh(2,0,0),Ac=Yh(3,0,0),y_=[Pi,Ac];h();p();h();p();function XP(r,e,t,n){var i,o=!1,a=0;function c(){i&&clearTimeout(i)}function f(){c(),o=!0}typeof e!="boolean"&&(n=t,t=e,e=void 0);function d(){for(var m=arguments.length,w=new Array(m),E=0;E<m;E++)w[E]=arguments[E];var T=this,F=Date.now()-a;if(o)return;function N(){a=Date.now(),t.apply(T,w)}function he(){i=void 0}n&&!i&&N(),c(),n===void 0&&F>r?N():e!==!0&&(i=setTimeout(n?he:N,n===void 0?r-F:r))}return d.cancel=f,d}h();p();var gl=class extends Error{constructor(e){super(e),this.name="NoPermissionError"}};h();p();h();p();h();p();var Cp=class{constructor(e){this.content=e,this.readOnly=!1}async put(){let{cid:e}=await this.putDetailed();return e}async updateContent(e){if(this.readOnly)throw new Error("File is read-only");return this.content=e,this}},wl=Cp;var bl=class extends wl{constructor(t,n){super(n);this.depot=t}static create(t,n){return new bl(t,n)}static async fromCID(t,n){let i=await Tt.getFile(t,n);return new bl(t,i)}static instanceOf(t){return Ye(t)&&mt(t,"content")}async put(){let{cid:t}=await this.putDetailed();return t}async putDetailed(){return Tt.putFile(this.depot,this.content)}},jy=bl;h();p();var g_=class{constructor(){this.readOnly=!1}async put(){let{cid:e}=await this.putDetailed();return e}async ls(e){let t=await this.get(e);if(t===null)throw new Error("Path does not exist");if(Tr(t))throw new Error("Can not `ls` a file");return t.getLinks()}async cat(e){let t=await this.get(e);if(t===null)throw new Error("Path does not exist");if(!Tr(t))throw new Error("Can not `cat` a directory");return t.content}async mkdir(e){return this.mkdirRecurse(e,()=>this.put())}async mkdirRecurse(e,t){let[n,...i]=e;if(!n)throw new Error("Invalid path: empty");let o=await this.getOrCreateDirectChild(n,t);if(Tr(o))throw new Error(`There is a file along the given path: ${Do(e)}`);return i.length&&await o.mkdirRecurse(i,()=>this.updateDirectChild(o,n,t)),this}async add(e,t){return await this.addRecurse(e,t,()=>this.put()),this}async addRecurse(e,t,n){let[i,...o]=e;if(!i)throw new Error("Invalid path: empty");if(o.length===0)await this.createOrUpdateChildFile(t,i,n);else{let a=await this.getOrCreateDirectChild(i,n);if(Tr(a))throw new Error(`There is a file along the given path: ${Do(e)}`);await a.addRecurse(o,t,async()=>{await this.updateDirectChild(a,i,n)})}return this}async rm(e){return await this.rmRecurse(e,()=>this.put()),this}async rmRecurse(e,t){let[n,...i]=e;if(!n)throw new Error("Invalid path: empty");if(i.length===0)this.removeDirectChild(n),t&&await t();else{let o=await this.getDirectChild(n);if(o===null)throw new Error("Invalid path: does not exist");if(Tr(o))throw new Error(`There is a file along the given path: ${Do(e)}`);await o.rmRecurse(i,async()=>{await this.updateDirectChild(o,n,t)})}return this}async mv(e,t){let n=await this.get(e);if(n===null)throw new Error(`Path does not exist: ${Do(e)}`);if(t.length<1)throw new Error(`Path does not exist: ${Do(t)}`);let i=t.slice(0,-1),o=await this.get(i);if(!o)await this.mkdir(i),o=await this.get(i);else if(Tr(o))throw new Error(`Can not \`mv\` to a file: ${Do(i)}`);return await this.rm(e),await[...t].reverse().reduce((a,c,f)=>a.then(async d=>{let m=t.slice(0,-(f+1)),w=m.length?await this.get(m):this;if(w&&!Tr(w))return await w.updateDirectChild(d,c,null),w;throw new Error("Failed to update tree while moving node")}),Promise.resolve(n)),this}async exists(e){return await this.get(e)!==null}read(e){return this.get(e)}write(e,t){return this.add(e,t)}async getOrCreateDirectChild(e,t){let n=await this.getDirectChild(e);return n!==null?n:this.createChildTree(e,t)}async updateChild(e,t){let n=[];return await t.reduce(async(i,o,a)=>{let c=await i;if(n.push([o,c]),a+1===t.length)return c;let f=await c.getDirectChild(o);if(!hy(f)){let d=t.slice(a+1);throw new Error(`Expected a tree at the given path: ${Do(d)}`)}return f},Promise.resolve(this)),await n.reverse().reduce(async(i,[o,a])=>(await a.updateDirectChild(await i,o,null),a),Promise.resolve(e)),this}},vl=g_;var aa=class extends vl{constructor(t,n){super();this.type="BareTree",this.links=n,this.children={},this.depot=t}static async empty(t){return new aa(t,{})}static async fromCID(t,n){let i=tl(await t.getUnixDirectory(n));return new aa(t,i)}static fromLinks(t,n){return new aa(t,n)}static instanceOf(t){return Ye(t)&&mt(t,"links")&&mt(t,"children")&&mt(t,"type")&&t.type==="BareTree"}async createChildTree(t,n){let i=await aa.empty(this.depot),o=this.children[t];if(o){if(Tr(o))throw new Error(`There is a file at the given path: ${t}`);return o}return await this.updateDirectChild(i,t,n),i}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null)a=await jy.create(this.depot,t);else if(jy.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){return Tt.putLinks(this.depot,this.links)}async putAndUpdateLink(t,n,i){let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}async updateDirectChild(t,n,i){return this.children[n]=t,this.putAndUpdateLink(t,n,i)}removeDirectChild(t){return delete this.links[t],this.children[t]&&delete this.children[t],this}async getDirectChild(t){if(this.children[t])return this.children[t];let n=this.links[t]||null;if(n===null)return null;let i=Oe(n.cid),o=n.isFile?await jy.fromCID(this.depot,i):await aa.fromCID(this.depot,i);return this.children[t]?this.children[t]:(this.children[t]=o,o)}async get(t){let[n,...i]=t;if(!n)return this;let o=await this.getDirectChild(n);if(i.length){if(o===null||Tr(o))return null}else return o;return o.get(i)}updateLink(t,n){let{cid:i,size:o,isFile:a}=n;return this.links[t]=Rn(t,i,a,o),this}getLinks(){return this.links}},ua=aa;h();p();var tW={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,a:!0,b:!0,c:!0,d:!0,e:!0,f:!0},rW=r=>tW[r]===!0,yn=class{constructor(e,t){this.links=t,this.children={},this.depot=e}static create(e){return new yn(e,{})}static async fromCID(e,t){let n=await il(e,t);return new yn(e,n)}async putDetailed(){return fc(this.depot,this.links)}async put(){let{cid:e}=await this.putDetailed();return e}async add(e,t){if(!rW(e[0]))throw new Error("Not a valid name, must be hexadecimal");let n=this.nextTreeOrSiblingName(e);if(e!==n)if(n===null)this.links[e]=Rn(e,t,!0,0);else if(n.length===1)await(await this.getDirectChild(n)).add(e.slice(1),t),await this.putAndUpdateChildLink(n);else{let i=this.addEmptyChild(e[0]),o=this.links[n].cid;this.removeChild(n),await Promise.all([i.add(e.slice(1),t),i.add(n.slice(1),Oe(o))]),await this.putAndUpdateChildLink(e[0])}}async putAndUpdateChildLink(e){let t=this.links[e]?.cid,{cid:n,size:i}=await this.children[e].putDetailed(),o=this.links[e]?.cid;if(t!=o)return await this.putAndUpdateChildLink(e);this.links[e]=Rn(e,n,!1,i)}addEmptyChild(e){let t=yn.create(this.depot);return this.children[e]=t,t}async get(e){let t=this.nextTreeName(e);return t===null?null:t.length>1?Oe(this.links[t].cid):(await this.getDirectChild(t)).get(e.slice(1))}async exists(e){return await this.get(e)!==null}async members(){return(await Promise.all(Object.values(this.links).map(async({name:t,cid:n})=>t.length>1?[{name:t,cid:Oe(n)}]:(await(await yn.fromCID(this.depot,Oe(n))).members()).map(a=>({...a,name:t+a.name}))))).reduce((t,n)=>t.concat(n))}async getDirectChild(e){if(this.children[e])return this.children[e];let t=await yn.fromCID(this.depot,Oe(this.links[e].cid));return this.children[e]?this.children[e]:(this.children[e]=t,t)}removeChild(e){delete this.links[e],this.children[e]&&delete this.children[e]}directChildExists(e){return this.links[e]!==void 0||this.children[e]!==void 0}nextTreeName(e){return this.directChildExists(e[0])?e[0]:this.directChildExists(e)?e:null}nextTreeOrSiblingName(e){let t=e[0];return this.directChildExists(t)?t:Object.keys(this.links).find(n=>t===n[0])||null}};h();p();h();p();h();p();var nW=r=>({mtime:Date.now(),ctime:Date.now(),mode:r?644:755,_type:r?"file":"dir"}),Za=(r,e)=>({isFile:r,version:e,unixMeta:nW(r)}),$y=r=>({...r,unixMeta:{...r.unixMeta,mtime:Date.now()}});h();p();function QP(r){let e=r.slice(1);return e.length<1?null:e}h();p();h();p();var Zn=class{constructor(e){this.node=e}back(e=-1){let t=Math.abs(Math.min(e,-1));return Array.from({length:t},(n,i)=>i).reduce(n=>n.then(i=>i?Zn._getPreviousVersion(i):null),Promise.resolve(this.node))}async prior(e){return Zn._prior(this.node,e)}async list(e=5){let{acc:t}=await Array.from({length:e},(n,i)=>i).reduce((n,i)=>n.then(({node:o,acc:a})=>o?Zn._getPreviousVersion(o).then(c=>({node:c,acc:[...a,{delta:-(i+1),timestamp:o.header.metadata.unixMeta.mtime}]})):Promise.resolve({node:null,acc:a})),Zn._getPreviousVersion(this.node).then(n=>({node:n,acc:[]})));return t}static async _getPreviousVersion(e){return e.header.previous?e.constructor.fromCID(e.header.previous):Promise.resolve(null)}static async _prior(e,t){if(e.header.metadata.unixMeta.mtime<t)return e;let n=await Zn._getPreviousVersion(e);return n?Zn._prior(n,t):null}};var Dc=class extends wl{constructor({depot:t,content:n,header:i,cid:o}){super(n);this.depot=t,this.cid=o,this.header=i,this.history=new Zn(this)}static instanceOf(t){return Ye(t)&&mt(t,"content")&&mt(t,"header")&&Sv(t.header)}static async create(t,n){return new Dc({depot:t,content:n,header:{metadata:Za(!0,Pi)},cid:null})}static async fromCID(t,n){let i=await Qs.get(t,n);return Dc.fromInfo(t,i,n)}static async fromInfo(t,n,i){let{userland:o,metadata:a,previous:c}=n,f=await Tt.getFile(t,Oe(o));return new Dc({depot:t,content:f,header:{metadata:a,previous:c},cid:i})}async putDetailed(){let t=await Qs.putFile(this.depot,this.content,$y(this.header.metadata),this.cid);return this.cid=t.cid,t}},_l=Dc;var Mn=class extends vl{constructor({depot:t,reference:n,links:i,header:o,cid:a}){super();this.depot=t,this.reference=n,this.children={},this.cid=a,this.links=i,this.header=o,this.history=new Zn(this)}static async empty(t,n){return new Mn({depot:t,reference:n,links:{},header:{metadata:Za(!1,Pi),skeleton:{}},cid:null})}static async fromCID(t,n,i){let o=await Qs.get(t,i);if(!XD(o))throw new Error(`Could not parse a valid public tree at: ${i}`);return Mn.fromInfo(t,n,o,i)}static async fromInfo(t,n,i,o){let{userland:a,metadata:c,previous:f,skeleton:d}=i,m=await Tt.getFileSystemLinks(t,Oe(a));return new Mn({depot:t,reference:n,links:m,header:{metadata:c,previous:f,skeleton:d},cid:o})}static instanceOf(t){return mt(t,"links")&&mt(t,"header")&&JD(t.links)&&Av(t.header)}async createChildTree(t,n){let i=await Mn.empty(this.depot,this.reference),o=this.children[t];if(o){if(_l.instanceOf(o))throw new Error(`There is a file at the given path: ${t}`);if(Mn.instanceOf(o))return o;throw new Error(`Not a public tree at the given path: ${t}`)}return await this.updateDirectChild(i,t,n),i}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null)a=await _l.create(this.depot,t);else if(_l.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){let t=await Qs.putTree(this.depot,this.links,this.header.skeleton,this.header.metadata,this.cid);return this.header.previous=this.cid||void 0,this.cid=t.cid,t}async updateDirectChild(t,n,i){if(this.readOnly)throw new Error("Tree is read-only");this.children[n]=t;let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}removeDirectChild(t){return delete this.links[t],delete this.header.skeleton[t],this.children[t]&&delete this.children[t],this}async getDirectChild(t){let n=null;if(this.children[t])return this.children[t];let i=this.header.skeleton[t]||null;if(i===null)return null;if(dy(i)){let o=Oe(i.cid);n=i.isFile?await _l.fromCID(this.depot,o):await Mn.fromCID(this.depot,this.reference,o)}else if(Ur(i))return Mn.resolveSoftLink(this.depot,this.reference,i);return this.children[t]?this.children[t]:(n&&(this.children[t]=n),n)}async get(t){if(t.length<1)return this;let n=await this.getRecurse(this.header.skeleton,t);if(dy(n)){let i=Oe(n.cid),o=await Qs.get(this.depot,i);return QD(o)?_l.fromInfo(this.depot,o,i):Mn.fromInfo(this.depot,this.reference,o,i)}return n}async getRecurse(t,n){let i=n[0],o=t[i]||null,a=QP(n);if(Ur(o)){let c=await Mn.resolveSoftLink(this.depot,this.reference,o);return a?Mn.instanceOf(c)?c.get(a).then(iW):null:c}else return o===null||a===null?o:o.subSkeleton?this.getRecurse(o.subSkeleton,a):null}assignLink({name:t,link:n,skeleton:i}){this.links[t]=n,this.header.skeleton[t]=i,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(t,n,i){let[o,...a]=i.ipns.split("/"),c=Kh(a.join("/"));if(!(cs("public",c)||cs("p",c)))throw new Error("Mixing public and private soft links is not supported yet.");let d=await n.dns.lookupDnsLink(o);if(!d)throw new Error(`Failed to resolve the soft link: ${i.ipns} - Could not resolve DNSLink`);let m=(await Tt.getSimpleLinks(t,Oe(d))).public.cid,w=Xu(c),T=await(await Mn.fromCID(t,n,Oe(m))).get(nr(w));return T&&(T.readOnly=!0),T}getLinks(){return Object.values(this.links).reduce((t,n)=>{let i=this.header.skeleton[n.name];return{...t,[n.name]:i&&i.isFile!==void 0?{...n,isFile:i.isFile}:{...n}}},{})}updateLink(t,n){let{cid:i,metadata:o,userland:a,size:c,isFile:f,skeleton:d}=n;return this.assignLink({name:t,link:Rn(t,i,!1,c),skeleton:{cid:Jn(i),metadata:o,userland:a,subSkeleton:d,isFile:f}}),this}insertSoftLink({name:t,path:n,username:i}){let o={ipns:this.reference.dataRoot.domain(i)+`/public/${Cr(n)}`,name:t};return this.assignLink({name:t,link:o,skeleton:o}),this}};function iW(r){return r&&(r.readOnly=!0),r}var ws=Mn;h();p();h();p();h();p();var Cc=class{constructor(e,t,n){this.crypto=e,this.depot=t,this.node=n}async back(e=-1){let t=Math.min(e,-1),n=this.node.header?.revision;return n&&await this._getRevision(n+t)||null}async prior(e){return this.node.header.metadata.unixMeta.mtime<e?this.node:this._prior(this.node.header.revision-1,e)}async list(e=5){let t=this.node.header.revision;return Promise.all(Array.from({length:e},(n,i)=>{let o=i+1;return this._getRevisionInfoFromNumber(t-o).then(a=>({revisionInfo:a,delta:-o}))})).then(n=>n.filter(i=>!!i.revisionInfo)).then(n=>n.map(i=>{let o=i.revisionInfo.metadata.unixMeta.mtime;return{delta:i.delta,timestamp:o}}))}async _getRevision(e){let t=await this._getRevisionInfoFromNumber(e);return t&&await this.node.constructor.fromInfo(this.node.mmpt,Te(this.node.key,"base64pad"),t)}_getRevisionInfo(e){return on.readNode(this.depot,this.crypto,Oe(e.cid),Te(this.node.key,"base64pad"))}async _getRevisionInfoFromNumber(e){let{mmpt:t}=this.node,{bareNameFilter:n}=this.node.header,i=Te(this.node.key,"base64pad"),o=await on.getRevision(this.crypto,t,n,i,e);return o&&this._getRevisionInfo(o)}async _prior(e,t){let n=await this._getRevisionInfoFromNumber(e);return n?.revision?n.metadata.unixMeta.mtime<t?this._getRevision(n.revision):this._prior(n.revision-1,t):null}};var eu=class extends wl{constructor({crypto:t,depot:n,content:i,mmpt:o,key:a,header:c}){super(i);this.crypto=t,this.depot=n,this.header=c,this.history=new Cc(t,n,this),this.key=a,this.mmpt=o}static instanceOf(t){return Ye(t)&&mt(t,"content")&&mt(t,"mmpt")&&mt(t,"header")&&Zs(t.header)}static async create(t,n,i,o,a,c){let f=await t.aes.exportKey(await t.aes.genKey(Ya)),d=await fo(t,a,Lo(c,"base64pad")),m=await Tt.putEncryptedFile(n,t,o,f);return new eu({crypto:t,depot:n,content:o,mmpt:i,key:c,header:{bareNameFilter:d,key:Ge(f,"base64pad"),revision:1,metadata:Za(!0,Pi),content:Jn(m.cid)}})}static async fromBareNameFilter(t,n,i,o,a){let c=await on.getLatestByBareNameFilter(n,t,i,o,a);return this.fromInfo(t,n,i,a,c)}static async fromLatestName(t,n,i,o,a){let c=await on.getLatestByName(n,t,i,o,a);return eu.fromInfo(t,n,i,a,c)}static async fromName(t,n,i,o,a){let c=await on.getByName(n,t,i,o,a);return eu.fromInfo(t,n,i,a,c)}static async fromInfo(t,n,i,o,a){if(!Zs(a))throw new Error("Could not parse a valid private file using the given key");let c=await Tt.getEncryptedFile(n,t,Oe(a.content),Te(a.key,"base64pad"));return new eu({crypto:t,depot:n,content:c,key:o,mmpt:i,header:a})}async getName(){let{bareNameFilter:t,revision:n}=this.header,i=await oa(this.crypto,t,this.key,n);return sa(this.crypto,i)}async updateParentNameFilter(t){return this.header.bareNameFilter=await fo(this.crypto,t,Lo(Te(this.header.key,"base64pad"),"base64pad")),this}async updateContent(t){let n=await Tt.putEncryptedFile(this.depot,this.crypto,t,Te(this.header.key,"base64pad"));return this.content=t,this.header={...this.header,revision:this.header.revision+1,content:Jn(n.cid)},this}async putDetailed(){return on.addNode(this.depot,this.crypto,this.mmpt,{...this.header,metadata:$y(this.header.metadata)},this.key)}},Ii=eu;var ir=class extends vl{constructor({crypto:t,depot:n,manners:i,reference:o,mmpt:a,key:c,header:f}){super();this.crypto=t,this.depot=n,this.manners=i,this.reference=o,this.children={},this.header=f,this.history=new Cc(t,n,this),this.key=c,this.mmpt=a}static instanceOf(t){return Ye(t)&&mt(t,"mmpt")&&mt(t,"header")&&cp(t.header)}static async create(t,n,i,o,a,c,f){let d=f?await fo(t,f,Lo(c,"base64pad")):await h_(t,c);return new ir({crypto:t,depot:n,manners:i,reference:o,mmpt:a,key:c,header:{metadata:Za(!1,Pi),bareNameFilter:d,revision:1,links:{},skeleton:{}}})}static async fromBaseKey(t,n,i,o,a,c){let f=await h_(t,c);return this.fromBareNameFilter(t,n,i,o,a,f,c)}static async fromBareNameFilter(t,n,i,o,a,c,f){let d=await on.getLatestByBareNameFilter(n,t,a,c,f);return this.fromInfo(t,n,i,o,a,f,d)}static async fromLatestName(t,n,i,o,a,c,f){let d=await on.getLatestByName(n,t,a,c,f);return this.fromInfo(t,n,i,o,a,f,d)}static async fromName(t,n,i,o,a,c,f){let d=await on.getByName(n,t,a,c,f);return this.fromInfo(t,n,i,o,a,f,d)}static async fromInfo(t,n,i,o,a,c,f){if(!cp(f))throw new Error("Could not parse a valid private tree using the given key");return new ir({crypto:t,depot:n,manners:i,reference:o,mmpt:a,key:c,header:f})}async createChildTree(t,n){let i=await this.crypto.aes.genKey(Ya).then(this.crypto.aes.exportKey),o=await ir.create(this.crypto,this.depot,this.manners,this.reference,this.mmpt,i,this.header.bareNameFilter),a=this.children[t];if(a){if(Ii.instanceOf(a))throw new Error(`There is a file at the given path: ${t}`);return a}return await this.updateDirectChild(o,t,n),o}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null){let c=await this.crypto.aes.genKey(Ya).then(this.crypto.aes.exportKey);a=await Ii.create(this.crypto,this.depot,this.mmpt,t,this.header.bareNameFilter,c)}else if(Ii.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){let t=Object.assign({},this.header);return t.skeleton=ZP(t.skeleton),on.addNode(this.depot,this.crypto,this.mmpt,t,this.key)}async updateDirectChild(t,n,i){if(this.readOnly)throw new Error("Tree is read-only");await t.updateParentNameFilter(this.header.bareNameFilter),this.children[n]=t;let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}removeDirectChild(t){return this.header={...this.header,revision:this.header.revision+1,links:Wb(this.header.links,t),skeleton:Wb(this.header.skeleton,t)},this.children[t]&&delete this.children[t],this}async getDirectChild(t){let n=null;if(this.children[t])return this.children[t];let i=this.header.links[t];if(i===void 0)return null;if(kv(i)){let o=Te(i.key,"base64pad");n=i.isFile?await Ii.fromLatestName(this.crypto,this.depot,this.mmpt,i.pointer,o):await ir.fromLatestName(this.crypto,this.depot,this.manners,this.reference,this.mmpt,i.pointer,o)}else if(Ur(i))return ir.resolveSoftLink(this.crypto,this.depot,this.manners,this.reference,i);return this.children[t]?this.children[t]:(n&&(this.children[t]=n),n)}async getName(){let{bareNameFilter:t,revision:n}=this.header,i=await oa(this.crypto,t,this.key,n);return sa(this.crypto,i)}async updateParentNameFilter(t){return this.header.bareNameFilter=await fo(this.crypto,t,Lo(this.key,"base64pad")),this}async get(t){if(t.length===0)return this;let[n,...i]=t,o=this.header.skeleton[n];return o===void 0?null:this.getRecurse(o,i)}async getRecurse(t,n){let[i,...o]=n;if(Ur(t)){let d=await ir.resolveSoftLink(this.crypto,this.depot,this.manners,this.reference,t);if(!d)return null;if(i===void 0)return d;if(ir.instanceOf(d))return d.get(n).then(sW);throw new Error("Was expecting a directory at: "+Do(n))}if(i===void 0)return oW(this.crypto,this.depot,this.manners,this.reference,this.mmpt,t);let a=t.subSkeleton[i];if(a!==void 0)return this.getRecurse(a,o);let c=await on.getLatestByCID(this.depot,this.crypto,this.mmpt,Oe(t.cid),Te(t.key,"base64pad"));if(!cp(c))return null;let f=c.skeleton[i];return f===void 0?null:this.getRecurse(f,o)}assignLink({name:t,link:n,skeleton:i}){this.header.links[t]=n,this.header.skeleton[t]=i,this.header.revision=this.header.revision+1,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(t,n,i,o,a){let c=a.ipns.split("/")[0];if(!a.privateName||!a.key)throw new Error("Mixing public and private soft links is not supported yet.");let f=await o.dns.lookupDnsLink(c);if(!f)throw new Error(`Failed to resolve the soft link: ${a.ipns} - Could not resolve DNSLink`);let d=(await Tt.getSimpleLinks(n,Oe(f))).private.cid,m=await yn.fromCID(n,Oe(d)),w=Te(a.key,"base64pad"),E=await on.getLatestByName(n,t,m,a.privateName,w);if(!E)return null;let T=E.metadata.isFile?await Ii.fromInfo(t,n,m,w,E):await ir.fromInfo(t,n,i,o,m,w,E);return T&&(T.readOnly=!0),T}getLinks(){return h8(this.header.links,t=>{if(Ur(t))return{...t};{let{key:n,...i}=t;return{...i}}})}updateLink(t,n){let{cid:i,size:o,isFile:a,skeleton:c}=n,f=Ge(n.key,"base64pad"),d=n.name;return this.assignLink({name:t,link:{name:t,key:f,pointer:d,size:o,isFile:a},skeleton:{cid:Jn(i),key:f,subSkeleton:c}}),this}insertSoftLink({name:t,key:n,privateName:i,username:o}){let a={ipns:this.reference.dataRoot.domain(o),name:t,privateName:i,key:Ge(n,"base64pad")};return this.assignLink({name:t,link:a,skeleton:a}),this}};async function oW(r,e,t,n,i,o){let a=Te(o.key,"base64pad"),c=await on.getLatestByCID(e,r,i,Oe(o.cid),a);return Zs(c)?await Ii.fromInfo(r,e,i,a,c):await ir.fromInfo(r,e,t,n,i,a,c)}function ZP(r){return Object.entries(r).reduce((e,[t,n])=>{let i=n;return Fv(n)&&(n.cid=Oe(n.cid).toString(),n.subSkeleton=ZP(n.subSkeleton)),{...e,[t]:i}},{})}function sW(r){return r&&(r.readOnly=!0),r}h();p();h();p();h();p();var b_=({name:r,code:e,encode:t})=>new w_(r,e,t),w_=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Ma(this.code,t):t.then(n=>Ma(this.code,n))}else throw Error("Unknown type, must be binary type")}};h();p();h();p();var gW={},ce,xr=new Array(32).fill(void 0);xr.push(void 0,null,!0,!1);function Jt(r){return xr[r]}var No=0,qy;function xl(){return qy.byteLength===0&&(qy=new Uint8Array(ce.memory.buffer)),qy}var Wy=new TextEncoder("utf-8"),aW=typeof Wy.encodeInto=="function"?function(r,e){return Wy.encodeInto(r,e)}:function(r,e){let t=Wy.encode(r);return e.set(t),{read:r.length,written:t.length}};function Vy(r,e,t){if(t===void 0){let c=Wy.encode(r),f=e(c.length);return xl().subarray(f,f+c.length).set(c),No=c.length,f}let n=r.length,i=e(n),o=xl(),a=0;for(;a<n;a++){let c=r.charCodeAt(a);if(c>127)break;o[i+a]=c}if(a!==n){a!==0&&(r=r.slice(a)),i=t(i,n,n=a+r.length*3);let c=xl().subarray(i+a,i+n),f=aW(r,c);a+=f.written}return No=a,i}function uW(r){return r==null}var Hy;function Le(){return Hy.byteLength===0&&(Hy=new Int32Array(ce.memory.buffer)),Hy}var Pp=xr.length;function cW(r){r<36||(xr[r]=Pp,Pp=r)}function kt(r){let e=Jt(r);return cW(r),e}var sI=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});sI.decode();function tu(r,e){return sI.decode(xl().subarray(r,r+e))}function At(r){Pp===xr.length&&xr.push(xr.length+1);let e=Pp;return Pp=xr[e],xr[e]=r,e}function v_(r){let e=typeof r;if(e=="number"||e=="boolean"||r==null)return`${r}`;if(e=="string")return`"${r}"`;if(e=="symbol"){let i=r.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){let i=r.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(r)){let i=r.length,o="[";i>0&&(o+=v_(r[0]));for(let a=1;a<i;a++)o+=", "+v_(r[a]);return o+="]",o}let t=/\[object ([^\]]+)\]/.exec(toString.call(r)),n;if(t.length>1)n=t[1];else return toString.call(r);if(n=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:n}var tI=new FinalizationRegistry(r=>{ce.__wbindgen_export_2.get(r.dtor)(r.a,r.b)});function fW(r,e,t,n){let i={a:r,b:e,cnt:1,dtor:t},o=(...a)=>{i.cnt++;let c=i.a;i.a=0;try{return n(c,i.b,...a)}finally{--i.cnt===0?(ce.__wbindgen_export_2.get(i.dtor)(c,i.b),tI.unregister(i)):i.a=c}};return o.original=i,tI.register(o,i,i),o}function lW(r,e,t){ce._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__ha1ec3a5271c97341(r,e,At(t))}var An=32;function Ti(r){if(An==1)throw new Error("out of js stack");return xr[--An]=r,An}function Gy(r,e){let t=e(r.length*1);return xl().set(r,t/1),No=r.length,t}function hW(r,e){if(!(r instanceof e))throw new Error(`expected instance of ${e.name}`);return r.ptr}function __(r,e){return xl().subarray(r/1,r/1+e)}function rI(r,e){try{return r.apply(this,e)}catch(t){ce.__wbindgen_exn_store(At(t))}}function pW(r,e,t,n){ce.wasm_bindgen__convert__closures__invoke2_mut__h1338dfb1e5ae1cd8(r,e,At(t),At(n))}var tfe=Object.freeze({DagProtobuf:112,112:"DagProtobuf",DagCbor:113,113:"DagCbor",DagJson:297,297:"DagJson",Raw:85,85:"Raw"}),rfe=new FinalizationRegistry(r=>ce.__wbg_foreignblockstore_free(r));var nI=new FinalizationRegistry(r=>ce.__wbg_publicdirectory_free(r)),Mo=class{static __wrap(e){let t=Object.create(Mo.prototype);return t.ptr=e,nI.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,nI.unregister(this),e}free(){let e=this.__destroy_into_raw();ce.__wbg_publicdirectory_free(e)}constructor(e){try{let t=ce.publicdirectory_new(Ti(e));return Mo.__wrap(t)}finally{xr[An++]=void 0}}getNode(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_getNode(a,this.ptr,Ti(e),At(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[An++]=void 0}}lookupNode(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16),c=Vy(e,ce.__wbindgen_malloc,ce.__wbindgen_realloc),f=No;ce.publicdirectory_lookupNode(a,this.ptr,c,f,At(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}store(e){try{let o=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_store(o,this.ptr,At(e));var t=Le()[o/4+0],n=Le()[o/4+1],i=Le()[o/4+2];if(i)throw kt(n);return kt(t)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}static load(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16),c=Gy(e,ce.__wbindgen_malloc),f=No;ce.publicdirectory_load(a,c,f,At(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}read(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_read(a,this.ptr,Ti(e),At(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[An++]=void 0}}ls(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_ls(a,this.ptr,Ti(e),At(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[An++]=void 0}}rm(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_rm(a,this.ptr,Ti(e),At(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[An++]=void 0}}write(e,t,n,i){try{let f=ce.__wbindgen_add_to_stack_pointer(-16),d=Gy(t,ce.__wbindgen_malloc),m=No;ce.publicdirectory_write(f,this.ptr,Ti(e),d,m,Ti(n),At(i));var o=Le()[f/4+0],a=Le()[f/4+1],c=Le()[f/4+2];if(c)throw kt(a);return kt(o)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[An++]=void 0,xr[An++]=void 0}}basicMv(e,t,n,i){try{let f=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_basicMv(f,this.ptr,Ti(e),Ti(t),Ti(n),At(i));var o=Le()[f/4+0],a=Le()[f/4+1],c=Le()[f/4+2];if(c)throw kt(a);return kt(o)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[An++]=void 0,xr[An++]=void 0,xr[An++]=void 0}}mkdir(e,t,n){try{let c=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_mkdir(c,this.ptr,Ti(e),Ti(t),At(n));var i=Le()[c/4+0],o=Le()[c/4+1],a=Le()[c/4+2];if(a)throw kt(o);return kt(i)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[An++]=void 0,xr[An++]=void 0}}baseHistoryOn(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16);hW(e,Mo),ce.publicdirectory_baseHistoryOn(a,this.ptr,e.ptr,At(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}previousCid(){let e=ce.publicdirectory_previousCid(this.ptr);return kt(e)}metadata(){try{let i=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_metadata(i,this.ptr);var e=Le()[i/4+0],t=Le()[i/4+1],n=Le()[i/4+2];if(n)throw kt(t);return kt(e)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}asNode(){let e=ce.publicdirectory_asNode(this.ptr);return El.__wrap(e)}getId(){try{let n=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_getId(n,this.ptr);var e=Le()[n/4+0],t=Le()[n/4+1];return tu(e,t)}finally{ce.__wbindgen_add_to_stack_pointer(16),ce.__wbindgen_free(e,t)}}},iI=new FinalizationRegistry(r=>ce.__wbg_publicfile_free(r)),Pc=class{static __wrap(e){let t=Object.create(Pc.prototype);return t.ptr=e,iI.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,iI.unregister(this),e}free(){let e=this.__destroy_into_raw();ce.__wbg_publicfile_free(e)}constructor(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16),c=Gy(t,ce.__wbindgen_malloc),f=No;ce.publicfile_new(a,Ti(e),c,f);var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return Pc.__wrap(n)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[An++]=void 0}}getId(){try{let n=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicfile_getId(n,this.ptr);var e=Le()[n/4+0],t=Le()[n/4+1];return tu(e,t)}finally{ce.__wbindgen_add_to_stack_pointer(16),ce.__wbindgen_free(e,t)}}store(e){try{let o=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicfile_store(o,this.ptr,At(e));var t=Le()[o/4+0],n=Le()[o/4+1],i=Le()[o/4+2];if(i)throw kt(n);return kt(t)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}static load(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16),c=Gy(e,ce.__wbindgen_malloc),f=No;ce.publicfile_load(a,c,f,At(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}previousCid(){let e=ce.publicfile_previousCid(this.ptr);return kt(e)}metadata(){try{let i=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicfile_metadata(i,this.ptr);var e=Le()[i/4+0],t=Le()[i/4+1],n=Le()[i/4+2];if(n)throw kt(t);return kt(e)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}contentCid(){try{let i=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicfile_contentCid(i,this.ptr);var e=Le()[i/4+0],t=Le()[i/4+1],n=__(e,t).slice();return ce.__wbindgen_free(e,t*1),n}finally{ce.__wbindgen_add_to_stack_pointer(16)}}},oI=new FinalizationRegistry(r=>ce.__wbg_publicnode_free(r)),El=class{static __wrap(e){let t=Object.create(El.prototype);return t.ptr=e,oI.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,oI.unregister(this),e}free(){let e=this.__destroy_into_raw();ce.__wbg_publicnode_free(e)}asDir(){try{let i=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicnode_asDir(i,this.ptr);var e=Le()[i/4+0],t=Le()[i/4+1],n=Le()[i/4+2];if(n)throw kt(t);return Mo.__wrap(e)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}asFile(){try{let i=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicnode_asFile(i,this.ptr);var e=Le()[i/4+0],t=Le()[i/4+1],n=Le()[i/4+2];if(n)throw kt(t);return Pc.__wrap(e)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}isDir(){return ce.publicnode_isDir(this.ptr)!==0}isFile(){return ce.publicnode_isFile(this.ptr)!==0}getId(){try{let n=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicnode_getId(n,this.ptr);var e=Le()[n/4+0],t=Le()[n/4+1];return tu(e,t)}finally{ce.__wbindgen_add_to_stack_pointer(16),ce.__wbindgen_free(e,t)}}};async function dW(r,e){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,e)}catch(n){if(r.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}let t=await r.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{let t=await WebAssembly.instantiate(r,e);return t instanceof WebAssembly.Instance?{instance:t,module:r}:t}}function mW(){let r={};return r.wbg={},r.wbg.__wbindgen_string_get=function(e,t){let n=Jt(t),i=typeof n=="string"?n:void 0;var o=uW(i)?0:Vy(i,ce.__wbindgen_malloc,ce.__wbindgen_realloc),a=No;Le()[e/4+1]=a,Le()[e/4+0]=o},r.wbg.__wbindgen_object_drop_ref=function(e){kt(e)},r.wbg.__wbg_publicdirectory_new=function(e){let t=Mo.__wrap(e);return At(t)},r.wbg.__wbg_publicfile_new=function(e){let t=Pc.__wrap(e);return At(t)},r.wbg.__wbg_publicnode_new=function(e){let t=El.__wrap(e);return At(t)},r.wbg.__wbindgen_string_new=function(e,t){let n=tu(e,t);return At(n)},r.wbg.__wbg_putBlock_88cdb3be9020efb7=function(e,t,n,i){var o=__(t,n).slice();ce.__wbindgen_free(t,n*1);let a=Jt(e).putBlock(o,i>>>0);return At(a)},r.wbg.__wbg_getBlock_ef67031e09d5c6fd=function(e,t,n){var i=__(t,n).slice();ce.__wbindgen_free(t,n*1);let o=Jt(e).getBlock(i);return At(o)},r.wbg.__wbindgen_bigint_new=function(e,t){let n=BigInt(tu(e,t));return At(n)},r.wbg.__wbindgen_number_new=function(e){return At(e)},r.wbg.__wbindgen_cb_drop=function(e){let t=kt(e).original;return t.cnt--==1?(t.a=0,!0):!1},r.wbg.__wbg_new_693216e109162396=function(){let e=new Error;return At(e)},r.wbg.__wbg_stack_0ddaca5d1abfb52f=function(e,t){let n=Jt(t).stack,i=Vy(n,ce.__wbindgen_malloc,ce.__wbindgen_realloc),o=No;Le()[e/4+1]=o,Le()[e/4+0]=i},r.wbg.__wbg_error_09919627ac0992f5=function(e,t){try{console.error(tu(e,t))}finally{ce.__wbindgen_free(e,t)}},r.wbg.__wbg_get_f0f4f1608ebf633e=function(e,t){let n=Jt(e)[t>>>0];return At(n)},r.wbg.__wbg_length_93debb0e2e184ab6=function(e){return Jt(e).length},r.wbg.__wbg_new_2ab697f1555e0dbc=function(){let e=new Array;return At(e)},r.wbg.__wbg_new_306ce8d57919e6ae=function(){let e=new Object;return At(e)},r.wbg.__wbg_push_811c8b08bf4ff9d5=function(e,t){return Jt(e).push(Jt(t))},r.wbg.__wbg_new_651776e932b7e9c7=function(e,t){let n=new Error(tu(e,t));return At(n)},r.wbg.__wbg_call_9855a4612eb496cb=function(){return rI(function(e,t,n){let i=Jt(e).call(Jt(t),Jt(n));return At(i)},arguments)},r.wbg.__wbg_getTime_7c8d3b79f51e2b87=function(e){return Jt(e).getTime()},r.wbg.__wbg_new_78403b138428b684=function(e,t){try{var n={a:e,b:t},i=(a,c)=>{let f=n.a;n.a=0;try{return pW(f,n.b,a,c)}finally{n.a=f}};let o=new Promise(i);return At(o)}finally{n.a=n.b=0}},r.wbg.__wbg_resolve_f269ce174f88b294=function(e){let t=Promise.resolve(Jt(e));return At(t)},r.wbg.__wbg_then_1c698eedca15eed6=function(e,t){let n=Jt(e).then(Jt(t));return At(n)},r.wbg.__wbg_then_4debc41d4fc92ce5=function(e,t,n){let i=Jt(e).then(Jt(t),Jt(n));return At(i)},r.wbg.__wbg_buffer_de1150f91b23aa89=function(e){let t=Jt(e).buffer;return At(t)},r.wbg.__wbg_newwithbyteoffsetandlength_9ca61320599a2c84=function(e,t,n){let i=new Uint8Array(Jt(e),t>>>0,n>>>0);return At(i)},r.wbg.__wbg_new_97cf52648830a70d=function(e){let t=new Uint8Array(Jt(e));return At(t)},r.wbg.__wbg_set_a0172b213e2469e9=function(e,t,n){Jt(e).set(Jt(t),n>>>0)},r.wbg.__wbg_length_e09c0b925ab8de5d=function(e){return Jt(e).length},r.wbg.__wbg_set_b12cd0ab82903c2f=function(){return rI(function(e,t,n){return Reflect.set(Jt(e),Jt(t),Jt(n))},arguments)},r.wbg.__wbindgen_debug_string=function(e,t){let n=v_(Jt(t)),i=Vy(n,ce.__wbindgen_malloc,ce.__wbindgen_realloc),o=No;Le()[e/4+1]=o,Le()[e/4+0]=i},r.wbg.__wbindgen_throw=function(e,t){throw new Error(tu(e,t))},r.wbg.__wbindgen_memory=function(){let e=ce.memory;return At(e)},r.wbg.__wbindgen_closure_wrapper945=function(e,t,n){let i=fW(e,t,417,lW);return At(i)},r}function yW(r,e){return ce=r.exports,aI.__wbindgen_wasm_module=e,Hy=new Int32Array(ce.memory.buffer),qy=new Uint8Array(ce.memory.buffer),ce}async function aI(r){typeof r>"u"&&(r=new URL("wasm_wnfs_bg.wasm",gW.url));let e=mW();(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));let{instance:t,module:n}=await dW(await r,e);return yW(t,n)}var uI=aI;h();p();var Ip=class{constructor(e){this.depot=e}async getBlock(e){let t=we.decode(e);return await this.depot.getBlock(t)}async putBlock(e,t){if(!WD(t))throw new Error(`No codec was registered for the code: ${_v(t)}`);return(await this.depot.putBlock(e,t)).bytes}};async function cI({manners:r}){r.log("\u23EC Loading WNFS WASM");let e=performance.now();await uI(r.wnfsWasmLookup(Vb));let t=performance.now()-e;r.log(`\u{1F9EA} Loaded WNFS WASM (${t.toFixed(0)}ms)`)}var ru=class{constructor(e,t,n,i){this.dependencies=e,this.root=Promise.resolve(t),this.lastRoot=t,this.store=n,this.readOnly=i}static async empty(e){await cI(e);let t=new Ip(e.depot),n=new Mo(new Date);return new ru(e,n,t,!1)}static async fromCID(e,t){await cI(e);let n=new Ip(e.depot),i=await Mo.load(t.bytes,n);return new ru(e,i,n,!1)}async atomically(e){let t=await this.root;this.root=e(t),await this.root}async withError(e,t){try{return await e}catch(n){throw console.error(`Error during WASM operation ${t}:`),n}}async ls(e){let t=await this.root,{result:n}=await this.withError(t.getNode(e,this.store),`ls(${e.join("/")})`);if(n==null)throw new Error(`Can't ls ${e.join("/")}: No such directory`);if(!n.isDir())throw new Error(`Can't ls ${e.join("/")}: Not a directory`);let i=n.asDir(),{result:o}=await this.withError(t.ls(e,this.store),`ls(${e.join("/")})`),a={};for(let c of o){let f=await i.lookupNode(c.name,this.store),d=f.isFile()?we.decode(await f.asFile().store(this.store)):we.decode(await f.asDir().store(this.store));a[c.name]={name:c.name,isFile:c.metadata.unixMeta.kind==="file",size:0,cid:d}}return a}async mkdir(e){return await this.atomically(async t=>{let{rootDir:n}=await this.withError(t.mkdir(e,new Date,this.store),`mkdir(${e.join("/")})`);return n}),this}async cat(e){let t=await this.root,{result:n}=await this.withError(t.read(e,this.store),`read(${e.join("/")})`),i=we.decode(n);return this.dependencies.depot.getUnixFile(i)}async add(e,t){let{cid:n}=await this.dependencies.depot.putChunked(t);return await this.atomically(async i=>{let{rootDir:o}=await this.withError(i.write(e,n.bytes,new Date,this.store),`write(${e.join("/")})`);return o}),this}async rm(e){return await this.atomically(async t=>{let{rootDir:n}=await this.withError(t.rm(e,this.store),`rm(${e.join("/")})`);return n}),this}async mv(e,t){return await this.atomically(async n=>{let{rootDir:i}=await this.withError(n.basicMv(e,t,new Date,this.store),`basicMv(${e.join("/")}, ${t.join("/")})`);return i}),this}async get(e){let t=await this.root,{result:n}=await this.withError(t.getNode(e,this.store),`getNode(${e.join("/")})`);if(n==null)return null;if(n.isFile()){let i=n.asFile(),o=await this.cat(e),a=e.slice(0,-1),c=e[e.length-1];return new E_(o,a,c,this,i)}else if(n.isDir()){let i=n.asDir();return new x_(this.readOnly,e,this,i)}throw new Error("Unknown node type. Can only handle files and directories.")}async exists(e){let t=await this.root;try{return await t.getNode(e,this.store),!0}catch{return!1}}async historyStep(){return await this.atomically(async e=>{let{rootDir:t}=await e.baseHistoryOn(this.lastRoot,this.store);return this.lastRoot=e,t}),await this.root}async put(){let t=await(await this.historyStep()).store(this.store);return we.decode(t)}async putDetailed(){return{cid:await this.put(),size:0,isFile:!1}}},x_=class{constructor(e,t,n,i){this.readOnly=e,this.directory=t,this.publicRoot=n,this.cachedDir=i}checkMutability(e){if(this.readOnly)throw new Error(`Directory is read-only. Cannot ${e}`)}async updateCache(){let t=await(await this.publicRoot.root).getNode(this.directory,this.publicRoot.store);this.cachedDir=t.asDir()}get header(){return fI(this.cachedDir)}async ls(e){return await this.publicRoot.ls([...this.directory,...e])}async mkdir(e){return this.checkMutability(`mkdir at ${[...this.directory,...e].join("/")}`),await this.publicRoot.mkdir([...this.directory,...e]),await this.updateCache(),this}async cat(e){return await this.publicRoot.cat([...this.directory,...e])}async add(e,t){return this.checkMutability(`write at ${[...this.directory,...e].join("/")}`),await this.publicRoot.add([...this.directory,...e],t),await this.updateCache(),this}async rm(e){return this.checkMutability(`remove at ${[...this.directory,...e].join("/")}`),await this.publicRoot.rm([...this.directory,...e]),await this.updateCache(),this}async mv(e,t){return this.checkMutability(`mv from ${[...this.directory,...e].join("/")} to ${[...this.directory,...t].join("/")}`),await this.publicRoot.mv([...this.directory,...e],[...this.directory,...t]),await this.updateCache(),this}async get(e){return await this.publicRoot.get([...this.directory,...e])}async exists(e){return await this.publicRoot.exists([...this.directory,...e])}async put(){await this.publicRoot.put();let t=await(await this.publicRoot.root).store(this.publicRoot.store);return we.decode(t)}async putDetailed(){return{isFile:!1,size:0,cid:await this.put()}}},E_=class extends Cp{constructor(t,n,i,o,a){super(t);this.directory=n,this.filename=i,this.publicRoot=o,this.cachedFile=a}async updateCache(){let n=await(await this.publicRoot.root).getNode([...this.directory,this.filename],this.publicRoot.store);this.cachedFile=n.asFile()}get header(){return fI(this.cachedFile)}async updateContent(t){return await super.updateContent(t),await this.updateCache(),this}async putDetailed(){let t=await this.publicRoot.root,n=[...this.directory,this.filename],{result:i}=await t.getNode(n,this.publicRoot.store);if(i==null)throw new Error(`No file at /${n.join("/")}.`);if(!i.isFile())throw new Error(`Not a file at /${n.join("/")}`);let o=i.asFile();return{isFile:!0,size:0,cid:we.decode(await o.store(this.publicRoot.store))}}};function fI(r){let e=r.metadata(),t={isFile:e.unixMeta.kind==="file",version:e.version,unixMeta:{_type:e.unixMeta.kind,ctime:Number(e.unixMeta.created),mtime:Number(e.unixMeta.modified),mode:e.unixMeta.mode}},n=r.previousCid();return n==null?{metadata:t}:{metadata:t,previous:we.decode(n)}}var Tp=class{constructor({dependencies:e,links:t,mmpt:n,privateLog:i,sharedCounter:o,sharedLinks:a,publicTree:c,prettyTree:f,privateNodes:d}){this.dependencies=e,this.links=t,this.mmpt=n,this.privateLog=i,this.sharedCounter=o,this.sharedLinks=a,this.publicTree=c,this.prettyTree=f,this.privateNodes=d}static async empty({accountDID:e,dependencies:t,rootKey:n,wnfsWasm:i}){i&&t.manners.log("\u26A0\uFE0F Running an EXPERIMENTAL new version of the file system: 3.0.0");let o=i?await ru.empty(t):await ws.empty(t.depot,t.reference),a=await ua.empty(t.depot),c=yn.create(t.depot),f=Cr(xn("private")),d=await ir.create(t.crypto,t.depot,t.manners,t.reference,c,n,null);await d.put();let m=new Tp({dependencies:t,links:{},mmpt:c,privateLog:[],sharedCounter:1,sharedLinks:{},publicTree:o,prettyTree:a,privateNodes:{[f]:d}});return await jf({accountDID:e,crypto:t.crypto,readKey:n}),await m.setVersion(i?Ac:Pi),await Promise.all([m.updatePuttable("public",o),m.updatePuttable("p",a),m.updatePuttable("private",c)]),m}static async fromCID({accountDID:e,dependencies:t,cid:n,permissions:i}){let{crypto:o,depot:a,manners:c}=t,f=await Tt.getSimpleLinks(t.depot,n),d=await vW(o,e,i||$h),m=await lI(t.depot,f),w=Zb(m,Ac);w&&t.manners.log("\u26A0\uFE0F Running an EXPERIMENTAL new version of the file system: 3.0.0");let E=f["public"]?.cid||null,T=E===null?await ws.empty(t.depot,t.reference):w?await ru.fromCID({depot:a,manners:c},Oe(E)):await ws.fromCID(t.depot,t.reference,Oe(E)),F=f["p"]?await ua.fromCID(t.depot,Oe(f["p"].cid)):await ua.empty(t.depot),N=f["private"]?.cid||null,he,de;N===null?(he=yn.create(t.depot),de={}):(he=await yn.fromCID(t.depot,Oe(N)),de=await bW(t,e,d,he));let Pe=f["privateLog"]?.cid,ie=Pe?await el(a,Oe(Pe)).then(Me=>Me.Links.map(rl)).then(Me=>Me.sort((vt,Ut)=>parseInt(vt.name,10)-parseInt(Ut.name,10))):[],be=f["shared"]?.cid||null,Ae=be?await this.getSharedLinks(a,Oe(be)):{},Y=f["sharedCounter"]?.cid||null,ge=Y?await Tt.getFile(t.depot,Oe(Y)).then(Me=>JSON.parse(Ge(Me,"utf8"))):1,_e=new Tp({dependencies:t,links:f,mmpt:he,privateLog:ie,sharedCounter:ge,sharedLinks:Ae,publicTree:T,prettyTree:F,privateNodes:de});return f["version"]==null&&await _e.setVersion(Pi),_e}async put(){let{cid:e}=await this.putDetailed();return e}async putDetailed(){return Tt.putLinks(this.dependencies.depot,this.links)}updateLink(e,t){let{cid:n,size:i,isFile:o}=t;return this.links[e]=Rn(e,n,o,i),this}async updatePuttable(e,t){return this.updateLink(e,await t.putDetailed())}findPrivateNode(e){return A_(this.privateNodes,e)}async addPrivateLogEntry(e,t){let n=[...this.privateLog],i=Math.max(0,n.length-1),o=n[i]?.cid?await e.getUnixFile(Oe(n[i].cid)).then(w=>Ge(w,"utf8")).then(w=>w.split(",")):[];o.length+1>Tp.LOG_CHUNK_SIZE&&(i=i+1,o=[]);let c=await this.dependencies.crypto.hash.sha256(Te(Jn(t),"utf8")),f=[...o,c],d=await Tt.putFile(this.dependencies.depot,Te(f.join(","),"utf8"));n[i]={name:i.toString(),cid:d.cid,size:d.size};let m=await ap(this.dependencies.depot,n.map(my));this.updateLink("privateLog",{cid:m,isFile:!1,size:await this.dependencies.depot.size(m)}),this.privateLog=n}async addShares(e){this.sharedLinks=e.reduce((i,o)=>({...i,[o.name]:o}),this.sharedLinks);let t=Object.values(this.sharedLinks).reduce((i,{cid:o,name:a,size:c})=>({...i,[a]:{cid:o,name:a,size:c}}),{}),n=await this.dependencies.depot.putBlock(ps(t),Va);return this.updateLink("shared",{cid:n,isFile:!1,size:await this.dependencies.depot.size(n)}),this}static async getSharedLinks(e,t){let n=await e.getBlock(t),i=oo(n);if(!Ye(i))throw new Error("Invalid shared section, not an object");return Object.values(i).reduce((o,a)=>{if(!Ye(a))return o;let c=a.name?a.name:null,f=a.cid?Oe(a.cid):null;return!c||!f?o:{...o,[c]:{name:c,cid:f,size:a.size||0}}},{})}async setSharedCounter(e){this.sharedCounter=e;let{cid:t,size:n}=await Tt.putFile(this.dependencies.depot,Te(JSON.stringify(e),"utf8"));return this.updateLink("sharedCounter",{cid:t,isFile:!0,size:n}),e}async bumpSharedCounter(){let e=this.sharedCounter+1;return this.setSharedCounter(e)}async setVersion(e){let t=Te(rc(e),"utf8"),n=await Tt.putFile(this.dependencies.depot,t);return this.updateLink("version",n)}async getVersion(){return await lI(this.dependencies.depot,this.links)}},nu=Tp;nu.LOG_CHUNK_SIZE=1020;async function wW(r,e,t,n,i){let o=await Km({accountDID:t,crypto:r,path:i}),a=await e.getItem(o);if(a)return a;let[c,f]=A_(n,i);if(!f)return null;let m=nr(i).slice(nr(c).length);return Ii.instanceOf(f)?m.length===0?f.header.bareNameFilter:null:(f.exists(m)||(Yr(i)?await f.mkdir(m):await f.add(m,new Uint8Array)),f.get(m).then(w=>w?w.header.bareNameFilter:null))}function A_(r,e){let t=r[Cr(e)];if(t)return[e,t];let n=Ib(e);return n?A_(r,n):[e,null]}function bW(r,e,t,n){let{crypto:i,storage:o}=r;return _W(t).reduce((a,{path:c,key:f})=>a.then(async d=>{let m,w=nr(c);if(w.length===1&&w[0]==="private")m=await ir.fromBaseKey(r.crypto,r.depot,r.manners,r.reference,n,f);else{let T=await wW(i,o,e,d,c);if(!T)throw new Error(`Was trying to load the PrivateTree for the path \`${c}\`, but couldn't find the bare name filter for it.`);Yr(c)?m=await ir.fromBareNameFilter(r.crypto,r.depot,r.manners,r.reference,n,T,f):m=await Ii.fromBareNameFilter(r.crypto,r.depot,n,T,f)}let E=Cr(c);return{...d,[E]:m}}),Promise.resolve({}))}async function lI(r,e){let t=await Tt.getFile(r,Oe(e["version"].cid));return tc(Ge(t))??JP}async function vW(r,e,t){return zh(t).reduce(async(n,i)=>{if(cs("public",i))return n;let o=await Qu({accountDID:e,crypto:r,path:i}),a=await r.keystore.exportSymmKey(o),c={path:i,key:a};return n.then(f=>[...f,c])},Promise.resolve([]))}function _W(r){return r.sort((e,t)=>Cr(e.path).localeCompare(Cr(t.path)))}h();p();async function Yy(r,{counter:e,recipientExchangeDid:t,senderRootDid:n}){let i=Te(`${t}${n}${e}`,"utf8");return Ge(await r.hash.sha256(i),"base64pad")}function hI({entryIndexCid:r,symmKey:e,symmKeyAlgo:t}){let n=r;return{algo:t,key:typeof e=="string"?Te(e,"base64pad"):e,cid:n}}h();p();h();p();async function dI(r,{bareFilter:e,shareKey:t}){let n=await r.hash.sha256(Te(t,"base64pad"));return zP(r,await fo(r,e,Lo(n,"hex")))}var EW=xn("public",".well-known","exchange");async function mI(r,e,t,n,i,o,{shareWith:a,sharedBy:c}){let f=Array.isArray(a)?a:a.startsWith("did:")?[a]:await AW(e,n,a),d=i.sharedCounter||1,m=i.mmpt,w=await Promise.all(f.map(async ie=>[ie,await Yy(r,{counter:d,recipientExchangeDid:ie,senderRootDid:c.rootDid})])),E=await r.aes.genKey(jt.AES_GCM).then(r.aes.exportKey),T=await ir.create(r,e,t,n,m,E,null);await Promise.all(o.map(async([ie,be])=>{let Ae=await be.getName();return T.insertSoftLink({key:be.key,name:ie,privateName:Ae,username:c.username})}));let F=jt.AES_GCM,N=Object.assign({},T.header),he=await cc(e,await r.aes.encrypt(Te(JSON.stringify(N),"utf8"),T.key,F));if(w.length){let ie=await dI(r,{bareFilter:N.bareNameFilter,shareKey:w[0][1]});await m.add(ie,he.cid)}let de=ps(hI({entryIndexCid:Jn(he.cid),symmKey:T.key,symmKeyAlgo:F})),Pe=await Promise.all(w.map(async([ie,be])=>{let{publicKey:Ae}=Zu(r,ie),Y=await r.rsa.encrypt(de,Ae),ge=await e.putChunked(Y);return{name:be,cid:ge.cid,size:ge.size}}));return await i.addShares(Pe),{shareId:d.toString(),sharedBy:c}}async function AW(r,e,t){let n=await e.dataRoot.lookup(t);if(!n)throw new Error("This person doesn't have a filesystem yet.");let o=(await Tt.getSimpleLinks(r,n))["p"]?.cid||null;if(!o)throw new Error("This person's filesystem doesn't have a pretty tree.");let a=await ua.fromCID(r,Oe(o)),c=nr(Xu(EW)),f=await a.get(c);return f&&f instanceof ua?Object.keys(f.getLinks()):[]}var iu=class{constructor({account:e,dependencies:t,root:n,localOnly:i}){this.account=e,this.dependencies=t,this.localOnly=i||!1,this.proofs={},this.publishHooks=[],this.root=n,this._publishWhenOnline=[],this._publishing=!1,this._whenOnline=this._whenOnline.bind(this),this._beforeLeaving=this._beforeLeaving.bind(this);let o=async c=>{await this.dependencies.reference.repositories.cidLog.add(c),this.dependencies.manners.log("\u{1F4D3} Adding to the CID ledger:",c.toString())},a=XP(3e3,!1,(c,f)=>{if(globalThis.navigator.onLine)return this._publishing=[c,!0],this.dependencies.reference.dataRoot.update(c,f).then(()=>{this._publishing&&this._publishing[0]===c&&(this._publishing=!1)});this._publishWhenOnline.push([c,f])},!1);this.publishHooks.push(o),this.publishHooks.push(a),this.localOnly||(globalThis.addEventListener("online",this._whenOnline),globalThis.addEventListener("beforeunload",this._beforeLeaving))}static async empty(e){let{account:t,dependencies:n,localOnly:i}=e,o=e.rootKey||await n.crypto.aes.genKey(Ya).then(n.crypto.aes.exportKey),a=e.version===rc(Ac),c=await nu.empty({accountDID:t.rootDID,dependencies:n,rootKey:o,wnfsWasm:a});return new iu({account:t,dependencies:n,root:c,localOnly:i})}static async fromCID(e,t){let{account:n,dependencies:i,permissions:o,localOnly:a}=t,c=await nu.fromCID({accountDID:n.rootDID,dependencies:i,cid:e,permissions:o});return new iu({account:n,dependencies:i,root:c,localOnly:a})}deactivate(){this.localOnly||(globalThis.removeEventListener("online",this._whenOnline),globalThis.removeEventListener("beforeunload",this._beforeLeaving))}async ls(e){if(us(e))throw new Error("`ls` only accepts directory paths");return this.runOnNode(e,{public:async(t,n)=>t.ls(n),private:async(t,n)=>{if(Tr(t))throw new Error("Tried to `ls` a file");return t.ls(n)}})}async mkdir(e,t={}){if(us(e))throw new Error("`mkdir` only accepts directory paths");return await this.runMutationOnNode(e,{public:async(n,i)=>{await n.mkdir(i)},private:async(n,i)=>{if(Tr(n))throw new Error("Tried to `mkdir` a file");await n.mkdir(i)}}),t.publish&&await this.publish(),this}async add(e,t,n={}){if(Ur(t)||GD(t)||YD(t)){if(us(e))throw new Error("Can't add soft links to a file");await this.runMutationOnNode(e,{public:async(o,a)=>{let c=Array.isArray(t)?t:Ye(t)?Object.values(t):[t];await this.runOnChildTree(o,a,async f=>(c.forEach(d=>{(ir.instanceOf(f)||ws.instanceOf(f))&&f.assignLink({name:d.name,link:d,skeleton:d})}),f))},private:async(o,a)=>{let c=Array.isArray(t)?t:Ye(t)?Object.values(t):[t];await this.runOnChildTree(o,a,async f=>(c.forEach(d=>{(ir.instanceOf(f)||ws.instanceOf(f))&&f.assignLink({name:d.name,link:d,skeleton:d})}),f))}})}else{if(Yr(e))throw new Error("`add` only accepts file paths when working with regular files");await this.runMutationOnNode(e,{public:async(o,a)=>{await o.add(a,t)},private:async(o,a)=>{Tr(o)?await o.updateContent(t):await o.add(a,t)}})}return n.publish&&await this.publish(),this}async cat(e){if(Yr(e))throw new Error("`cat` only accepts file paths");return this.runOnNode(e,{public:async(t,n)=>await t.cat(n),private:async(t,n)=>Tr(t)?t.content:await t.cat(n)})}async read(e){if(Yr(e))throw new Error("`read` only accepts file paths");return this.cat(e)}async write(e,t,n={}){if(Yr(e))throw new Error("`write` only accepts file paths");return this.add(e,t,n)}async exists(e){return this.runOnNode(e,{public:async(t,n)=>await t.exists(n),private:async(t,n)=>Tr(t)||await t.exists(n)})}async get(e){return this.runOnNode(e,{public:async(t,n)=>await t.get(n),private:async(t,n)=>Tr(t)?t:await t.get(n)})}async mv(e,t){let n=Nm(e,t);if(!Cb(e,t)){let i=Mm(e),o=Mm(t);throw new Error(`Can't move to a different kind of path, from is a ${i} and to is a ${o}`)}if(!n)throw new Error("`mv` is only supported on the same tree for now");if(await this.exists(t))throw new Error("Destination already exists");return await this.runOnNode(e,{public:async(i,o)=>{let[a,...c]=nr(t);await i.mv(o,c)},private:async(i,o)=>{if(Tr(i))throw new Error("Tried to `mv` within a file");let[a,...c]=nr(t);await i.mv(o,c)}}),this}resolveSymlink(e){return mt(e,"privateName")?ir.resolveSoftLink(this.dependencies.crypto,this.dependencies.depot,this.dependencies.manners,this.dependencies.reference,e):ws.resolveSoftLink(this.dependencies.depot,this.dependencies.reference,e)}async rm(e){return await this.runMutationOnNode(e,{public:async(t,n)=>{await t.rm(n)},private:async(t,n)=>{if(Tr(t))throw new Error("Cannot `rm` a file you've asked permission for");await t.rm(n)}}),this}async symlink(e){let{at:t,referringTo:n,name:i}=e,o=this.account.username;if(t==null)throw new Error("Missing parameter `symlink.at`");if(us(t))throw new Error("`symlink.at` only accepts directory paths");let a=Nm(t,n);if(!o)throw new Error("I need a username in order to use this method");if(!a)throw new Error("`link` is only supported on the same tree for now");return await this.runMutationOnNode(t,{public:async(c,f)=>{if(!ua.instanceOf(c))if(ws.instanceOf(c))await this.runOnChildTree(c,f,async d=>(ws.instanceOf(d)&&d.insertSoftLink({path:Xu(n),name:i,username:o}),d));else throw new Error("Symlinks not supported in WASM-WNFS yet.")},private:async(c,f)=>{if(Tr(c))throw new Error("Cannot add a soft link to a file");await this.runOnChildTree(c,f,async d=>{if(ir.instanceOf(d)){let m=await this.runOnNode(n,{public:async()=>{throw new Error("File system hit a public node within a private node. This is not supported/this should not happen.")},private:async(w,E)=>{let T=Tr(w)?w:await w.get(E);if(ir.instanceOf(T))return T;if(Ii.instanceOf(T))return T;throw new Error("`symlink.referringTo` is not of the right type")}});if(!m)throw new Error("Could not find the item the symlink is referring to");d.insertSoftLink({name:i,username:o,key:m.key,privateName:await m.getName()})}return d})}}),this}async publish(){let e=Array.from(Object.entries(this.proofs));this.proofs={};let t=await this.root.put();return e.forEach(([n,i])=>{this.publishHooks.forEach(o=>o(t,i))}),t}async historyStep(){let e=this.root.publicTree;mt(e,"historyStep")&&typeof e.historyStep=="function"&&await e.historyStep()}async acceptShare({shareId:e,sharedBy:t}){let n=await this.loadShare({shareId:e,sharedBy:t});return await this.add(xn("private","Shared with me",t),await n.ls([]).then(Object.values).then(i=>i.filter(Ur))),this}async loadShare({shareId:e,sharedBy:t}){let n=await za(this.dependencies.crypto),i=await this.dependencies.reference.didRoot.lookup(t),o=await Yy(this.dependencies.crypto,{counter:parseInt(e,10),recipientExchangeDid:n,senderRootDid:i}),a=await this.dependencies.reference.dataRoot.lookup(t);if(!a)throw new Error("This user doesn't have a filesystem yet.");let c=await Tt.getSimpleLinks(this.dependencies.depot,a),f=c["shared"]?.cid||null;if(!f)throw new Error("This user hasn't shared anything yet.");let d=await nu.getSharedLinks(this.dependencies.depot,Oe(f)),m=Ye(d)?d[o]:null;if(!m)throw new Error("Couldn't find a matching share.");let w=Ye(m)?m.cid:null;if(!w)throw new Error("Couldn't find a matching share.");let E=await this.dependencies.depot.getBlock(Oe(w)),T=await this.dependencies.crypto.keystore.decrypt(E),F=oo(T);if(!mt(F,"cid"))throw new Error("Share payload is missing the `cid` property");if(!mt(F,"key"))throw new Error("Share payload is missing the `key` property");if(!mt(F,"algo"))throw new Error("Share payload is missing the `algo` property");let N=F.cid,he=F.key,de=F.algo;if(!c["private"]?.cid)throw new Error("This user's filesystem doesn't have a private branch");let ie=await yn.fromCID(this.dependencies.depot,Oe(c["private"]?.cid)),be=await this.dependencies.depot.getBlock(Oe(N)),Ae=await this.dependencies.crypto.aes.decrypt(be,he,de),Y=JSON.parse(Ge(Ae,"utf8"));if(!yy(Y))throw new Error("The share payload did not point to a valid entry index");return ir.fromInfo(this.dependencies.crypto,this.dependencies.depot,this.dependencies.manners,this.dependencies.reference,ie,he,Y)}async sharePrivate(e,{sharedBy:t,shareWith:n}){let i=e.filter(c=>cs("private",c));if(!t){if(!this.account.username)throw new Error("I need a username in order to use this method");t={rootDid:this.account.rootDID,username:this.account.username}}let o=await i.reduce(async(c,f)=>{let d=await c,m=Tb(f),w=await this.get(f);return m&&(Ii.instanceOf(w)||ir.instanceOf(w))?[...d,[m,w]]:d},Promise.resolve([]));if(!o.length)throw new Error("Didn't find any items to share");let a=await mI(this.dependencies.crypto,this.dependencies.depot,this.dependencies.manners,this.dependencies.reference,this.root,o,{shareWith:n,sharedBy:t});return await this.root.bumpSharedCounter(),await this.root.updatePuttable("private",this.root.mmpt),await this.publish(),a}async checkMutationPermissionAndAddProof(e,t){let n=t?"make changes to":"query";if(!this.localOnly){let i=await this.dependencies.reference.repositories.ucans.lookupFilesystemUcan(e);if(!i||Gs(i)||!i.signature)throw new gl(`I don't have the necessary permissions to ${n} the file system at "${Cr(e)}"`);this.proofs[i.signature]=i}}async runMutationOnNode(e,t){let n=nr(e),i=n[0],o=n.slice(1);if(await this.checkMutationPermissionAndAddProof(e,!0),i==="public")await t.public(this.root.publicTree,o),await t.public(this.root.prettyTree,o),await Promise.all([this.root.updatePuttable("public",this.root.publicTree),this.root.updatePuttable("p",this.root.prettyTree)]);else if(i==="private"){let[a,c]=this.root.findPrivateNode(e);if(!c)throw new gl(`I don't have the necessary permissions to make changes to the file system at "${Cr(e)}"`);await t.private(c,n.slice(nr(a).length)),await c.put(),await this.root.updatePuttable("private",this.root.mmpt);let f=await this.root.mmpt.put();await this.root.addPrivateLogEntry(this.dependencies.depot,f)}else throw i==="p"?new Error("The pretty path is read only"):new Error("Not a valid FileSystem path")}async runOnNode(e,t){let n=nr(e),i=n[0],o=n.slice(1);if(await this.checkMutationPermissionAndAddProof(e,!1),i==="public")return await t.public(this.root.publicTree,o);if(i==="private"){let[a,c]=this.root.findPrivateNode(e);if(!c)throw new gl(`I don't have the necessary permissions to query the file system at "${Cr(e)}"`);return await t.private(c,n.slice(nr(a).length))}else{if(i==="p")return await t.public(this.root.prettyTree,o);throw new Error("Not a valid FileSystem path")}}async runOnChildTree(e,t,n){let i=e;if(t.length){await i.exists(t)||await i.mkdir(t);let o=await i.get(t);if(hy(o))i=o;else throw new Error("Path does not point to a directory")}return i=await n(i),t.length?await e.updateChild(i,t):e}_whenOnline(){let e=[...this._publishWhenOnline];this._publishWhenOnline=[],e.forEach(([t,n])=>{this.publishHooks.forEach(i=>i(t,n))})}_beforeLeaving(e){let t="Are you sure you want to leave? We don't control the browser so you may lose your data.";if(this._publishing||this._publishWhenOnline.length)return(e||globalThis.event).returnValue=t,t}},S_=iu;async function kp({config:r,dependencies:e,rootKey:t,username:n}){let{crypto:i,depot:o,manners:a,reference:c,storage:f}=e,d,m,w=c.repositories.cidLog,E={username:n,rootDID:await c.didRoot.lookup(n)},T=navigator.onLine?await CW(c,n,{maxRetries:20}):null,F=T?await w.indexOf(T):-1;if(navigator.onLine)if(!T)d=w.newest(),d?a.log("\u{1F4D3} No DNSLink, using local CID:",d.toString()):a.log("\u{1F4D3} Creating a new file system");else if(F===0)d=T,a.log("\u{1F4D3} DNSLink is up to date:",d.toString());else if(F>0){d=w.newest();let de=F===1?"1 newer local entry":F+" newer local entries";a.log("\u{1F4D3} DNSLink is outdated ("+de+"), using local CID:",d.toString())}else d=T,await w.add(d),a.log("\u{1F4D3} DNSLink is newer:",d.toString());else throw d=w.newest(),d&&a.log("\u{1F4D3} Working offline, using local CID:",d.toString()),new Error("Offline, don't have a filesystem to work with.");let N=r.permissions,he={crypto:i,depot:o,reference:c,storage:f};return d?(await DW(e.depot,r,d),await a.fileSystem.hooks.beforeLoadExisting(d,E,he),m=await S_.fromCID(d,{account:E,dependencies:e,permissions:N}),await a.fileSystem.hooks.afterLoadExisting(m,E,he),m):(await a.fileSystem.hooks.beforeLoadNew(E,he),m=await S_.empty({account:E,dependencies:e,rootKey:t,permissions:N,version:r.fileSystem?.version}),await a.fileSystem.hooks.afterLoadNew(m,E,he),m)}var yI={versionMismatch:{newer:async()=>gI(`Sorry, we can't sync your filesystem with this app. This app only understands older versions of filesystems.

Please try to hard refresh this site or let this app's developer know.

Feel free to contact Fission support: support@fission.codes`),older:async()=>gI(`Sorry, we can't sync your filesystem with this app. Your filesystem version is out-dated and it needs to be migrated.

Run a migration (https://guide.fission.codes/accounts/account-signup/account-migration) or talk to Fission support: support@fission.codes`)}};async function DW(r,e,t){let n=await Tt.getSimpleLinks(r,t),i=n["version"]==null?"1.0.0":new TextDecoder().decode(await Tt.getFile(r,Oe(n["version"].cid))),o=async()=>(await(e.userMessages||yI).versionMismatch.newer(i),new Error(`Incompatible filesystem version. Version: ${i} Supported versions: ${y_.map(d=>rc(d)).join(", ")}. Please upgrade this app's webnative version.`)),a=async()=>(await(e.userMessages||yI).versionMismatch.older(i),new Error(`Incompatible filesystem version. Version: ${i} Supported versions: ${y_.map(d=>rc(d)).join(", ")}. The user should migrate their filesystem.`)),c=tc(i);if(c==null)throw await o();let f=YP(c);if(f==="too-high")throw await o();if(f==="too-low")throw await a()}function gI(r){globalThis.alert!=null&&globalThis.alert(r)}async function CW(r,e,t={}){let n=t.maxRetries??0,i=t.retryInterval??500,o=await r.dataRoot.lookup(e).catch(()=>null);return o?o.toString()===qm?null:o:new Promise((a,c)=>{let f=0,d=setInterval(async()=>{if(o=await r.dataRoot.lookup(e).catch(()=>null),!o&&f<n){f++;return}else f>=n&&c("Failed to load data root");clearInterval(d),a(o?.toString()===qm?null:o)},i)})}h();p();h();p();var PW=globalThis||window||self,Ct=PW.crypto;var KI=Ze(wI(),1);h();p();h();p();h();p();h();p();var D_=new Error("Key does not exist. Make sure you properly instantiated the keystore."),bI=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),vI=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),IW=new Error("ECC is not enabled for this browser. Please use RSA instead."),_I=new Error("Cryptosystem not supported. Please use ECC or RSA"),xI=new Error("Invalid key use. Please use 'exchange' or 'write"),TW=new Error("Max must be less than 256 and greater than 0");function Al(r){if(!r||r===null)throw D_;if(r.privateKey===void 0)throw bI;return r}function C_(r){if(!r||r===null)throw D_;if(r.privateKey!==void 0||r.algorithm===void 0)throw vI;return r}function kW(r){EI(r,[ls.ECC,ls.RSA],_I)}function Ic(r){EI(r,[_r.Exchange,_r.Write],xI)}function EI(r,e,t){if(!e.some(i=>i===r))throw t}var AI={KeyDoesNotExist:D_,NotKeyPair:bI,NotKey:vI,ECCNotEnabled:IW,UnsupportedCrypto:_I,InvalidKeyUse:xI,checkIsKeyPair:Al,checkIsKey:C_,checkValidCryptoSystem:kW,checkValidKeyUse:Ic,InvalidMaxValue:TW};function FW(r,e){let t=e===8?new Uint8Array(r):new Uint16Array(r);return Array.from(t).map(n=>String.fromCharCode(n)).join("")}function BW(r){return Ge(new Uint8Array(r),"base64pad")}function P_(r,e){let t=e===8?new Uint8Array(r.length):new Uint16Array(r.length);for(let n=0,i=r.length;n<i;n++)t[n]=r.charCodeAt(n);return t.buffer}function SI(r){return Te(r,"base64pad").buffer}function RW(){return new Uint8Array([1,0,1])}function OW(r,{max:e}={max:255}){if(e<1||e>255)throw AI.InvalidMaxValue;let t=new Uint8Array(r);if(e==255)return Ct.getRandomValues(t),t.buffer;let n=0,i=e+1,o=Math.floor(256/i)*i,a=new Uint8Array(1);for(;n<t.length;)Ct.getRandomValues(a),a[0]<o&&(t[n]=a[0]%i,n++);return t.buffer}function LW(r,e){let t=new Uint8Array(r),n=new Uint8Array(e),i=new Uint8Array(t.length+n.length);return i.set(t),i.set(n,t.length),i.buffer}var DI=r=>Zy(r,e=>P_(e,oc.B8)),CI=r=>Zy(r,e=>P_(e,oc.B16)),Xy=r=>Zy(r,SI),Qy=(r,e)=>{switch(e){case 8:return DI(r);default:return CI(r)}},Zy=(r,e)=>{if(typeof r=="string")return e(r);if(typeof r=="object"&&r.byteLength!==void 0)return new Uint8Array(r).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")};async function UW(r){return new Promise(e=>{let{port1:t,port2:n}=new MessageChannel;n.onmessage=i=>e(i.data),t.postMessage(r)})}var Qt={arrBufToStr:FW,arrBufToBase64:BW,strToArrBuf:P_,base64ToArrBuf:SI,publicExponent:RW,randomBuf:OW,joinBufs:LW,normalizeUtf8ToBuf:DI,normalizeUtf16ToBuf:CI,normalizeBase64ToBuf:Xy,normalizeToBuf:Zy,structuralClone:UW};h();p();var I_="ECDH",T_="ECDSA",Sl="RSA-OAEP",ou="RSASSA-PKCS1-v1_5",k_=128,PI="ecc",F_=Jm.P_256,II=Xm.B2048,su=jt.AES_CTR,Fp=ic.B256,B_=64,Bp=$f.SHA_256,Dl=oc.B16,TI="keystore",kI="exchange-key",FI="write-key";async function R_(r){return Ct.subtle.generateKey({name:r?.alg||su,length:r?.length||Fp},!0,["encrypt","decrypt"])}async function MW(r,e){let t=Qt.base64ToArrBuf(r);return Ct.subtle.importKey("raw",t,{name:e?.alg||su,length:e?.length||Fp},!0,["encrypt","decrypt"])}var Rp={makeKey:R_,importKey:MW};h();p();async function eg(r,e,t){let n=Qt.normalizeUtf16ToBuf(r),i=typeof e=="string"?await Rp.importKey(e,t):e,o=t?.alg||su,a=t?.iv||Qt.randomBuf(16),c=await Ct.subtle.encrypt({name:o,iv:o===jt.AES_CTR?void 0:a,counter:o===jt.AES_CTR?new Uint8Array(a):void 0,length:o===jt.AES_CTR?B_:void 0},i,n);return Qt.joinBufs(a,c)}async function tg(r,e,t){let n=Qt.normalizeBase64ToBuf(r),i=typeof e=="string"?await Rp.importKey(e,t):e,o=t?.alg||su,a=n.slice(0,16),c=n.slice(16);return await Ct.subtle.decrypt({name:o,iv:o===jt.AES_CTR?void 0:a,counter:o===jt.AES_CTR?new Uint8Array(a):void 0,length:o===jt.AES_CTR?B_:void 0},i,c)}async function KW(r,e,t){let n=await eg(r,e,t);return Qt.arrBufToBase64(n)}async function jW(r,e,t){let n=await tg(r,e,t);return Qt.arrBufToStr(n,16)}async function $W(r){let e=await Ct.subtle.exportKey("raw",r);return Qt.arrBufToBase64(e)}var BI={encryptBytes:eg,decryptBytes:tg,encrypt:KW,decrypt:jW,exportKey:$W};var Cl={...Rp,...BI};h();p();h();p();async function qW(r,e,t){Ic(t);let n=t===_r.Exchange?Sl:ou,i=t===_r.Exchange?["encrypt","decrypt"]:["sign","verify"];return Ct.subtle.generateKey({name:n,modulusLength:r,publicExponent:Qt.publicExponent(),hash:{name:e}},!1,i)}function WW(r){return r.replace(`-----BEGIN PUBLIC KEY-----
`,"").replace(`
-----END PUBLIC KEY-----`,"")}async function VW(r,e,t){Ic(t);let n=t===_r.Exchange?Sl:ou,i=t===_r.Exchange?["encrypt"]:["verify"],o=Qt.base64ToArrBuf(WW(r));return Ct.subtle.importKey("spki",o,{name:n,hash:{name:e}},!0,i)}var au={makeKeypair:qW,importPublicKey:VW};h();p();async function HW(r,e,t=Dl){return Ct.subtle.sign({name:ou,saltLength:k_},e,Qy(r,t))}async function GW(r,e,t,n=Dl,i=Bp){return Ct.subtle.verify({name:ou,saltLength:k_},typeof t=="string"?await au.importPublicKey(t,i,_r.Write):t,Xy(e),Qy(r,n))}async function YW(r,e,t=Dl,n=Bp){return Ct.subtle.encrypt({name:Sl},typeof e=="string"?await au.importPublicKey(e,n,_r.Exchange):e,Qy(r,t))}async function JW(r,e){let t=Xy(r);return Ct.subtle.decrypt({name:Sl},e,t)}async function XW(r){let e=await Ct.subtle.exportKey("spki",r.publicKey);return Qt.arrBufToBase64(e)}var ca={sign:HW,verify:GW,encrypt:YW,decrypt:JW,getPublicKey:XW};h();p();h();p();var bs=Ze(Um(),1);function QW(r){return bs.default.createInstance({name:r})}async function ZW(r,e,t=bs.default){if(await LI(r,t))return;let n=await e();await RI(r,n,t)}async function RI(r,e,t=bs.default){return t.setItem(r,e)}async function eV(r,e=bs.default){return OI(r,Al,e)}async function tV(r,e=bs.default){return OI(r,C_,e)}async function OI(r,e,t=bs.default){let n=await t.getItem(r);return n===null?null:e(n)}async function LI(r,e=bs.default){return await e.getItem(r)!==null}async function rV(r,e=bs.default){return e.removeItem(r)}async function UI(r){return r.dropInstance()}async function nV(r){return r?UI(r):bs.default.clear()}var ki={createStore:QW,createIfDoesNotExist:ZW,put:RI,getKeypair:eV,getKey:tV,exists:LI,rm:rV,dropStore:UI,clear:nV};h();p();h();p();async function iV(r,e){Ic(e);let t=e===_r.Exchange?I_:T_,n=e===_r.Exchange?["deriveKey","deriveBits"]:["sign","verify"];return Ct.subtle.generateKey({name:t,namedCurve:r},!1,n)}async function oV(r,e,t){Ic(t);let n=t===_r.Exchange?I_:T_,i=t===_r.Exchange?[]:["verify"],o=Qt.base64ToArrBuf(r);return Ct.subtle.importKey("raw",o,{name:n,namedCurve:e},!0,i)}var NI={makeKeypair:iV,importPublicKey:oV};var O_={type:PI,curve:F_,rsaSize:II,symmAlg:su,symmLen:Fp,hashAlg:Bp,charSize:Dl,storeName:TI,exchangeKeyName:kI,writeKeyName:FI};function sV(r,e=!0){let t;return r?t={...O_,...r}:t=O_,r?.type||(t.type=e?ls.ECC:ls.RSA),t}async function aV(){let r=await NI.makeKeypair(F_,_r.Exchange);try{await Qt.structuralClone(r)}catch{return!1}return!0}function uV(r,e={}){return{...r,...e}}function cV(r){return{alg:r.symmAlg,length:r.symmLen}}var Kn={defaultConfig:O_,normalize:sV,eccEnabled:aV,merge:uV,symmKeyOpts:cV};h();p();var Op=class{constructor(e,t){this.cfg=e,this.store=t}async writeKey(){let e=await ki.getKeypair(this.cfg.writeKeyName,this.store);return Al(e)}async exchangeKey(){let e=await ki.getKeypair(this.cfg.exchangeKeyName,this.store);return Al(e)}async getSymmKey(e,t){let n=Kn.merge(this.cfg,t),i=await ki.getKey(e,this.store);if(i!==null)return i;let o=await Cl.makeKey(Kn.symmKeyOpts(n));return await ki.put(e,o,this.store),o}async keyExists(e){return await ki.getKey(e,this.store)!==null}async deleteKey(e){return ki.rm(e,this.store)}async destroy(){return ki.dropStore(this.store)}async importSymmKey(e,t,n){let i=Kn.merge(this.cfg,n),o=await Cl.importKey(e,Kn.symmKeyOpts(i));await ki.put(t,o,this.store)}async exportSymmKey(e,t){let n=await this.getSymmKey(e,t);return Cl.exportKey(n)}async encryptWithSymmKey(e,t,n){let i=Kn.merge(this.cfg,n),o=await this.getSymmKey(t,n),a=await Cl.encryptBytes(Qt.strToArrBuf(e,i.charSize),o,Kn.symmKeyOpts(i));return Qt.arrBufToBase64(a)}async decryptWithSymmKey(e,t,n){let i=Kn.merge(this.cfg,n),o=await this.getSymmKey(t,n),a=await Cl.decryptBytes(Qt.base64ToArrBuf(e),o,Kn.symmKeyOpts(i));return Qt.arrBufToStr(a,i.charSize)}};var Tc=class extends Op{static async init(e){let t=Kn.normalize({...e||{},type:ls.RSA}),{rsaSize:n,hashAlg:i,storeName:o,exchangeKeyName:a,writeKeyName:c}=t,f=ki.createStore(o);return await ki.createIfDoesNotExist(a,()=>au.makeKeypair(n,i,_r.Exchange),f),await ki.createIfDoesNotExist(c,()=>au.makeKeypair(n,i,_r.Write),f),new Tc(t,f)}async sign(e,t){let n=Kn.merge(this.cfg,t),i=await this.writeKey();return Qt.arrBufToBase64(await ca.sign(e,i.privateKey,n.charSize))}async verify(e,t,n,i){let o=Kn.merge(this.cfg,i);return ca.verify(e,t,n,o.charSize,o.hashAlg)}async encrypt(e,t,n){let i=Kn.merge(this.cfg,n);return Qt.arrBufToBase64(await ca.encrypt(e,t,i.charSize,i.hashAlg))}async decrypt(e,t,n){let i=await this.exchangeKey(),o=Kn.merge(this.cfg,n);return Qt.arrBufToStr(await ca.decrypt(e,i.privateKey),o.charSize)}async publicExchangeKey(){let e=await this.exchangeKey();return ca.getPublicKey(e)}async publicWriteKey(){let e=await this.writeKey();return ca.getPublicKey(e)}},MI=Tc;var L_={...au,...ca,...MI};var fV={decrypt:lV,encrypt:hV,exportKey:pV,genKey:dV};function jI(r,e){return Ct.subtle.importKey("raw",r,{name:e,length:ic.B256},!0,["encrypt","decrypt"])}async function lV(r,e,t,n){let i=Hh(e)?e:await jI(e,t),o=n?await Ct.subtle.decrypt({name:t,iv:n},i,r):await tg(r,i,{alg:t});return new Uint8Array(o)}async function hV(r,e,t,n){let i=Hh(e)?e:await jI(e,t),o=n?await Ct.subtle.encrypt({name:t,iv:n},i,r):await eg(r,i,{alg:t});return new Uint8Array(o)}async function pV(r){let e=await Ct.subtle.exportKey("raw",r);return new Uint8Array(e)}function dV(r){return R_({length:ic.B256,alg:r})}var mV={keyTypes:{"bls12-381":{magicBytes:new Uint8Array([234,1]),verify:()=>{throw new Error("Not implemented")}},ed25519:{magicBytes:new Uint8Array([237,1]),verify:yV},rsa:{magicBytes:new Uint8Array([0,245,2]),verify:gV}}};async function yV({message:r,publicKey:e,signature:t}){return KI.default.sign.detached.verify(r,t,e)}async function gV({message:r,publicKey:e,signature:t}){return L_.verify(r,t,await Ct.subtle.importKey("spki",e,{name:ou,hash:U_},!1,["verify"]),8)}var wV={sha256:bV};async function bV(r){return new Uint8Array(await Ct.subtle.digest("sha-256",r))}function vV(r){return r.destroy()}async function _V(r,e){let t=await r.exchangeKey();return zI(e,t.privateKey)}async function xV(r,e){if(await r.keyExists(e)===!1)throw new Error(`Expected a key under the name '${e}', but couldn't find anything`);let t=await r.getSymmKey(e),n=await Ct.subtle.exportKey("raw",t);return new Uint8Array(n)}function EV(r){return Promise.resolve("rsa")}function AV(r){return Promise.resolve("RS256")}function SV(r,e,t){return r.importSymmKey(Ge(e,"base64pad"),t)}function DV(r,e){return r.keyExists(e)}async function CV(r){let e=await r.exchangeKey(),t=await Ct.subtle.exportKey("spki",e.publicKey);return new Uint8Array(t)}async function PV(r){let e=await r.writeKey(),t=await Ct.subtle.exportKey("spki",e.publicKey);return new Uint8Array(t)}async function IV(r,e){let t=await r.writeKey(),n=await L_.sign(e,t.privateKey,r.cfg.charSize);return new Uint8Array(n)}var TV={randomNumbers:kV};function kV(r){return Ct.getRandomValues(new Uint8Array(r.amount))}var FV={decrypt:zI,encrypt:BV,exportPublicKey:RV,genKey:OV},rg="RSA-OAEP",U_="SHA-256";function $I(r,e){return Ct.subtle.importKey("spki",r,{name:rg,hash:U_},!1,e)}async function zI(r,e){let t=await Ct.subtle.decrypt({name:rg},Hh(e)?e:await $I(e,["decrypt"]),r);return new Uint8Array(t)}async function BV(r,e){let t=Hh(e)?e:await $I(e,["encrypt"]),n=await Ct.subtle.encrypt({name:rg},t,r);return new Uint8Array(n)}async function RV(r){let e=await Ct.subtle.exportKey("spki",r);return new Uint8Array(e)}function OV(){return Ct.subtle.generateKey({name:rg,modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:U_}},!0,["encrypt","decrypt"])}async function qI({storeName:r,exchangeKeyName:e,writeKeyName:t}){let n=await Tc.init({charSize:8,hashAlg:$f.SHA_256,storeName:r,exchangeKeyName:e,writeKeyName:t});return{aes:fV,did:mV,hash:wV,misc:TV,rsa:FV,keystore:{clearStore:(...i)=>vV(n,...i),decrypt:(...i)=>_V(n,...i),exportSymmKey:(...i)=>xV(n,...i),getAlgorithm:(...i)=>EV(n,...i),getUcanAlgorithm:(...i)=>AV(n,...i),importSymmKey:(...i)=>SV(n,...i),keyExists:(...i)=>DV(n,...i),publicExchangeKey:(...i)=>CV(n,...i),publicWriteKey:(...i)=>PV(n,...i),sign:(...i)=>IV(n,...i)}}}h();p();var VI=Ze(Um(),1);h();p();var WI={ACCOUNT_UCAN:"account-ucan",CID_LOG:"cid-log",SESSION:"session",UCANS:"permissioned-ucans"};function UV(r,e){return Gh("storage.getItem"),r.getItem(e)}function NV(r,e,t){return Gh("storage.setItem"),r.setItem(e,t)}function MV(r,e){return Gh("storage.removeItem"),r.removeItem(e)}async function KV(r){return Gh("storage.clear"),r.clear()}function HI({name:r}){let e=VI.default.createInstance({name:r});return{KEYS:WI,getItem:(...t)=>UV(e,...t),setItem:(...t)=>NV(e,...t),removeItem:(...t)=>MV(e,...t),clear:(...t)=>KV(e,...t)}}h();p();var Sn={};xt(Sn,{PRODUCTION:()=>Ko,STAGING:()=>jo,apiUrl:()=>ei,did:()=>vs,shareLink:()=>qV});h();p();h();p();async function kc(r){return Promise.any([$V(r),zV(r)])}async function $V(r){return GI(`https://dns.google/resolve?name=${r}&type=txt`)}function zV(r){return GI(`https://cloudflare-dns.com/dns-query?name=${r}&type=txt`)}function GI(r){return fetch(r,{headers:{accept:"application/dns-json"}}).then(e=>e.json()).then(e=>{if(e.Answer){let t=e.Answer.map(n=>(n.data||"").replace(/^"+|"+$/g,""));return t[0][3]===";"?t.sort((n,i)=>n.slice(0,4).localeCompare(i.slice(0,4))).map(n=>n.slice(4)).join(""):t.join("")}else return null})}async function ng(r){let e=await kc(r.startsWith("_dnslink.")?r:`_dnslink.${r}`);return e&&!e.includes("/ipns/")?e.replace(/^dnslink=/,"").replace(/^\/ipfs\//,""):null}var Ko={apiPath:"/v2/api",lobby:"https://auth.fission.codes",server:"https://runfission.com",userDomain:"fission.name"},jo={apiPath:"/v2/api",lobby:"https://auth.runfission.net",server:"https://runfission.net",userDomain:"fissionuser.net"};function ei(r,e){return`${r.server}${r.apiPath}${e?.length?"/"+e.replace(/^\/+/,""):""}`}var Fc={did:null,host:null,lastFetched:0};async function vs(r){let e;try{e=new URL(r.server).host}catch{throw new Error("Unable to parse API Endpoint")}let t=Date.now();if((Fc.host!==e||Fc.lastFetched+1e3*60*60*3<=t)&&(Fc.did=await kc("_did."+e),Fc.host=e,Fc.lastFetched=t),!Fc.did)throw new Error("Couldn't get the Fission API DID");return Fc.did}function qV(r,e){return r.lobby+"/#/share/"+encodeURIComponent(e.sharedBy.username)+"/"+encodeURIComponent(e.shareId)+"/"}h();p();h();p();h();p();h();p();h();p();var YI="RSA";h();p();h();p();h();p();h();p();h();p();h();p();h();p();var og=class{constructor(){Xw(this,"index",0);Xw(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){let t=this.index,n=e();return n===void 0&&(this.index=t),n}parseWith(e){let t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let t=this.readChar();if(t===e)return t})}readSeparator(e,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,t,n,i){return this.readAtomically(()=>{let o=0,a=0,c=this.peekChar();if(c===void 0)return;let f=c==="0",d=2**(8*i)-1;for(;;){let m=this.readAtomically(()=>{let w=this.readChar();if(w===void 0)return;let E=Number.parseInt(w,e);if(!Number.isNaN(E))return E});if(m===void 0)break;if(o*=e,o+=m,o>d||(a+=1,t!==void 0&&a>t))return}if(a!==0)return!n&&f&&a>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let t=0;t<e.length;t++){let n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[t]=n}return e})}readIPv6Addr(){let e=t=>{for(let n=0;n<t.length/2;n++){let i=n*2;if(n<t.length-3){let a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return t[i]=a[0],t[i+1]=a[1],t[i+2]=a[2],t[i+3]=a[3],[i+4,!0]}let o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[i,!1];t[i]=o>>8,t[i+1]=o&255}return[t.length,!1]};return this.readAtomically(()=>{let t=new Uint8Array(16),[n,i]=e(t);if(n===16)return t;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let o=new Uint8Array(14),a=16-(n+2),[c]=e(o.subarray(0,a));return t.set(o.subarray(0,c),16-c),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var JI=45,VV=15,Pl=new og;function XI(r){if(!(r.length>VV))return Pl.new(r).parseWith(()=>Pl.readIPv4Addr())}function QI(r){if(!(r.length>JI))return Pl.new(r).parseWith(()=>Pl.readIPv6Addr())}function ZI(r){if(!(r.length>JI))return Pl.new(r).parseWith(()=>Pl.readIPAddr())}function e3(r){return Boolean(XI(r))}function t3(r){return Boolean(QI(r))}function sg(r){return Boolean(ZI(r))}h();p();h();p();h();p();var N_={};xt(N_,{identity:()=>HV});h();p();var HV=Uf({prefix:"\0",name:"identity",encode:r=>i8(r),decode:r=>n8(r)});var M_={};xt(M_,{base2:()=>GV});h();p();var GV=Pr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var K_={};xt(K_,{base8:()=>YV});h();p();var YV=Pr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var j_={};xt(j_,{base10:()=>JV});h();p();var JV=Ka({prefix:"9",name:"base10",alphabet:"0123456789"});var $_={};xt($_,{base16:()=>XV,base16upper:()=>QV});h();p();var XV=Pr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),QV=Pr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var z_={};xt(z_,{base36:()=>ZV,base36upper:()=>eH});h();p();var ZV=Ka({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),eH=Ka({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var W_={};xt(W_,{base64:()=>q_,base64pad:()=>tH,base64url:()=>rH,base64urlpad:()=>nH});h();p();var q_=Pr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tH=Pr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),rH=Pr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nH=Pr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var V_={};xt(V_,{base256emoji:()=>uH});h();p();var r3=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),iH=r3.reduce((r,e,t)=>(r[t]=e,r),[]),oH=r3.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function sH(r){return r.reduce((e,t)=>(e+=iH[t],e),"")}function aH(r){let e=[];for(let t of r){let n=oH[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var uH=Uf({prefix:"\u{1F680}",name:"base256emoji",encode:sH,decode:aH});var H_={};xt(H_,{sha256:()=>$o,sha512:()=>cH});h();p();var n3=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),$o=b_({name:"sha2-256",code:18,encode:n3("SHA-256")}),cH=b_({name:"sha2-512",code:19,encode:n3("SHA-512")});var G_={};xt(G_,{identity:()=>Il});h();p();var i3=0,fH="identity",o3=Co,lH=r=>Ma(i3,o3(r)),Il={code:i3,name:fH,encode:o3,digest:lH};h();p();var Ede=new TextEncoder,Ade=new TextDecoder;var gn={...N_,...M_,...K_,...j_,...$_,...$b,...z_,...Kb,...W_,...V_},Pde={...H_,...G_};h();p();h();p();function Tl(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function ag(r=0){return globalThis.Buffer?.allocUnsafe!=null?Tl(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function a3(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var s3=a3("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Y_=a3("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=ag(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),pH={utf8:s3,"utf-8":s3,hex:gn.base16,latin1:Y_,ascii:Y_,binary:Y_,...gn},ug=pH;function ti(r,e="utf8"){let t=ug[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var u3=e3,dH=t3,J_=function(r){let e=0;if(r=r.toString().trim(),u3(r)){let t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(dH(r)){let t=r.split(":",8),n;for(n=0;n<t.length;n++){let o=u3(t[n]),a;o&&(a=J_(t[n]),t[n]=ti(a.slice(0,2),"base16")),a!=null&&++n<8&&t.splice(n,0,ti(a.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);let o=[n,1];for(n=9-t.length;n>0;n--)o.push("0");t.splice.apply(t,o)}let i=new Uint8Array(e+16);for(n=0;n<t.length;n++){let o=parseInt(t[n],16);i[e++]=o>>8&255,i[e++]=o&255}return i}throw new Error("invalid ip address")},c3=function(r,e=0,t){e=~~e,t=t??r.length-e;let n=new DataView(r.buffer);if(t===4){let i=[];for(let o=0;o<t;o++)i.push(r[e+o]);return i.join(".")}if(t===16){let i=[];for(let o=0;o<t;o+=2)i.push(n.getUint16(e+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};h();p();var Lp={},X_={},yH=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];yH.forEach(r=>{let e=gH(...r);X_[e.code]=e,Lp[e.name]=e});function gH(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}function $r(r){if(typeof r=="number"){if(X_[r]!=null)return X_[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(Lp[r]!=null)return Lp[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}var _s=Ze(Up(),1);h();p();function ex(r,e="utf8"){let t=ug[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Tl(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}h();p();function fa(r,e){e==null&&(e=r.reduce((i,o)=>i+o.length,0));let t=ag(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return Tl(t)}function _3(r,e){switch($r(r).code){case 4:case 41:return FH(e);case 6:case 273:case 33:case 132:return E3(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return RH(e);case 421:return NH(e);case 444:return v3(e);case 445:return v3(e);case 466:return UH(e);default:return ti(e,"base16")}}function x3(r,e){switch($r(r).code){case 4:return b3(e);case 41:return b3(e);case 6:case 273:case 33:case 132:return rx(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return BH(e);case 421:return OH(e);case 444:return MH(e);case 445:return KH(e);case 466:return LH(e);default:return ex(e,"base16")}}var tx=Object.values(gn).map(r=>r.decoder),kH=function(){let r=tx[0].or(tx[1]);return tx.slice(2).forEach(e=>r=r.or(e)),r}();function b3(r){if(!sg(r))throw new Error("invalid ip address");return J_(r)}function FH(r){let e=c3(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!sg(e))throw new Error("invalid ip address");return e}function rx(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function E3(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function BH(r){let e=ex(r),t=Uint8Array.from(_s.default.encode(e.length));return fa([t,e],t.length+e.length)}function RH(r){let e=_s.default.decode(r);if(r=r.slice(_s.default.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return ti(r)}function OH(r){let e;r[0]==="Q"||r[0]==="1"?e=ln(Ir.decode(`z${r}`)).bytes:e=we.parse(r).multihash.bytes;let t=Uint8Array.from(_s.default.encode(e.length));return fa([t,e],t.length+e.length)}function LH(r){let e=kH.decode(r),t=Uint8Array.from(_s.default.encode(e.length));return fa([t,e],t.length+e.length)}function UH(r){let e=_s.default.decode(r),t=r.slice(_s.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return"u"+ti(t,"base64url")}function NH(r){let e=_s.default.decode(r),t=r.slice(_s.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return ti(t,"base58btc")}function MH(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=Kt.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=rx(n);return fa([t,i],t.length+i.length)}function KH(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=Kt.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=rx(n);return fa([t,i],t.length+i.length)}function v3(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=ti(e,"base32"),i=E3(t);return`${n}:${i}`}var kl=Ze(Up(),1);function jH(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=$r(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw S3("invalid address: "+r);if(o.path===!0){e.push([i,ax(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function $H(r){let e=[];return r.map(t=>{let n=lg(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),ax(e.join("/"))}function zH(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=lg(e);return e.length>1?[t.code,x3(t.code,e[1])]:[t.code]})}function nx(r){return r.map(e=>{let t=lg(e);return e[1]!=null?[t.code,_3(t.code,e[1])]:[t.code]})}function ix(r){return fg(fa(r.map(e=>{let t=lg(e),n=Uint8Array.from(kl.default.encode(t.code));return e.length>1&&e[1]!=null&&(n=fa([n,e[1]])),n})))}function ox(r,e){return r.size>0?r.size/8:r.size===0?0:kl.default.decode(e)+(kl.default.decode.bytes??0)}function cg(r){let e=[],t=0;for(;t<r.length;){let n=kl.default.decode(r,t),i=kl.default.decode.bytes??0,o=$r(n),a=ox(o,r.slice(t+i));if(a===0){e.push([n]),t+=i;continue}let c=r.slice(t+i,t+i+a);if(t+=a+i,t>r.length)throw S3("Invalid address Uint8Array: "+ti(r,"base16"));e.push([n,c])}return e}function sx(r){let e=cg(r),t=nx(e);return $H(t)}function qH(r){r=ax(r);let e=jH(r),t=zH(e);return ix(t)}function A3(r){return qH(r)}function fg(r){let e=WH(r);if(e!=null)throw e;return Uint8Array.from(r)}function WH(r){try{cg(r)}catch(e){return e}}function ax(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function S3(r){return new Error("Error parsing address: "+r)}function lg(r){return $r(r[0])}var cx=Ze(Up(),1);var k3=Ze(zo(),1);h();p();function P3(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var Fl=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},ux=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Np,Mp,Kp,I3,GH=Symbol.for("nodejs.util.inspect.custom"),T3=[$r("dns").code,$r("dns4").code,$r("dns6").code,$r("dnsaddr").code],YH=[$r("p2p").code,$r("ipfs").code],JH=new Map,F3=Symbol.for("@multiformats/js-multiaddr/multiaddr");function XH(r){return Boolean(r?.[F3])}var la=class{constructor(e){if(Np.set(this,void 0),Mp.set(this,void 0),Kp.set(this,void 0),this[I3]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=fg(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=A3(e)}else if(XH(e))this.bytes=fg(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Fl(this,Np,"f")==null&&ux(this,Np,sx(this.bytes),"f"),Fl(this,Np,"f")}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),n,i;if(t.length>2)T3.includes(e[0])&&YH.includes(e[1])?(n=$r("tcp").name,i=443):(n=$r(t[2]).name,i=parseInt(t[3]));else if(T3.includes(e[0]))n=$r("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:n,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},$r(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=cx.default.decode(t,n),o=cx.default.decode.bytes??0,a=$r(i),c=ox(a,t.slice(n+o));n+=c+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return Fl(this,Mp,"f")==null&&ux(this,Mp,cg(this.bytes),"f"),Fl(this,Mp,"f")}stringTuples(){return Fl(this,Kp,"f")==null&&ux(this,Kp,nx(this.tuples()),"f"),Fl(this,Kp,"f")}encapsulate(e){return e=new la(e),new la(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new la(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new la(ix(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Lp.ipfs.code).pop();if(t?.[1]!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?ti(Ir.decode(`z${n}`),"base58btc"):ti(we.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>$r(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return P3(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(o=>o.resolvable);if(t==null)return[this];let n=JH.get(t.name);if(n==null)throw(0,k3.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new la(o))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(Np=new WeakMap,Mp=new WeakMap,Kp=new WeakMap,I3=F3,GH)](){return`Multiaddr(${sx(this.bytes)})`}};function jp(r){return new la(r)}h();p();h();p();function fx(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var QH=Ze(zo(),1);h();p();var B3=Symbol.for("@libp2p/peer-id");var ZH=Symbol.for("nodejs.util.inspect.custom"),R3=Object.values(gn).map(r=>r.decoder).reduce((r,e)=>r.or(e),gn.identity.decoder),O3=114,L3=36,U3=37,$p=class{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[B3](){return!0}toString(){return this.string==null&&(this.string=Ir.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return we.createV1(O3,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return fx(this.multihash.bytes,e);if(typeof e=="string")return N3(e).equals(this);if(e?.multihash?.bytes!=null)return fx(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[ZH](){return`PeerId(${this.toString()})`}},zp=class extends $p{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}},qp=class extends $p{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}},Wp=class extends $p{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}};function N3(r,e){if(e=e??R3,r.charAt(0)==="1"||r.charAt(0)==="Q"){let t=ln(Ir.decode(`z${r}`));return r.startsWith("12D")?new qp({multihash:t}):r.startsWith("16U")?new Wp({multihash:t}):new zp({multihash:t})}return eG(R3.decode(r))}function eG(r){try{let e=ln(r);if(e.code===Il.code){if(e.digest.length===L3)return new qp({multihash:e});if(e.digest.length===U3)return new Wp({multihash:e})}if(e.code===$o.code)return new zp({multihash:e})}catch{return tG(we.decode(r))}throw new Error("Supplied PeerID CID is invalid")}function tG(r){if(r==null||r.multihash==null||r.version==null||r.version===1&&r.code!==O3)throw new Error("Supplied PeerID CID is invalid");let e=r.multihash;if(e.code===$o.code)return new zp({multihash:r.multihash});if(e.code===Il.code){if(e.digest.length===L3)return new qp({multihash:r.multihash});if(e.digest.length===U3)return new Wp({multihash:r.multihash})}throw new Error("Supplied PeerID CID is invalid")}h();p();h();p();h();p();var Vp=rG;function rG(r,e,t){if(!r)return t;var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;)if(i=n.shift(),!r||(r=r[i],r===void 0))return t;return r}var Kk=Ze(qo(),1),Hc=Ze(zo(),1);h();p();h();p();h();p();h();p();h();p();var dg=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");h();p();h();p();h();p();h();p();function mg(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function z3(r=0){return globalThis.Buffer?.allocUnsafe!=null?mg(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function W3(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var q3=W3("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),lx=W3("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=z3(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),mG={utf8:q3,"utf-8":q3,hex:gn.base16,latin1:lx,ascii:lx,binary:lx,...gn},yg=mG;function V3(r,e="utf8"){let t=yg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();function H3(r,e="utf8"){let t=yg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?mg(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}var ha="/",G3=new TextEncoder().encode(ha),gg=G3[0],Je=class{constructor(e,t){if(typeof e=="string")this._buf=H3(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==gg)throw new Error("Invalid key")}toString(e="utf8"){return V3(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Je(e.join(ha))}static random(){return new Je(dg().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Je(e):typeof e.uint8Array=="function"?new Je(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=G3),this._buf[0]!==gg){let e=new Uint8Array(this._buf.byteLength+1);e.fill(gg,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===gg;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],a=n[i];if(o<a)return!0;if(o>a)return!1}return t.length<n.length}reverse(){return Je.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(ha).slice(1)}type(){return yG(this.baseNamespace())}name(){return gG(this.baseNamespace())}instance(e){return new Je(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(ha)||(e+=ha),e+=this.type(),new Je(e)}parent(){let e=this.list();return e.length===1?new Je(ha):new Je(e.slice(0,-1).join(ha))}child(e){return this.toString()===ha?e:e.toString()===ha?this:new Je(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Je.withNamespaces([...this.namespaces(),...wG(e.map(t=>t.namespaces()))])}};function yG(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function gG(r){let e=r.split(":");return e[e.length-1]}function wG(r){return[].concat(...r)}var J3=Ze(qo(),1);h();p();async function Rc(r){let e=0;for await(let t of r)e++;return e}var bG=(0,J3.default)("ipfs:repo:migrator:migration-8");function X3(r){return r.child?X3(r.child):r}function vG(r){try{let e=Kt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=we.decode(e).multihash.bytes,n=Kt.encode(t).slice(1).toUpperCase();return new Je(`/${n}`,!1)}catch{return r}}function _G(r){try{let e=Kt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=ln(e),n=Kt.encode(we.createV1(ds,t).bytes).slice(1);return new Je(`/${n.toUpperCase()}`,!1)}catch{return r}}async function Y3(r,e,t){let n=r.blocks;await n.open();let i=X3(n),o=await Rc(i.queryKeys({filters:[a=>t(a).toString()!==a.toString()]}));try{let a=0;for await(let c of i.query({})){let f=t(c.key);f.toString()!==c.key.toString()&&(a+=1,bG(`Migrating Block from ${c.key} to ${f}`,await i.has(c.key)),await i.delete(c.key),await i.put(f,c.value),e(a/o*100,`Migrated Block from ${c.key} to ${f}`))}}finally{await n.close()}}var Q3={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(r,e=()=>{})=>Y3(r,e,vG),revert:(r,e=()=>{})=>Y3(r,e,_G)};h();p();h();p();h();p();var Uc=Ze(lu(),1),Y6=Uc.default.Reader,kG=Uc.default.Writer,p0e=Uc.default.util,xg=Uc.default.roots.default||(Uc.default.roots.default={}),J6=xg.ipfs=(()=>{let r={};return r.pin=function(){let e={};return e.Set=function(){function t(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(i,o){return o||(o=kG.create()),i.version!=null&&Object.hasOwnProperty.call(i,"version")&&o.uint32(8).uint32(i.version),i.fanout!=null&&Object.hasOwnProperty.call(i,"fanout")&&o.uint32(16).uint32(i.fanout),i.seed!=null&&Object.hasOwnProperty.call(i,"seed")&&o.uint32(29).fixed32(i.seed),o},t.decode=function(i,o){i instanceof Y6||(i=Y6.create(i));for(var a=o===void 0?i.len:i.pos+o,c=new xg.ipfs.pin.Set;i.pos<a;){var f=i.uint32();switch(f>>>3){case 1:c.version=i.uint32();break;case 2:c.fanout=i.uint32();break;case 3:c.seed=i.fixed32();break;default:i.skipType(f&7);break}}return c},t.fromObject=function(i){if(i instanceof xg.ipfs.pin.Set)return i;var o=new xg.ipfs.pin.Set;return i.version!=null&&(o.version=i.version>>>0),i.fanout!=null&&(o.fanout=i.fanout>>>0),i.seed!=null&&(o.seed=i.seed>>>0),o},t.toObject=function(i,o){o||(o={});var a={};return o.defaults&&(a.version=0,a.fanout=0,a.seed=0),i.version!=null&&i.hasOwnProperty("version")&&(a.version=i.version),i.fanout!=null&&i.hasOwnProperty("fanout")&&(a.fanout=i.fanout),i.seed!=null&&i.hasOwnProperty("seed")&&(a.seed=i.seed),a},t.prototype.toJSON=function(){return this.constructor.toObject(this,Uc.default.util.toJSONOptions)},t}(),e}(),r})();var nT=Ze(Q6(),1),Pg=Ze(Up(),1);h();p();var Jp=new Je("/local/pins"),Ag=256,Z6=8192,Dx=we.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),Nc={direct:"direct",recursive:"recursive"};function Cx(r){return new Je(`/${Kt.encode(r.multihash.bytes).toUpperCase().substring(1)}`)}h();p();h();p();h();p();function Ul(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Sg(r=0){return globalThis.Buffer?.allocUnsafe!=null?Ul(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Dg(r,e){e==null&&(e=r.reduce((i,o)=>i+o.length,0));let t=Sg(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return Ul(t)}h();p();function eT(r,e){for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}h();p();h();p();function rT(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var tT=rT("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Px=rT("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Sg(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),FG={utf8:tT,"utf-8":tT,hex:gn.base16,latin1:Px,ascii:Px,binary:Px,...gn},Cg=FG;function Nl(r,e="utf8"){let t=Cg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();function Ml(r,e="utf8"){let t=Cg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ul(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}var Ix=J6.pin.Set;function BG(r){let e=r.Data;if(!e)throw new Error("No data present");let t=Pg.default.decode(e),n=Pg.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+t>e.length)throw new Error("Impossibly large set header length");let i=e.slice(n,t+n),o=Ix.toObject(Ix.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(o.version!==1)throw new Error(`Unsupported Set version: ${o.version}`);if(o.fanout>r.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:e.slice(t+n)}}function RG(r,e){let t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,r,!0);let i=Ml(e.toString()),o=Dg([t,i],t.byteLength+i.byteLength);return(0,nT.default)(Nl(o))}async function*iT(r,e){let t=BG(e),n=0;for(let i of e.Links){if(n<t.header.fanout){let o=i.Hash;if(!Dx.equals(o)){let a=await r.get(o),c=Ga(a);yield*iT(r,c)}}else yield i.Hash;n++}}async function*Xp(r,e,t){let n=e.Links.find(a=>a.Name===t);if(!n)throw new Error("No link found with name "+t);let i=await r.get(n.Hash),o=Ga(i);yield*iT(r,o)}function OG(r,e){return t(e,0);async function t(n,i){let o=Ix.encode({version:1,fanout:Ag,seed:i}).finish(),a=Pg.default.encode(o.length),c=Dg([a,o]),f=[];for(let m=0;m<Ag;m++)f.push({Name:"",Tsize:1,Hash:Dx});if(n.length<=Z6){let m=n.map(T=>({link:{Name:"",Tsize:1,Hash:T.key},data:T.data||new Uint8Array})).sort((T,F)=>eT(T.link.Hash.bytes,F.link.Hash.bytes)),w=f.concat(m.map(T=>T.link));return{Data:Dg([c,...m.map(T=>T.data)]),Links:w}}else{let m=n.reduce((E,T)=>{let F=RG(i,T.key)%Ag;return E[F]=F in E?E[F].concat([T]):[T],E},[]),w=0;for(let E of m){let T=await t(E,i+1);await d(T,w),w++}return{Data:c,Links:f}}async function d(m,w){let E=Ha(m),T=await $o.digest(E),F=we.createV0(T);await r.put(F,E);let N=m.Links.reduce((he,de)=>he+(de.Tsize||0),0)+E.length;f[w]={Name:"",Tsize:N,Hash:F}}}}async function Tx(r,e,t){let n=await OG(r,t.map(f=>({key:f}))),i=Ha(n),o=await $o.digest(i),a=we.createV0(o);await r.put(a,i);let c=n.Links.reduce((f,d)=>f+d.Tsize,0)+i.length;return{Name:e,Tsize:c,Hash:a}}async function UG(r,e,t,n){if(!await e.has(Jp))return;let i=await e.get(Jp),o=we.decode(i),a=await r.get(o),c=Ga(a),f=0,d=await Rc(Xp(r,c,Nc.recursive))+await Rc(Xp(r,c,Nc.direct));for await(let m of Xp(r,c,Nc.recursive)){f++;let w={depth:1/0};m.version!==0&&(w.version=m.version),m.code!==dn&&(w.codec=m.code),await t.put(Cx(m),Js(w)),n(f/d*100,`Migrated recursive pin ${m}`)}for await(let m of Xp(r,c,Nc.direct)){f++;let w={depth:0};m.version!==0&&(w.version=m.version),m.code!==dn&&(w.codec=m.code),await t.put(Cx(m),Js(w)),n(f/d*100,`Migrated direct pin ${m}`)}await r.delete(o),await e.delete(Jp)}async function NG(r,e,t,n){let i=[],o=[],a=0,c=await Rc(t.queryKeys({}));for await(let{key:E,value:T}of t.query({})){a++;let F=io(T),N=we.create(F.version||0,F.codec||dn,ln(Kt.decode("b"+E.toString().toLowerCase().split("/").pop())));F.depth===0?(n(a/c*100,`Reverted direct pin ${N}`),o.push(N)):(n(a/c*100,`Reverted recursive pin ${N}`),i.push(N))}n(100,"Updating pin root");let f={Links:[await Tx(r,Nc.direct,o),await Tx(r,Nc.recursive,i)]},d=Ha(f),m=await $o.digest(d),w=we.createV0(m);await r.put(w,d),await e.put(Jp,w.bytes)}async function oT(r,e,t){let n=r.blocks,i=r.datastore,o=r.pins;await n.open(),await i.open(),await o.open();try{await t(n,i,o,e)}finally{await o.close(),await i.close(),await n.close()}}var sT={version:9,description:"Migrates pins to datastore",migrate:(r,e=()=>{})=>oT(r,e,UG),revert:(r,e=()=>{})=>oT(r,e,NG)};h();p();h();p();var ho={};xt(ho,{abortedError:()=>MG,dbDeleteFailedError:()=>Fx,dbOpenFailedError:()=>kx,dbWriteFailedError:()=>Bx,notFoundError:()=>As});h();p();var Kl=Ze(zo(),1);function kx(r){return r=r||new Error("Cannot open database"),(0,Kl.default)(r,"ERR_DB_OPEN_FAILED")}function Fx(r){return r=r||new Error("Delete failed"),(0,Kl.default)(r,"ERR_DB_DELETE_FAILED")}function Bx(r){return r=r||new Error("Write failed"),(0,Kl.default)(r,"ERR_DB_WRITE_FAILED")}function As(r){return r=r||new Error("Not Found"),(0,Kl.default)(r,"ERR_NOT_FOUND")}function MG(r){return r=r||new Error("Aborted"),(0,Kl.default)(r,"ERR_ABORTED")}var aT=new Je("/config"),Qp=new Je("/version");function Zp(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function KG(r,e,t){let n=await e(r);if(n)return n;let i=Zp(t);return i?new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{o(Boolean(c.result))}}):!1}async function jG(r,e,t,n){if(await t(r))return e(r);let i=Zp(n);if(!i)throw As();return new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return o(c.result);a(As())}})}function Ig(r){let e=r.get.bind(r),t=r.has.bind(r);return r.get=n=>jG(n,e,t,r),r.has=n=>KG(n,t,r),r}function Rx(r){return{...r,root:Ig(r.root),datastore:Ig(r.datastore),pins:Ig(r.pins),keys:Ig(r.keys)}}async function $G(r,e,t=()=>{}){let n=Zp(e);if(!n){t(`${r} did not need an upgrade`);return}t(`Upgrading ${r}`),await lT(n,(o,a)=>[{type:"del",key:o},{type:"put",key:Ml(o),value:a}])}async function zG(r,e,t=()=>{}){let n=Zp(e);if(!n){t(`${r} did not need a downgrade`);return}t(`Downgrading ${r}`),await lT(n,(o,a)=>[{type:"del",key:o},{type:"put",key:Nl(o),value:a}])}function cT(r){return r.child?cT(r.child):r}async function uT(r,e,t){let n=Object.entries(r).map(([a,c])=>({key:a,backend:cT(c)})).filter(({key:a,backend:c})=>c.constructor.name==="LevelDatastore").map(({key:a,backend:c})=>({name:a,store:c}));e(0,`Migrating ${n.length} dbs`);let i=0,o=a=>{e(Math.round(i/n.length*100),a)};for(let{name:a,store:c}of n){await c.open();try{await t(a,c,o)}finally{i++,await c.close()}}e(100,`Migrated ${n.length} dbs`)}var fT={version:10,description:"Migrates datastore-level keys to binary",migrate:(r,e=()=>{})=>uT(r,e,$G),revert:(r,e=()=>{})=>uT(r,e,zG)};function lT(r,e){function t(n,i){let o=r.store("readwrite"),a=o.transaction,c=0,f;a.onabort=()=>i(f||a.error||new Error("aborted by user")),a.oncomplete=()=>i();function d(){let m=n[c++],w=m.key,E;try{E=m.type==="del"?o.delete(w):o.put(m.value,w)}catch(T){f=T,a.abort();return}c<n.length&&(E.onsuccess=d)}d()}return new Promise((n,i)=>{let o=r.iterator(),a=f=>f;o._deserializeKey=o._deserializeValue=a,c();function c(){let f=(d,m,w)=>{if(d||m===void 0){let E=T=>{if(T){i(T);return}n()};o.end(E);return}t(e(m,w),c)};o.next(f)}})}h();p();var hu=new Je("/local/filesroot");async function qG(r,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await r.root.open(),await r.datastore.open(),await r.root.has(hu)){let t=await r.root.get(hu);await r.datastore.put(hu,t),await r.root.delete(hu)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo datastore")}async function WG(r,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await r.root.open(),await r.datastore.open(),await r.datastore.has(hu)){let t=await r.datastore.get(hu);await r.root.put(hu,t),await r.datastore.delete(hu)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo root datastore")}var hT={version:11,description:"Store mfs root in the datastore",migrate:qG,revert:WG};h();p();var Kx=Ze(lu(),1);h();p();var Mc=Ze(lu(),1),pT=Mc.default.Reader,VG=Mc.default.Writer,HG=Mc.default.util,Tg=Mc.default.roots.default||(Mc.default.roots.default={}),Ox=Tg.Protocols=(()=>{function r(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.protocols=HG.emptyArray,r.encode=function(t,n){if(n||(n=VG.create()),t.protocols!=null&&t.protocols.length)for(var i=0;i<t.protocols.length;++i)n.uint32(10).string(t.protocols[i]);return n},r.decode=function(t,n){t instanceof pT||(t=pT.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Tg.Protocols;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(t.string());break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof Tg.Protocols)return t;var n=new Tg.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var i=0;i<t.protocols.length;++i)n.protocols[i]=String(t.protocols[i])}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.protocols=[]),t.protocols&&t.protocols.length){i.protocols=[];for(var o=0;o<t.protocols.length;++o)i.protocols[o]=t.protocols[o]}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Mc.default.util.toJSONOptions)},r})();h();p();var pa=Ze(lu(),1),jl=pa.default.Reader,Lx=pa.default.Writer,yr=pa.default.util,an=pa.default.roots.default||(pa.default.roots.default={}),Ux=an.Addresses=(()=>{function r(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.addrs=yr.emptyArray,r.prototype.certifiedRecord=null,r.encode=function(t,n){if(n||(n=Lx.create()),t.addrs!=null&&t.addrs.length)for(var i=0;i<t.addrs.length;++i)an.Addresses.Address.encode(t.addrs[i],n.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&an.Addresses.CertifiedRecord.encode(t.certifiedRecord,n.uint32(18).fork()).ldelim(),n},r.decode=function(t,n){t instanceof jl||(t=jl.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new an.Addresses;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(an.Addresses.Address.decode(t,t.uint32()));break;case 2:o.certifiedRecord=an.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof an.Addresses)return t;var n=new an.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var i=0;i<t.addrs.length;++i){if(typeof t.addrs[i]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[i]=an.Addresses.Address.fromObject(t.addrs[i])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=an.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addrs=[]),n.defaults&&(i.certifiedRecord=null),t.addrs&&t.addrs.length){i.addrs=[];for(var o=0;o<t.addrs.length;++o)i.addrs[o]=an.Addresses.Address.toObject(t.addrs[o],n)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(i.certifiedRecord=an.Addresses.CertifiedRecord.toObject(t.certifiedRecord,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,pa.default.util.toJSONOptions)},r.Address=function(){function e(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}e.prototype.multiaddr=yr.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:yr.oneOfGetter(t=["isCertified"]),set:yr.oneOfSetter(t)}),e.encode=function(i,o){return o||(o=Lx.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&o.uint32(10).bytes(i.multiaddr),i.isCertified!=null&&Object.hasOwnProperty.call(i,"isCertified")&&o.uint32(16).bool(i.isCertified),o},e.decode=function(i,o){i instanceof jl||(i=jl.create(i));for(var a=o===void 0?i.len:i.pos+o,c=new an.Addresses.Address;i.pos<a;){var f=i.uint32();switch(f>>>3){case 1:c.multiaddr=i.bytes();break;case 2:c.isCertified=i.bool();break;default:i.skipType(f&7);break}}return c},e.fromObject=function(i){if(i instanceof an.Addresses.Address)return i;var o=new an.Addresses.Address;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?yr.base64.decode(i.multiaddr,o.multiaddr=yr.newBuffer(yr.base64.length(i.multiaddr)),0):i.multiaddr.length&&(o.multiaddr=i.multiaddr)),i.isCertified!=null&&(o.isCertified=Boolean(i.isCertified)),o},e.toObject=function(i,o){o||(o={});var a={};return o.defaults&&(o.bytes===String?a.multiaddr="":(a.multiaddr=[],o.bytes!==Array&&(a.multiaddr=yr.newBuffer(a.multiaddr)))),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(a.multiaddr=o.bytes===String?yr.base64.encode(i.multiaddr,0,i.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),i.isCertified!=null&&i.hasOwnProperty("isCertified")&&(a.isCertified=i.isCertified,o.oneofs&&(a._isCertified="isCertified")),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,pa.default.util.toJSONOptions)},e}(),r.CertifiedRecord=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.seq=yr.Long?yr.Long.fromBits(0,0,!0):0,e.prototype.raw=yr.newBuffer([]),e.encode=function(n,i){return i||(i=Lx.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&i.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&i.uint32(18).bytes(n.raw),i},e.decode=function(n,i){n instanceof jl||(n=jl.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new an.Addresses.CertifiedRecord;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.seq=n.uint64();break;case 2:a.raw=n.bytes();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof an.Addresses.CertifiedRecord)return n;var i=new an.Addresses.CertifiedRecord;return n.seq!=null&&(yr.Long?(i.seq=yr.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?i.seq=parseInt(n.seq,10):typeof n.seq=="number"?i.seq=n.seq:typeof n.seq=="object"&&(i.seq=new yr.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?yr.base64.decode(n.raw,i.raw=yr.newBuffer(yr.base64.length(n.raw)),0):n.raw.length&&(i.raw=n.raw)),i},e.toObject=function(n,i){i||(i={});var o={};if(i.defaults){if(yr.Long){var a=new yr.Long(0,0,!0);o.seq=i.longs===String?a.toString():i.longs===Number?a.toNumber():a}else o.seq=i.longs===String?"0":0;i.bytes===String?o.raw="":(o.raw=[],i.bytes!==Array&&(o.raw=yr.newBuffer(o.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?o.seq=i.longs===String?String(n.seq):n.seq:o.seq=i.longs===String?yr.Long.prototype.toString.call(n.seq):i.longs===Number?new yr.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(o.raw=i.bytes===String?yr.base64.encode(n.raw,0,n.raw.length):i.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,pa.default.util.toJSONOptions)},e}(),r})();h();p();var da=Ze(lu(),1),$l=da.default.Reader,Nx=da.default.Writer,Xt=da.default.util,zr=da.default.roots.default||(da.default.roots.default={}),Mx=zr.Peer=(()=>{function r(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.addresses=Xt.emptyArray,r.prototype.protocols=Xt.emptyArray,r.prototype.metadata=Xt.emptyArray,r.prototype.pubKey=null,r.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(r.prototype,"_pubKey",{get:Xt.oneOfGetter(e=["pubKey"]),set:Xt.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_peerRecordEnvelope",{get:Xt.oneOfGetter(e=["peerRecordEnvelope"]),set:Xt.oneOfSetter(e)}),r.encode=function(n,i){if(i||(i=Nx.create()),n.addresses!=null&&n.addresses.length)for(var o=0;o<n.addresses.length;++o)zr.Address.encode(n.addresses[o],i.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var o=0;o<n.protocols.length;++o)i.uint32(18).string(n.protocols[o]);if(n.metadata!=null&&n.metadata.length)for(var o=0;o<n.metadata.length;++o)zr.Metadata.encode(n.metadata[o],i.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&i.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&i.uint32(42).bytes(n.peerRecordEnvelope),i},r.decode=function(n,i){n instanceof $l||(n=$l.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new zr.Peer;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.addresses&&a.addresses.length||(a.addresses=[]),a.addresses.push(zr.Address.decode(n,n.uint32()));break;case 2:a.protocols&&a.protocols.length||(a.protocols=[]),a.protocols.push(n.string());break;case 3:a.metadata&&a.metadata.length||(a.metadata=[]),a.metadata.push(zr.Metadata.decode(n,n.uint32()));break;case 4:a.pubKey=n.bytes();break;case 5:a.peerRecordEnvelope=n.bytes();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof zr.Peer)return n;var i=new zr.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");i.addresses=[];for(var o=0;o<n.addresses.length;++o){if(typeof n.addresses[o]!="object")throw TypeError(".Peer.addresses: object expected");i.addresses[o]=zr.Address.fromObject(n.addresses[o])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");i.protocols=[];for(var o=0;o<n.protocols.length;++o)i.protocols[o]=String(n.protocols[o])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");i.metadata=[];for(var o=0;o<n.metadata.length;++o){if(typeof n.metadata[o]!="object")throw TypeError(".Peer.metadata: object expected");i.metadata[o]=zr.Metadata.fromObject(n.metadata[o])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?Xt.base64.decode(n.pubKey,i.pubKey=Xt.newBuffer(Xt.base64.length(n.pubKey)),0):n.pubKey.length&&(i.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?Xt.base64.decode(n.peerRecordEnvelope,i.peerRecordEnvelope=Xt.newBuffer(Xt.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(i.peerRecordEnvelope=n.peerRecordEnvelope)),i},r.toObject=function(n,i){i||(i={});var o={};if((i.arrays||i.defaults)&&(o.addresses=[],o.protocols=[],o.metadata=[]),n.addresses&&n.addresses.length){o.addresses=[];for(var a=0;a<n.addresses.length;++a)o.addresses[a]=zr.Address.toObject(n.addresses[a],i)}if(n.protocols&&n.protocols.length){o.protocols=[];for(var a=0;a<n.protocols.length;++a)o.protocols[a]=n.protocols[a]}if(n.metadata&&n.metadata.length){o.metadata=[];for(var a=0;a<n.metadata.length;++a)o.metadata[a]=zr.Metadata.toObject(n.metadata[a],i)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(o.pubKey=i.bytes===String?Xt.base64.encode(n.pubKey,0,n.pubKey.length):i.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,i.oneofs&&(o._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(o.peerRecordEnvelope=i.bytes===String?Xt.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):i.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,i.oneofs&&(o._peerRecordEnvelope="peerRecordEnvelope")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,da.default.util.toJSONOptions)},r})(),jwe=zr.Address=(()=>{function r(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.multiaddr=Xt.newBuffer([]),r.prototype.isCertified=null;let e;return Object.defineProperty(r.prototype,"_isCertified",{get:Xt.oneOfGetter(e=["isCertified"]),set:Xt.oneOfSetter(e)}),r.encode=function(n,i){return i||(i=Nx.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&i.uint32(16).bool(n.isCertified),i},r.decode=function(n,i){n instanceof $l||(n=$l.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new zr.Address;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.multiaddr=n.bytes();break;case 2:a.isCertified=n.bool();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof zr.Address)return n;var i=new zr.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?Xt.base64.decode(n.multiaddr,i.multiaddr=Xt.newBuffer(Xt.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),n.isCertified!=null&&(i.isCertified=Boolean(n.isCertified)),i},r.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=Xt.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?Xt.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(o.isCertified=n.isCertified,i.oneofs&&(o._isCertified="isCertified")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,da.default.util.toJSONOptions)},r})(),$we=zr.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value=Xt.newBuffer([]),r.encode=function(t,n){return n||(n=Nx.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&n.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&n.uint32(18).bytes(t.value),n},r.decode=function(t,n){t instanceof $l||(t=$l.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new zr.Metadata;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.key=t.string();break;case 2:o.value=t.bytes();break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof zr.Metadata)return t;var n=new zr.Metadata;return t.key!=null&&(n.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?Xt.base64.decode(t.value,n.value=Xt.newBuffer(Xt.base64.length(t.value)),0):t.value.length&&(n.value=t.value)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.key="",n.bytes===String?i.value="":(i.value=[],n.bytes!==Array&&(i.value=Xt.newBuffer(i.value)))),t.key!=null&&t.hasOwnProperty("key")&&(i.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(i.value=n.bytes===String?Xt.base64.encode(t.value,0,t.value.length):n.bytes===Array?Array.prototype.slice.call(t.value):t.value),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,da.default.util.toJSONOptions)},r})();h();p();var Kc=Ze(lu(),1),dT=Kc.default.Reader,GG=Kc.default.Writer,gr=Kc.default.util,kg=Kc.default.roots.default||(Kc.default.roots.default={}),mT=kg.Envelope=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.publicKey=gr.newBuffer([]),r.prototype.payloadType=gr.newBuffer([]),r.prototype.payload=gr.newBuffer([]),r.prototype.signature=gr.newBuffer([]),r.encode=function(t,n){return n||(n=GG.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&n.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&n.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&n.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&n.uint32(42).bytes(t.signature),n},r.decode=function(t,n){t instanceof dT||(t=dT.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new kg.Envelope;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.publicKey=t.bytes();break;case 2:o.payloadType=t.bytes();break;case 3:o.payload=t.bytes();break;case 5:o.signature=t.bytes();break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof kg.Envelope)return t;var n=new kg.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?gr.base64.decode(t.publicKey,n.publicKey=gr.newBuffer(gr.base64.length(t.publicKey)),0):t.publicKey.length&&(n.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?gr.base64.decode(t.payloadType,n.payloadType=gr.newBuffer(gr.base64.length(t.payloadType)),0):t.payloadType.length&&(n.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?gr.base64.decode(t.payload,n.payload=gr.newBuffer(gr.base64.length(t.payload)),0):t.payload.length&&(n.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?gr.base64.decode(t.signature,n.signature=gr.newBuffer(gr.base64.length(t.signature)),0):t.signature.length&&(n.signature=t.signature)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.publicKey="":(i.publicKey=[],n.bytes!==Array&&(i.publicKey=gr.newBuffer(i.publicKey))),n.bytes===String?i.payloadType="":(i.payloadType=[],n.bytes!==Array&&(i.payloadType=gr.newBuffer(i.payloadType))),n.bytes===String?i.payload="":(i.payload=[],n.bytes!==Array&&(i.payload=gr.newBuffer(i.payload))),n.bytes===String?i.signature="":(i.signature=[],n.bytes!==Array&&(i.signature=gr.newBuffer(i.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(i.publicKey=n.bytes===String?gr.base64.encode(t.publicKey,0,t.publicKey.length):n.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(i.payloadType=n.bytes===String?gr.base64.encode(t.payloadType,0,t.payloadType.length):n.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(i.payload=n.bytes===String?gr.base64.encode(t.payload,0,t.payload.length):n.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(i.signature=n.bytes===String?gr.base64.encode(t.signature,0,t.signature.length):n.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Kc.default.util.toJSONOptions)},r})();h();p();var pu=Ze(lu(),1),Fg=pu.default.Reader,yT=pu.default.Writer,kr=pu.default.util,Ho=pu.default.roots.default||(pu.default.roots.default={}),gT=Ho.PeerRecord=(()=>{function r(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.peerId=kr.newBuffer([]),r.prototype.seq=kr.Long?kr.Long.fromBits(0,0,!0):0,r.prototype.addresses=kr.emptyArray,r.encode=function(t,n){if(n||(n=yT.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&n.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)Ho.PeerRecord.AddressInfo.encode(t.addresses[i],n.uint32(26).fork()).ldelim();return n},r.decode=function(t,n){t instanceof Fg||(t=Fg.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Ho.PeerRecord;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.peerId=t.bytes();break;case 2:o.seq=t.uint64();break;case 3:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(Ho.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof Ho.PeerRecord)return t;var n=new Ho.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?kr.base64.decode(t.peerId,n.peerId=kr.newBuffer(kr.base64.length(t.peerId)),0):t.peerId.length&&(n.peerId=t.peerId)),t.seq!=null&&(kr.Long?(n.seq=kr.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new kr.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var i=0;i<t.addresses.length;++i){if(typeof t.addresses[i]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[i]=Ho.PeerRecord.AddressInfo.fromObject(t.addresses[i])}}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addresses=[]),n.defaults)if(n.bytes===String?i.peerId="":(i.peerId=[],n.bytes!==Array&&(i.peerId=kr.newBuffer(i.peerId))),kr.Long){var o=new kr.Long(0,0,!0);i.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.seq=n.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(i.peerId=n.bytes===String?kr.base64.encode(t.peerId,0,t.peerId.length):n.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?i.seq=n.longs===String?String(t.seq):t.seq:i.seq=n.longs===String?kr.Long.prototype.toString.call(t.seq):n.longs===Number?new kr.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){i.addresses=[];for(var a=0;a<t.addresses.length;++a)i.addresses[a]=Ho.PeerRecord.AddressInfo.toObject(t.addresses[a],n)}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,pu.default.util.toJSONOptions)},r.AddressInfo=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.multiaddr=kr.newBuffer([]),e.encode=function(n,i){return i||(i=yT.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),i},e.decode=function(n,i){n instanceof Fg||(n=Fg.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new Ho.PeerRecord.AddressInfo;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.multiaddr=n.bytes();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof Ho.PeerRecord.AddressInfo)return n;var i=new Ho.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?kr.base64.decode(n.multiaddr,i.multiaddr=kr.newBuffer(kr.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),i},e.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=kr.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?kr.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,pu.default.util.toJSONOptions)},e}(),r})();Kx.default.util.Long=void 0;Kx.default.configure();async function YG(r,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let a=i.toString(),[,c,f,d,m]=a.split("/");if(c==="peers"&&!!["protos","addrs","metadata","keys"].includes(f)&&!!d)if(t[d]=t[d]||{addresses:[],protocols:[],metadata:[]},f==="protos"){let w=Ox.decode(o);t[d].protocols=w.protocols.sort()}else if(f==="addrs"){let w=Ux.decode(o);t[d].addresses=w.addrs.sort((E,T)=>jp(E.multiaddr).toString().localeCompare(jp(T.multiaddr).toString())),w.certifiedRecord&&w.certifiedRecord.raw&&(t[d].peerRecordEnvelope=w.certifiedRecord.raw)}else f==="metadata"?t[d].metadata.push({key:m,value:o}):f==="keys"&&(t[d].pubKey=o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let i of Object.keys(t)){let o=t[i];o.metadata=o.metadata.sort((c,f)=>c.key.localeCompare(f.key));let a=Mx.encode(o).finish();await r.datastore.put(new Je(`/peers/${i}`),a)}await r.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function JG(r,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let a=i.toString(),[,,c]=a.split("/");t[c]=Mx.decode(o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let[i,o]of Object.entries(t)){if(o.protocols&&o.protocols.length>0&&await r.datastore.put(new Je(`/peers/protos/${i}`),Ox.encode({protocols:o.protocols}).finish()),o.addresses&&o.addresses.length>0){let a=o.peerRecordEnvelope,c;if(a){let f=mT.decode(a),d=gT.decode(f.payload);c={raw:a,seq:d.seq}}await r.datastore.put(new Je(`/peers/addrs/${i}`),Ux.encode({addrs:o.addresses,certifiedRecord:c}).finish())}if(o.metadata&&o.metadata.length>0)for(let{key:a,value:c}of o.metadata)await r.datastore.put(new Je(`/peers/metadata/${i}/${a}`),c);o.pubKey&&await r.datastore.put(new Je(`/peers/keys/${i}`),o.pubKey)}await r.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}var wT={version:12,description:"Store each peerstore peer under a single datastore key",migrate:YG,revert:JG};var jc={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},Bg=[Object.assign({version:1},jc),Object.assign({version:2},jc),Object.assign({version:3},jc),Object.assign({version:4},jc),Object.assign({version:5},jc),Object.assign({version:6},jc),Object.assign({version:7},jc),Q3,sT,fT,hT,wT];h();p();h();p();var bT=Ze(qo(),1);var jx={};xt(jx,{InvalidValueError:()=>Wl,MissingRepoOptionsError:()=>Ss,NonReversibleMigrationError:()=>zl,NotInitializedRepoError:()=>du,RequiredParameterError:()=>ql});h();p();var zl=class extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=zl.code,this.message=e}};zl.code="ERR_NON_REVERSIBLE_MIGRATION";var du=class extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=du.code,this.message=e}};du.code="ERR_NOT_INITIALIZED_REPO";var ql=class extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=ql.code,this.message=e}};ql.code="ERR_REQUIRED_PARAMETER";var Wl=class extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=Wl.code,this.message=e}};Wl.code="ERR_INVALID_VALUE";var Ss=class extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=Ss.code,this.message=e}};Ss.code="ERR_MISSING_REPO_OPTIONS";var $x=(0,bT.default)("ipfs:repo:migrator:repo:init");async function vT(r){if(!r)throw new Ss("Please pass repo options when trying to open a repo");let e=r.root;try{await e.open();let t=await e.has(Qp),n=await e.has(aT);return!t||!n?($x(`Version entry present: ${t}`),$x(`Config entry present: ${n}`),!1):!0}catch(t){return $x("While checking if repo is initialized error was thrown: "+t.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}async function zx(r){if(!await vT(r))throw new du("Repo is not initialized!");let e=r.root;await e.open();try{return parseInt(Nl(await e.get(Qp)))}finally{await e.close()}}async function ed(r,e){if(!e)throw new Ss("Please pass repo options when trying to open a repo");let t=e.root;await t.open(),await t.put(Qp,Ml(String(r))),await t.close()}var _T=Ze(qo(),1),Go=(0,_T.default)("ipfs:repo:migrator");function QG(r){return r=r||Bg,!Array.isArray(r)||r.length===0?0:r[r.length-1].version}async function xT(r,e,t,n,i={}){let o=i.ignoreLock??!1,a=i.onProgress,c=i.isDryRun??!1,f=i.migrations??Bg;if(!r)throw new po.RequiredParameterError("Path argument is required!");if(!t)throw new po.RequiredParameterError("repoOptions argument is required!");if(!n)throw new po.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new po.InvalidValueError("Version has to be positive integer!");e=Rx(e);let d=await zx(e);if(d===n){Go("Nothing to migrate.");return}if(d>n)throw new po.InvalidValueError(`Current repo's version (${d}) is higher then toVersion (${n}), you probably wanted to revert it?`);AT(f,d,n);let m;!c&&!o&&(m=await t.repoLock.lock(r));try{for(let w of f){if(n!==void 0&&w.version>n)break;if(!(w.version<=d)){Go(`Migrating version ${w.version}`);try{if(!c){let E=()=>{};a&&(E=(T,F)=>a(w.version,T.toFixed(2),F)),await w.migrate(e,E)}}catch(E){let T=w.version-1;throw Go(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${T}`),await ed(T,e),new Error(`During migration to version ${w.version} exception was raised: ${E.stack||E.message||E}`)}Go(`Migrating to version ${w.version} finished`)}}c||await ed(n||QG(f),e),Go("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!c&&!o&&m&&await m.close()}}async function ET(r,e,t,n,i={}){let o=i.ignoreLock??!1,a=i.onProgress,c=i.isDryRun??!1,f=i.migrations??Bg;if(!r)throw new po.RequiredParameterError("Path argument is required!");if(!t)throw new po.RequiredParameterError("repoOptions argument is required!");if(!n)throw new po.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new po.InvalidValueError("Version has to be positive integer!");e=Rx(e);let d=await zx(e);if(d===n){Go("Nothing to revert.");return}if(d<n)throw new po.InvalidValueError(`Current repo's version (${d}) is lower then toVersion (${n}), you probably wanted to migrate it?`);AT(f,n,d,!0);let m;!c&&!o&&(m=await t.repoLock.lock(r)),Go(`Reverting from version ${d} to ${n}`);try{let w=f.slice().reverse();for(let E of w){if(E.version<=n)break;if(!(E.version>d)){Go(`Reverting migration version ${E.version}`);try{if(!c){let T=()=>{};a&&(T=(F,N)=>a(E.version,F.toFixed(2),N)),await E.revert(e,T)}}catch(T){let F=E.version;throw Go(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${F}`),await ed(F,e),T.message=`During reversion to version ${E.version} exception was raised: ${T.message}`,T}Go(`Reverting to version ${E.version} finished`)}}c||await ed(n,e),Go(`All migrations successfully reverted to version ${n}!`)}finally{!c&&!o&&m&&await m.close()}}function AT(r,e,t,n=!1){let i=0;for(let o of r){if(o.version>t)break;if(o.version>e){if(n&&!o.revert)throw new po.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${o.version} is not reversible. Cancelling reversion.`);i++}}if(i!==t-e)throw new po.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${t}`)}var po=jx;var jk=Ze(CT(),1);h();p();var LT=Ze(OT(),1),UT=LT.default;h();p();h();p();var qT=Ze(qo(),1);h();p();h();p();h();p();h();p();function Ug(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function NT(r=0){return globalThis.Buffer?.allocUnsafe!=null?Ug(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function KT(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var MT=KT("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Wx=KT("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=NT(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),fY={utf8:MT,"utf-8":MT,hex:gn.base16,latin1:Wx,ascii:Wx,binary:Wx,...gn},Ng=fY;function Gl(r,e="utf8"){let t=Ng[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();function yu(r,e="utf8"){let t=Ng[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ug(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}h();p();h();p();var $c=class extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=$c.code}};$c.code="ERR_LOCK_EXISTS";var Bi=class extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=Bi.code}};Bi.code="ERR_NOT_FOUND";var zc=class extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=zc.code}};zc.code="ERR_INVALID_REPO_VERSION";var td="ERR_REPO_NOT_INITIALIZED",jT="ERR_REPO_ALREADY_OPEN",$T="ERR_REPO_ALREADY_CLOSED";async function Mg(r,e,t){let n=await e(r);if(n)return n;let i=zT(t);return i?new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{o(Boolean(c.result))}}):!1}async function Kg(r,e,t,n){if(await t(r))return e(r);let i=zT(n);if(!i)throw new Bi;return new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return o(c.result);a(new Bi)}})}function zT(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}var hY=(0,qT.default)("ipfs:repo:version"),Vx=new Je("version");function WT(r){return{async exists(){return Mg(Vx,r.has.bind(r),r)},async get(){let e=await Kg(Vx,r.get.bind(r),r.has.bind(r),r);return parseInt(Gl(e),10)},set(e){return r.put(Vx,yu(String(e)))},async check(e){let t=await this.get();return hY("comparing version: %s and %s",t,e),t===e||(t===6&&e===7||e===6&&t===7)}}}h();p();h();p();var rk=Ze(HT(),1);h();p();var nd=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Gx=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},GT=r=>globalThis.DOMException===void 0?new Gx(r):new DOMException(r),YT=r=>{let e=r.reason===void 0?GT("This operation was aborted."):r.reason;return e instanceof Error?e:GT(e)};function Yx(r,e,t,n){let i,o=new Promise((a,c)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){a(r);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:f}=n;f.aborted&&c(YT(f)),f.addEventListener("abort",()=>{c(YT(f))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof t=="function"){try{a(t())}catch(m){c(m)}return}let f=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,d=t instanceof Error?t:new nd(f);typeof r.cancel=="function"&&r.cancel(),c(d)},e),(async()=>{try{a(await r)}catch(f){c(f)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}h();p();h();p();function Jx(r,e,t){let n=0,i=r.length;for(;i>0;){let o=Math.trunc(i/2),a=n+o;t(r[a],e)<=0?(n=++a,i-=o+1):i=o}return n}var qc=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},ma,id=class{constructor(){ma.set(this,[])}enqueue(e,t){t={priority:0,...t};let n={priority:t.priority,run:e};if(this.size&&qc(this,ma,"f")[this.size-1].priority>=t.priority){qc(this,ma,"f").push(n);return}let i=Jx(qc(this,ma,"f"),n,(o,a)=>a.priority-o.priority);qc(this,ma,"f").splice(i,0,n)}dequeue(){let e=qc(this,ma,"f").shift();return e?.run}filter(e){return qc(this,ma,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return qc(this,ma,"f").length}};ma=new WeakMap;var Er=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},We=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Mr,sd,ad,wu,Hg,ud,$g,Yo,od,Ri,zg,Oi,cd,gu,qg,JT,XT,tk,QT,ZT,ek,Wg,Xx,Qx,Gg,Vg,mY=new nd,Zx=class extends Error{},Ds=class extends rk.default{constructor(e){var t,n,i,o;if(super(),Mr.add(this),sd.set(this,void 0),ad.set(this,void 0),wu.set(this,0),Hg.set(this,void 0),ud.set(this,void 0),$g.set(this,0),Yo.set(this,void 0),od.set(this,void 0),Ri.set(this,void 0),zg.set(this,void 0),Oi.set(this,0),cd.set(this,void 0),gu.set(this,void 0),qg.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:id,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);Er(this,sd,e.carryoverConcurrencyCount,"f"),Er(this,ad,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),Er(this,Hg,e.intervalCap,"f"),Er(this,ud,e.interval,"f"),Er(this,Ri,new e.queueClass,"f"),Er(this,zg,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Er(this,qg,e.throwOnTimeout===!0,"f"),Er(this,gu,e.autoStart===!1,"f")}get concurrency(){return We(this,cd,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Er(this,cd,e,"f"),We(this,Mr,"m",Gg).call(this)}async add(e,t={}){return new Promise((n,i)=>{let o=async()=>{var a,c,f;Er(this,Oi,(c=We(this,Oi,"f"),c++,c),"f"),Er(this,wu,(f=We(this,wu,"f"),f++,f),"f");try{if(!((a=t.signal)===null||a===void 0)&&a.aborted){i(new Zx("The task was aborted."));return}let m=await(this.timeout===void 0&&t.timeout===void 0?e({signal:t.signal}):Yx(Promise.resolve(e({signal:t.signal})),t.timeout===void 0?this.timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?We(this,qg,"f"):t.throwOnTimeout)&&i(mY)}));n(m),this.emit("completed",m)}catch(d){i(d),this.emit("error",d)}We(this,Mr,"m",tk).call(this)};We(this,Ri,"f").enqueue(o,t),We(this,Mr,"m",Wg).call(this),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return We(this,gu,"f")?(Er(this,gu,!1,"f"),We(this,Mr,"m",Gg).call(this),this):this}pause(){Er(this,gu,!0,"f")}clear(){Er(this,Ri,new(We(this,zg,"f")),"f")}async onEmpty(){We(this,Ri,"f").size!==0&&await We(this,Mr,"m",Vg).call(this,"empty")}async onSizeLessThan(e){We(this,Ri,"f").size<e||await We(this,Mr,"m",Vg).call(this,"next",()=>We(this,Ri,"f").size<e)}async onIdle(){We(this,Oi,"f")===0&&We(this,Ri,"f").size===0||await We(this,Mr,"m",Vg).call(this,"idle")}get size(){return We(this,Ri,"f").size}sizeBy(e){return We(this,Ri,"f").filter(e).length}get pending(){return We(this,Oi,"f")}get isPaused(){return We(this,gu,"f")}};sd=new WeakMap,ad=new WeakMap,wu=new WeakMap,Hg=new WeakMap,ud=new WeakMap,$g=new WeakMap,Yo=new WeakMap,od=new WeakMap,Ri=new WeakMap,zg=new WeakMap,Oi=new WeakMap,cd=new WeakMap,gu=new WeakMap,qg=new WeakMap,Mr=new WeakSet,JT=function(){return We(this,ad,"f")||We(this,wu,"f")<We(this,Hg,"f")},XT=function(){return We(this,Oi,"f")<We(this,cd,"f")},tk=function(){var e;Er(this,Oi,(e=We(this,Oi,"f"),e--,e),"f"),We(this,Mr,"m",Wg).call(this),this.emit("next")},QT=function(){this.emit("empty"),We(this,Oi,"f")===0&&this.emit("idle")},ZT=function(){We(this,Mr,"m",Qx).call(this),We(this,Mr,"m",Xx).call(this),Er(this,od,void 0,"f")},ek=function(){let e=Date.now();if(We(this,Yo,"f")===void 0){let t=We(this,$g,"f")-e;if(t<0)Er(this,wu,We(this,sd,"f")?We(this,Oi,"f"):0,"f");else return We(this,od,"f")===void 0&&Er(this,od,setTimeout(()=>{We(this,Mr,"m",ZT).call(this)},t),"f"),!0}return!1},Wg=function(){if(We(this,Ri,"f").size===0)return We(this,Yo,"f")&&clearInterval(We(this,Yo,"f")),Er(this,Yo,void 0,"f"),We(this,Mr,"m",QT).call(this),!1;if(!We(this,gu,"f")){let e=!We(this,Mr,"a",ek);if(We(this,Mr,"a",JT)&&We(this,Mr,"a",XT)){let t=We(this,Ri,"f").dequeue();return t?(this.emit("active"),t(),e&&We(this,Mr,"m",Xx).call(this),!0):!1}}return!1},Xx=function(){We(this,ad,"f")||We(this,Yo,"f")!==void 0||(Er(this,Yo,setInterval(()=>{We(this,Mr,"m",Qx).call(this)},We(this,ud,"f")),"f"),Er(this,$g,Date.now()+We(this,ud,"f"),"f"))},Qx=function(){We(this,wu,"f")===0&&We(this,Oi,"f")===0&&We(this,Yo,"f")&&(clearInterval(We(this,Yo,"f")),Er(this,Yo,void 0,"f")),Er(this,wu,We(this,sd,"f")?We(this,Oi,"f"):0,"f"),We(this,Mr,"m",Gg).call(this)},Gg=function(){for(;We(this,Mr,"m",Wg).call(this););},Vg=async function(e,t){return new Promise(n=>{let i=()=>{t&&!t()||(this.off(e,i),n())};this.on(e,i)})};h();p();var ik=yY;function yY(r,e,t){var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(i=n.pop(),!i)return!1;nk(i);for(var o;o=n.shift();)if(nk(o),typeof r[o]>"u"&&(r[o]={}),r=r[o],!r||typeof r!="object")return!1;return r[i]=t,!0}function nk(r){if(r=="__proto__"||r=="constructor"||r=="prototype")throw new Error("setting of prototype values not supported")}var Yg=Ze(zo(),1);var gY=Ds.default?Ds.default:Ds,e1=new Je("config");function ok(r){let e=new gY({concurrency:1}),t={async getAll(o={}){let a=await Kg(e1,r.get.bind(r),r.has.bind(r),r);return JSON.parse(Gl(a))},async get(o,a={}){if(o==null)throw new Bi(`Key ${o} does not exist in config`);let c=await this.getAll(a),f=Vp(c,o);if(f===void 0)throw new Bi(`Key ${o} does not exist in config`);return f},set(o,a,c={}){if(typeof o!="string"&&!(o instanceof String))throw(0,Yg.default)(new Error("Invalid key type: "+typeof o),"ERR_INVALID_KEY");if(a===void 0||a instanceof Uint8Array)throw(0,Yg.default)(new Error("Invalid value type: "+typeof a),"ERR_INVALID_VALUE");return e.add(()=>n({key:o,value:a},c.signal))},replace(o,a={}){if(!o||o instanceof Uint8Array)throw(0,Yg.default)(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return e.add(()=>n({key:void 0,value:o},a.signal))},async exists(){return Mg(e1,r.has.bind(r),r)}};return t;async function n(o,a){if(a&&a.aborted)return;let c=o.key,f=o.value;if(c){let d=await t.getAll();return typeof d=="object"&&d!==null&&ik(d,c,f),i(d)}return i(f)}function i(o){let a=yu(JSON.stringify(o,null,2));return r.put(e1,a)}}h();p();h();p();h();p();h();p();function fd(r){if(typeof r!="object"||r===null)return!1;let e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function t1(r,e={}){if(!fd(r)&&!Array.isArray(r))throw new TypeError("Expected a plain object or array");let{deep:t,compare:n}=e,i=[],o=[],a=f=>{let d=i.indexOf(f);if(d!==-1)return o[d];let m=[];return i.push(f),o.push(m),m.push(...f.map(w=>Array.isArray(w)?a(w):fd(w)?c(w):w)),m},c=f=>{let d=i.indexOf(f);if(d!==-1)return o[d];let m={},w=Object.keys(f).sort(n);i.push(f),o.push(m);for(let E of w){let T=f[E],F;t&&Array.isArray(T)?F=a(T):F=t&&fd(T)?c(T):T,Object.defineProperty(m,E,{...Object.getOwnPropertyDescriptor(f,E),value:F})}return m};return Array.isArray(r)?t?a(r):r.slice():c(r)}var r1=new Je("datastore_spec");function sk(r){return{exists(){return r.has(r1)},async get(){let e=await r.get(r1);return JSON.parse(Gl(e))},async set(e){return r.put(r1,yu(JSON.stringify(t1(e,{deep:!0}))))}}}h();p();var n1=new Je("api");function ak(r){return{async get(){let e=await r.get(n1);return e&&e.toString()},set(e){return r.put(n1,yu(e.toString()))},delete(){return r.delete(n1)}}}h();p();h();p();async function*ld(r,e){for await(let t of r)await e(t)&&(yield t)}h();p();h();p();var Jg=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Yl=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new Jg(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new Jg(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function Cs(r={}){return wY(t=>{let n=t.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function wY(r,e){e=e??{};let t=e.onEnd,n=new Yl,i,o,a,c=async()=>n.isEmpty()?a?{done:!0}:await new Promise((N,he)=>{o=de=>{o=null,n.push(de);try{N(r(n))}catch(Pe){he(Pe)}return i}}):r(n),f=N=>o!=null?o(N):(n.push(N),i),d=N=>(n=new Yl,o!=null?o({error:N}):(n.push({error:N}),i)),m=N=>{if(a)return i;if(e?.objectMode!==!0&&N?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return f({done:!1,value:N})},w=N=>a?i:(a=!0,N!=null?d(N):f({done:!0})),E=()=>(n=new Yl,w(),{done:!0}),T=N=>(w(N),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:E,throw:T,push:m,end:w,get readableLength(){return n.size}},t==null)return i;let F=i;return i={[Symbol.asyncIterator](){return this},next(){return F.next()},throw(N){return F.throw(N),t!=null&&(t(N),t=void 0),{done:!0}},return(){return F.return(),t!=null&&(t(),t=void 0),{done:!0}},push:m,end(N){return F.end(N),t!=null&&(t(N),t=void 0),i},get readableLength(){return F.readableLength}},i}h();p();async function i1(r){for await(let e of r);}var uk=Ze(zo(),1);function ck(r){return{open(){return r.open()},close(){return r.close()},query(e,t){return r.query(e,t)},queryKeys(e,t){return r.queryKeys(e,t)},async get(e,t){let n=bu(e);return n.isIdentity?Promise.resolve(n.digest):r.get(e,t)},async*getMany(e,t){for await(let n of e)yield this.get(n,t)},async put(e,t,n){let{isIdentity:i}=bu(e);i||await r.put(e,t,n)},async*putMany(e,t){let n=Cs({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await i1(r.putMany(async function*(){for await(let{key:o,value:a}of e)bu(o).isIdentity||(yield{key:o,value:a}),n.push({key:o,value:a})}())),n.end()}catch(o){n.end(o)}}),yield*n},has(e,t){let{isIdentity:n}=bu(e);return n?Promise.resolve(!0):r.has(e,t)},delete(e,t){let{isIdentity:n}=bu(e);return n?Promise.resolve():r.delete(e,t)},deleteMany(e,t){return r.deleteMany(ld(e,n=>!bu(n).isIdentity),t)},batch(){let e=r.batch();return{put(t,n){let{isIdentity:i}=bu(t);i||e.put(t,n)},delete(t){let{isIdentity:n}=bu(t);n||e.delete(t)},commit:t=>e.commit(t)}}}}function bu(r){let e=we.asCID(r);if(e==null)throw(0,uk.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==Il.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}h();p();h();p();var fk=Ze(qo(),1),lk=(0,fk.default)("ipfs:repo:lock:memory"),hk="repo.lock",hd={};async function bY(r){let e=r+"/"+hk;if(lk("locking %s",e),hd[e]===!0)throw new $c(`Lock already being held for file: ${e}`);return hd[e]=!0,{async close(){hd[e]&&delete hd[e]}}}async function vY(r){let e=r+"/"+hk;return lk(`checking lock: ${e}`),Boolean(hd[e])}var pk={lock:bY,locked:vY};var dk={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:pk};h();p();var o1={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};h();p();var gk=Ze(zo(),1),wk=Ze(qo(),1);h();p();async function Xg(r){for await(let e of r)return e}h();p();function Qg({enumerable:r=!0,configurable:e=!1}={}){return{enumerable:r,configurable:e,writable:!1}}function*_Y(r,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(let[t,n]of e.entries()){let i=[...r,t],o=we.asCID(n);o?yield[i.join("/"),o]:typeof n=="object"&&(yield*s1(n,i))}else{let t=we.asCID(e);t?yield[r.join("/"),t]:yield*s1(e,r)}}function*s1(r,e){if(!(r==null||r instanceof Uint8Array))for(let[t,n]of Object.entries(r)){let i=[...e,t];yield*_Y(i,n)}}function*xY(r,e){if(Array.isArray(e))for(let[t,n]of e.entries()){let i=[...r,t];yield i.join("/"),typeof n=="object"&&!we.asCID(n)&&(yield*a1(n,i))}else yield*a1(e,r)}function*a1(r,e){if(!(r==null||typeof r!="object"))for(let[t,n]of Object.entries(r)){let i=[...e,t];yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!we.asCID(n)&&(yield*xY(i,n))}}function EY(r,e){let t=r;for(let[n,i]of e.entries()){if(t=t[i],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);let o=we.asCID(t);if(o)return{value:o,remaining:e.slice(n+1).join("/")}}return{value:t}}var u1=class{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:Qg(),bytes:Qg(),value:Qg(),asBlock:Qg()})}links(){return s1(this.value,[])}tree(){return a1(this.value,[])}get(e="/"){return EY(this.value,e.split("/").filter(Boolean))}};function Zg({bytes:r,cid:e,value:t,codec:n}){let i=t!==void 0?t:n&&n.decode(r);if(i===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new u1({cid:e,bytes:r,value:i})}h();p();var mk=Ze(zo(),1);function pd(r){let e=we.asCID(r);if(e==null)throw(0,mk.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let t=Kt.encode(e.multihash.bytes);return new Je("/"+t.slice(1).toUpperCase(),!1)}function c1(r){return ln(Kt.decode(`b${r.toString().toLowerCase().substring(1)}`))}h();p();var yk=Ze(qo(),1);var AY=(0,yk.default)("ipfs:repo:utils:walk-dag");async function*Jl(r,e,t,n){try{let i=await e.get(r,n),o=await t(r.code),a=Zg({bytes:i,cid:r,codec:o});for(let[,c]of a.links())yield c,yield*Jl(c,e,t,n)}catch(i){throw AY("Could not walk DAG for CID",r.toString(),i),i}}h();p();var ni={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};h();p();var dd=class extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(let[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){let n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield e)}for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield e)}}get(e){if(this.cache.has(e)){let t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){let t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){let i=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");let t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}}*entriesAscending(){for(let[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(let t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(let[n,i]of this.entriesAscending())e.call(t,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}};var SY=2048;function DY(r){let e=`Invalid type '${r}', must be one of {direct, indirect, recursive, all}`;return(0,gk.default)(new Error(e),"ERR_INVALID_PIN_TYPE")}var e0=class{constructor({pinstore:e,blockstore:t,loadCodec:n}){this.pinstore=e,this.blockstore=t,this.loadCodec=n,this.log=(0,wk.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);let n={depth:0};return e.version!==0&&(n.version=e.version),e.code!==dn&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),this.pinstore.put(pd(e),Js(n))}unpin(e,t){return this.pinstore.delete(pd(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);let n={depth:1/0};e.version!==0&&(n.version=e.version),e.code!==dn&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),await this.pinstore.put(pd(e),Js(n))}async*directKeys(e){for await(let t of this.pinstore.query({filters:[n=>io(n.value).depth===0]})){let n=io(t.value),i=n.version||0,o=n.codec!=null?n.codec:dn,a=c1(t.key);yield{cid:we.create(i,o,a),metadata:n.metadata}}}async*recursiveKeys(e){for await(let t of this.pinstore.query({filters:[n=>io(n.value).depth===1/0]})){let n=io(t.value),i=n.version||0,o=n.codec!=null?n.codec:dn,a=c1(t.key);yield{cid:we.create(i,o,a),metadata:n.metadata}}}async*indirectKeys(e){for await(let{cid:t}of this.recursiveKeys())for await(let n of Jl(t,this.blockstore,this.loadCodec,e)){let i=[ni.recursive];(await this.isPinnedWithType(n,i)).pinned||(yield n)}}async isPinnedWithType(e,t,n){Array.isArray(t)||(t=[t]);let i=t.includes(ni.all),o=t.includes(ni.direct),a=t.includes(ni.recursive),c=t.includes(ni.indirect);if(a||o||i){let m=await Xg(this.pinstore.query({prefix:pd(e).toString(),filters:[w=>{if(i)return!0;let E=io(w.value);return t.includes(E.depth===0?ni.direct:ni.recursive)}],limit:1}));if(m){let w=io(m.value);return{cid:e,pinned:!0,reason:w.depth===0?ni.direct:ni.recursive,metadata:w.metadata}}}let f=this;async function*d(m,w){for await(let{cid:E}of w)for await(let T of Jl(E,f.blockstore,f.loadCodec))if(T.equals(m)){yield E;return}}if(i||c){let m=await Xg(d(e,this.recursiveKeys()));if(m)return{cid:e,pinned:!0,reason:ni.indirect,parent:m}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t={}){let n=new dd({maxSize:t.cidCacheMaxSize??SY}),i=async(o,a)=>{if(n.has(o.toString()))return;n.set(o.toString(),!0);let c=await this.blockstore.get(o,a),f=await this.loadCodec(o.code),d=Zg({bytes:c,cid:o,codec:f});await Promise.all([...d.links()].map(([,m])=>i(m,a)))};await i(e,t)}static checkPinType(e){if(typeof e!="string"||!Object.keys(ni).includes(e))throw DY(e);return!0}};h();p();h();p();async function*Wc(r,e){for await(let t of r)yield e(t)}var vk=Ze(zo(),1);function _k(r,e){return{open(){return e.open()},close(){return e.close()},query(t,n){return e.query(t,n)},queryKeys(t,n){return e.queryKeys(t,n)},async get(t,n){return e.get(t,n)},async*getMany(t,n){yield*e.getMany(t,n)},async put(t,n,i){await e.put(t,n,i)},async*putMany(t,n){yield*e.putMany(t,n)},has(t,n){return e.has(t,n)},async delete(t,n){return await bk(t,r),e.delete(t,n)},deleteMany(t,n){return e.deleteMany(Wc(t,async i=>(await bk(i,r),i)),n)},batch(){return e.batch()}}}async function bk(r,e){let{pinned:t,reason:n}=await e.isPinnedWithType(r,ni.all);if(t)throw(0,vk.default)(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}h();p();h();p();var f1=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},l1=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},xk=r=>globalThis.DOMException===void 0?new l1(r):new DOMException(r),Ek=r=>{let e=r.reason===void 0?xk("This operation was aborted."):r.reason;return e instanceof Error?e:xk(e)};function h1(r,e){let{milliseconds:t,fallback:n,message:i,customTimers:o={setTimeout,clearTimeout}}=e,a,c=new Promise((f,d)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t===Number.POSITIVE_INFINITY){f(r);return}if(e.signal){let{signal:m}=e;m.aborted&&d(Ek(m)),m.addEventListener("abort",()=>{d(Ek(m))})}a=o.setTimeout.call(void 0,()=>{if(n){try{f(n())}catch(E){d(E)}return}let m=typeof i=="string"?i:`Promise timed out after ${t} milliseconds`,w=i instanceof Error?i:new f1(m);typeof r.cancel=="function"&&r.cancel(),d(w)},t),(async()=>{try{f(await r)}catch(m){d(m)}finally{o.clearTimeout.call(void 0,a)}})()});return c.clear=()=>{o.clearTimeout.call(void 0,a),a=void 0},c}h();p();h();p();var p1="lock:worker:request-read",d1="lock:worker:release-read",m1="lock:master:grant-read",y1="lock:worker:request-write",g1="lock:worker:release-write",w1="lock:master:grant-write";h();p();var vu={},Xl=r=>{r.addEventListener("message",e=>{Xl.dispatchEvent("message",r,e)}),r.port!=null&&r.port.addEventListener("message",e=>{Xl.dispatchEvent("message",r,e)})};Xl.addEventListener=(r,e)=>{vu[r]==null&&(vu[r]=[]),vu[r].push(e)};Xl.removeEventListener=(r,e)=>{vu[r]!=null&&(vu[r]=vu[r].filter(t=>t===e))};Xl.dispatchEvent=function(r,e,t){vu[r]!=null&&vu[r].forEach(n=>n(e,t))};var b1=Xl;var Ak=(r,e,t,n,i)=>(o,a)=>{if(a.data.type!==t)return;let c={type:a.data.type,name:a.data.name,identifier:a.data.identifier};r.dispatchEvent(new MessageEvent(e,{data:{name:c.name,handler:async()=>(o.postMessage({type:i,name:c.name,identifier:c.identifier}),await new Promise(f=>{let d=m=>{if(m==null||m.data==null)return;let w={type:m.data.type,name:m.data.name,identifier:m.data.identifier};w.type===n&&w.identifier===c.identifier&&(o.removeEventListener("message",d),f())};o.addEventListener("message",d)}))}}))},Sk=(r,e,t,n)=>async()=>{let i=dg();return globalThis.postMessage({type:e,identifier:i,name:r}),await new Promise(o=>{let a=c=>{if(c==null||c.data==null)return;let f={type:c.data.type,identifier:c.data.identifier};f.type===t&&f.identifier===i&&(globalThis.removeEventListener("message",a),o(()=>{globalThis.postMessage({type:n,identifier:i,name:r})}))};globalThis.addEventListener("message",a)})},CY={singleProcess:!1},Dk=r=>{if(r=Object.assign({},CY,r),Boolean(globalThis.document)||r.singleProcess){let t=new EventTarget;return b1.addEventListener("message",Ak(t,"requestReadLock",p1,d1,m1)),b1.addEventListener("message",Ak(t,"requestWriteLock",y1,g1,w1)),t}return{isWorker:!0,readLock:t=>Sk(t,p1,m1,d1),writeLock:t=>Sk(t,y1,w1,g1)}};var Vc={},_u;async function v1(r,e){let t,n=new Promise(i=>{t=i});return r.add(async()=>await h1((async()=>await new Promise(i=>{t(()=>{i()})}))(),{milliseconds:e.timeout})),await n}var PY=(r,e)=>{if(_u.isWorker===!0)return{readLock:_u.readLock(r,e),writeLock:_u.writeLock(r,e)};let t=new Ds({concurrency:1}),n;return{async readLock(){if(n!=null)return await v1(n,e);n=new Ds({concurrency:e.concurrency,autoStart:!1});let i=n,o=v1(n,e);return t.add(async()=>(i.start(),await i.onIdle().then(()=>{n===i&&(n=null)}))),await o},async writeLock(){return n=null,await v1(t,e)}}},IY={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function _1(r){let e=Object.assign({},IY,r);return _u==null&&(_u=Dk(e),_u.isWorker!==!0&&(_u.addEventListener("requestReadLock",t=>{Vc[t.data.name]!=null&&Vc[t.data.name].readLock().then(async n=>await t.data.handler().finally(()=>n()))}),_u.addEventListener("requestWriteLock",async t=>{Vc[t.data.name]!=null&&Vc[t.data.name].writeLock().then(async n=>await t.data.handler().finally(()=>n()))}))),Vc[e.name]==null&&(Vc[e.name]=PY(e.name,e)),Vc[e.name]}h();p();var Uk=Ze(qo(),1);h();p();h();p();async function*x1(r,e=1){let t=[];e<1&&(e=1);for await(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length>0;)yield t.slice(0,e),t=t.slice(e)}async function*E1(r,e=1){for await(let t of x1(r,e)){let n=t.map(async i=>await i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}h();p();var Ok=Ze(S1(),1),FY=(...r)=>{let e;for(;r.length>0;)e=r.shift()(e);return e},Lk=r=>r!=null&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),D1=r=>r!=null&&typeof r.sink=="function"&&Lk(r.source),BY=r=>e=>{let t=r.sink(e);if(t.then!=null){let n=Cs({objectMode:!0});return t.then(()=>{n.end()},o=>{n.end(o)}),(0,Ok.default)(n,async function*(){yield*r.source,n.end()}())}return r.source};function C1(r,...e){if(D1(r)){let n=r;r=()=>n.source}else if(Lk(r)){let n=r;r=()=>n}let t=[r,...e];if(t.length>1&&D1(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let n=1;n<t.length-1;n++)D1(t[n])&&(t[n]=BY(t[n]));return FY(...t)}h();p();async function*t0(...r){let e=Cs({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}}),yield*e}var md=(0,Uk.default)("ipfs:repo:gc"),RY=As().code,OY=256,LY=new Je("/local/filesroot");function Nk({gcLock:r,pins:e,blockstore:t,root:n,loadCodec:i}){async function*o(){let a=Date.now();md("Creating set of marked blocks");let c=await r.writeLock();try{let f=await UY({pins:e,blockstore:t,root:n,loadCodec:i}),d=t.queryKeys({});yield*NY({blockstore:t},f,d),md(`Complete (${Date.now()-a}ms)`)}finally{c()}}return o}async function UY({pins:r,blockstore:e,loadCodec:t,root:n}){let i=async function*(){let c;try{c=await n.get(LY)}catch(d){if(d.code===RY){md("No blocks in MFS");return}throw d}let f=we.decode(c);yield f,yield*Jl(f,e,t)}(),o=t0(Wc(r.recursiveKeys(),({cid:c})=>c),r.indirectKeys(),Wc(r.directKeys(),({cid:c})=>c),i),a=new Set;for await(let c of t0(o,i))a.add(Kt.encode(c.multihash.bytes));return a}async function*NY({blockstore:r},e,t){let n=0,i=0;yield*C1(E1(Wc(t,async a=>async function(){n++;try{let f=Kt.encode(a.multihash.bytes);if(e.has(f))return null;try{await r.delete(a),i++}catch(d){return{err:new Error(`Could not delete block with CID ${a}: ${d.message}`)}}return{cid:a}}catch(f){let d=`Could delete block with CID ${a}`;return md(d,f),{err:new Error(d+`: ${f.message}`)}}}),OY),a=>ld(a,Boolean)),md(`Marked set has ${e.size} unique blocks. Blockstore has ${n} blocks. Deleted ${i} blocks.`)}var ii=(0,Kk.default)("ipfs:repo"),MY=Number.MAX_SAFE_INTEGER,KY="repoAutoMigrate",I1=class{constructor(e,t,n,i){if(typeof e!="string")throw new Error("missing repo path");if(typeof t!="function")throw new Error("missing codec loader");this.options=UT(dk,i),this.closed=!0,this.path=e,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;let o=n.blocks,a=n.pins;this.pins=new e0({pinstore:a,blockstore:o,loadCodec:t});let c=_k(this.pins,o);this.blocks=ck(c),this.version=WT(this.root),this.config=ok(this.root),this.spec=sk(this.root),this.apiAddr=ak(this.root),this.gcLock=_1({name:e,singleProcess:this.options.repoOwner!==!1}),this.gc=Nk({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){ii("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(jY(e)),await this.spec.set($Y(e)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw(0,Hc.default)(new Error("repo is already open"),jT);ii("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),ii("acquired repo.lock"),!await this.version.check(12))if(await this._isAutoMigrationEnabled())await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new zc("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");ii("creating datastore"),await this.datastore.open(),ii("creating blocks"),await this.blocks.open(),ii("creating keystore"),await this.keys.open(),ii("creating pins"),await this.pins.pinstore.open(),this.closed=!1,ii("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(t){ii("error removing lock",t)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,Hc.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){ii("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(t){throw t.code==="ERR_NOT_FOUND"?(0,Hc.default)(new Error("repo is not initialized yet"),td,{path:this.path}):t}if(!e)throw(0,Hc.default)(new Error("repo is not initialized yet"),td,{path:this.path})}async close(){if(this.closed)throw(0,Hc.default)(new Error("repo is already closed"),$T);ii("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==td&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),ii("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,t,n,i,o]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),Mk(this.datastore),Mk(this.keys)]),a=t.size+i+o;return{repoPath:this.path,storageMax:e,version:n,numObjects:t.count,repoSize:a}}throw(0,Hc.default)(new Error("repo is not initialized yet"),td,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(KY)}catch(t){if(t.code===Bi.code)e=!0;else throw t}return e}async _migrate(e,t){return await this.version.get()>e?(ii(`reverting to version ${e}`),ET(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(ii(`migrating to version ${e}`),xT(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt((0,jk.default)(e))}catch{return BigInt(MY)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(let{key:n,value:i}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(i.byteLength),t+=BigInt(n.bytes.byteLength);return{count:e,size:t}}};async function Mk(r){let e=BigInt(0);for await(let t of r.query({}))e+=BigInt(t.value.byteLength),e+=BigInt(t.key.uint8Array().byteLength);return e}function $k(r,e,t,n){return new I1(r,e,t,n)}function jY(r){return r.Datastore=Object.assign({},o1,Vp(r,"datastore")),r}function $Y(r){let e={...o1.Spec,...Vp(r,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(t=>({mountpoint:t.mountpoint,type:t.child.type,path:t.child.path,shardFunc:t.child.shardFunc}))}}h();p();h();p();async function r0(r){for await(let e of r);}var Yk=Ze(zo(),1);h();p();var k1=Ze(n0(),1),Gc=Ze(i0(),1),F1=Ze(o0(),1),Gk=Ze(T1(),1),Hk=(r,e)=>async function*(){yield*(await(0,Gk.default)(r)).sort(e)}(),s0=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,k1.default)(this.putMany(e,n)),e=[],await(0,k1.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,Gc.default)(n,i=>i.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Gc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>Hk(i,o),n)),e.offset!=null){let i=0;n=(0,Gc.default)(n,()=>i++>=(e.offset||0))}return e.limit!=null&&(n=(0,F1.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,Gc.default)(n,i=>i.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Gc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>Hk(i,o),n)),e.offset!=null){let i=0;n=(0,Gc.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,F1.default)(n,e.limit)),n}};function Ql(r){let e=we.asCID(r);if(!e)throw(0,Yk.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Je("/"+Kt.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function xu(r){return we.createV1(ds,ln(Kt.decode("b"+r.toString().slice(1).toLowerCase())))}function B1(r){let e=r.substring(0,1);if(e==="/")return B1(r.substring(1));let t;e.toLowerCase()==="b"?t=o=>Kt.decode(o.toLowerCase()).subarray(2):e.toLowerCase()==="c"?t=o=>jb.decode(o.toLowerCase()).subarray(2):e==="z"?t=o=>Ir.decode(o).subarray(2):e==="Q"?t=o=>Ir.decode("z"+o):t=o=>Kt.decode("b"+o.toLowerCase()).subarray(2);let n;for(let o=1;o<r.length;o++)try{n=t(r.substring(0,o))}catch(a){if(a.message!=="Unexpected end of data")throw a}let i="/C";return n&&(i=`/${Kt.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}function HY(r){return{...r,prefix:r.prefix?B1(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e({key:xu(t.key),value:t.value})):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e({key:xu(t.key),value:t.value},{key:xu(n.key),value:n.value})):void 0}}function GY(r){return{...r,prefix:r.prefix?B1(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e(xu(t))):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e(xu(t),xu(n))):void 0}}var a0=class extends s0{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(let{key:n,value:i}of this.child.query(HY(e),t))yield{key:xu(n),value:i}}async*queryKeys(e,t){for await(let n of this.child.queryKeys(GY(e),t))yield xu(n)}async get(e,t){return this.child.get(Ql(e),t)}async*getMany(e,t){for await(let n of e)yield this.get(n,t)}async put(e,t,n){await this.child.put(Ql(e),t,n)}async*putMany(e,t){let n=Cs({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let o=this.child;await r0(this.child.putMany(async function*(){for await(let a of e){let c=Ql(a.key);await o.has(c,t)||(yield{key:c,value:a.value}),n.push(a)}}())),n.end()}catch(o){n.end(o)}}),yield*n}has(e,t){return this.child.has(Ql(e),t)}delete(e,t){return this.child.delete(Ql(e),t)}deleteMany(e,t){let n=Cs({objectMode:!0});return r0(this.child.deleteMany(async function*(){for await(let i of e)yield Ql(i),n.push(i);n.end()}(),t)).catch(i=>{n.end(i)}),n}};h();p();h();p();h();p();var Jk=Ze(T1(),1),u0=(r,e)=>async function*(){yield*(await(0,Jk.default)(r)).sort(e)}();var R1=Ze(n0(),1),Yc=Ze(i0(),1),O1=Ze(o0(),1),Jo=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,R1.default)(this.putMany(e,n)),e=[],await(0,R1.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,Yc.default)(n,i=>i.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Yc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>u0(i,o),n)),e.offset!=null){let i=0;n=(0,Yc.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,O1.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,Yc.default)(n,i=>i.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Yc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>u0(i,o),n)),e.offset!=null){let i=0;n=(0,Yc.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,O1.default)(n,e.limit)),n}};var yd=class extends Jo{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){if(!await this.has(e))throw As();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:new Je(e),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Je(e))}};h();p();h();p();h();p();h();p();var Xk="SHARDING",Qk="_README";h();p();var QY=Ze(eF(),1);h();p();var C2e=new Je(Xk),P2e=new Je(Qk);h();p();var ZY=Ze(i0(),1),eJ=Ze(o0(),1),tJ=Ze(S1(),1);h();p();h();p();var Ps=Ze(qo(),1);Ps.default.formatters.b=r=>r==null?"undefined":Ir.baseEncode(r);Ps.default.formatters.t=r=>r==null?"undefined":Kt.baseEncode(r);Ps.default.formatters.m=r=>r==null?"undefined":q_.baseEncode(r);Ps.default.formatters.p=r=>r==null?"undefined":r.toString();Ps.default.formatters.c=r=>r==null?"undefined":r.toString();Ps.default.formatters.k=r=>r==null?"undefined":r.toString();function rF(r){return Object.assign((0,Ps.default)(r),{error:(0,Ps.default)(`${r}:error`),trace:(0,Ps.default)(`${r}:trace`)})}var rJ=Ze(n0(),1),V2e=rF("datastore:core:tiered");h();p();h();p();async function*Zl(r,e){for await(let t of r)await e(t)&&(yield t)}h();p();async function*L1(r,e){for await(let t of r)yield e(t)}h();p();async function*c0(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}}h();p();h();p();async function U1(r){let e=[];for await(let t of r)e.push(t);return e}async function*f0(r,e){yield*(await U1(r)).sort(e)}var gB=Ze(yB(),1),lf=class extends Jo{constructor(e,t={}){super(),this.db=typeof e=="string"?new gB.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw ho.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(n){throw ho.dbWriteFailedError(n)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(n){throw n.notFound?ho.notFoundError(n):ho.dbWriteFailedError(n)}return t}async has(e){try{await this.db.get(e.toString())}catch(t){if(t.notFound)return!1;throw t}return!0}async delete(e){try{await this.db.del(e.toString())}catch(t){throw ho.dbDeleteFailedError(t)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(t,n)=>{e.push({type:"put",key:t.toString(),value:n})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((o,a)=>Zl(o,a),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,a)=>f0(o,a),t));let{offset:n,limit:i}=e;if(n){let o=0;t=Zl(t,()=>o++>=n)}return i&&(t=c0(t,i)),t}queryKeys(e){let t=L1(this._query({values:!1,prefix:e.prefix}),({key:o})=>o);Array.isArray(e.filters)&&(t=e.filters.reduce((o,a)=>Zl(o,a),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,a)=>f0(o,a),t));let{offset:n,limit:i}=e;if(n){let o=0;t=Zl(t,()=>o++>=n)}return i&&(t=c0(t,i)),t}_query(e){let t={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){let i=e.prefix.toString();t.gte=i,t.lt=i+"\xFF"}let n=this.db.iterator(t);if(n[Symbol.asyncIterator])return uX(n);if(n.next!=null&&n.end!=null)return cX(n);throw new Error("Level returned incompatible iterator")}};async function*uX(r){for await(let[e,t]of r)yield{key:new Je(e,!1),value:t};await r.close()}function cX(r){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,t)=>{r.next((n,i,o)=>{if(n)return t(n);if(i==null)return r.end(a=>{if(a)return t(a);e({done:!0,value:void 0})});e({done:!1,value:{key:new Je(i,!1),value:o}})})}),return:()=>new Promise((e,t)=>{r.end(n=>{if(n)return t(n);e({done:!0,value:void 0})})})}}}}function wB(r){let e=new yd;return $k(r,t=>{let n={[dn]:vi,[op]:vi,[Va]:bi,[np]:bi,[ds]:Fo,[sp]:Fo};return Promise.resolve(n[t])},{root:new lf(`${r}/root`,{prefix:"",version:2}),blocks:new a0(new lf(`${r}/blocks`,{prefix:"",version:2})),keys:new lf(`${r}/keys`,{prefix:"",version:2}),datastore:e,pins:new lf(`${r}/pins`,{prefix:"",version:2})},{repoLock:{lock:async()=>({close:async()=>{}}),locked:async()=>!1},autoMigrate:!1})}var IE={},lX=/^((?!chrome|android).)*safari/i.test(globalThis.navigator?.userAgent||""),EB=1*60*1e3,TE=5*60*1e3,kE={retryNumber:0,lastBackoff:0,currentBackoff:1e3},hX={config:{Addresses:{Delegates:[]},Bootstrap:[],Discovery:{webRTCStar:{Enabled:!1}},Pubsub:{Enabled:!1}},preload:{enabled:!1,addresses:[]},libp2p:{peerDiscovery:[],connectionManager:{autoDial:!1}},init:{algorithm:lX?YI:void 0,emptyRepo:!0}};async function AB(r,e,t,n,i){let o=await vB(r.storage,t);if(o.length===0)throw new Error("\u{1F4A5} Couldn't start IPFS node, peer list is empty");let a=wB(n),c=await e.create({...hX,repo:a});return o.forEach(f=>{IE[f.toString()]=null,xB(c,f,i)}),globalThis.addEventListener("online",async()=>{(await vB(r.storage,t)).filter(f=>{let d=f.toString();return!d.includes("/localhost/")&&!d.includes("/127.0.0.1/")&&!d.includes("/0.0.0.0/")}).forEach(f=>{xB(c,f,i)})}),i&&console.log("\u{1F680} Started IPFS node"),{ipfs:c,repo:a}}function bB(r){return fetch(r).then(e=>e.json()).then(e=>Array.isArray(e)?e:[]).then(e=>e.filter(t=>Ht(t)&&t.includes("/wss/"))).catch(()=>{throw new Error("\u{1F4A5} Couldn't start IPFS node, failed to fetch peer list")})}async function vB(r,e){let t,n=`ipfs-peers-${e}`,i=await r.getItem(n);return Ht(i)&&i.trim()!==""?(t=JSON.parse(i),bB(e).then(o=>r.setItem(n,JSON.stringify(o))).catch(o=>{console.error(o)})):(t=await bB(e),await r.setItem(n,JSON.stringify(t))),t.map(jp)}function Ud(r,e,t,n){let i=null;t.currentBackoff<TE?i=setTimeout(()=>_B(r,e,t,n),t.currentBackoff):i=setTimeout(()=>_B(r,e,t,n),TE),IE[e.toString()]=i,SB(r,e).then(({latency:o})=>{let a={connected:!0,lastConnectedAt:Date.now(),latency:o};N0(e,a),i&&clearTimeout(i),i===IE[e.toString()]&&setTimeout(()=>Ud(r,e,kE,a),EB)}).catch(()=>{})}async function _B(r,e,t,n){let i={...n,connected:!1,latency:null};N0(e,i);try{await r.swarm.disconnect(e),await r.swarm.connect(e)}catch{}if(t.currentBackoff<TE){let o={retryNumber:t.retryNumber+1,lastBackoff:t.currentBackoff,currentBackoff:t.lastBackoff+t.currentBackoff};Ud(r,e,o,i)}else Ud(r,e,t,i)}function xB(r,e,t){SB(r,e).then(({latency:n})=>r.swarm.connect(e,{timeout:60*1e3}).then(()=>{t&&console.log(`\u{1FA90} Connected to ${e}`);let i={connected:!0,lastConnectedAt:Date.now(),latency:n};N0(e,i),setTimeout(()=>Ud(r,e,kE,i),EB)})).catch(()=>{t&&console.log(`\u{1FA93} Could not connect to ${e}`);let n={connected:!1,lastConnectedAt:null,latency:null};N0(e,n),Ud(r,e,kE,n)})}async function SB(r,e){return r.libp2p.ping(e).then(t=>({latency:t}))}var hf=[],pX=!1;function N0(r,e){hf=hf.filter(a=>a.peer!==r).concat({peer:r,status:e});let t=hf.every(a=>!a.status.connected),n=hf.reduce((a,{status:c})=>a>=(c.lastConnectedAt||0)?a:c.lastConnectedAt||0,0),i=hf.filter(a=>a.status.latency!==null),o=i.length>0?hf.reduce((a,c)=>a+(c.status.latency||0),0)/i.length:null;pX&&(console.table(hf),console.log("offline",t),console.log("last connected at",n===0?null:n),console.log("average latency",o))}var CB="https://unpkg.com/ipfs-core@0.17.0/dist/index.min.js",PB=(r,e,t,n,i)=>AB(r,e,t,n,i),IB=async r=>{if(!r)throw new Error("This function requires a URL to a CDN");return import(r).then(e=>self.IpfsCore)};h();p();async function TB(r){return{getBlock:async e=>{let{ipfs:t}=await r();return t.block.get(e)},getUnixDirectory:async e=>{let{ipfs:t}=await r(),n=[];for await(let i of t.ls(e)){let{name:o="",cid:a,size:c,type:f}=i;n.push({name:o,cid:a,size:c,isFile:f!=="dir"})}return n},getUnixFile:async e=>{let{ipfs:t}=await r(),n=[];for await(let i of t.cat(e))n.push(i);return Bh(n)},putBlock:async(e,t)=>{let{repo:n}=await r(),i=ly(t),o=await $o.digest(e),a=we.createV1(i.code,o);return await n.blocks.put(a,e),a},putChunked:async e=>{let{ipfs:t}=await r();return{...await t.add(e,{cidVersion:1,hashAlg:"sha2-256",rawLeaves:!0,wrapWithDirectory:!1,preload:!1,pin:!1}),isFile:!0}},size:async e=>{let{ipfs:t}=await r();return(await t.files.stat(`/ipfs/${e}`)).cumulativeSize}}}async function M0(r,e,t){let n=null;return TB(async()=>n||(n=await PB(r,await IB(CB),e,t,!1),n))}async function FE(r,e){return M0(r,Ko.server+"/ipfs/peers",e)}h();p();async function FB(r,e){return M0(r,jo.server+"/ipfs/peers",e)}h();p();h();p();h();p();function BB(r){return({rootDID:e})=>`${r}/user/link/${e}`}h();p();var RB=async(r,e,t)=>{let{username:n,handleMessage:i}=t,o=await bX(r,n);if(!o)throw new Error(`Failed to lookup DID for ${n}`);let a=`deviceLink#${o}`;console.log("Opening channel",a);let c=new WebSocket(e({rootDID:o}));await vX(c),c.onmessage=i;let f=xX(c),d=_X(c);return{send:f,close:d}},bX=async(r,e)=>{let t=await r.didRoot.lookup(e).catch(()=>(console.warn("Could not fetch root DID. Retrying."),null));return t||new Promise((n,i)=>{let a=0,c=setInterval(async()=>{if(t=await r.didRoot.lookup(e).catch(()=>(console.warn("Could not fetch root DID. Retrying."),null)),!t&&a<10){a++;return}else!t&&a===10&&i("Failed to fetch root DID.");clearInterval(c),n(t)},1e3)})},vX=async r=>new Promise((e,t)=>{r.onopen=()=>e(),r.onerror=()=>t("Websocket channel could not be opened")}),_X=r=>function(){r&&r.close(1e3)},xX=r=>function(e){let t=typeof e=="string"?new TextEncoder().encode(e).buffer:e;r?.send(t)};h();p();h();p();var OB=["fission","ipfs","ipns","did","id","identity",".htaccess","htaccess",".htpasswd","htpasswd",".well-known","well-known","400","401","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","421","422","423","424","426","428","429","431","500","501","502","503","504","505","506","507","508","509","510","511","_domainkey","about","about-us","abuse","access","account","accounts","ad","add","admin","administration","administrator","ads","ads.txt","advertise","advertising","aes128-ctr","aes128-gcm","aes192-ctr","aes256-ctr","aes256-gcm","affiliate","affiliates","ajax","alert","alerts","alpha","amp","analytics","api","app","app-ads.txt","apps","asc","assets","atom","auth","authentication","authorize","autoconfig","autodiscover","avatar","backup","banner","banners","bbs","beta","billing","billings","blog","blogs","board","bookmark","bookmarks","broadcasthost","business","buy","cache","calendar","campaign","captcha","careers","cart","cas","categories","category","cdn","cgi","cgi-bin","chacha20-poly1305","change","channel","channels","chart","chat","checkout","clear","client","close","cloud","cms","com","comment","comments","community","compare","compose","config","connect","contact","contest","cookies","copy","copyright","count","cp","cpanel","create","crossdomain.xml","css","curve25519-sha256","customer","customers","customize","dashboard","db","deals","debug","delete","desc","destroy","dev","developer","developers","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha1","disconnect","discuss","dns","dns0","dns1","dns2","dns3","dns4","docs","documentation","domain","download","downloads","downvote","draft","drop","ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","edit","editor","email","enterprise","error","errors","event","events","example","exception","exit","explore","export","extensions","false","family","faq","faqs","favicon.ico","features","feed","feedback","feeds","file","files","filter","follow","follower","followers","following","fonts","forgot","forgot-password","forgotpassword","form","forms","forum","forums","friend","friends","ftp","get","git","go","graphql","group","groups","guest","guidelines","guides","head","header","help","hide","hmac-sha","hmac-sha1","hmac-sha1-etm","hmac-sha2-256","hmac-sha2-256-etm","hmac-sha2-512","hmac-sha2-512-etm","home","host","hosting","hostmaster","htpasswd","http","httpd","https","humans.txt","icons","images","imap","img","import","index","info","insert","investors","invitations","invite","invites","invoice","is","isatap","issues","it","jobs","join","js","json","keybase.txt","learn","legal","license","licensing","like","limit","live","load","local","localdomain","localhost","lock","login","logout","lost-password","m","mail","mail0","mail1","mail2","mail3","mail4","mail5","mail6","mail7","mail8","mail9","mailer-daemon","mailerdaemon","map","marketing","marketplace","master","me","media","member","members","message","messages","metrics","mis","mobile","moderator","modify","more","mx","mx1","my","net","network","new","news","newsletter","newsletters","next","nil","no-reply","nobody","noc","none","noreply","notification","notifications","ns","ns0","ns1","ns2","ns3","ns4","ns5","ns6","ns7","ns8","ns9","null","oauth","oauth2","offer","offers","online","openid","order","orders","overview","owa","owner","page","pages","partners","passwd","password","pay","payment","payments","photo","photos","pixel","plans","plugins","policies","policy","pop","pop3","popular","portal","portfolio","post","postfix","postmaster","poweruser","preferences","premium","press","previous","pricing","print","privacy","privacy-policy","private","prod","product","production","profile","profiles","project","projects","public","purchase","put","quota","recover","recovery","redirect","reduce","refund","refunds","register","registration","remove","replies","reply","report","request","request-password","reset","reset-password","response","return","returns","review","reviews","robots.txt","root","rootuser","rsa-sha2-2","rsa-sha2-512","rss","rules","sales","save","script","sdk","search","secure","security","select","services","session","sessions","settings","setup","share","shift","shop","signin","signup","site","sitemap","sites","smtp","sort","source","sql","ssh","ssh-rsa","ssl","ssladmin","ssladministrator","sslwebmaster","stage","staging","stat","static","statistics","stats","status","store","style","styles","stylesheet","stylesheets","subdomain","subscribe","sudo","super","superuser","support","survey","sync","sysadmin","system","tablet","tag","tags","team","telnet","terms","terms-of-use","test","testimonials","theme","themes","today","tools","topic","topics","tour","training","translate","translations","trending","trial","true","umac-128","umac-128-etm","umac-64","umac-64-etm","undefined","unfollow","unlike","unsubscribe","update","upgrade","usenet","user","username","users","uucp","var","verify","video","view","void","vote","vpn","webmail","webmaster","website","widget","widgets","wiki","wpad","write","www","www-data","www1","www2","www3","www4","you","yourname","yourusername","zlib"];async function LB(r,e,t){let n=tn(await hn({audience:await vs(r),dependencies:e,issuer:await ar(e.crypto)}));return{success:(await fetch(ei(r,"/user"),{method:"PUT",headers:{authorization:`Bearer ${n}`,"content-type":"application/json"},body:JSON.stringify(t)})).status<300}}async function UB(r,e){return!(await fetch(ei(r,`/user/data/${e}`))).ok}function NB(r){return!r.startsWith("-")&&!r.endsWith("-")&&!r.startsWith("_")&&/^[a-zA-Z0-9_-]+$/.test(r)&&!OB.includes(r.toLowerCase())}function SX(r,e,t){return RB(e.reference,BB(`${r.server}${r.apiPath}`.replace(/^https?:\/\//,"wss://")),t)}var DX=async(r,e)=>UB(r,e),CX=async r=>NB(r),PX=async(r,e,t)=>{let{success:n}=await LB(r,e,t);return n?iv(e,{...t,type:Io}):{success:!1}};function lh(r,e){let t=Ym(e);return{type:t.type,canDelegateAccount:t.canDelegateAccount,delegateAccount:t.delegateAccount,linkDevice:t.linkDevice,session:t.session,isUsernameValid:CX,createChannel:(...n)=>SX(r,e,...n),isUsernameAvailable:(...n)=>DX(r,...n),register:(...n)=>PX(r,e,...n)}}function MB(r){return lh(Ko,r)}h();p();function KB(r){return lh(jo,r)}h();p();h();p();h();p();async function kX(r,e){let t=await r.reference.didRoot.lookup(e);return await Xb({crypto:r.crypto,accountDID:t})?rv(r,e):!1}async function FX(r,e,t){let n=await r.reference.didRoot.lookup(e),i=await Xb({crypto:r.crypto,accountDID:n}),{token:o}=await nv(r,e,t);return{readKey:Ge(i,"base64pad"),ucan:o}}async function BX(r,e,t){if(!OX(t))throw new jr(`Consumer received invalid link device response from producer: Expected read key and ucan, but got ${JSON.stringify(t)}`);let{readKey:n,ucan:i}=t,o=Xn(i);if(await ja(r.crypto,o)){await r.storage.setItem(r.storage.KEYS.ACCOUNT_UCAN,i),await jf({accountDID:await r.reference.didRoot.lookup(e),crypto:r.crypto,readKey:_8(n)});let a=await ar(r.crypto),c=await hn({dependencies:r,potency:"APPEND",resource:"*",proof:i,lifetimeInSeconds:60*60*24*30*12*1e3,audience:a,issuer:a});await r.reference.repositories.ucans.add(c)}else throw new jr(`Consumer received invalid link device response from producer. Given ucan is invalid: ${t.ucan}`);await nc(r.storage,{type:Io,username:e})}async function RX(r,e,t){if(e){if(!r.reference.repositories.ucans.find(o=>o.payload.exp<Date.now()+604800?!1:o.payload.ptc==="APPEND"&&o.payload.rsc==="*")){let o=await ar(r.crypto),a=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN),c=await hn({dependencies:r,potency:"APPEND",resource:"*",proof:a||void 0,lifetimeInSeconds:60*60*24*30*12*1e3,audience:o,issuer:o});await r.reference.repositories.ucans.add(c)}let i=t.fileSystem?.loadImmediately===!1?void 0:await kp({config:t,dependencies:{crypto:r.crypto,depot:r.depot,manners:r.manners,reference:r.reference,storage:r.storage},username:e});return new fs({crypto:r.crypto,fs:i,storage:r.storage,type:Io,username:e})}return null}function OX(r){return Ye(r)&&"readKey"in r&&typeof r.readKey=="string"&&"ucan"in r&&typeof r.ucan=="string"}function jB(r){let e=Ym(r);return{type:e.type,session:RX,canDelegateAccount:(...t)=>kX(r,...t),delegateAccount:(...t)=>FX(r,...t),linkDevice:(...t)=>BX(r,...t),createChannel:e.createChannel,isUsernameValid:e.isUsernameValid,isUsernameAvailable:e.isUsernameAvailable,register:e.register}}function K0(r,e){let t=lh(r,e),n=jB(e);return{type:n.type,canDelegateAccount:n.canDelegateAccount,delegateAccount:n.delegateAccount,linkDevice:n.linkDevice,session:n.session,createChannel:t.createChannel,isUsernameValid:t.isUsernameValid,isUsernameAvailable:t.isUsernameAvailable,register:t.register}}function RE(r){return K0(Ko,r)}h();p();function zB(r){return K0(jo,r)}h();p();h();p();async function MX(r,e){let t=new URL(self.location.href),n=t.searchParams.get("authorised");if(!n)return null;let i=t.searchParams.get("username")??"",o=await WB(async()=>zX(e,n==="via-postmessage"?await jX(r,e.crypto):JSON.parse(Ge(await e.depot.getUnixFile(Oe(n)),"utf8"))),{tries:20,timeout:6e4,timeoutMessage:"Trying to retrieve UCAN(s) and readKey(s) from the auth lobby timed out after 60 seconds."});if(!o)throw new Error("Failed to retrieve secrets from lobby url parameters");return t.searchParams.delete("authorised"),t.searchParams.delete("cancelled"),t.searchParams.delete("newUser"),t.searchParams.delete("username"),history.replaceState(null,document.title,t.toString()),{...o,username:i}}async function KX(r,e,t={}){let{permissions:n}=t,i=n?.app,o=n?.fs,a=n?.platform,c=n?.raw,f=n?.sharing,d=await za(e.crypto),m=await ar(e.crypto),w=!!document.body.querySelector("iframe#webnative-ipfs")&&typeof SharedWorker=="function",E=t.returnUrl||window.location.href,T=[["didExchange",d],["didWrite",m],["redirectTo",E],["sdk",Nf.toString()],["sharedRepo",w?"t":"f"],["sharing",f?"t":"f"]].concat(i?[["appFolder",`${i.creator}/${i.name}`]]:[],o?.private?o.private.map(F=>["privatePath",Cr(F,{absolute:!0})]):[],o?.public?o.public.map(F=>["publicPath",Cr(F,{absolute:!0})]):[],c?[["raw",Bb(JSON.stringify(c))]]:[],t.extraParams?Object.entries(t.extraParams):[]).concat((()=>{let F=a?.apps;switch(typeof F){case"string":return[["app",F]];case"object":return F.map(N=>["app",N]);default:return[]}})());window.location.href=r.lobby+"?"+T.map(([F,N])=>encodeURIComponent(F)+"="+encodeURIComponent(N)).join("&")}async function jX(r,e){let t=await za(e),n=await new Promise(i=>{let o=document.createElement("iframe");o.id="webnative-secret-exchange",o.style.width="0",o.style.height="0",o.style.border="none",o.style.display="none",document.body.appendChild(o),o.onload=()=>{i(o)},o.src=`${r.lobby}/exchange.html`});return new Promise((i,o)=>{function a(){globalThis.removeEventListener("message",c),document.body.removeChild(n),o()}function c(d){if(new URL(d.origin).host!==new URL(r.lobby).host||d.data==null)return a();let m;try{m=JSON.parse(d.data)}catch{a()}$X(m)||a(),globalThis.removeEventListener("message",c);try{document.body.removeChild(n)}catch{}i(m)}if(globalThis.addEventListener("message",c),n.contentWindow==null)throw new Error("Can't import UCANs & readKey(s): No access to its contentWindow");let f={webnative:"exchange-secrets",didExchange:t};n.contentWindow.postMessage(f,n.src)})}function $X(r){return Ye(r)&&Ht(r.sessionKey)&&Ht(r.secrets)&&Ht(r.iv)}function qB(r){return Ye(r)&&Ye(r.fs)&&Object.values(r.fs).every(e=>mt(e,"key")&&mt(e,"bareNameFilter"))&&Array.isArray(r.ucans)&&r.ucans.every(e=>Ht(e))}async function zX({crypto:r},e){let t=await r.keystore.decrypt(Te(e.sessionKey,"base64pad")),i=t[1]===0?Te(new TextDecoder("utf-16").decode(t),"base64pad"):t,o=await r.aes.decrypt(Te(e.secrets,"base64pad"),i,jt.AES_GCM,Te(e.iv,"base64pad")),a=JSON.parse(Ge(o,"utf8"));if(!qB(a))throw new Error("Invalid secrets received");let c=qB(a)?Object.entries(a.fs).map(([d,{bareNameFilter:m,key:w}])=>({bareNameFilter:m,path:Kh(d),readKey:Te(w,"base64pad")})):[],f=a.ucans.map(d=>Xn(d));return{fileSystemSecrets:c,ucans:f}}async function WB(r,e){return await Promise.race([r(),new Promise((t,n)=>e.tries>0?setTimeout(()=>WB(r,{...e,tries:e.tries-1}).then(t,n),e.timeout):setTimeout(()=>n(new Error(e.timeoutMessage)),e.timeout))])}function j0(r,e){return{collect:()=>MX(r,e),request:(...t)=>KX(r,e,...t)}}function OE(r){return j0(Ko,r)}h();p();function HB(r){return j0(jo,r)}h();p();h();p();h();p();h();p();function GB({storage:r}){return LE.create({storage:r,storageName:r.KEYS.CID_LOG})}var LE=class extends ec{constructor(e){super(e)}fromJSON(e){return Oe(e)}toJSON(e){return e.toString()}newest(){return this.memoryCache[this.memoryCache.length-1]}};async function HX(r,e){let t=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN);return t?$a(t):await ar(r.crypto)}async function YB(r){return{dataRoot:{domain:()=>{throw new Error("Not implemented")},lookup:()=>{throw new Error("Not implemented")},update:()=>{throw new Error("Not implemented")}},didRoot:{lookup:(...e)=>HX(r,...e)},dns:{lookupDnsLink:ng,lookupTxtRecord:kc},repositories:{cidLog:await GB({storage:r.storage}),ucans:await m8({storage:r.storage})}}}h();p();async function JB(r,e,t){let n=await YX(r,e,t);if(!n)return null;if(n!==null)return n;try{let i=await ng(t+".files."+r.userDomain);return i?Oe(i):null}catch(i){throw console.error(i),new Error("Could not locate user root in DNS")}}async function YX(r,e,t){try{let i=await(await fetch(ei(r,`user/data/${t}`),{cache:"reload"})).json();return Oe(i)}catch(n){return e.manners.log("Could not locate user root on Fission server: ",mt(n,"toString")?n.toString():n),null}}async function XB(r,e,t,n){let i=t.toString();return e.manners.log("\u{1F30A} Updating your DNSLink:",i),await QB(ei(r,`user/data/${i}`),{headers:async()=>({authorization:`Bearer ${tn(await hn({dependencies:e,audience:await vs(r),issuer:await ar(e.crypto),potency:"APPEND",proof:tn(n),resource:n.payload.rsc}))}`}),retries:100,retryDelay:5e3,retryOn:[502,503,504]},{method:"PUT"}).then(o=>(o.status<300?e.manners.log("\u{1FAB4} DNSLink updated:",i):e.manners.log("\u{1F525} Failed to update DNSLink for:",i),{success:o.status<300})).catch(o=>(e.manners.log("\u{1F525} Failed to update DNSLink for:",i),console.error(o),{success:!1}))}async function QB(r,e,t,n=0){let i=await e.headers(),o=await fetch(r,{...t,headers:{...t.headers,...i}});if(e.retryOn.includes(o.status)){if(n<e.retries)return await new Promise((a,c)=>setTimeout(()=>QB(r,e,t,n+1).then(a,c),e.retryDelay));throw new Error("Too many retries for fetch")}return o}h();p();async function ZB(r,e){try{let t=await kc(`_did.${e}.${r.userDomain}`);if(t!==null)return t}catch{}throw new Error("Could not locate user DID in DNS.")}async function $0(r,e){let t=await YB(e);return t.dataRoot.domain=n=>`${n}.files.${r.userDomain}`,t.dataRoot.lookup=(...n)=>JB(r,e,...n),t.dataRoot.update=(...n)=>XB(r,e,...n),t.didRoot.lookup=(...n)=>ZB(r,...n),t}function UE(r){return $0(Ko,r)}h();p();function tR(r){return $0(jo,r)}h();p();function rR(r){return{log:r.configuration.debug?console.log:()=>{},warn:r.configuration.debug?console.warn:()=>{},wnfsWasmLookup:e=>fetch(`https://unpkg.com/wnfs@${e}/wasm_wnfs_bg.wasm`),fileSystem:{hooks:{afterLoadExisting:async()=>{},afterLoadNew:async e=>{await e.publish()},beforeLoadExisting:async()=>{},beforeLoadNew:async()=>{}}}}}h();p();h();p();var nR={};h();p();var iR={};h();p();var oR={};h();p();var sR={};h();p();var aR={};h();p();var uR={};h();p();var NE={};xt(NE,{create:()=>rQ,deleteByDomain:()=>nQ,index:()=>tQ,publish:()=>iQ});h();p();async function tQ(r,e){let t=await e.reference.repositories.ucans.lookupAppUcan("*");if(t===null)throw"Could not find your local UCAN";let n=tn(await hn({dependencies:e,audience:await vs(r),issuer:await ar(e.crypto),proof:t,potency:null})),o=await(await fetch(ei(r,"/app"),{method:"GET",headers:{authorization:`Bearer ${n}`}})).json();return Object.values(o).filter(a=>a.urls.length>0).map(({urls:a,insertedAt:c,modifiedAt:f})=>({domains:a,insertedAt:c,modifiedAt:f}))}async function rQ(r,e,t){let n=await e.reference.repositories.ucans.lookupAppUcan("*");if(n===null)throw"Could not find your local UCAN";let i=tn(await hn({dependencies:e,audience:await vs(r),issuer:await ar(e.crypto),proof:n,potency:null})),o=Ht(t)?ei(r,`/app?subdomain=${encodeURIComponent(t)}`):ei(r,"/app"),c=await(await fetch(o,{method:"POST",headers:{authorization:`Bearer ${i}`}})).json(),f=new Date().toISOString();return{domains:[c],insertedAt:f,modifiedAt:f}}async function nQ(r,e,t){let n=await e.reference.repositories.ucans.lookupAppUcan(t);if(n===null)throw new Error("Could not find your local UCAN");let i=tn(await hn({dependencies:e,audience:await vs(r),issuer:await ar(e.crypto),proof:n,potency:null})),a=await(await fetch(ei(r,"/app"),{method:"GET",headers:{authorization:`Bearer ${i}`}})).json(),c=Object.entries(a).find(([f,d])=>d.urls.includes(t));if(c==null)throw new Error(`Couldn't find an app with domain ${t}`);await fetch(ei(r,`/app/${encodeURIComponent(c[0])}`),{method:"DELETE",headers:{authorization:`Bearer ${i}`}})}async function iQ(r,e,t,n){let i=await e.reference.repositories.ucans.lookupAppUcan(t);if(i===null)throw"Could not find your local UCAN";let o=tn(await hn({dependencies:e,audience:await vs(r),issuer:await ar(e.crypto),proof:i,potency:null})),a=ei(r,`/app/${t}/${n}`);await fetch(a,{method:"PUT",headers:{authorization:`Bearer ${o}`}})}var fR=(t=>(t.InsecureContext="INSECURE_CONTEXT",t.UnsupportedBrowser="UNSUPPORTED_BROWSER",t))(fR||{});async function oQ(r){if(!r)throw new Error("Expected a settings object of the type `Partial<Components> & Configuration` as the first parameter");if(globalThis.isSecureContext===!1)throw"INSECURE_CONTEXT";if(await bR()===!1)throw"UNSUPPORTED_BROWSER";let e=await yR(r);return mR($E(r),e)}var lR={async fissionWebCrypto(r){let{disableWnfs:e,staging:t}=r,n=r.manners||Nd(r),i=r.crypto||await ph(r),o=r.storage||pf(r),a=r.reference||await jE({crypto:i,manners:n,storage:o});return e?t?KB({crypto:i,reference:a,storage:o}):MB({crypto:i,reference:a,storage:o}):t?zB({crypto:i,reference:a,storage:o}):RE({crypto:i,reference:a,storage:o})}},hR={async fissionLobby(r){let{staging:e}=r,t=r.storage||pf(r),n=r.crypto||await ph(r),i=r.depot||await KE({storage:t},r);return e?HB({crypto:n,depot:i}):OE({crypto:n,depot:i})}},pR={async fissionIPFS(r){let e=`${Vf(r)}/ipfs`,t=r.storage||pf(r);return r.staging?FB({storage:t},e):FE({storage:t},e)}},dR={async fission(r){let{staging:e}=r,t=r.manners||Nd(r),n=r.crypto||await ph(r),i=r.storage||pf(r);return e?tR({crypto:n,manners:t,storage:i}):UE({crypto:n,manners:t,storage:i})}};async function mR(r,e){let t=r.permissions;await aQ(e,r);let n=await ev(e.storage),i=(f=>({implementation:f,accountConsumer(d){return ov({auth:f,crypto:e.crypto,manners:e.manners},{username:d})},accountProducer(d){return sv({auth:f,crypto:e.crypto,manners:e.manners},{username:d})},isUsernameAvailable:f.isUsernameAvailable,isUsernameValid:f.isUsernameValid,register:f.register,async session(){let d=await ev(e.storage);return d?this.implementation.session(e,d.username,r):null}}))(e.auth),o={async collect(){let f=await e.capabilities.collect();return f?(await w8({capabilities:f,crypto:e.crypto,reference:e.reference,storage:e.storage}),f.username):null},request(f){return e.capabilities.request({permissions:t,...f||{}})},async session(f){if(!b8(e.reference.repositories.ucans,t||{}))return console.warn("The present UCANs did not satisfy the configured permissions."),null;let m=await e.reference.didRoot.lookup(f);if(!await v8(e.crypto,m,t||{}))return console.warn("The present filesystem secrets did not satisfy the configured permissions."),null;await nc(e.storage,{type:Kf,username:f});let E=r.fileSystem?.loadImmediately===!1?void 0:await kp({config:r,dependencies:e,username:f});return new fs({fs:E,username:f,crypto:e.crypto,storage:e.storage,type:Kf})}},a=null;if(zE(r)){let f=await o.collect();f&&(a=await o.session(f)),n&&n.type===Kf&&(a=await o.session(n.username))}else n&&n.type!==Kf&&(a=await i.session());return{...{loadFileSystem:f=>kp({config:r,username:f,dependencies:e}),agentDID:()=>ar(e.crypto),sharingDID:()=>za(e.crypto)},configuration:{...r},auth:i,components:e,capabilities:o,session:a}}var sQ={async fission(r){let e=r.crypto||await ph(r),t=r.manners||Nd(r),n=r.storage||pf(r),i={...r,crypto:e,manners:t,storage:n},o=await dR.fission(i),a=await pR.fissionIPFS(i),c=await hR.fissionLobby({...i,depot:a});return{auth:await lR.fissionWebCrypto({...i,reference:o}),capabilities:c,depot:a,reference:o,crypto:e,manners:t,storage:n}}};async function yR(r){let e=$E(r),t=r.crypto||await ph(e),n=r.manners||Nd(e),i=r.storage||pf(e),o=r.reference||await jE({crypto:t,manners:n,storage:i}),a=r.depot||await KE({storage:i},e),c=r.capabilities||wR({crypto:t,depot:a});return{auth:r.auth||gR({crypto:t,reference:o,storage:i}),capabilities:c,crypto:t,depot:a,manners:n,reference:o,storage:i}}function gR({crypto:r,reference:e,storage:t}){return RE({crypto:r,reference:e,storage:t})}function wR({crypto:r,depot:e}){return OE({crypto:r,depot:e})}function ph(r){return qI({storeName:Vf(r),exchangeKeyName:"exchange-key",writeKeyName:"write-key"})}function KE({storage:r},e){return FE({storage:r},`${Vf(e)}/ipfs`)}function Nd(r){return rR({configuration:r})}function jE({crypto:r,manners:e,storage:t}){return UE({crypto:r,manners:e,storage:t})}function pf(r){return HI({name:Vf(r)})}async function bR(){return ME.default.supports(ME.default.INDEXEDDB)&&await(()=>new Promise(r=>{let e=indexedDB.open("testDatabase");e.onsuccess=()=>r(!0),e.onerror=()=>r(!1)}))()}async function aQ(r,e){let[t,n]=["migrated",Nf],i=tc(Nf);if(!i)throw new Error("The webnative VERSION should be a semver string");if(await r.storage.getItem(t).then(d=>typeof d=="string"?tc(d):null).then(d=>d&&A8(d,i))||!self.indexedDB)return;let a=self.indexedDB.databases?(await self.indexedDB.databases()).map(d=>d.name):["keystore","localforage"],c=a.includes("keystore")?await cR("keystore"):null;if(c){let d=await hh(c,"keyvaluepairs","exchange-key"),m=await hh(c,"keyvaluepairs","write-key");d&&m&&(await r.storage.setItem("exchange-key",d),await r.storage.setItem("write-key",m))}let f=a.includes("localforage")?await cR("localforage"):null;if(f){let d=await hh(f,"keyvaluepairs","ucan"),m=await hh(f,"keyvaluepairs","webnative.auth_ucans"),w=await hh(f,"keyvaluepairs","readKey"),E=await hh(f,"keyvaluepairs","webnative.auth_username");if(w&&Ht(w)){let T=d||(Array.isArray(m)?m[0]:void 0),F=T?$a(T):typeof E=="string"?await r.reference.didRoot.lookup(E):null;if(!F)throw new Error("Failed to retrieve account DID");await jf({accountDID:F,crypto:r.crypto,readKey:Te(w,"base64pad")})}d&&await r.storage.setItem(r.storage.KEYS.ACCOUNT_UCAN,d),E&&await r.storage.setItem(r.storage.KEYS.SESSION,JSON.stringify({type:zE(e)?Kf:Io,username:E}))}await r.storage.setItem(t,n)}function hh(r,e,t){return new Promise((n,i)=>{if(!r.objectStoreNames.contains(e))return n(null);let c=r.transaction([e],"readonly").objectStore(e).get(t);c.onerror=()=>{n(null)},c.onsuccess=()=>{n(c.result)}})}function cR(r){return new Promise((e,t)=>{let n=self.indexedDB.open(r);n.onerror=()=>{e(null)},n.onsuccess=()=>{e(n.result)},n.onupgradeneeded=i=>{n.transaction?.abort(),self.indexedDB.deleteDatabase(r)}})}function $E(r){return{namespace:r.namespace,debug:r.debug,fileSystem:r.fileSystem,permissions:r.permissions,userMessages:r.userMessages}}function zE(r){return!!r.permissions}return w5(uQ);})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
return webnative;
}));
//# sourceMappingURL=index.umd.min.js.map
