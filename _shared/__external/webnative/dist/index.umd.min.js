(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define([], factory);
    } else if (typeof module === 'object' && module.exports) {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like environments that support module.exports,
        // like Node.
        module.exports = factory();
    } else {
        // Browser globals (root is window)
        root.webnative = factory();
  }
}(typeof self !== 'undefined' ? self : this, function () {  
"use strict";var webnative=(()=>{var P5=Object.create;var Rh=Object.defineProperty;var S5=Object.getOwnPropertyDescriptor;var D5=Object.getOwnPropertyNames;var A5=Object.getPrototypeOf,C5=Object.prototype.hasOwnProperty;var I5=(r,e,t)=>e in r?Rh(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Gu=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var rb=(r,e)=>()=>(r&&(e=r(r=0)),e);var ue=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),xt=(r,e)=>{for(var t in e)Rh(r,t,{get:e[t],enumerable:!0})},rD=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of D5(e))!C5.call(r,i)&&i!==t&&Rh(r,i,{get:()=>e[i],enumerable:!(n=S5(e,i))||n.enumerable});return r};var Ze=(r,e,t)=>(t=r!=null?P5(A5(r)):{},rD(e||!r||!r.__esModule?Rh(t,"default",{value:r,enumerable:!0}):t,r)),T5=r=>rD(Rh({},"__esModule",{value:!0}),r);var nb=(r,e,t)=>(I5(r,typeof e!="symbol"?e+"":e,t),t),nD=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var os=(r,e,t)=>(nD(r,e,"read from private field"),t?t.call(r):e.get(r)),ib=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},ob=(r,e,t,n)=>(nD(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);function oD(){throw new Error("setTimeout has not been defined")}function sD(){throw new Error("clearTimeout has not been defined")}function aD(r){if(Na===setTimeout)return setTimeout(r,0);if((Na===oD||!Na)&&setTimeout)return Na=setTimeout,setTimeout(r,0);try{return Na(r,0)}catch{try{return Na.call(null,r,0)}catch{return Na.call(this,r,0)}}}function k5(r){if(Ua===clearTimeout)return clearTimeout(r);if((Ua===sD||!Ua)&&clearTimeout)return Ua=clearTimeout,clearTimeout(r);try{return Ua(r)}catch{try{return Ua.call(null,r)}catch{return Ua.call(this,r)}}}function F5(){!kf||!Yu||(kf=!1,Yu.length?qs=Yu.concat(qs):Cm=-1,qs.length&&uD())}function uD(){if(!kf){var r=aD(F5);kf=!0;for(var e=qs.length;e;){for(Yu=qs,qs=[];++Cm<e;)Yu&&Yu[Cm].run();Cm=-1,e=qs.length}Yu=null,kf=!1,k5(r)}}function R5(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];qs.push(new cD(r,e)),qs.length===1&&!kf&&aD(uD)}function cD(r,e){this.fun=r,this.array=e}function Ju(){}function J5(r){throw new Error("process.binding is not supported")}function X5(){return"/"}function Q5(r){throw new Error("process.chdir is not supported")}function Z5(){return 0}function t7(r){var e=e7.call(Tf)*.001,t=Math.floor(e),n=Math.floor(e%1*1e9);return r&&(t=t-r[0],n=n-r[1],n<0&&(t--,n+=1e9)),[t,n]}function n7(){var r=new Date,e=r-r7;return e/1e3}var Na,Ua,qs,kf,Yu,Cm,B5,O5,L5,N5,U5,M5,K5,j5,$5,z5,q5,W5,V5,H5,G5,Y5,Tf,e7,r7,process,iD,h=rb(()=>{Na=oD,Ua=sD;typeof globalThis.setTimeout=="function"&&(Na=setTimeout);typeof globalThis.clearTimeout=="function"&&(Ua=clearTimeout);qs=[],kf=!1,Cm=-1;cD.prototype.run=function(){this.fun.apply(null,this.array)};B5="browser",O5="browser",L5=!0,N5={},U5=[],M5="",K5={},j5={},$5={};z5=Ju,q5=Ju,W5=Ju,V5=Ju,H5=Ju,G5=Ju,Y5=Ju;Tf=globalThis.performance||{},e7=Tf.now||Tf.mozNow||Tf.msNow||Tf.oNow||Tf.webkitNow||function(){return new Date().getTime()};r7=new Date;process={nextTick:R5,title:B5,browser:L5,env:N5,argv:U5,version:M5,versions:K5,on:z5,addListener:q5,once:W5,off:V5,removeListener:H5,removeAllListeners:G5,emit:Y5,binding:J5,cwd:X5,chdir:Q5,umask:Z5,hrtime:t7,platform:O5,release:j5,config:$5,uptime:n7},iD={};Object.keys(iD).forEach(r=>{let e=r.split("."),t=process;for(let n=0;n<e.length;n++){let i=e[n];n===e.length-1?t[i]=iD[r]:t=t[i]||(t[i]={})}})});function pD(){ab=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)ss[e]=r[e],Xi[r.charCodeAt(e)]=e;Xi["-".charCodeAt(0)]=62,Xi["_".charCodeAt(0)]=63}function o7(r){ab||pD();var e,t,n,i,o,a,c=r.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[c-2]==="="?2:r[c-1]==="="?1:0,a=new i7(c*3/4-o),n=o>0?c-4:c;var f=0;for(e=0,t=0;e<n;e+=4,t+=3)i=Xi[r.charCodeAt(e)]<<18|Xi[r.charCodeAt(e+1)]<<12|Xi[r.charCodeAt(e+2)]<<6|Xi[r.charCodeAt(e+3)],a[f++]=i>>16&255,a[f++]=i>>8&255,a[f++]=i&255;return o===2?(i=Xi[r.charCodeAt(e)]<<2|Xi[r.charCodeAt(e+1)]>>4,a[f++]=i&255):o===1&&(i=Xi[r.charCodeAt(e)]<<10|Xi[r.charCodeAt(e+1)]<<4|Xi[r.charCodeAt(e+2)]>>2,a[f++]=i>>8&255,a[f++]=i&255),a}function s7(r){return ss[r>>18&63]+ss[r>>12&63]+ss[r>>6&63]+ss[r&63]}function a7(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(s7(n));return i.join("")}function fD(r){ab||pD();for(var e,t=r.length,n=t%3,i="",o=[],a=16383,c=0,f=t-n;c<f;c+=a)o.push(a7(r,c,c+a>f?f:c+a));return n===1?(e=r[t-1],i+=ss[e>>2],i+=ss[e<<4&63],i+="=="):n===2&&(e=(r[t-2]<<8)+r[t-1],i+=ss[e>>10],i+=ss[e>>4&63],i+=ss[e<<2&63],i+="="),o.push(i),o.join("")}function Im(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ws(r,e){if(Im()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=Buffer.prototype):(r===null&&(r=new Buffer(e)),r.length=e),r}function Buffer(r,e,t){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return ub(this,r)}return dD(this,r,e,t)}function dD(r,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?f7(r,e,t,n):typeof e=="string"?c7(r,e,t):l7(r,e)}function mD(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function u7(r,e,t,n){return mD(e),e<=0?Ws(r,e):t!==void 0?typeof n=="string"?Ws(r,e).fill(t,n):Ws(r,e).fill(t):Ws(r,e)}function ub(r,e){if(mD(e),r=Ws(r,e<0?0:cb(e)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}function c7(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=yD(e,t)|0;r=Ws(r,n);var i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function sb(r,e){var t=e.length<0?0:cb(e.length)|0;r=Ws(r,t);for(var n=0;n<t;n+=1)r[n]=e[n]&255;return r}function f7(r,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),Buffer.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=Buffer.prototype):r=sb(r,e),r}function l7(r,e){if(as(e)){var t=cb(e.length)|0;return r=Ws(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||T7(e.length)?Ws(r,0):sb(r,e);if(e.type==="Buffer"&&Array.isArray(e.data))return sb(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function cb(r){if(r>=Im())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Im().toString(16)+" bytes");return r|0}function as(r){return!!(r!=null&&r._isBuffer)}function yD(r,e){if(as(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Tm(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return ED(r).length;default:if(n)return Tm(r).length;e=(""+e).toLowerCase(),n=!0}}function h7(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return x7(this,e,t);case"utf8":case"utf-8":return bD(this,e,t);case"ascii":return v7(this,e,t);case"latin1":case"binary":return _7(this,e,t);case"base64":return w7(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E7(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}function Xu(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}function gD(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=Buffer.from(e,n)),as(e))return e.length===0?-1:lD(r,e,t,n,i);if(typeof e=="number")return e=e&255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):lD(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function lD(r,e,t,n,i){var o=1,a=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,c/=2,t/=2}function f(T,F){return o===1?T[F]:T.readUInt16BE(F*o)}var d;if(i){var m=-1;for(d=t;d<a;d++)if(f(r,d)===f(e,m===-1?0:d-m)){if(m===-1&&(m=d),d-m+1===c)return m*o}else m!==-1&&(d-=d-m),m=-1}else for(t+c>a&&(t=a-c),d=t;d>=0;d--){for(var w=!0,E=0;E<c;E++)if(f(r,d+E)!==f(e,E)){w=!1;break}if(w)return d}return-1}function p7(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var c=parseInt(e.substr(a*2,2),16);if(isNaN(c))return a;r[t+a]=c}return a}function d7(r,e,t,n){return Rm(Tm(e,r.length-t),r,t,n)}function wD(r,e,t,n){return Rm(C7(e),r,t,n)}function m7(r,e,t,n){return wD(r,e,t,n)}function y7(r,e,t,n){return Rm(ED(e),r,t,n)}function g7(r,e,t,n){return Rm(I7(e,r.length-t),r,t,n)}function w7(r,e,t){return e===0&&t===r.length?fD(r):fD(r.slice(e,t))}function bD(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var o=r[i],a=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){var f,d,m,w;switch(c){case 1:o<128&&(a=o);break;case 2:f=r[i+1],(f&192)===128&&(w=(o&31)<<6|f&63,w>127&&(a=w));break;case 3:f=r[i+1],d=r[i+2],(f&192)===128&&(d&192)===128&&(w=(o&15)<<12|(f&63)<<6|d&63,w>2047&&(w<55296||w>57343)&&(a=w));break;case 4:f=r[i+1],d=r[i+2],m=r[i+3],(f&192)===128&&(d&192)===128&&(m&192)===128&&(w=(o&15)<<18|(f&63)<<12|(d&63)<<6|m&63,w>65535&&w<1114112&&(a=w))}}a===null?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=c}return b7(n)}function b7(r){var e=r.length;if(e<=hD)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=hD));return t}function v7(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function _7(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function x7(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",o=e;o<t;++o)i+=A7(r[o]);return i}function E7(r,e,t){for(var n=r.slice(e,t),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}function tn(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}function Yn(r,e,t,n,i,o){if(!as(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}function km(r,e,t,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(r.length-t,2);i<o;++i)r[t+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}function Fm(r,e,t,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(r.length-t,4);i<o;++i)r[t+i]=e>>>(n?i:3-i)*8&255}function vD(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function _D(r,e,t,n,i){return i||vD(r,e,t,4,34028234663852886e22,-34028234663852886e22),SD(r,e,t,n,23,4),t+4}function xD(r,e,t,n,i){return i||vD(r,e,t,8,17976931348623157e292,-17976931348623157e292),SD(r,e,t,n,52,8),t+8}function S7(r){if(r=D7(r).replace(P7,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function D7(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function A7(r){return r<16?"0"+r.toString(16):r.toString(16)}function Tm(r,e){e=e||1/0;for(var t,n=r.length,i=null,o=[],a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function C7(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function I7(r,e){for(var t,n,i,o=[],a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function ED(r){return o7(S7(r))}function Rm(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function T7(r){return r!==r}function k7(r){return r!=null&&(!!r._isBuffer||PD(r)||F7(r))}function PD(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function F7(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&PD(r.slice(0,0))}function Bm(r,e,t,n,i){var o,a,c=i*8-n-1,f=(1<<c)-1,d=f>>1,m=-7,w=t?i-1:0,E=t?-1:1,T=r[e+w];for(w+=E,o=T&(1<<-m)-1,T>>=-m,m+=c;m>0;o=o*256+r[e+w],w+=E,m-=8);for(a=o&(1<<-m)-1,o>>=-m,m+=n;m>0;a=a*256+r[e+w],w+=E,m-=8);if(o===0)o=1-d;else{if(o===f)return a?NaN:(T?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-d}return(T?-1:1)*a*Math.pow(2,o-n)}function SD(r,e,t,n,i,o){var a,c,f,d=o*8-i-1,m=(1<<d)-1,w=m>>1,E=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=n?0:o-1,F=n?1:-1,U=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=m):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+w>=1?e+=E/f:e+=E*Math.pow(2,1-w),e*f>=2&&(a++,f/=2),a+w>=m?(c=0,a=m):a+w>=1?(c=(e*f-1)*Math.pow(2,i),a=a+w):(c=e*Math.pow(2,w-1)*Math.pow(2,i),a=0));i>=8;r[t+T]=c&255,T+=F,c/=256,i-=8);for(a=a<<i|c,d+=i;d>0;r[t+T]=a&255,T+=F,a/=256,d-=8);r[t+T-F]|=U*128}var ss,Xi,i7,ab,hD,P7,DD=rb(()=>{h();p();ss=[],Xi=[],i7=typeof Uint8Array<"u"?Uint8Array:Array,ab=!1;Buffer.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;Buffer.poolSize=8192;Buffer._augment=function(r){return r.__proto__=Buffer.prototype,r};Buffer.from=function(r,e,t){return dD(null,r,e,t)};Buffer.kMaxLength=Im();Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer[Symbol.species]);Buffer.alloc=function(r,e,t){return u7(null,r,e,t)};Buffer.allocUnsafe=function(r){return ub(null,r)};Buffer.allocUnsafeSlow=function(r){return ub(null,r)};Buffer.isBuffer=k7;Buffer.compare=function(e,t){if(!as(e)||!as(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Buffer.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=Buffer.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!as(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};Buffer.byteLength=yD;Buffer.prototype._isBuffer=!0;Buffer.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Xu(this,t,t+1);return this};Buffer.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Xu(this,t,t+3),Xu(this,t+1,t+2);return this};Buffer.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Xu(this,t,t+7),Xu(this,t+1,t+6),Xu(this,t+2,t+5),Xu(this,t+3,t+4);return this};Buffer.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?bD(this,0,e):h7.apply(this,arguments)};Buffer.prototype.equals=function(e){if(!as(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Buffer.compare(this,e)===0};Buffer.prototype.compare=function(e,t,n,i,o){if(!as(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var a=o-i,c=n-t,f=Math.min(a,c),d=this.slice(i,o),m=e.slice(t,n),w=0;w<f;++w)if(d[w]!==m[w]){a=d[w],c=m[w];break}return a<c?-1:c<a?1:0};Buffer.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};Buffer.prototype.indexOf=function(e,t,n){return gD(this,e,t,n,!0)};Buffer.prototype.lastIndexOf=function(e,t,n){return gD(this,e,t,n,!1)};Buffer.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return p7(this,e,t,n);case"utf8":case"utf-8":return d7(this,e,t,n);case"ascii":return wD(this,e,t,n);case"latin1":case"binary":return m7(this,e,t,n);case"base64":return y7(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g7(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};hD=4096;Buffer.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i;if(Buffer.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=Buffer.prototype;else{var o=t-e;i=new Buffer(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+e]}return i};Buffer.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||tn(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return i};Buffer.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||tn(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i};Buffer.prototype.readUInt8=function(e,t){return t||tn(e,1,this.length),this[e]};Buffer.prototype.readUInt16LE=function(e,t){return t||tn(e,2,this.length),this[e]|this[e+1]<<8};Buffer.prototype.readUInt16BE=function(e,t){return t||tn(e,2,this.length),this[e]<<8|this[e+1]};Buffer.prototype.readUInt32LE=function(e,t){return t||tn(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Buffer.prototype.readUInt32BE=function(e,t){return t||tn(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Buffer.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||tn(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};Buffer.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||tn(e,t,this.length);for(var i=t,o=1,a=this[e+--i];i>0&&(o*=256);)a+=this[e+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};Buffer.prototype.readInt8=function(e,t){return t||tn(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Buffer.prototype.readInt16LE=function(e,t){t||tn(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Buffer.prototype.readInt16BE=function(e,t){t||tn(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Buffer.prototype.readInt32LE=function(e,t){return t||tn(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Buffer.prototype.readInt32BE=function(e,t){return t||tn(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Buffer.prototype.readFloatLE=function(e,t){return t||tn(e,4,this.length),Bm(this,e,!0,23,4)};Buffer.prototype.readFloatBE=function(e,t){return t||tn(e,4,this.length),Bm(this,e,!1,23,4)};Buffer.prototype.readDoubleLE=function(e,t){return t||tn(e,8,this.length),Bm(this,e,!0,52,8)};Buffer.prototype.readDoubleBE=function(e,t){return t||tn(e,8,this.length),Bm(this,e,!1,52,8)};Buffer.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;Yn(this,e,t,n,o,0)}var a=1,c=0;for(this[t]=e&255;++c<n&&(a*=256);)this[t+c]=e/a&255;return t+n};Buffer.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;Yn(this,e,t,n,o,0)}var a=n-1,c=1;for(this[t+a]=e&255;--a>=0&&(c*=256);)this[t+a]=e/c&255;return t+n};Buffer.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};Buffer.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):km(this,e,t,!0),t+2};Buffer.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):km(this,e,t,!1),t+2};Buffer.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Fm(this,e,t,!0),t+4};Buffer.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Fm(this,e,t,!1),t+4};Buffer.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t|0,!i){var o=Math.pow(2,8*n-1);Yn(this,e,t,n,o-1,-o)}var a=0,c=1,f=0;for(this[t]=e&255;++a<n&&(c*=256);)e<0&&f===0&&this[t+a-1]!==0&&(f=1),this[t+a]=(e/c>>0)-f&255;return t+n};Buffer.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t|0,!i){var o=Math.pow(2,8*n-1);Yn(this,e,t,n,o-1,-o)}var a=n-1,c=1,f=0;for(this[t+a]=e&255;--a>=0&&(c*=256);)e<0&&f===0&&this[t+a+1]!==0&&(f=1),this[t+a]=(e/c>>0)-f&255;return t+n};Buffer.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};Buffer.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):km(this,e,t,!0),t+2};Buffer.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):km(this,e,t,!1),t+2};Buffer.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Fm(this,e,t,!0),t+4};Buffer.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||Yn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Fm(this,e,t,!1),t+4};Buffer.prototype.writeFloatLE=function(e,t,n){return _D(this,e,t,!0,n)};Buffer.prototype.writeFloatBE=function(e,t,n){return _D(this,e,t,!1,n)};Buffer.prototype.writeDoubleLE=function(e,t,n){return xD(this,e,t,!0,n)};Buffer.prototype.writeDoubleBE=function(e,t,n){return xD(this,e,t,!1,n)};Buffer.prototype.copy=function(e,t,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n,a;if(this===e&&n<t&&t<i)for(a=o-1;a>=0;--a)e[a+t]=this[a+n];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o};Buffer.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!Buffer.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var a;if(typeof e=="number")for(a=t;a<n;++a)this[a]=e;else{var c=as(e)?e:Tm(new Buffer(e,i).toString()),f=c.length;for(a=0;a<n-t;++a)this[a+t]=c[a%f]}return this};P7=/[^+\/0-9A-Za-z-_]/g});var p=rb(()=>{DD()});var Mm=ue((HD,kb)=>{h();p();(function(r){if(typeof HD=="object"&&typeof kb<"u")kb.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var e;typeof window<"u"?e=window:typeof globalThis<"u"?e=globalThis:typeof self<"u"?e=self:e=this,e.localforage=r()}})(function(){var r,e,t;return function n(i,o,a){function c(m,w){if(!o[m]){if(!i[m]){var E=typeof Gu=="function"&&Gu;if(!w&&E)return E(m,!0);if(f)return f(m,!0);var T=new Error("Cannot find module '"+m+"'");throw T.code="MODULE_NOT_FOUND",T}var F=o[m]={exports:{}};i[m][0].call(F.exports,function(U){var pe=i[m][1][U];return c(pe||U)},F,F.exports,n,i,o,a)}return o[m].exports}for(var f=typeof Gu=="function"&&Gu,d=0;d<a.length;d++)c(a[d]);return c}({1:[function(n,i,o){(function(a){"use strict";var c=a.MutationObserver||a.WebKitMutationObserver,f;if(c){var d=0,m=new c(U),w=a.document.createTextNode("");m.observe(w,{characterData:!0}),f=function(){w.data=d=++d%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var E=new a.MessageChannel;E.port1.onmessage=U,f=function(){E.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?f=function(){var he=a.document.createElement("script");he.onreadystatechange=function(){U(),he.onreadystatechange=null,he.parentNode.removeChild(he),he=null},a.document.documentElement.appendChild(he)}:f=function(){setTimeout(U,0)};var T,F=[];function U(){T=!0;for(var he,De,re=F.length;re;){for(De=F,F=[],he=-1;++he<re;)De[he]();re=F.length}T=!1}i.exports=pe;function pe(he){F.push(he)===1&&!T&&f()}}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,i,o){"use strict";var a=n(1);function c(){}var f={},d=["REJECTED"],m=["FULFILLED"],w=["PENDING"];i.exports=E;function E(Y){if(typeof Y!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,Y!==c&&pe(this,Y)}E.prototype.catch=function(Y){return this.then(null,Y)},E.prototype.then=function(Y,ge){if(typeof Y!="function"&&this.state===m||typeof ge!="function"&&this.state===d)return this;var _e=new this.constructor(c);if(this.state!==w){var Me=this.state===m?Y:ge;F(_e,Me,this.outcome)}else this.queue.push(new T(_e,Y,ge));return _e};function T(Y,ge,_e){this.promise=Y,typeof ge=="function"&&(this.onFulfilled=ge,this.callFulfilled=this.otherCallFulfilled),typeof _e=="function"&&(this.onRejected=_e,this.callRejected=this.otherCallRejected)}T.prototype.callFulfilled=function(Y){f.resolve(this.promise,Y)},T.prototype.otherCallFulfilled=function(Y){F(this.promise,this.onFulfilled,Y)},T.prototype.callRejected=function(Y){f.reject(this.promise,Y)},T.prototype.otherCallRejected=function(Y){F(this.promise,this.onRejected,Y)};function F(Y,ge,_e){a(function(){var Me;try{Me=ge(_e)}catch(vt){return f.reject(Y,vt)}Me===Y?f.reject(Y,new TypeError("Cannot resolve promise with itself")):f.resolve(Y,Me)})}f.resolve=function(Y,ge){var _e=he(U,ge);if(_e.status==="error")return f.reject(Y,_e.value);var Me=_e.value;if(Me)pe(Y,Me);else{Y.state=m,Y.outcome=ge;for(var vt=-1,Nt=Y.queue.length;++vt<Nt;)Y.queue[vt].callFulfilled(ge)}return Y},f.reject=function(Y,ge){Y.state=d,Y.outcome=ge;for(var _e=-1,Me=Y.queue.length;++_e<Me;)Y.queue[_e].callRejected(ge);return Y};function U(Y){var ge=Y&&Y.then;if(Y&&(typeof Y=="object"||typeof Y=="function")&&typeof ge=="function")return function(){ge.apply(Y,arguments)}}function pe(Y,ge){var _e=!1;function Me(qt){_e||(_e=!0,f.reject(Y,qt))}function vt(qt){_e||(_e=!0,f.resolve(Y,qt))}function Nt(){ge(vt,Me)}var Bt=he(Nt);Bt.status==="error"&&Me(Bt.value)}function he(Y,ge){var _e={};try{_e.value=Y(ge),_e.status="success"}catch(Me){_e.status="error",_e.value=Me}return _e}E.resolve=De;function De(Y){return Y instanceof this?Y:f.resolve(new this(c),Y)}E.reject=re;function re(Y){var ge=new this(c);return f.reject(ge,Y)}E.all=be;function be(Y){var ge=this;if(Object.prototype.toString.call(Y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _e=Y.length,Me=!1;if(!_e)return this.resolve([]);for(var vt=new Array(_e),Nt=0,Bt=-1,qt=new this(c);++Bt<_e;)hr(Y[Bt],Bt);return qt;function hr(Mt,jr){ge.resolve(Mt).then(Tn,function(Rr){Me||(Me=!0,f.reject(qt,Rr))});function Tn(Rr){vt[jr]=Rr,++Nt===_e&&!Me&&(Me=!0,f.resolve(qt,vt))}}}E.race=Pe;function Pe(Y){var ge=this;if(Object.prototype.toString.call(Y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _e=Y.length,Me=!1;if(!_e)return this.resolve([]);for(var vt=-1,Nt=new this(c);++vt<_e;)Bt(Y[vt]);return Nt;function Bt(qt){ge.resolve(qt).then(function(hr){Me||(Me=!0,f.resolve(Nt,hr))},function(hr){Me||(Me=!0,f.reject(Nt,hr))})}}},{1:1}],3:[function(n,i,o){(function(a){"use strict";typeof a.Promise!="function"&&(a.Promise=n(2))}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,i,o){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};function c(_,k){if(!(_ instanceof k))throw new TypeError("Cannot call a class as a function")}function f(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var d=f();function m(){try{if(!d||!d.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),k=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!_||k)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function w(_,k){_=_||[],k=k||{};try{return new Blob(_,k)}catch(v){if(v.name!=="TypeError")throw v;for(var A=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,B=new A,O=0;O<_.length;O+=1)B.append(_[O]);return B.getBlob(k.type)}}typeof Promise>"u"&&n(3);var E=Promise;function T(_,k){k&&_.then(function(A){k(null,A)},function(A){k(A)})}function F(_,k,A){typeof k=="function"&&_.then(k),typeof A=="function"&&_.catch(A)}function U(_){return typeof _!="string"&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function pe(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var he="local-forage-detect-blob-support",De=void 0,re={},be=Object.prototype.toString,Pe="readonly",Y="readwrite";function ge(_){for(var k=_.length,A=new ArrayBuffer(k),B=new Uint8Array(A),O=0;O<k;O++)B[O]=_.charCodeAt(O);return A}function _e(_){return new E(function(k){var A=_.transaction(he,Y),B=w([""]);A.objectStore(he).put(B,"key"),A.onabort=function(O){O.preventDefault(),O.stopPropagation(),k(!1)},A.oncomplete=function(){var O=navigator.userAgent.match(/Chrome\/(\d+)/),v=navigator.userAgent.match(/Edge\//);k(v||!O||parseInt(O[1],10)>=43)}}).catch(function(){return!1})}function Me(_){return typeof De=="boolean"?E.resolve(De):_e(_).then(function(k){return De=k,De})}function vt(_){var k=re[_.name],A={};A.promise=new E(function(B,O){A.resolve=B,A.reject=O}),k.deferredOperations.push(A),k.dbReady?k.dbReady=k.dbReady.then(function(){return A.promise}):k.dbReady=A.promise}function Nt(_){var k=re[_.name],A=k.deferredOperations.pop();if(A)return A.resolve(),A.promise}function Bt(_,k){var A=re[_.name],B=A.deferredOperations.pop();if(B)return B.reject(k),B.promise}function qt(_,k){return new E(function(A,B){if(re[_.name]=re[_.name]||wr(),_.db)if(k)vt(_),_.db.close();else return A(_.db);var O=[_.name];k&&O.push(_.version);var v=d.open.apply(d,O);k&&(v.onupgradeneeded=function(z){var H=v.result;try{H.createObjectStore(_.storeName),z.oldVersion<=1&&H.createObjectStore(he)}catch(X){if(X.name==="ConstraintError")console.warn('The database "'+_.name+'" has been upgraded from version '+z.oldVersion+" to version "+z.newVersion+', but the storage "'+_.storeName+'" already exists.');else throw X}}),v.onerror=function(z){z.preventDefault(),B(v.error)},v.onsuccess=function(){var z=v.result;z.onversionchange=function(H){H.target.close()},A(z),Nt(_)}})}function hr(_){return qt(_,!1)}function Mt(_){return qt(_,!0)}function jr(_,k){if(!_.db)return!0;var A=!_.db.objectStoreNames.contains(_.storeName),B=_.version<_.db.version,O=_.version>_.db.version;if(B&&(_.version!==k&&console.warn('The database "'+_.name+`" can't be downgraded from version `+_.db.version+" to version "+_.version+"."),_.version=_.db.version),O||A){if(A){var v=_.db.version+1;v>_.version&&(_.version=v)}return!0}return!1}function Tn(_){return new E(function(k,A){var B=new FileReader;B.onerror=A,B.onloadend=function(O){var v=btoa(O.target.result||"");k({__local_forage_encoded_blob:!0,data:v,type:_.type})},B.readAsBinaryString(_)})}function Rr(_){var k=ge(atob(_.data));return w([k],{type:_.type})}function Wr(_){return _&&_.__local_forage_encoded_blob}function Fs(_){var k=this,A=k._initReady().then(function(){var B=re[k._dbInfo.name];if(B&&B.dbReady)return B.dbReady});return F(A,_,_),A}function nr(_){vt(_);for(var k=re[_.name],A=k.forages,B=0;B<A.length;B++){var O=A[B];O._dbInfo.db&&(O._dbInfo.db.close(),O._dbInfo.db=null)}return _.db=null,hr(_).then(function(v){return _.db=v,jr(_)?Mt(_):v}).then(function(v){_.db=k.db=v;for(var z=0;z<A.length;z++)A[z]._dbInfo.db=v}).catch(function(v){throw Bt(_,v),v})}function Wt(_,k,A,B){B===void 0&&(B=1);try{var O=_.db.transaction(_.storeName,k);A(null,O)}catch(v){if(B>0&&(!_.db||v.name==="InvalidStateError"||v.name==="NotFoundError"))return E.resolve().then(function(){if(!_.db||v.name==="NotFoundError"&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),Mt(_)}).then(function(){return nr(_).then(function(){Wt(_,k,A,B-1)})}).catch(A);A(v)}}function wr(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ve(_){var k=this,A={db:null};if(_)for(var B in _)A[B]=_[B];var O=re[A.name];O||(O=wr(),re[A.name]=O),O.forages.push(k),k._initReady||(k._initReady=k.ready,k.ready=Fs);var v=[];function z(){return E.resolve()}for(var H=0;H<O.forages.length;H++){var X=O.forages[H];X!==k&&v.push(X._initReady().catch(z))}var G=O.forages.slice(0);return E.all(v).then(function(){return A.db=O.db,hr(A)}).then(function(te){return A.db=te,jr(A,k._defaultConfig.version)?Mt(A):te}).then(function(te){A.db=O.db=te,k._dbInfo=A;for(var me=0;me<G.length;me++){var $e=G[me];$e!==k&&($e._dbInfo.db=A.db,$e._dbInfo.version=A.version)}})}function Xr(_,k){var A=this;_=U(_);var B=new E(function(O,v){A.ready().then(function(){Wt(A._dbInfo,Pe,function(z,H){if(z)return v(z);try{var X=H.objectStore(A._dbInfo.storeName),G=X.get(_);G.onsuccess=function(){var te=G.result;te===void 0&&(te=null),Wr(te)&&(te=Rr(te)),O(te)},G.onerror=function(){v(G.error)}}catch(te){v(te)}})}).catch(v)});return T(B,k),B}function Ui(_,k){var A=this,B=new E(function(O,v){A.ready().then(function(){Wt(A._dbInfo,Pe,function(z,H){if(z)return v(z);try{var X=H.objectStore(A._dbInfo.storeName),G=X.openCursor(),te=1;G.onsuccess=function(){var me=G.result;if(me){var $e=me.value;Wr($e)&&($e=Rr($e));var Ne=_($e,me.key,te++);Ne!==void 0?O(Ne):me.continue()}else O()},G.onerror=function(){v(G.error)}}catch(me){v(me)}})}).catch(v)});return T(B,k),B}function Mi(_,k,A){var B=this;_=U(_);var O=new E(function(v,z){var H;B.ready().then(function(){return H=B._dbInfo,be.call(k)==="[object Blob]"?Me(H.db).then(function(X){return X?k:Tn(k)}):k}).then(function(X){Wt(B._dbInfo,Y,function(G,te){if(G)return z(G);try{var me=te.objectStore(B._dbInfo.storeName);X===null&&(X=void 0);var $e=me.put(X,_);te.oncomplete=function(){X===void 0&&(X=null),v(X)},te.onabort=te.onerror=function(){var Ne=$e.error?$e.error:$e.transaction.error;z(Ne)}}catch(Ne){z(Ne)}})}).catch(z)});return T(O,A),O}function ts(_,k){var A=this;_=U(_);var B=new E(function(O,v){A.ready().then(function(){Wt(A._dbInfo,Y,function(z,H){if(z)return v(z);try{var X=H.objectStore(A._dbInfo.storeName),G=X.delete(_);H.oncomplete=function(){O()},H.onerror=function(){v(G.error)},H.onabort=function(){var te=G.error?G.error:G.transaction.error;v(te)}}catch(te){v(te)}})}).catch(v)});return T(B,k),B}function Br(_){var k=this,A=new E(function(B,O){k.ready().then(function(){Wt(k._dbInfo,Y,function(v,z){if(v)return O(v);try{var H=z.objectStore(k._dbInfo.storeName),X=H.clear();z.oncomplete=function(){B()},z.onabort=z.onerror=function(){var G=X.error?X.error:X.transaction.error;O(G)}}catch(G){O(G)}})}).catch(O)});return T(A,_),A}function Ki(_){var k=this,A=new E(function(B,O){k.ready().then(function(){Wt(k._dbInfo,Pe,function(v,z){if(v)return O(v);try{var H=z.objectStore(k._dbInfo.storeName),X=H.count();X.onsuccess=function(){B(X.result)},X.onerror=function(){O(X.error)}}catch(G){O(G)}})}).catch(O)});return T(A,_),A}function vn(_,k){var A=this,B=new E(function(O,v){if(_<0){O(null);return}A.ready().then(function(){Wt(A._dbInfo,Pe,function(z,H){if(z)return v(z);try{var X=H.objectStore(A._dbInfo.storeName),G=!1,te=X.openKeyCursor();te.onsuccess=function(){var me=te.result;if(!me){O(null);return}_===0||G?O(me.key):(G=!0,me.advance(_))},te.onerror=function(){v(te.error)}}catch(me){v(me)}})}).catch(v)});return T(B,k),B}function Vr(_){var k=this,A=new E(function(B,O){k.ready().then(function(){Wt(k._dbInfo,Pe,function(v,z){if(v)return O(v);try{var H=z.objectStore(k._dbInfo.storeName),X=H.openKeyCursor(),G=[];X.onsuccess=function(){var te=X.result;if(!te){B(G);return}G.push(te.key),te.continue()},X.onerror=function(){O(X.error)}}catch(te){O(te)}})}).catch(O)});return T(A,_),A}function yo(_,k){k=pe.apply(this,arguments);var A=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||A.name,_.storeName=_.storeName||A.storeName);var B=this,O;if(!_.name)O=E.reject("Invalid arguments");else{var v=_.name===A.name&&B._dbInfo.db,z=v?E.resolve(B._dbInfo.db):hr(_).then(function(H){var X=re[_.name],G=X.forages;X.db=H;for(var te=0;te<G.length;te++)G[te]._dbInfo.db=H;return H});_.storeName?O=z.then(function(H){if(!!H.objectStoreNames.contains(_.storeName)){var X=H.version+1;vt(_);var G=re[_.name],te=G.forages;H.close();for(var me=0;me<te.length;me++){var $e=te[me];$e._dbInfo.db=null,$e._dbInfo.version=X}var Ne=new E(function(Qe,dt){var mt=d.open(_.name,X);mt.onerror=function(Ot){var cr=mt.result;cr.close(),dt(Ot)},mt.onupgradeneeded=function(){var Ot=mt.result;Ot.deleteObjectStore(_.storeName)},mt.onsuccess=function(){var Ot=mt.result;Ot.close(),Qe(Ot)}});return Ne.then(function(Qe){G.db=Qe;for(var dt=0;dt<te.length;dt++){var mt=te[dt];mt._dbInfo.db=Qe,Nt(mt._dbInfo)}}).catch(function(Qe){throw(Bt(_,Qe)||E.resolve()).catch(function(){}),Qe})}}):O=z.then(function(H){vt(_);var X=re[_.name],G=X.forages;H.close();for(var te=0;te<G.length;te++){var me=G[te];me._dbInfo.db=null}var $e=new E(function(Ne,Qe){var dt=d.deleteDatabase(_.name);dt.onerror=function(){var mt=dt.result;mt&&mt.close(),Qe(dt.error)},dt.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},dt.onsuccess=function(){var mt=dt.result;mt&&mt.close(),Ne(mt)}});return $e.then(function(Ne){X.db=Ne;for(var Qe=0;Qe<G.length;Qe++){var dt=G[Qe];Nt(dt._dbInfo)}}).catch(function(Ne){throw(Bt(_,Ne)||E.resolve()).catch(function(){}),Ne})})}return T(O,k),O}var Pa={_driver:"asyncStorage",_initStorage:Ve,_support:m(),iterate:Ui,getItem:Xr,setItem:Mi,removeItem:ts,clear:Br,length:Ki,key:vn,keys:Vr,dropInstance:yo};function kn(){return typeof openDatabase=="function"}var _n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sa="~~local_forage_type~",Qr=/^~~local_forage_type~([^~]+)~/,ur="__lfsc__:",zn=ur.length,qn="arbf",go="blob",cn="si08",$="ui08",J="uic8",le="si16",ve="si32",je="ur16",or="ui32",tt="fl32",ut="fl64",qe=zn+qn.length,yt=Object.prototype.toString;function pt(_){var k=_.length*.75,A=_.length,B,O=0,v,z,H,X;_[_.length-1]==="="&&(k--,_[_.length-2]==="="&&k--);var G=new ArrayBuffer(k),te=new Uint8Array(G);for(B=0;B<A;B+=4)v=_n.indexOf(_[B]),z=_n.indexOf(_[B+1]),H=_n.indexOf(_[B+2]),X=_n.indexOf(_[B+3]),te[O++]=v<<2|z>>4,te[O++]=(z&15)<<4|H>>2,te[O++]=(H&3)<<6|X&63;return G}function Pr(_){var k=new Uint8Array(_),A="",B;for(B=0;B<k.length;B+=3)A+=_n[k[B]>>2],A+=_n[(k[B]&3)<<4|k[B+1]>>4],A+=_n[(k[B+1]&15)<<2|k[B+2]>>6],A+=_n[k[B+2]&63];return k.length%3===2?A=A.substring(0,A.length-1)+"=":k.length%3===1&&(A=A.substring(0,A.length-2)+"=="),A}function wo(_,k){var A="";if(_&&(A=yt.call(_)),_&&(A==="[object ArrayBuffer]"||_.buffer&&yt.call(_.buffer)==="[object ArrayBuffer]")){var B,O=ur;_ instanceof ArrayBuffer?(B=_,O+=qn):(B=_.buffer,A==="[object Int8Array]"?O+=cn:A==="[object Uint8Array]"?O+=$:A==="[object Uint8ClampedArray]"?O+=J:A==="[object Int16Array]"?O+=le:A==="[object Uint16Array]"?O+=je:A==="[object Int32Array]"?O+=ve:A==="[object Uint32Array]"?O+=or:A==="[object Float32Array]"?O+=tt:A==="[object Float64Array]"?O+=ut:k(new Error("Failed to get type for BinaryArray"))),k(O+Pr(B))}else if(A==="[object Blob]"){var v=new FileReader;v.onload=function(){var z=Sa+_.type+"~"+Pr(this.result);k(ur+go+z)},v.readAsArrayBuffer(_)}else try{k(JSON.stringify(_))}catch(z){console.error("Couldn't convert value into a JSON string: ",_),k(null,z)}}function Rs(_){if(_.substring(0,zn)!==ur)return JSON.parse(_);var k=_.substring(qe),A=_.substring(zn,qe),B;if(A===go&&Qr.test(k)){var O=k.match(Qr);B=O[1],k=k.substring(O[0].length)}var v=pt(k);switch(A){case qn:return v;case go:return w([v],{type:B});case cn:return new Int8Array(v);case $:return new Uint8Array(v);case J:return new Uint8ClampedArray(v);case le:return new Int16Array(v);case je:return new Uint16Array(v);case ve:return new Int32Array(v);case or:return new Uint32Array(v);case tt:return new Float32Array(v);case ut:return new Float64Array(v);default:throw new Error("Unkown type: "+A)}}var bo={serialize:wo,deserialize:Rs,stringToBuffer:pt,bufferToString:Pr};function Bs(_,k,A,B){_.executeSql("CREATE TABLE IF NOT EXISTS "+k.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],A,B)}function Ou(_){var k=this,A={db:null};if(_)for(var B in _)A[B]=typeof _[B]!="string"?_[B].toString():_[B];var O=new E(function(v,z){try{A.db=openDatabase(A.name,String(A.version),A.description,A.size)}catch(H){return z(H)}A.db.transaction(function(H){Bs(H,A,function(){k._dbInfo=A,v()},function(X,G){z(G)})},z)});return A.serializer=bo,O}function ji(_,k,A,B,O,v){_.executeSql(A,B,O,function(z,H){H.code===H.SYNTAX_ERR?z.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[k.storeName],function(X,G){G.rows.length?v(X,H):Bs(X,k,function(){X.executeSql(A,B,O,v)},v)},v):v(z,H)},v)}function yh(_,k){var A=this;_=U(_);var B=new E(function(O,v){A.ready().then(function(){var z=A._dbInfo;z.db.transaction(function(H){ji(H,z,"SELECT * FROM "+z.storeName+" WHERE key = ? LIMIT 1",[_],function(X,G){var te=G.rows.length?G.rows.item(0).value:null;te&&(te=z.serializer.deserialize(te)),O(te)},function(X,G){v(G)})})}).catch(v)});return T(B,k),B}function ai(_,k){var A=this,B=new E(function(O,v){A.ready().then(function(){var z=A._dbInfo;z.db.transaction(function(H){ji(H,z,"SELECT * FROM "+z.storeName,[],function(X,G){for(var te=G.rows,me=te.length,$e=0;$e<me;$e++){var Ne=te.item($e),Qe=Ne.value;if(Qe&&(Qe=z.serializer.deserialize(Qe)),Qe=_(Qe,Ne.key,$e+1),Qe!==void 0){O(Qe);return}}O()},function(X,G){v(G)})})}).catch(v)});return T(B,k),B}function $i(_,k,A,B){var O=this;_=U(_);var v=new E(function(z,H){O.ready().then(function(){k===void 0&&(k=null);var X=k,G=O._dbInfo;G.serializer.serialize(k,function(te,me){me?H(me):G.db.transaction(function($e){ji($e,G,"INSERT OR REPLACE INTO "+G.storeName+" (key, value) VALUES (?, ?)",[_,te],function(){z(X)},function(Ne,Qe){H(Qe)})},function($e){if($e.code===$e.QUOTA_ERR){if(B>0){z($i.apply(O,[_,X,A,B-1]));return}H($e)}})})}).catch(H)});return T(v,A),v}function vo(_,k,A){return $i.apply(this,[_,k,A,1])}function Lu(_,k){var A=this;_=U(_);var B=new E(function(O,v){A.ready().then(function(){var z=A._dbInfo;z.db.transaction(function(H){ji(H,z,"DELETE FROM "+z.storeName+" WHERE key = ?",[_],function(){O()},function(X,G){v(G)})})}).catch(v)});return T(B,k),B}function Nu(_){var k=this,A=new E(function(B,O){k.ready().then(function(){var v=k._dbInfo;v.db.transaction(function(z){ji(z,v,"DELETE FROM "+v.storeName,[],function(){B()},function(H,X){O(X)})})}).catch(O)});return T(A,_),A}function gf(_){var k=this,A=new E(function(B,O){k.ready().then(function(){var v=k._dbInfo;v.db.transaction(function(z){ji(z,v,"SELECT COUNT(key) as c FROM "+v.storeName,[],function(H,X){var G=X.rows.item(0).c;B(G)},function(H,X){O(X)})})}).catch(O)});return T(A,_),A}function Uu(_,k){var A=this,B=new E(function(O,v){A.ready().then(function(){var z=A._dbInfo;z.db.transaction(function(H){ji(H,z,"SELECT key FROM "+z.storeName+" WHERE id = ? LIMIT 1",[_+1],function(X,G){var te=G.rows.length?G.rows.item(0).key:null;O(te)},function(X,G){v(G)})})}).catch(v)});return T(B,k),B}function fn(_){var k=this,A=new E(function(B,O){k.ready().then(function(){var v=k._dbInfo;v.db.transaction(function(z){ji(z,v,"SELECT key FROM "+v.storeName,[],function(H,X){for(var G=[],te=0;te<X.rows.length;te++)G.push(X.rows.item(te).key);B(G)},function(H,X){O(X)})})}).catch(O)});return T(A,_),A}function Da(_){return new E(function(k,A){_.transaction(function(B){B.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(O,v){for(var z=[],H=0;H<v.rows.length;H++)z.push(v.rows.item(H).name);k({db:_,storeNames:z})},function(O,v){A(v)})},function(B){A(B)})})}function b(_,k){k=pe.apply(this,arguments);var A=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||A.name,_.storeName=_.storeName||A.storeName);var B=this,O;return _.name?O=new E(function(v){var z;_.name===A.name?z=B._dbInfo.db:z=openDatabase(_.name,"","",0),_.storeName?v({db:z,storeNames:[_.storeName]}):v(Da(z))}).then(function(v){return new E(function(z,H){v.db.transaction(function(X){function G(Ne){return new E(function(Qe,dt){X.executeSql("DROP TABLE IF EXISTS "+Ne,[],function(){Qe()},function(mt,Ot){dt(Ot)})})}for(var te=[],me=0,$e=v.storeNames.length;me<$e;me++)te.push(G(v.storeNames[me]));E.all(te).then(function(){z()}).catch(function(Ne){H(Ne)})},function(X){H(X)})})}):O=E.reject("Invalid arguments"),T(O,k),O}var S={_driver:"webSQLStorage",_initStorage:Ou,_support:kn(),iterate:ai,getItem:yh,setItem:vo,removeItem:Lu,clear:Nu,length:gf,key:Uu,keys:fn,dropInstance:b};function P(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function y(_,k){var A=_.name+"/";return _.storeName!==k.storeName&&(A+=_.storeName+"/"),A}function I(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch{return!0}}function M(){return!I()||localStorage.length>0}function j(_){var k=this,A={};if(_)for(var B in _)A[B]=_[B];return A.keyPrefix=y(_,k._defaultConfig),M()?(k._dbInfo=A,A.serializer=bo,E.resolve()):E.reject()}function oe(_){var k=this,A=k.ready().then(function(){for(var B=k._dbInfo.keyPrefix,O=localStorage.length-1;O>=0;O--){var v=localStorage.key(O);v.indexOf(B)===0&&localStorage.removeItem(v)}});return T(A,_),A}function ye(_,k){var A=this;_=U(_);var B=A.ready().then(function(){var O=A._dbInfo,v=localStorage.getItem(O.keyPrefix+_);return v&&(v=O.serializer.deserialize(v)),v});return T(B,k),B}function Ke(_,k){var A=this,B=A.ready().then(function(){for(var O=A._dbInfo,v=O.keyPrefix,z=v.length,H=localStorage.length,X=1,G=0;G<H;G++){var te=localStorage.key(G);if(te.indexOf(v)===0){var me=localStorage.getItem(te);if(me&&(me=O.serializer.deserialize(me)),me=_(me,te.substring(z),X++),me!==void 0)return me}}});return T(B,k),B}function Ae(_,k){var A=this,B=A.ready().then(function(){var O=A._dbInfo,v;try{v=localStorage.key(_)}catch{v=null}return v&&(v=v.substring(O.keyPrefix.length)),v});return T(B,k),B}function Ct(_){var k=this,A=k.ready().then(function(){for(var B=k._dbInfo,O=localStorage.length,v=[],z=0;z<O;z++){var H=localStorage.key(z);H.indexOf(B.keyPrefix)===0&&v.push(H.substring(B.keyPrefix.length))}return v});return T(A,_),A}function Te(_){var k=this,A=k.keys().then(function(B){return B.length});return T(A,_),A}function rt(_,k){var A=this;_=U(_);var B=A.ready().then(function(){var O=A._dbInfo;localStorage.removeItem(O.keyPrefix+_)});return T(B,k),B}function ot(_,k,A){var B=this;_=U(_);var O=B.ready().then(function(){k===void 0&&(k=null);var v=k;return new E(function(z,H){var X=B._dbInfo;X.serializer.serialize(k,function(G,te){if(te)H(te);else try{localStorage.setItem(X.keyPrefix+_,G),z(v)}catch(me){(me.name==="QuotaExceededError"||me.name==="NS_ERROR_DOM_QUOTA_REACHED")&&H(me),H(me)}})})});return T(O,A),O}function ct(_,k){if(k=pe.apply(this,arguments),_=typeof _!="function"&&_||{},!_.name){var A=this.config();_.name=_.name||A.name,_.storeName=_.storeName||A.storeName}var B=this,O;return _.name?O=new E(function(v){_.storeName?v(y(_,B._defaultConfig)):v(_.name+"/")}).then(function(v){for(var z=localStorage.length-1;z>=0;z--){var H=localStorage.key(z);H.indexOf(v)===0&&localStorage.removeItem(H)}}):O=E.reject("Invalid arguments"),T(O,k),O}var lt={_driver:"localStorageWrapper",_initStorage:j,_support:P(),iterate:Ke,getItem:ye,setItem:ot,removeItem:rt,clear:oe,length:Te,key:Ae,keys:Ct,dropInstance:ct},et=function(k,A){return k===A||typeof k=="number"&&typeof A=="number"&&isNaN(k)&&isNaN(A)},ft=function(k,A){for(var B=k.length,O=0;O<B;){if(et(k[O],A))return!0;O++}return!1},nt=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"},Ie={},ze={},xe={INDEXEDDB:Pa,WEBSQL:S,LOCALSTORAGE:lt},Re=[xe.INDEXEDDB._driver,xe.WEBSQL._driver,xe.LOCALSTORAGE._driver],Be=["dropInstance"],Ee=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Be),q={description:"",driver:Re.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function W(_,k){_[k]=function(){var A=arguments;return _.ready().then(function(){return _[k].apply(_,A)})}}function fe(){for(var _=1;_<arguments.length;_++){var k=arguments[_];if(k)for(var A in k)k.hasOwnProperty(A)&&(nt(k[A])?arguments[0][A]=k[A].slice():arguments[0][A]=k[A])}return arguments[0]}var ne=function(){function _(k){c(this,_);for(var A in xe)if(xe.hasOwnProperty(A)){var B=xe[A],O=B._driver;this[A]=O,Ie[O]||this.defineDriver(B)}this._defaultConfig=fe({},q),this._config=fe({},this._defaultConfig,k),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(A){if((typeof A>"u"?"undefined":a(A))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var B in A){if(B==="storeName"&&(A[B]=A[B].replace(/\W/g,"_")),B==="version"&&typeof A[B]!="number")return new Error("Database version must be a number.");this._config[B]=A[B]}return"driver"in A&&A.driver?this.setDriver(this._config.driver):!0}else return typeof A=="string"?this._config[A]:this._config},_.prototype.defineDriver=function(A,B,O){var v=new E(function(z,H){try{var X=A._driver,G=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!A._driver){H(G);return}for(var te=Ee.concat("_initStorage"),me=0,$e=te.length;me<$e;me++){var Ne=te[me],Qe=!ft(Be,Ne);if((Qe||A[Ne])&&typeof A[Ne]!="function"){H(G);return}}var dt=function(){for(var cr=function(Y0){return function(){var jd=new Error("Method "+Y0+" is not implemented by the current driver"),$d=E.reject(jd);return T($d,arguments[arguments.length-1]),$d}},br=0,Or=Be.length;br<Or;br++){var gh=Be[br];A[gh]||(A[gh]=cr(gh))}};dt();var mt=function(cr){Ie[X]&&console.info("Redefining LocalForage driver: "+X),Ie[X]=A,ze[X]=cr,z()};"_support"in A?A._support&&typeof A._support=="function"?A._support().then(mt,H):mt(!!A._support):mt(!0)}catch(Ot){H(Ot)}});return F(v,B,O),v},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(A,B,O){var v=Ie[A]?E.resolve(Ie[A]):E.reject(new Error("Driver not found."));return F(v,B,O),v},_.prototype.getSerializer=function(A){var B=E.resolve(bo);return F(B,A),B},_.prototype.ready=function(A){var B=this,O=B._driverSet.then(function(){return B._ready===null&&(B._ready=B._initDriver()),B._ready});return F(O,A,A),O},_.prototype.setDriver=function(A,B,O){var v=this;nt(A)||(A=[A]);var z=this._getSupportedDrivers(A);function H(){v._config.driver=v.driver()}function X(me){return v._extend(me),H(),v._ready=v._initStorage(v._config),v._ready}function G(me){return function(){var $e=0;function Ne(){for(;$e<me.length;){var Qe=me[$e];return $e++,v._dbInfo=null,v._ready=null,v.getDriver(Qe).then(X).catch(Ne)}H();var dt=new Error("No available storage method found.");return v._driverSet=E.reject(dt),v._driverSet}return Ne()}}var te=this._driverSet!==null?this._driverSet.catch(function(){return E.resolve()}):E.resolve();return this._driverSet=te.then(function(){var me=z[0];return v._dbInfo=null,v._ready=null,v.getDriver(me).then(function($e){v._driver=$e._driver,H(),v._wrapLibraryMethodsWithReady(),v._initDriver=G(z)})}).catch(function(){H();var me=new Error("No available storage method found.");return v._driverSet=E.reject(me),v._driverSet}),F(this._driverSet,B,O),this._driverSet},_.prototype.supports=function(A){return!!ze[A]},_.prototype._extend=function(A){fe(this,A)},_.prototype._getSupportedDrivers=function(A){for(var B=[],O=0,v=A.length;O<v;O++){var z=A[O];this.supports(z)&&B.push(z)}return B},_.prototype._wrapLibraryMethodsWithReady=function(){for(var A=0,B=Ee.length;A<B;A++)W(this,Ee[A])},_.prototype.createInstance=function(A){return new _(A)},_}(),ie=new ne;i.exports=ie},{3:3}]},{},[4])(4)})});var nC=ue((rC,by)=>{h();p();(function(r){var e={36:n(Math.pow(36,5)),16:n(Math.pow(16,7)),10:n(Math.pow(10,9)),2:n(Math.pow(2,30))},t={36:n(36),16:n(16),10:n(10),2:n(2)};function n(c,f){if(!(this instanceof n))return new n(c,f);if(this._low=0,this._high=0,this.remainder=null,typeof f>"u")return o.call(this,c);if(typeof c=="string")return a.call(this,c,f);i.call(this,c,f)}function i(c,f){return this._low=c|0,this._high=f|0,this}n.prototype.fromBits=i;function o(c){return this._low=c&65535,this._high=c>>>16,this}n.prototype.fromNumber=o;function a(c,f){var d=parseInt(c,f||10);return this._low=d&65535,this._high=d>>>16,this}n.prototype.fromString=a,n.prototype.toNumber=function(){return this._high*65536+this._low},n.prototype.toString=function(c){return this.toNumber().toString(c||10)},n.prototype.add=function(c){var f=this._low+c._low,d=f>>>16;return d+=this._high+c._high,this._low=f&65535,this._high=d&65535,this},n.prototype.subtract=function(c){return this.add(c.clone().negate())},n.prototype.multiply=function(c){var f=this._high,d=this._low,m=c._high,w=c._low,E,T;return T=d*w,E=T>>>16,E+=f*w,E&=65535,E+=d*m,this._low=T&65535,this._high=E&65535,this},n.prototype.div=function(c){if(c._low==0&&c._high==0)throw Error("division by zero");if(c._high==0&&c._low==1)return this.remainder=new n(0),this;if(c.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(c))return this.remainder=new n(0),this._low=1,this._high=0,this;for(var f=c.clone(),d=-1;!this.lt(f);)f.shiftLeft(1,!0),d++;for(this.remainder=this.clone(),this._low=0,this._high=0;d>=0;d--)f.shiftRight(1),this.remainder.lt(f)||(this.remainder.subtract(f),d>=16?this._high|=1<<d-16:this._low|=1<<d);return this},n.prototype.negate=function(){var c=(~this._low&65535)+1;return this._low=c&65535,this._high=~this._high+(c>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(c){return this._low==c._low&&this._high==c._high},n.prototype.greaterThan=n.prototype.gt=function(c){return this._high>c._high?!0:this._high<c._high?!1:this._low>c._low},n.prototype.lessThan=n.prototype.lt=function(c){return this._high<c._high?!0:this._high>c._high?!1:this._low<c._low},n.prototype.or=function(c){return this._low|=c._low,this._high|=c._high,this},n.prototype.and=function(c){return this._low&=c._low,this._high&=c._high,this},n.prototype.not=function(){return this._low=~this._low&65535,this._high=~this._high&65535,this},n.prototype.xor=function(c){return this._low^=c._low,this._high^=c._high,this},n.prototype.shiftRight=n.prototype.shiftr=function(c){return c>16?(this._low=this._high>>c-16,this._high=0):c==16?(this._low=this._high,this._high=0):(this._low=this._low>>c|this._high<<16-c&65535,this._high>>=c),this},n.prototype.shiftLeft=n.prototype.shiftl=function(c,f){return c>16?(this._high=this._low<<c-16,this._low=0,f||(this._high&=65535)):c==16?(this._high=this._low,this._low=0):(this._high=this._high<<c|this._low>>16-c,this._low=this._low<<c&65535,f||(this._high&=65535)),this},n.prototype.rotateLeft=n.prototype.rotl=function(c){var f=this._high<<16|this._low;return f=f<<c|f>>>32-c,this._low=f&65535,this._high=f>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(c){var f=this._high<<16|this._low;return f=f>>>c|f<<32-c,this._low=f&65535,this._high=f>>>16,this},n.prototype.clone=function(){return new n(this._low,this._high)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof by<"u"&&by.exports?by.exports=n:r.UINT32=n})(rC)});var oC=ue((iC,vy)=>{h();p();(function(r){var e={16:n(Math.pow(16,5)),10:n(Math.pow(10,5)),2:n(Math.pow(2,5))},t={16:n(16),10:n(10),2:n(2)};function n(c,f,d,m){if(!(this instanceof n))return new n(c,f,d,m);if(this.remainder=null,typeof c=="string")return a.call(this,c,f);if(typeof f>"u")return o.call(this,c);i.apply(this,arguments)}function i(c,f,d,m){return typeof d>"u"?(this._a00=c&65535,this._a16=c>>>16,this._a32=f&65535,this._a48=f>>>16,this):(this._a00=c|0,this._a16=f|0,this._a32=d|0,this._a48=m|0,this)}n.prototype.fromBits=i;function o(c){return this._a00=c&65535,this._a16=c>>>16,this._a32=0,this._a48=0,this}n.prototype.fromNumber=o;function a(c,f){f=f||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var d=e[f]||new n(Math.pow(f,5)),m=0,w=c.length;m<w;m+=5){var E=Math.min(5,w-m),T=parseInt(c.slice(m,m+E),f);this.multiply(E<5?new n(Math.pow(f,E)):d).add(new n(T))}return this}n.prototype.fromString=a,n.prototype.toNumber=function(){return this._a16*65536+this._a00},n.prototype.toString=function(c){c=c||10;var f=t[c]||new n(c);if(!this.gt(f))return this.toNumber().toString(c);for(var d=this.clone(),m=new Array(64),w=63;w>=0&&(d.div(f),m[w]=d.remainder.toNumber().toString(c),!!d.gt(f));w--);return m[w-1]=d.toNumber().toString(c),m.join("")},n.prototype.add=function(c){var f=this._a00+c._a00,d=f>>>16;d+=this._a16+c._a16;var m=d>>>16;m+=this._a32+c._a32;var w=m>>>16;return w+=this._a48+c._a48,this._a00=f&65535,this._a16=d&65535,this._a32=m&65535,this._a48=w&65535,this},n.prototype.subtract=function(c){return this.add(c.clone().negate())},n.prototype.multiply=function(c){var f=this._a00,d=this._a16,m=this._a32,w=this._a48,E=c._a00,T=c._a16,F=c._a32,U=c._a48,pe=f*E,he=pe>>>16;he+=f*T;var De=he>>>16;he&=65535,he+=d*E,De+=he>>>16,De+=f*F;var re=De>>>16;return De&=65535,De+=d*T,re+=De>>>16,De&=65535,De+=m*E,re+=De>>>16,re+=f*U,re&=65535,re+=d*F,re&=65535,re+=m*T,re&=65535,re+=w*E,this._a00=pe&65535,this._a16=he&65535,this._a32=De&65535,this._a48=re&65535,this},n.prototype.div=function(c){if(c._a16==0&&c._a32==0&&c._a48==0){if(c._a00==0)throw Error("division by zero");if(c._a00==1)return this.remainder=new n(0),this}if(c.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(c))return this.remainder=new n(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var f=c.clone(),d=-1;!this.lt(f);)f.shiftLeft(1,!0),d++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;d>=0;d--)f.shiftRight(1),this.remainder.lt(f)||(this.remainder.subtract(f),d>=48?this._a48|=1<<d-48:d>=32?this._a32|=1<<d-32:d>=16?this._a16|=1<<d-16:this._a00|=1<<d);return this},n.prototype.negate=function(){var c=(~this._a00&65535)+1;return this._a00=c&65535,c=(~this._a16&65535)+(c>>>16),this._a16=c&65535,c=(~this._a32&65535)+(c>>>16),this._a32=c&65535,this._a48=~this._a48+(c>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(c){return this._a48==c._a48&&this._a00==c._a00&&this._a32==c._a32&&this._a16==c._a16},n.prototype.greaterThan=n.prototype.gt=function(c){return this._a48>c._a48?!0:this._a48<c._a48?!1:this._a32>c._a32?!0:this._a32<c._a32?!1:this._a16>c._a16?!0:this._a16<c._a16?!1:this._a00>c._a00},n.prototype.lessThan=n.prototype.lt=function(c){return this._a48<c._a48?!0:this._a48>c._a48?!1:this._a32<c._a32?!0:this._a32>c._a32?!1:this._a16<c._a16?!0:this._a16>c._a16?!1:this._a00<c._a00},n.prototype.or=function(c){return this._a00|=c._a00,this._a16|=c._a16,this._a32|=c._a32,this._a48|=c._a48,this},n.prototype.and=function(c){return this._a00&=c._a00,this._a16&=c._a16,this._a32&=c._a32,this._a48&=c._a48,this},n.prototype.xor=function(c){return this._a00^=c._a00,this._a16^=c._a16,this._a32^=c._a32,this._a48^=c._a48,this},n.prototype.not=function(){return this._a00=~this._a00&65535,this._a16=~this._a16&65535,this._a32=~this._a32&65535,this._a48=~this._a48&65535,this},n.prototype.shiftRight=n.prototype.shiftr=function(c){return c%=64,c>=48?(this._a00=this._a48>>c-48,this._a16=0,this._a32=0,this._a48=0):c>=32?(c-=32,this._a00=(this._a32>>c|this._a48<<16-c)&65535,this._a16=this._a48>>c&65535,this._a32=0,this._a48=0):c>=16?(c-=16,this._a00=(this._a16>>c|this._a32<<16-c)&65535,this._a16=(this._a32>>c|this._a48<<16-c)&65535,this._a32=this._a48>>c&65535,this._a48=0):(this._a00=(this._a00>>c|this._a16<<16-c)&65535,this._a16=(this._a16>>c|this._a32<<16-c)&65535,this._a32=(this._a32>>c|this._a48<<16-c)&65535,this._a48=this._a48>>c&65535),this},n.prototype.shiftLeft=n.prototype.shiftl=function(c,f){return c%=64,c>=48?(this._a48=this._a00<<c-48,this._a32=0,this._a16=0,this._a00=0):c>=32?(c-=32,this._a48=this._a16<<c|this._a00>>16-c,this._a32=this._a00<<c&65535,this._a16=0,this._a00=0):c>=16?(c-=16,this._a48=this._a32<<c|this._a16>>16-c,this._a32=(this._a16<<c|this._a00>>16-c)&65535,this._a16=this._a00<<c&65535,this._a00=0):(this._a48=this._a48<<c|this._a32>>16-c,this._a32=(this._a32<<c|this._a16>>16-c)&65535,this._a16=(this._a16<<c|this._a00>>16-c)&65535,this._a00=this._a00<<c&65535),f||(this._a48&=65535),this},n.prototype.rotateLeft=n.prototype.rotl=function(c){if(c%=64,c==0)return this;if(c>=32){var f=this._a00;if(this._a00=this._a32,this._a32=f,f=this._a48,this._a48=this._a16,this._a16=f,c==32)return this;c-=32}var d=this._a48<<16|this._a32,m=this._a16<<16|this._a00,w=d<<c|m>>>32-c,E=m<<c|d>>>32-c;return this._a00=E&65535,this._a16=E>>>16,this._a32=w&65535,this._a48=w>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(c){if(c%=64,c==0)return this;if(c>=32){var f=this._a00;if(this._a00=this._a32,this._a32=f,f=this._a48,this._a48=this._a16,this._a16=f,c==32)return this;c-=32}var d=this._a48<<16|this._a32,m=this._a16<<16|this._a00,w=d>>>c|m<<32-c,E=m>>>c|d<<32-c;return this._a00=E&65535,this._a16=E>>>16,this._a32=w&65535,this._a48=w>>>16,this},n.prototype.clone=function(){return new n(this._a00,this._a16,this._a32,this._a48)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof vy<"u"&&vy.exports?vy.exports=n:r.UINT64=n})(iC)});var Iv=ue(Cv=>{h();p();Cv.UINT32=nC();Cv.UINT64=oC()});var fC=ue((rse,cC)=>{h();p();var ea=Iv().UINT32;ea.prototype.xxh_update=function(r,e){var t=hp._low,n=hp._high,i,o;o=r*t,i=o>>>16,i+=e*t,i&=65535,i+=r*n;var a=this._low+(o&65535),c=a>>>16;c+=this._high+(i&65535);var f=c<<16|a&65535;f=f<<13|f>>>19,a=f&65535,c=f>>>16,t=lp._low,n=lp._high,o=a*t,i=o>>>16,i+=c*t,i&=65535,i+=a*n,this._low=o&65535,this._high=i&65535};var lp=ea("2654435761"),hp=ea("2246822519"),sC=ea("3266489917"),$j=ea("668265263"),aC=ea("374761393");function zj(r){for(var e=[],t=0,n=r.length;t<n;t++){var i=r.charCodeAt(t);i<128?e.push(i):i<2048?e.push(192|i>>6,128|i&63):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|i&63):(t++,i=65536+((i&1023)<<10|r.charCodeAt(t)&1023),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return new Uint8Array(e)}function lc(){if(arguments.length==2)return new lc(arguments[1]).update(arguments[0]).digest();if(!(this instanceof lc))return new lc(arguments[0]);uC.call(this,arguments[0])}function uC(r){return this.seed=r instanceof ea?r.clone():ea(r),this.v1=this.seed.clone().add(lp).add(hp),this.v2=this.seed.clone().add(hp),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(lp),this.total_len=0,this.memsize=0,this.memory=null,this}lc.prototype.init=uC;lc.prototype.update=function(r){var e=typeof r=="string",t;e&&(r=zj(r),e=!1,t=!0),typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer&&(t=!0,r=new Uint8Array(r));var n=0,i=r.length,o=n+i;if(i==0)return this;if(this.total_len+=i,this.memsize==0&&(e?this.memory="":t?this.memory=new Uint8Array(16):this.memory=new Buffer(16)),this.memsize+i<16)return e?this.memory+=r:t?this.memory.set(r.subarray(0,i),this.memsize):r.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){e?this.memory+=r.slice(0,16-this.memsize):t?this.memory.set(r.subarray(0,16-this.memsize),this.memsize):r.copy(this.memory,this.memsize,0,16-this.memsize);var a=0;e?(this.v1.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v2.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v3.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v4.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2))):(this.v1.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v2.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v3.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v4.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2])),n+=16-this.memsize,this.memsize=0,e&&(this.memory="")}if(n<=o-16){var c=o-16;do e?(this.v1.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v2.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v3.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v4.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2))):(this.v1.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v2.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v3.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v4.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2])),n+=4;while(n<=c)}return n<o&&(e?this.memory+=r.slice(n):t?this.memory.set(r.subarray(n,o),this.memsize):r.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this};lc.prototype.digest=function(){var r=this.memory,e=typeof r=="string",t=0,n=this.memsize,i,o,a=new ea;for(this.total_len>=16?i=this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):i=this.seed.clone().add(aC),i.add(a.fromNumber(this.total_len));t<=n-4;)e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2)):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2]),i.add(a.multiply(sC)).rotl(17).multiply($j),t+=4;for(;t<n;)a.fromBits(e?r.charCodeAt(t++):r[t++],0),i.add(a.multiply(aC)).rotl(11).multiply(lp);return o=i.clone().shiftRight(15),i.xor(o).multiply(hp),o=i.clone().shiftRight(13),i.xor(o).multiply(sC),o=i.clone().shiftRight(16),i.xor(o),this.init(this.seed),i};cC.exports=lc});var mC=ue((ose,dC)=>{h();p();var dr=Iv().UINT64,Gt=dr("11400714785074694791"),lr=dr("14029467366897019727"),lC=dr("1609587929392839161"),pp=dr("9650029242287828579"),hC=dr("2870177450012600261");function qj(r){for(var e=[],t=0,n=r.length;t<n;t++){var i=r.charCodeAt(t);i<128?e.push(i):i<2048?e.push(192|i>>6,128|i&63):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|i&63):(t++,i=65536+((i&1023)<<10|r.charCodeAt(t)&1023),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return new Uint8Array(e)}function hc(){if(arguments.length==2)return new hc(arguments[1]).update(arguments[0]).digest();if(!(this instanceof hc))return new hc(arguments[0]);pC.call(this,arguments[0])}function pC(r){return this.seed=r instanceof dr?r.clone():dr(r),this.v1=this.seed.clone().add(Gt).add(lr),this.v2=this.seed.clone().add(lr),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(Gt),this.total_len=0,this.memsize=0,this.memory=null,this}hc.prototype.init=pC;hc.prototype.update=function(r){var e=typeof r=="string",t;e&&(r=qj(r),e=!1,t=!0),typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer&&(t=!0,r=new Uint8Array(r));var n=0,i=r.length,o=n+i;if(i==0)return this;if(this.total_len+=i,this.memsize==0&&(e?this.memory="":t?this.memory=new Uint8Array(32):this.memory=new Buffer(32)),this.memsize+i<32)return e?this.memory+=r:t?this.memory.set(r.subarray(0,i),this.memsize):r.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){e?this.memory+=r.slice(0,32-this.memsize):t?this.memory.set(r.subarray(0,32-this.memsize),this.memsize):r.copy(this.memory,this.memsize,0,32-this.memsize);var a=0;if(e){var c;c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v1.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v2.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v3.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v4.add(c.multiply(lr)).rotl(31).multiply(Gt)}else{var c;c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v1.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v2.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v3.add(c.multiply(lr)).rotl(31).multiply(Gt),a+=8,c=dr(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v4.add(c.multiply(lr)).rotl(31).multiply(Gt)}n+=32-this.memsize,this.memsize=0,e&&(this.memory="")}if(n<=o-32){var f=o-32;do{if(e){var c;c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v1.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v2.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v3.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v4.add(c.multiply(lr)).rotl(31).multiply(Gt)}else{var c;c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v1.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v2.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v3.add(c.multiply(lr)).rotl(31).multiply(Gt),n+=8,c=dr(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v4.add(c.multiply(lr)).rotl(31).multiply(Gt)}n+=8}while(n<=f)}return n<o&&(e?this.memory+=r.slice(n):t?this.memory.set(r.subarray(n,o),this.memsize):r.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this};hc.prototype.digest=function(){var r=this.memory,e=typeof r=="string",t=0,n=this.memsize,i,o,a=new dr;for(this.total_len>=32?(i=this.v1.clone().rotl(1),i.add(this.v2.clone().rotl(7)),i.add(this.v3.clone().rotl(12)),i.add(this.v4.clone().rotl(18)),i.xor(this.v1.multiply(lr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pp),i.xor(this.v2.multiply(lr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pp),i.xor(this.v3.multiply(lr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pp),i.xor(this.v4.multiply(lr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pp)):i=this.seed.clone().add(hC),i.add(a.fromNumber(this.total_len));t<=n-8;)e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2),r.charCodeAt(t+5)<<8|r.charCodeAt(t+4),r.charCodeAt(t+7)<<8|r.charCodeAt(t+6)):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2],r[t+5]<<8|r[t+4],r[t+7]<<8|r[t+6]),a.multiply(lr).rotl(31).multiply(Gt),i.xor(a).rotl(27).multiply(Gt).add(pp),t+=8;for(t+4<=n&&(e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2),0,0):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2],0,0),i.xor(a.multiply(Gt)).rotl(23).multiply(lr).add(lC),t+=4);t<n;)a.fromBits(e?r.charCodeAt(t++):r[t++],0,0,0),i.xor(a.multiply(hC)).rotl(11).multiply(Gt);return o=i.clone().shiftRight(33),i.xor(o).multiply(lr),o=i.clone().shiftRight(29),i.xor(o).multiply(lC),o=i.clone().shiftRight(32),i.xor(o),this.init(this.seed),i};dC.exports=hc});var gC=ue((use,yC)=>{h();p();yC.exports={h32:fC(),h64:mC()}});var vC=ue(_y=>{"use strict";h();p();_y.byteLength=Vj;_y.toByteArray=Gj;_y.fromByteArray=Xj;var ms=[],no=[],Wj=typeof Uint8Array<"u"?Uint8Array:Array,Tv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(pc=0,wC=Tv.length;pc<wC;++pc)ms[pc]=Tv[pc],no[Tv.charCodeAt(pc)]=pc;var pc,wC;no["-".charCodeAt(0)]=62;no["_".charCodeAt(0)]=63;function bC(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Vj(r){var e=bC(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Hj(r,e,t){return(e+t)*3/4-t}function Gj(r){var e,t=bC(r),n=t[0],i=t[1],o=new Wj(Hj(r,n,i)),a=0,c=i>0?n-4:n,f;for(f=0;f<c;f+=4)e=no[r.charCodeAt(f)]<<18|no[r.charCodeAt(f+1)]<<12|no[r.charCodeAt(f+2)]<<6|no[r.charCodeAt(f+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return i===2&&(e=no[r.charCodeAt(f)]<<2|no[r.charCodeAt(f+1)]>>4,o[a++]=e&255),i===1&&(e=no[r.charCodeAt(f)]<<10|no[r.charCodeAt(f+1)]<<4|no[r.charCodeAt(f+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function Yj(r){return ms[r>>18&63]+ms[r>>12&63]+ms[r>>6&63]+ms[r&63]}function Jj(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(Yj(n));return i.join("")}function Xj(r){for(var e,t=r.length,n=t%3,i=[],o=16383,a=0,c=t-n;a<c;a+=o)i.push(Jj(r,a,a+o>c?c:a+o));return n===1?(e=r[t-1],i.push(ms[e>>2]+ms[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(ms[e>>10]+ms[e>>4&63]+ms[e<<2&63]+"=")),i.join("")}});var _C=ue(kv=>{h();p();kv.read=function(r,e,t,n,i){var o,a,c=i*8-n-1,f=(1<<c)-1,d=f>>1,m=-7,w=t?i-1:0,E=t?-1:1,T=r[e+w];for(w+=E,o=T&(1<<-m)-1,T>>=-m,m+=c;m>0;o=o*256+r[e+w],w+=E,m-=8);for(a=o&(1<<-m)-1,o>>=-m,m+=n;m>0;a=a*256+r[e+w],w+=E,m-=8);if(o===0)o=1-d;else{if(o===f)return a?NaN:(T?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-d}return(T?-1:1)*a*Math.pow(2,o-n)};kv.write=function(r,e,t,n,i,o){var a,c,f,d=o*8-i-1,m=(1<<d)-1,w=m>>1,E=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=n?0:o-1,F=n?1:-1,U=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=m):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+w>=1?e+=E/f:e+=E*Math.pow(2,1-w),e*f>=2&&(a++,f/=2),a+w>=m?(c=0,a=m):a+w>=1?(c=(e*f-1)*Math.pow(2,i),a=a+w):(c=e*Math.pow(2,w-1)*Math.pow(2,i),a=0));i>=8;r[t+T]=c&255,T+=F,c/=256,i-=8);for(a=a<<i|c,d+=i;d>0;r[t+T]=a&255,T+=F,a/=256,d-=8);r[t+T-F]|=U*128}});var mc=ue(cl=>{"use strict";h();p();var Fv=vC(),al=_C(),xC=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;cl.Buffer=Q;cl.SlowBuffer=n$;cl.INSPECT_MAX_BYTES=50;var xy=2147483647;cl.kMaxLength=xy;Q.TYPED_ARRAY_SUPPORT=Qj();!Q.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Qj(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(Q.prototype,"parent",{enumerable:!0,get:function(){if(!!Q.isBuffer(this))return this.buffer}});Object.defineProperty(Q.prototype,"offset",{enumerable:!0,get:function(){if(!!Q.isBuffer(this))return this.byteOffset}});function ta(r){if(r>xy)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,Q.prototype),e}function Q(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Lv(r)}return DC(r,e,t)}Q.poolSize=8192;function DC(r,e,t){if(typeof r=="string")return e$(r,e);if(ArrayBuffer.isView(r))return t$(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(ys(r,ArrayBuffer)||r&&ys(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ys(r,SharedArrayBuffer)||r&&ys(r.buffer,SharedArrayBuffer)))return Bv(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return Q.from(n,e,t);let i=r$(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return Q.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}Q.from=function(r,e,t){return DC(r,e,t)};Object.setPrototypeOf(Q.prototype,Uint8Array.prototype);Object.setPrototypeOf(Q,Uint8Array);function AC(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Zj(r,e,t){return AC(r),r<=0?ta(r):e!==void 0?typeof t=="string"?ta(r).fill(e,t):ta(r).fill(e):ta(r)}Q.alloc=function(r,e,t){return Zj(r,e,t)};function Lv(r){return AC(r),ta(r<0?0:Nv(r)|0)}Q.allocUnsafe=function(r){return Lv(r)};Q.allocUnsafeSlow=function(r){return Lv(r)};function e$(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Q.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=CC(r,e)|0,n=ta(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Rv(r){let e=r.length<0?0:Nv(r.length)|0,t=ta(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function t$(r){if(ys(r,Uint8Array)){let e=new Uint8Array(r);return Bv(e.buffer,e.byteOffset,e.byteLength)}return Rv(r)}function Bv(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,Q.prototype),n}function r$(r){if(Q.isBuffer(r)){let e=Nv(r.length)|0,t=ta(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Mv(r.length)?ta(0):Rv(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Rv(r.data)}function Nv(r){if(r>=xy)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+xy.toString(16)+" bytes");return r|0}function n$(r){return+r!=r&&(r=0),Q.alloc(+r)}Q.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==Q.prototype};Q.compare=function(e,t){if(ys(e,Uint8Array)&&(e=Q.from(e,e.offset,e.byteLength)),ys(t,Uint8Array)&&(t=Q.from(t,t.offset,t.byteLength)),!Q.isBuffer(e)||!Q.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};Q.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Q.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Q.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=Q.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let a=e[n];if(ys(a,Uint8Array))o+a.length>i.length?(Q.isBuffer(a)||(a=Q.from(a)),a.copy(i,o)):Uint8Array.prototype.set.call(i,a,o);else if(Q.isBuffer(a))a.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=a.length}return i};function CC(r,e){if(Q.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||ys(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Ov(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return NC(r).length;default:if(i)return n?-1:Ov(r).length;e=(""+e).toLowerCase(),i=!0}}Q.byteLength=CC;function i$(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return d$(this,e,t);case"utf8":case"utf-8":return TC(this,e,t);case"ascii":return h$(this,e,t);case"latin1":case"binary":return p$(this,e,t);case"base64":return f$(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m$(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}Q.prototype._isBuffer=!0;function dc(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}Q.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)dc(this,t,t+1);return this};Q.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)dc(this,t,t+3),dc(this,t+1,t+2);return this};Q.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)dc(this,t,t+7),dc(this,t+1,t+6),dc(this,t+2,t+5),dc(this,t+3,t+4);return this};Q.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?TC(this,0,e):i$.apply(this,arguments)};Q.prototype.toLocaleString=Q.prototype.toString;Q.prototype.equals=function(e){if(!Q.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Q.compare(this,e)===0};Q.prototype.inspect=function(){let e="",t=cl.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};xC&&(Q.prototype[xC]=Q.prototype.inspect);Q.prototype.compare=function(e,t,n,i,o){if(ys(e,Uint8Array)&&(e=Q.from(e,e.offset,e.byteLength)),!Q.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let a=o-i,c=n-t,f=Math.min(a,c),d=this.slice(i,o),m=e.slice(t,n);for(let w=0;w<f;++w)if(d[w]!==m[w]){a=d[w],c=m[w];break}return a<c?-1:c<a?1:0};function IC(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Mv(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=Q.from(e,n)),Q.isBuffer(e))return e.length===0?-1:EC(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):EC(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function EC(r,e,t,n,i){let o=1,a=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,c/=2,t/=2}function f(m,w){return o===1?m[w]:m.readUInt16BE(w*o)}let d;if(i){let m=-1;for(d=t;d<a;d++)if(f(r,d)===f(e,m===-1?0:d-m)){if(m===-1&&(m=d),d-m+1===c)return m*o}else m!==-1&&(d-=d-m),m=-1}else for(t+c>a&&(t=a-c),d=t;d>=0;d--){let m=!0;for(let w=0;w<c;w++)if(f(r,d+w)!==f(e,w)){m=!1;break}if(m)return d}return-1}Q.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};Q.prototype.indexOf=function(e,t,n){return IC(this,e,t,n,!0)};Q.prototype.lastIndexOf=function(e,t,n){return IC(this,e,t,n,!1)};function o$(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let a;for(a=0;a<n;++a){let c=parseInt(e.substr(a*2,2),16);if(Mv(c))return a;r[t+a]=c}return a}function s$(r,e,t,n){return Ey(Ov(e,r.length-t),r,t,n)}function a$(r,e,t,n){return Ey(b$(e),r,t,n)}function u$(r,e,t,n){return Ey(NC(e),r,t,n)}function c$(r,e,t,n){return Ey(v$(e,r.length-t),r,t,n)}Q.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let a=!1;for(;;)switch(i){case"hex":return o$(this,e,t,n);case"utf8":case"utf-8":return s$(this,e,t,n);case"ascii":case"latin1":case"binary":return a$(this,e,t,n);case"base64":return u$(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c$(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};Q.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function f$(r,e,t){return e===0&&t===r.length?Fv.fromByteArray(r):Fv.fromByteArray(r.slice(e,t))}function TC(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],a=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){let f,d,m,w;switch(c){case 1:o<128&&(a=o);break;case 2:f=r[i+1],(f&192)===128&&(w=(o&31)<<6|f&63,w>127&&(a=w));break;case 3:f=r[i+1],d=r[i+2],(f&192)===128&&(d&192)===128&&(w=(o&15)<<12|(f&63)<<6|d&63,w>2047&&(w<55296||w>57343)&&(a=w));break;case 4:f=r[i+1],d=r[i+2],m=r[i+3],(f&192)===128&&(d&192)===128&&(m&192)===128&&(w=(o&15)<<18|(f&63)<<12|(d&63)<<6|m&63,w>65535&&w<1114112&&(a=w))}}a===null?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=c}return l$(n)}var PC=4096;function l$(r){let e=r.length;if(e<=PC)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=PC));return t}function h$(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function p$(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function d$(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=_$[r[o]];return i}function m$(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}Q.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,Q.prototype),i};function on(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}Q.prototype.readUintLE=Q.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||on(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return i};Q.prototype.readUintBE=Q.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||on(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};Q.prototype.readUint8=Q.prototype.readUInt8=function(e,t){return e=e>>>0,t||on(e,1,this.length),this[e]};Q.prototype.readUint16LE=Q.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||on(e,2,this.length),this[e]|this[e+1]<<8};Q.prototype.readUint16BE=Q.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||on(e,2,this.length),this[e]<<8|this[e+1]};Q.prototype.readUint32LE=Q.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||on(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Q.prototype.readUint32BE=Q.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||on(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Q.prototype.readBigUInt64LE=Xa(function(e){e=e>>>0,ul(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&dp(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});Q.prototype.readBigUInt64BE=Xa(function(e){e=e>>>0,ul(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&dp(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});Q.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||on(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};Q.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||on(e,t,this.length);let i=t,o=1,a=this[e+--i];for(;i>0&&(o*=256);)a+=this[e+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};Q.prototype.readInt8=function(e,t){return e=e>>>0,t||on(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Q.prototype.readInt16LE=function(e,t){e=e>>>0,t||on(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Q.prototype.readInt16BE=function(e,t){e=e>>>0,t||on(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Q.prototype.readInt32LE=function(e,t){return e=e>>>0,t||on(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Q.prototype.readInt32BE=function(e,t){return e=e>>>0,t||on(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Q.prototype.readBigInt64LE=Xa(function(e){e=e>>>0,ul(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&dp(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});Q.prototype.readBigInt64BE=Xa(function(e){e=e>>>0,ul(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&dp(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});Q.prototype.readFloatLE=function(e,t){return e=e>>>0,t||on(e,4,this.length),al.read(this,e,!0,23,4)};Q.prototype.readFloatBE=function(e,t){return e=e>>>0,t||on(e,4,this.length),al.read(this,e,!1,23,4)};Q.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||on(e,8,this.length),al.read(this,e,!0,52,8)};Q.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||on(e,8,this.length),al.read(this,e,!1,52,8)};function Zn(r,e,t,n,i,o){if(!Q.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}Q.prototype.writeUintLE=Q.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Zn(this,e,t,n,c,0)}let o=1,a=0;for(this[t]=e&255;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n};Q.prototype.writeUintBE=Q.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Zn(this,e,t,n,c,0)}let o=n-1,a=1;for(this[t+o]=e&255;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n};Q.prototype.writeUint8=Q.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Zn(this,e,t,1,255,0),this[t]=e&255,t+1};Q.prototype.writeUint16LE=Q.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Zn(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};Q.prototype.writeUint16BE=Q.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Zn(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};Q.prototype.writeUint32LE=Q.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Zn(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};Q.prototype.writeUint32BE=Q.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Zn(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function kC(r,e,t,n,i){LC(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,t}function FC(r,e,t,n,i){LC(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=a,a=a>>8,r[t+2]=a,a=a>>8,r[t+1]=a,a=a>>8,r[t]=a,t+8}Q.prototype.writeBigUInt64LE=Xa(function(e,t=0){return kC(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});Q.prototype.writeBigUInt64BE=Xa(function(e,t=0){return FC(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});Q.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*n-1);Zn(this,e,t,n,f-1,-f)}let o=0,a=1,c=0;for(this[t]=e&255;++o<n&&(a*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};Q.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*n-1);Zn(this,e,t,n,f-1,-f)}let o=n-1,a=1,c=0;for(this[t+o]=e&255;--o>=0&&(a*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};Q.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Zn(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};Q.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Zn(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};Q.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Zn(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};Q.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Zn(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};Q.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Zn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};Q.prototype.writeBigInt64LE=Xa(function(e,t=0){return kC(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Q.prototype.writeBigInt64BE=Xa(function(e,t=0){return FC(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function RC(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function BC(r,e,t,n,i){return e=+e,t=t>>>0,i||RC(r,e,t,4,34028234663852886e22,-34028234663852886e22),al.write(r,e,t,n,23,4),t+4}Q.prototype.writeFloatLE=function(e,t,n){return BC(this,e,t,!0,n)};Q.prototype.writeFloatBE=function(e,t,n){return BC(this,e,t,!1,n)};function OC(r,e,t,n,i){return e=+e,t=t>>>0,i||RC(r,e,t,8,17976931348623157e292,-17976931348623157e292),al.write(r,e,t,n,52,8),t+8}Q.prototype.writeDoubleLE=function(e,t,n){return OC(this,e,t,!0,n)};Q.prototype.writeDoubleBE=function(e,t,n){return OC(this,e,t,!1,n)};Q.prototype.copy=function(e,t,n,i){if(!Q.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};Q.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!Q.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let a=e.charCodeAt(0);(i==="utf8"&&a<128||i==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let a=Q.isBuffer(e)?e:Q.from(e,i),c=a.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%c]}return this};var sl={};function Uv(r,e,t){sl[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Uv("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Uv("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Uv("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=SC(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=SC(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function SC(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function y$(r,e,t){ul(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&dp(e,r.length-(t+1))}function LC(r,e,t,n,i,o){if(r>t||r<e){let a=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${a} and < 2${a} ** ${(o+1)*8}${a}`:c=`>= -(2${a} ** ${(o+1)*8-1}${a}) and < 2 ** ${(o+1)*8-1}${a}`:c=`>= ${e}${a} and <= ${t}${a}`,new sl.ERR_OUT_OF_RANGE("value",c,r)}y$(n,i,o)}function ul(r,e){if(typeof r!="number")throw new sl.ERR_INVALID_ARG_TYPE(e,"number",r)}function dp(r,e,t){throw Math.floor(r)!==r?(ul(r,t),new sl.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new sl.ERR_BUFFER_OUT_OF_BOUNDS:new sl.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var g$=/[^+/0-9A-Za-z-_]/g;function w$(r){if(r=r.split("=")[0],r=r.trim().replace(g$,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Ov(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function b$(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function v$(r,e){let t,n,i,o=[];for(let a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function NC(r){return Fv.toByteArray(w$(r))}function Ey(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function ys(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Mv(r){return r!==r}var _$=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function Xa(r){return typeof BigInt>"u"?x$:r}function x$(){throw new Error("BigInt not supported")}});var io=ue(mr=>{"use strict";h();p();var E$=mr&&mr.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P$=mr&&mr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mr,"__esModule",{value:!0});var Nn=P$(gC()),S$=mc();function D$(r,e){for(var t=new Array(r),n=typeof e=="function"?e:function(){return e},i=0;i<r;i++)t[i]=n();return t}mr.allocateArray=D$;function Kv(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=ra());var n=Nn.default.h64(r,t+1),i=Nn.default.h64(r,t+2);if(e)return{first:n.toNumber(),second:i.toNumber()};var o=n.toString(16);o.length<16&&(o="0".repeat(16-o.length)+o);var a=i.toString(16);return a.length<16&&(a="0".repeat(16-a.length)+a),{first:Number(o),second:Number(a)}}mr.hashTwice=Kv;function A$(r,e){e===void 0&&(e=ra());var t=Nn.default.h64(r,e+1),n=Nn.default.h64(r,e+2),i=t.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{first:i,second:o}}mr.hashTwiceAsString=A$;function C$(r,e){e===void 0&&(e=ra());var t=Nn.default.h64(r,e+1),n=Nn.default.h64(r,e+2),i=t.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{int:{first:t.toNumber(),second:n.toNumber()},string:{first:i,second:o}}}mr.allInOneHashTwice=C$;function jv(r,e,t,n){return Math.abs((e+r*t)%n)}mr.doubleHashing=jv;function I$(r,e,t,n){n===void 0&&(n=ra());function i(o,a,c,f,d){if(d===void 0&&(d=[]),d.length===f)return d;var m=Kv(a,!0,n+c%o),w=jv(o,m.first,m.second,c);return d.includes(w)||d.push(w),i(o+1,a,c,f,d)}return i(1,r,e,t)}mr.getDistinctIndices=I$;function T$(r,e,t,n){n===void 0&&(n=ra());for(var i=[],o=1;o<=t;o++){var a=Kv(r,!0,n+e%o);i.push(jv(o,a.first,a.second,e))}if(i.length!==t)throw new Error("report this, please, shouldnt be of different size");return i}mr.getIndices=T$;function k$(r,e,t){t===void 0&&(t=Math.random),r=Math.ceil(r),e=Math.floor(e);var n=t();return Math.floor(n*(e-r+1))+r}mr.randomInt=k$;function F$(r,e){for(var t=Math.max(r.length,e.length),n=S$.Buffer.allocUnsafe(t).fill(0),i=0;i<t;++i)i<r.length&&i<e.length?n[t-i-1]=r[r.length-i-1]^e[e.length-i-1]:i<r.length&&i>=e.length?n[t-i-1]^=r[r.length-i-1]:i<e.length&&i>=r.length&&(n[t-i-1]^=e[e.length-i-1]);for(var o=0,a=n.values(),c=a.next();!c.done&&c.value===0;)o++,c=a.next();var f=n.slice(o);return f}mr.xorBuffer=F$;function R$(r){var e,t;if(r===null||!r)return!0;try{for(var n=E$(r),i=n.next();!i.done;i=n.next()){var o=i.value;if(o!==0)return!1}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return!0}mr.isEmptyBuffer=R$;function B$(r,e,t){switch(e===void 0&&(e=ra()),t){case 32:return Nn.default.h32(r,e).toNumber();case 64:return Nn.default.h64(r,e).toNumber();default:return Nn.default.h64(r,e).toNumber()}}mr.hashAsInt=B$;function O$(r,e,t,n){e===void 0&&(e=ra()),t===void 0&&(t=16),n===void 0&&(n=64);var i;switch(n){case 32:i=Nn.default.h32(r,e);break;case 64:i=Nn.default.h64(r,e);break;default:i=Nn.default.h64(r,e);break}var o="";return t===16?(o=i.toString(t),o.length<n/4&&(o="0".repeat(n/4-o.length)+o)):t===2&&(o=$v(i.toString(16)),o.length<n&&(o="0".repeat(n-o.length)+o)),o}mr.hashAsString=O$;function L$(r,e,t,n){e===void 0&&(e=ra()),t===void 0&&(t=16),n===void 0&&(n=64);var i;switch(n){case 32:i=Nn.default.h32(r,e);break;case 64:i=Nn.default.h64(r,e);break;default:i=Nn.default.h64(r,e);break}var o="";return t===16?(o=i.toString(t),o.length<n/4&&(o="0".repeat(n/4-o.length)+o)):t===2&&(o=$v(i.toString(16)),o.length<n&&(o="0".repeat(n-o.length)+o)),{int:i.toNumber(),string:o}}mr.hashIntAndString=L$;function ra(){return 78187493520}mr.getDefaultSeed=ra;function N$(r){return Math.ceil(Math.pow(2,Math.floor(Math.log(r)/Math.log(2))))}mr.power2=N$;function $v(r){return parseInt(r,16).toString(2)}mr.hex2bin=$v;function U$(r){return[128,64,32,16,8,4,2,1].map(function(e){return(e&r)>0?1:0})}mr.uint8ToBits=U$;function M$(r){return r.reduce(function(e,t,n){if(t===0)return e;if(t===1)return e+Math.pow(2,7-n);throw new Error("Not binary")},0)}mr.bitsToUint8=M$});var MC=ue((UC,zv)=>{h();p();(function(r,e,t){function n(c){var f=this,d=a();f.next=function(){var m=2091639*f.s0+f.c*23283064365386963e-26;return f.s0=f.s1,f.s1=f.s2,f.s2=m-(f.c=m|0)},f.c=1,f.s0=d(" "),f.s1=d(" "),f.s2=d(" "),f.s0-=d(c),f.s0<0&&(f.s0+=1),f.s1-=d(c),f.s1<0&&(f.s1+=1),f.s2-=d(c),f.s2<0&&(f.s2+=1),d=null}function i(c,f){return f.c=c.c,f.s0=c.s0,f.s1=c.s1,f.s2=c.s2,f}function o(c,f){var d=new n(c),m=f&&f.state,w=d.next;return w.int32=function(){return d.next()*4294967296|0},w.double=function(){return w()+(w()*2097152|0)*11102230246251565e-32},w.quick=w,m&&(typeof m=="object"&&i(m,d),w.state=function(){return i(d,{})}),w}function a(){var c=4022871197,f=function(d){d=String(d);for(var m=0;m<d.length;m++){c+=d.charCodeAt(m);var w=.02519603282416938*c;c=w>>>0,w-=c,w*=c,c=w>>>0,w-=c,c+=w*4294967296}return(c>>>0)*23283064365386963e-26};return f}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.alea=o})(UC,typeof zv=="object"&&zv,typeof define=="function"&&define)});var jC=ue((KC,qv)=>{h();p();(function(r,e,t){function n(a){var c=this,f="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var m=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^m^m>>>8},a===(a|0)?c.x=a:f+=a;for(var d=0;d<f.length+64;d++)c.x^=f.charCodeAt(d)|0,c.next()}function i(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c}function o(a,c){var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,E=(f.next()>>>0)/4294967296,T=(w+E)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(typeof d=="object"&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor128=o})(KC,typeof qv=="object"&&qv,typeof define=="function"&&define)});var zC=ue(($C,Wv)=>{h();p();(function(r,e,t){function n(a){var c=this,f="";c.next=function(){var m=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(m^m<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,a===(a|0)?c.x=a:f+=a;for(var d=0;d<f.length+64;d++)c.x^=f.charCodeAt(d)|0,d==f.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c.v=a.v,c.d=a.d,c}function o(a,c){var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,E=(f.next()>>>0)/4294967296,T=(w+E)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(typeof d=="object"&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorwow=o})($C,typeof Wv=="object"&&Wv,typeof define=="function"&&define)});var WC=ue((qC,Vv)=>{h();p();(function(r,e,t){function n(a){var c=this;c.next=function(){var d=c.x,m=c.i,w,E,T;return w=d[m],w^=w>>>7,E=w^w<<24,w=d[m+1&7],E^=w^w>>>10,w=d[m+3&7],E^=w^w>>>3,w=d[m+4&7],E^=w^w<<7,w=d[m+7&7],w=w^w<<13,E^=w^w<<9,d[m]=E,c.i=m+1&7,E};function f(d,m){var w,E,T=[];if(m===(m|0))E=T[0]=m;else for(m=""+m,w=0;w<m.length;++w)T[w&7]=T[w&7]<<15^m.charCodeAt(w)+T[w+1&7]<<13;for(;T.length<8;)T.push(0);for(w=0;w<8&&T[w]===0;++w);for(w==8?E=T[7]=-1:E=T[w],d.x=T,d.i=0,w=256;w>0;--w)d.next()}f(c,a)}function i(a,c){return c.x=a.x.slice(),c.i=a.i,c}function o(a,c){a==null&&(a=+new Date);var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,E=(f.next()>>>0)/4294967296,T=(w+E)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(d.x&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorshift7=o})(qC,typeof Vv=="object"&&Vv,typeof define=="function"&&define)});var HC=ue((VC,Hv)=>{h();p();(function(r,e,t){function n(a){var c=this;c.next=function(){var d=c.w,m=c.X,w=c.i,E,T;return c.w=d=d+1640531527|0,T=m[w+34&127],E=m[w=w+1&127],T^=T<<13,E^=E<<17,T^=T>>>15,E^=E>>>12,T=m[w]=T^E,c.i=w,T+(d^d>>>16)|0};function f(d,m){var w,E,T,F,U,pe=[],he=128;for(m===(m|0)?(E=m,m=null):(m=m+"\0",E=0,he=Math.max(he,m.length)),T=0,F=-32;F<he;++F)m&&(E^=m.charCodeAt((F+32)%m.length)),F===0&&(U=E),E^=E<<10,E^=E>>>15,E^=E<<4,E^=E>>>13,F>=0&&(U=U+1640531527|0,w=pe[F&127]^=E+U,T=w==0?T+1:0);for(T>=128&&(pe[(m&&m.length||0)&127]=-1),T=127,F=4*128;F>0;--F)E=pe[T+34&127],w=pe[T=T+1&127],E^=E<<13,w^=w<<17,E^=E>>>15,w^=w>>>12,pe[T]=E^w;d.w=U,d.X=pe,d.i=T}f(c,a)}function i(a,c){return c.i=a.i,c.w=a.w,c.X=a.X.slice(),c}function o(a,c){a==null&&(a=+new Date);var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,E=(f.next()>>>0)/4294967296,T=(w+E)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(d.X&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor4096=o})(VC,typeof Hv=="object"&&Hv,typeof define=="function"&&define)});var YC=ue((GC,Gv)=>{h();p();(function(r,e,t){function n(a){var c=this,f="";c.next=function(){var m=c.b,w=c.c,E=c.d,T=c.a;return m=m<<25^m>>>7^w,w=w-E|0,E=E<<24^E>>>8^T,T=T-m|0,c.b=m=m<<20^m>>>12^w,c.c=w=w-E|0,c.d=E<<16^w>>>16^T,c.a=T-m|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,a===Math.floor(a)?(c.a=a/4294967296|0,c.b=a|0):f+=a;for(var d=0;d<f.length+20;d++)c.b^=f.charCodeAt(d)|0,c.next()}function i(a,c){return c.a=a.a,c.b=a.b,c.c=a.c,c.d=a.d,c}function o(a,c){var f=new n(a),d=c&&c.state,m=function(){return(f.next()>>>0)/4294967296};return m.double=function(){do var w=f.next()>>>11,E=(f.next()>>>0)/4294967296,T=(w+E)/(1<<21);while(T===0);return T},m.int32=f.next,m.quick=m,d&&(typeof d=="object"&&i(d,f),m.state=function(){return i(f,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.tychei=o})(GC,typeof Gv=="object"&&Gv,typeof define=="function"&&define)});var Yv=ue(()=>{h();p()});var XC=ue((JC,Py)=>{h();p();(function(r,e,t){var n=256,i=6,o=52,a="random",c=t.pow(n,i),f=t.pow(2,o),d=f*2,m=n-1,w;function E(re,be,Pe){var Y=[];be=be==!0?{entropy:!0}:be||{};var ge=pe(U(be.entropy?[re,De(e)]:re??he(),3),Y),_e=new T(Y),Me=function(){for(var vt=_e.g(i),Nt=c,Bt=0;vt<f;)vt=(vt+Bt)*n,Nt*=n,Bt=_e.g(1);for(;vt>=d;)vt/=2,Nt/=2,Bt>>>=1;return(vt+Bt)/Nt};return Me.int32=function(){return _e.g(4)|0},Me.quick=function(){return _e.g(4)/4294967296},Me.double=Me,pe(De(_e.S),e),(be.pass||Pe||function(vt,Nt,Bt,qt){return qt&&(qt.S&&F(qt,_e),vt.state=function(){return F(_e,{})}),Bt?(t[a]=vt,Nt):vt})(Me,ge,"global"in be?be.global:this==t,be.state)}function T(re){var be,Pe=re.length,Y=this,ge=0,_e=Y.i=Y.j=0,Me=Y.S=[];for(Pe||(re=[Pe++]);ge<n;)Me[ge]=ge++;for(ge=0;ge<n;ge++)Me[ge]=Me[_e=m&_e+re[ge%Pe]+(be=Me[ge])],Me[_e]=be;(Y.g=function(vt){for(var Nt,Bt=0,qt=Y.i,hr=Y.j,Mt=Y.S;vt--;)Nt=Mt[qt=m&qt+1],Bt=Bt*n+Mt[m&(Mt[qt]=Mt[hr=m&hr+Nt])+(Mt[hr]=Nt)];return Y.i=qt,Y.j=hr,Bt})(n)}function F(re,be){return be.i=re.i,be.j=re.j,be.S=re.S.slice(),be}function U(re,be){var Pe=[],Y=typeof re,ge;if(be&&Y=="object")for(ge in re)try{Pe.push(U(re[ge],be-1))}catch{}return Pe.length?Pe:Y=="string"?re:re+"\0"}function pe(re,be){for(var Pe=re+"",Y,ge=0;ge<Pe.length;)be[m&ge]=m&(Y^=be[m&ge]*19)+Pe.charCodeAt(ge++);return De(be)}function he(){try{var re;return w&&(re=w.randomBytes)?re=re(n):(re=new Uint8Array(n),(r.crypto||r.msCrypto).getRandomValues(re)),De(re)}catch{var be=r.navigator,Pe=be&&be.plugins;return[+new Date,r,Pe,r.screen,De(e)]}}function De(re){return String.fromCharCode.apply(0,re)}if(pe(t.random(),e),typeof Py=="object"&&Py.exports){Py.exports=E;try{w=Yv()}catch{}}else typeof define=="function"&&define.amd?define(function(){return E}):t["seed"+a]=E})(typeof self<"u"?self:JC,[],Math)});var ZC=ue(($se,QC)=>{h();p();var K$=MC(),j$=jC(),$$=zC(),z$=WC(),q$=HC(),W$=YC(),yc=XC();yc.alea=K$;yc.xor128=j$;yc.xorwow=$$;yc.xorshift7=z$;yc.xor4096=q$;yc.tychei=W$;QC.exports=yc});var Ro=ue(gc=>{"use strict";h();p();var V$=gc&&gc.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},H$=gc&&gc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gc,"__esModule",{value:!0});var G$=V$(io()),e8=H$(ZC()),Y$=function(){function r(){this._seed=G$.getDefaultSeed(),this._rng=e8.default(""+this._seed)}return Object.defineProperty(r.prototype,"seed",{get:function(){return this._seed},set:function(e){this._seed=e,this._rng=e8.default(""+this._seed)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"random",{get:function(){return this._rng},enumerable:!0,configurable:!0}),r.prototype.saveAsJSON=function(){throw new Error("not-implemented")},r.fromJSON=function(e){throw new Error("not-implemented")},r}();gc.default=Y$});var r8=ue(()=>{h();p();var t8;(function(r){(function(e){var t=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(r);typeof t.Reflect>"u"?t.Reflect=r:n=i(t.Reflect,n),e(n);function i(o,a){return function(c,f){typeof o[c]!="function"&&Object.defineProperty(o,c,{configurable:!0,writable:!0,value:f}),a&&a(c,f)}}})(function(e){var t=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",c={__proto__:[]}instanceof Array,f=!a&&!c,d={create:a?function(){return cn(Object.create(null))}:c?function(){return cn({__proto__:null})}:function(){return cn({})},has:f?function($,J){return t.call($,J)}:function($,J){return J in $},get:f?function($,J){return t.call($,J)?$[J]:void 0}:function($,J){return $[J]}},m=Object.getPrototypeOf(Function),w=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",E=!w&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:zn(),T=!w&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:qn(),F=!w&&typeof WeakMap=="function"?WeakMap:go(),U=new F;function pe($,J,le,ve){if(nr(le)){if(!Ki($))throw new TypeError;if(!Vr(J))throw new TypeError;return vt($,J)}else{if(!Ki($))throw new TypeError;if(!Ve(J))throw new TypeError;if(!Ve(ve)&&!nr(ve)&&!Wt(ve))throw new TypeError;return Wt(ve)&&(ve=void 0),le=Br(le),Nt($,J,le,ve)}}e("decorate",pe);function he($,J){function le(ve,je){if(!Ve(ve))throw new TypeError;if(!nr(je)&&!yo(je))throw new TypeError;Tn($,J,ve,je)}return le}e("metadata",he);function De($,J,le,ve){if(!Ve(le))throw new TypeError;return nr(ve)||(ve=Br(ve)),Tn($,J,le,ve)}e("defineMetadata",De);function re($,J,le){if(!Ve(J))throw new TypeError;return nr(le)||(le=Br(le)),qt($,J,le)}e("hasMetadata",re);function be($,J,le){if(!Ve(J))throw new TypeError;return nr(le)||(le=Br(le)),hr($,J,le)}e("hasOwnMetadata",be);function Pe($,J,le){if(!Ve(J))throw new TypeError;return nr(le)||(le=Br(le)),Mt($,J,le)}e("getMetadata",Pe);function Y($,J,le){if(!Ve(J))throw new TypeError;return nr(le)||(le=Br(le)),jr($,J,le)}e("getOwnMetadata",Y);function ge($,J){if(!Ve($))throw new TypeError;return nr(J)||(J=Br(J)),Rr($,J)}e("getMetadataKeys",ge);function _e($,J){if(!Ve($))throw new TypeError;return nr(J)||(J=Br(J)),Wr($,J)}e("getOwnMetadataKeys",_e);function Me($,J,le){if(!Ve(J))throw new TypeError;nr(le)||(le=Br(le));var ve=Bt(J,le,!1);if(nr(ve)||!ve.delete($))return!1;if(ve.size>0)return!0;var je=U.get(J);return je.delete(le),je.size>0||U.delete(J),!0}e("deleteMetadata",Me);function vt($,J){for(var le=$.length-1;le>=0;--le){var ve=$[le],je=ve(J);if(!nr(je)&&!Wt(je)){if(!Vr(je))throw new TypeError;J=je}}return J}function Nt($,J,le,ve){for(var je=$.length-1;je>=0;--je){var or=$[je],tt=or(J,le,ve);if(!nr(tt)&&!Wt(tt)){if(!Ve(tt))throw new TypeError;ve=tt}}return ve}function Bt($,J,le){var ve=U.get($);if(nr(ve)){if(!le)return;ve=new E,U.set($,ve)}var je=ve.get(J);if(nr(je)){if(!le)return;je=new E,ve.set(J,je)}return je}function qt($,J,le){var ve=hr($,J,le);if(ve)return!0;var je=ur(J);return Wt(je)?!1:qt($,je,le)}function hr($,J,le){var ve=Bt(J,le,!1);return nr(ve)?!1:Mi(ve.has($))}function Mt($,J,le){var ve=hr($,J,le);if(ve)return jr($,J,le);var je=ur(J);if(!Wt(je))return Mt($,je,le)}function jr($,J,le){var ve=Bt(J,le,!1);if(!nr(ve))return ve.get($)}function Tn($,J,le,ve){var je=Bt(le,ve,!0);je.set($,J)}function Rr($,J){var le=Wr($,J),ve=ur($);if(ve===null)return le;var je=Rr(ve,J);if(je.length<=0)return le;if(le.length<=0)return je;for(var or=new T,tt=[],ut=0,qe=le;ut<qe.length;ut++){var yt=qe[ut],pt=or.has(yt);pt||(or.add(yt),tt.push(yt))}for(var Pr=0,wo=je;Pr<wo.length;Pr++){var yt=wo[Pr],pt=or.has(yt);pt||(or.add(yt),tt.push(yt))}return tt}function Wr($,J){var le=[],ve=Bt($,J,!1);if(nr(ve))return le;for(var je=ve.keys(),or=kn(je),tt=0;;){var ut=Sa(or);if(!ut)return le.length=tt,le;var qe=_n(ut);try{le[tt]=qe}catch(yt){try{Qr(or)}finally{throw yt}}tt++}}function Fs($){if($===null)return 1;switch(typeof $){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return $===null?1:6;default:return 6}}function nr($){return $===void 0}function Wt($){return $===null}function wr($){return typeof $=="symbol"}function Ve($){return typeof $=="object"?$!==null:typeof $=="function"}function Xr($,J){switch(Fs($)){case 0:return $;case 1:return $;case 2:return $;case 3:return $;case 4:return $;case 5:return $}var le=J===3?"string":J===5?"number":"default",ve=Pa($,i);if(ve!==void 0){var je=ve.call($,le);if(Ve(je))throw new TypeError;return je}return Ui($,le==="default"?"number":le)}function Ui($,J){if(J==="string"){var le=$.toString;if(vn(le)){var ve=le.call($);if(!Ve(ve))return ve}var je=$.valueOf;if(vn(je)){var ve=je.call($);if(!Ve(ve))return ve}}else{var je=$.valueOf;if(vn(je)){var ve=je.call($);if(!Ve(ve))return ve}var or=$.toString;if(vn(or)){var ve=or.call($);if(!Ve(ve))return ve}}throw new TypeError}function Mi($){return!!$}function ts($){return""+$}function Br($){var J=Xr($,3);return wr(J)?J:ts(J)}function Ki($){return Array.isArray?Array.isArray($):$ instanceof Object?$ instanceof Array:Object.prototype.toString.call($)==="[object Array]"}function vn($){return typeof $=="function"}function Vr($){return typeof $=="function"}function yo($){switch(Fs($)){case 3:return!0;case 4:return!0;default:return!1}}function Pa($,J){var le=$[J];if(le!=null){if(!vn(le))throw new TypeError;return le}}function kn($){var J=Pa($,o);if(!vn(J))throw new TypeError;var le=J.call($);if(!Ve(le))throw new TypeError;return le}function _n($){return $.value}function Sa($){var J=$.next();return J.done?!1:J}function Qr($){var J=$.return;J&&J.call($)}function ur($){var J=Object.getPrototypeOf($);if(typeof $!="function"||$===m||J!==m)return J;var le=$.prototype,ve=le&&Object.getPrototypeOf(le);if(ve==null||ve===Object.prototype)return J;var je=ve.constructor;return typeof je!="function"||je===$?J:je}function zn(){var $={},J=[],le=function(){function tt(ut,qe,yt){this._index=0,this._keys=ut,this._values=qe,this._selector=yt}return tt.prototype["@@iterator"]=function(){return this},tt.prototype[o]=function(){return this},tt.prototype.next=function(){var ut=this._index;if(ut>=0&&ut<this._keys.length){var qe=this._selector(this._keys[ut],this._values[ut]);return ut+1>=this._keys.length?(this._index=-1,this._keys=J,this._values=J):this._index++,{value:qe,done:!1}}return{value:void 0,done:!0}},tt.prototype.throw=function(ut){throw this._index>=0&&(this._index=-1,this._keys=J,this._values=J),ut},tt.prototype.return=function(ut){return this._index>=0&&(this._index=-1,this._keys=J,this._values=J),{value:ut,done:!0}},tt}();return function(){function tt(){this._keys=[],this._values=[],this._cacheKey=$,this._cacheIndex=-2}return Object.defineProperty(tt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),tt.prototype.has=function(ut){return this._find(ut,!1)>=0},tt.prototype.get=function(ut){var qe=this._find(ut,!1);return qe>=0?this._values[qe]:void 0},tt.prototype.set=function(ut,qe){var yt=this._find(ut,!0);return this._values[yt]=qe,this},tt.prototype.delete=function(ut){var qe=this._find(ut,!1);if(qe>=0){for(var yt=this._keys.length,pt=qe+1;pt<yt;pt++)this._keys[pt-1]=this._keys[pt],this._values[pt-1]=this._values[pt];return this._keys.length--,this._values.length--,ut===this._cacheKey&&(this._cacheKey=$,this._cacheIndex=-2),!0}return!1},tt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=$,this._cacheIndex=-2},tt.prototype.keys=function(){return new le(this._keys,this._values,ve)},tt.prototype.values=function(){return new le(this._keys,this._values,je)},tt.prototype.entries=function(){return new le(this._keys,this._values,or)},tt.prototype["@@iterator"]=function(){return this.entries()},tt.prototype[o]=function(){return this.entries()},tt.prototype._find=function(ut,qe){return this._cacheKey!==ut&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=ut)),this._cacheIndex<0&&qe&&(this._cacheIndex=this._keys.length,this._keys.push(ut),this._values.push(void 0)),this._cacheIndex},tt}();function ve(tt,ut){return tt}function je(tt,ut){return ut}function or(tt,ut){return[tt,ut]}}function qn(){return function(){function $(){this._map=new E}return Object.defineProperty($.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),$.prototype.has=function(J){return this._map.has(J)},$.prototype.add=function(J){return this._map.set(J,J),this},$.prototype.delete=function(J){return this._map.delete(J)},$.prototype.clear=function(){this._map.clear()},$.prototype.keys=function(){return this._map.keys()},$.prototype.values=function(){return this._map.values()},$.prototype.entries=function(){return this._map.entries()},$.prototype["@@iterator"]=function(){return this.keys()},$.prototype[o]=function(){return this.keys()},$}()}function go(){var $=16,J=d.create(),le=ve();return function(){function qe(){this._key=ve()}return qe.prototype.has=function(yt){var pt=je(yt,!1);return pt!==void 0?d.has(pt,this._key):!1},qe.prototype.get=function(yt){var pt=je(yt,!1);return pt!==void 0?d.get(pt,this._key):void 0},qe.prototype.set=function(yt,pt){var Pr=je(yt,!0);return Pr[this._key]=pt,this},qe.prototype.delete=function(yt){var pt=je(yt,!1);return pt!==void 0?delete pt[this._key]:!1},qe.prototype.clear=function(){this._key=ve()},qe}();function ve(){var qe;do qe="@@WeakMap@@"+ut();while(d.has(J,qe));return J[qe]=!0,qe}function je(qe,yt){if(!t.call(qe,le)){if(!yt)return;Object.defineProperty(qe,le,{value:d.create()})}return qe[le]}function or(qe,yt){for(var pt=0;pt<yt;++pt)qe[pt]=Math.random()*255|0;return qe}function tt(qe){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(qe)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(qe)):or(new Uint8Array(qe),qe):or(new Array(qe),qe)}function ut(){var qe=tt($);qe[6]=qe[6]&79|64,qe[8]=qe[8]&191|128;for(var yt="",pt=0;pt<$;++pt){var Pr=qe[pt];(pt===4||pt===6||pt===8)&&(yt+="-"),Pr<16&&(yt+="0"),yt+=Pr.toString(16).toLowerCase()}return yt}}function cn($){return $.__=void 0,delete $.__,$}})})(t8||(t8={}))});var vi=ue(oo=>{"use strict";h();p();var J$=oo&&oo.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},X$=oo&&oo.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(J$(arguments[e]));return r};Object.defineProperty(oo,"__esModule",{value:!0});r8();function mp(r){return r==null?r:Array.isArray(r)?r.map(mp):typeof r=="object"?"saveAsJSON"in r?r.saveAsJSON():Object.assign({},r):r}oo.cloneField=mp;function Q$(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(n){var i={type:r};return e.forEach(function(o){i[o]=mp(n[o])}),i}}oo.cloneObject=Q$;function Z$(r){return function(e){return e.prototype.saveAsJSON=function(){return r.export(this)},e.fromJSON=function(t){return r.import(t)},e}}oo.Exportable=Z$;var Jv=Symbol("bloom-filters:exportable:class-name"),fl=Symbol("bloom-filters:exportable:fields"),ll=Symbol("bloom-filters:exportable:constructor-parameters");function ez(r,e){return r===void 0&&(r=mp),e===void 0&&(e=function(t){return t}),function(t,n){var i=[];Reflect.hasMetadata(fl,t)&&(i=Reflect.getMetadata(fl,t)),i.push({name:n,exporter:r,importer:e}),Reflect.defineMetadata(fl,i,t)}}oo.Field=ez;function tz(r){return function(e,t,n){var i=new Map;Reflect.hasMetadata(ll,e)&&(i=Reflect.getMetadata(ll,e)),i.set(r,n),Reflect.defineMetadata(ll,i,e)}}oo.Parameter=tz;function rz(r,e){return e===void 0&&(e=[]),function(t){if(Reflect.defineMetadata(Jv,r,t.prototype),!Reflect.hasMetadata(fl,t.prototype)||e.length===0)throw new SyntaxError("No exported fields declared when @AutoExportable is called");Reflect.hasMetadata(ll,t)||Reflect.defineMetadata(ll,new Map,t),t.prototype.saveAsJSON=function(){var n=this,i={type:Reflect.getMetadata(Jv,t.prototype)},o=Reflect.getMetadata(fl,t.prototype);return o.forEach(function(a){i[a.name]=a.exporter(n[a.name])}),e.forEach(function(a){i[a]=mp(n[a])}),i},t.fromJSON=function(n){var i=Reflect.getMetadata(Jv,t.prototype),o=Reflect.getMetadata(ll,t),a=Reflect.getMetadata(fl,t.prototype);if(n.type!==i)throw new Error("Cannot create an object "+i+' from a JSON export with type "'+n.type+'"');var c=[],f=[];e.map(function(m){return{name:m,importer:function(w){return w}}}).concat(a).forEach(function(m){if(!(m.name in n))throw new Error('Invalid import: required field "'+m+'" not found in JSON export "'+n+'"');o.has(m.name)?c[o.get(m.name)]=m.importer(n[m.name]):f.push({name:m.name,value:m.importer(n[m.name])})});var d=new(t.bind.apply(t,X$([void 0],c)));return f.forEach(function(m){d[m.name]=m.value}),d}}}oo.AutoExportable=rz});var Dy=ue(Sy=>{"use strict";h();p();Object.defineProperty(Sy,"__esModule",{value:!0});function nz(r,e){return Math.ceil(-(r*Math.log(e)/Math.pow(Math.log(2),2)))}Sy.optimalFilterSize=nz;function iz(r,e){return Math.ceil(r/e*Math.log(2))}Sy.optimalHashes=iz});var o8=ue(_i=>{"use strict";h();p();var oz=_i&&_i.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yp=_i&&_i.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},gp=_i&&_i.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},n8=_i&&_i.__param||function(r,e){return function(t,n){e(t,n,r)}},sz=_i&&_i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_i,"__esModule",{value:!0});var az=sz(Ro()),wc=vi(),i8=Dy(),wp=io(),uz=function(r){oz(e,r);function e(n,i){var o=r.call(this)||this;if(i<1)throw new Error("A BloomFilter cannot uses less than one hash function, while you tried to use "+i+".");return o._size=n,o._nbHashes=i,o._filter=wp.allocateArray(o._size,0),o._length=0,o}t=e,e.create=function(n,i){var o=i8.optimalFilterSize(n,i),a=i8.optimalHashes(o,n);return new t(o,a)},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},e.fromBytes=function(n,i){for(var o=[],a=0;a<n.length;a++){var c=wp.uint8ToBits(n[a]);o=o.concat(c)}var f=new t(o.length,i);return f._filter=o,f},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=wp.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)this._filter[i[o]]=1;this._length++},e.prototype.has=function(n){for(var i=wp.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)if(!this._filter[i[o]])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes?!1:this._filter.every(function(i,o){return n._filter[o]===i})},e.prototype.toBytes=function(){for(var n=new Uint8Array(Math.ceil(this._size/8)),i=0;i<n.length;i++){var o=this._filter.slice(i*8,i*8+8);n[i]=wp.bitsToUint8(o)}return n};var t;return yp([wc.Field(),gp("design:type",Number)],e.prototype,"_size",void 0),yp([wc.Field(),gp("design:type",Number)],e.prototype,"_nbHashes",void 0),yp([wc.Field(),gp("design:type",Array)],e.prototype,"_filter",void 0),yp([wc.Field(),gp("design:type",Number)],e.prototype,"_length",void 0),e=t=yp([wc.AutoExportable("BloomFilter",["_seed"]),n8(0,wc.Parameter("_size")),n8(1,wc.Parameter("_nbHashes")),gp("design:paramtypes",[Number,Number])],e),e}(az.default);_i.default=uz});var u8=ue(xi=>{"use strict";h();p();var cz=xi&&xi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bp=xi&&xi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vp=xi&&xi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},s8=xi&&xi.__param||function(r,e){return function(t,n){e(t,n,r)}},fz=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var lz=fz(Ro()),bc=vi(),a8=Dy(),Ay=io(),hz=function(r){cz(e,r);function e(n,i){var o=r.call(this)||this;if(i<1)throw new Error("A CountingBloomFilter must used at least one hash function, but you tried to use "+i+" functions. Consider increasing it.");return o._size=n,o._nbHashes=i,o._filter=Ay.allocateArray(o._size,function(){return[0,0]}),o._length=0,o}t=e,e.create=function(n,i){var o=a8.optimalFilterSize(n,i);return new t(o,a8.optimalHashes(o,n))},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=Ay.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)this._filter[i[o]][1]+=1,this._filter[i[o]][1]>0&&(this._filter[i[o]][0]=1);this._length++},e.prototype.remove=function(n){for(var i=Ay.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=!0,a=0;a<i.length;a++)this._filter[i[a]][1]-=1,this._filter[i[a]][1]<=0&&(this._filter[i[a]][0]=0);return this._length--,o},e.prototype.has=function(n){for(var i=Ay.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)if(!this._filter[i[o]][0])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length?!1:this._filter.every(function(i,o){return n._filter[o][0]===i[0]&&n._filter[o][1]===i[1]})};var t;return bp([bc.Field(),vp("design:type",Number)],e.prototype,"_size",void 0),bp([bc.Field(),vp("design:type",Number)],e.prototype,"_nbHashes",void 0),bp([bc.Field(),vp("design:type",Array)],e.prototype,"_filter",void 0),bp([bc.Field(),vp("design:type",Number)],e.prototype,"_length",void 0),e=t=bp([bc.AutoExportable("CountingBloomFilter",["_seed"]),s8(0,bc.Parameter("_size")),s8(1,bc.Parameter("_nbHashes")),vp("design:paramtypes",[Number,Number])],e),e}(lz.default);xi.default=hz});var c8=ue(Ei=>{"use strict";h();p();var pz=Ei&&Ei.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qa=Ei&&Ei.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Za=Ei&&Ei.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Cy=Ei&&Ei.__param||function(r,e){return function(t,n){e(t,n,r)}},dz=Ei&&Ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ei,"__esModule",{value:!0});var mz=dz(Ro()),so=vi(),Iy=io();function yz(r,e){return Math.ceil(Math.log(r)/Math.log(e))}function gz(r,e,t){return Math.ceil(r*-Math.log(e)/(Math.log(t)*Math.log(1-t)))}function wz(r,e,t){return Math.ceil(r*(Math.log(e)*Math.log(1-e))/-(t*Math.log(e)))}var bz=function(r){pz(e,r);function e(n,i,o,a){var c=r.call(this)||this;return c._size=n,c._nbHashes=i,c._loadFactor=o,c._m=Math.ceil(c._size/c._nbHashes),c._filter=Iy.allocateArray(c._nbHashes,function(){return Iy.allocateArray(c._m,0)}),c._capacity=a!==void 0?a:wz(c._size,o,i),c._length=0,c}t=e,e.create=function(n,i,o){o===void 0&&(o=.5);var a=gz(n,i,o),c=yz(i,o);return new t(a,c,o,n)},e.from=function(n,i,o){o===void 0&&(o=.5);var a=Array.from(n),c=t.create(a.length,i,o);return a.forEach(function(f){return c.add(f)}),c},Object.defineProperty(e.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadFactor",{get:function(){return this._loadFactor},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=Iy.getIndices(n,this._m,this._nbHashes,this.seed),o=0;o<this._nbHashes;o++)this._filter[o][i[o]]=1;this._length++},e.prototype.has=function(n){for(var i=Iy.getIndices(n,this._m,this._nbHashes,this.seed),o=0;o<this._nbHashes;o++)if(!this._filter[o][i[o]])return!1;return!0},e.prototype.rate=function(){var n=this._currentload();return Math.pow(n,this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length||this._loadFactor!==n._loadFactor?!1:this._filter.every(function(i,o){return n._filter[o].every(function(a,c){return i[c]===a})})},e.prototype._currentload=function(){var n=this._filter.map(function(o){return o.reduce(function(a,c){return a+c},0)}),i=n.reduce(function(o,a){return o+a},0);return i/this._size};var t;return Qa([so.Field(),Za("design:type",Number)],e.prototype,"_size",void 0),Qa([so.Field(),Za("design:type",Number)],e.prototype,"_nbHashes",void 0),Qa([so.Field(),Za("design:type",Number)],e.prototype,"_loadFactor",void 0),Qa([so.Field(),Za("design:type",Number)],e.prototype,"_m",void 0),Qa([so.Field(),Za("design:type",Array)],e.prototype,"_filter",void 0),Qa([so.Field(),Za("design:type",Number)],e.prototype,"_capacity",void 0),Qa([so.Field(),Za("design:type",Number)],e.prototype,"_length",void 0),e=t=Qa([so.AutoExportable("PartitionedBloomFilter",["_seed"]),Cy(0,so.Parameter("_size")),Cy(1,so.Parameter("_nbHashes")),Cy(2,so.Parameter("_loadFactor")),Cy(3,so.Parameter("_capacity")),Za("design:paramtypes",[Number,Number,Number,Number])],e),e}(mz.default);Ei.default=bz});var Xv=ue(Un=>{"use strict";h();p();var vz=Un&&Un.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_p=Un&&Un.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},xp=Un&&Un.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},f8=Un&&Un.__param||function(r,e){return function(t,n){e(t,n,r)}},_z=Un&&Un.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xz=Un&&Un.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Un,"__esModule",{value:!0});var Ez=xz(Ro()),vc=vi(),Ty=io(),Pz=function(r){vz(e,r);function e(n,i){var o=r.call(this)||this;return o._columns=n,o._rows=i,o._matrix=Ty.allocateArray(o._rows,function(){return Ty.allocateArray(o._columns,0)}),o._allSums=0,o}t=e,e.create=function(n,i){i===void 0&&(i=.999);var o=Math.ceil(Math.E/n),a=Math.ceil(Math.log(1/i));return new t(o,a)},e.from=function(n,i,o){var a,c;o===void 0&&(o=.999);var f=t.create(i,o);try{for(var d=_z(n),m=d.next();!m.done;m=d.next()){var w=m.value;f.update(w)}}catch(E){a={error:E}}finally{try{m&&!m.done&&(c=d.return)&&c.call(d)}finally{if(a)throw a.error}}return f},Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sum",{get:function(){return this._allSums},enumerable:!0,configurable:!0}),e.prototype.update=function(n,i){i===void 0&&(i=1),this._allSums+=i;for(var o=Ty.getDistinctIndices(n,this._columns,this._rows,this.seed),a=0;a<this._rows;a++)this._matrix[a][o[a]]+=i},e.prototype.count=function(n){for(var i=1/0,o=Ty.getDistinctIndices(n,this._columns,this._rows,this.seed),a=0;a<this._rows;a++){var c=this._matrix[a][o[a]];i=Math.min(c,i)}return i},e.prototype.equals=function(n){if(this._columns!==n._columns||this._rows!==n._rows)return!1;for(var i=0;i<this._rows;i++)for(var o=0;o<this._columns;o++)if(this._matrix[i][o]!==n._matrix[i][o])return!1;return!0},e.prototype.merge=function(n){if(this._columns!==n._columns)throw new Error("Cannot merge two sketches with different number of columns");if(this._rows!==n._rows)throw new Error("Cannot merge two sketches with different number of rows");for(var i=0;i<this._rows;i++)for(var o=0;o<this._columns;o++)this._matrix[i][o]+=n._matrix[i][o]},e.prototype.clone=function(){var n=new t(this._columns,this._rows);return n.merge(this),n.seed=this.seed,n};var t;return _p([vc.Field(),xp("design:type",Number)],e.prototype,"_columns",void 0),_p([vc.Field(),xp("design:type",Number)],e.prototype,"_rows",void 0),_p([vc.Field(),xp("design:type",Array)],e.prototype,"_matrix",void 0),_p([vc.Field(),xp("design:type",Number)],e.prototype,"_allSums",void 0),e=t=_p([vc.AutoExportable("CountMinSketch",["_seed"]),f8(0,vc.Parameter("_columns")),f8(1,vc.Parameter("_rows")),xp("design:paramtypes",[Number,Number])],e),e}(Ez.default);Un.default=Pz});var h8=ue(Pi=>{"use strict";h();p();var Sz=Pi&&Pi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ep=Pi&&Pi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Pp=Pi&&Pi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Dz=Pi&&Pi.__param||function(r,e){return function(t,n){e(t,n,r)}},Az=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var Cz=Az(Ro()),hl=vi(),l8=io(),Qv=Math.pow(2,32);function Iz(r){switch(r){case 16:return .673;case 32:return .697;case 64:return .709;default:return .7213/(1+1.079/r)}}var Tz=function(r){Sz(e,r);function e(n){var i=r.call(this)||this;return i._nbRegisters=n,i._nbBytesPerHash=Math.round(Math.log2(n)),i._correctionBias=Iz(n),i._registers=l8.allocateArray(i._nbRegisters,0),i}t=e,Object.defineProperty(e.prototype,"nbRegisters",{get:function(){return this._nbRegisters},enumerable:!0,configurable:!0}),e.prototype.update=function(n){for(var i=l8.hashAsInt(n,this.seed).toString(2),o=1+parseInt(i.slice(0,this._nbBytesPerHash-1),2),a=i.slice(this._nbBytesPerHash),c=0;a[c]!=="1"&&c<a.length-1;)c++;this._registers[o]=Math.max(this._registers[o],c)},e.prototype.count=function(n){n===void 0&&(n=!1);var i=this._registers.reduce(function(a,c){return a+Math.pow(2,-c)},0),o=this._correctionBias*Math.pow(this._nbRegisters,2)/i;return o>Qv/30&&(o=-Qv*Math.log(1-o/Qv)),n&&(o=Math.round(o)),o},e.prototype.accuracy=function(){return 1.04/Math.sqrt(this._nbRegisters)},e.prototype.merge=function(n){if(this.nbRegisters!==n.nbRegisters)throw new Error("Two HyperLogLog must have the same number of registers to be merged. Tried to merge two HyperLogLog with m = "+this.nbRegisters+" and m = "+n.nbRegisters);for(var i=new t(this.nbRegisters),o=0;o<this.nbRegisters-1;o++)i._registers[o]=Math.max(this._registers[o],n._registers[o]);return i},e.prototype.equals=function(n){if(this.nbRegisters!==n.nbRegisters)return!1;for(var i=0;i<this.nbRegisters-1;i++)if(this._registers[i]!==n._registers[i])return!1;return!0};var t;return Ep([hl.Field(),Pp("design:type",Number)],e.prototype,"_nbRegisters",void 0),Ep([hl.Field(),Pp("design:type",Number)],e.prototype,"_nbBytesPerHash",void 0),Ep([hl.Field(),Pp("design:type",Number)],e.prototype,"_correctionBias",void 0),Ep([hl.Field(),Pp("design:type",Array)],e.prototype,"_registers",void 0),e=t=Ep([hl.AutoExportable("HyperLogLog",["_seed"]),Dz(0,hl.Parameter("_nbRegisters")),Pp("design:paramtypes",[Number])],e),e}(Cz.default);Pi.default=Tz});var ky=ue((pl,Sp)=>{h();p();(function(){var r,e="4.17.21",t=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",d=1,m=2,w=4,E=1,T=2,F=1,U=2,pe=4,he=8,De=16,re=32,be=64,Pe=128,Y=256,ge=512,_e=30,Me="...",vt=800,Nt=16,Bt=1,qt=2,hr=3,Mt=1/0,jr=9007199254740991,Tn=17976931348623157e292,Rr=0/0,Wr=4294967295,Fs=Wr-1,nr=Wr>>>1,Wt=[["ary",Pe],["bind",F],["bindKey",U],["curry",he],["curryRight",De],["flip",ge],["partial",re],["partialRight",be],["rearg",Y]],wr="[object Arguments]",Ve="[object Array]",Xr="[object AsyncFunction]",Ui="[object Boolean]",Mi="[object Date]",ts="[object DOMException]",Br="[object Error]",Ki="[object Function]",vn="[object GeneratorFunction]",Vr="[object Map]",yo="[object Number]",Pa="[object Null]",kn="[object Object]",_n="[object Promise]",Sa="[object Proxy]",Qr="[object RegExp]",ur="[object Set]",zn="[object String]",qn="[object Symbol]",go="[object Undefined]",cn="[object WeakMap]",$="[object WeakSet]",J="[object ArrayBuffer]",le="[object DataView]",ve="[object Float32Array]",je="[object Float64Array]",or="[object Int8Array]",tt="[object Int16Array]",ut="[object Int32Array]",qe="[object Uint8Array]",yt="[object Uint8ClampedArray]",pt="[object Uint16Array]",Pr="[object Uint32Array]",wo=/\b__p \+= '';/g,Rs=/\b(__p \+=) '' \+/g,bo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Bs=/&(?:amp|lt|gt|quot|#39);/g,Ou=/[&<>"']/g,ji=RegExp(Bs.source),yh=RegExp(Ou.source),ai=/<%-([\s\S]+?)%>/g,$i=/<%([\s\S]+?)%>/g,vo=/<%=([\s\S]+?)%>/g,Lu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nu=/^\w*$/,gf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Uu=/[\\^$.*+?()[\]{}|]/g,fn=RegExp(Uu.source),Da=/^\s+/,b=/\s/,S=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,P=/\{\n\/\* \[wrapped with (.+)\] \*/,y=/,? & /,I=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,M=/[()=,{}\[\]\/\s]/,j=/\\(\\)?/g,oe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ye=/\w*$/,Ke=/^[-+]0x[0-9a-f]+$/i,Ae=/^0b[01]+$/i,Ct=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,rt=/^(?:0|[1-9]\d*)$/,ot=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ct=/($^)/,lt=/['\n\r\u2028\u2029\\]/g,et="\\ud800-\\udfff",ft="\\u0300-\\u036f",nt="\\ufe20-\\ufe2f",Ie="\\u20d0-\\u20ff",ze=ft+nt+Ie,xe="\\u2700-\\u27bf",Re="a-z\\xdf-\\xf6\\xf8-\\xff",Be="\\xac\\xb1\\xd7\\xf7",Ee="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",q="\\u2000-\\u206f",W=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fe="A-Z\\xc0-\\xd6\\xd8-\\xde",ne="\\ufe0e\\ufe0f",ie=Be+Ee+q+W,_="['\u2019]",k="["+et+"]",A="["+ie+"]",B="["+ze+"]",O="\\d+",v="["+xe+"]",z="["+Re+"]",H="[^"+et+ie+O+xe+Re+fe+"]",X="\\ud83c[\\udffb-\\udfff]",G="(?:"+B+"|"+X+")",te="[^"+et+"]",me="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",Ne="["+fe+"]",Qe="\\u200d",dt="(?:"+z+"|"+H+")",mt="(?:"+Ne+"|"+H+")",Ot="(?:"+_+"(?:d|ll|m|re|s|t|ve))?",cr="(?:"+_+"(?:D|LL|M|RE|S|T|VE))?",br=G+"?",Or="["+ne+"]?",gh="(?:"+Qe+"(?:"+[te,me,$e].join("|")+")"+Or+br+")*",GE="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Y0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",jd=Or+br+gh,$d="(?:"+[v,me,$e].join("|")+")"+jd,FB="(?:"+[te+B+"?",B,me,$e,k].join("|")+")",RB=RegExp(_,"g"),BB=RegExp(B,"g"),J0=RegExp(X+"(?="+X+")|"+FB+jd,"g"),OB=RegExp([Ne+"?"+z+"+"+Ot+"(?="+[A,Ne,"$"].join("|")+")",mt+"+"+cr+"(?="+[A,Ne+dt,"$"].join("|")+")",Ne+"?"+dt+"+"+Ot,Ne+"+"+cr,Y0,GE,O,$d].join("|"),"g"),LB=RegExp("["+Qe+et+ze+ne+"]"),NB=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,UB=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],MB=-1,fr={};fr[ve]=fr[je]=fr[or]=fr[tt]=fr[ut]=fr[qe]=fr[yt]=fr[pt]=fr[Pr]=!0,fr[wr]=fr[Ve]=fr[J]=fr[Ui]=fr[le]=fr[Mi]=fr[Br]=fr[Ki]=fr[Vr]=fr[yo]=fr[kn]=fr[Qr]=fr[ur]=fr[zn]=fr[cn]=!1;var sr={};sr[wr]=sr[Ve]=sr[J]=sr[le]=sr[Ui]=sr[Mi]=sr[ve]=sr[je]=sr[or]=sr[tt]=sr[ut]=sr[Vr]=sr[yo]=sr[kn]=sr[Qr]=sr[ur]=sr[zn]=sr[qn]=sr[qe]=sr[yt]=sr[pt]=sr[Pr]=!0,sr[Br]=sr[Ki]=sr[cn]=!1;var KB={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},jB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$B={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zB={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qB=parseFloat,WB=parseInt,YE=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,VB=typeof self=="object"&&self&&self.Object===Object&&self,Zr=YE||VB||Function("return this")(),X0=typeof pl=="object"&&pl&&!pl.nodeType&&pl,Mu=X0&&typeof Sp=="object"&&Sp&&!Sp.nodeType&&Sp,JE=Mu&&Mu.exports===X0,Q0=JE&&YE.process,zi=function(){try{var N=Mu&&Mu.require&&Mu.require("util").types;return N||Q0&&Q0.binding&&Q0.binding("util")}catch{}}(),XE=zi&&zi.isArrayBuffer,QE=zi&&zi.isDate,ZE=zi&&zi.isMap,eP=zi&&zi.isRegExp,tP=zi&&zi.isSet,rP=zi&&zi.isTypedArray;function ui(N,ee,V){switch(V.length){case 0:return N.call(ee);case 1:return N.call(ee,V[0]);case 2:return N.call(ee,V[0],V[1]);case 3:return N.call(ee,V[0],V[1],V[2])}return N.apply(ee,V)}function HB(N,ee,V,Ue){for(var gt=-1,zt=N==null?0:N.length;++gt<zt;){var Hr=N[gt];ee(Ue,Hr,V(Hr),N)}return Ue}function qi(N,ee){for(var V=-1,Ue=N==null?0:N.length;++V<Ue&&ee(N[V],V,N)!==!1;);return N}function GB(N,ee){for(var V=N==null?0:N.length;V--&&ee(N[V],V,N)!==!1;);return N}function nP(N,ee){for(var V=-1,Ue=N==null?0:N.length;++V<Ue;)if(!ee(N[V],V,N))return!1;return!0}function Aa(N,ee){for(var V=-1,Ue=N==null?0:N.length,gt=0,zt=[];++V<Ue;){var Hr=N[V];ee(Hr,V,N)&&(zt[gt++]=Hr)}return zt}function zd(N,ee){var V=N==null?0:N.length;return!!V&&wf(N,ee,0)>-1}function Z0(N,ee,V){for(var Ue=-1,gt=N==null?0:N.length;++Ue<gt;)if(V(ee,N[Ue]))return!0;return!1}function pr(N,ee){for(var V=-1,Ue=N==null?0:N.length,gt=Array(Ue);++V<Ue;)gt[V]=ee(N[V],V,N);return gt}function Ca(N,ee){for(var V=-1,Ue=ee.length,gt=N.length;++V<Ue;)N[gt+V]=ee[V];return N}function ew(N,ee,V,Ue){var gt=-1,zt=N==null?0:N.length;for(Ue&&zt&&(V=N[++gt]);++gt<zt;)V=ee(V,N[gt],gt,N);return V}function YB(N,ee,V,Ue){var gt=N==null?0:N.length;for(Ue&&gt&&(V=N[--gt]);gt--;)V=ee(V,N[gt],gt,N);return V}function tw(N,ee){for(var V=-1,Ue=N==null?0:N.length;++V<Ue;)if(ee(N[V],V,N))return!0;return!1}var JB=rw("length");function XB(N){return N.split("")}function QB(N){return N.match(I)||[]}function iP(N,ee,V){var Ue;return V(N,function(gt,zt,Hr){if(ee(gt,zt,Hr))return Ue=zt,!1}),Ue}function qd(N,ee,V,Ue){for(var gt=N.length,zt=V+(Ue?1:-1);Ue?zt--:++zt<gt;)if(ee(N[zt],zt,N))return zt;return-1}function wf(N,ee,V){return ee===ee?fO(N,ee,V):qd(N,oP,V)}function ZB(N,ee,V,Ue){for(var gt=V-1,zt=N.length;++gt<zt;)if(Ue(N[gt],ee))return gt;return-1}function oP(N){return N!==N}function sP(N,ee){var V=N==null?0:N.length;return V?iw(N,ee)/V:Rr}function rw(N){return function(ee){return ee==null?r:ee[N]}}function nw(N){return function(ee){return N==null?r:N[ee]}}function aP(N,ee,V,Ue,gt){return gt(N,function(zt,Hr,ir){V=Ue?(Ue=!1,zt):ee(V,zt,Hr,ir)}),V}function eO(N,ee){var V=N.length;for(N.sort(ee);V--;)N[V]=N[V].value;return N}function iw(N,ee){for(var V,Ue=-1,gt=N.length;++Ue<gt;){var zt=ee(N[Ue]);zt!==r&&(V=V===r?zt:V+zt)}return V}function ow(N,ee){for(var V=-1,Ue=Array(N);++V<N;)Ue[V]=ee(V);return Ue}function tO(N,ee){return pr(ee,function(V){return[V,N[V]]})}function uP(N){return N&&N.slice(0,hP(N)+1).replace(Da,"")}function ci(N){return function(ee){return N(ee)}}function sw(N,ee){return pr(ee,function(V){return N[V]})}function wh(N,ee){return N.has(ee)}function cP(N,ee){for(var V=-1,Ue=N.length;++V<Ue&&wf(ee,N[V],0)>-1;);return V}function fP(N,ee){for(var V=N.length;V--&&wf(ee,N[V],0)>-1;);return V}function rO(N,ee){for(var V=N.length,Ue=0;V--;)N[V]===ee&&++Ue;return Ue}var nO=nw(KB),iO=nw(jB);function oO(N){return"\\"+zB[N]}function sO(N,ee){return N==null?r:N[ee]}function bf(N){return LB.test(N)}function aO(N){return NB.test(N)}function uO(N){for(var ee,V=[];!(ee=N.next()).done;)V.push(ee.value);return V}function aw(N){var ee=-1,V=Array(N.size);return N.forEach(function(Ue,gt){V[++ee]=[gt,Ue]}),V}function lP(N,ee){return function(V){return N(ee(V))}}function Ia(N,ee){for(var V=-1,Ue=N.length,gt=0,zt=[];++V<Ue;){var Hr=N[V];(Hr===ee||Hr===f)&&(N[V]=f,zt[gt++]=V)}return zt}function Wd(N){var ee=-1,V=Array(N.size);return N.forEach(function(Ue){V[++ee]=Ue}),V}function cO(N){var ee=-1,V=Array(N.size);return N.forEach(function(Ue){V[++ee]=[Ue,Ue]}),V}function fO(N,ee,V){for(var Ue=V-1,gt=N.length;++Ue<gt;)if(N[Ue]===ee)return Ue;return-1}function lO(N,ee,V){for(var Ue=V+1;Ue--;)if(N[Ue]===ee)return Ue;return Ue}function vf(N){return bf(N)?pO(N):JB(N)}function _o(N){return bf(N)?dO(N):XB(N)}function hP(N){for(var ee=N.length;ee--&&b.test(N.charAt(ee)););return ee}var hO=nw($B);function pO(N){for(var ee=J0.lastIndex=0;J0.test(N);)++ee;return ee}function dO(N){return N.match(J0)||[]}function mO(N){return N.match(OB)||[]}var yO=function N(ee){ee=ee==null?Zr:Ta.defaults(Zr.Object(),ee,Ta.pick(Zr,UB));var V=ee.Array,Ue=ee.Date,gt=ee.Error,zt=ee.Function,Hr=ee.Math,ir=ee.Object,uw=ee.RegExp,gO=ee.String,Wi=ee.TypeError,Vd=V.prototype,wO=zt.prototype,_f=ir.prototype,Hd=ee["__core-js_shared__"],Gd=wO.toString,Yt=_f.hasOwnProperty,bO=0,pP=function(){var s=/[^.]+$/.exec(Hd&&Hd.keys&&Hd.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Yd=_f.toString,vO=Gd.call(ir),_O=Zr._,xO=uw("^"+Gd.call(Yt).replace(Uu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jd=JE?ee.Buffer:r,ka=ee.Symbol,Xd=ee.Uint8Array,dP=Jd?Jd.allocUnsafe:r,Qd=lP(ir.getPrototypeOf,ir),mP=ir.create,yP=_f.propertyIsEnumerable,Zd=Vd.splice,gP=ka?ka.isConcatSpreadable:r,bh=ka?ka.iterator:r,Ku=ka?ka.toStringTag:r,em=function(){try{var s=Wu(ir,"defineProperty");return s({},"",{}),s}catch{}}(),EO=ee.clearTimeout!==Zr.clearTimeout&&ee.clearTimeout,PO=Ue&&Ue.now!==Zr.Date.now&&Ue.now,SO=ee.setTimeout!==Zr.setTimeout&&ee.setTimeout,tm=Hr.ceil,rm=Hr.floor,cw=ir.getOwnPropertySymbols,DO=Jd?Jd.isBuffer:r,wP=ee.isFinite,AO=Vd.join,CO=lP(ir.keys,ir),Gr=Hr.max,xn=Hr.min,IO=Ue.now,TO=ee.parseInt,bP=Hr.random,kO=Vd.reverse,fw=Wu(ee,"DataView"),vh=Wu(ee,"Map"),lw=Wu(ee,"Promise"),xf=Wu(ee,"Set"),_h=Wu(ee,"WeakMap"),xh=Wu(ir,"create"),nm=_h&&new _h,Ef={},FO=Vu(fw),RO=Vu(vh),BO=Vu(lw),OO=Vu(xf),LO=Vu(_h),im=ka?ka.prototype:r,Eh=im?im.valueOf:r,vP=im?im.toString:r;function D(s){if(Sr(s)&&!bt(s)&&!(s instanceof Rt)){if(s instanceof Vi)return s;if(Yt.call(s,"__wrapped__"))return _S(s)}return new Vi(s)}var Pf=function(){function s(){}return function(u){if(!vr(u))return{};if(mP)return mP(u);s.prototype=u;var l=new s;return s.prototype=r,l}}();function om(){}function Vi(s,u){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=r}D.templateSettings={escape:ai,evaluate:$i,interpolate:vo,variable:"",imports:{_:D}},D.prototype=om.prototype,D.prototype.constructor=D,Vi.prototype=Pf(om.prototype),Vi.prototype.constructor=Vi;function Rt(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Wr,this.__views__=[]}function NO(){var s=new Rt(this.__wrapped__);return s.__actions__=Wn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Wn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Wn(this.__views__),s}function UO(){if(this.__filtered__){var s=new Rt(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function MO(){var s=this.__wrapped__.value(),u=this.__dir__,l=bt(s),g=u<0,x=l?s.length:0,C=X4(0,x,this.__views__),R=C.start,L=C.end,K=L-R,se=g?L:R-1,ae=this.__iteratees__,de=ae.length,Ce=0,He=xn(K,this.__takeCount__);if(!l||!g&&x==K&&He==K)return qP(s,this.__actions__);var st=[];e:for(;K--&&Ce<He;){se+=u;for(var Et=-1,at=s[se];++Et<de;){var It=ae[Et],Lt=It.iteratee,hi=It.type,Bn=Lt(at);if(hi==qt)at=Bn;else if(!Bn){if(hi==Bt)continue e;break e}}st[Ce++]=at}return st}Rt.prototype=Pf(om.prototype),Rt.prototype.constructor=Rt;function ju(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var g=s[u];this.set(g[0],g[1])}}function KO(){this.__data__=xh?xh(null):{},this.size=0}function jO(s){var u=this.has(s)&&delete this.__data__[s];return this.size-=u?1:0,u}function $O(s){var u=this.__data__;if(xh){var l=u[s];return l===a?r:l}return Yt.call(u,s)?u[s]:r}function zO(s){var u=this.__data__;return xh?u[s]!==r:Yt.call(u,s)}function qO(s,u){var l=this.__data__;return this.size+=this.has(s)?0:1,l[s]=xh&&u===r?a:u,this}ju.prototype.clear=KO,ju.prototype.delete=jO,ju.prototype.get=$O,ju.prototype.has=zO,ju.prototype.set=qO;function Os(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var g=s[u];this.set(g[0],g[1])}}function WO(){this.__data__=[],this.size=0}function VO(s){var u=this.__data__,l=sm(u,s);if(l<0)return!1;var g=u.length-1;return l==g?u.pop():Zd.call(u,l,1),--this.size,!0}function HO(s){var u=this.__data__,l=sm(u,s);return l<0?r:u[l][1]}function GO(s){return sm(this.__data__,s)>-1}function YO(s,u){var l=this.__data__,g=sm(l,s);return g<0?(++this.size,l.push([s,u])):l[g][1]=u,this}Os.prototype.clear=WO,Os.prototype.delete=VO,Os.prototype.get=HO,Os.prototype.has=GO,Os.prototype.set=YO;function Ls(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var g=s[u];this.set(g[0],g[1])}}function JO(){this.size=0,this.__data__={hash:new ju,map:new(vh||Os),string:new ju}}function XO(s){var u=wm(this,s).delete(s);return this.size-=u?1:0,u}function QO(s){return wm(this,s).get(s)}function ZO(s){return wm(this,s).has(s)}function e4(s,u){var l=wm(this,s),g=l.size;return l.set(s,u),this.size+=l.size==g?0:1,this}Ls.prototype.clear=JO,Ls.prototype.delete=XO,Ls.prototype.get=QO,Ls.prototype.has=ZO,Ls.prototype.set=e4;function $u(s){var u=-1,l=s==null?0:s.length;for(this.__data__=new Ls;++u<l;)this.add(s[u])}function t4(s){return this.__data__.set(s,a),this}function r4(s){return this.__data__.has(s)}$u.prototype.add=$u.prototype.push=t4,$u.prototype.has=r4;function xo(s){var u=this.__data__=new Os(s);this.size=u.size}function n4(){this.__data__=new Os,this.size=0}function i4(s){var u=this.__data__,l=u.delete(s);return this.size=u.size,l}function o4(s){return this.__data__.get(s)}function s4(s){return this.__data__.has(s)}function a4(s,u){var l=this.__data__;if(l instanceof Os){var g=l.__data__;if(!vh||g.length<t-1)return g.push([s,u]),this.size=++l.size,this;l=this.__data__=new Ls(g)}return l.set(s,u),this.size=l.size,this}xo.prototype.clear=n4,xo.prototype.delete=i4,xo.prototype.get=o4,xo.prototype.has=s4,xo.prototype.set=a4;function _P(s,u){var l=bt(s),g=!l&&Hu(s),x=!l&&!g&&La(s),C=!l&&!g&&!x&&Cf(s),R=l||g||x||C,L=R?ow(s.length,gO):[],K=L.length;for(var se in s)(u||Yt.call(s,se))&&!(R&&(se=="length"||x&&(se=="offset"||se=="parent")||C&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||Ks(se,K)))&&L.push(se);return L}function xP(s){var u=s.length;return u?s[xw(0,u-1)]:r}function u4(s,u){return bm(Wn(s),zu(u,0,s.length))}function c4(s){return bm(Wn(s))}function hw(s,u,l){(l!==r&&!Eo(s[u],l)||l===r&&!(u in s))&&Ns(s,u,l)}function Ph(s,u,l){var g=s[u];(!(Yt.call(s,u)&&Eo(g,l))||l===r&&!(u in s))&&Ns(s,u,l)}function sm(s,u){for(var l=s.length;l--;)if(Eo(s[l][0],u))return l;return-1}function f4(s,u,l,g){return Fa(s,function(x,C,R){u(g,x,l(x),R)}),g}function EP(s,u){return s&&ns(u,en(u),s)}function l4(s,u){return s&&ns(u,Hn(u),s)}function Ns(s,u,l){u=="__proto__"&&em?em(s,u,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[u]=l}function pw(s,u){for(var l=-1,g=u.length,x=V(g),C=s==null;++l<g;)x[l]=C?r:Hw(s,u[l]);return x}function zu(s,u,l){return s===s&&(l!==r&&(s=s<=l?s:l),u!==r&&(s=s>=u?s:u)),s}function Hi(s,u,l,g,x,C){var R,L=u&d,K=u&m,se=u&w;if(l&&(R=x?l(s,g,x,C):l(s)),R!==r)return R;if(!vr(s))return s;var ae=bt(s);if(ae){if(R=Z4(s),!L)return Wn(s,R)}else{var de=En(s),Ce=de==Ki||de==vn;if(La(s))return HP(s,L);if(de==kn||de==wr||Ce&&!x){if(R=K||Ce?{}:hS(s),!L)return K?$4(s,l4(R,s)):j4(s,EP(R,s))}else{if(!sr[de])return x?s:{};R=eL(s,de,L)}}C||(C=new xo);var He=C.get(s);if(He)return He;C.set(s,R),jS(s)?s.forEach(function(at){R.add(Hi(at,u,l,at,s,C))}):MS(s)&&s.forEach(function(at,It){R.set(It,Hi(at,u,l,It,s,C))});var st=se?K?Rw:Fw:K?Hn:en,Et=ae?r:st(s);return qi(Et||s,function(at,It){Et&&(It=at,at=s[It]),Ph(R,It,Hi(at,u,l,It,s,C))}),R}function h4(s){var u=en(s);return function(l){return PP(l,s,u)}}function PP(s,u,l){var g=l.length;if(s==null)return!g;for(s=ir(s);g--;){var x=l[g],C=u[x],R=s[x];if(R===r&&!(x in s)||!C(R))return!1}return!0}function SP(s,u,l){if(typeof s!="function")throw new Wi(i);return kh(function(){s.apply(r,l)},u)}function Sh(s,u,l,g){var x=-1,C=zd,R=!0,L=s.length,K=[],se=u.length;if(!L)return K;l&&(u=pr(u,ci(l))),g?(C=Z0,R=!1):u.length>=t&&(C=wh,R=!1,u=new $u(u));e:for(;++x<L;){var ae=s[x],de=l==null?ae:l(ae);if(ae=g||ae!==0?ae:0,R&&de===de){for(var Ce=se;Ce--;)if(u[Ce]===de)continue e;K.push(ae)}else C(u,de,g)||K.push(ae)}return K}var Fa=QP(rs),DP=QP(mw,!0);function p4(s,u){var l=!0;return Fa(s,function(g,x,C){return l=!!u(g,x,C),l}),l}function am(s,u,l){for(var g=-1,x=s.length;++g<x;){var C=s[g],R=u(C);if(R!=null&&(L===r?R===R&&!li(R):l(R,L)))var L=R,K=C}return K}function d4(s,u,l,g){var x=s.length;for(l=_t(l),l<0&&(l=-l>x?0:x+l),g=g===r||g>x?x:_t(g),g<0&&(g+=x),g=l>g?0:zS(g);l<g;)s[l++]=u;return s}function AP(s,u){var l=[];return Fa(s,function(g,x,C){u(g,x,C)&&l.push(g)}),l}function ln(s,u,l,g,x){var C=-1,R=s.length;for(l||(l=rL),x||(x=[]);++C<R;){var L=s[C];u>0&&l(L)?u>1?ln(L,u-1,l,g,x):Ca(x,L):g||(x[x.length]=L)}return x}var dw=ZP(),CP=ZP(!0);function rs(s,u){return s&&dw(s,u,en)}function mw(s,u){return s&&CP(s,u,en)}function um(s,u){return Aa(u,function(l){return js(s[l])})}function qu(s,u){u=Ba(u,s);for(var l=0,g=u.length;s!=null&&l<g;)s=s[is(u[l++])];return l&&l==g?s:r}function IP(s,u,l){var g=u(s);return bt(s)?g:Ca(g,l(s))}function Fn(s){return s==null?s===r?go:Pa:Ku&&Ku in ir(s)?J4(s):cL(s)}function yw(s,u){return s>u}function m4(s,u){return s!=null&&Yt.call(s,u)}function y4(s,u){return s!=null&&u in ir(s)}function g4(s,u,l){return s>=xn(u,l)&&s<Gr(u,l)}function gw(s,u,l){for(var g=l?Z0:zd,x=s[0].length,C=s.length,R=C,L=V(C),K=1/0,se=[];R--;){var ae=s[R];R&&u&&(ae=pr(ae,ci(u))),K=xn(ae.length,K),L[R]=!l&&(u||x>=120&&ae.length>=120)?new $u(R&&ae):r}ae=s[0];var de=-1,Ce=L[0];e:for(;++de<x&&se.length<K;){var He=ae[de],st=u?u(He):He;if(He=l||He!==0?He:0,!(Ce?wh(Ce,st):g(se,st,l))){for(R=C;--R;){var Et=L[R];if(!(Et?wh(Et,st):g(s[R],st,l)))continue e}Ce&&Ce.push(st),se.push(He)}}return se}function w4(s,u,l,g){return rs(s,function(x,C,R){u(g,l(x),C,R)}),g}function Dh(s,u,l){u=Ba(u,s),s=yS(s,u);var g=s==null?s:s[is(Yi(u))];return g==null?r:ui(g,s,l)}function TP(s){return Sr(s)&&Fn(s)==wr}function b4(s){return Sr(s)&&Fn(s)==J}function v4(s){return Sr(s)&&Fn(s)==Mi}function Ah(s,u,l,g,x){return s===u?!0:s==null||u==null||!Sr(s)&&!Sr(u)?s!==s&&u!==u:_4(s,u,l,g,Ah,x)}function _4(s,u,l,g,x,C){var R=bt(s),L=bt(u),K=R?Ve:En(s),se=L?Ve:En(u);K=K==wr?kn:K,se=se==wr?kn:se;var ae=K==kn,de=se==kn,Ce=K==se;if(Ce&&La(s)){if(!La(u))return!1;R=!0,ae=!1}if(Ce&&!ae)return C||(C=new xo),R||Cf(s)?cS(s,u,l,g,x,C):G4(s,u,K,l,g,x,C);if(!(l&E)){var He=ae&&Yt.call(s,"__wrapped__"),st=de&&Yt.call(u,"__wrapped__");if(He||st){var Et=He?s.value():s,at=st?u.value():u;return C||(C=new xo),x(Et,at,l,g,C)}}return Ce?(C||(C=new xo),Y4(s,u,l,g,x,C)):!1}function x4(s){return Sr(s)&&En(s)==Vr}function ww(s,u,l,g){var x=l.length,C=x,R=!g;if(s==null)return!C;for(s=ir(s);x--;){var L=l[x];if(R&&L[2]?L[1]!==s[L[0]]:!(L[0]in s))return!1}for(;++x<C;){L=l[x];var K=L[0],se=s[K],ae=L[1];if(R&&L[2]){if(se===r&&!(K in s))return!1}else{var de=new xo;if(g)var Ce=g(se,ae,K,s,u,de);if(!(Ce===r?Ah(ae,se,E|T,g,de):Ce))return!1}}return!0}function kP(s){if(!vr(s)||iL(s))return!1;var u=js(s)?xO:Ct;return u.test(Vu(s))}function E4(s){return Sr(s)&&Fn(s)==Qr}function P4(s){return Sr(s)&&En(s)==ur}function S4(s){return Sr(s)&&Sm(s.length)&&!!fr[Fn(s)]}function FP(s){return typeof s=="function"?s:s==null?Gn:typeof s=="object"?bt(s)?OP(s[0],s[1]):BP(s):eD(s)}function bw(s){if(!Th(s))return CO(s);var u=[];for(var l in ir(s))Yt.call(s,l)&&l!="constructor"&&u.push(l);return u}function D4(s){if(!vr(s))return uL(s);var u=Th(s),l=[];for(var g in s)g=="constructor"&&(u||!Yt.call(s,g))||l.push(g);return l}function vw(s,u){return s<u}function RP(s,u){var l=-1,g=Vn(s)?V(s.length):[];return Fa(s,function(x,C,R){g[++l]=u(x,C,R)}),g}function BP(s){var u=Ow(s);return u.length==1&&u[0][2]?dS(u[0][0],u[0][1]):function(l){return l===s||ww(l,s,u)}}function OP(s,u){return Nw(s)&&pS(u)?dS(is(s),u):function(l){var g=Hw(l,s);return g===r&&g===u?Gw(l,s):Ah(u,g,E|T)}}function cm(s,u,l,g,x){s!==u&&dw(u,function(C,R){if(x||(x=new xo),vr(C))A4(s,u,R,l,cm,g,x);else{var L=g?g(Mw(s,R),C,R+"",s,u,x):r;L===r&&(L=C),hw(s,R,L)}},Hn)}function A4(s,u,l,g,x,C,R){var L=Mw(s,l),K=Mw(u,l),se=R.get(K);if(se){hw(s,l,se);return}var ae=C?C(L,K,l+"",s,u,R):r,de=ae===r;if(de){var Ce=bt(K),He=!Ce&&La(K),st=!Ce&&!He&&Cf(K);ae=K,Ce||He||st?bt(L)?ae=L:Lr(L)?ae=Wn(L):He?(de=!1,ae=HP(K,!0)):st?(de=!1,ae=GP(K,!0)):ae=[]:Fh(K)||Hu(K)?(ae=L,Hu(L)?ae=qS(L):(!vr(L)||js(L))&&(ae=hS(K))):de=!1}de&&(R.set(K,ae),x(ae,K,g,C,R),R.delete(K)),hw(s,l,ae)}function LP(s,u){var l=s.length;if(!!l)return u+=u<0?l:0,Ks(u,l)?s[u]:r}function NP(s,u,l){u.length?u=pr(u,function(C){return bt(C)?function(R){return qu(R,C.length===1?C[0]:C)}:C}):u=[Gn];var g=-1;u=pr(u,ci(it()));var x=RP(s,function(C,R,L){var K=pr(u,function(se){return se(C)});return{criteria:K,index:++g,value:C}});return eO(x,function(C,R){return K4(C,R,l)})}function C4(s,u){return UP(s,u,function(l,g){return Gw(s,g)})}function UP(s,u,l){for(var g=-1,x=u.length,C={};++g<x;){var R=u[g],L=qu(s,R);l(L,R)&&Ch(C,Ba(R,s),L)}return C}function I4(s){return function(u){return qu(u,s)}}function _w(s,u,l,g){var x=g?ZB:wf,C=-1,R=u.length,L=s;for(s===u&&(u=Wn(u)),l&&(L=pr(s,ci(l)));++C<R;)for(var K=0,se=u[C],ae=l?l(se):se;(K=x(L,ae,K,g))>-1;)L!==s&&Zd.call(L,K,1),Zd.call(s,K,1);return s}function MP(s,u){for(var l=s?u.length:0,g=l-1;l--;){var x=u[l];if(l==g||x!==C){var C=x;Ks(x)?Zd.call(s,x,1):Sw(s,x)}}return s}function xw(s,u){return s+rm(bP()*(u-s+1))}function T4(s,u,l,g){for(var x=-1,C=Gr(tm((u-s)/(l||1)),0),R=V(C);C--;)R[g?C:++x]=s,s+=l;return R}function Ew(s,u){var l="";if(!s||u<1||u>jr)return l;do u%2&&(l+=s),u=rm(u/2),u&&(s+=s);while(u);return l}function Dt(s,u){return Kw(mS(s,u,Gn),s+"")}function k4(s){return xP(If(s))}function F4(s,u){var l=If(s);return bm(l,zu(u,0,l.length))}function Ch(s,u,l,g){if(!vr(s))return s;u=Ba(u,s);for(var x=-1,C=u.length,R=C-1,L=s;L!=null&&++x<C;){var K=is(u[x]),se=l;if(K==="__proto__"||K==="constructor"||K==="prototype")return s;if(x!=R){var ae=L[K];se=g?g(ae,K,L):r,se===r&&(se=vr(ae)?ae:Ks(u[x+1])?[]:{})}Ph(L,K,se),L=L[K]}return s}var KP=nm?function(s,u){return nm.set(s,u),s}:Gn,R4=em?function(s,u){return em(s,"toString",{configurable:!0,enumerable:!1,value:Jw(u),writable:!0})}:Gn;function B4(s){return bm(If(s))}function Gi(s,u,l){var g=-1,x=s.length;u<0&&(u=-u>x?0:x+u),l=l>x?x:l,l<0&&(l+=x),x=u>l?0:l-u>>>0,u>>>=0;for(var C=V(x);++g<x;)C[g]=s[g+u];return C}function O4(s,u){var l;return Fa(s,function(g,x,C){return l=u(g,x,C),!l}),!!l}function fm(s,u,l){var g=0,x=s==null?g:s.length;if(typeof u=="number"&&u===u&&x<=nr){for(;g<x;){var C=g+x>>>1,R=s[C];R!==null&&!li(R)&&(l?R<=u:R<u)?g=C+1:x=C}return x}return Pw(s,u,Gn,l)}function Pw(s,u,l,g){var x=0,C=s==null?0:s.length;if(C===0)return 0;u=l(u);for(var R=u!==u,L=u===null,K=li(u),se=u===r;x<C;){var ae=rm((x+C)/2),de=l(s[ae]),Ce=de!==r,He=de===null,st=de===de,Et=li(de);if(R)var at=g||st;else se?at=st&&(g||Ce):L?at=st&&Ce&&(g||!He):K?at=st&&Ce&&!He&&(g||!Et):He||Et?at=!1:at=g?de<=u:de<u;at?x=ae+1:C=ae}return xn(C,Fs)}function jP(s,u){for(var l=-1,g=s.length,x=0,C=[];++l<g;){var R=s[l],L=u?u(R):R;if(!l||!Eo(L,K)){var K=L;C[x++]=R===0?0:R}}return C}function $P(s){return typeof s=="number"?s:li(s)?Rr:+s}function fi(s){if(typeof s=="string")return s;if(bt(s))return pr(s,fi)+"";if(li(s))return vP?vP.call(s):"";var u=s+"";return u=="0"&&1/s==-Mt?"-0":u}function Ra(s,u,l){var g=-1,x=zd,C=s.length,R=!0,L=[],K=L;if(l)R=!1,x=Z0;else if(C>=t){var se=u?null:V4(s);if(se)return Wd(se);R=!1,x=wh,K=new $u}else K=u?[]:L;e:for(;++g<C;){var ae=s[g],de=u?u(ae):ae;if(ae=l||ae!==0?ae:0,R&&de===de){for(var Ce=K.length;Ce--;)if(K[Ce]===de)continue e;u&&K.push(de),L.push(ae)}else x(K,de,l)||(K!==L&&K.push(de),L.push(ae))}return L}function Sw(s,u){return u=Ba(u,s),s=yS(s,u),s==null||delete s[is(Yi(u))]}function zP(s,u,l,g){return Ch(s,u,l(qu(s,u)),g)}function lm(s,u,l,g){for(var x=s.length,C=g?x:-1;(g?C--:++C<x)&&u(s[C],C,s););return l?Gi(s,g?0:C,g?C+1:x):Gi(s,g?C+1:0,g?x:C)}function qP(s,u){var l=s;return l instanceof Rt&&(l=l.value()),ew(u,function(g,x){return x.func.apply(x.thisArg,Ca([g],x.args))},l)}function Dw(s,u,l){var g=s.length;if(g<2)return g?Ra(s[0]):[];for(var x=-1,C=V(g);++x<g;)for(var R=s[x],L=-1;++L<g;)L!=x&&(C[x]=Sh(C[x]||R,s[L],u,l));return Ra(ln(C,1),u,l)}function WP(s,u,l){for(var g=-1,x=s.length,C=u.length,R={};++g<x;){var L=g<C?u[g]:r;l(R,s[g],L)}return R}function Aw(s){return Lr(s)?s:[]}function Cw(s){return typeof s=="function"?s:Gn}function Ba(s,u){return bt(s)?s:Nw(s,u)?[s]:vS(Vt(s))}var L4=Dt;function Oa(s,u,l){var g=s.length;return l=l===r?g:l,!u&&l>=g?s:Gi(s,u,l)}var VP=EO||function(s){return Zr.clearTimeout(s)};function HP(s,u){if(u)return s.slice();var l=s.length,g=dP?dP(l):new s.constructor(l);return s.copy(g),g}function Iw(s){var u=new s.constructor(s.byteLength);return new Xd(u).set(new Xd(s)),u}function N4(s,u){var l=u?Iw(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.byteLength)}function U4(s){var u=new s.constructor(s.source,ye.exec(s));return u.lastIndex=s.lastIndex,u}function M4(s){return Eh?ir(Eh.call(s)):{}}function GP(s,u){var l=u?Iw(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.length)}function YP(s,u){if(s!==u){var l=s!==r,g=s===null,x=s===s,C=li(s),R=u!==r,L=u===null,K=u===u,se=li(u);if(!L&&!se&&!C&&s>u||C&&R&&K&&!L&&!se||g&&R&&K||!l&&K||!x)return 1;if(!g&&!C&&!se&&s<u||se&&l&&x&&!g&&!C||L&&l&&x||!R&&x||!K)return-1}return 0}function K4(s,u,l){for(var g=-1,x=s.criteria,C=u.criteria,R=x.length,L=l.length;++g<R;){var K=YP(x[g],C[g]);if(K){if(g>=L)return K;var se=l[g];return K*(se=="desc"?-1:1)}}return s.index-u.index}function JP(s,u,l,g){for(var x=-1,C=s.length,R=l.length,L=-1,K=u.length,se=Gr(C-R,0),ae=V(K+se),de=!g;++L<K;)ae[L]=u[L];for(;++x<R;)(de||x<C)&&(ae[l[x]]=s[x]);for(;se--;)ae[L++]=s[x++];return ae}function XP(s,u,l,g){for(var x=-1,C=s.length,R=-1,L=l.length,K=-1,se=u.length,ae=Gr(C-L,0),de=V(ae+se),Ce=!g;++x<ae;)de[x]=s[x];for(var He=x;++K<se;)de[He+K]=u[K];for(;++R<L;)(Ce||x<C)&&(de[He+l[R]]=s[x++]);return de}function Wn(s,u){var l=-1,g=s.length;for(u||(u=V(g));++l<g;)u[l]=s[l];return u}function ns(s,u,l,g){var x=!l;l||(l={});for(var C=-1,R=u.length;++C<R;){var L=u[C],K=g?g(l[L],s[L],L,l,s):r;K===r&&(K=s[L]),x?Ns(l,L,K):Ph(l,L,K)}return l}function j4(s,u){return ns(s,Lw(s),u)}function $4(s,u){return ns(s,fS(s),u)}function hm(s,u){return function(l,g){var x=bt(l)?HB:f4,C=u?u():{};return x(l,s,it(g,2),C)}}function Sf(s){return Dt(function(u,l){var g=-1,x=l.length,C=x>1?l[x-1]:r,R=x>2?l[2]:r;for(C=s.length>3&&typeof C=="function"?(x--,C):r,R&&Rn(l[0],l[1],R)&&(C=x<3?r:C,x=1),u=ir(u);++g<x;){var L=l[g];L&&s(u,L,g,C)}return u})}function QP(s,u){return function(l,g){if(l==null)return l;if(!Vn(l))return s(l,g);for(var x=l.length,C=u?x:-1,R=ir(l);(u?C--:++C<x)&&g(R[C],C,R)!==!1;);return l}}function ZP(s){return function(u,l,g){for(var x=-1,C=ir(u),R=g(u),L=R.length;L--;){var K=R[s?L:++x];if(l(C[K],K,C)===!1)break}return u}}function z4(s,u,l){var g=u&F,x=Ih(s);function C(){var R=this&&this!==Zr&&this instanceof C?x:s;return R.apply(g?l:this,arguments)}return C}function eS(s){return function(u){u=Vt(u);var l=bf(u)?_o(u):r,g=l?l[0]:u.charAt(0),x=l?Oa(l,1).join(""):u.slice(1);return g[s]()+x}}function Df(s){return function(u){return ew(QS(XS(u).replace(RB,"")),s,"")}}function Ih(s){return function(){var u=arguments;switch(u.length){case 0:return new s;case 1:return new s(u[0]);case 2:return new s(u[0],u[1]);case 3:return new s(u[0],u[1],u[2]);case 4:return new s(u[0],u[1],u[2],u[3]);case 5:return new s(u[0],u[1],u[2],u[3],u[4]);case 6:return new s(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new s(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var l=Pf(s.prototype),g=s.apply(l,u);return vr(g)?g:l}}function q4(s,u,l){var g=Ih(s);function x(){for(var C=arguments.length,R=V(C),L=C,K=Af(x);L--;)R[L]=arguments[L];var se=C<3&&R[0]!==K&&R[C-1]!==K?[]:Ia(R,K);if(C-=se.length,C<l)return oS(s,u,pm,x.placeholder,r,R,se,r,r,l-C);var ae=this&&this!==Zr&&this instanceof x?g:s;return ui(ae,this,R)}return x}function tS(s){return function(u,l,g){var x=ir(u);if(!Vn(u)){var C=it(l,3);u=en(u),l=function(L){return C(x[L],L,x)}}var R=s(u,l,g);return R>-1?x[C?u[R]:R]:r}}function rS(s){return Ms(function(u){var l=u.length,g=l,x=Vi.prototype.thru;for(s&&u.reverse();g--;){var C=u[g];if(typeof C!="function")throw new Wi(i);if(x&&!R&&gm(C)=="wrapper")var R=new Vi([],!0)}for(g=R?g:l;++g<l;){C=u[g];var L=gm(C),K=L=="wrapper"?Bw(C):r;K&&Uw(K[0])&&K[1]==(Pe|he|re|Y)&&!K[4].length&&K[9]==1?R=R[gm(K[0])].apply(R,K[3]):R=C.length==1&&Uw(C)?R[L]():R.thru(C)}return function(){var se=arguments,ae=se[0];if(R&&se.length==1&&bt(ae))return R.plant(ae).value();for(var de=0,Ce=l?u[de].apply(this,se):ae;++de<l;)Ce=u[de].call(this,Ce);return Ce}})}function pm(s,u,l,g,x,C,R,L,K,se){var ae=u&Pe,de=u&F,Ce=u&U,He=u&(he|De),st=u&ge,Et=Ce?r:Ih(s);function at(){for(var It=arguments.length,Lt=V(It),hi=It;hi--;)Lt[hi]=arguments[hi];if(He)var Bn=Af(at),pi=rO(Lt,Bn);if(g&&(Lt=JP(Lt,g,x,He)),C&&(Lt=XP(Lt,C,R,He)),It-=pi,He&&It<se){var Nr=Ia(Lt,Bn);return oS(s,u,pm,at.placeholder,l,Lt,Nr,L,K,se-It)}var Po=de?l:this,zs=Ce?Po[s]:s;return It=Lt.length,L?Lt=fL(Lt,L):st&&It>1&&Lt.reverse(),ae&&K<It&&(Lt.length=K),this&&this!==Zr&&this instanceof at&&(zs=Et||Ih(zs)),zs.apply(Po,Lt)}return at}function nS(s,u){return function(l,g){return w4(l,s,u(g),{})}}function dm(s,u){return function(l,g){var x;if(l===r&&g===r)return u;if(l!==r&&(x=l),g!==r){if(x===r)return g;typeof l=="string"||typeof g=="string"?(l=fi(l),g=fi(g)):(l=$P(l),g=$P(g)),x=s(l,g)}return x}}function Tw(s){return Ms(function(u){return u=pr(u,ci(it())),Dt(function(l){var g=this;return s(u,function(x){return ui(x,g,l)})})})}function mm(s,u){u=u===r?" ":fi(u);var l=u.length;if(l<2)return l?Ew(u,s):u;var g=Ew(u,tm(s/vf(u)));return bf(u)?Oa(_o(g),0,s).join(""):g.slice(0,s)}function W4(s,u,l,g){var x=u&F,C=Ih(s);function R(){for(var L=-1,K=arguments.length,se=-1,ae=g.length,de=V(ae+K),Ce=this&&this!==Zr&&this instanceof R?C:s;++se<ae;)de[se]=g[se];for(;K--;)de[se++]=arguments[++L];return ui(Ce,x?l:this,de)}return R}function iS(s){return function(u,l,g){return g&&typeof g!="number"&&Rn(u,l,g)&&(l=g=r),u=$s(u),l===r?(l=u,u=0):l=$s(l),g=g===r?u<l?1:-1:$s(g),T4(u,l,g,s)}}function ym(s){return function(u,l){return typeof u=="string"&&typeof l=="string"||(u=Ji(u),l=Ji(l)),s(u,l)}}function oS(s,u,l,g,x,C,R,L,K,se){var ae=u&he,de=ae?R:r,Ce=ae?r:R,He=ae?C:r,st=ae?r:C;u|=ae?re:be,u&=~(ae?be:re),u&pe||(u&=~(F|U));var Et=[s,u,x,He,de,st,Ce,L,K,se],at=l.apply(r,Et);return Uw(s)&&gS(at,Et),at.placeholder=g,wS(at,s,u)}function kw(s){var u=Hr[s];return function(l,g){if(l=Ji(l),g=g==null?0:xn(_t(g),292),g&&wP(l)){var x=(Vt(l)+"e").split("e"),C=u(x[0]+"e"+(+x[1]+g));return x=(Vt(C)+"e").split("e"),+(x[0]+"e"+(+x[1]-g))}return u(l)}}var V4=xf&&1/Wd(new xf([,-0]))[1]==Mt?function(s){return new xf(s)}:Zw;function sS(s){return function(u){var l=En(u);return l==Vr?aw(u):l==ur?cO(u):tO(u,s(u))}}function Us(s,u,l,g,x,C,R,L){var K=u&U;if(!K&&typeof s!="function")throw new Wi(i);var se=g?g.length:0;if(se||(u&=~(re|be),g=x=r),R=R===r?R:Gr(_t(R),0),L=L===r?L:_t(L),se-=x?x.length:0,u&be){var ae=g,de=x;g=x=r}var Ce=K?r:Bw(s),He=[s,u,l,g,x,ae,de,C,R,L];if(Ce&&aL(He,Ce),s=He[0],u=He[1],l=He[2],g=He[3],x=He[4],L=He[9]=He[9]===r?K?0:s.length:Gr(He[9]-se,0),!L&&u&(he|De)&&(u&=~(he|De)),!u||u==F)var st=z4(s,u,l);else u==he||u==De?st=q4(s,u,L):(u==re||u==(F|re))&&!x.length?st=W4(s,u,l,g):st=pm.apply(r,He);var Et=Ce?KP:gS;return wS(Et(st,He),s,u)}function aS(s,u,l,g){return s===r||Eo(s,_f[l])&&!Yt.call(g,l)?u:s}function uS(s,u,l,g,x,C){return vr(s)&&vr(u)&&(C.set(u,s),cm(s,u,r,uS,C),C.delete(u)),s}function H4(s){return Fh(s)?r:s}function cS(s,u,l,g,x,C){var R=l&E,L=s.length,K=u.length;if(L!=K&&!(R&&K>L))return!1;var se=C.get(s),ae=C.get(u);if(se&&ae)return se==u&&ae==s;var de=-1,Ce=!0,He=l&T?new $u:r;for(C.set(s,u),C.set(u,s);++de<L;){var st=s[de],Et=u[de];if(g)var at=R?g(Et,st,de,u,s,C):g(st,Et,de,s,u,C);if(at!==r){if(at)continue;Ce=!1;break}if(He){if(!tw(u,function(It,Lt){if(!wh(He,Lt)&&(st===It||x(st,It,l,g,C)))return He.push(Lt)})){Ce=!1;break}}else if(!(st===Et||x(st,Et,l,g,C))){Ce=!1;break}}return C.delete(s),C.delete(u),Ce}function G4(s,u,l,g,x,C,R){switch(l){case le:if(s.byteLength!=u.byteLength||s.byteOffset!=u.byteOffset)return!1;s=s.buffer,u=u.buffer;case J:return!(s.byteLength!=u.byteLength||!C(new Xd(s),new Xd(u)));case Ui:case Mi:case yo:return Eo(+s,+u);case Br:return s.name==u.name&&s.message==u.message;case Qr:case zn:return s==u+"";case Vr:var L=aw;case ur:var K=g&E;if(L||(L=Wd),s.size!=u.size&&!K)return!1;var se=R.get(s);if(se)return se==u;g|=T,R.set(s,u);var ae=cS(L(s),L(u),g,x,C,R);return R.delete(s),ae;case qn:if(Eh)return Eh.call(s)==Eh.call(u)}return!1}function Y4(s,u,l,g,x,C){var R=l&E,L=Fw(s),K=L.length,se=Fw(u),ae=se.length;if(K!=ae&&!R)return!1;for(var de=K;de--;){var Ce=L[de];if(!(R?Ce in u:Yt.call(u,Ce)))return!1}var He=C.get(s),st=C.get(u);if(He&&st)return He==u&&st==s;var Et=!0;C.set(s,u),C.set(u,s);for(var at=R;++de<K;){Ce=L[de];var It=s[Ce],Lt=u[Ce];if(g)var hi=R?g(Lt,It,Ce,u,s,C):g(It,Lt,Ce,s,u,C);if(!(hi===r?It===Lt||x(It,Lt,l,g,C):hi)){Et=!1;break}at||(at=Ce=="constructor")}if(Et&&!at){var Bn=s.constructor,pi=u.constructor;Bn!=pi&&"constructor"in s&&"constructor"in u&&!(typeof Bn=="function"&&Bn instanceof Bn&&typeof pi=="function"&&pi instanceof pi)&&(Et=!1)}return C.delete(s),C.delete(u),Et}function Ms(s){return Kw(mS(s,r,PS),s+"")}function Fw(s){return IP(s,en,Lw)}function Rw(s){return IP(s,Hn,fS)}var Bw=nm?function(s){return nm.get(s)}:Zw;function gm(s){for(var u=s.name+"",l=Ef[u],g=Yt.call(Ef,u)?l.length:0;g--;){var x=l[g],C=x.func;if(C==null||C==s)return x.name}return u}function Af(s){var u=Yt.call(D,"placeholder")?D:s;return u.placeholder}function it(){var s=D.iteratee||Xw;return s=s===Xw?FP:s,arguments.length?s(arguments[0],arguments[1]):s}function wm(s,u){var l=s.__data__;return nL(u)?l[typeof u=="string"?"string":"hash"]:l.map}function Ow(s){for(var u=en(s),l=u.length;l--;){var g=u[l],x=s[g];u[l]=[g,x,pS(x)]}return u}function Wu(s,u){var l=sO(s,u);return kP(l)?l:r}function J4(s){var u=Yt.call(s,Ku),l=s[Ku];try{s[Ku]=r;var g=!0}catch{}var x=Yd.call(s);return g&&(u?s[Ku]=l:delete s[Ku]),x}var Lw=cw?function(s){return s==null?[]:(s=ir(s),Aa(cw(s),function(u){return yP.call(s,u)}))}:eb,fS=cw?function(s){for(var u=[];s;)Ca(u,Lw(s)),s=Qd(s);return u}:eb,En=Fn;(fw&&En(new fw(new ArrayBuffer(1)))!=le||vh&&En(new vh)!=Vr||lw&&En(lw.resolve())!=_n||xf&&En(new xf)!=ur||_h&&En(new _h)!=cn)&&(En=function(s){var u=Fn(s),l=u==kn?s.constructor:r,g=l?Vu(l):"";if(g)switch(g){case FO:return le;case RO:return Vr;case BO:return _n;case OO:return ur;case LO:return cn}return u});function X4(s,u,l){for(var g=-1,x=l.length;++g<x;){var C=l[g],R=C.size;switch(C.type){case"drop":s+=R;break;case"dropRight":u-=R;break;case"take":u=xn(u,s+R);break;case"takeRight":s=Gr(s,u-R);break}}return{start:s,end:u}}function Q4(s){var u=s.match(P);return u?u[1].split(y):[]}function lS(s,u,l){u=Ba(u,s);for(var g=-1,x=u.length,C=!1;++g<x;){var R=is(u[g]);if(!(C=s!=null&&l(s,R)))break;s=s[R]}return C||++g!=x?C:(x=s==null?0:s.length,!!x&&Sm(x)&&Ks(R,x)&&(bt(s)||Hu(s)))}function Z4(s){var u=s.length,l=new s.constructor(u);return u&&typeof s[0]=="string"&&Yt.call(s,"index")&&(l.index=s.index,l.input=s.input),l}function hS(s){return typeof s.constructor=="function"&&!Th(s)?Pf(Qd(s)):{}}function eL(s,u,l){var g=s.constructor;switch(u){case J:return Iw(s);case Ui:case Mi:return new g(+s);case le:return N4(s,l);case ve:case je:case or:case tt:case ut:case qe:case yt:case pt:case Pr:return GP(s,l);case Vr:return new g;case yo:case zn:return new g(s);case Qr:return U4(s);case ur:return new g;case qn:return M4(s)}}function tL(s,u){var l=u.length;if(!l)return s;var g=l-1;return u[g]=(l>1?"& ":"")+u[g],u=u.join(l>2?", ":" "),s.replace(S,`{
/* [wrapped with `+u+`] */
`)}function rL(s){return bt(s)||Hu(s)||!!(gP&&s&&s[gP])}function Ks(s,u){var l=typeof s;return u=u??jr,!!u&&(l=="number"||l!="symbol"&&rt.test(s))&&s>-1&&s%1==0&&s<u}function Rn(s,u,l){if(!vr(l))return!1;var g=typeof u;return(g=="number"?Vn(l)&&Ks(u,l.length):g=="string"&&u in l)?Eo(l[u],s):!1}function Nw(s,u){if(bt(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||li(s)?!0:Nu.test(s)||!Lu.test(s)||u!=null&&s in ir(u)}function nL(s){var u=typeof s;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?s!=="__proto__":s===null}function Uw(s){var u=gm(s),l=D[u];if(typeof l!="function"||!(u in Rt.prototype))return!1;if(s===l)return!0;var g=Bw(l);return!!g&&s===g[0]}function iL(s){return!!pP&&pP in s}var oL=Hd?js:tb;function Th(s){var u=s&&s.constructor,l=typeof u=="function"&&u.prototype||_f;return s===l}function pS(s){return s===s&&!vr(s)}function dS(s,u){return function(l){return l==null?!1:l[s]===u&&(u!==r||s in ir(l))}}function sL(s){var u=Em(s,function(g){return l.size===c&&l.clear(),g}),l=u.cache;return u}function aL(s,u){var l=s[1],g=u[1],x=l|g,C=x<(F|U|Pe),R=g==Pe&&l==he||g==Pe&&l==Y&&s[7].length<=u[8]||g==(Pe|Y)&&u[7].length<=u[8]&&l==he;if(!(C||R))return s;g&F&&(s[2]=u[2],x|=l&F?0:pe);var L=u[3];if(L){var K=s[3];s[3]=K?JP(K,L,u[4]):L,s[4]=K?Ia(s[3],f):u[4]}return L=u[5],L&&(K=s[5],s[5]=K?XP(K,L,u[6]):L,s[6]=K?Ia(s[5],f):u[6]),L=u[7],L&&(s[7]=L),g&Pe&&(s[8]=s[8]==null?u[8]:xn(s[8],u[8])),s[9]==null&&(s[9]=u[9]),s[0]=u[0],s[1]=x,s}function uL(s){var u=[];if(s!=null)for(var l in ir(s))u.push(l);return u}function cL(s){return Yd.call(s)}function mS(s,u,l){return u=Gr(u===r?s.length-1:u,0),function(){for(var g=arguments,x=-1,C=Gr(g.length-u,0),R=V(C);++x<C;)R[x]=g[u+x];x=-1;for(var L=V(u+1);++x<u;)L[x]=g[x];return L[u]=l(R),ui(s,this,L)}}function yS(s,u){return u.length<2?s:qu(s,Gi(u,0,-1))}function fL(s,u){for(var l=s.length,g=xn(u.length,l),x=Wn(s);g--;){var C=u[g];s[g]=Ks(C,l)?x[C]:r}return s}function Mw(s,u){if(!(u==="constructor"&&typeof s[u]=="function")&&u!="__proto__")return s[u]}var gS=bS(KP),kh=SO||function(s,u){return Zr.setTimeout(s,u)},Kw=bS(R4);function wS(s,u,l){var g=u+"";return Kw(s,tL(g,lL(Q4(g),l)))}function bS(s){var u=0,l=0;return function(){var g=IO(),x=Nt-(g-l);if(l=g,x>0){if(++u>=vt)return arguments[0]}else u=0;return s.apply(r,arguments)}}function bm(s,u){var l=-1,g=s.length,x=g-1;for(u=u===r?g:u;++l<u;){var C=xw(l,x),R=s[C];s[C]=s[l],s[l]=R}return s.length=u,s}var vS=sL(function(s){var u=[];return s.charCodeAt(0)===46&&u.push(""),s.replace(gf,function(l,g,x,C){u.push(x?C.replace(j,"$1"):g||l)}),u});function is(s){if(typeof s=="string"||li(s))return s;var u=s+"";return u=="0"&&1/s==-Mt?"-0":u}function Vu(s){if(s!=null){try{return Gd.call(s)}catch{}try{return s+""}catch{}}return""}function lL(s,u){return qi(Wt,function(l){var g="_."+l[0];u&l[1]&&!zd(s,g)&&s.push(g)}),s.sort()}function _S(s){if(s instanceof Rt)return s.clone();var u=new Vi(s.__wrapped__,s.__chain__);return u.__actions__=Wn(s.__actions__),u.__index__=s.__index__,u.__values__=s.__values__,u}function hL(s,u,l){(l?Rn(s,u,l):u===r)?u=1:u=Gr(_t(u),0);var g=s==null?0:s.length;if(!g||u<1)return[];for(var x=0,C=0,R=V(tm(g/u));x<g;)R[C++]=Gi(s,x,x+=u);return R}function pL(s){for(var u=-1,l=s==null?0:s.length,g=0,x=[];++u<l;){var C=s[u];C&&(x[g++]=C)}return x}function dL(){var s=arguments.length;if(!s)return[];for(var u=V(s-1),l=arguments[0],g=s;g--;)u[g-1]=arguments[g];return Ca(bt(l)?Wn(l):[l],ln(u,1))}var mL=Dt(function(s,u){return Lr(s)?Sh(s,ln(u,1,Lr,!0)):[]}),yL=Dt(function(s,u){var l=Yi(u);return Lr(l)&&(l=r),Lr(s)?Sh(s,ln(u,1,Lr,!0),it(l,2)):[]}),gL=Dt(function(s,u){var l=Yi(u);return Lr(l)&&(l=r),Lr(s)?Sh(s,ln(u,1,Lr,!0),r,l):[]});function wL(s,u,l){var g=s==null?0:s.length;return g?(u=l||u===r?1:_t(u),Gi(s,u<0?0:u,g)):[]}function bL(s,u,l){var g=s==null?0:s.length;return g?(u=l||u===r?1:_t(u),u=g-u,Gi(s,0,u<0?0:u)):[]}function vL(s,u){return s&&s.length?lm(s,it(u,3),!0,!0):[]}function _L(s,u){return s&&s.length?lm(s,it(u,3),!0):[]}function xL(s,u,l,g){var x=s==null?0:s.length;return x?(l&&typeof l!="number"&&Rn(s,u,l)&&(l=0,g=x),d4(s,u,l,g)):[]}function xS(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var x=l==null?0:_t(l);return x<0&&(x=Gr(g+x,0)),qd(s,it(u,3),x)}function ES(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var x=g-1;return l!==r&&(x=_t(l),x=l<0?Gr(g+x,0):xn(x,g-1)),qd(s,it(u,3),x,!0)}function PS(s){var u=s==null?0:s.length;return u?ln(s,1):[]}function EL(s){var u=s==null?0:s.length;return u?ln(s,Mt):[]}function PL(s,u){var l=s==null?0:s.length;return l?(u=u===r?1:_t(u),ln(s,u)):[]}function SL(s){for(var u=-1,l=s==null?0:s.length,g={};++u<l;){var x=s[u];g[x[0]]=x[1]}return g}function SS(s){return s&&s.length?s[0]:r}function DL(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var x=l==null?0:_t(l);return x<0&&(x=Gr(g+x,0)),wf(s,u,x)}function AL(s){var u=s==null?0:s.length;return u?Gi(s,0,-1):[]}var CL=Dt(function(s){var u=pr(s,Aw);return u.length&&u[0]===s[0]?gw(u):[]}),IL=Dt(function(s){var u=Yi(s),l=pr(s,Aw);return u===Yi(l)?u=r:l.pop(),l.length&&l[0]===s[0]?gw(l,it(u,2)):[]}),TL=Dt(function(s){var u=Yi(s),l=pr(s,Aw);return u=typeof u=="function"?u:r,u&&l.pop(),l.length&&l[0]===s[0]?gw(l,r,u):[]});function kL(s,u){return s==null?"":AO.call(s,u)}function Yi(s){var u=s==null?0:s.length;return u?s[u-1]:r}function FL(s,u,l){var g=s==null?0:s.length;if(!g)return-1;var x=g;return l!==r&&(x=_t(l),x=x<0?Gr(g+x,0):xn(x,g-1)),u===u?lO(s,u,x):qd(s,oP,x,!0)}function RL(s,u){return s&&s.length?LP(s,_t(u)):r}var BL=Dt(DS);function DS(s,u){return s&&s.length&&u&&u.length?_w(s,u):s}function OL(s,u,l){return s&&s.length&&u&&u.length?_w(s,u,it(l,2)):s}function LL(s,u,l){return s&&s.length&&u&&u.length?_w(s,u,r,l):s}var NL=Ms(function(s,u){var l=s==null?0:s.length,g=pw(s,u);return MP(s,pr(u,function(x){return Ks(x,l)?+x:x}).sort(YP)),g});function UL(s,u){var l=[];if(!(s&&s.length))return l;var g=-1,x=[],C=s.length;for(u=it(u,3);++g<C;){var R=s[g];u(R,g,s)&&(l.push(R),x.push(g))}return MP(s,x),l}function jw(s){return s==null?s:kO.call(s)}function ML(s,u,l){var g=s==null?0:s.length;return g?(l&&typeof l!="number"&&Rn(s,u,l)?(u=0,l=g):(u=u==null?0:_t(u),l=l===r?g:_t(l)),Gi(s,u,l)):[]}function KL(s,u){return fm(s,u)}function jL(s,u,l){return Pw(s,u,it(l,2))}function $L(s,u){var l=s==null?0:s.length;if(l){var g=fm(s,u);if(g<l&&Eo(s[g],u))return g}return-1}function zL(s,u){return fm(s,u,!0)}function qL(s,u,l){return Pw(s,u,it(l,2),!0)}function WL(s,u){var l=s==null?0:s.length;if(l){var g=fm(s,u,!0)-1;if(Eo(s[g],u))return g}return-1}function VL(s){return s&&s.length?jP(s):[]}function HL(s,u){return s&&s.length?jP(s,it(u,2)):[]}function GL(s){var u=s==null?0:s.length;return u?Gi(s,1,u):[]}function YL(s,u,l){return s&&s.length?(u=l||u===r?1:_t(u),Gi(s,0,u<0?0:u)):[]}function JL(s,u,l){var g=s==null?0:s.length;return g?(u=l||u===r?1:_t(u),u=g-u,Gi(s,u<0?0:u,g)):[]}function XL(s,u){return s&&s.length?lm(s,it(u,3),!1,!0):[]}function QL(s,u){return s&&s.length?lm(s,it(u,3)):[]}var ZL=Dt(function(s){return Ra(ln(s,1,Lr,!0))}),eN=Dt(function(s){var u=Yi(s);return Lr(u)&&(u=r),Ra(ln(s,1,Lr,!0),it(u,2))}),tN=Dt(function(s){var u=Yi(s);return u=typeof u=="function"?u:r,Ra(ln(s,1,Lr,!0),r,u)});function rN(s){return s&&s.length?Ra(s):[]}function nN(s,u){return s&&s.length?Ra(s,it(u,2)):[]}function iN(s,u){return u=typeof u=="function"?u:r,s&&s.length?Ra(s,r,u):[]}function $w(s){if(!(s&&s.length))return[];var u=0;return s=Aa(s,function(l){if(Lr(l))return u=Gr(l.length,u),!0}),ow(u,function(l){return pr(s,rw(l))})}function AS(s,u){if(!(s&&s.length))return[];var l=$w(s);return u==null?l:pr(l,function(g){return ui(u,r,g)})}var oN=Dt(function(s,u){return Lr(s)?Sh(s,u):[]}),sN=Dt(function(s){return Dw(Aa(s,Lr))}),aN=Dt(function(s){var u=Yi(s);return Lr(u)&&(u=r),Dw(Aa(s,Lr),it(u,2))}),uN=Dt(function(s){var u=Yi(s);return u=typeof u=="function"?u:r,Dw(Aa(s,Lr),r,u)}),cN=Dt($w);function fN(s,u){return WP(s||[],u||[],Ph)}function lN(s,u){return WP(s||[],u||[],Ch)}var hN=Dt(function(s){var u=s.length,l=u>1?s[u-1]:r;return l=typeof l=="function"?(s.pop(),l):r,AS(s,l)});function CS(s){var u=D(s);return u.__chain__=!0,u}function pN(s,u){return u(s),s}function vm(s,u){return u(s)}var dN=Ms(function(s){var u=s.length,l=u?s[0]:0,g=this.__wrapped__,x=function(C){return pw(C,s)};return u>1||this.__actions__.length||!(g instanceof Rt)||!Ks(l)?this.thru(x):(g=g.slice(l,+l+(u?1:0)),g.__actions__.push({func:vm,args:[x],thisArg:r}),new Vi(g,this.__chain__).thru(function(C){return u&&!C.length&&C.push(r),C}))});function mN(){return CS(this)}function yN(){return new Vi(this.value(),this.__chain__)}function gN(){this.__values__===r&&(this.__values__=$S(this.value()));var s=this.__index__>=this.__values__.length,u=s?r:this.__values__[this.__index__++];return{done:s,value:u}}function wN(){return this}function bN(s){for(var u,l=this;l instanceof om;){var g=_S(l);g.__index__=0,g.__values__=r,u?x.__wrapped__=g:u=g;var x=g;l=l.__wrapped__}return x.__wrapped__=s,u}function vN(){var s=this.__wrapped__;if(s instanceof Rt){var u=s;return this.__actions__.length&&(u=new Rt(this)),u=u.reverse(),u.__actions__.push({func:vm,args:[jw],thisArg:r}),new Vi(u,this.__chain__)}return this.thru(jw)}function _N(){return qP(this.__wrapped__,this.__actions__)}var xN=hm(function(s,u,l){Yt.call(s,l)?++s[l]:Ns(s,l,1)});function EN(s,u,l){var g=bt(s)?nP:p4;return l&&Rn(s,u,l)&&(u=r),g(s,it(u,3))}function PN(s,u){var l=bt(s)?Aa:AP;return l(s,it(u,3))}var SN=tS(xS),DN=tS(ES);function AN(s,u){return ln(_m(s,u),1)}function CN(s,u){return ln(_m(s,u),Mt)}function IN(s,u,l){return l=l===r?1:_t(l),ln(_m(s,u),l)}function IS(s,u){var l=bt(s)?qi:Fa;return l(s,it(u,3))}function TS(s,u){var l=bt(s)?GB:DP;return l(s,it(u,3))}var TN=hm(function(s,u,l){Yt.call(s,l)?s[l].push(u):Ns(s,l,[u])});function kN(s,u,l,g){s=Vn(s)?s:If(s),l=l&&!g?_t(l):0;var x=s.length;return l<0&&(l=Gr(x+l,0)),Dm(s)?l<=x&&s.indexOf(u,l)>-1:!!x&&wf(s,u,l)>-1}var FN=Dt(function(s,u,l){var g=-1,x=typeof u=="function",C=Vn(s)?V(s.length):[];return Fa(s,function(R){C[++g]=x?ui(u,R,l):Dh(R,u,l)}),C}),RN=hm(function(s,u,l){Ns(s,l,u)});function _m(s,u){var l=bt(s)?pr:RP;return l(s,it(u,3))}function BN(s,u,l,g){return s==null?[]:(bt(u)||(u=u==null?[]:[u]),l=g?r:l,bt(l)||(l=l==null?[]:[l]),NP(s,u,l))}var ON=hm(function(s,u,l){s[l?0:1].push(u)},function(){return[[],[]]});function LN(s,u,l){var g=bt(s)?ew:aP,x=arguments.length<3;return g(s,it(u,4),l,x,Fa)}function NN(s,u,l){var g=bt(s)?YB:aP,x=arguments.length<3;return g(s,it(u,4),l,x,DP)}function UN(s,u){var l=bt(s)?Aa:AP;return l(s,Pm(it(u,3)))}function MN(s){var u=bt(s)?xP:k4;return u(s)}function KN(s,u,l){(l?Rn(s,u,l):u===r)?u=1:u=_t(u);var g=bt(s)?u4:F4;return g(s,u)}function jN(s){var u=bt(s)?c4:B4;return u(s)}function $N(s){if(s==null)return 0;if(Vn(s))return Dm(s)?vf(s):s.length;var u=En(s);return u==Vr||u==ur?s.size:bw(s).length}function zN(s,u,l){var g=bt(s)?tw:O4;return l&&Rn(s,u,l)&&(u=r),g(s,it(u,3))}var qN=Dt(function(s,u){if(s==null)return[];var l=u.length;return l>1&&Rn(s,u[0],u[1])?u=[]:l>2&&Rn(u[0],u[1],u[2])&&(u=[u[0]]),NP(s,ln(u,1),[])}),xm=PO||function(){return Zr.Date.now()};function WN(s,u){if(typeof u!="function")throw new Wi(i);return s=_t(s),function(){if(--s<1)return u.apply(this,arguments)}}function kS(s,u,l){return u=l?r:u,u=s&&u==null?s.length:u,Us(s,Pe,r,r,r,r,u)}function FS(s,u){var l;if(typeof u!="function")throw new Wi(i);return s=_t(s),function(){return--s>0&&(l=u.apply(this,arguments)),s<=1&&(u=r),l}}var zw=Dt(function(s,u,l){var g=F;if(l.length){var x=Ia(l,Af(zw));g|=re}return Us(s,g,u,l,x)}),RS=Dt(function(s,u,l){var g=F|U;if(l.length){var x=Ia(l,Af(RS));g|=re}return Us(u,g,s,l,x)});function BS(s,u,l){u=l?r:u;var g=Us(s,he,r,r,r,r,r,u);return g.placeholder=BS.placeholder,g}function OS(s,u,l){u=l?r:u;var g=Us(s,De,r,r,r,r,r,u);return g.placeholder=OS.placeholder,g}function LS(s,u,l){var g,x,C,R,L,K,se=0,ae=!1,de=!1,Ce=!0;if(typeof s!="function")throw new Wi(i);u=Ji(u)||0,vr(l)&&(ae=!!l.leading,de="maxWait"in l,C=de?Gr(Ji(l.maxWait)||0,u):C,Ce="trailing"in l?!!l.trailing:Ce);function He(Nr){var Po=g,zs=x;return g=x=r,se=Nr,R=s.apply(zs,Po),R}function st(Nr){return se=Nr,L=kh(It,u),ae?He(Nr):R}function Et(Nr){var Po=Nr-K,zs=Nr-se,tD=u-Po;return de?xn(tD,C-zs):tD}function at(Nr){var Po=Nr-K,zs=Nr-se;return K===r||Po>=u||Po<0||de&&zs>=C}function It(){var Nr=xm();if(at(Nr))return Lt(Nr);L=kh(It,Et(Nr))}function Lt(Nr){return L=r,Ce&&g?He(Nr):(g=x=r,R)}function hi(){L!==r&&VP(L),se=0,g=K=x=L=r}function Bn(){return L===r?R:Lt(xm())}function pi(){var Nr=xm(),Po=at(Nr);if(g=arguments,x=this,K=Nr,Po){if(L===r)return st(K);if(de)return VP(L),L=kh(It,u),He(K)}return L===r&&(L=kh(It,u)),R}return pi.cancel=hi,pi.flush=Bn,pi}var VN=Dt(function(s,u){return SP(s,1,u)}),HN=Dt(function(s,u,l){return SP(s,Ji(u)||0,l)});function GN(s){return Us(s,ge)}function Em(s,u){if(typeof s!="function"||u!=null&&typeof u!="function")throw new Wi(i);var l=function(){var g=arguments,x=u?u.apply(this,g):g[0],C=l.cache;if(C.has(x))return C.get(x);var R=s.apply(this,g);return l.cache=C.set(x,R)||C,R};return l.cache=new(Em.Cache||Ls),l}Em.Cache=Ls;function Pm(s){if(typeof s!="function")throw new Wi(i);return function(){var u=arguments;switch(u.length){case 0:return!s.call(this);case 1:return!s.call(this,u[0]);case 2:return!s.call(this,u[0],u[1]);case 3:return!s.call(this,u[0],u[1],u[2])}return!s.apply(this,u)}}function YN(s){return FS(2,s)}var JN=L4(function(s,u){u=u.length==1&&bt(u[0])?pr(u[0],ci(it())):pr(ln(u,1),ci(it()));var l=u.length;return Dt(function(g){for(var x=-1,C=xn(g.length,l);++x<C;)g[x]=u[x].call(this,g[x]);return ui(s,this,g)})}),qw=Dt(function(s,u){var l=Ia(u,Af(qw));return Us(s,re,r,u,l)}),NS=Dt(function(s,u){var l=Ia(u,Af(NS));return Us(s,be,r,u,l)}),XN=Ms(function(s,u){return Us(s,Y,r,r,r,u)});function QN(s,u){if(typeof s!="function")throw new Wi(i);return u=u===r?u:_t(u),Dt(s,u)}function ZN(s,u){if(typeof s!="function")throw new Wi(i);return u=u==null?0:Gr(_t(u),0),Dt(function(l){var g=l[u],x=Oa(l,0,u);return g&&Ca(x,g),ui(s,this,x)})}function eU(s,u,l){var g=!0,x=!0;if(typeof s!="function")throw new Wi(i);return vr(l)&&(g="leading"in l?!!l.leading:g,x="trailing"in l?!!l.trailing:x),LS(s,u,{leading:g,maxWait:u,trailing:x})}function tU(s){return kS(s,1)}function rU(s,u){return qw(Cw(u),s)}function nU(){if(!arguments.length)return[];var s=arguments[0];return bt(s)?s:[s]}function iU(s){return Hi(s,w)}function oU(s,u){return u=typeof u=="function"?u:r,Hi(s,w,u)}function sU(s){return Hi(s,d|w)}function aU(s,u){return u=typeof u=="function"?u:r,Hi(s,d|w,u)}function uU(s,u){return u==null||PP(s,u,en(u))}function Eo(s,u){return s===u||s!==s&&u!==u}var cU=ym(yw),fU=ym(function(s,u){return s>=u}),Hu=TP(function(){return arguments}())?TP:function(s){return Sr(s)&&Yt.call(s,"callee")&&!yP.call(s,"callee")},bt=V.isArray,lU=XE?ci(XE):b4;function Vn(s){return s!=null&&Sm(s.length)&&!js(s)}function Lr(s){return Sr(s)&&Vn(s)}function hU(s){return s===!0||s===!1||Sr(s)&&Fn(s)==Ui}var La=DO||tb,pU=QE?ci(QE):v4;function dU(s){return Sr(s)&&s.nodeType===1&&!Fh(s)}function mU(s){if(s==null)return!0;if(Vn(s)&&(bt(s)||typeof s=="string"||typeof s.splice=="function"||La(s)||Cf(s)||Hu(s)))return!s.length;var u=En(s);if(u==Vr||u==ur)return!s.size;if(Th(s))return!bw(s).length;for(var l in s)if(Yt.call(s,l))return!1;return!0}function yU(s,u){return Ah(s,u)}function gU(s,u,l){l=typeof l=="function"?l:r;var g=l?l(s,u):r;return g===r?Ah(s,u,r,l):!!g}function Ww(s){if(!Sr(s))return!1;var u=Fn(s);return u==Br||u==ts||typeof s.message=="string"&&typeof s.name=="string"&&!Fh(s)}function wU(s){return typeof s=="number"&&wP(s)}function js(s){if(!vr(s))return!1;var u=Fn(s);return u==Ki||u==vn||u==Xr||u==Sa}function US(s){return typeof s=="number"&&s==_t(s)}function Sm(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=jr}function vr(s){var u=typeof s;return s!=null&&(u=="object"||u=="function")}function Sr(s){return s!=null&&typeof s=="object"}var MS=ZE?ci(ZE):x4;function bU(s,u){return s===u||ww(s,u,Ow(u))}function vU(s,u,l){return l=typeof l=="function"?l:r,ww(s,u,Ow(u),l)}function _U(s){return KS(s)&&s!=+s}function xU(s){if(oL(s))throw new gt(n);return kP(s)}function EU(s){return s===null}function PU(s){return s==null}function KS(s){return typeof s=="number"||Sr(s)&&Fn(s)==yo}function Fh(s){if(!Sr(s)||Fn(s)!=kn)return!1;var u=Qd(s);if(u===null)return!0;var l=Yt.call(u,"constructor")&&u.constructor;return typeof l=="function"&&l instanceof l&&Gd.call(l)==vO}var Vw=eP?ci(eP):E4;function SU(s){return US(s)&&s>=-jr&&s<=jr}var jS=tP?ci(tP):P4;function Dm(s){return typeof s=="string"||!bt(s)&&Sr(s)&&Fn(s)==zn}function li(s){return typeof s=="symbol"||Sr(s)&&Fn(s)==qn}var Cf=rP?ci(rP):S4;function DU(s){return s===r}function AU(s){return Sr(s)&&En(s)==cn}function CU(s){return Sr(s)&&Fn(s)==$}var IU=ym(vw),TU=ym(function(s,u){return s<=u});function $S(s){if(!s)return[];if(Vn(s))return Dm(s)?_o(s):Wn(s);if(bh&&s[bh])return uO(s[bh]());var u=En(s),l=u==Vr?aw:u==ur?Wd:If;return l(s)}function $s(s){if(!s)return s===0?s:0;if(s=Ji(s),s===Mt||s===-Mt){var u=s<0?-1:1;return u*Tn}return s===s?s:0}function _t(s){var u=$s(s),l=u%1;return u===u?l?u-l:u:0}function zS(s){return s?zu(_t(s),0,Wr):0}function Ji(s){if(typeof s=="number")return s;if(li(s))return Rr;if(vr(s)){var u=typeof s.valueOf=="function"?s.valueOf():s;s=vr(u)?u+"":u}if(typeof s!="string")return s===0?s:+s;s=uP(s);var l=Ae.test(s);return l||Te.test(s)?WB(s.slice(2),l?2:8):Ke.test(s)?Rr:+s}function qS(s){return ns(s,Hn(s))}function kU(s){return s?zu(_t(s),-jr,jr):s===0?s:0}function Vt(s){return s==null?"":fi(s)}var FU=Sf(function(s,u){if(Th(u)||Vn(u)){ns(u,en(u),s);return}for(var l in u)Yt.call(u,l)&&Ph(s,l,u[l])}),WS=Sf(function(s,u){ns(u,Hn(u),s)}),Am=Sf(function(s,u,l,g){ns(u,Hn(u),s,g)}),RU=Sf(function(s,u,l,g){ns(u,en(u),s,g)}),BU=Ms(pw);function OU(s,u){var l=Pf(s);return u==null?l:EP(l,u)}var LU=Dt(function(s,u){s=ir(s);var l=-1,g=u.length,x=g>2?u[2]:r;for(x&&Rn(u[0],u[1],x)&&(g=1);++l<g;)for(var C=u[l],R=Hn(C),L=-1,K=R.length;++L<K;){var se=R[L],ae=s[se];(ae===r||Eo(ae,_f[se])&&!Yt.call(s,se))&&(s[se]=C[se])}return s}),NU=Dt(function(s){return s.push(r,uS),ui(VS,r,s)});function UU(s,u){return iP(s,it(u,3),rs)}function MU(s,u){return iP(s,it(u,3),mw)}function KU(s,u){return s==null?s:dw(s,it(u,3),Hn)}function jU(s,u){return s==null?s:CP(s,it(u,3),Hn)}function $U(s,u){return s&&rs(s,it(u,3))}function zU(s,u){return s&&mw(s,it(u,3))}function qU(s){return s==null?[]:um(s,en(s))}function WU(s){return s==null?[]:um(s,Hn(s))}function Hw(s,u,l){var g=s==null?r:qu(s,u);return g===r?l:g}function VU(s,u){return s!=null&&lS(s,u,m4)}function Gw(s,u){return s!=null&&lS(s,u,y4)}var HU=nS(function(s,u,l){u!=null&&typeof u.toString!="function"&&(u=Yd.call(u)),s[u]=l},Jw(Gn)),GU=nS(function(s,u,l){u!=null&&typeof u.toString!="function"&&(u=Yd.call(u)),Yt.call(s,u)?s[u].push(l):s[u]=[l]},it),YU=Dt(Dh);function en(s){return Vn(s)?_P(s):bw(s)}function Hn(s){return Vn(s)?_P(s,!0):D4(s)}function JU(s,u){var l={};return u=it(u,3),rs(s,function(g,x,C){Ns(l,u(g,x,C),g)}),l}function XU(s,u){var l={};return u=it(u,3),rs(s,function(g,x,C){Ns(l,x,u(g,x,C))}),l}var QU=Sf(function(s,u,l){cm(s,u,l)}),VS=Sf(function(s,u,l,g){cm(s,u,l,g)}),ZU=Ms(function(s,u){var l={};if(s==null)return l;var g=!1;u=pr(u,function(C){return C=Ba(C,s),g||(g=C.length>1),C}),ns(s,Rw(s),l),g&&(l=Hi(l,d|m|w,H4));for(var x=u.length;x--;)Sw(l,u[x]);return l});function eM(s,u){return HS(s,Pm(it(u)))}var tM=Ms(function(s,u){return s==null?{}:C4(s,u)});function HS(s,u){if(s==null)return{};var l=pr(Rw(s),function(g){return[g]});return u=it(u),UP(s,l,function(g,x){return u(g,x[0])})}function rM(s,u,l){u=Ba(u,s);var g=-1,x=u.length;for(x||(x=1,s=r);++g<x;){var C=s==null?r:s[is(u[g])];C===r&&(g=x,C=l),s=js(C)?C.call(s):C}return s}function nM(s,u,l){return s==null?s:Ch(s,u,l)}function iM(s,u,l,g){return g=typeof g=="function"?g:r,s==null?s:Ch(s,u,l,g)}var GS=sS(en),YS=sS(Hn);function oM(s,u,l){var g=bt(s),x=g||La(s)||Cf(s);if(u=it(u,4),l==null){var C=s&&s.constructor;x?l=g?new C:[]:vr(s)?l=js(C)?Pf(Qd(s)):{}:l={}}return(x?qi:rs)(s,function(R,L,K){return u(l,R,L,K)}),l}function sM(s,u){return s==null?!0:Sw(s,u)}function aM(s,u,l){return s==null?s:zP(s,u,Cw(l))}function uM(s,u,l,g){return g=typeof g=="function"?g:r,s==null?s:zP(s,u,Cw(l),g)}function If(s){return s==null?[]:sw(s,en(s))}function cM(s){return s==null?[]:sw(s,Hn(s))}function fM(s,u,l){return l===r&&(l=u,u=r),l!==r&&(l=Ji(l),l=l===l?l:0),u!==r&&(u=Ji(u),u=u===u?u:0),zu(Ji(s),u,l)}function lM(s,u,l){return u=$s(u),l===r?(l=u,u=0):l=$s(l),s=Ji(s),g4(s,u,l)}function hM(s,u,l){if(l&&typeof l!="boolean"&&Rn(s,u,l)&&(u=l=r),l===r&&(typeof u=="boolean"?(l=u,u=r):typeof s=="boolean"&&(l=s,s=r)),s===r&&u===r?(s=0,u=1):(s=$s(s),u===r?(u=s,s=0):u=$s(u)),s>u){var g=s;s=u,u=g}if(l||s%1||u%1){var x=bP();return xn(s+x*(u-s+qB("1e-"+((x+"").length-1))),u)}return xw(s,u)}var pM=Df(function(s,u,l){return u=u.toLowerCase(),s+(l?JS(u):u)});function JS(s){return Yw(Vt(s).toLowerCase())}function XS(s){return s=Vt(s),s&&s.replace(ot,nO).replace(BB,"")}function dM(s,u,l){s=Vt(s),u=fi(u);var g=s.length;l=l===r?g:zu(_t(l),0,g);var x=l;return l-=u.length,l>=0&&s.slice(l,x)==u}function mM(s){return s=Vt(s),s&&yh.test(s)?s.replace(Ou,iO):s}function yM(s){return s=Vt(s),s&&fn.test(s)?s.replace(Uu,"\\$&"):s}var gM=Df(function(s,u,l){return s+(l?"-":"")+u.toLowerCase()}),wM=Df(function(s,u,l){return s+(l?" ":"")+u.toLowerCase()}),bM=eS("toLowerCase");function vM(s,u,l){s=Vt(s),u=_t(u);var g=u?vf(s):0;if(!u||g>=u)return s;var x=(u-g)/2;return mm(rm(x),l)+s+mm(tm(x),l)}function _M(s,u,l){s=Vt(s),u=_t(u);var g=u?vf(s):0;return u&&g<u?s+mm(u-g,l):s}function xM(s,u,l){s=Vt(s),u=_t(u);var g=u?vf(s):0;return u&&g<u?mm(u-g,l)+s:s}function EM(s,u,l){return l||u==null?u=0:u&&(u=+u),TO(Vt(s).replace(Da,""),u||0)}function PM(s,u,l){return(l?Rn(s,u,l):u===r)?u=1:u=_t(u),Ew(Vt(s),u)}function SM(){var s=arguments,u=Vt(s[0]);return s.length<3?u:u.replace(s[1],s[2])}var DM=Df(function(s,u,l){return s+(l?"_":"")+u.toLowerCase()});function AM(s,u,l){return l&&typeof l!="number"&&Rn(s,u,l)&&(u=l=r),l=l===r?Wr:l>>>0,l?(s=Vt(s),s&&(typeof u=="string"||u!=null&&!Vw(u))&&(u=fi(u),!u&&bf(s))?Oa(_o(s),0,l):s.split(u,l)):[]}var CM=Df(function(s,u,l){return s+(l?" ":"")+Yw(u)});function IM(s,u,l){return s=Vt(s),l=l==null?0:zu(_t(l),0,s.length),u=fi(u),s.slice(l,l+u.length)==u}function TM(s,u,l){var g=D.templateSettings;l&&Rn(s,u,l)&&(u=r),s=Vt(s),u=Am({},u,g,aS);var x=Am({},u.imports,g.imports,aS),C=en(x),R=sw(x,C),L,K,se=0,ae=u.interpolate||ct,de="__p += '",Ce=uw((u.escape||ct).source+"|"+ae.source+"|"+(ae===vo?oe:ct).source+"|"+(u.evaluate||ct).source+"|$","g"),He="//# sourceURL="+(Yt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++MB+"]")+`
`;s.replace(Ce,function(at,It,Lt,hi,Bn,pi){return Lt||(Lt=hi),de+=s.slice(se,pi).replace(lt,oO),It&&(L=!0,de+=`' +
__e(`+It+`) +
'`),Bn&&(K=!0,de+=`';
`+Bn+`;
__p += '`),Lt&&(de+=`' +
((__t = (`+Lt+`)) == null ? '' : __t) +
'`),se=pi+at.length,at}),de+=`';
`;var st=Yt.call(u,"variable")&&u.variable;if(!st)de=`with (obj) {
`+de+`
}
`;else if(M.test(st))throw new gt(o);de=(K?de.replace(wo,""):de).replace(Rs,"$1").replace(bo,"$1;"),de="function("+(st||"obj")+`) {
`+(st?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(K?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+de+`return __p
}`;var Et=ZS(function(){return zt(C,He+"return "+de).apply(r,R)});if(Et.source=de,Ww(Et))throw Et;return Et}function kM(s){return Vt(s).toLowerCase()}function FM(s){return Vt(s).toUpperCase()}function RM(s,u,l){if(s=Vt(s),s&&(l||u===r))return uP(s);if(!s||!(u=fi(u)))return s;var g=_o(s),x=_o(u),C=cP(g,x),R=fP(g,x)+1;return Oa(g,C,R).join("")}function BM(s,u,l){if(s=Vt(s),s&&(l||u===r))return s.slice(0,hP(s)+1);if(!s||!(u=fi(u)))return s;var g=_o(s),x=fP(g,_o(u))+1;return Oa(g,0,x).join("")}function OM(s,u,l){if(s=Vt(s),s&&(l||u===r))return s.replace(Da,"");if(!s||!(u=fi(u)))return s;var g=_o(s),x=cP(g,_o(u));return Oa(g,x).join("")}function LM(s,u){var l=_e,g=Me;if(vr(u)){var x="separator"in u?u.separator:x;l="length"in u?_t(u.length):l,g="omission"in u?fi(u.omission):g}s=Vt(s);var C=s.length;if(bf(s)){var R=_o(s);C=R.length}if(l>=C)return s;var L=l-vf(g);if(L<1)return g;var K=R?Oa(R,0,L).join(""):s.slice(0,L);if(x===r)return K+g;if(R&&(L+=K.length-L),Vw(x)){if(s.slice(L).search(x)){var se,ae=K;for(x.global||(x=uw(x.source,Vt(ye.exec(x))+"g")),x.lastIndex=0;se=x.exec(ae);)var de=se.index;K=K.slice(0,de===r?L:de)}}else if(s.indexOf(fi(x),L)!=L){var Ce=K.lastIndexOf(x);Ce>-1&&(K=K.slice(0,Ce))}return K+g}function NM(s){return s=Vt(s),s&&ji.test(s)?s.replace(Bs,hO):s}var UM=Df(function(s,u,l){return s+(l?" ":"")+u.toUpperCase()}),Yw=eS("toUpperCase");function QS(s,u,l){return s=Vt(s),u=l?r:u,u===r?aO(s)?mO(s):QB(s):s.match(u)||[]}var ZS=Dt(function(s,u){try{return ui(s,r,u)}catch(l){return Ww(l)?l:new gt(l)}}),MM=Ms(function(s,u){return qi(u,function(l){l=is(l),Ns(s,l,zw(s[l],s))}),s});function KM(s){var u=s==null?0:s.length,l=it();return s=u?pr(s,function(g){if(typeof g[1]!="function")throw new Wi(i);return[l(g[0]),g[1]]}):[],Dt(function(g){for(var x=-1;++x<u;){var C=s[x];if(ui(C[0],this,g))return ui(C[1],this,g)}})}function jM(s){return h4(Hi(s,d))}function Jw(s){return function(){return s}}function $M(s,u){return s==null||s!==s?u:s}var zM=rS(),qM=rS(!0);function Gn(s){return s}function Xw(s){return FP(typeof s=="function"?s:Hi(s,d))}function WM(s){return BP(Hi(s,d))}function VM(s,u){return OP(s,Hi(u,d))}var HM=Dt(function(s,u){return function(l){return Dh(l,s,u)}}),GM=Dt(function(s,u){return function(l){return Dh(s,l,u)}});function Qw(s,u,l){var g=en(u),x=um(u,g);l==null&&!(vr(u)&&(x.length||!g.length))&&(l=u,u=s,s=this,x=um(u,en(u)));var C=!(vr(l)&&"chain"in l)||!!l.chain,R=js(s);return qi(x,function(L){var K=u[L];s[L]=K,R&&(s.prototype[L]=function(){var se=this.__chain__;if(C||se){var ae=s(this.__wrapped__),de=ae.__actions__=Wn(this.__actions__);return de.push({func:K,args:arguments,thisArg:s}),ae.__chain__=se,ae}return K.apply(s,Ca([this.value()],arguments))})}),s}function YM(){return Zr._===this&&(Zr._=_O),this}function Zw(){}function JM(s){return s=_t(s),Dt(function(u){return LP(u,s)})}var XM=Tw(pr),QM=Tw(nP),ZM=Tw(tw);function eD(s){return Nw(s)?rw(is(s)):I4(s)}function e5(s){return function(u){return s==null?r:qu(s,u)}}var t5=iS(),r5=iS(!0);function eb(){return[]}function tb(){return!1}function n5(){return{}}function i5(){return""}function o5(){return!0}function s5(s,u){if(s=_t(s),s<1||s>jr)return[];var l=Wr,g=xn(s,Wr);u=it(u),s-=Wr;for(var x=ow(g,u);++l<s;)u(l);return x}function a5(s){return bt(s)?pr(s,is):li(s)?[s]:Wn(vS(Vt(s)))}function u5(s){var u=++bO;return Vt(s)+u}var c5=dm(function(s,u){return s+u},0),f5=kw("ceil"),l5=dm(function(s,u){return s/u},1),h5=kw("floor");function p5(s){return s&&s.length?am(s,Gn,yw):r}function d5(s,u){return s&&s.length?am(s,it(u,2),yw):r}function m5(s){return sP(s,Gn)}function y5(s,u){return sP(s,it(u,2))}function g5(s){return s&&s.length?am(s,Gn,vw):r}function w5(s,u){return s&&s.length?am(s,it(u,2),vw):r}var b5=dm(function(s,u){return s*u},1),v5=kw("round"),_5=dm(function(s,u){return s-u},0);function x5(s){return s&&s.length?iw(s,Gn):0}function E5(s,u){return s&&s.length?iw(s,it(u,2)):0}return D.after=WN,D.ary=kS,D.assign=FU,D.assignIn=WS,D.assignInWith=Am,D.assignWith=RU,D.at=BU,D.before=FS,D.bind=zw,D.bindAll=MM,D.bindKey=RS,D.castArray=nU,D.chain=CS,D.chunk=hL,D.compact=pL,D.concat=dL,D.cond=KM,D.conforms=jM,D.constant=Jw,D.countBy=xN,D.create=OU,D.curry=BS,D.curryRight=OS,D.debounce=LS,D.defaults=LU,D.defaultsDeep=NU,D.defer=VN,D.delay=HN,D.difference=mL,D.differenceBy=yL,D.differenceWith=gL,D.drop=wL,D.dropRight=bL,D.dropRightWhile=vL,D.dropWhile=_L,D.fill=xL,D.filter=PN,D.flatMap=AN,D.flatMapDeep=CN,D.flatMapDepth=IN,D.flatten=PS,D.flattenDeep=EL,D.flattenDepth=PL,D.flip=GN,D.flow=zM,D.flowRight=qM,D.fromPairs=SL,D.functions=qU,D.functionsIn=WU,D.groupBy=TN,D.initial=AL,D.intersection=CL,D.intersectionBy=IL,D.intersectionWith=TL,D.invert=HU,D.invertBy=GU,D.invokeMap=FN,D.iteratee=Xw,D.keyBy=RN,D.keys=en,D.keysIn=Hn,D.map=_m,D.mapKeys=JU,D.mapValues=XU,D.matches=WM,D.matchesProperty=VM,D.memoize=Em,D.merge=QU,D.mergeWith=VS,D.method=HM,D.methodOf=GM,D.mixin=Qw,D.negate=Pm,D.nthArg=JM,D.omit=ZU,D.omitBy=eM,D.once=YN,D.orderBy=BN,D.over=XM,D.overArgs=JN,D.overEvery=QM,D.overSome=ZM,D.partial=qw,D.partialRight=NS,D.partition=ON,D.pick=tM,D.pickBy=HS,D.property=eD,D.propertyOf=e5,D.pull=BL,D.pullAll=DS,D.pullAllBy=OL,D.pullAllWith=LL,D.pullAt=NL,D.range=t5,D.rangeRight=r5,D.rearg=XN,D.reject=UN,D.remove=UL,D.rest=QN,D.reverse=jw,D.sampleSize=KN,D.set=nM,D.setWith=iM,D.shuffle=jN,D.slice=ML,D.sortBy=qN,D.sortedUniq=VL,D.sortedUniqBy=HL,D.split=AM,D.spread=ZN,D.tail=GL,D.take=YL,D.takeRight=JL,D.takeRightWhile=XL,D.takeWhile=QL,D.tap=pN,D.throttle=eU,D.thru=vm,D.toArray=$S,D.toPairs=GS,D.toPairsIn=YS,D.toPath=a5,D.toPlainObject=qS,D.transform=oM,D.unary=tU,D.union=ZL,D.unionBy=eN,D.unionWith=tN,D.uniq=rN,D.uniqBy=nN,D.uniqWith=iN,D.unset=sM,D.unzip=$w,D.unzipWith=AS,D.update=aM,D.updateWith=uM,D.values=If,D.valuesIn=cM,D.without=oN,D.words=QS,D.wrap=rU,D.xor=sN,D.xorBy=aN,D.xorWith=uN,D.zip=cN,D.zipObject=fN,D.zipObjectDeep=lN,D.zipWith=hN,D.entries=GS,D.entriesIn=YS,D.extend=WS,D.extendWith=Am,Qw(D,D),D.add=c5,D.attempt=ZS,D.camelCase=pM,D.capitalize=JS,D.ceil=f5,D.clamp=fM,D.clone=iU,D.cloneDeep=sU,D.cloneDeepWith=aU,D.cloneWith=oU,D.conformsTo=uU,D.deburr=XS,D.defaultTo=$M,D.divide=l5,D.endsWith=dM,D.eq=Eo,D.escape=mM,D.escapeRegExp=yM,D.every=EN,D.find=SN,D.findIndex=xS,D.findKey=UU,D.findLast=DN,D.findLastIndex=ES,D.findLastKey=MU,D.floor=h5,D.forEach=IS,D.forEachRight=TS,D.forIn=KU,D.forInRight=jU,D.forOwn=$U,D.forOwnRight=zU,D.get=Hw,D.gt=cU,D.gte=fU,D.has=VU,D.hasIn=Gw,D.head=SS,D.identity=Gn,D.includes=kN,D.indexOf=DL,D.inRange=lM,D.invoke=YU,D.isArguments=Hu,D.isArray=bt,D.isArrayBuffer=lU,D.isArrayLike=Vn,D.isArrayLikeObject=Lr,D.isBoolean=hU,D.isBuffer=La,D.isDate=pU,D.isElement=dU,D.isEmpty=mU,D.isEqual=yU,D.isEqualWith=gU,D.isError=Ww,D.isFinite=wU,D.isFunction=js,D.isInteger=US,D.isLength=Sm,D.isMap=MS,D.isMatch=bU,D.isMatchWith=vU,D.isNaN=_U,D.isNative=xU,D.isNil=PU,D.isNull=EU,D.isNumber=KS,D.isObject=vr,D.isObjectLike=Sr,D.isPlainObject=Fh,D.isRegExp=Vw,D.isSafeInteger=SU,D.isSet=jS,D.isString=Dm,D.isSymbol=li,D.isTypedArray=Cf,D.isUndefined=DU,D.isWeakMap=AU,D.isWeakSet=CU,D.join=kL,D.kebabCase=gM,D.last=Yi,D.lastIndexOf=FL,D.lowerCase=wM,D.lowerFirst=bM,D.lt=IU,D.lte=TU,D.max=p5,D.maxBy=d5,D.mean=m5,D.meanBy=y5,D.min=g5,D.minBy=w5,D.stubArray=eb,D.stubFalse=tb,D.stubObject=n5,D.stubString=i5,D.stubTrue=o5,D.multiply=b5,D.nth=RL,D.noConflict=YM,D.noop=Zw,D.now=xm,D.pad=vM,D.padEnd=_M,D.padStart=xM,D.parseInt=EM,D.random=hM,D.reduce=LN,D.reduceRight=NN,D.repeat=PM,D.replace=SM,D.result=rM,D.round=v5,D.runInContext=N,D.sample=MN,D.size=$N,D.snakeCase=DM,D.some=zN,D.sortedIndex=KL,D.sortedIndexBy=jL,D.sortedIndexOf=$L,D.sortedLastIndex=zL,D.sortedLastIndexBy=qL,D.sortedLastIndexOf=WL,D.startCase=CM,D.startsWith=IM,D.subtract=_5,D.sum=x5,D.sumBy=E5,D.template=TM,D.times=s5,D.toFinite=$s,D.toInteger=_t,D.toLength=zS,D.toLower=kM,D.toNumber=Ji,D.toSafeInteger=kU,D.toString=Vt,D.toUpper=FM,D.trim=RM,D.trimEnd=BM,D.trimStart=OM,D.truncate=LM,D.unescape=NM,D.uniqueId=u5,D.upperCase=UM,D.upperFirst=Yw,D.each=IS,D.eachRight=TS,D.first=SS,Qw(D,function(){var s={};return rs(D,function(u,l){Yt.call(D.prototype,l)||(s[l]=u)}),s}(),{chain:!1}),D.VERSION=e,qi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){D[s].placeholder=D}),qi(["drop","take"],function(s,u){Rt.prototype[s]=function(l){l=l===r?1:Gr(_t(l),0);var g=this.__filtered__&&!u?new Rt(this):this.clone();return g.__filtered__?g.__takeCount__=xn(l,g.__takeCount__):g.__views__.push({size:xn(l,Wr),type:s+(g.__dir__<0?"Right":"")}),g},Rt.prototype[s+"Right"]=function(l){return this.reverse()[s](l).reverse()}}),qi(["filter","map","takeWhile"],function(s,u){var l=u+1,g=l==Bt||l==hr;Rt.prototype[s]=function(x){var C=this.clone();return C.__iteratees__.push({iteratee:it(x,3),type:l}),C.__filtered__=C.__filtered__||g,C}}),qi(["head","last"],function(s,u){var l="take"+(u?"Right":"");Rt.prototype[s]=function(){return this[l](1).value()[0]}}),qi(["initial","tail"],function(s,u){var l="drop"+(u?"":"Right");Rt.prototype[s]=function(){return this.__filtered__?new Rt(this):this[l](1)}}),Rt.prototype.compact=function(){return this.filter(Gn)},Rt.prototype.find=function(s){return this.filter(s).head()},Rt.prototype.findLast=function(s){return this.reverse().find(s)},Rt.prototype.invokeMap=Dt(function(s,u){return typeof s=="function"?new Rt(this):this.map(function(l){return Dh(l,s,u)})}),Rt.prototype.reject=function(s){return this.filter(Pm(it(s)))},Rt.prototype.slice=function(s,u){s=_t(s);var l=this;return l.__filtered__&&(s>0||u<0)?new Rt(l):(s<0?l=l.takeRight(-s):s&&(l=l.drop(s)),u!==r&&(u=_t(u),l=u<0?l.dropRight(-u):l.take(u-s)),l)},Rt.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Rt.prototype.toArray=function(){return this.take(Wr)},rs(Rt.prototype,function(s,u){var l=/^(?:filter|find|map|reject)|While$/.test(u),g=/^(?:head|last)$/.test(u),x=D[g?"take"+(u=="last"?"Right":""):u],C=g||/^find/.test(u);!x||(D.prototype[u]=function(){var R=this.__wrapped__,L=g?[1]:arguments,K=R instanceof Rt,se=L[0],ae=K||bt(R),de=function(It){var Lt=x.apply(D,Ca([It],L));return g&&Ce?Lt[0]:Lt};ae&&l&&typeof se=="function"&&se.length!=1&&(K=ae=!1);var Ce=this.__chain__,He=!!this.__actions__.length,st=C&&!Ce,Et=K&&!He;if(!C&&ae){R=Et?R:new Rt(this);var at=s.apply(R,L);return at.__actions__.push({func:vm,args:[de],thisArg:r}),new Vi(at,Ce)}return st&&Et?s.apply(this,L):(at=this.thru(de),st?g?at.value()[0]:at.value():at)})}),qi(["pop","push","shift","sort","splice","unshift"],function(s){var u=Vd[s],l=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",g=/^(?:pop|shift)$/.test(s);D.prototype[s]=function(){var x=arguments;if(g&&!this.__chain__){var C=this.value();return u.apply(bt(C)?C:[],x)}return this[l](function(R){return u.apply(bt(R)?R:[],x)})}}),rs(Rt.prototype,function(s,u){var l=D[u];if(l){var g=l.name+"";Yt.call(Ef,g)||(Ef[g]=[]),Ef[g].push({name:u,func:l})}}),Ef[pm(r,U).name]=[{name:"wrapper",func:r}],Rt.prototype.clone=NO,Rt.prototype.reverse=UO,Rt.prototype.value=MO,D.prototype.at=dN,D.prototype.chain=mN,D.prototype.commit=yN,D.prototype.next=gN,D.prototype.plant=bN,D.prototype.reverse=vN,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=_N,D.prototype.first=D.prototype.head,bh&&(D.prototype[bh]=wN),D},Ta=yO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Zr._=Ta,define(function(){return Ta})):Mu?((Mu.exports=Ta)._=Ta,X0._=Ta):Zr._=Ta}).call(pl)});var d8=ue(Mn=>{"use strict";h();p();var kz=Mn&&Mn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dl=Mn&&Mn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ml=Mn&&Mn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Zv=Mn&&Mn.__param||function(r,e){return function(t,n){e(t,n,r)}},Fz=Mn&&Mn.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){t.label=d[1];break}if(d[0]===6&&t.label<o[1]){t.label=o[1],o=d;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(d);break}o[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},p8=Mn&&Mn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mn,"__esModule",{value:!0});var Rz=p8(Ro()),e_=p8(Xv()),na=vi(),Bz=ky(),t_=function(){function r(){this._content=[]}return Object.defineProperty(r.prototype,"length",{get:function(){return this._content.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e},enumerable:!0,configurable:!0}),r.prototype.get=function(e){return this._content[e]},r.prototype.add=function(e){var t=Bz.sortedIndexBy(this._content,e,function(n){return n.frequency});this._content.splice(t,0,e)},r.prototype.remove=function(e){this._content.splice(e,1)},r.prototype.popMin=function(){return this._content.shift()},r.prototype.indexOf=function(e){return this._content.findIndex(function(t){return t.value===e})},r.prototype.clear=function(){this._content=[]},r}(),Oz=function(r){kz(e,r);function e(t,n,i){var o=r.call(this)||this;return o._k=t,o._errorRate=n,o._accuracy=i,o._sketch=e_.default.create(n,i),o._heap=new t_,o}return e.prototype.add=function(t){this._sketch.update(t);var n=this._sketch.count(t);if(this._heap.length<this._k||n>=this._heap.get(0).frequency){var i=this._heap.indexOf(t);i>-1&&this._heap.remove(i),this._heap.add({value:t,frequency:n}),this._heap.length>this._k&&this._heap.popMin()}},e.prototype.clear=function(){this._sketch=e_.default.create(this._errorRate,this._accuracy),this._heap.clear()},e.prototype.values=function(){for(var t=[],n=this._heap.length-1;n>=0;n--){var i=this._heap.get(n);t.push({value:i.value,frequency:i.frequency,rank:this._heap.length-n})}return t},e.prototype.iterator=function(){var t=this._heap;return function(){var n,i;return Fz(this,function(o){switch(o.label){case 0:n=t.length-1,o.label=1;case 1:return n>=0?(i=t.get(n),[4,{value:i.value,frequency:i.frequency,rank:t.length-n}]):[3,4];case 2:o.sent(),o.label=3;case 3:return n--,[3,1];case 4:return[2]}})}()},dl([na.Field(),ml("design:type",Number)],e.prototype,"_k",void 0),dl([na.Field(),ml("design:type",Number)],e.prototype,"_errorRate",void 0),dl([na.Field(),ml("design:type",Number)],e.prototype,"_accuracy",void 0),dl([na.Field(),ml("design:type",e_.default)],e.prototype,"_sketch",void 0),dl([na.Field(function(t){return t.content},function(t){var n=new t_;return n.content=t,n}),ml("design:type",t_)],e.prototype,"_heap",void 0),e=dl([na.AutoExportable("TopK",["_seed"]),Zv(0,na.Parameter("_k")),Zv(1,na.Parameter("_errorRate")),Zv(2,na.Parameter("_accuracy")),ml("design:paramtypes",[Number,Number,Number])],e),e}(Rz.default);Mn.default=Oz});var r_=ue(gn=>{"use strict";h();p();var g8=gn&&gn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fy=gn&&gn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ry=gn&&gn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},m8=gn&&gn.__param||function(r,e){return function(t,n){e(t,n,r)}},Lz=gn&&gn.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Nz=gn&&gn.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Lz(arguments[e]));return r},Uz=gn&&gn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gn,"__esModule",{value:!0});var Mz=Uz(Ro()),yl=vi(),Kz=io(),jz=ky(),$z=function(r){g8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Error);function y8(r,e){return(e.a*r+e.b)%e.c}var zz=function(r){g8(e,r);function e(t,n){var i=r.call(this)||this;return i._nbHashes=t,i._hashFunctions=n,i._signature=Kz.allocateArray(i._nbHashes,1/0),i}return Object.defineProperty(e.prototype,"nbHashes",{get:function(){return this._nbHashes},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this._signature[0]===1/0},e.prototype.add=function(t){for(var n=0;n<this._nbHashes;n++)this._signature[n]=Math.min(this._signature[n],y8(t,this._hashFunctions[n]))},e.prototype.bulkLoad=function(t){for(var n=this,i=function(c){var f=t.map(function(d){return y8(d,n._hashFunctions[c])});o._signature[c]=Math.min.apply(Math,Nz([o._signature[c]],f))},o=this,a=0;a<this._nbHashes;a++)i(a)},e.prototype.compareWith=function(t){if(this.isEmpty()||t.isEmpty())throw new $z("Cannot compute a Jaccard similairty with a MinHash that contains no values");return jz.intersection(this._signature,t._signature).length/this._nbHashes},Fy([yl.Field(),Ry("design:type",Number)],e.prototype,"_nbHashes",void 0),Fy([yl.Field(),Ry("design:type",Array)],e.prototype,"_hashFunctions",void 0),Fy([yl.Field(),Ry("design:type",Array)],e.prototype,"_signature",void 0),e=Fy([yl.AutoExportable("MinHash",["_seed"]),m8(0,yl.Parameter("_nbHashes")),m8(1,yl.Parameter("_hashFunctions")),Ry("design:paramtypes",[Number,Array])],e),e}(Mz.default);gn.MinHash=zz});var b8=ue(n_=>{"use strict";h();p();Object.defineProperty(n_,"__esModule",{value:!0});var qz=r_(),w8=ky();function Wz(r){if(r!==2&&r%2===0)return!1;for(var e=2;e<Math.sqrt(r);e++)if(r%e===0)return!1;return!0}function Vz(r){for(var e=0;;){if(Wz(r+e))return r+e;e++}}var Hz=function(){function r(e,t){this._nbHashes=e,this._maxValue=t,this._hashFunctions=[];for(var n=Vz(this._maxValue),i=0;i<this._nbHashes;i++){var o=w8.random(0,this._maxValue,!1),a=w8.random(0,this._maxValue,!1);this._hashFunctions.push({a:o,b:a,c:n})}}return r.prototype.create=function(){return new qz.MinHash(this._nbHashes,this._hashFunctions)},r}();n_.default=Hz});var _8=ue((Tae,v8)=>{h();p();function Gz(r,e){return r===e||r!==r&&e!==e}v8.exports=Gz});var D8=ue((Rae,S8)=>{h();p();var x8=1/0,Yz=17976931348623157e292,E8=0/0,Jz="[object Symbol]",Xz=/^\s+|\s+$/g,Qz=/^[-+]0x[0-9a-f]+$/i,Zz=/^0b[01]+$/i,eq=/^0o[0-7]+$/i,tq=parseInt;function rq(r,e,t,n){for(var i=r.length,o=t+(n?1:-1);n?o--:++o<i;)if(e(r[o],o,r))return o;return-1}function nq(r,e,t){if(e!==e)return rq(r,iq,t);for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}function iq(r){return r!==r}var oq=Object.prototype,sq=oq.toString,aq=Math.max;function uq(r,e,t){var n=r?r.length:0;if(!n)return-1;var i=t==null?0:hq(t);return i<0&&(i=aq(n+i,0)),nq(r,e,i)}function P8(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function cq(r){return!!r&&typeof r=="object"}function fq(r){return typeof r=="symbol"||cq(r)&&sq.call(r)==Jz}function lq(r){if(!r)return r===0?r:0;if(r=pq(r),r===x8||r===-x8){var e=r<0?-1:1;return e*Yz}return r===r?r:0}function hq(r){var e=lq(r),t=e%1;return e===e?t?e-t:e:0}function pq(r){if(typeof r=="number")return r;if(fq(r))return E8;if(P8(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=P8(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(Xz,"");var t=Zz.test(r);return t||eq.test(r)?tq(r.slice(2),t?2:8):Qz.test(r)?E8:+r}S8.exports=uq});var I8=ue(Bo=>{"use strict";h();p();var dq=Bo&&Bo.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mq=Bo&&Bo.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},C8=Bo&&Bo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},yq=Bo&&Bo.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(Bo,"__esModule",{value:!0});var gq=C8(_8()),i_=C8(D8()),A8=yq(io()),wq=vi(),bq=vi(),vq=function(){function r(t){this._elements=A8.allocateArray(t,null),this._size=t,this._length=0}e=r,Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),r.prototype.isFree=function(){return this._length<this._size},r.prototype.nextEmptySlot=function(){return i_.default(this._elements,null)},r.prototype.at=function(t){return this._elements[t]},r.prototype.add=function(t){return t===null||!this.isFree()?!1:(this.set(this.nextEmptySlot(),t),this._length++,!0)},r.prototype.remove=function(t){var n=i_.default(this._elements,t);return n<=-1?!1:(this.unset(n),!0)},r.prototype.has=function(t){return i_.default(this._elements,t)>-1},r.prototype.set=function(t,n){this._elements[t]=n},r.prototype.unset=function(t){this._elements[t]=null,this._length--},r.prototype.swapRandom=function(t,n){n===void 0&&(n=Math.random);var i=A8.randomInt(0,this._length-1,n),o=this._elements[i];return this._elements[i]=t,o},r.prototype.swap=function(t,n){var i=this._elements[t];return this._elements[t]=n,i},r.prototype.equals=function(t){return this._size!==t.size||this._length!==t.length?!1:this._elements.every(function(n,i){return gq.default(t.at(i),n)})};var e;return r=e=dq([wq.Exportable({export:bq.cloneObject("Bucket","_size","_elements"),import:function(t){if(t.type!=="Bucket"||"_size"in t,!("_elements"in t))throw new Error("Cannot create a Bucket from a JSON export which does not represent a bucket");var n=new e(t._size);return t._elements.forEach(function(i,o){i!==null&&(n._elements[o]=i,n._length++)}),n}}),mq("design:paramtypes",[Number])],r),r}();Bo.default=vq});var R8=ue(Oo=>{"use strict";h();p();var _q=Oo&&Oo.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xq=Oo&&Oo.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Eq=Oo&&Oo.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},F8=Oo&&Oo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oo,"__esModule",{value:!0});var Pq=F8(Ro()),T8=F8(I8()),k8=vi(),Dp=io();function Sq(r,e){var t=Math.ceil(Math.log2(1/e)+Math.log2(2*r));return Math.ceil(t/4)}var Dq=function(r){_q(e,r);function e(n,i,o,a){a===void 0&&(a=500);var c=r.call(this)||this;return c._filter=Dp.allocateArray(n,function(){return new T8.default(o)}),c._size=n,c._bucketSize=o,c._fingerprintLength=i,c._length=0,c._maxKicks=a,c}t=e,e.create=function(n,i,o,a){o===void 0&&(o=4),a===void 0&&(a=500);var c=Sq(o,i),f=Math.ceil(n/o/.955);return new t(f,c,o,a)},e.from=function(n,i,o,a){o===void 0&&(o=4),a===void 0&&(a=500);var c=Array.from(n),f=t.create(c.length,i,o,a);return c.forEach(function(d){return f.add(d)}),f},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullSize",{get:function(){return this.size*this.bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fingerprintLength",{get:function(){return this._fingerprintLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketSize",{get:function(){return this._bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxKicks",{get:function(){return this._maxKicks},enumerable:!0,configurable:!0}),e.prototype.add=function(n,i,o){i===void 0&&(i=!1),o===void 0&&(o=!1);var a=this._locations(n);if(this._filter[a.firstIndex].isFree())this._filter[a.firstIndex].add(a.fingerprint);else if(this._filter[a.secondIndex].isFree())this._filter[a.secondIndex].add(a.fingerprint);else{for(var c=this.random()<.5?a.firstIndex:a.secondIndex,f=a.fingerprint,d=[],m=0;m<this._maxKicks;m++){var w=Dp.randomInt(0,this._filter[c].length-1,this.random),E=this._filter[c].at(w);d.push([c,w,E]),this._filter[c].set(w,f),f=E;var T=Dp.hashAsInt(f,this.seed,64);if(c=Math.abs(c^Math.abs(T))%this._filter.length,this._filter[c].isFree())return this._filter[c].add(f),this._length++,!0}if(!o)for(var F=d.length-1;F>=0;F--){var U=d[F];this._filter[U[0]].set(U[1],U[2])}if(i)throw new Error('The Cuckoo Filter is full, cannot insert element "'+n+'"');return!1}return this._length++,!0},e.prototype.remove=function(n){var i=this._locations(n);return this._filter[i.firstIndex].has(i.fingerprint)?(this._filter[i.firstIndex].remove(i.fingerprint),this._length--,!0):this._filter[i.secondIndex].has(i.fingerprint)?(this._filter[i.secondIndex].remove(i.fingerprint),this._length--,!0):!1},e.prototype.has=function(n){var i=this._locations(n);return this._filter[i.firstIndex].has(i.fingerprint)||this._filter[i.secondIndex].has(i.fingerprint)},e.prototype.rate=function(){var n=this._computeHashTableLoad(),i=this._fingerprintLength/n.load;return Math.pow(2,Math.log2(2*this._bucketSize)-n.load*i)},e.prototype._computeHashTableLoad=function(){var n=this._filter.length*this._bucketSize,i=this._filter.reduce(function(o,a){return o+a.length},0);return{used:i,free:n-i,size:n,load:i/n}},e.prototype._locations=function(n){var i=Dp.hashIntAndString(n,this.seed,16,64),o=i.int;if(this._fingerprintLength>i.string.length)throw new Error("The fingerprint length ("+this._fingerprintLength+") is higher than the hash length ("+i.string.length+"). Please reduce the fingerprint length or report if it is an unexpected behavior.");var a=i.string.substring(0,this._fingerprintLength),c=Math.abs(o),f=Math.abs(Dp.hashAsInt(a,this.seed,64)),d=Math.abs(c^f),m={fingerprint:a,firstIndex:c%this._size,secondIndex:d%this._size};return m},e.prototype.equals=function(n){for(var i=0,o=!0;o&&i<this._filter.length;){var a=this._filter[i];n._filter[i].equals(a)||(o=!1),i++}return o};var t;return e=t=xq([k8.Exportable({export:k8.cloneObject("CuckooFilter","_size","_fingerprintLength","_length","_maxKicks","_filter","_seed"),import:function(n){if(n.type!=="CuckooFilter"||!("_size"in n)||!("_fingerprintLength"in n)||!("_length"in n)||!("_maxKicks"in n)||!("_filter"in n)||!("_seed"in n))throw new Error("Cannot create a CuckooFilter from a JSON export which does not represent a cuckoo filter");var i=new t(n._size,n._fingerprintLength,n._bucketSize,n._maxKicks);return i._length=n._length,i._filter=n._filter.map(function(o){var a=new T8.default(o._size);return o._elements.forEach(function(c,f){c!==null&&(a._elements[f]=c,a._length++)}),a}),i.seed=n.seed,i}}),Eq("design:paramtypes",[Number,Number,Number,Number])],e),e}(Pq.default);Oo.default=Dq});var s_=ue(Si=>{"use strict";h();p();var Aq=Si&&Si.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),By=Si&&Si.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Oy=Si&&Si.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},o_=Si&&Si.__param||function(r,e){return function(t,n){e(t,n,r)}},Cq=Si&&Si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Si,"__esModule",{value:!0});var _c=mc(),Ap=io(),xc=vi(),Iq=Cq(Ro()),Tq=Symbol.for("nodejs.util.inspect.custom"),kq=function(r){Aq(e,r);function e(n,i,o){var a=r.call(this)||this;return a._idSum=n,a._hashSum=i,a._count=o,a}t=e,e.empty=function(){return new t(_c.Buffer.allocUnsafe(0).fill(0),_c.Buffer.allocUnsafe(0).fill(0),0)},e.prototype[Tq]=function(){return"Cell:<"+JSON.stringify(this._idSum.toJSON().data)+", "+JSON.stringify(this._hashSum.toJSON().data)+", "+this._count+">"},Object.defineProperty(e.prototype,"idSum",{get:function(){return this._idSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hashSum",{get:function(){return this._hashSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.add=function(n,i){this._idSum=Ap.xorBuffer(this._idSum,n),this._hashSum=Ap.xorBuffer(this._hashSum,i),this._count++},e.prototype.xorm=function(n){return new t(Ap.xorBuffer(this._idSum,n.idSum),Ap.xorBuffer(this._hashSum,n.hashSum),this._count-n.count)},e.prototype.isEmpty=function(){return this._idSum.equals(_c.Buffer.from(""))&&this._hashSum.equals(_c.Buffer.from(""))&&this._count===0},e.prototype.equals=function(n){return this._count===n.count&&this._idSum.equals(n.idSum)&&this._hashSum.equals(n.hashSum)},e.prototype.isPure=function(){if(this.isEmpty()||this._count!==1&&this._count!==-1)return!1;var n=Ap.hashTwiceAsString(JSON.stringify(this._idSum.toJSON()),this.seed);return this._hashSum.equals(_c.Buffer.from(n.first))};var t;return By([xc.Field(function(n){return n.toString()},_c.Buffer.from),Oy("design:type",Object)],e.prototype,"_idSum",void 0),By([xc.Field(function(n){return n.toString()},_c.Buffer.from),Oy("design:type",Object)],e.prototype,"_hashSum",void 0),By([xc.Field(),Oy("design:type",Number)],e.prototype,"_count",void 0),e=t=By([xc.AutoExportable("Cell",["_seed"]),o_(0,xc.Parameter("_idSum")),o_(1,xc.Parameter("_hashSum")),o_(2,xc.Parameter("_count")),Oy("design:paramtypes",[Object,Object,Number])],e),e}(Iq.default);Si.default=kq});var U8=ue(Kn=>{"use strict";h();p();var Fq=Kn&&Kn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ly=Kn&&Kn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ny=Kn&&Kn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},B8=Kn&&Kn.__param||function(r,e){return function(t,n){e(t,n,r)}},O8=Kn&&Kn.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(m){return f([d,m])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){t.label=d[1];break}if(d[0]===6&&t.label<o[1]){t.label=o[1],o=d;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(d);break}o[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},N8=Kn&&Kn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kn,"__esModule",{value:!0});var Ec=mc(),Rq=N8(Ro()),Uy=N8(s_()),gl=vi(),ia=io(),L8=Dy(),Bq=function(r){Fq(e,r);function e(n,i){i===void 0&&(i=3);var o=r.call(this)||this;if(Ec.Buffer===void 0)throw new Error('No native Buffer implementation bound in your JavaScript env. If you are in a Web browser, consider importing the polyfill "feross/buffer" (https://github.com/feross/buffer).');if(i<=0)throw new Error("The hashCount must be a non-zero, positive integer");return o._size=n,o._hashCount=i,o._elements=ia.allocateArray(o._size,function(){return Uy.default.empty()}),o}t=e,e.create=function(n,i){var o=L8.optimalFilterSize(n,i),a=L8.optimalHashes(o,n);return new t(o,a)},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(c){return a.add(c)}),a},Object.defineProperty(e.prototype,"hashCount",{get:function(){return this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.reduce(function(n,i){return n+i.count},0)/this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=ia.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=ia.getDistinctIndices(i.string.first,this._size,this._hashCount,this.seed),a=0;a<this._hashCount;++a)this._elements[o[a]].add(n,Ec.Buffer.from(i.string.first))},e.prototype.remove=function(n){for(var i=ia.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=ia.getDistinctIndices(i.string.first,this.size,this._hashCount,this.seed),a=0;a<this._hashCount;++a)this._elements[o[a]]=this._elements[o[a]].xorm(new Uy.default(Ec.Buffer.from(n),Ec.Buffer.from(i.string.first),1));return!0},e.prototype.has=function(n){for(var i=ia.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=ia.getDistinctIndices(i.string.first,this.size,this._hashCount,this.seed),a=0;a<this._hashCount;++a){if(this._elements[o[a]].count===0)return!1;if(this._elements[o[a]].count===1)return!!this._elements[o[a]].idSum.equals(n)}return!0},e.prototype.listEntries=function(){var n=this,i=[];return function(){var o,a,c;return O8(this,function(f){switch(f.label){case 0:o=function(d){var m;return O8(this,function(w){switch(w.label){case 0:return m=n._elements[d],m.count>0&&i.findIndex(function(E){return E.equals(m.idSum)})===-1?n.has(m.idSum)?(i.push(m.idSum),[4,m.idSum]):[3,2]:[3,3];case 1:return w.sent(),[3,3];case 2:return[2,{value:!1}];case 3:return[2]}})},a=0,f.label=1;case 1:return a<n._elements.length-1?[5,o(a)]:[3,4];case 2:if(c=f.sent(),typeof c=="object")return[2,c.value];f.label=3;case 3:return a++,[3,1];case 4:return[2,!0]}})}()},e.prototype.substract=function(n){if(this.size!==n.size)throw new Error("The two Invertible Bloom Filters must be of the same size");var i=new t(n._size,n._hashCount);i.seed=this.seed;for(var o=0;o<this.size;++o)i._elements[o]=this._elements[o].xorm(n._elements[o]);return i},e.prototype.equals=function(n){if(n._size!==this._size||n._hashCount!==this._hashCount||n.seed!==this.seed)return!1;for(var i=0;i<n._elements.length;++i)if(!n._elements[i].equals(this._elements[i]))return!1;return!0},e.prototype.decode=function(n,i){n===void 0&&(n=[]),i===void 0&&(i=[]);for(var o=[],a=null,c=0;c<this._elements.length;++c)a=this._elements[c],a.isPure()&&o.push(c);for(;o.length!==0;){a=this._elements[o.pop()];var f=a.idSum,d=a.count;if(a.isPure()){if(d===1)n.push(f);else if(d===-1)i.push(f);else throw new Error("Please report, not possible");for(var m=ia.allInOneHashTwice(JSON.stringify(f.toJSON()),this.seed),w=ia.getDistinctIndices(m.string.first,this._size,this._hashCount,this.seed),c=0;c<w.length;++c)this._elements[w[c]]=this._elements[w[c]].xorm(new Uy.default(f,Ec.Buffer.from(m.string.first),d)),this._elements[w[c]].isPure()&&o.push(w[c])}}return this._elements.findIndex(function(E){return!E.isEmpty()})>-1?{success:!1,reason:{cell:a,iblt:this},additional:n,missing:i}:{success:!0,additional:n,missing:i}};var t;return Ly([gl.Field(),Ny("design:type",Number)],e.prototype,"_size",void 0),Ly([gl.Field(),Ny("design:type",Number)],e.prototype,"_hashCount",void 0),Ly([gl.Field(void 0,function(n){return n.map(function(i){var o=new Uy.default(Ec.Buffer.from(i._idSum),Ec.Buffer.from(i._hashSum),i._count);return o.seed=i._seed,o})}),Ny("design:type",Array)],e.prototype,"_elements",void 0),e=t=Ly([gl.AutoExportable("InvertibleBloomFilter",["_seed"]),B8(0,gl.Parameter("_size")),B8(1,gl.Parameter("_hashCount")),Ny("design:paramtypes",[Number,Number])],e),e}(Rq.default);Kn.default=Bq});var M8=ue(Di=>{"use strict";h();p();Object.defineProperty(Di,"__esModule",{value:!0});var Oq=o8();Di.BloomFilter=Oq.default;var Lq=u8();Di.CountingBloomFilter=Lq.default;var Nq=c8();Di.PartitionedBloomFilter=Nq.default;var Uq=Xv();Di.CountMinSketch=Uq.default;var Mq=h8();Di.HyperLogLog=Mq.default;var Kq=d8();Di.TopK=Kq.default;var jq=r_();Di.MinHash=jq.MinHash;var $q=b8();Di.MinHashFactory=$q.default;var zq=R8();Di.CuckooFilter=zq.default;var qq=U8();Di.InvertibleBloomFilter=qq.default;var Wq=s_();Di.Cell=Wq.default});var TI=ue((Yle,tg)=>{h();p();(function(r){"use strict";var e=function(b){var S,P=new Float64Array(16);if(b)for(S=0;S<b.length;S++)P[S]=b[S];return P},t=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=e(),a=e([1]),c=e([56129,1]),f=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),w=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),E=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function T(b,S,P,y){b[S]=P>>24&255,b[S+1]=P>>16&255,b[S+2]=P>>8&255,b[S+3]=P&255,b[S+4]=y>>24&255,b[S+5]=y>>16&255,b[S+6]=y>>8&255,b[S+7]=y&255}function F(b,S,P,y,I){var M,j=0;for(M=0;M<I;M++)j|=b[S+M]^P[y+M];return(1&j-1>>>8)-1}function U(b,S,P,y){return F(b,S,P,y,16)}function pe(b,S,P,y){return F(b,S,P,y,32)}function he(b,S,P,y){for(var I=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,M=P[0]&255|(P[1]&255)<<8|(P[2]&255)<<16|(P[3]&255)<<24,j=P[4]&255|(P[5]&255)<<8|(P[6]&255)<<16|(P[7]&255)<<24,oe=P[8]&255|(P[9]&255)<<8|(P[10]&255)<<16|(P[11]&255)<<24,ye=P[12]&255|(P[13]&255)<<8|(P[14]&255)<<16|(P[15]&255)<<24,Ke=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,Ae=S[0]&255|(S[1]&255)<<8|(S[2]&255)<<16|(S[3]&255)<<24,Ct=S[4]&255|(S[5]&255)<<8|(S[6]&255)<<16|(S[7]&255)<<24,Te=S[8]&255|(S[9]&255)<<8|(S[10]&255)<<16|(S[11]&255)<<24,rt=S[12]&255|(S[13]&255)<<8|(S[14]&255)<<16|(S[15]&255)<<24,ot=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,ct=P[16]&255|(P[17]&255)<<8|(P[18]&255)<<16|(P[19]&255)<<24,lt=P[20]&255|(P[21]&255)<<8|(P[22]&255)<<16|(P[23]&255)<<24,et=P[24]&255|(P[25]&255)<<8|(P[26]&255)<<16|(P[27]&255)<<24,ft=P[28]&255|(P[29]&255)<<8|(P[30]&255)<<16|(P[31]&255)<<24,nt=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,Ie=I,ze=M,xe=j,Re=oe,Be=ye,Ee=Ke,q=Ae,W=Ct,fe=Te,ne=rt,ie=ot,_=ct,k=lt,A=et,B=ft,O=nt,v,z=0;z<20;z+=2)v=Ie+k|0,Be^=v<<7|v>>>32-7,v=Be+Ie|0,fe^=v<<9|v>>>32-9,v=fe+Be|0,k^=v<<13|v>>>32-13,v=k+fe|0,Ie^=v<<18|v>>>32-18,v=Ee+ze|0,ne^=v<<7|v>>>32-7,v=ne+Ee|0,A^=v<<9|v>>>32-9,v=A+ne|0,ze^=v<<13|v>>>32-13,v=ze+A|0,Ee^=v<<18|v>>>32-18,v=ie+q|0,B^=v<<7|v>>>32-7,v=B+ie|0,xe^=v<<9|v>>>32-9,v=xe+B|0,q^=v<<13|v>>>32-13,v=q+xe|0,ie^=v<<18|v>>>32-18,v=O+_|0,Re^=v<<7|v>>>32-7,v=Re+O|0,W^=v<<9|v>>>32-9,v=W+Re|0,_^=v<<13|v>>>32-13,v=_+W|0,O^=v<<18|v>>>32-18,v=Ie+Re|0,ze^=v<<7|v>>>32-7,v=ze+Ie|0,xe^=v<<9|v>>>32-9,v=xe+ze|0,Re^=v<<13|v>>>32-13,v=Re+xe|0,Ie^=v<<18|v>>>32-18,v=Ee+Be|0,q^=v<<7|v>>>32-7,v=q+Ee|0,W^=v<<9|v>>>32-9,v=W+q|0,Be^=v<<13|v>>>32-13,v=Be+W|0,Ee^=v<<18|v>>>32-18,v=ie+ne|0,_^=v<<7|v>>>32-7,v=_+ie|0,fe^=v<<9|v>>>32-9,v=fe+_|0,ne^=v<<13|v>>>32-13,v=ne+fe|0,ie^=v<<18|v>>>32-18,v=O+B|0,k^=v<<7|v>>>32-7,v=k+O|0,A^=v<<9|v>>>32-9,v=A+k|0,B^=v<<13|v>>>32-13,v=B+A|0,O^=v<<18|v>>>32-18;Ie=Ie+I|0,ze=ze+M|0,xe=xe+j|0,Re=Re+oe|0,Be=Be+ye|0,Ee=Ee+Ke|0,q=q+Ae|0,W=W+Ct|0,fe=fe+Te|0,ne=ne+rt|0,ie=ie+ot|0,_=_+ct|0,k=k+lt|0,A=A+et|0,B=B+ft|0,O=O+nt|0,b[0]=Ie>>>0&255,b[1]=Ie>>>8&255,b[2]=Ie>>>16&255,b[3]=Ie>>>24&255,b[4]=ze>>>0&255,b[5]=ze>>>8&255,b[6]=ze>>>16&255,b[7]=ze>>>24&255,b[8]=xe>>>0&255,b[9]=xe>>>8&255,b[10]=xe>>>16&255,b[11]=xe>>>24&255,b[12]=Re>>>0&255,b[13]=Re>>>8&255,b[14]=Re>>>16&255,b[15]=Re>>>24&255,b[16]=Be>>>0&255,b[17]=Be>>>8&255,b[18]=Be>>>16&255,b[19]=Be>>>24&255,b[20]=Ee>>>0&255,b[21]=Ee>>>8&255,b[22]=Ee>>>16&255,b[23]=Ee>>>24&255,b[24]=q>>>0&255,b[25]=q>>>8&255,b[26]=q>>>16&255,b[27]=q>>>24&255,b[28]=W>>>0&255,b[29]=W>>>8&255,b[30]=W>>>16&255,b[31]=W>>>24&255,b[32]=fe>>>0&255,b[33]=fe>>>8&255,b[34]=fe>>>16&255,b[35]=fe>>>24&255,b[36]=ne>>>0&255,b[37]=ne>>>8&255,b[38]=ne>>>16&255,b[39]=ne>>>24&255,b[40]=ie>>>0&255,b[41]=ie>>>8&255,b[42]=ie>>>16&255,b[43]=ie>>>24&255,b[44]=_>>>0&255,b[45]=_>>>8&255,b[46]=_>>>16&255,b[47]=_>>>24&255,b[48]=k>>>0&255,b[49]=k>>>8&255,b[50]=k>>>16&255,b[51]=k>>>24&255,b[52]=A>>>0&255,b[53]=A>>>8&255,b[54]=A>>>16&255,b[55]=A>>>24&255,b[56]=B>>>0&255,b[57]=B>>>8&255,b[58]=B>>>16&255,b[59]=B>>>24&255,b[60]=O>>>0&255,b[61]=O>>>8&255,b[62]=O>>>16&255,b[63]=O>>>24&255}function De(b,S,P,y){for(var I=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,M=P[0]&255|(P[1]&255)<<8|(P[2]&255)<<16|(P[3]&255)<<24,j=P[4]&255|(P[5]&255)<<8|(P[6]&255)<<16|(P[7]&255)<<24,oe=P[8]&255|(P[9]&255)<<8|(P[10]&255)<<16|(P[11]&255)<<24,ye=P[12]&255|(P[13]&255)<<8|(P[14]&255)<<16|(P[15]&255)<<24,Ke=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,Ae=S[0]&255|(S[1]&255)<<8|(S[2]&255)<<16|(S[3]&255)<<24,Ct=S[4]&255|(S[5]&255)<<8|(S[6]&255)<<16|(S[7]&255)<<24,Te=S[8]&255|(S[9]&255)<<8|(S[10]&255)<<16|(S[11]&255)<<24,rt=S[12]&255|(S[13]&255)<<8|(S[14]&255)<<16|(S[15]&255)<<24,ot=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,ct=P[16]&255|(P[17]&255)<<8|(P[18]&255)<<16|(P[19]&255)<<24,lt=P[20]&255|(P[21]&255)<<8|(P[22]&255)<<16|(P[23]&255)<<24,et=P[24]&255|(P[25]&255)<<8|(P[26]&255)<<16|(P[27]&255)<<24,ft=P[28]&255|(P[29]&255)<<8|(P[30]&255)<<16|(P[31]&255)<<24,nt=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,Ie=I,ze=M,xe=j,Re=oe,Be=ye,Ee=Ke,q=Ae,W=Ct,fe=Te,ne=rt,ie=ot,_=ct,k=lt,A=et,B=ft,O=nt,v,z=0;z<20;z+=2)v=Ie+k|0,Be^=v<<7|v>>>32-7,v=Be+Ie|0,fe^=v<<9|v>>>32-9,v=fe+Be|0,k^=v<<13|v>>>32-13,v=k+fe|0,Ie^=v<<18|v>>>32-18,v=Ee+ze|0,ne^=v<<7|v>>>32-7,v=ne+Ee|0,A^=v<<9|v>>>32-9,v=A+ne|0,ze^=v<<13|v>>>32-13,v=ze+A|0,Ee^=v<<18|v>>>32-18,v=ie+q|0,B^=v<<7|v>>>32-7,v=B+ie|0,xe^=v<<9|v>>>32-9,v=xe+B|0,q^=v<<13|v>>>32-13,v=q+xe|0,ie^=v<<18|v>>>32-18,v=O+_|0,Re^=v<<7|v>>>32-7,v=Re+O|0,W^=v<<9|v>>>32-9,v=W+Re|0,_^=v<<13|v>>>32-13,v=_+W|0,O^=v<<18|v>>>32-18,v=Ie+Re|0,ze^=v<<7|v>>>32-7,v=ze+Ie|0,xe^=v<<9|v>>>32-9,v=xe+ze|0,Re^=v<<13|v>>>32-13,v=Re+xe|0,Ie^=v<<18|v>>>32-18,v=Ee+Be|0,q^=v<<7|v>>>32-7,v=q+Ee|0,W^=v<<9|v>>>32-9,v=W+q|0,Be^=v<<13|v>>>32-13,v=Be+W|0,Ee^=v<<18|v>>>32-18,v=ie+ne|0,_^=v<<7|v>>>32-7,v=_+ie|0,fe^=v<<9|v>>>32-9,v=fe+_|0,ne^=v<<13|v>>>32-13,v=ne+fe|0,ie^=v<<18|v>>>32-18,v=O+B|0,k^=v<<7|v>>>32-7,v=k+O|0,A^=v<<9|v>>>32-9,v=A+k|0,B^=v<<13|v>>>32-13,v=B+A|0,O^=v<<18|v>>>32-18;b[0]=Ie>>>0&255,b[1]=Ie>>>8&255,b[2]=Ie>>>16&255,b[3]=Ie>>>24&255,b[4]=Ee>>>0&255,b[5]=Ee>>>8&255,b[6]=Ee>>>16&255,b[7]=Ee>>>24&255,b[8]=ie>>>0&255,b[9]=ie>>>8&255,b[10]=ie>>>16&255,b[11]=ie>>>24&255,b[12]=O>>>0&255,b[13]=O>>>8&255,b[14]=O>>>16&255,b[15]=O>>>24&255,b[16]=q>>>0&255,b[17]=q>>>8&255,b[18]=q>>>16&255,b[19]=q>>>24&255,b[20]=W>>>0&255,b[21]=W>>>8&255,b[22]=W>>>16&255,b[23]=W>>>24&255,b[24]=fe>>>0&255,b[25]=fe>>>8&255,b[26]=fe>>>16&255,b[27]=fe>>>24&255,b[28]=ne>>>0&255,b[29]=ne>>>8&255,b[30]=ne>>>16&255,b[31]=ne>>>24&255}function re(b,S,P,y){he(b,S,P,y)}function be(b,S,P,y){De(b,S,P,y)}var Pe=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Y(b,S,P,y,I,M,j){var oe=new Uint8Array(16),ye=new Uint8Array(64),Ke,Ae;for(Ae=0;Ae<16;Ae++)oe[Ae]=0;for(Ae=0;Ae<8;Ae++)oe[Ae]=M[Ae];for(;I>=64;){for(re(ye,oe,j,Pe),Ae=0;Ae<64;Ae++)b[S+Ae]=P[y+Ae]^ye[Ae];for(Ke=1,Ae=8;Ae<16;Ae++)Ke=Ke+(oe[Ae]&255)|0,oe[Ae]=Ke&255,Ke>>>=8;I-=64,S+=64,y+=64}if(I>0)for(re(ye,oe,j,Pe),Ae=0;Ae<I;Ae++)b[S+Ae]=P[y+Ae]^ye[Ae];return 0}function ge(b,S,P,y,I){var M=new Uint8Array(16),j=new Uint8Array(64),oe,ye;for(ye=0;ye<16;ye++)M[ye]=0;for(ye=0;ye<8;ye++)M[ye]=y[ye];for(;P>=64;){for(re(j,M,I,Pe),ye=0;ye<64;ye++)b[S+ye]=j[ye];for(oe=1,ye=8;ye<16;ye++)oe=oe+(M[ye]&255)|0,M[ye]=oe&255,oe>>>=8;P-=64,S+=64}if(P>0)for(re(j,M,I,Pe),ye=0;ye<P;ye++)b[S+ye]=j[ye];return 0}function _e(b,S,P,y,I){var M=new Uint8Array(32);be(M,y,I,Pe);for(var j=new Uint8Array(8),oe=0;oe<8;oe++)j[oe]=y[oe+16];return ge(b,S,P,j,M)}function Me(b,S,P,y,I,M,j){var oe=new Uint8Array(32);be(oe,M,j,Pe);for(var ye=new Uint8Array(8),Ke=0;Ke<8;Ke++)ye[Ke]=M[Ke+16];return Y(b,S,P,y,I,ye,oe)}var vt=function(b){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var S,P,y,I,M,j,oe,ye;S=b[0]&255|(b[1]&255)<<8,this.r[0]=S&8191,P=b[2]&255|(b[3]&255)<<8,this.r[1]=(S>>>13|P<<3)&8191,y=b[4]&255|(b[5]&255)<<8,this.r[2]=(P>>>10|y<<6)&7939,I=b[6]&255|(b[7]&255)<<8,this.r[3]=(y>>>7|I<<9)&8191,M=b[8]&255|(b[9]&255)<<8,this.r[4]=(I>>>4|M<<12)&255,this.r[5]=M>>>1&8190,j=b[10]&255|(b[11]&255)<<8,this.r[6]=(M>>>14|j<<2)&8191,oe=b[12]&255|(b[13]&255)<<8,this.r[7]=(j>>>11|oe<<5)&8065,ye=b[14]&255|(b[15]&255)<<8,this.r[8]=(oe>>>8|ye<<8)&8191,this.r[9]=ye>>>5&127,this.pad[0]=b[16]&255|(b[17]&255)<<8,this.pad[1]=b[18]&255|(b[19]&255)<<8,this.pad[2]=b[20]&255|(b[21]&255)<<8,this.pad[3]=b[22]&255|(b[23]&255)<<8,this.pad[4]=b[24]&255|(b[25]&255)<<8,this.pad[5]=b[26]&255|(b[27]&255)<<8,this.pad[6]=b[28]&255|(b[29]&255)<<8,this.pad[7]=b[30]&255|(b[31]&255)<<8};vt.prototype.blocks=function(b,S,P){for(var y=this.fin?0:2048,I,M,j,oe,ye,Ke,Ae,Ct,Te,rt,ot,ct,lt,et,ft,nt,Ie,ze,xe,Re=this.h[0],Be=this.h[1],Ee=this.h[2],q=this.h[3],W=this.h[4],fe=this.h[5],ne=this.h[6],ie=this.h[7],_=this.h[8],k=this.h[9],A=this.r[0],B=this.r[1],O=this.r[2],v=this.r[3],z=this.r[4],H=this.r[5],X=this.r[6],G=this.r[7],te=this.r[8],me=this.r[9];P>=16;)I=b[S+0]&255|(b[S+1]&255)<<8,Re+=I&8191,M=b[S+2]&255|(b[S+3]&255)<<8,Be+=(I>>>13|M<<3)&8191,j=b[S+4]&255|(b[S+5]&255)<<8,Ee+=(M>>>10|j<<6)&8191,oe=b[S+6]&255|(b[S+7]&255)<<8,q+=(j>>>7|oe<<9)&8191,ye=b[S+8]&255|(b[S+9]&255)<<8,W+=(oe>>>4|ye<<12)&8191,fe+=ye>>>1&8191,Ke=b[S+10]&255|(b[S+11]&255)<<8,ne+=(ye>>>14|Ke<<2)&8191,Ae=b[S+12]&255|(b[S+13]&255)<<8,ie+=(Ke>>>11|Ae<<5)&8191,Ct=b[S+14]&255|(b[S+15]&255)<<8,_+=(Ae>>>8|Ct<<8)&8191,k+=Ct>>>5|y,Te=0,rt=Te,rt+=Re*A,rt+=Be*(5*me),rt+=Ee*(5*te),rt+=q*(5*G),rt+=W*(5*X),Te=rt>>>13,rt&=8191,rt+=fe*(5*H),rt+=ne*(5*z),rt+=ie*(5*v),rt+=_*(5*O),rt+=k*(5*B),Te+=rt>>>13,rt&=8191,ot=Te,ot+=Re*B,ot+=Be*A,ot+=Ee*(5*me),ot+=q*(5*te),ot+=W*(5*G),Te=ot>>>13,ot&=8191,ot+=fe*(5*X),ot+=ne*(5*H),ot+=ie*(5*z),ot+=_*(5*v),ot+=k*(5*O),Te+=ot>>>13,ot&=8191,ct=Te,ct+=Re*O,ct+=Be*B,ct+=Ee*A,ct+=q*(5*me),ct+=W*(5*te),Te=ct>>>13,ct&=8191,ct+=fe*(5*G),ct+=ne*(5*X),ct+=ie*(5*H),ct+=_*(5*z),ct+=k*(5*v),Te+=ct>>>13,ct&=8191,lt=Te,lt+=Re*v,lt+=Be*O,lt+=Ee*B,lt+=q*A,lt+=W*(5*me),Te=lt>>>13,lt&=8191,lt+=fe*(5*te),lt+=ne*(5*G),lt+=ie*(5*X),lt+=_*(5*H),lt+=k*(5*z),Te+=lt>>>13,lt&=8191,et=Te,et+=Re*z,et+=Be*v,et+=Ee*O,et+=q*B,et+=W*A,Te=et>>>13,et&=8191,et+=fe*(5*me),et+=ne*(5*te),et+=ie*(5*G),et+=_*(5*X),et+=k*(5*H),Te+=et>>>13,et&=8191,ft=Te,ft+=Re*H,ft+=Be*z,ft+=Ee*v,ft+=q*O,ft+=W*B,Te=ft>>>13,ft&=8191,ft+=fe*A,ft+=ne*(5*me),ft+=ie*(5*te),ft+=_*(5*G),ft+=k*(5*X),Te+=ft>>>13,ft&=8191,nt=Te,nt+=Re*X,nt+=Be*H,nt+=Ee*z,nt+=q*v,nt+=W*O,Te=nt>>>13,nt&=8191,nt+=fe*B,nt+=ne*A,nt+=ie*(5*me),nt+=_*(5*te),nt+=k*(5*G),Te+=nt>>>13,nt&=8191,Ie=Te,Ie+=Re*G,Ie+=Be*X,Ie+=Ee*H,Ie+=q*z,Ie+=W*v,Te=Ie>>>13,Ie&=8191,Ie+=fe*O,Ie+=ne*B,Ie+=ie*A,Ie+=_*(5*me),Ie+=k*(5*te),Te+=Ie>>>13,Ie&=8191,ze=Te,ze+=Re*te,ze+=Be*G,ze+=Ee*X,ze+=q*H,ze+=W*z,Te=ze>>>13,ze&=8191,ze+=fe*v,ze+=ne*O,ze+=ie*B,ze+=_*A,ze+=k*(5*me),Te+=ze>>>13,ze&=8191,xe=Te,xe+=Re*me,xe+=Be*te,xe+=Ee*G,xe+=q*X,xe+=W*H,Te=xe>>>13,xe&=8191,xe+=fe*z,xe+=ne*v,xe+=ie*O,xe+=_*B,xe+=k*A,Te+=xe>>>13,xe&=8191,Te=(Te<<2)+Te|0,Te=Te+rt|0,rt=Te&8191,Te=Te>>>13,ot+=Te,Re=rt,Be=ot,Ee=ct,q=lt,W=et,fe=ft,ne=nt,ie=Ie,_=ze,k=xe,S+=16,P-=16;this.h[0]=Re,this.h[1]=Be,this.h[2]=Ee,this.h[3]=q,this.h[4]=W,this.h[5]=fe,this.h[6]=ne,this.h[7]=ie,this.h[8]=_,this.h[9]=k},vt.prototype.finish=function(b,S){var P=new Uint16Array(10),y,I,M,j;if(this.leftover){for(j=this.leftover,this.buffer[j++]=1;j<16;j++)this.buffer[j]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(y=this.h[1]>>>13,this.h[1]&=8191,j=2;j<10;j++)this.h[j]+=y,y=this.h[j]>>>13,this.h[j]&=8191;for(this.h[0]+=y*5,y=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=y,y=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=y,P[0]=this.h[0]+5,y=P[0]>>>13,P[0]&=8191,j=1;j<10;j++)P[j]=this.h[j]+y,y=P[j]>>>13,P[j]&=8191;for(P[9]-=1<<13,I=(y^1)-1,j=0;j<10;j++)P[j]&=I;for(I=~I,j=0;j<10;j++)this.h[j]=this.h[j]&I|P[j];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,M=this.h[0]+this.pad[0],this.h[0]=M&65535,j=1;j<8;j++)M=(this.h[j]+this.pad[j]|0)+(M>>>16)|0,this.h[j]=M&65535;b[S+0]=this.h[0]>>>0&255,b[S+1]=this.h[0]>>>8&255,b[S+2]=this.h[1]>>>0&255,b[S+3]=this.h[1]>>>8&255,b[S+4]=this.h[2]>>>0&255,b[S+5]=this.h[2]>>>8&255,b[S+6]=this.h[3]>>>0&255,b[S+7]=this.h[3]>>>8&255,b[S+8]=this.h[4]>>>0&255,b[S+9]=this.h[4]>>>8&255,b[S+10]=this.h[5]>>>0&255,b[S+11]=this.h[5]>>>8&255,b[S+12]=this.h[6]>>>0&255,b[S+13]=this.h[6]>>>8&255,b[S+14]=this.h[7]>>>0&255,b[S+15]=this.h[7]>>>8&255},vt.prototype.update=function(b,S,P){var y,I;if(this.leftover){for(I=16-this.leftover,I>P&&(I=P),y=0;y<I;y++)this.buffer[this.leftover+y]=b[S+y];if(P-=I,S+=I,this.leftover+=I,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(P>=16&&(I=P-P%16,this.blocks(b,S,I),S+=I,P-=I),P){for(y=0;y<P;y++)this.buffer[this.leftover+y]=b[S+y];this.leftover+=P}};function Nt(b,S,P,y,I,M){var j=new vt(M);return j.update(P,y,I),j.finish(b,S),0}function Bt(b,S,P,y,I,M){var j=new Uint8Array(16);return Nt(j,0,P,y,I,M),U(b,S,j,0)}function qt(b,S,P,y,I){var M;if(P<32)return-1;for(Me(b,0,S,0,P,y,I),Nt(b,16,b,32,P-32,b),M=0;M<16;M++)b[M]=0;return 0}function hr(b,S,P,y,I){var M,j=new Uint8Array(32);if(P<32||(_e(j,0,32,y,I),Bt(S,16,S,32,P-32,j)!==0))return-1;for(Me(b,0,S,0,P,y,I),M=0;M<32;M++)b[M]=0;return 0}function Mt(b,S){var P;for(P=0;P<16;P++)b[P]=S[P]|0}function jr(b){var S,P,y=1;for(S=0;S<16;S++)P=b[S]+y+65535,y=Math.floor(P/65536),b[S]=P-y*65536;b[0]+=y-1+37*(y-1)}function Tn(b,S,P){for(var y,I=~(P-1),M=0;M<16;M++)y=I&(b[M]^S[M]),b[M]^=y,S[M]^=y}function Rr(b,S){var P,y,I,M=e(),j=e();for(P=0;P<16;P++)j[P]=S[P];for(jr(j),jr(j),jr(j),y=0;y<2;y++){for(M[0]=j[0]-65517,P=1;P<15;P++)M[P]=j[P]-65535-(M[P-1]>>16&1),M[P-1]&=65535;M[15]=j[15]-32767-(M[14]>>16&1),I=M[15]>>16&1,M[14]&=65535,Tn(j,M,1-I)}for(P=0;P<16;P++)b[2*P]=j[P]&255,b[2*P+1]=j[P]>>8}function Wr(b,S){var P=new Uint8Array(32),y=new Uint8Array(32);return Rr(P,b),Rr(y,S),pe(P,0,y,0)}function Fs(b){var S=new Uint8Array(32);return Rr(S,b),S[0]&1}function nr(b,S){var P;for(P=0;P<16;P++)b[P]=S[2*P]+(S[2*P+1]<<8);b[15]&=32767}function Wt(b,S,P){for(var y=0;y<16;y++)b[y]=S[y]+P[y]}function wr(b,S,P){for(var y=0;y<16;y++)b[y]=S[y]-P[y]}function Ve(b,S,P){var y,I,M=0,j=0,oe=0,ye=0,Ke=0,Ae=0,Ct=0,Te=0,rt=0,ot=0,ct=0,lt=0,et=0,ft=0,nt=0,Ie=0,ze=0,xe=0,Re=0,Be=0,Ee=0,q=0,W=0,fe=0,ne=0,ie=0,_=0,k=0,A=0,B=0,O=0,v=P[0],z=P[1],H=P[2],X=P[3],G=P[4],te=P[5],me=P[6],$e=P[7],Ne=P[8],Qe=P[9],dt=P[10],mt=P[11],Ot=P[12],cr=P[13],br=P[14],Or=P[15];y=S[0],M+=y*v,j+=y*z,oe+=y*H,ye+=y*X,Ke+=y*G,Ae+=y*te,Ct+=y*me,Te+=y*$e,rt+=y*Ne,ot+=y*Qe,ct+=y*dt,lt+=y*mt,et+=y*Ot,ft+=y*cr,nt+=y*br,Ie+=y*Or,y=S[1],j+=y*v,oe+=y*z,ye+=y*H,Ke+=y*X,Ae+=y*G,Ct+=y*te,Te+=y*me,rt+=y*$e,ot+=y*Ne,ct+=y*Qe,lt+=y*dt,et+=y*mt,ft+=y*Ot,nt+=y*cr,Ie+=y*br,ze+=y*Or,y=S[2],oe+=y*v,ye+=y*z,Ke+=y*H,Ae+=y*X,Ct+=y*G,Te+=y*te,rt+=y*me,ot+=y*$e,ct+=y*Ne,lt+=y*Qe,et+=y*dt,ft+=y*mt,nt+=y*Ot,Ie+=y*cr,ze+=y*br,xe+=y*Or,y=S[3],ye+=y*v,Ke+=y*z,Ae+=y*H,Ct+=y*X,Te+=y*G,rt+=y*te,ot+=y*me,ct+=y*$e,lt+=y*Ne,et+=y*Qe,ft+=y*dt,nt+=y*mt,Ie+=y*Ot,ze+=y*cr,xe+=y*br,Re+=y*Or,y=S[4],Ke+=y*v,Ae+=y*z,Ct+=y*H,Te+=y*X,rt+=y*G,ot+=y*te,ct+=y*me,lt+=y*$e,et+=y*Ne,ft+=y*Qe,nt+=y*dt,Ie+=y*mt,ze+=y*Ot,xe+=y*cr,Re+=y*br,Be+=y*Or,y=S[5],Ae+=y*v,Ct+=y*z,Te+=y*H,rt+=y*X,ot+=y*G,ct+=y*te,lt+=y*me,et+=y*$e,ft+=y*Ne,nt+=y*Qe,Ie+=y*dt,ze+=y*mt,xe+=y*Ot,Re+=y*cr,Be+=y*br,Ee+=y*Or,y=S[6],Ct+=y*v,Te+=y*z,rt+=y*H,ot+=y*X,ct+=y*G,lt+=y*te,et+=y*me,ft+=y*$e,nt+=y*Ne,Ie+=y*Qe,ze+=y*dt,xe+=y*mt,Re+=y*Ot,Be+=y*cr,Ee+=y*br,q+=y*Or,y=S[7],Te+=y*v,rt+=y*z,ot+=y*H,ct+=y*X,lt+=y*G,et+=y*te,ft+=y*me,nt+=y*$e,Ie+=y*Ne,ze+=y*Qe,xe+=y*dt,Re+=y*mt,Be+=y*Ot,Ee+=y*cr,q+=y*br,W+=y*Or,y=S[8],rt+=y*v,ot+=y*z,ct+=y*H,lt+=y*X,et+=y*G,ft+=y*te,nt+=y*me,Ie+=y*$e,ze+=y*Ne,xe+=y*Qe,Re+=y*dt,Be+=y*mt,Ee+=y*Ot,q+=y*cr,W+=y*br,fe+=y*Or,y=S[9],ot+=y*v,ct+=y*z,lt+=y*H,et+=y*X,ft+=y*G,nt+=y*te,Ie+=y*me,ze+=y*$e,xe+=y*Ne,Re+=y*Qe,Be+=y*dt,Ee+=y*mt,q+=y*Ot,W+=y*cr,fe+=y*br,ne+=y*Or,y=S[10],ct+=y*v,lt+=y*z,et+=y*H,ft+=y*X,nt+=y*G,Ie+=y*te,ze+=y*me,xe+=y*$e,Re+=y*Ne,Be+=y*Qe,Ee+=y*dt,q+=y*mt,W+=y*Ot,fe+=y*cr,ne+=y*br,ie+=y*Or,y=S[11],lt+=y*v,et+=y*z,ft+=y*H,nt+=y*X,Ie+=y*G,ze+=y*te,xe+=y*me,Re+=y*$e,Be+=y*Ne,Ee+=y*Qe,q+=y*dt,W+=y*mt,fe+=y*Ot,ne+=y*cr,ie+=y*br,_+=y*Or,y=S[12],et+=y*v,ft+=y*z,nt+=y*H,Ie+=y*X,ze+=y*G,xe+=y*te,Re+=y*me,Be+=y*$e,Ee+=y*Ne,q+=y*Qe,W+=y*dt,fe+=y*mt,ne+=y*Ot,ie+=y*cr,_+=y*br,k+=y*Or,y=S[13],ft+=y*v,nt+=y*z,Ie+=y*H,ze+=y*X,xe+=y*G,Re+=y*te,Be+=y*me,Ee+=y*$e,q+=y*Ne,W+=y*Qe,fe+=y*dt,ne+=y*mt,ie+=y*Ot,_+=y*cr,k+=y*br,A+=y*Or,y=S[14],nt+=y*v,Ie+=y*z,ze+=y*H,xe+=y*X,Re+=y*G,Be+=y*te,Ee+=y*me,q+=y*$e,W+=y*Ne,fe+=y*Qe,ne+=y*dt,ie+=y*mt,_+=y*Ot,k+=y*cr,A+=y*br,B+=y*Or,y=S[15],Ie+=y*v,ze+=y*z,xe+=y*H,Re+=y*X,Be+=y*G,Ee+=y*te,q+=y*me,W+=y*$e,fe+=y*Ne,ne+=y*Qe,ie+=y*dt,_+=y*mt,k+=y*Ot,A+=y*cr,B+=y*br,O+=y*Or,M+=38*ze,j+=38*xe,oe+=38*Re,ye+=38*Be,Ke+=38*Ee,Ae+=38*q,Ct+=38*W,Te+=38*fe,rt+=38*ne,ot+=38*ie,ct+=38*_,lt+=38*k,et+=38*A,ft+=38*B,nt+=38*O,I=1,y=M+I+65535,I=Math.floor(y/65536),M=y-I*65536,y=j+I+65535,I=Math.floor(y/65536),j=y-I*65536,y=oe+I+65535,I=Math.floor(y/65536),oe=y-I*65536,y=ye+I+65535,I=Math.floor(y/65536),ye=y-I*65536,y=Ke+I+65535,I=Math.floor(y/65536),Ke=y-I*65536,y=Ae+I+65535,I=Math.floor(y/65536),Ae=y-I*65536,y=Ct+I+65535,I=Math.floor(y/65536),Ct=y-I*65536,y=Te+I+65535,I=Math.floor(y/65536),Te=y-I*65536,y=rt+I+65535,I=Math.floor(y/65536),rt=y-I*65536,y=ot+I+65535,I=Math.floor(y/65536),ot=y-I*65536,y=ct+I+65535,I=Math.floor(y/65536),ct=y-I*65536,y=lt+I+65535,I=Math.floor(y/65536),lt=y-I*65536,y=et+I+65535,I=Math.floor(y/65536),et=y-I*65536,y=ft+I+65535,I=Math.floor(y/65536),ft=y-I*65536,y=nt+I+65535,I=Math.floor(y/65536),nt=y-I*65536,y=Ie+I+65535,I=Math.floor(y/65536),Ie=y-I*65536,M+=I-1+37*(I-1),I=1,y=M+I+65535,I=Math.floor(y/65536),M=y-I*65536,y=j+I+65535,I=Math.floor(y/65536),j=y-I*65536,y=oe+I+65535,I=Math.floor(y/65536),oe=y-I*65536,y=ye+I+65535,I=Math.floor(y/65536),ye=y-I*65536,y=Ke+I+65535,I=Math.floor(y/65536),Ke=y-I*65536,y=Ae+I+65535,I=Math.floor(y/65536),Ae=y-I*65536,y=Ct+I+65535,I=Math.floor(y/65536),Ct=y-I*65536,y=Te+I+65535,I=Math.floor(y/65536),Te=y-I*65536,y=rt+I+65535,I=Math.floor(y/65536),rt=y-I*65536,y=ot+I+65535,I=Math.floor(y/65536),ot=y-I*65536,y=ct+I+65535,I=Math.floor(y/65536),ct=y-I*65536,y=lt+I+65535,I=Math.floor(y/65536),lt=y-I*65536,y=et+I+65535,I=Math.floor(y/65536),et=y-I*65536,y=ft+I+65535,I=Math.floor(y/65536),ft=y-I*65536,y=nt+I+65535,I=Math.floor(y/65536),nt=y-I*65536,y=Ie+I+65535,I=Math.floor(y/65536),Ie=y-I*65536,M+=I-1+37*(I-1),b[0]=M,b[1]=j,b[2]=oe,b[3]=ye,b[4]=Ke,b[5]=Ae,b[6]=Ct,b[7]=Te,b[8]=rt,b[9]=ot,b[10]=ct,b[11]=lt,b[12]=et,b[13]=ft,b[14]=nt,b[15]=Ie}function Xr(b,S){Ve(b,S,S)}function Ui(b,S){var P=e(),y;for(y=0;y<16;y++)P[y]=S[y];for(y=253;y>=0;y--)Xr(P,P),y!==2&&y!==4&&Ve(P,P,S);for(y=0;y<16;y++)b[y]=P[y]}function Mi(b,S){var P=e(),y;for(y=0;y<16;y++)P[y]=S[y];for(y=250;y>=0;y--)Xr(P,P),y!==1&&Ve(P,P,S);for(y=0;y<16;y++)b[y]=P[y]}function ts(b,S,P){var y=new Uint8Array(32),I=new Float64Array(80),M,j,oe=e(),ye=e(),Ke=e(),Ae=e(),Ct=e(),Te=e();for(j=0;j<31;j++)y[j]=S[j];for(y[31]=S[31]&127|64,y[0]&=248,nr(I,P),j=0;j<16;j++)ye[j]=I[j],Ae[j]=oe[j]=Ke[j]=0;for(oe[0]=Ae[0]=1,j=254;j>=0;--j)M=y[j>>>3]>>>(j&7)&1,Tn(oe,ye,M),Tn(Ke,Ae,M),Wt(Ct,oe,Ke),wr(oe,oe,Ke),Wt(Ke,ye,Ae),wr(ye,ye,Ae),Xr(Ae,Ct),Xr(Te,oe),Ve(oe,Ke,oe),Ve(Ke,ye,Ct),Wt(Ct,oe,Ke),wr(oe,oe,Ke),Xr(ye,oe),wr(Ke,Ae,Te),Ve(oe,Ke,c),Wt(oe,oe,Ae),Ve(Ke,Ke,oe),Ve(oe,Ae,Te),Ve(Ae,ye,I),Xr(ye,Ct),Tn(oe,ye,M),Tn(Ke,Ae,M);for(j=0;j<16;j++)I[j+16]=oe[j],I[j+32]=Ke[j],I[j+48]=ye[j],I[j+64]=Ae[j];var rt=I.subarray(32),ot=I.subarray(16);return Ui(rt,rt),Ve(ot,ot,rt),Rr(b,ot),0}function Br(b,S){return ts(b,S,i)}function Ki(b,S){return t(S,32),Br(b,S)}function vn(b,S,P){var y=new Uint8Array(32);return ts(y,P,S),be(b,n,y,Pe)}var Vr=qt,yo=hr;function Pa(b,S,P,y,I,M){var j=new Uint8Array(32);return vn(j,I,M),Vr(b,S,P,y,j)}function kn(b,S,P,y,I,M){var j=new Uint8Array(32);return vn(j,I,M),yo(b,S,P,y,j)}var _n=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Sa(b,S,P,y){for(var I=new Int32Array(16),M=new Int32Array(16),j,oe,ye,Ke,Ae,Ct,Te,rt,ot,ct,lt,et,ft,nt,Ie,ze,xe,Re,Be,Ee,q,W,fe,ne,ie,_,k=b[0],A=b[1],B=b[2],O=b[3],v=b[4],z=b[5],H=b[6],X=b[7],G=S[0],te=S[1],me=S[2],$e=S[3],Ne=S[4],Qe=S[5],dt=S[6],mt=S[7],Ot=0;y>=128;){for(Be=0;Be<16;Be++)Ee=8*Be+Ot,I[Be]=P[Ee+0]<<24|P[Ee+1]<<16|P[Ee+2]<<8|P[Ee+3],M[Be]=P[Ee+4]<<24|P[Ee+5]<<16|P[Ee+6]<<8|P[Ee+7];for(Be=0;Be<80;Be++)if(j=k,oe=A,ye=B,Ke=O,Ae=v,Ct=z,Te=H,rt=X,ot=G,ct=te,lt=me,et=$e,ft=Ne,nt=Qe,Ie=dt,ze=mt,q=X,W=mt,fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=(v>>>14|Ne<<32-14)^(v>>>18|Ne<<32-18)^(Ne>>>41-32|v<<32-(41-32)),W=(Ne>>>14|v<<32-14)^(Ne>>>18|v<<32-18)^(v>>>41-32|Ne<<32-(41-32)),fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,q=v&z^~v&H,W=Ne&Qe^~Ne&dt,fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,q=_n[Be*2],W=_n[Be*2+1],fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,q=I[Be%16],W=M[Be%16],fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,xe=ie&65535|_<<16,Re=fe&65535|ne<<16,q=xe,W=Re,fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=(k>>>28|G<<32-28)^(G>>>34-32|k<<32-(34-32))^(G>>>39-32|k<<32-(39-32)),W=(G>>>28|k<<32-28)^(k>>>34-32|G<<32-(34-32))^(k>>>39-32|G<<32-(39-32)),fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,q=k&A^k&B^A&B,W=G&te^G&me^te&me,fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,rt=ie&65535|_<<16,ze=fe&65535|ne<<16,q=Ke,W=et,fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=xe,W=Re,fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,Ke=ie&65535|_<<16,et=fe&65535|ne<<16,A=j,B=oe,O=ye,v=Ke,z=Ae,H=Ct,X=Te,k=rt,te=ot,me=ct,$e=lt,Ne=et,Qe=ft,dt=nt,mt=Ie,G=ze,Be%16===15)for(Ee=0;Ee<16;Ee++)q=I[Ee],W=M[Ee],fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=I[(Ee+9)%16],W=M[(Ee+9)%16],fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,xe=I[(Ee+1)%16],Re=M[(Ee+1)%16],q=(xe>>>1|Re<<32-1)^(xe>>>8|Re<<32-8)^xe>>>7,W=(Re>>>1|xe<<32-1)^(Re>>>8|xe<<32-8)^(Re>>>7|xe<<32-7),fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,xe=I[(Ee+14)%16],Re=M[(Ee+14)%16],q=(xe>>>19|Re<<32-19)^(Re>>>61-32|xe<<32-(61-32))^xe>>>6,W=(Re>>>19|xe<<32-19)^(xe>>>61-32|Re<<32-(61-32))^(Re>>>6|xe<<32-6),fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,I[Ee]=ie&65535|_<<16,M[Ee]=fe&65535|ne<<16;q=k,W=G,fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[0],W=S[0],fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,b[0]=k=ie&65535|_<<16,S[0]=G=fe&65535|ne<<16,q=A,W=te,fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[1],W=S[1],fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,b[1]=A=ie&65535|_<<16,S[1]=te=fe&65535|ne<<16,q=B,W=me,fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[2],W=S[2],fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,b[2]=B=ie&65535|_<<16,S[2]=me=fe&65535|ne<<16,q=O,W=$e,fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[3],W=S[3],fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,b[3]=O=ie&65535|_<<16,S[3]=$e=fe&65535|ne<<16,q=v,W=Ne,fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[4],W=S[4],fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,b[4]=v=ie&65535|_<<16,S[4]=Ne=fe&65535|ne<<16,q=z,W=Qe,fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[5],W=S[5],fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,b[5]=z=ie&65535|_<<16,S[5]=Qe=fe&65535|ne<<16,q=H,W=dt,fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[6],W=S[6],fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,b[6]=H=ie&65535|_<<16,S[6]=dt=fe&65535|ne<<16,q=X,W=mt,fe=W&65535,ne=W>>>16,ie=q&65535,_=q>>>16,q=b[7],W=S[7],fe+=W&65535,ne+=W>>>16,ie+=q&65535,_+=q>>>16,ne+=fe>>>16,ie+=ne>>>16,_+=ie>>>16,b[7]=X=ie&65535|_<<16,S[7]=mt=fe&65535|ne<<16,Ot+=128,y-=128}return y}function Qr(b,S,P){var y=new Int32Array(8),I=new Int32Array(8),M=new Uint8Array(256),j,oe=P;for(y[0]=1779033703,y[1]=3144134277,y[2]=1013904242,y[3]=2773480762,y[4]=1359893119,y[5]=2600822924,y[6]=528734635,y[7]=1541459225,I[0]=4089235720,I[1]=2227873595,I[2]=4271175723,I[3]=1595750129,I[4]=2917565137,I[5]=725511199,I[6]=4215389547,I[7]=327033209,Sa(y,I,S,P),P%=128,j=0;j<P;j++)M[j]=S[oe-P+j];for(M[P]=128,P=256-128*(P<112?1:0),M[P-9]=0,T(M,P-8,oe/536870912|0,oe<<3),Sa(y,I,M,P),j=0;j<8;j++)T(b,8*j,y[j],I[j]);return 0}function ur(b,S){var P=e(),y=e(),I=e(),M=e(),j=e(),oe=e(),ye=e(),Ke=e(),Ae=e();wr(P,b[1],b[0]),wr(Ae,S[1],S[0]),Ve(P,P,Ae),Wt(y,b[0],b[1]),Wt(Ae,S[0],S[1]),Ve(y,y,Ae),Ve(I,b[3],S[3]),Ve(I,I,d),Ve(M,b[2],S[2]),Wt(M,M,M),wr(j,y,P),wr(oe,M,I),Wt(ye,M,I),Wt(Ke,y,P),Ve(b[0],j,oe),Ve(b[1],Ke,ye),Ve(b[2],ye,oe),Ve(b[3],j,Ke)}function zn(b,S,P){var y;for(y=0;y<4;y++)Tn(b[y],S[y],P)}function qn(b,S){var P=e(),y=e(),I=e();Ui(I,S[2]),Ve(P,S[0],I),Ve(y,S[1],I),Rr(b,y),b[31]^=Fs(P)<<7}function go(b,S,P){var y,I;for(Mt(b[0],o),Mt(b[1],a),Mt(b[2],a),Mt(b[3],o),I=255;I>=0;--I)y=P[I/8|0]>>(I&7)&1,zn(b,S,y),ur(S,b),ur(b,b),zn(b,S,y)}function cn(b,S){var P=[e(),e(),e(),e()];Mt(P[0],m),Mt(P[1],w),Mt(P[2],a),Ve(P[3],m,w),go(b,P,S)}function $(b,S,P){var y=new Uint8Array(64),I=[e(),e(),e(),e()],M;for(P||t(S,32),Qr(y,S,32),y[0]&=248,y[31]&=127,y[31]|=64,cn(I,y),qn(b,I),M=0;M<32;M++)S[M+32]=b[M];return 0}var J=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function le(b,S){var P,y,I,M;for(y=63;y>=32;--y){for(P=0,I=y-32,M=y-12;I<M;++I)S[I]+=P-16*S[y]*J[I-(y-32)],P=Math.floor((S[I]+128)/256),S[I]-=P*256;S[I]+=P,S[y]=0}for(P=0,I=0;I<32;I++)S[I]+=P-(S[31]>>4)*J[I],P=S[I]>>8,S[I]&=255;for(I=0;I<32;I++)S[I]-=P*J[I];for(y=0;y<32;y++)S[y+1]+=S[y]>>8,b[y]=S[y]&255}function ve(b){var S=new Float64Array(64),P;for(P=0;P<64;P++)S[P]=b[P];for(P=0;P<64;P++)b[P]=0;le(b,S)}function je(b,S,P,y){var I=new Uint8Array(64),M=new Uint8Array(64),j=new Uint8Array(64),oe,ye,Ke=new Float64Array(64),Ae=[e(),e(),e(),e()];Qr(I,y,32),I[0]&=248,I[31]&=127,I[31]|=64;var Ct=P+64;for(oe=0;oe<P;oe++)b[64+oe]=S[oe];for(oe=0;oe<32;oe++)b[32+oe]=I[32+oe];for(Qr(j,b.subarray(32),P+32),ve(j),cn(Ae,j),qn(b,Ae),oe=32;oe<64;oe++)b[oe]=y[oe];for(Qr(M,b,P+64),ve(M),oe=0;oe<64;oe++)Ke[oe]=0;for(oe=0;oe<32;oe++)Ke[oe]=j[oe];for(oe=0;oe<32;oe++)for(ye=0;ye<32;ye++)Ke[oe+ye]+=M[oe]*I[ye];return le(b.subarray(32),Ke),Ct}function or(b,S){var P=e(),y=e(),I=e(),M=e(),j=e(),oe=e(),ye=e();return Mt(b[2],a),nr(b[1],S),Xr(I,b[1]),Ve(M,I,f),wr(I,I,b[2]),Wt(M,b[2],M),Xr(j,M),Xr(oe,j),Ve(ye,oe,j),Ve(P,ye,I),Ve(P,P,M),Mi(P,P),Ve(P,P,I),Ve(P,P,M),Ve(P,P,M),Ve(b[0],P,M),Xr(y,b[0]),Ve(y,y,M),Wr(y,I)&&Ve(b[0],b[0],E),Xr(y,b[0]),Ve(y,y,M),Wr(y,I)?-1:(Fs(b[0])===S[31]>>7&&wr(b[0],o,b[0]),Ve(b[3],b[0],b[1]),0)}function tt(b,S,P,y){var I,M=new Uint8Array(32),j=new Uint8Array(64),oe=[e(),e(),e(),e()],ye=[e(),e(),e(),e()];if(P<64||or(ye,y))return-1;for(I=0;I<P;I++)b[I]=S[I];for(I=0;I<32;I++)b[I+32]=y[I];if(Qr(j,b,P),ve(j),go(oe,ye,j),cn(ye,S.subarray(32)),ur(oe,ye),qn(M,oe),P-=64,pe(S,0,M,0)){for(I=0;I<P;I++)b[I]=0;return-1}for(I=0;I<P;I++)b[I]=S[I+64];return P}var ut=32,qe=24,yt=32,pt=16,Pr=32,wo=32,Rs=32,bo=32,Bs=32,Ou=qe,ji=yt,yh=pt,ai=64,$i=32,vo=64,Lu=32,Nu=64;r.lowlevel={crypto_core_hsalsa20:be,crypto_stream_xor:Me,crypto_stream:_e,crypto_stream_salsa20_xor:Y,crypto_stream_salsa20:ge,crypto_onetimeauth:Nt,crypto_onetimeauth_verify:Bt,crypto_verify_16:U,crypto_verify_32:pe,crypto_secretbox:qt,crypto_secretbox_open:hr,crypto_scalarmult:ts,crypto_scalarmult_base:Br,crypto_box_beforenm:vn,crypto_box_afternm:Vr,crypto_box:Pa,crypto_box_open:kn,crypto_box_keypair:Ki,crypto_hash:Qr,crypto_sign:je,crypto_sign_keypair:$,crypto_sign_open:tt,crypto_secretbox_KEYBYTES:ut,crypto_secretbox_NONCEBYTES:qe,crypto_secretbox_ZEROBYTES:yt,crypto_secretbox_BOXZEROBYTES:pt,crypto_scalarmult_BYTES:Pr,crypto_scalarmult_SCALARBYTES:wo,crypto_box_PUBLICKEYBYTES:Rs,crypto_box_SECRETKEYBYTES:bo,crypto_box_BEFORENMBYTES:Bs,crypto_box_NONCEBYTES:Ou,crypto_box_ZEROBYTES:ji,crypto_box_BOXZEROBYTES:yh,crypto_sign_BYTES:ai,crypto_sign_PUBLICKEYBYTES:$i,crypto_sign_SECRETKEYBYTES:vo,crypto_sign_SEEDBYTES:Lu,crypto_hash_BYTES:Nu,gf:e,D:f,L:J,pack25519:Rr,unpack25519:nr,M:Ve,A:Wt,S:Xr,Z:wr,pow2523:Mi,add:ur,set25519:Mt,modL:le,scalarmult:go,scalarbase:cn};function gf(b,S){if(b.length!==ut)throw new Error("bad key size");if(S.length!==qe)throw new Error("bad nonce size")}function Uu(b,S){if(b.length!==Rs)throw new Error("bad public key size");if(S.length!==bo)throw new Error("bad secret key size")}function fn(){for(var b=0;b<arguments.length;b++)if(!(arguments[b]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Da(b){for(var S=0;S<b.length;S++)b[S]=0}r.randomBytes=function(b){var S=new Uint8Array(b);return t(S,b),S},r.secretbox=function(b,S,P){fn(b,S,P),gf(P,S);for(var y=new Uint8Array(yt+b.length),I=new Uint8Array(y.length),M=0;M<b.length;M++)y[M+yt]=b[M];return qt(I,y,y.length,S,P),I.subarray(pt)},r.secretbox.open=function(b,S,P){fn(b,S,P),gf(P,S);for(var y=new Uint8Array(pt+b.length),I=new Uint8Array(y.length),M=0;M<b.length;M++)y[M+pt]=b[M];return y.length<32||hr(I,y,y.length,S,P)!==0?null:I.subarray(yt)},r.secretbox.keyLength=ut,r.secretbox.nonceLength=qe,r.secretbox.overheadLength=pt,r.scalarMult=function(b,S){if(fn(b,S),b.length!==wo)throw new Error("bad n size");if(S.length!==Pr)throw new Error("bad p size");var P=new Uint8Array(Pr);return ts(P,b,S),P},r.scalarMult.base=function(b){if(fn(b),b.length!==wo)throw new Error("bad n size");var S=new Uint8Array(Pr);return Br(S,b),S},r.scalarMult.scalarLength=wo,r.scalarMult.groupElementLength=Pr,r.box=function(b,S,P,y){var I=r.box.before(P,y);return r.secretbox(b,S,I)},r.box.before=function(b,S){fn(b,S),Uu(b,S);var P=new Uint8Array(Bs);return vn(P,b,S),P},r.box.after=r.secretbox,r.box.open=function(b,S,P,y){var I=r.box.before(P,y);return r.secretbox.open(b,S,I)},r.box.open.after=r.secretbox.open,r.box.keyPair=function(){var b=new Uint8Array(Rs),S=new Uint8Array(bo);return Ki(b,S),{publicKey:b,secretKey:S}},r.box.keyPair.fromSecretKey=function(b){if(fn(b),b.length!==bo)throw new Error("bad secret key size");var S=new Uint8Array(Rs);return Br(S,b),{publicKey:S,secretKey:new Uint8Array(b)}},r.box.publicKeyLength=Rs,r.box.secretKeyLength=bo,r.box.sharedKeyLength=Bs,r.box.nonceLength=Ou,r.box.overheadLength=r.secretbox.overheadLength,r.sign=function(b,S){if(fn(b,S),S.length!==vo)throw new Error("bad secret key size");var P=new Uint8Array(ai+b.length);return je(P,b,b.length,S),P},r.sign.open=function(b,S){if(fn(b,S),S.length!==$i)throw new Error("bad public key size");var P=new Uint8Array(b.length),y=tt(P,b,b.length,S);if(y<0)return null;for(var I=new Uint8Array(y),M=0;M<I.length;M++)I[M]=P[M];return I},r.sign.detached=function(b,S){for(var P=r.sign(b,S),y=new Uint8Array(ai),I=0;I<y.length;I++)y[I]=P[I];return y},r.sign.detached.verify=function(b,S,P){if(fn(b,S,P),S.length!==ai)throw new Error("bad signature size");if(P.length!==$i)throw new Error("bad public key size");var y=new Uint8Array(ai+b.length),I=new Uint8Array(ai+b.length),M;for(M=0;M<ai;M++)y[M]=S[M];for(M=0;M<b.length;M++)y[M+ai]=b[M];return tt(I,y,y.length,P)>=0},r.sign.keyPair=function(){var b=new Uint8Array($i),S=new Uint8Array(vo);return $(b,S),{publicKey:b,secretKey:S}},r.sign.keyPair.fromSecretKey=function(b){if(fn(b),b.length!==vo)throw new Error("bad secret key size");for(var S=new Uint8Array($i),P=0;P<S.length;P++)S[P]=b[32+P];return{publicKey:S,secretKey:new Uint8Array(b)}},r.sign.keyPair.fromSeed=function(b){if(fn(b),b.length!==Lu)throw new Error("bad seed size");for(var S=new Uint8Array($i),P=new Uint8Array(vo),y=0;y<32;y++)P[y]=b[y];return $(S,P,!0),{publicKey:S,secretKey:P}},r.sign.publicKeyLength=$i,r.sign.secretKeyLength=vo,r.sign.seedLength=Lu,r.sign.signatureLength=ai,r.hash=function(b){fn(b);var S=new Uint8Array(Nu);return Qr(S,b,b.length),S},r.hash.hashLength=Nu,r.verify=function(b,S){return fn(b,S),b.length===0||S.length===0||b.length!==S.length?!1:F(b,0,S,0,b.length)===0},r.setPRNG=function(b){t=b},function(){var b=typeof self<"u"?self.crypto||self.msCrypto:null;if(b&&b.getRandomValues){var S=65536;r.setPRNG(function(P,y){var I,M=new Uint8Array(y);for(I=0;I<y;I+=S)b.getRandomValues(M.subarray(I,I+Math.min(y-I,S)));for(I=0;I<y;I++)P[I]=M[I];Da(M)})}else typeof Gu<"u"&&(b=Yv(),b&&b.randomBytes&&r.setPRNG(function(P,y){var I,M=b.randomBytes(y);for(I=0;I<y;I++)P[I]=M[I];Da(M)}))}()})(typeof tg<"u"&&tg.exports?tg.exports:self.nacl=self.nacl||{})});var E3=ue((Cme,x3)=>{h();p();x3.exports=rx;var _3=128,TH=127,kH=~TH,FH=Math.pow(2,31);function rx(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw rx.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=FH;)e[t++]=r&255|_3,r/=128;for(;r&kH;)e[t++]=r&255|_3,r>>>=7;return e[t]=r|0,rx.bytes=t-n+1,e}});var D3=ue((kme,S3)=>{h();p();S3.exports=nx;var RH=128,P3=127;function nx(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c||i>49)throw nx.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&P3)<<i:(a&P3)*Math.pow(2,i),i+=7}while(a>=RH);return nx.bytes=o-n,t}});var C3=ue((Bme,A3)=>{h();p();var BH=Math.pow(2,7),OH=Math.pow(2,14),LH=Math.pow(2,21),NH=Math.pow(2,28),UH=Math.pow(2,35),MH=Math.pow(2,42),KH=Math.pow(2,49),jH=Math.pow(2,56),$H=Math.pow(2,63);A3.exports=function(r){return r<BH?1:r<OH?2:r<LH?3:r<NH?4:r<UH?5:r<MH?6:r<KH?7:r<jH?8:r<$H?9:10}});var Kp=ue((Nme,I3)=>{h();p();I3.exports={encode:E3(),decode:D3(),encodingLength:C3()}});var qo=ue((pye,U3)=>{"use strict";h();p();function N3(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function oG(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return N3(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),N3(new i,t)}}U3.exports=oG});var X3=ue((Vye,J3)=>{h();p();var Ol=1e3,Ll=Ol*60,Nl=Ll*60,Lc=Nl*24,mG=Lc*7,yG=Lc*365.25;J3.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return gG(r);if(t==="number"&&isFinite(r))return e.long?bG(r):wG(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function gG(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*yG;case"weeks":case"week":case"w":return t*mG;case"days":case"day":case"d":return t*Lc;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Nl;case"minutes":case"minute":case"mins":case"min":case"m":return t*Ll;case"seconds":case"second":case"secs":case"sec":case"s":return t*Ol;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function wG(r){var e=Math.abs(r);return e>=Lc?Math.round(r/Lc)+"d":e>=Nl?Math.round(r/Nl)+"h":e>=Ll?Math.round(r/Ll)+"m":e>=Ol?Math.round(r/Ol)+"s":r+"ms"}function bG(r){var e=Math.abs(r);return e>=Lc?wg(r,e,Lc,"day"):e>=Nl?wg(r,e,Nl,"hour"):e>=Ll?wg(r,e,Ll,"minute"):e>=Ol?wg(r,e,Ol,"second"):r+" ms"}function wg(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Z3=ue((Yye,Q3)=>{h();p();function vG(r){t.debug=t,t.default=t,t.coerce=f,t.disable=o,t.enable=i,t.enabled=a,t.humanize=X3(),t.destroy=d,Object.keys(r).forEach(m=>{t[m]=r[m]}),t.names=[],t.skips=[],t.formatters={};function e(m){let w=0;for(let E=0;E<m.length;E++)w=(w<<5)-w+m.charCodeAt(E),w|=0;return t.colors[Math.abs(w)%t.colors.length]}t.selectColor=e;function t(m){let w,E=null,T,F;function U(...pe){if(!U.enabled)return;let he=U,De=Number(new Date),re=De-(w||De);he.diff=re,he.prev=w,he.curr=De,w=De,pe[0]=t.coerce(pe[0]),typeof pe[0]!="string"&&pe.unshift("%O");let be=0;pe[0]=pe[0].replace(/%([a-zA-Z%])/g,(Y,ge)=>{if(Y==="%%")return"%";be++;let _e=t.formatters[ge];if(typeof _e=="function"){let Me=pe[be];Y=_e.call(he,Me),pe.splice(be,1),be--}return Y}),t.formatArgs.call(he,pe),(he.log||t.log).apply(he,pe)}return U.namespace=m,U.useColors=t.useColors(),U.color=t.selectColor(m),U.extend=n,U.destroy=t.destroy,Object.defineProperty(U,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(T!==t.namespaces&&(T=t.namespaces,F=t.enabled(m)),F),set:pe=>{E=pe}}),typeof t.init=="function"&&t.init(U),U}function n(m,w){let E=t(this.namespace+(typeof w>"u"?":":w)+m);return E.log=this.log,E}function i(m){t.save(m),t.namespaces=m,t.names=[],t.skips=[];let w,E=(typeof m=="string"?m:"").split(/[\s,]+/),T=E.length;for(w=0;w<T;w++)!E[w]||(m=E[w].replace(/\*/g,".*?"),m[0]==="-"?t.skips.push(new RegExp("^"+m.slice(1)+"$")):t.names.push(new RegExp("^"+m+"$")))}function o(){let m=[...t.names.map(c),...t.skips.map(c).map(w=>"-"+w)].join(",");return t.enable(""),m}function a(m){if(m[m.length-1]==="*")return!0;let w,E;for(w=0,E=t.skips.length;w<E;w++)if(t.skips[w].test(m))return!1;for(w=0,E=t.names.length;w<E;w++)if(t.names[w].test(m))return!0;return!1}function c(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function f(m){return m instanceof Error?m.stack||m.message:m}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Q3.exports=vG});var Wo=ue((ki,bg)=>{h();p();ki.formatArgs=xG;ki.save=EG;ki.load=PG;ki.useColors=_G;ki.storage=SG();ki.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ki.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function _G(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function xG(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+bg.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}ki.log=console.debug||console.log||(()=>{});function EG(r){try{r?ki.storage.setItem("debug",r):ki.storage.removeItem("debug")}catch{}}function PG(){let r;try{r=ki.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function SG(){try{return localStorage}catch{}}bg.exports=Z3()(ki);var{formatters:DG}=bg.exports;DG.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var l6=ue((Kge,f6)=>{"use strict";h();p();f6.exports=BG;function BG(r,e){for(var t=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)t[n++]=arguments[i++];return new Promise(function(c,f){t[n]=function(m){if(o)if(o=!1,m)f(m);else{for(var w=new Array(arguments.length-1),E=0;E<w.length;)w[E++]=arguments[E];c.apply(null,w)}};try{r.apply(e||null,t)}catch(d){o&&(o=!1,f(d))}})}});var m6=ue(d6=>{"use strict";h();p();var Pg=d6;Pg.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Ul=new Array(64),p6=new Array(123);for(Vo=0;Vo<64;)p6[Ul[Vo]=Vo<26?Vo+65:Vo<52?Vo+71:Vo<62?Vo-4:Vo-59|43]=Vo++;var Vo;Pg.encode=function(e,t,n){for(var i=null,o=[],a=0,c=0,f;t<n;){var d=e[t++];switch(c){case 0:o[a++]=Ul[d>>2],f=(d&3)<<4,c=1;break;case 1:o[a++]=Ul[f|d>>4],f=(d&15)<<2,c=2;break;case 2:o[a++]=Ul[f|d>>6],o[a++]=Ul[d&63],c=0;break}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=Ul[f],o[a++]=61,c===1&&(o[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var h6="invalid encoding";Pg.decode=function(e,t,n){for(var i=n,o=0,a,c=0;c<e.length;){var f=e.charCodeAt(c++);if(f===61&&o>1)break;if((f=p6[f])===void 0)throw Error(h6);switch(o){case 0:a=f,o=1;break;case 1:t[n++]=a<<2|(f&48)>>4,a=f,o=2;break;case 2:t[n++]=(a&15)<<4|(f&60)>>2,a=f,o=3;break;case 3:t[n++]=(a&3)<<6|f,o=0;break}}if(o===1)throw Error(h6);return n-i};Pg.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var g6=ue((Vge,y6)=>{"use strict";h();p();y6.exports=Sg;function Sg(){this._listeners={}}Sg.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};Sg.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this};Sg.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}});var P6=ue((Yge,E6)=>{"use strict";h();p();E6.exports=w6(w6);function w6(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(f,d,m){e[0]=f,d[m]=t[0],d[m+1]=t[1],d[m+2]=t[2],d[m+3]=t[3]}function o(f,d,m){e[0]=f,d[m]=t[3],d[m+1]=t[2],d[m+2]=t[1],d[m+3]=t[0]}r.writeFloatLE=n?i:o,r.writeFloatBE=n?o:i;function a(f,d){return t[0]=f[d],t[1]=f[d+1],t[2]=f[d+2],t[3]=f[d+3],e[0]}function c(f,d){return t[3]=f[d],t[2]=f[d+1],t[1]=f[d+2],t[0]=f[d+3],e[0]}r.readFloatLE=n?a:c,r.readFloatBE=n?c:a}():function(){function e(n,i,o,a){var c=i<0?1:0;if(c&&(i=-i),i===0)n(1/i>0?0:2147483648,o,a);else if(isNaN(i))n(2143289344,o,a);else if(i>34028234663852886e22)n((c<<31|2139095040)>>>0,o,a);else if(i<11754943508222875e-54)n((c<<31|Math.round(i/1401298464324817e-60))>>>0,o,a);else{var f=Math.floor(Math.log(i)/Math.LN2),d=Math.round(i*Math.pow(2,-f)*8388608)&8388607;n((c<<31|f+127<<23|d)>>>0,o,a)}}r.writeFloatLE=e.bind(null,b6),r.writeFloatBE=e.bind(null,v6);function t(n,i,o){var a=n(i,o),c=(a>>31)*2+1,f=a>>>23&255,d=a&8388607;return f===255?d?NaN:c*(1/0):f===0?c*1401298464324817e-60*d:c*Math.pow(2,f-150)*(d+8388608)}r.readFloatLE=t.bind(null,_6),r.readFloatBE=t.bind(null,x6)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(f,d,m){e[0]=f,d[m]=t[0],d[m+1]=t[1],d[m+2]=t[2],d[m+3]=t[3],d[m+4]=t[4],d[m+5]=t[5],d[m+6]=t[6],d[m+7]=t[7]}function o(f,d,m){e[0]=f,d[m]=t[7],d[m+1]=t[6],d[m+2]=t[5],d[m+3]=t[4],d[m+4]=t[3],d[m+5]=t[2],d[m+6]=t[1],d[m+7]=t[0]}r.writeDoubleLE=n?i:o,r.writeDoubleBE=n?o:i;function a(f,d){return t[0]=f[d],t[1]=f[d+1],t[2]=f[d+2],t[3]=f[d+3],t[4]=f[d+4],t[5]=f[d+5],t[6]=f[d+6],t[7]=f[d+7],e[0]}function c(f,d){return t[7]=f[d],t[6]=f[d+1],t[5]=f[d+2],t[4]=f[d+3],t[3]=f[d+4],t[2]=f[d+5],t[1]=f[d+6],t[0]=f[d+7],e[0]}r.readDoubleLE=n?a:c,r.readDoubleBE=n?c:a}():function(){function e(n,i,o,a,c,f){var d=a<0?1:0;if(d&&(a=-a),a===0)n(0,c,f+i),n(1/a>0?0:2147483648,c,f+o);else if(isNaN(a))n(0,c,f+i),n(2146959360,c,f+o);else if(a>17976931348623157e292)n(0,c,f+i),n((d<<31|2146435072)>>>0,c,f+o);else{var m;if(a<22250738585072014e-324)m=a/5e-324,n(m>>>0,c,f+i),n((d<<31|m/4294967296)>>>0,c,f+o);else{var w=Math.floor(Math.log(a)/Math.LN2);w===1024&&(w=1023),m=a*Math.pow(2,-w),n(m*4503599627370496>>>0,c,f+i),n((d<<31|w+1023<<20|m*1048576&1048575)>>>0,c,f+o)}}}r.writeDoubleLE=e.bind(null,b6,0,4),r.writeDoubleBE=e.bind(null,v6,4,0);function t(n,i,o,a,c){var f=n(a,c+i),d=n(a,c+o),m=(d>>31)*2+1,w=d>>>20&2047,E=4294967296*(d&1048575)+f;return w===2047?E?NaN:m*(1/0):w===0?m*5e-324*E:m*Math.pow(2,w-1075)*(E+4503599627370496)}r.readDoubleLE=t.bind(null,_6,0,4),r.readDoubleBE=t.bind(null,x6,4,0)}(),r}function b6(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function v6(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function _6(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function x6(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var S6=ue((exports,module)=>{"use strict";h();p();module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var A6=ue(D6=>{"use strict";h();p();var yx=D6;yx.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};yx.read=function(e,t,n){var i=n-t;if(i<1)return"";for(var o=null,a=[],c=0,f;t<n;)f=e[t++],f<128?a[c++]=f:f>191&&f<224?a[c++]=(f&31)<<6|e[t++]&63:f>239&&f<365?(f=((f&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,a[c++]=55296+(f>>10),a[c++]=56320+(f&1023)):a[c++]=(f&15)<<12|(e[t++]&63)<<6|e[t++]&63,c>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),c=0);return o?(c&&o.push(String.fromCharCode.apply(String,a.slice(0,c))),o.join("")):String.fromCharCode.apply(String,a.slice(0,c))};yx.write=function(e,t,n){for(var i=n,o,a,c=0;c<e.length;++c)o=e.charCodeAt(c),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&((a=e.charCodeAt(c+1))&64512)===56320?(o=65536+((o&1023)<<10)+(a&1023),++c,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128);return n-i}});var I6=ue((n0e,C6)=>{"use strict";h();p();C6.exports=OG;function OG(r,e,t){var n=t||8192,i=n>>>1,o=null,a=n;return function(f){if(f<1||f>i)return r(f);a+f>n&&(o=r(n),a=0);var d=e.call(o,a,a+=f);return a&7&&(a=(a|7)+1),d}}});var k6=ue((s0e,T6)=>{"use strict";h();p();T6.exports=an;var Jp=lu();function an(r,e){this.lo=r>>>0,this.hi=e>>>0}var Uc=an.zero=new an(0,0);Uc.toNumber=function(){return 0};Uc.zzEncode=Uc.zzDecode=function(){return this};Uc.length=function(){return 1};var LG=an.zeroHash="\0\0\0\0\0\0\0\0";an.fromNumber=function(e){if(e===0)return Uc;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new an(n,i)};an.from=function(e){if(typeof e=="number")return an.fromNumber(e);if(Jp.isString(e))if(Jp.Long)e=Jp.Long.fromString(e);else return an.fromNumber(parseInt(e,10));return e.low||e.high?new an(e.low>>>0,e.high>>>0):Uc};an.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};an.prototype.toLong=function(e){return Jp.Long?new Jp.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var fu=String.prototype.charCodeAt;an.fromHash=function(e){return e===LG?Uc:new an((fu.call(e,0)|fu.call(e,1)<<8|fu.call(e,2)<<16|fu.call(e,3)<<24)>>>0,(fu.call(e,4)|fu.call(e,5)<<8|fu.call(e,6)<<16|fu.call(e,7)<<24)>>>0)};an.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};an.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};an.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};an.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var lu=ue(gx=>{"use strict";h();p();var Xe=gx;Xe.asPromise=l6();Xe.base64=m6();Xe.EventEmitter=g6();Xe.float=P6();Xe.inquire=S6();Xe.utf8=A6();Xe.pool=I6();Xe.LongBits=k6();Xe.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);Xe.global=Xe.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||gx;Xe.emptyArray=Object.freeze?Object.freeze([]):[];Xe.emptyObject=Object.freeze?Object.freeze({}):{};Xe.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Xe.isString=function(e){return typeof e=="string"||e instanceof String};Xe.isObject=function(e){return e&&typeof e=="object"};Xe.isset=Xe.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};Xe.Buffer=function(){try{var r=Xe.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();Xe._Buffer_from=null;Xe._Buffer_allocUnsafe=null;Xe.newBuffer=function(e){return typeof e=="number"?Xe.Buffer?Xe._Buffer_allocUnsafe(e):new Xe.Array(e):Xe.Buffer?Xe._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};Xe.Array=typeof Uint8Array<"u"?Uint8Array:Array;Xe.Long=Xe.global.dcodeIO&&Xe.global.dcodeIO.Long||Xe.global.Long||Xe.inquire("long");Xe.key2Re=/^true|false|0|1$/;Xe.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Xe.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Xe.longToHash=function(e){return e?Xe.LongBits.from(e).toHash():Xe.LongBits.zeroHash};Xe.longFromHash=function(e,t){var n=Xe.LongBits.fromHash(e);return Xe.Long?Xe.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function F6(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}Xe.merge=F6;Xe.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function R6(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&F6(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}Xe.newError=R6;Xe.ProtocolError=R6("ProtocolError");Xe.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(t[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};Xe.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};Xe.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Xe._configure=function(){var r=Xe.Buffer;if(!r){Xe._Buffer_from=Xe._Buffer_allocUnsafe=null;return}Xe._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},Xe._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var Px=ue((h0e,N6)=>{"use strict";h();p();N6.exports=Ut;var fo=lu(),wx,Dg=fo.LongBits,B6=fo.base64,O6=fo.utf8;function Xp(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function vx(){}function NG(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function Ut(){this.len=0,this.head=new Xp(vx,0,0),this.tail=this.head,this.states=null}var L6=function(){return fo.Buffer?function(){return(Ut.create=function(){return new wx})()}:function(){return new Ut}};Ut.create=L6();Ut.alloc=function(e){return new fo.Array(e)};fo.Array!==Array&&(Ut.alloc=fo.pool(Ut.alloc,fo.Array.prototype.subarray));Ut.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Xp(e,t,n),this.len+=t,this};function _x(r,e,t){e[t]=r&255}function UG(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function xx(r,e){this.len=r,this.next=void 0,this.val=e}xx.prototype=Object.create(Xp.prototype);xx.prototype.fn=UG;Ut.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new xx((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Ut.prototype.int32=function(e){return e<0?this._push(Ex,10,Dg.fromNumber(e)):this.uint32(e)};Ut.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Ex(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}Ut.prototype.uint64=function(e){var t=Dg.from(e);return this._push(Ex,t.length(),t)};Ut.prototype.int64=Ut.prototype.uint64;Ut.prototype.sint64=function(e){var t=Dg.from(e).zzEncode();return this._push(Ex,t.length(),t)};Ut.prototype.bool=function(e){return this._push(_x,1,e?1:0)};function bx(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}Ut.prototype.fixed32=function(e){return this._push(bx,4,e>>>0)};Ut.prototype.sfixed32=Ut.prototype.fixed32;Ut.prototype.fixed64=function(e){var t=Dg.from(e);return this._push(bx,4,t.lo)._push(bx,4,t.hi)};Ut.prototype.sfixed64=Ut.prototype.fixed64;Ut.prototype.float=function(e){return this._push(fo.float.writeFloatLE,4,e)};Ut.prototype.double=function(e){return this._push(fo.float.writeDoubleLE,8,e)};var MG=fo.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};Ut.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(_x,1,0);if(fo.isString(e)){var n=Ut.alloc(t=B6.length(e));B6.decode(e,n,0),e=n}return this.uint32(t)._push(MG,t,e)};Ut.prototype.string=function(e){var t=O6.length(e);return t?this.uint32(t)._push(O6.write,t,e):this._push(_x,1,0)};Ut.prototype.fork=function(){return this.states=new NG(this),this.head=this.tail=new Xp(vx,0,0),this.len=0,this};Ut.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Xp(vx,0,0),this.len=0),this};Ut.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};Ut.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};Ut._configure=function(r){wx=r,Ut.create=L6(),wx._configure()}});var K6=ue((m0e,M6)=>{"use strict";h();p();M6.exports=xs;var U6=Px();(xs.prototype=Object.create(U6.prototype)).constructor=xs;var hu=lu();function xs(){U6.call(this)}xs._configure=function(){xs.alloc=hu._Buffer_allocUnsafe,xs.writeBytesBuffer=hu.Buffer&&hu.Buffer.prototype instanceof Uint8Array&&hu.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};xs.prototype.bytes=function(e){hu.isString(e)&&(e=hu._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(xs.writeBytesBuffer,t,e),this};function KG(r,e,t){r.length<40?hu.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}xs.prototype.string=function(e){var t=hu.Buffer.byteLength(e);return this.uint32(t),t&&this._push(KG,t,e),this};xs._configure()});var Ax=ue((w0e,W6)=>{"use strict";h();p();W6.exports=Mr;var Es=lu(),Dx,z6=Es.LongBits,jG=Es.utf8;function Ho(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function Mr(r){this.buf=r,this.pos=0,this.len=r.length}var j6=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Mr(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Mr(e);throw Error("illegal buffer")},q6=function(){return Es.Buffer?function(t){return(Mr.create=function(i){return Es.Buffer.isBuffer(i)?new Dx(i):j6(i)})(t)}:j6};Mr.create=q6();Mr.prototype._slice=Es.Array.prototype.subarray||Es.Array.prototype.slice;Mr.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Ho(this,10);return e}}();Mr.prototype.int32=function(){return this.uint32()|0};Mr.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Sx(){var r=new z6(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Ho(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw Ho(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}Mr.prototype.bool=function(){return this.uint32()!==0};function Ag(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}Mr.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ho(this,4);return Ag(this.buf,this.pos+=4)};Mr.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ho(this,4);return Ag(this.buf,this.pos+=4)|0};function $6(){if(this.pos+8>this.len)throw Ho(this,8);return new z6(Ag(this.buf,this.pos+=4),Ag(this.buf,this.pos+=4))}Mr.prototype.float=function(){if(this.pos+4>this.len)throw Ho(this,4);var e=Es.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Mr.prototype.double=function(){if(this.pos+8>this.len)throw Ho(this,4);var e=Es.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Mr.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw Ho(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};Mr.prototype.string=function(){var e=this.bytes();return jG.read(e,0,e.length)};Mr.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Ho(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Ho(this);while(this.buf[this.pos++]&128);return this};Mr.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};Mr._configure=function(r){Dx=r,Mr.create=q6(),Dx._configure();var e=Es.Long?"toLong":"toNumber";Es.merge(Mr.prototype,{int64:function(){return Sx.call(this)[e](!1)},uint64:function(){return Sx.call(this)[e](!0)},sint64:function(){return Sx.call(this).zzDecode()[e](!1)},fixed64:function(){return $6.call(this)[e](!0)},sfixed64:function(){return $6.call(this)[e](!1)}})}});var Y6=ue((_0e,G6)=>{"use strict";h();p();G6.exports=Mc;var H6=Ax();(Mc.prototype=Object.create(H6.prototype)).constructor=Mc;var V6=lu();function Mc(r){H6.call(this,r)}Mc._configure=function(){V6.Buffer&&(Mc.prototype._slice=V6.Buffer.prototype.slice)};Mc.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Mc._configure()});var X6=ue((P0e,J6)=>{"use strict";h();p();J6.exports=Qp;var Cx=lu();(Qp.prototype=Object.create(Cx.EventEmitter.prototype)).constructor=Qp;function Qp(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");Cx.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}Qp.prototype.rpcCall=function r(e,t,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return Cx.asPromise(r,a,e,t,n,i);if(!a.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return a.rpcImpl(e,t[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(f,d){if(f)return a.emit("error",f,e),o(f);if(d===null){a.end(!0);return}if(!(d instanceof n))try{d=n[a.responseDelimited?"decodeDelimited":"decode"](d)}catch(m){return a.emit("error",m,e),o(m)}return a.emit("data",d,e),o(null,d)})}catch(c){a.emit("error",c,e),setTimeout(function(){o(c)},0);return}};Qp.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Z6=ue(Q6=>{"use strict";h();p();var $G=Q6;$G.Service=X6()});var tT=ue((T0e,eT)=>{"use strict";h();p();eT.exports={}});var iT=ue(nT=>{"use strict";h();p();var ni=nT;ni.build="minimal";ni.Writer=Px();ni.BufferWriter=K6();ni.Reader=Ax();ni.BufferReader=Y6();ni.util=lu();ni.rpc=Z6();ni.roots=tT();ni.configure=rT;function rT(){ni.util._configure(),ni.Writer._configure(ni.BufferWriter),ni.Reader._configure(ni.BufferReader)}rT()});var pu=ue((L0e,oT)=>{"use strict";h();p();oT.exports=iT()});var cT=ue((Ix,uT)=>{"use strict";h();p();Object.defineProperty(Ix,"__esModule",{value:!0});Ig.BASE=2166136261;function Ig(r,e=Ig.BASE){let t=r.length;for(let n=0;n<t;n++)e^=r.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}Ix.default=Ig;uT.exports=Ig});var UT=ue((sve,Kg)=>{"use strict";h();p();Kg.exports=mY;Kg.exports.format=LT;Kg.exports.parse=NT;var hY=/\B(?=(\d{3})+(?!\d))/g,pY=/(?:\.0*|(\.[^0]+)0+)$/,gu={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},dY=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function mY(r,e){return typeof r=="string"?NT(r):typeof r=="number"?LT(r,e):null}function LT(r,e){if(!Number.isFinite(r))return null;var t=Math.abs(r),n=e&&e.thousandsSeparator||"",i=e&&e.unitSeparator||"",o=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,a=Boolean(e&&e.fixedDecimals),c=e&&e.unit||"";(!c||!gu[c.toLowerCase()])&&(t>=gu.pb?c="PB":t>=gu.tb?c="TB":t>=gu.gb?c="GB":t>=gu.mb?c="MB":t>=gu.kb?c="KB":c="B");var f=r/gu[c.toLowerCase()],d=f.toFixed(o);return a||(d=d.replace(pY,"$1")),n&&(d=d.split(".").map(function(m,w){return w===0?m.replace(hY,n):m}).join(".")),d+i+c}function NT(r){if(typeof r=="number"&&!isNaN(r))return r;if(typeof r!="string")return null;var e=dY.exec(r),t,n="b";return e?(t=parseFloat(e[1]),n=e[4].toLowerCase()):(t=parseInt(r,10),n="b"),isNaN(t)?null:Math.floor(gu[n]*t)}});var KT=ue((cve,MT)=>{"use strict";h();p();MT.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}});var VT=ue((qT,WT)=>{"use strict";h();p();var jg=KT(),{hasOwnProperty:$T}=Object.prototype,{propertyIsEnumerable:yY}=Object,Gl=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),gY=qT,jT={concatArrays:!1,ignoreUndefined:!1},$g=r=>{let e=[];for(let t in r)$T.call(r,t)&&e.push(t);if(Object.getOwnPropertySymbols){let t=Object.getOwnPropertySymbols(r);for(let n of t)yY.call(r,n)&&e.push(n)}return e};function Yl(r){return Array.isArray(r)?wY(r):jg(r)?bY(r):r}function wY(r){let e=r.slice(0,0);return $g(r).forEach(t=>{Gl(e,t,Yl(r[t]))}),e}function bY(r){let e=Object.getPrototypeOf(r)===null?Object.create(null):{};return $g(r).forEach(t=>{Gl(e,t,Yl(r[t]))}),e}var zT=(r,e,t,n)=>(t.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in r&&r[i]!==Object.getPrototypeOf(r)?Gl(r,i,Gx(r[i],e[i],n)):Gl(r,i,Yl(e[i])))}),r),vY=(r,e,t)=>{let n=r.slice(0,0),i=0;return[r,e].forEach(o=>{let a=[];for(let c=0;c<o.length;c++)!$T.call(o,c)||(a.push(String(c)),o===r?Gl(n,i++,o[c]):Gl(n,i++,Yl(o[c])));n=zT(n,o,$g(o).filter(c=>!a.includes(c)),t)}),n};function Gx(r,e,t){return t.concatArrays&&Array.isArray(r)&&Array.isArray(e)?vY(r,e,t):!jg(e)||!jg(r)?Yl(e):zT(r,e,$g(e),t)}WT.exports=function(...r){let e=Gx(Yl(jT),this!==gY&&this||{},jT),t={_:{}};for(let n of r)if(n!==void 0){if(!jg(n))throw new TypeError("`"+n+"` is not an Option Object");t=Gx(t,{_:n},e)}return t._}});var ik=ue((Zve,Xx)=>{"use strict";h();p();var SY=Object.prototype.hasOwnProperty,$n="~";function od(){}Object.create&&(od.prototype=Object.create(null),new od().__proto__||($n=!1));function DY(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function nk(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new DY(t,n||r,i),a=$n?$n+e:e;return r._events[a]?r._events[a].fn?r._events[a]=[r._events[a],o]:r._events[a].push(o):(r._events[a]=o,r._eventsCount++),r}function Hg(r,e){--r._eventsCount===0?r._events=new od:delete r._events[e]}function Cn(){this._events=new od,this._eventsCount=0}Cn.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)SY.call(t,n)&&e.push($n?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Cn.prototype.listeners=function(e){var t=$n?$n+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a};Cn.prototype.listenerCount=function(e){var t=$n?$n+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Cn.prototype.emit=function(e,t,n,i,o,a){var c=$n?$n+e:e;if(!this._events[c])return!1;var f=this._events[c],d=arguments.length,m,w;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),d){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,n),!0;case 4:return f.fn.call(f.context,t,n,i),!0;case 5:return f.fn.call(f.context,t,n,i,o),!0;case 6:return f.fn.call(f.context,t,n,i,o,a),!0}for(w=1,m=new Array(d-1);w<d;w++)m[w-1]=arguments[w];f.fn.apply(f.context,m)}else{var E=f.length,T;for(w=0;w<E;w++)switch(f[w].once&&this.removeListener(e,f[w].fn,void 0,!0),d){case 1:f[w].fn.call(f[w].context);break;case 2:f[w].fn.call(f[w].context,t);break;case 3:f[w].fn.call(f[w].context,t,n);break;case 4:f[w].fn.call(f[w].context,t,n,i);break;default:if(!m)for(T=1,m=new Array(d-1);T<d;T++)m[T-1]=arguments[T];f[w].fn.apply(f[w].context,m)}}return!0};Cn.prototype.on=function(e,t,n){return nk(this,e,t,n,!1)};Cn.prototype.once=function(e,t,n){return nk(this,e,t,n,!0)};Cn.prototype.removeListener=function(e,t,n,i){var o=$n?$n+e:e;if(!this._events[o])return this;if(!t)return Hg(this,o),this;var a=this._events[o];if(a.fn)a.fn===t&&(!i||a.once)&&(!n||a.context===n)&&Hg(this,o);else{for(var c=0,f=[],d=a.length;c<d;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&f.push(a[c]);f.length?this._events[o]=f.length===1?f[0]:f:Hg(this,o)}return this};Cn.prototype.removeAllListeners=function(e){var t;return e?(t=$n?$n+e:e,this._events[t]&&Hg(this,t)):(this._events=new od,this._eventsCount=0),this};Cn.prototype.off=Cn.prototype.removeListener;Cn.prototype.addListener=Cn.prototype.on;Cn.prefixed=$n;Cn.EventEmitter=Cn;typeof Xx<"u"&&(Xx.exports=Cn)});var Mk=ue((Y1e,Uk)=>{h();p();Uk.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var $k=ue((Z1e,jk)=>{h();p();var Kk=Mk();jk.exports=class{constructor(e){this.hwm=e||16,this.head=new Kk(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let t=this.head;this.head=t.next=new Kk(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}});var qk=ue((rEe,zk)=>{h();p();var C1=$k();zk.exports=r=>{r=r||{};let e;typeof r=="function"?(e=r,r={}):e=r.onEnd;let t=new C1,n,i,o,a=()=>{if(!t.isEmpty()){if(r.writev){let U,pe=[];for(;!t.isEmpty();){if(U=t.shift(),U.error)throw U.error;pe.push(U.value)}return{done:U.done,value:pe}}let F=t.shift();if(F.error)throw F.error;return F}return o?{done:!0}:new Promise((F,U)=>{i=pe=>(i=null,pe.error?U(pe.error):r.writev&&!pe.done?F({done:pe.done,value:[pe.value]}):F(pe),n)})},c=F=>i?i(F):(t.push(F),n),f=F=>(t=new C1,i?i({error:F}):(t.push({error:F}),n)),d=F=>o?n:c({done:!1,value:F}),m=F=>o?n:(o=!0,F?f(F):c({done:!0})),w=()=>(t=new C1,m(),{done:!0}),E=F=>(m(F),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:a,return:w,throw:E,push:d,end:m},!e)return n;let T=n;return n={[Symbol.asyncIterator](){return this},next(){return T.next()},throw(F){return T.throw(F),e&&(e(F),e=null),{done:!0}},return(){return T.return(),e&&(e(),e=null),{done:!0}},push:d,end(F){return T.end(F),e&&(e(F),e=null),n}},n}});var I1=ue((oEe,Wk)=>{"use strict";h();p();var $Y=qk(),zY=async function*(...r){let e=$Y();setTimeout(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}},0),yield*e};Wk.exports=zY});var c0=ue((GEe,eF)=>{"use strict";h();p();var tJ=async r=>{for await(let e of r);};eF.exports=tJ});var f0=ue((XEe,tF)=>{"use strict";h();p();var rJ=async function*(r,e){for await(let t of r)await e(t)&&(yield t)};tF.exports=rJ});var l0=ue((ePe,rF)=>{"use strict";h();p();var nJ=async function*(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}};rF.exports=nJ});var B1=ue((nPe,nF)=>{"use strict";h();p();var iJ=async r=>{let e=[];for await(let t of r)e.push(t);return e};nF.exports=iJ});var lF=ue((KPe,fF)=>{"use strict";h();p();var cJ=async function*(r,e){for await(let t of r)yield e(t)};fF.exports=cJ});var mF=ue(dF=>{"use strict";h();p();dF.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var Qo=ue((aDe,yF)=>{"use strict";h();p();yF.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var z1=ue((fDe,gF)=>{"use strict";h();p();var $1=null;gF.exports=function(){return $1===null&&($1={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),$1}});var V1=ue(wF=>{"use strict";h();p();var q1=Qo(),mJ=new Set(["buffer","view","utf8"]),W1=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!mJ.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new q1(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new q1(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new q1(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};wF.Encoding=W1});var J1=ue(g0=>{"use strict";h();p();var{Buffer:G1}=mc()||{},{Encoding:Y1}=V1(),yJ=z1(),vd=class extends Y1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new _d({encode:this.encode,decode:e=>this.decode(G1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},_d=class extends Y1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new vd({encode:e=>{let t=this.encode(e);return G1.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},H1=class extends Y1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new vd({encode:e=>G1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=yJ();return new _d({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};g0.BufferFormat=vd;g0.ViewFormat=_d;g0.UTF8Format=H1});var xF=ue(Zc=>{"use strict";h();p();var{Buffer:In}=mc()||{Buffer:{isBuffer:()=>!1}},{textEncoder:vF,textDecoder:bF}=z1()(),{BufferFormat:xd,ViewFormat:X1,UTF8Format:_F}=J1(),w0=r=>r;Zc.utf8=new _F({encode:function(r){return In.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?bF.decode(r):String(r)},decode:w0,name:"utf8",createViewTranscoder(){return new X1({encode:function(r){return ArrayBuffer.isView(r)?r:vF.encode(r)},decode:function(r){return bF.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new xd({encode:function(r){return In.isBuffer(r)?r:ArrayBuffer.isView(r)?In.from(r.buffer,r.byteOffset,r.byteLength):In.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});Zc.json=new _F({encode:JSON.stringify,decode:JSON.parse,name:"json"});Zc.buffer=new xd({encode:function(r){return In.isBuffer(r)?r:ArrayBuffer.isView(r)?In.from(r.buffer,r.byteOffset,r.byteLength):In.from(String(r),"utf8")},decode:w0,name:"buffer",createViewTranscoder(){return new X1({encode:function(r){return ArrayBuffer.isView(r)?r:In.from(String(r),"utf8")},decode:function(r){return In.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});Zc.view=new X1({encode:function(r){return ArrayBuffer.isView(r)?r:vF.encode(r)},decode:w0,name:"view",createBufferTranscoder(){return new xd({encode:function(r){return In.isBuffer(r)?r:ArrayBuffer.isView(r)?In.from(r.buffer,r.byteOffset,r.byteLength):In.from(String(r),"utf8")},decode:w0,name:`${this.name}+buffer`})}});Zc.hex=new xd({encode:function(r){return In.isBuffer(r)?r:In.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});Zc.base64=new xd({encode:function(r){return In.isBuffer(r)?r:In.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var SF=ue(PF=>{"use strict";h();p();var EF=Qo(),v0=xF(),{Encoding:gJ}=V1(),{BufferFormat:wJ,ViewFormat:bJ,UTF8Format:vJ}=J1(),Ed=Symbol("formats"),b0=Symbol("encodings"),_J=new Set(["buffer","view","utf8"]),Q1=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>_J.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[b0]=new Map,this[Ed]=new Set(e);for(let t in v0)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[b0].values()))}encoding(e){let t=this[b0].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=SJ[e],!t)throw new EF(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=xJ(e)}let{name:n,format:i}=t;if(!this[Ed].has(i))if(this[Ed].has("view"))t=t.createViewTranscoder();else if(this[Ed].has("buffer"))t=t.createBufferTranscoder();else if(this[Ed].has("utf8"))t=t.createUTF8Transcoder();else throw new EF(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[b0].set(o,t)}return t}};PF.Transcoder=Q1;function xJ(r){if(r instanceof gJ)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${DJ++}`;switch(EJ(r)){case"view":return new bJ({...r,name:t});case"utf8":return new vJ({...r,name:t});case"buffer":return new wJ({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function EJ(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var PJ={binary:v0.buffer,"utf-8":v0.utf8},SJ={...v0,...PJ},DJ=0});var LF=ue((SDe,Z1)=>{"use strict";h();p();var rh=typeof Reflect=="object"?Reflect:null,DF=rh&&typeof rh.apply=="function"?rh.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},_0;rh&&typeof rh.ownKeys=="function"?_0=rh.ownKeys:Object.getOwnPropertySymbols?_0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:_0=function(e){return Object.getOwnPropertyNames(e)};function AJ(r){console&&console.warn&&console.warn(r)}var CF=Number.isNaN||function(e){return e!==e};function rr(){rr.init.call(this)}Z1.exports=rr;Z1.exports.once=kJ;rr.EventEmitter=rr;rr.prototype._events=void 0;rr.prototype._eventsCount=0;rr.prototype._maxListeners=void 0;var AF=10;function x0(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(rr,"defaultMaxListeners",{enumerable:!0,get:function(){return AF},set:function(r){if(typeof r!="number"||r<0||CF(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");AF=r}});rr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};rr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||CF(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function IF(r){return r._maxListeners===void 0?rr.defaultMaxListeners:r._maxListeners}rr.prototype.getMaxListeners=function(){return IF(this)};rr.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var f=o[e];if(f===void 0)return!1;if(typeof f=="function")DF(f,this,t);else for(var d=f.length,m=BF(f,d),n=0;n<d;++n)DF(m[n],this,t);return!0};function TF(r,e,t,n){var i,o,a;if(x0(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),a=o[e]),a===void 0)a=o[e]=t,++r._eventsCount;else if(typeof a=="function"?a=o[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),i=IF(r),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=r,c.type=e,c.count=a.length,AJ(c)}return r}rr.prototype.addListener=function(e,t){return TF(this,e,t,!1)};rr.prototype.on=rr.prototype.addListener;rr.prototype.prependListener=function(e,t){return TF(this,e,t,!0)};function CJ(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function kF(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=CJ.bind(n);return i.listener=t,n.wrapFn=i,i}rr.prototype.once=function(e,t){return x0(t),this.on(e,kF(this,e,t)),this};rr.prototype.prependOnceListener=function(e,t){return x0(t),this.prependListener(e,kF(this,e,t)),this};rr.prototype.removeListener=function(e,t){var n,i,o,a,c;if(x0(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){c=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():IJ(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};rr.prototype.off=rr.prototype.removeListener;rr.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function FF(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?TJ(i):BF(i,i.length)}rr.prototype.listeners=function(e){return FF(this,e,!0)};rr.prototype.rawListeners=function(e){return FF(this,e,!1)};rr.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):RF.call(r,e)};rr.prototype.listenerCount=RF;function RF(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}rr.prototype.eventNames=function(){return this._eventsCount>0?_0(this._events):[]};function BF(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function IJ(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function TJ(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function kJ(r,e){return new Promise(function(t,n){function i(a){r.removeListener(e,o),n(a)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}OF(r,e,o,{once:!0}),e!=="error"&&FJ(r,i,{once:!0})})}function FJ(r,e,t){typeof r.on=="function"&&OF(r,"error",e,t)}function OF(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var UF=ue((CDe,NF)=>{h();p();NF.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var Pd=ue(eE=>{"use strict";h();p();var MF=UF();eE.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,a){o?i(o):n(a)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};eE.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){MF(()=>e(null,t))}).catch(function(t){MF(()=>e(t))})}});var E0=ue(tE=>{"use strict";h();p();tE.getCallback=function(r,e){return typeof r=="function"?r:e};tE.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var Tu=ue(A0=>{"use strict";h();p();var{fromCallback:rE}=Pd(),Oi=Qo(),{getOptions:nE,getCallback:KF}=E0(),ef=Symbol("promise"),nh=Symbol("callback"),Is=Symbol("working"),tf=Symbol("handleOne"),ga=Symbol("handleMany"),iE=Symbol("autoClose"),Cu=Symbol("finishWork"),Ts=Symbol("returnMany"),Su=Symbol("closing"),Sd=Symbol("handleClose"),P0=Symbol("closed"),Dd=Symbol("closeCallbacks"),Au=Symbol("keyEncoding"),rf=Symbol("valueEncoding"),oE=Symbol("abortOnClose"),S0=Symbol("legacy"),sE=Symbol("keys"),aE=Symbol("values"),Du=Symbol("limit"),po=Symbol("count"),D0=Object.freeze({}),RJ=()=>{},jF=!1,Ad=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[P0]=!1,this[Dd]=[],this[Is]=!1,this[Su]=!1,this[iE]=!1,this[nh]=null,this[tf]=this[tf].bind(this),this[ga]=this[ga].bind(this),this[Sd]=this[Sd].bind(this),this[Au]=t[Au],this[rf]=t[rf],this[S0]=n,this[Du]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[po]=0,this[oE]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[po]}get limit(){return this[Du]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,a,c)=>{o?i(o):this[S0]?a===void 0&&c===void 0?n():n([a,c]):n(a)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Su]?this.nextTick(e,new Oi("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Is]?this.nextTick(e,new Oi("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Is]=!0,this[nh]=e,this[po]>=this[Du]?this.nextTick(this[tf],null):this._next(this[tf])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=KF(t,n),n=rE(n,ef),t=nE(t,D0),Number.isInteger(e)?(this[Su]?this.nextTick(n,new Oi("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Is]?this.nextTick(n,new Oi("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Du]<1/0&&(e=Math.min(e,this[Du]-this[po])),this[Is]=!0,this[nh]=n,e<=0?this.nextTick(this[ga],null,[]):this._nextv(e,t,this[ga])),n[ef]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[ef])}_nextv(e,t,n){let i=[],o=(a,c,f)=>{if(a)return n(a);if(this[S0]?c===void 0&&f===void 0:c===void 0)return n(null,i);i.push(this[S0]?[c,f]:c),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=KF(e,t),t=rE(t,ef),e=nE(e,D0),this[Su]?this.nextTick(t,new Oi("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Is]?this.nextTick(t,new Oi("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Is]=!0,this[nh]=t,this[iE]=!0,this[po]>=this[Du]?this.nextTick(this[ga],null,[]):this._all(e,this[ga])),t[ef]}_all(e,t){let n=this[po],i=[],o=()=>{let c=this[Du]<1/0?Math.min(1e3,this[Du]-n):1e3;c<=0?this.nextTick(t,null,i):this._nextv(c,D0,a)},a=(c,f)=>{c?t(c):f.length===0?t(null,i):(i.push.apply(i,f),n+=f.length,o())};o()}[Cu](){let e=this[nh];return this[oE]&&e===null?RJ:(this[Is]=!1,this[nh]=null,this[Su]&&this._close(this[Sd]),e)}[Ts](e,t,n){this[iE]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=nE(t,D0),!this[Su]){if(this[Is])throw new Oi("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[Au]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new Oi("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=rE(e,ef),this[P0]?this.nextTick(e):this[Su]?this[Dd].push(e):(this[Su]=!0,this[Dd].push(e),this[Is]?this[oE]&&this[Cu]()(new Oi("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Sd])),e[ef]}_close(e){this.nextTick(e)}[Sd](){this[P0]=!0,this.db.detachResource(this);let e=this[Dd];this[Dd]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[P0]||await this.close()}}},ih=class extends Ad{constructor(e,t){super(e,t,!0),this[sE]=t.keys!==!1,this[aE]=t.values!==!1}[tf](e,t,n){let i=this[Cu]();if(e)return i(e);try{t=this[sE]&&t!==void 0?this[Au].decode(t):void 0,n=this[aE]&&n!==void 0?this[rf].decode(n):void 0}catch(o){return i(new Iu("entry",o))}t===void 0&&n===void 0||this[po]++,i(null,t,n)}[ga](e,t){let n=this[Cu]();if(e)return this[Ts](n,e);try{for(let i of t){let o=i[0],a=i[1];i[0]=this[sE]&&o!==void 0?this[Au].decode(o):void 0,i[1]=this[aE]&&a!==void 0?this[rf].decode(a):void 0}}catch(i){return this[Ts](n,new Iu("entries",i))}this[po]+=t.length,this[Ts](n,null,t)}end(e){return!jF&&typeof console<"u"&&(jF=!0,console.warn(new Oi("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},uE=class extends Ad{constructor(e,t){super(e,t,!1)}[tf](e,t){let n=this[Cu]();if(e)return n(e);try{t=t!==void 0?this[Au].decode(t):void 0}catch(i){return n(new Iu("key",i))}t!==void 0&&this[po]++,n(null,t)}[ga](e,t){let n=this[Cu]();if(e)return this[Ts](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Au].decode(o):void 0}}catch(i){return this[Ts](n,new Iu("keys",i))}this[po]+=t.length,this[Ts](n,null,t)}},cE=class extends Ad{constructor(e,t){super(e,t,!1)}[tf](e,t){let n=this[Cu]();if(e)return n(e);try{t=t!==void 0?this[rf].decode(t):void 0}catch(i){return n(new Iu("value",i))}t!==void 0&&this[po]++,n(null,t)}[ga](e,t){let n=this[Cu]();if(e)return this[Ts](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[rf].decode(o):void 0}}catch(i){return this[Ts](n,new Iu("values",i))}this[po]+=t.length,this[Ts](n,null,t)}},Iu=class extends Oi{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(ih.prototype,r.split(" ")[0],{get(){throw new Oi(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Oi(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});ih.keyEncoding=Au;ih.valueEncoding=rf;A0.AbstractIterator=ih;A0.AbstractKeyIterator=uE;A0.AbstractValueIterator=cE});var $F=ue(fE=>{"use strict";h();p();var{AbstractKeyIterator:BJ,AbstractValueIterator:OJ}=Tu(),nf=Symbol("iterator"),Cd=Symbol("callback"),oh=Symbol("handleOne"),of=Symbol("handleMany"),Id=class extends BJ{constructor(e,t){super(e,t),this[nf]=e.iterator({...t,keys:!0,values:!1}),this[oh]=this[oh].bind(this),this[of]=this[of].bind(this)}},C0=class extends OJ{constructor(e,t){super(e,t),this[nf]=e.iterator({...t,keys:!1,values:!0}),this[oh]=this[oh].bind(this),this[of]=this[of].bind(this)}};for(let r of[Id,C0]){let e=r===Id,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[Cd]=n,this[nf].next(this[oh])},r.prototype[oh]=function(n,i,o){let a=this[Cd];n?a(n):a(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[Cd]=o,this[nf].nextv(n,i,this[of])},r.prototype._all=function(n,i){this[Cd]=i,this[nf].all(n,this[of])},r.prototype[of]=function(n,i){let o=this[Cd];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[nf].seek(n,i)},r.prototype._close=function(n){this[nf].close(n)}}fE.DefaultKeyIterator=Id;fE.DefaultValueIterator=C0});var zF=ue(B0=>{"use strict";h();p();var{AbstractIterator:LJ,AbstractKeyIterator:NJ,AbstractValueIterator:UJ}=Tu(),lE=Qo(),si=Symbol("nut"),F0=Symbol("undefer"),R0=Symbol("factory"),I0=class extends LJ{constructor(e,t){super(e,t),this[si]=null,this[R0]=()=>e.iterator(t),this.db.defer(()=>this[F0]())}},T0=class extends NJ{constructor(e,t){super(e,t),this[si]=null,this[R0]=()=>e.keys(t),this.db.defer(()=>this[F0]())}},k0=class extends UJ{constructor(e,t){super(e,t),this[si]=null,this[R0]=()=>e.values(t),this.db.defer(()=>this[F0]())}};for(let r of[I0,T0,k0])r.prototype[F0]=function(){this.db.status==="open"&&(this[si]=this[R0]())},r.prototype._next=function(e){this[si]!==null?this[si].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new lE("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[si]!==null?this[si].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new lE("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[si]!==null?this[si].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new lE("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[si]!==null?this[si]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[si]!==null?this[si].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};B0.DeferredIterator=I0;B0.DeferredKeyIterator=T0;B0.DeferredValueIterator=k0});var pE=ue(WF=>{"use strict";h();p();var{fromCallback:qF}=Pd(),O0=Qo(),{getCallback:MJ,getOptions:KJ}=E0(),L0=Symbol("promise"),mo=Symbol("status"),sh=Symbol("operations"),Td=Symbol("finishClose"),ah=Symbol("closeCallbacks"),hE=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[sh]=[],this[ah]=[],this[mo]="open",this[Td]=this[Td].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[sh].length}put(e,t,n){if(this[mo]!=="open")throw new O0("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,a=n,c=o.keyEncoding(n&&n.keyEncoding),f=o.valueEncoding(n&&n.valueEncoding),d=c.format;n={...n,keyEncoding:d,valueEncoding:f.format},o!==this.db&&(n.sublevel=null);let m=o.prefixKey(c.encode(e),d),w=f.encode(t);return this._put(m,w,n),this[sh].push({...a,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[mo]!=="open")throw new O0("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,a=i.keyEncoding(t&&t.keyEncoding),c=a.format;return t={...t,keyEncoding:c},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(a.encode(e),c),t),this[sh].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[mo]!=="open")throw new O0("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[sh]=[],this}_clear(){}write(e,t){return t=MJ(e,t),t=qF(t,L0),e=KJ(e),this[mo]!=="open"?this.nextTick(t,new O0("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[mo]="writing",this._write(e,n=>{this[mo]="closing",this[ah].push(()=>t(n)),n||this.db.emit("batch",this[sh]),this._close(this[Td])})),t[L0]}_write(e,t){}close(e){return e=qF(e,L0),this[mo]==="closing"?this[ah].push(e):this[mo]==="closed"?this.nextTick(e):(this[ah].push(e),this[mo]!=="writing"&&(this[mo]="closing",this._close(this[Td]))),e[L0]}_close(e){this.nextTick(e)}[Td](){this[mo]="closed",this.db.detachResource(this);let e=this[ah];this[ah]=[];for(let t of e)t()}};WF.AbstractChainedBatch=hE});var HF=ue(VF=>{"use strict";h();p();var{AbstractChainedBatch:jJ}=pE(),$J=Qo(),uh=Symbol("encoded"),dE=class extends jJ{constructor(e){super(e),this[uh]=[]}_put(e,t,n){this[uh].push({...n,type:"put",key:e,value:t})}_del(e,t){this[uh].push({...t,type:"del",key:e})}_clear(){this[uh]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[uh].length===0?this.nextTick(t):this.db._batch(this[uh],e,t):this.nextTick(t,new $J("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};VF.DefaultChainedBatch=dE});var JF=ue((QDe,YF)=>{"use strict";h();p();var GF=Qo(),zJ=Object.prototype.hasOwnProperty,qJ=new Set(["lt","lte","gt","gte"]);YF.exports=function(r,e){let t={};for(let n in r)if(!!zJ.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new GF(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new GF("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});qJ.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var mE=ue((t2e,QF)=>{h();p();var XF;QF.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):r=>(XF||(XF=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var tR=ue((i2e,eR)=>{"use strict";h();p();var ZF=mE();eR.exports=function(r,...e){e.length===0?ZF(r):ZF(()=>r(...e))}});var rR=ue(N0=>{"use strict";h();p();var{AbstractIterator:WJ,AbstractKeyIterator:VJ,AbstractValueIterator:HJ}=Tu(),ch=Symbol("unfix"),Zo=Symbol("iterator"),sf=Symbol("handleOne"),ku=Symbol("handleMany"),wa=Symbol("callback"),kd=class extends WJ{constructor(e,t,n,i){super(e,t),this[Zo]=n,this[ch]=i,this[sf]=this[sf].bind(this),this[ku]=this[ku].bind(this),this[wa]=null}[sf](e,t,n){let i=this[wa];if(e)return i(e);t!==void 0&&(t=this[ch](t)),i(e,t,n)}[ku](e,t){let n=this[wa];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[ch](o))}n(e,t)}},Fd=class extends VJ{constructor(e,t,n,i){super(e,t),this[Zo]=n,this[ch]=i,this[sf]=this[sf].bind(this),this[ku]=this[ku].bind(this),this[wa]=null}[sf](e,t){let n=this[wa];if(e)return n(e);t!==void 0&&(t=this[ch](t)),n(e,t)}[ku](e,t){let n=this[wa];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[ch](o))}n(e,t)}},Rd=class extends HJ{constructor(e,t,n){super(e,t),this[Zo]=n}};for(let r of[kd,Fd])r.prototype._next=function(e){this[wa]=e,this[Zo].next(this[sf])},r.prototype._nextv=function(e,t,n){this[wa]=n,this[Zo].nextv(e,t,this[ku])},r.prototype._all=function(e,t){this[wa]=t,this[Zo].all(e,this[ku])};for(let r of[Rd])r.prototype._next=function(e){this[Zo].next(e)},r.prototype._nextv=function(e,t,n){this[Zo].nextv(e,t,n)},r.prototype._all=function(e,t){this[Zo].all(e,t)};for(let r of[kd,Fd,Rd])r.prototype._seek=function(e,t){this[Zo].seek(e,t)},r.prototype._close=function(e){this[Zo].close(e)};N0.AbstractSublevelIterator=kd;N0.AbstractSublevelKeyIterator=Fd;N0.AbstractSublevelValueIterator=Rd});var sR=ue((f2e,oR)=>{"use strict";h();p();var yE=Qo(),{Buffer:bE}=mc()||{},{AbstractSublevelIterator:GJ,AbstractSublevelKeyIterator:YJ,AbstractSublevelValueIterator:JJ}=rR(),ba=Symbol("prefix"),nR=Symbol("upperBound"),Bd=Symbol("prefixRange"),Li=Symbol("parent"),gE=Symbol("unfix"),iR=new TextEncoder,XJ={separator:"!"};oR.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new yE("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new yE("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?XJ:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:a,manifest:c,...f}=e.defaults(o);i=ZJ(i,a);let d=a.charCodeAt(0)+1,m=n[Li]||n;if(!iR.encode(i).every(T=>T>d&&T<127))throw new yE(`Prefix must use bytes > ${d} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(QJ(m,c),f);let w=(n.prefix||"")+a+i+a,E=w.slice(0,-1)+String.fromCharCode(d);this[Li]=m,this[ba]=new U0(w),this[nR]=new U0(E),this[gE]=new vE,this.nextTick=m.nextTick}prefixKey(n,i){if(i==="utf8")return this[ba].utf8+n;if(n.byteLength===0)return this[ba][i];if(i==="view"){let o=this[ba].view,a=new Uint8Array(o.byteLength+n.byteLength);return a.set(o,0),a.set(n,o.byteLength),a}else{let o=this[ba].buffer;return bE.concat([o,n],o.byteLength+n.byteLength)}}[Bd](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[ba][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[nR][i]}get prefix(){return this[ba].utf8}get db(){return this[Li]}_open(n,i){this[Li].open({passive:!0},i)}_put(n,i,o,a){this[Li].put(n,i,o,a)}_get(n,i,o){this[Li].get(n,i,o)}_getMany(n,i,o){this[Li].getMany(n,i,o)}_del(n,i,o){this[Li].del(n,i,o)}_batch(n,i,o){this[Li].batch(n,i,o)}_clear(n,i){this[Bd](n,n.keyEncoding),this[Li].clear(n,i)}_iterator(n){this[Bd](n,n.keyEncoding);let i=this[Li].iterator(n),o=this[gE].get(this[ba].utf8.length,n.keyEncoding);return new GJ(this,n,i,o)}_keys(n){this[Bd](n,n.keyEncoding);let i=this[Li].keys(n),o=this[gE].get(this[ba].utf8.length,n.keyEncoding);return new YJ(this,n,i,o)}_values(n){this[Bd](n,n.keyEncoding);let i=this[Li].values(n);return new JJ(this,n,i)}}return{AbstractSublevel:e}};var QJ=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:wE(r,"utf8"),buffer:wE(r,"buffer"),view:wE(r,"view")}}},wE=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},U0=class{constructor(e){this.utf8=e,this.view=iR.encode(e),this.buffer=bE?bE.from(this.view.buffer,0,this.view.byteLength):{}}},vE=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},ZJ=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var SE=ue(PE=>{"use strict";h();p();var{supports:eX}=mF(),{Transcoder:tX}=SF(),{EventEmitter:rX}=LF(),{fromCallback:Fu}=Pd(),es=Qo(),{AbstractIterator:af}=Tu(),{DefaultKeyIterator:nX,DefaultValueIterator:iX}=$F(),{DeferredIterator:oX,DeferredKeyIterator:sX,DeferredValueIterator:aX}=zF(),{DefaultChainedBatch:aR}=HF(),{getCallback:uf,getOptions:Ru}=E0(),M0=JF(),St=Symbol("promise"),va=Symbol("landed"),cf=Symbol("resources"),_E=Symbol("closeResources"),Od=Symbol("operations"),Ld=Symbol("undefer"),K0=Symbol("deferOpen"),uR=Symbol("options"),Ft=Symbol("status"),ff=Symbol("defaultOptions"),fh=Symbol("transcoder"),j0=Symbol("keyEncoding"),xE=Symbol("valueEncoding"),uX=()=>{},Nd=class extends rX{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=Ru(t);let{keyEncoding:n,valueEncoding:i,passive:o,...a}=t;this[cf]=new Set,this[Od]=[],this[K0]=!0,this[uR]=a,this[Ft]="opening",this.supports=eX(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[fh]=new tX(cX(this)),this[j0]=this[fh].encoding(n||"utf8"),this[xE]=this[fh].encoding(i||"utf8");for(let c of this[fh].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[ff]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[j0].commonName,valueEncoding:this[xE].commonName}),key:Object.freeze({keyEncoding:this[j0].commonName})},this.nextTick(()=>{this[K0]&&this.open({passive:!1},uX)})}get status(){return this[Ft]}keyEncoding(e){return this[fh].encoding(e??this[j0])}valueEncoding(e){return this[fh].encoding(e??this[xE])}open(e,t){t=uf(e,t),t=Fu(t,St),e={...this[uR],...Ru(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[Ft]==="closing"||this[Ft]==="opening"?this.once(va,i?()=>n(i):n):this[Ft]!=="open"?t(new es("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[Ft]==="opening"?this.once(va,n):this.nextTick(n):this[Ft]==="closed"||this[K0]?(this[K0]=!1,this[Ft]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[Ft]="closed",this[_E](()=>{this.emit(va),n(i)}),this[Ld]();return}this[Ft]="open",this[Ld](),this.emit(va),this[Ft]==="open"&&this.emit("open"),this[Ft]==="open"&&this.emit("ready"),n()})):this[Ft]==="open"?this.nextTick(n):this.once(va,()=>this.open(e,t)),t[St]}_open(e,t){this.nextTick(t)}close(e){e=Fu(e,St);let t=n=>{this[Ft]==="opening"||this[Ft]==="closing"?this.once(va,n?t(n):t):this[Ft]!=="closed"?e(new es("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[Ft]==="open"){this[Ft]="closing",this.emit("closing");let n=i=>{this[Ft]="open",this[Ld](),this.emit(va),t(i)};this[_E](()=>{this._close(i=>{if(i)return n(i);this[Ft]="closed",this[Ld](),this.emit(va),this[Ft]==="closed"&&this.emit("closed"),t()})})}else this[Ft]==="closed"?this.nextTick(t):this.once(va,()=>this.close(e));return e[St]}[_E](e){if(this[cf].size===0)return this.nextTick(e);let t=this[cf].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[cf])o.close(i);n=!1,this[cf].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=uf(t,n),n=Fu(n,St),t=Ru(t,this[ff].entry),this[Ft]==="opening")return this.defer(()=>this.get(e,t,n)),n[St];if(lh(this,n))return n[St];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[St];let o=this.keyEncoding(t.keyEncoding),a=this.valueEncoding(t.valueEncoding),c=o.format,f=a.format;return(t.keyEncoding!==c||t.valueEncoding!==f)&&(t=Object.assign({},t,{keyEncoding:c,valueEncoding:f})),this._get(this.prefixKey(o.encode(e),c),t,(d,m)=>{if(d)return(d.code==="LEVEL_NOT_FOUND"||d.notFound||/NotFound/i.test(d))&&(d.code||(d.code="LEVEL_NOT_FOUND"),d.notFound||(d.notFound=!0),d.status||(d.status=404)),n(d);try{m=a.decode(m)}catch(w){return n(new es("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:w}))}n(null,m)}),n[St]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=uf(t,n),n=Fu(n,St),t=Ru(t,this[ff].entry),this[Ft]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[St];if(lh(this,n))return n[St];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[St];if(e.length===0)return this.nextTick(n,null,[]),n[St];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),a=i.format,c=o.format;(t.keyEncoding!==a||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:a,valueEncoding:c}));let f=new Array(e.length);for(let d=0;d<e.length;d++){let m=e[d],w=this._checkKey(m);if(w)return this.nextTick(n,w),n[St];f[d]=this.prefixKey(i.encode(m),a)}return this._getMany(f,t,(d,m)=>{if(d)return n(d);try{for(let w=0;w<m.length;w++)m[w]!==void 0&&(m[w]=o.decode(m[w]))}catch(w){return n(new es(`Could not decode one or more of ${m.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:w}))}n(null,m)}),n[St]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=uf(n,i),i=Fu(i,St),n=Ru(n,this[ff].entry),this[Ft]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[St];if(lh(this,i))return i[St];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[St];let a=this.keyEncoding(n.keyEncoding),c=this.valueEncoding(n.valueEncoding),f=a.format,d=c.format;(n.keyEncoding!==f||n.valueEncoding!==d)&&(n=Object.assign({},n,{keyEncoding:f,valueEncoding:d}));let m=this.prefixKey(a.encode(e),f),w=c.encode(t);return this._put(m,w,n,E=>{if(E)return i(E);this.emit("put",e,t),i()}),i[St]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=uf(t,n),n=Fu(n,St),t=Ru(t,this[ff].key),this[Ft]==="opening")return this.defer(()=>this.del(e,t,n)),n[St];if(lh(this,n))return n[St];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[St];let o=this.keyEncoding(t.keyEncoding),a=o.format;return t.keyEncoding!==a&&(t=Object.assign({},t,{keyEncoding:a})),this._del(this.prefixKey(o.encode(e),a),t,c=>{if(c)return n(c);this.emit("del",e),n()}),n[St]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[Ft]==="opening")return new aR(this);if(this[Ft]!=="open")throw new es("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=uf(t,n),n=Fu(n,St),t=Ru(t,this[ff].empty),this[Ft]==="opening")return this.defer(()=>this.batch(e,t,n)),n[St];if(lh(this,n))return n[St];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[St];if(e.length===0)return this.nextTick(n),n[St];let i=new Array(e.length),{keyEncoding:o,valueEncoding:a,...c}=t;for(let f=0;f<e.length;f++){if(typeof e[f]!="object"||e[f]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[St];let d=Object.assign({},e[f]);if(d.type!=="put"&&d.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[St];let m=this._checkKey(d.key);if(m)return this.nextTick(n,m),n[St];let w=d.sublevel!=null?d.sublevel:this,E=w.keyEncoding(d.keyEncoding||o),T=E.format;if(d.key=w.prefixKey(E.encode(d.key),T),d.keyEncoding=T,d.type==="put"){let F=this._checkValue(d.value);if(F)return this.nextTick(n,F),n[St];let U=w.valueEncoding(d.valueEncoding||a);d.value=U.encode(d.value),d.valueEncoding=U.format}w!==this&&(d.sublevel=null),i[f]=d}return this._batch(i,c,f=>{if(f)return n(f);this.emit("batch",e),n()}),n[St]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,EE.defaults(t))}_sublevel(e,t){return new EE(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=uf(e,t),t=Fu(t,St),e=Ru(e,this[ff].empty),this[Ft]==="opening")return this.defer(()=>this.clear(e,t)),t[St];if(lh(this,t))return t[St];let n=e,i=this.keyEncoding(e.keyEncoding);return e=M0(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[St]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=M0(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[af.keyEncoding]=t,e[af.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ft]==="opening")return new oX(this,e);if(this[Ft]!=="open")throw new es("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new af(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=M0(e,t),e[af.keyEncoding]=t,e[af.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ft]==="opening")return new sX(this,e);if(this[Ft]!=="open")throw new es("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new nX(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=M0(e,t),e[af.keyEncoding]=t,e[af.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Ft]==="opening")return new aX(this,e);if(this[Ft]!=="open")throw new es("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new iX(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Od].push(e)}[Ld](){if(this[Od].length===0)return;let e=this[Od];this[Od]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[cf].add(e)}detachResource(e){this[cf].delete(e)}_chainedBatch(){return new aR(this)}_checkKey(e){if(e==null)return new es("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new es("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Nd.prototype.nextTick=tR();var{AbstractSublevel:EE}=sR()({AbstractLevel:Nd});PE.AbstractLevel=Nd;PE.AbstractSublevel=EE;var lh=function(r,e){return r[Ft]!=="open"?(r.nextTick(e,new es("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},cX=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var DE=ue(lf=>{"use strict";h();p();lf.AbstractLevel=SE().AbstractLevel;lf.AbstractSublevel=SE().AbstractSublevel;lf.AbstractIterator=Tu().AbstractIterator;lf.AbstractKeyIterator=Tu().AbstractKeyIterator;lf.AbstractValueIterator=Tu().AbstractValueIterator;lf.AbstractChainedBatch=pE().AbstractChainedBatch});var fR=ue((b2e,cR)=>{h();p();cR.exports=lX;var fX=mE();function lX(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,a,c,f=!0,d;Array.isArray(r)?(n=[],o=i=r.length):(a=Object.keys(r),n={},o=i=a.length);function m(E){function T(){t&&t(E,n),t=null}f?fX(T):T()}function w(E,T,F){if(n[E]=F,T&&(c=!0),--o===0||T)m(T);else if(!c&&d<i){let U;a?(U=a[d],d+=1,r[U](function(pe,he){w(U,pe,he)})):(U=d,d+=1,r[U](function(pe,he){w(U,pe,he)}))}}d=e,o?a?a.some(function(E,T){return r[E](function(F,U){w(E,F,U)}),T===e-1}):r.some(function(E,T){return E(function(F,U){w(T,F,U)}),T===e-1}):m(null),f=!1}});var AE=ue((x2e,lR)=>{"use strict";h();p();lR.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var CE=ue((S2e,hR)=>{"use strict";h();p();var hX=new TextEncoder;hR.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):hX.encode(r)}});var gR=ue(yR=>{"use strict";h();p();var{AbstractIterator:pX}=DE(),pR=AE(),$0=CE(),ks=Symbol("cache"),_a=Symbol("finished"),Ni=Symbol("options"),xa=Symbol("currentOptions"),hf=Symbol("position"),IE=Symbol("location"),hh=Symbol("first"),dR={},TE=class extends pX{constructor(e,t,n){super(e,n),this[ks]=[],this[_a]=this.limit===0,this[Ni]=n,this[xa]={...n},this[hf]=void 0,this[IE]=t,this[hh]=!0}_nextv(e,t,n){if(this[hh]=!1,this[_a])return this.nextTick(n,null,[]);if(this[ks].length>0)return e=Math.min(e,this[ks].length),this.nextTick(n,null,this[ks].splice(0,e));this[hf]!==void 0&&(this[Ni].reverse?(this[xa].lt=this[hf],this[xa].lte=void 0):(this[xa].gt=this[hf],this[xa].gte=void 0));let i;try{i=pR(this[xa])}catch{return this[_a]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[IE]],"readonly"),a=o.objectStore(this[IE]),c=[];if(this[Ni].reverse){let f=!this[Ni].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[f](i,"prev").onsuccess=d=>{let m=d.target.result;if(m){let{key:w,value:E}=m;this[hf]=w,c.push([this[Ni].keys&&w!==void 0?$0(w):void 0,this[Ni].values&&E!==void 0?$0(E):void 0]),c.length<e?m.continue():mR(o)}else this[_a]=!0}}else{let f,d,m=()=>{if(f===void 0||d===void 0)return;let w=Math.max(f.length,d.length);w===0||e===1/0?this[_a]=!0:this[hf]=f[w-1],c.length=w;for(let E=0;E<w;E++){let T=f[E],F=d[E];c[E]=[this[Ni].keys&&T!==void 0?$0(T):void 0,this[Ni].values&&F!==void 0?$0(F):void 0]}mR(o)};this[Ni].keys||e<1/0?a.getAllKeys(i,e<1/0?e:void 0).onsuccess=w=>{f=w.target.result,m()}:(f=[],this.nextTick(m)),this[Ni].values?a.getAll(i,e<1/0?e:void 0).onsuccess=w=>{d=w.target.result,m()}:(d=[],this.nextTick(m))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,c),n=null}}_next(e){if(this[ks].length>0){let[t,n]=this[ks].shift();this.nextTick(e,null,t,n)}else if(this[_a])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[hh]&&(this[hh]=!1,t=1),this._nextv(t,dR,(n,i)=>{if(n)return e(n);this[ks]=i,this._next(e)})}}_all(e,t){this[hh]=!1;let n=this[ks].splice(0,this[ks].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,dR,(o,a)=>{if(o)return t(o);n.length>0&&(a=n.concat(a)),t(null,a)})}_seek(e,t){this[hh]=!0,this[ks]=[],this[_a]=!1,this[hf]=void 0,this[xa]={...this[Ni]};let n;try{n=pR(this[Ni])}catch{this[_a]=!0;return}n!==null&&!n.includes(e)?this[_a]=!0:this[Ni].reverse?this[xa].lte=e:this[xa].gte=e}};yR.Iterator=TE;function mR(r){typeof r.commit=="function"&&r.commit()}});var bR=ue((k2e,wR)=>{"use strict";h();p();wR.exports=function(e,t,n,i,o){if(i.limit===0)return e.nextTick(o);let a=e.db.transaction([t],"readwrite"),c=a.objectStore(t),f=0;a.oncomplete=function(){o()},a.onabort=function(){o(a.error||new Error("aborted by user"))};let d=c.openKeyCursor?"openKeyCursor":"openCursor",m=i.reverse?"prev":"next";c[d](n,m).onsuccess=function(w){let E=w.target.result;E&&(c.delete(E.key).onsuccess=function(){(i.limit<=0||++f<i.limit)&&E.continue()})}}});var SR=ue(PR=>{"use strict";h();p();var{AbstractLevel:dX}=DE(),vR=Qo(),mX=fR(),{fromCallback:yX}=Pd(),{Iterator:gX}=gR(),_R=CE(),wX=bR(),bX=AE(),ER="level-js-",Ud=Symbol("idb"),kE=Symbol("namePrefix"),Ea=Symbol("location"),FE=Symbol("version"),pf=Symbol("store"),Md=Symbol("onComplete"),xR=Symbol("promise"),z0=class extends dX{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new vR("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...a}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof e!="string")throw new Error("constructor requires a location string argument");this[Ea]=e,this[kE]=i??ER,this[FE]=parseInt(o||1,10),this[Ud]=null}get location(){return this[Ea]}get namePrefix(){return this[kE]}get version(){return this[FE]}get db(){return this[Ud]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[kE]+this[Ea],this[FE]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Ud]=n.result,t()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[Ea])||o.createObjectStore(this[Ea])}}[pf](e){return this[Ud].transaction([this[Ea]],e).objectStore(this[Ea])}[Md](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[pf]("readonly"),o;try{o=i.get(e)}catch(a){return this.nextTick(n,a)}this[Md](o,function(a,c){if(a)return n(a);if(c===void 0)return n(new vR("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,_R(c))})}_getMany(e,t,n){let i=this[pf]("readonly"),o=e.map(a=>c=>{let f;try{f=i.get(a)}catch(d){return c(d)}f.onsuccess=()=>{let d=f.result;c(null,d===void 0?d:_R(d))},f.onerror=d=>{d.stopPropagation(),c(f.error)}});mX(o,16,n)}_del(e,t,n){let i=this[pf]("readwrite"),o;try{o=i.delete(e)}catch(a){return this.nextTick(n,a)}this[Md](o,n)}_put(e,t,n,i){let o=this[pf]("readwrite"),a;try{a=o.put(t,e)}catch(c){return this.nextTick(i,c)}this[Md](a,i)}_iterator(e){return new gX(this,this[Ea],e)}_batch(e,t,n){let i=this[pf]("readwrite"),o=i.transaction,a=0,c;o.onabort=function(){n(c||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function f(){let d=e[a++],m=d.key,w;try{w=d.type==="del"?i.delete(m):i.put(d.value,m)}catch(E){c=E,o.abort();return}a<e.length?w.onsuccess=f:typeof o.commit=="function"&&o.commit()}f()}_clear(e,t){let n,i;try{n=bX(e)}catch{return this.nextTick(t)}if(e.limit>=0)return wX(this,this[Ea],n,e,t);try{let o=this[pf]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(t,o)}this[Md](i,t)}_close(e){this[Ud].close(),this.nextTick(e)}};z0.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=ER),t=yX(t,xR);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[xR]};PR.BrowserLevel=z0});var AR=ue(DR=>{h();p();DR.Level=SR().BrowserLevel});var CQ={};xt(CQ,{Auth:()=>mB,CID:()=>we,Capabilities:()=>yB,Crypto:()=>il,Depot:()=>gB,EMPTY_CID:()=>Hm,FileSystem:()=>su,Manners:()=>wB,ProgramError:()=>xB,ROOT_FILESYSTEM_PERMISSIONS:()=>Wh,Reference:()=>bB,Session:()=>gs,Storage:()=>vB,VERSION:()=>zf,WASM_WNFS_VERSION:()=>Xb,addRootFileSystemPermissions:()=>_W,appId:()=>Nb,apps:()=>$E,assemble:()=>AB,auth:()=>EB,capabilities:()=>PB,compositions:()=>DQ,crypto:()=>EQ,decodeCID:()=>ke,defaultAuthComponent:()=>IB,defaultCapabilitiesComponent:()=>TB,defaultCryptoComponent:()=>yf,defaultDepotComponent:()=>qE,defaultMannersComponent:()=>mh,defaultReferenceComponent:()=>WE,defaultStorageComponent:()=>Bu,depot:()=>SB,did:()=>On,encodeCID:()=>Xn,extractConfig:()=>VE,fission:()=>An,gatherComponents:()=>CB,isCapabilityBasedAuthConfiguration:()=>HE,isSupported:()=>kB,manners:()=>PQ,namespace:()=>Tc,path:()=>Pn,permissionPaths:()=>Vh,program:()=>xQ,reference:()=>DB,storage:()=>SQ,ucan:()=>dn});h();p();h();p();h();p();h();p();h();p();h();p();function Qu(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Bh(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Qu(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Oh(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));let t=Bh(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return Qu(t)}h();p();h();p();h();p();h();p();var db={};xt(db,{identity:()=>U7});h();p();h();p();h();p();function R7(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var c=r.length,f=r.charAt(0),d=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function w(F){if(F instanceof Uint8Array||(ArrayBuffer.isView(F)?F=new Uint8Array(F.buffer,F.byteOffset,F.byteLength):Array.isArray(F)&&(F=Uint8Array.from(F))),!(F instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(F.length===0)return"";for(var U=0,pe=0,he=0,De=F.length;he!==De&&F[he]===0;)he++,U++;for(var re=(De-he)*m+1>>>0,be=new Uint8Array(re);he!==De;){for(var Pe=F[he],Y=0,ge=re-1;(Pe!==0||Y<pe)&&ge!==-1;ge--,Y++)Pe+=256*be[ge]>>>0,be[ge]=Pe%c>>>0,Pe=Pe/c>>>0;if(Pe!==0)throw new Error("Non-zero carry");pe=Y,he++}for(var _e=re-pe;_e!==re&&be[_e]===0;)_e++;for(var Me=f.repeat(U);_e<re;++_e)Me+=r.charAt(be[_e]);return Me}function E(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return new Uint8Array;var U=0;if(F[U]!==" "){for(var pe=0,he=0;F[U]===f;)pe++,U++;for(var De=(F.length-U)*d+1>>>0,re=new Uint8Array(De);F[U];){var be=t[F.charCodeAt(U)];if(be===255)return;for(var Pe=0,Y=De-1;(be!==0||Pe<he)&&Y!==-1;Y--,Pe++)be+=c*re[Y]>>>0,re[Y]=be%256>>>0,be=be/256>>>0;if(be!==0)throw new Error("Non-zero carry");he=Pe,U++}if(F[U]!==" "){for(var ge=De-he;ge!==De&&re[ge]===0;)ge++;for(var _e=new Uint8Array(pe+(De-ge)),Me=pe;ge!==De;)_e[Me++]=re[ge++];return _e}}}function T(F){var U=E(F);if(U)return U;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:E,decode:T}}var B7=R7,O7=B7,AD=O7;h();p();var nZ=new Uint8Array(0);var CD=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Vs=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var ID=r=>new TextEncoder().encode(r),TD=r=>new TextDecoder().decode(r);var fb=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},lb=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return FD(this,e)}},hb=class{constructor(e){this.decoders=e}or(e){return FD(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},FD=(r,e)=>new hb({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),pb=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new fb(e,t,n),this.decoder=new lb(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Ff=({name:r,prefix:e,encode:t,decode:n})=>new pb(r,e,t,n),Ma=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=AD(t,e);return Ff({prefix:r,name:e,encode:n,decode:o=>Vs(i(o))})},L7=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),c=0,f=0,d=0;for(let m=0;m<o;++m){let w=i[r[m]];if(w===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<t|w,c+=t,c>=8&&(c-=8,a[d++]=255&f>>c)}if(c>=t||255&f<<8-c)throw new SyntaxError("Unexpected end of data");return a},N7=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,c=0;for(let f=0;f<r.length;++f)for(c=c<<8|r[f],a+=8;a>t;)a-=t,o+=e[i&c>>a];if(a&&(o+=e[i&c<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Dr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Ff({prefix:e,name:r,encode(i){return N7(i,n,t)},decode(i){return L7(i,n,t,r)}});var U7=Ff({prefix:"\0",name:"identity",encode:r=>TD(r),decode:r=>ID(r)});var mb={};xt(mb,{base2:()=>M7});h();p();var M7=Dr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var yb={};xt(yb,{base8:()=>K7});h();p();var K7=Dr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var gb={};xt(gb,{base10:()=>j7});h();p();var j7=Ma({prefix:"9",name:"base10",alphabet:"0123456789"});var wb={};xt(wb,{base16:()=>$7,base16upper:()=>z7});h();p();var $7=Dr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),z7=Dr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var bb={};xt(bb,{base32:()=>Rf,base32hex:()=>H7,base32hexpad:()=>Y7,base32hexpadupper:()=>J7,base32hexupper:()=>G7,base32pad:()=>W7,base32padupper:()=>V7,base32upper:()=>q7,base32z:()=>X7});h();p();var Rf=Dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),q7=Dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),W7=Dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),V7=Dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),H7=Dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),G7=Dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Y7=Dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),J7=Dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),X7=Dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var vb={};xt(vb,{base36:()=>Q7,base36upper:()=>Z7});h();p();var Q7=Ma({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Z7=Ma({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var _b={};xt(_b,{base58btc:()=>us,base58flickr:()=>eK});h();p();var us=Ma({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eK=Ma({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var xb={};xt(xb,{base64:()=>tK,base64pad:()=>rK,base64url:()=>nK,base64urlpad:()=>iK});h();p();var tK=Dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rK=Dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nK=Dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),iK=Dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Eb={};xt(Eb,{base256emoji:()=>cK});h();p();var RD=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),oK=RD.reduce((r,e,t)=>(r[t]=e,r),[]),sK=RD.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function aK(r){return r.reduce((e,t)=>(e+=oK[t],e),"")}function uK(r){let e=[];for(let t of r){let n=sK[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var cK=Ff({prefix:"\u{1F680}",name:"base256emoji",encode:aK,decode:uK});var Ab={};xt(Ab,{sha256:()=>CK,sha512:()=>IK});h();p();h();p();h();p();h();p();h();p();var fK=LD,BD=128,lK=127,hK=~lK,pK=Math.pow(2,31);function LD(r,e,t){e=e||[],t=t||0;for(var n=t;r>=pK;)e[t++]=r&255|BD,r/=128;for(;r&hK;)e[t++]=r&255|BD,r>>>=7;return e[t]=r|0,LD.bytes=t-n+1,e}var dK=Pb,mK=128,OD=127;function Pb(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c)throw Pb.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&OD)<<i:(a&OD)*Math.pow(2,i),i+=7}while(a>=mK);return Pb.bytes=o-n,t}var yK=Math.pow(2,7),gK=Math.pow(2,14),wK=Math.pow(2,21),bK=Math.pow(2,28),vK=Math.pow(2,35),_K=Math.pow(2,42),xK=Math.pow(2,49),EK=Math.pow(2,56),PK=Math.pow(2,63),SK=function(r){return r<yK?1:r<gK?2:r<wK?3:r<bK?4:r<vK?5:r<_K?6:r<xK?7:r<EK?8:r<PK?9:10},DK={encode:fK,decode:dK,encodingLength:SK},AK=DK,Lh=AK;var Nh=(r,e=0)=>[Lh.decode(r,e),Lh.decode.bytes],Bf=(r,e,t=0)=>(Lh.encode(r,e,t),e),Of=r=>Lh.encodingLength(r);var Zu=(r,e)=>{let t=e.byteLength,n=Of(r),i=n+Of(t),o=new Uint8Array(i+t);return Bf(r,o,0),Bf(t,o,n),o.set(e,i),new Lf(r,t,e,o)},ND=r=>{let e=Vs(r),[t,n]=Nh(e),[i,o]=Nh(e.subarray(n)),a=e.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new Lf(t,i,a,e)},UD=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&CD(r.bytes,e.bytes),Lf=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var Db=({name:r,code:e,encode:t})=>new Sb(r,e,t),Sb=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Zu(this.code,t):t.then(n=>Zu(this.code,n))}else throw Error("Unknown type, must be binary type")}};var KD=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),CK=Db({name:"sha2-256",code:18,encode:KD("SHA-256")}),IK=Db({name:"sha2-512",code:19,encode:KD("SHA-512")});var Cb={};xt(Cb,{identity:()=>FK});h();p();var jD=0,TK="identity",$D=Vs,kK=r=>Zu(jD,$D(r)),FK={code:jD,name:TK,encode:$D,digest:kK};h();p();h();p();var uee=new TextEncoder,cee=new TextDecoder;h();p();h();p();var Yr=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Nm,byteLength:Nm,code:Lm,version:Lm,multihash:Lm,bytes:Lm,_baseCache:Nm,asCID:Nm})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==Mh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==UK)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Yr.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Zu(e,t);return Yr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&UD(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return LK(t,i,e||us.encoder);default:return NK(t,i,e||Rf.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return KK(/^0\.0/,jK),!!(e&&(e[qD]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Yr)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new Yr(t,n,i,o||zD(t,n,i.bytes))}else if(e!=null&&e[qD]===!0){let{version:t,multihash:n,code:i}=e,o=ND(n);return Yr.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==Mh)throw new Error(`Version 0 CID must use dag-pb (code: ${Mh}) block encoding`);return new Yr(e,t,n,n.bytes)}case 1:{let i=zD(e,t,n.bytes);return new Yr(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Yr.create(0,Mh,e)}static createV1(e,t){return Yr.create(1,e,t)}static decode(e){let[t,n]=Yr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Yr.inspectBytes(e),n=t.size-t.multihashSize,i=Vs(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),a=new Lf(t.multihashCode,t.digestSize,o,i);return[t.version===0?Yr.createV0(a):Yr.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[w,E]=Nh(e.subarray(t));return t+=E,w},i=n(),o=Mh;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=t,c=n(),f=n(),d=t+f,m=d-a;return{version:i,codec:o,multihashCode:c,digestSize:f,multihashSize:m,size:d}}static parse(e,t){let[n,i]=OK(e,t),o=Yr.decode(i);return o._baseCache.set(n,e),o}},OK=(r,e)=>{switch(r[0]){case"Q":{let t=e||us;return[us.prefix,t.decode(`${us.prefix}${r}`)]}case us.prefix:{let t=e||us;return[us.prefix,t.decode(r)]}case Rf.prefix:{let t=e||Rf;return[Rf.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},LK=(r,e,t)=>{let{prefix:n}=t;if(n!==us.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},NK=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},Mh=112,UK=18,zD=(r,e,t)=>{let n=Of(r),i=n+Of(e),o=new Uint8Array(i+t.byteLength);return Bf(r,o,0),Bf(e,o,n),o.set(t,i),o},qD=Symbol.for("@ipld/js-cid/CID"),Lm={writable:!1,configurable:!1,enumerable:!0},Nm={writable:!1,enumerable:!1,configurable:!1},MK="0.0.0-dev",KK=(r,e)=>{if(r.test(MK))console.warn(e);else throw new Error(e)},jK=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var Ib={...db,...mb,...yb,...gb,...wb,...bb,...vb,..._b,...xb,...Eb},Eee={...Ab,...Cb};function VD(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var WD=VD("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Tb=VD("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Bh(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),$K={utf8:WD,"utf-8":WD,hex:Ib.base16,latin1:Tb,ascii:Tb,binary:Tb,...Ib},Um=$K;function Oe(r,e="utf8"){let t=Um[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Qu(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}h();p();function Ge(r,e="utf8"){let t=Um[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();var zE=Ze(Mm(),1);h();p();h();p();var Pn={};xt(Pn,{Kind:()=>GD,RootBranch:()=>So,appData:()=>$h,combine:()=>Nf,directory:()=>Ar,file:()=>Kh,fromPosix:()=>zh,isDirectory:()=>hn,isFile:()=>cs,isOnRootBranch:()=>Uf,isPartition:()=>qh,isRootDirectory:()=>YD,isSameKind:()=>Fb,isSamePartition:()=>Km,kind:()=>jm,log:()=>Do,map:()=>Rb,parent:()=>Bb,removePartition:()=>ec,root:()=>jh,terminus:()=>Ob,toPosix:()=>Cr,unwrap:()=>Qt,withPartition:()=>$m});h();p();var So=(c=>(c.Public="public",c.Pretty="p",c.Private="private",c.PrivateLog="privateLog",c.Shared="shared",c.SharedCounter="sharedCounter",c.Version="version",c))(So||{}),GD=(t=>(t.Directory="directory",t.File="file",t))(GD||{});function Ar(...r){if(r.some(e=>e.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{directory:r}}function Kh(...r){if(r.some(e=>e.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{file:r}}function jh(){return{directory:[]}}function $h(r,e){let t=Ar("private","Apps",r.creator,r.name);return e?Nf(t,e):t}function zh(r){let e=r.replace(/^\/+/,"").split("/");return r.endsWith("/")?{directory:e.slice(0,-1)}:r===""?jh():{file:e}}function Cr(r,{absolute:e}={absolute:!1}){let t=e?"/":"",n=Qt(r).join("/");return hn(r)?t+n+(n.length?"/":""):t+n}function Nf(r,e){return Rb(t=>Qt(r).concat(t),e)}function hn(r){return!!r.directory}function cs(r){return!!r.file}function qh(r,e){return Qt(e)[0]===r}function Uf(r,e){return Qt(e)[0]===r}function YD(r){return r.directory.length===0}function Km(r,e){return Qt(r)[0]===Qt(e)[0]}function Fb(r,e){return hn(r)&&hn(e)?!0:!!(cs(r)&&cs(e))}function jm(r){return hn(r)?"directory":"file"}function Rb(r,e){return hn(e)?{directory:r(e.directory)}:cs(e)?{file:r(e.file)}:e}function Bb(r){return hn(r)&&YD(r)?null:Ar(...Qt(r).slice(0,-1))}function ec(r){return Rb(e=>hn(r)||e.length>1?e.slice(1):e,r)}function Ob(r){let e=Qt(r);return e.length<1?null:e[e.length-1]}function Qt(r){if(hn(r))return r.directory;if(cs(r))return r.file;throw new Error("Path is neither a directory or a file")}function $m(r,e){return Nf(Ar(r),e)}function Do(r){return`[ ${r.join(", ")} ]`}async function zm({crypto:r,accountDID:e,path:t}){return`wnfs:${e}:bareNameFilter:${await JD(r,t)}`}async function tc({crypto:r,accountDID:e,path:t}){return`wnfs:${e}:readKey:${await JD(r,t)}`}async function JD(r,e){return Ge(await r.hash.sha256(Oe("/"+Qt(e).join("/"),"utf8")),"base64pad")}h();p();var Wh={fs:{private:[jh()],public:[jh()]}};function Nb(r){return`${r.creator}/${r.name}`}function Vh(r){let e=[];return r.app&&e.push($h(r.app)),r.fs?.private&&(e=e.concat(r.fs?.private.map(t=>$m("private",t)))),r.fs?.public&&(e=e.concat(r.fs?.public.map(t=>$m("public",t)))),e}h();p();var dn={};xt(dn,{build:()=>Jr,decode:()=>Qn,encode:()=>rn,encodeHeader:()=>Ym,encodePayload:()=>Jm,isExpired:()=>Gs,isSelfSigned:()=>Qb,isValid:()=>$a,rootIssuer:()=>za,sign:()=>w2});h();p();h();p();h();p();h();p();var qm={};xt(qm,{equal:()=>qK});h();p();var qK=(r,e)=>{let t=new Uint8Array(r),n=new Uint8Array(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0};var Hs={};xt(Hs,{decode:()=>XD,encode:()=>QD,makeUrlSafe:()=>ZD,makeUrlUnsafe:()=>e2,urlDecode:()=>WK,urlEncode:()=>Ub});h();p();function XD(r){return Ge(Oe(r,"base64pad"))}function QD(r){return Ge(Oe(r),"base64pad")}function WK(r){return XD(e2(r))}function Ub(r){return ZD(QD(r))}function ZD(r){return r.replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}function e2(r){return r.replace(/_/g,"/").replace(/-/g,"+")}h();p();var t2=async r=>new Promise((e,t)=>{let n=()=>t(new Error("Failed to read file")),i=new FileReader;i.addEventListener("load",o=>{let a=o?.target?.result||null;if(a==null){n();return}if(typeof a=="string"){e(Oe(a));return}e(new Uint8Array(a))}),i.addEventListener("error",()=>i.abort()),i.addEventListener("abort",n),i.readAsArrayBuffer(r)});h();p();h();p();h();p();h();p();var VK=o2,n2=128,HK=127,GK=~HK,YK=Math.pow(2,31);function o2(r,e,t){e=e||[],t=t||0;for(var n=t;r>=YK;)e[t++]=r&255|n2,r/=128;for(;r&GK;)e[t++]=r&255|n2,r>>>=7;return e[t]=r|0,o2.bytes=t-n+1,e}var JK=Mb,XK=128,i2=127;function Mb(r,n){var t=0,n=n||0,i=0,o=n,a,c=r.length;do{if(o>=c)throw Mb.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&i2)<<i:(a&i2)*Math.pow(2,i),i+=7}while(a>=XK);return Mb.bytes=o-n,t}var QK=Math.pow(2,7),ZK=Math.pow(2,14),e9=Math.pow(2,21),t9=Math.pow(2,28),r9=Math.pow(2,35),n9=Math.pow(2,42),i9=Math.pow(2,49),o9=Math.pow(2,56),s9=Math.pow(2,63),a9=function(r){return r<QK?1:r<ZK?2:r<e9?3:r<t9?4:r<r9?5:r<n9?6:r<i9?7:r<o9?8:r<s9?9:10},u9={encode:VK,decode:JK,encodingLength:a9},c9=u9,Hh=c9;var Gh=(r,e=0)=>[Hh.decode(r,e),Hh.decode.bytes],Mf=(r,e,t=0)=>(Hh.encode(r,e,t),e),Kf=r=>Hh.encodingLength(r);h();p();h();p();var Dte=new Uint8Array(0);var s2=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Ao=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var a2=r=>new TextEncoder().encode(r),u2=r=>new TextDecoder().decode(r);var Ka=(r,e)=>{let t=e.byteLength,n=Kf(r),i=n+Kf(t),o=new Uint8Array(i+t);return Mf(r,o,0),Mf(t,o,n),o.set(e,i),new jf(r,t,e,o)},pn=r=>{let e=Ao(r),[t,n]=Gh(e),[i,o]=Gh(e.subarray(n)),a=e.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new jf(t,i,a,e)},c2=(r,e)=>{if(r===e)return!0;{let t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&s2(r.bytes,t.bytes)}},jf=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var Wb={};xt(Wb,{base58btc:()=>Tr,base58flickr:()=>m9});h();p();h();p();h();p();function f9(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var c=r.length,f=r.charAt(0),d=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function w(F){if(F instanceof Uint8Array||(ArrayBuffer.isView(F)?F=new Uint8Array(F.buffer,F.byteOffset,F.byteLength):Array.isArray(F)&&(F=Uint8Array.from(F))),!(F instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(F.length===0)return"";for(var U=0,pe=0,he=0,De=F.length;he!==De&&F[he]===0;)he++,U++;for(var re=(De-he)*m+1>>>0,be=new Uint8Array(re);he!==De;){for(var Pe=F[he],Y=0,ge=re-1;(Pe!==0||Y<pe)&&ge!==-1;ge--,Y++)Pe+=256*be[ge]>>>0,be[ge]=Pe%c>>>0,Pe=Pe/c>>>0;if(Pe!==0)throw new Error("Non-zero carry");pe=Y,he++}for(var _e=re-pe;_e!==re&&be[_e]===0;)_e++;for(var Me=f.repeat(U);_e<re;++_e)Me+=r.charAt(be[_e]);return Me}function E(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return new Uint8Array;var U=0;if(F[U]!==" "){for(var pe=0,he=0;F[U]===f;)pe++,U++;for(var De=(F.length-U)*d+1>>>0,re=new Uint8Array(De);F[U];){var be=t[F.charCodeAt(U)];if(be===255)return;for(var Pe=0,Y=De-1;(be!==0||Pe<he)&&Y!==-1;Y--,Pe++)be+=c*re[Y]>>>0,re[Y]=be%256>>>0,be=be/256>>>0;if(be!==0)throw new Error("Non-zero carry");he=Pe,U++}if(F[U]!==" "){for(var ge=De-he;ge!==De&&re[ge]===0;)ge++;for(var _e=new Uint8Array(pe+(De-ge)),Me=pe;ge!==De;)_e[Me++]=re[ge++];return _e}}}function T(F){var U=E(F);if(U)return U;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:E,decode:T}}var l9=f9,h9=l9,f2=h9;h();p();var jb=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},$b=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return l2(this,e)}},zb=class{constructor(e){this.decoders=e}or(e){return l2(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},l2=(r,e)=>new zb({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),qb=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new jb(e,t,n),this.decoder=new $b(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},$f=({name:r,prefix:e,encode:t,decode:n})=>new qb(r,e,t,n),ja=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=f2(t,e);return $f({prefix:r,name:e,encode:n,decode:o=>Ao(i(o))})},p9=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),c=0,f=0,d=0;for(let m=0;m<o;++m){let w=i[r[m]];if(w===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<t|w,c+=t,c>=8&&(c-=8,a[d++]=255&f>>c)}if(c>=t||255&f<<8-c)throw new SyntaxError("Unexpected end of data");return a},d9=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,c=0;for(let f=0;f<r.length;++f)for(c=c<<8|r[f],a+=8;a>t;)a-=t,o+=e[i&c>>a];if(a&&(o+=e[i&c<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Ir=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>$f({prefix:e,name:r,encode(i){return d9(i,n,t)},decode(i){return p9(i,n,t,r)}});var Tr=ja({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),m9=ja({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Hb={};xt(Hb,{base32:()=>Kt,base32hex:()=>w9,base32hexpad:()=>v9,base32hexpadupper:()=>_9,base32hexupper:()=>b9,base32pad:()=>Vb,base32padupper:()=>g9,base32upper:()=>y9,base32z:()=>x9});h();p();var Kt=Ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),y9=Ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Vb=Ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),g9=Ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),w9=Ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),b9=Ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),v9=Ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_9=Ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),x9=Ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});h();p();var E9=(r,e)=>{let{bytes:t,version:n}=r;switch(n){case 0:return S9(t,Gb(r),e||Tr.encoder);default:return D9(t,Gb(r),e||Kt.encoder)}},h2=new WeakMap,Gb=r=>{let e=h2.get(r);if(e==null){let t=new Map;return h2.set(r,t),t}return e},we=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==Yh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==A9)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return we.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Ka(e,t);return we.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return we.equals(this,e)}static equals(e,t){let n=t;return n&&e.code===n.code&&e.version===n.version&&c2(e.multihash,n.multihash)}toString(e){return E9(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof we)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:i,multihash:o,bytes:a}=t;return new we(n,i,o,a||p2(n,i,o.bytes))}else if(t[C9]===!0){let{version:n,multihash:i,code:o}=t,a=pn(i);return we.create(n,o,a)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Yh)throw new Error(`Version 0 CID must use dag-pb (code: ${Yh}) block encoding`);return new we(e,t,n,n.bytes)}case 1:{let i=p2(e,t,n.bytes);return new we(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return we.create(0,Yh,e)}static createV1(e,t){return we.create(1,e,t)}static decode(e){let[t,n]=we.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=we.inspectBytes(e),n=t.size-t.multihashSize,i=Ao(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),a=new jf(t.multihashCode,t.digestSize,o,i);return[t.version===0?we.createV0(a):we.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[w,E]=Gh(e.subarray(t));return t+=E,w},i=n(),o=Yh;if(i===18?(i=0,t=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=t,c=n(),f=n(),d=t+f,m=d-a;return{version:i,codec:o,multihashCode:c,digestSize:f,multihashSize:m,size:d}}static parse(e,t){let[n,i]=P9(e,t),o=we.decode(i);return Gb(o).set(n,e),o}},P9=(r,e)=>{switch(r[0]){case"Q":{let t=e||Tr;return[Tr.prefix,t.decode(`${Tr.prefix}${r}`)]}case Tr.prefix:{let t=e||Tr;return[Tr.prefix,t.decode(r)]}case Kt.prefix:{let t=e||Kt;return[Kt.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},S9=(r,e,t)=>{let{prefix:n}=t;if(n!==Tr.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},D9=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},Yh=112,A9=18,p2=(r,e,t)=>{let n=Kf(r),i=n+Kf(e),o=new Uint8Array(i+t.byteLength);return Mf(r,o,0),Mf(e,o,n),o.set(t,i),o},C9=Symbol.for("@ipld/js-cid/CID");h();p();function ht(r,e){return typeof r=="object"&&r!=null&&e in r}var I9=r=>r!==void 0,Vm=r=>r!==null;var d2=r=>I9(r)&&Vm(r),Yb=r=>typeof r=="boolean";function Jh(r){return ht(r,"algorithm")&&ht(r,"extractable")&&ht(r,"type")}var Jn=r=>typeof r=="number",Ht=r=>typeof r=="string",Ye=r=>r!==null&&typeof r=="object",m2=r=>typeof Blob>"u"?!1:r instanceof Blob||Ye(r)&&r?.constructor?.name==="Blob";var Hm="Qmc5m94Gu7z62RC8waSKkZUrCCBJPyHbkpmGzEePxy2oXJ";function ke(r){let e=we.asCID(r);if(e)return e;if(typeof r=="string")return we.parse(r);if(typeof r=="object"&&"version"in r&&"code"in r&&"multihash"in r)return we.create(r.version,r.code,r.multihash);if(typeof r=="object"&&ht(r,"version")&&ht(r,"code")&&Jn(r.code)&&ht(r,"hash")&&Ye(r.hash)&&Object.values(r.hash).every(Jn)){let t=pn(new Uint8Array(Object.values(r.hash)));return we.create(r.version,r.code,t)}if(typeof r=="object"&&ht(r,"/")&&typeof r["/"]=="string")return we.parse(r["/"]);throw new Error(`Could not decode CID: ${JSON.stringify(r)}`)}function Xn(r){return typeof r=="string"?r:r.toString()}h();p();h();p();var Jb=(r,e)=>{let{[e]:t,...n}=r;return n};var y2=(r,e)=>{let t={};return Object.entries(r).forEach(([n,i])=>{t[n]=e(i,n)}),t};h();p();var zf="0.36.3",Xb="0.1.7";h();p();var T9=typeof self<"u"&&typeof self.location=="object",Xh=r=>{if(!T9)throw new Error(`Must be in browser to use method. Provide a node-compatible implementation for ${r}`)};h();p();h();p();var Gm="did:key:z",g2=(r,e)=>qm.equal(e,r.slice(0,e.byteLength));function qf(r,e,t){let n=r.did.keyTypes[t]?.magicBytes;if(n===null)throw new Error(`Key type '${t}' not supported, available types: ${Object.keys(r.did.keyTypes).join(", ")}`);let i=Oh([n,e]);return Gm+Ge(i,"base58btc")}function rc(r,e){if(!e.startsWith(Gm))throw new Error("Please use a base58-encoded DID formatted `did:key:z...`");let t=e.substr(Gm.length),n=Oe(t,"base58btc"),i=Object.entries(r.did.keyTypes).find(([o,a])=>g2(n,a.magicBytes));if(!i)throw new Error("Unsupported key algorithm.");return{publicKey:n.slice(i[1].magicBytes.length),type:i[0]}}async function Jr({addSignature:r=!0,audience:e,dependencies:t,facts:n=[],issuer:i,lifetimeInSeconds:o=30,expiration:a,potency:c="APPEND",proof:f,resource:d}){let m=Math.floor(Date.now()/1e3),w=f?typeof f=="string"?Qn(f):f:null,E={alg:await t.crypto.keystore.getUcanAlgorithm(),typ:"JWT",uav:"1.0.0"},T=a||m+o,F=m-60;if(w){let he=w.payload;T=Math.min(he.exp,T),F=Math.max(he.nbf,F)}let U={aud:e,exp:T,fct:n,iss:i,nbf:F,prf:f?typeof f=="string"?f:rn(f):null,ptc:c,rsc:d||(w?w.payload.rsc:"*")},pe=r?await w2(t.crypto,E,U):null;return{header:E,payload:U,signature:pe}}function Qn(r){let e=r.split("."),t=JSON.parse(Hs.urlDecode(e[0])),n=JSON.parse(Hs.urlDecode(e[1]));return{header:t,payload:n,signature:e[2]||null}}function rn(r){let e=Ym(r.header),t=Jm(r.payload);return e+"."+t+"."+r.signature}function Ym(r){return Hs.urlEncode(JSON.stringify(r))}function Jm(r){return Hs.urlEncode(JSON.stringify({...r}))}function Gs(r){return r.payload.exp<=Math.floor(Date.now()/1e3)}function Qb(r){return r.payload.iss===r.payload.aud}async function $a(r,e){try{let t=Ym(e.header),n=Jm(e.payload),{publicKey:i,type:o}=rc(r,e.payload.iss),c=await r.did.keyTypes[o].verify({publicKey:i,message:Oe(`${t}.${n}`,"utf8"),signature:Oe(e.signature||"","base64url")});if(!c)return c;if(!e.payload.prf)return!0;let f=Qn(e.payload.prf),d=f.payload.aud===e.payload.iss;return d&&await $a(r,f)}catch{return!1}}function za(r,e=0){let t=typeof r=="string"?F9(r,e):r.payload;return t.prf?za(t.prf,e+1):t.iss}async function w2(r,e,t){let n=Ym(e),i=Jm(t);return Ge(await r.keystore.sign(Oe(`${n}.${i}`,"utf8")),"base64url")}function F9(r,e){try{return JSON.parse(Hs.urlDecode(r.split(".")[1]))}catch{throw new Error(`Invalid UCAN (${e} level${e===1?"":"s"} deep): \`${r}\``)}}h();p();var nc=class{constructor({storage:e,storageName:t}){this.memoryCache=[],this.dictionary={},this.storage=e,this.storageName=t}static async create(e){let t=new this.prototype.constructor(e);return t.memoryCache=await t.getAll(),t.dictionary=t.toDictionary(t.memoryCache),t}async add(e){let t=Array.isArray(e)?e:[e];this.memoryCache=[...this.memoryCache,...t],this.dictionary=this.toDictionary(this.memoryCache),await this.storage.setItem(this.storageName,this.memoryCache.map(this.toJSON).join("|||"))}clear(){return this.memoryCache=[],this.dictionary={},this.storage.removeItem(this.storageName)}find(e){return this.memoryCache.find(e)||null}getByIndex(e){return this.memoryCache[e]}async getAll(){let e=await this.storage.getItem(this.storageName);return Ht(e)?e.split("|||").map(this.fromJSON):[]}indexOf(e){return this.memoryCache.indexOf(e)}length(){return this.memoryCache.length}fromJSON(e){return JSON.parse(e)}toJSON(e){return JSON.stringify(e)}getByKey(e){return this.dictionary[e]}toDictionary(e){return e.reduce((t,n,i)=>({...t,[i.toString()]:n}),{})}};function b2({storage:r}){return Zb.create({storage:r,storageName:r.KEYS.UCANS})}var Zb=class extends nc{constructor(e){super(e)}fromJSON(e){return Qn(e)}toJSON(e){return rn(e)}toDictionary(e){return e.reduce((t,n)=>({...t,[tv(n.payload.rsc)]:n}),{})}async lookupFilesystemUcan(e){let t=this.getByKey("*");if(t)return t;let n=e==="*",i=n?!1:hn(e),o=n?["*"]:Qt(e),a=ev();return o.reduce((c,f,d)=>{if(c)return c;let m=d===0,w=o.slice(0,o.length-d),E=Cr(m&&!i?Kh(...w):Ar(...w));return this.getByKey(`${a}${E}`)||null},null)}async lookupAppUcan(e){return this.getByKey("*")||this.getByKey("app:*")||this.getByKey(`app:${e}`)}},v2="wnfs";function ev(r){return v2+":"}function tv(r){if(typeof r!="object")return r;let e=Array.from(Object.entries(r))[0];return e[0]+":"+(e[0]===v2?e[1].replace(/^\/+/,""):e[1])}var Wf="capabilities";async function x2({capabilities:r,crypto:e,reference:t,storage:n}){if(r.ucans.length===0)throw new Error("Expected at least one UCAN");await B9({reference:t,ucans:r.ucans});let i=await t.didRoot.lookup(r.username);await r.fileSystemSecrets.reduce(async(o,a)=>{await o,await R9({accountDID:i,crypto:e,storage:n,bareNameFilter:a.bareNameFilter,readKey:a.readKey,path:a.path})},Promise.resolve())}async function R9({accountDID:r,bareNameFilter:e,crypto:t,path:n,readKey:i,storage:o}){let a=await tc({accountDID:r,crypto:t,path:n}),c=await zm({accountDID:r,crypto:t,path:n});await t.keystore.importSymmKey(i,a),await o.setItem(c,e)}async function B9({reference:r,ucans:e}){await r.repositories.ucans.add(e)}function E2(r,{app:e,fs:t,raw:n}){let i,o=ev(),a=r.getByKey("*");if(a&&!Gs(a)&&!Qb(a))return a;if(e){let c=o+Cr($h(e)),f=r.getByKey(c);if(!f||Gs(f))return null;i=f}return t?.private&&!t.private.every(f=>{let d=`${o}private/`+Cr(f),m=r.getByKey(d);return i=m,m&&!Gs(m)})||t?.public&&!t.public.every(f=>{let d=`${o}public/`+Cr(f),m=r.getByKey(d);return i=m,m&&!Gs(m)})||n&&!n.every(f=>{let d=tv(f.rsc),m=r.getByKey(d);return i=m,m&&!Gs(m)})?null:i||null}async function P2(r,e,t){return Vh(t).reduce((n,i)=>n.then(async o=>{if(o===!1||qh("public",i))return o;let a=await tc({accountDID:e,crypto:r,path:i});return r.keystore.keyExists(a)}),Promise.resolve(!0))}h();p();async function Io(r){let e=await r.keystore.publicExchangeKey(),t=await r.keystore.getAlgorithm();return qf(r,e,t)}async function Zt(r){let e=await r.keystore.publicWriteKey(),t=await r.keystore.getAlgorithm();return qf(r,e,t)}h();p();h();p();var qa=class{constructor(){this.events=new Map;this.on=this.addListener;this.off=this.removeListener}addListener(e,t){let n=this.events.get(e);n===void 0?this.events.set(e,new Set([t])):n.add(t)}removeListener(e,t){let n=this.events.get(e);n!==void 0&&(n.delete(t),n.size===0&&this.events.delete(e))}emit(e,t){this.events.get(e)?.forEach(n=>{n.apply(this,[t])})}};function S2(){return new qa}function D2(r){return{addListener:r.addListener.bind(r),removeListener:r.removeListener.bind(r),on:r.on.bind(r),off:r.off.bind(r)}}h();p();var On={};xt(On,{agent:()=>Zt,didToPublicKey:()=>rc,exchange:()=>Io,publicKeyToDid:()=>qf,sharing:()=>Io,ucan:()=>Zt,write:()=>Zt});h();p();h();p();var wi={};xt(wi,{code:()=>Ha,decode:()=>ro,encode:()=>ls,name:()=>ip});h();p();h();p();h();p();h();p();var U9=["string","number","bigint","symbol"],M9=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function A2(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(U9.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(K9(r))return"Buffer";let t=j9(r);return t||"Object"}function K9(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function j9(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(M9.includes(e))return e}h();p();var Z=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};Z.uint=new Z(0,"uint",!0);Z.negint=new Z(1,"negint",!0);Z.bytes=new Z(2,"bytes",!0);Z.string=new Z(3,"string",!0);Z.array=new Z(4,"array",!1);Z.map=new Z(5,"map",!1);Z.tag=new Z(6,"tag",!1);Z.float=new Z(7,"float",!0);Z.false=new Z(7,"false",!0);Z.true=new Z(7,"true",!0);Z.null=new Z(7,"null",!0);Z.undefined=new Z(7,"undefined",!0);Z.break=new Z(7,"break",!0);var Fe=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};h();p();h();p();var Vf=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",$9=new TextDecoder,z9=new TextEncoder;function Xm(r){return Vf&&globalThis.Buffer.isBuffer(r)}function rv(r){return r instanceof Uint8Array?Xm(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var k2=Vf?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):I2(r,e,t):(r,e,t)=>t-e>64?$9.decode(r.subarray(e,t)):I2(r,e,t),F2=Vf?r=>r.length>64?globalThis.Buffer.from(r):C2(r):r=>r.length>64?z9.encode(r):C2(r),fs=r=>Uint8Array.from(r),Hf=Vf?(r,e,t)=>Xm(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),R2=Vf?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),rv(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},B2=Vf?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function O2(r,e){if(Xm(r)&&Xm(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function C2(r,e=1/0){let t,n=r.length,i=null,o=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function I2(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,a=i>239?4:i>223?3:i>191?2:1;if(e+a<=t){let c,f,d,m;switch(a){case 1:i<128&&(o=i);break;case 2:c=r[e+1],(c&192)===128&&(m=(i&31)<<6|c&63,m>127&&(o=m));break;case 3:c=r[e+1],f=r[e+2],(c&192)===128&&(f&192)===128&&(m=(i&15)<<12|(c&63)<<6|f&63,m>2047&&(m<55296||m>57343)&&(o=m));break;case 4:c=r[e+1],f=r[e+2],d=r[e+3],(c&192)===128&&(f&192)===128&&(d&192)===128&&(m=(i&15)<<18|(c&63)<<12|(f&63)<<6|d&63,m>65535&&m<1114112&&(o=m))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=a}return q9(n)}var T2=4096;function q9(r){let e=r.length;if(e<=T2)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=T2));return t}var W9=256,Qh=class{constructor(e=W9){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=B2(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Hf(n,0,this.cursor)}else t=R2(this.chunks,this.cursor);return e&&this.reset(),t}};h();p();var wt="CBOR decode error:",nv="CBOR encode error:",Zh=[];Zh[23]=1;Zh[24]=2;Zh[25]=3;Zh[26]=5;Zh[27]=9;function Ys(r,e,t){if(r.length-e<t)throw new Error(`${wt} not enough data for type`)}h();p();h();p();var nn=[24,256,65536,4294967296,BigInt("18446744073709551616")];function di(r,e,t){Ys(r,e,1);let n=r[e];if(t.strict===!0&&n<nn[0])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);return n}function mi(r,e,t){Ys(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<nn[1])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);return n}function yi(r,e,t){Ys(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<nn[2])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);return n}function gi(r,e,t){Ys(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<nn[3])throw new Error(`${wt} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${wt} integers outside of the safe integer range are not supported`)}function L2(r,e,t,n){return new Fe(Z.uint,di(r,e+1,n),2)}function N2(r,e,t,n){return new Fe(Z.uint,mi(r,e+1,n),3)}function U2(r,e,t,n){return new Fe(Z.uint,yi(r,e+1,n),5)}function M2(r,e,t,n){return new Fe(Z.uint,gi(r,e+1,n),9)}function Zi(r,e){return mn(r,0,e.value)}function mn(r,e,t){if(t<nn[0]){let n=Number(t);r.push([e|n])}else if(t<nn[1]){let n=Number(t);r.push([e|24,n])}else if(t<nn[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<nn[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<nn[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=a&255,a=a>>8,i[3]=a&255,a=a>>8,i[2]=a&255,a=a>>8,i[1]=a&255,r.push(i)}else throw new Error(`${wt} encountered BigInt larger than allowable range`)}}Zi.encodedSize=function(e){return mn.encodedSize(e.value)};mn.encodedSize=function(e){return e<nn[0]?1:e<nn[1]?2:e<nn[2]?3:e<nn[3]?5:9};Zi.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};h();p();function K2(r,e,t,n){return new Fe(Z.negint,-1-di(r,e+1,n),2)}function j2(r,e,t,n){return new Fe(Z.negint,-1-mi(r,e+1,n),3)}function $2(r,e,t,n){return new Fe(Z.negint,-1-yi(r,e+1,n),5)}var iv=BigInt(-1),z2=BigInt(1);function q2(r,e,t,n){let i=gi(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new Fe(Z.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${wt} integers outside of the safe integer range are not supported`);return new Fe(Z.negint,iv-BigInt(i),9)}function Qm(r,e){let t=e.value,n=typeof t=="bigint"?t*iv-z2:t*-1-1;mn(r,e.type.majorEncoded,n)}Qm.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*iv-z2:t*-1-1;return n<nn[0]?1:n<nn[1]?2:n<nn[2]?3:n<nn[3]?5:9};Qm.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};h();p();function ep(r,e,t,n){Ys(r,e,t+n);let i=Hf(r,e+t,e+t+n);return new Fe(Z.bytes,i,t+n)}function W2(r,e,t,n){return ep(r,e,1,t)}function V2(r,e,t,n){return ep(r,e,2,di(r,e+1,n))}function H2(r,e,t,n){return ep(r,e,3,mi(r,e+1,n))}function G2(r,e,t,n){return ep(r,e,5,yi(r,e+1,n))}function Y2(r,e,t,n){let i=gi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer bytes lengths not supported`);return ep(r,e,9,i)}function Zm(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Z.string?F2(r.value):r.value),r.encodedBytes}function Gf(r,e){let t=Zm(e);mn(r,e.type.majorEncoded,t.length),r.push(t)}Gf.encodedSize=function(e){let t=Zm(e);return mn.encodedSize(t.length)+t.length};Gf.compareTokens=function(e,t){return H9(Zm(e),Zm(t))};function H9(r,e){return r.length<e.length?-1:r.length>e.length?1:O2(r,e)}h();p();function tp(r,e,t,n,i){let o=t+n;Ys(r,e,o);let a=new Fe(Z.string,k2(r,e+t,e+o),o);return i.retainStringBytes===!0&&(a.byteValue=Hf(r,e+t,e+o)),a}function J2(r,e,t,n){return tp(r,e,1,t,n)}function X2(r,e,t,n){return tp(r,e,2,di(r,e+1,n),n)}function Q2(r,e,t,n){return tp(r,e,3,mi(r,e+1,n),n)}function Z2(r,e,t,n){return tp(r,e,5,yi(r,e+1,n),n)}function eA(r,e,t,n){let i=gi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer string lengths not supported`);return tp(r,e,9,i,n)}var tA=Gf;h();p();function Yf(r,e,t,n){return new Fe(Z.array,n,t)}function rA(r,e,t,n){return Yf(r,e,1,t)}function nA(r,e,t,n){return Yf(r,e,2,di(r,e+1,n))}function iA(r,e,t,n){return Yf(r,e,3,mi(r,e+1,n))}function oA(r,e,t,n){return Yf(r,e,5,yi(r,e+1,n))}function sA(r,e,t,n){let i=gi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer array lengths not supported`);return Yf(r,e,9,i)}function aA(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${wt} indefinite length items not allowed`);return Yf(r,e,1,1/0)}function ey(r,e){mn(r,Z.array.majorEncoded,e.value)}ey.compareTokens=Zi.compareTokens;ey.encodedSize=function(e){return mn.encodedSize(e.value)};h();p();function Jf(r,e,t,n){return new Fe(Z.map,n,t)}function uA(r,e,t,n){return Jf(r,e,1,t)}function cA(r,e,t,n){return Jf(r,e,2,di(r,e+1,n))}function fA(r,e,t,n){return Jf(r,e,3,mi(r,e+1,n))}function lA(r,e,t,n){return Jf(r,e,5,yi(r,e+1,n))}function hA(r,e,t,n){let i=gi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${wt} 64-bit integer map lengths not supported`);return Jf(r,e,9,i)}function pA(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${wt} indefinite length items not allowed`);return Jf(r,e,1,1/0)}function ty(r,e){mn(r,Z.map.majorEncoded,e.value)}ty.compareTokens=Zi.compareTokens;ty.encodedSize=function(e){return mn.encodedSize(e.value)};h();p();function dA(r,e,t,n){return new Fe(Z.tag,t,1)}function mA(r,e,t,n){return new Fe(Z.tag,di(r,e+1,n),2)}function yA(r,e,t,n){return new Fe(Z.tag,mi(r,e+1,n),3)}function gA(r,e,t,n){return new Fe(Z.tag,yi(r,e+1,n),5)}function wA(r,e,t,n){return new Fe(Z.tag,gi(r,e+1,n),9)}function ry(r,e){mn(r,Z.tag.majorEncoded,e.value)}ry.compareTokens=Zi.compareTokens;ry.encodedSize=function(e){return mn.encodedSize(e.value)};h();p();var Z9=20,ej=21,tj=22,rj=23;function bA(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${wt} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Fe(Z.null,null,1):new Fe(Z.undefined,void 0,1)}function vA(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${wt} indefinite length items not allowed`);return new Fe(Z.break,void 0,1)}function ov(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${wt} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${wt} Infinity values are not supported`)}return new Fe(Z.float,r,e)}function _A(r,e,t,n){return ov(sv(r,e+1),3,n)}function xA(r,e,t,n){return ov(av(r,e+1),5,n)}function EA(r,e,t,n){return ov(AA(r,e+1),9,n)}function ny(r,e,t){let n=e.value;if(n===!1)r.push([Z.float.majorEncoded|Z9]);else if(n===!0)r.push([Z.float.majorEncoded|ej]);else if(n===null)r.push([Z.float.majorEncoded|tj]);else if(n===void 0)r.push([Z.float.majorEncoded|rj]);else{let i,o=!1;(!t||t.float64!==!0)&&(SA(n),i=sv(To,1),n===i||Number.isNaN(n)?(To[0]=249,r.push(To.slice(0,3)),o=!0):(DA(n),i=av(To,1),n===i&&(To[0]=250,r.push(To.slice(0,5)),o=!0))),o||(nj(n),i=AA(To,1),To[0]=251,r.push(To.slice(0,9)))}}ny.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){SA(n);let i=sv(To,1);if(n===i||Number.isNaN(n))return 3;if(DA(n),i=av(To,1),n===i)return 5}return 9};var PA=new ArrayBuffer(9),eo=new DataView(PA,1),To=new Uint8Array(PA,0);function SA(r){if(r===1/0)eo.setUint16(0,31744,!1);else if(r===-1/0)eo.setUint16(0,64512,!1);else if(Number.isNaN(r))eo.setUint16(0,32256,!1);else{eo.setFloat32(0,r);let e=eo.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)eo.setUint16(0,31744,!1);else if(t===0)eo.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?eo.setUint16(0,0):i<-14?eo.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):eo.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function sv(r,e){if(r.length-e<2)throw new Error(`${wt} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function DA(r){eo.setFloat32(0,r,!1)}function av(r,e){if(r.length-e<4)throw new Error(`${wt} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function nj(r){eo.setFloat64(0,r,!1)}function AA(r,e){if(r.length-e<8)throw new Error(`${wt} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}ny.compareTokens=Zi.compareTokens;function jt(r,e,t){throw new Error(`${wt} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function iy(r){return()=>{throw new Error(`${wt} ${r}`)}}var Se=[];for(let r=0;r<=23;r++)Se[r]=jt;Se[24]=L2;Se[25]=N2;Se[26]=U2;Se[27]=M2;Se[28]=jt;Se[29]=jt;Se[30]=jt;Se[31]=jt;for(let r=32;r<=55;r++)Se[r]=jt;Se[56]=K2;Se[57]=j2;Se[58]=$2;Se[59]=q2;Se[60]=jt;Se[61]=jt;Se[62]=jt;Se[63]=jt;for(let r=64;r<=87;r++)Se[r]=W2;Se[88]=V2;Se[89]=H2;Se[90]=G2;Se[91]=Y2;Se[92]=jt;Se[93]=jt;Se[94]=jt;Se[95]=iy("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)Se[r]=J2;Se[120]=X2;Se[121]=Q2;Se[122]=Z2;Se[123]=eA;Se[124]=jt;Se[125]=jt;Se[126]=jt;Se[127]=iy("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)Se[r]=rA;Se[152]=nA;Se[153]=iA;Se[154]=oA;Se[155]=sA;Se[156]=jt;Se[157]=jt;Se[158]=jt;Se[159]=aA;for(let r=160;r<=183;r++)Se[r]=uA;Se[184]=cA;Se[185]=fA;Se[186]=lA;Se[187]=hA;Se[188]=jt;Se[189]=jt;Se[190]=jt;Se[191]=pA;for(let r=192;r<=215;r++)Se[r]=dA;Se[216]=mA;Se[217]=yA;Se[218]=gA;Se[219]=wA;Se[220]=jt;Se[221]=jt;Se[222]=jt;Se[223]=jt;for(let r=224;r<=243;r++)Se[r]=iy("simple values are not supported");Se[244]=jt;Se[245]=jt;Se[246]=jt;Se[247]=bA;Se[248]=iy("simple values are not supported");Se[249]=_A;Se[250]=xA;Se[251]=EA;Se[252]=jt;Se[253]=jt;Se[254]=jt;Se[255]=vA;var ko=[];for(let r=0;r<24;r++)ko[r]=new Fe(Z.uint,r,1);for(let r=-1;r>=-24;r--)ko[31-r]=new Fe(Z.negint,r,1);ko[64]=new Fe(Z.bytes,new Uint8Array(0),1);ko[96]=new Fe(Z.string,"",1);ko[128]=new Fe(Z.array,0,1);ko[160]=new Fe(Z.map,0,1);ko[244]=new Fe(Z.false,!1,1);ko[245]=new Fe(Z.true,!0,1);ko[246]=new Fe(Z.null,null,1);function CA(r){switch(r.type){case Z.false:return fs([244]);case Z.true:return fs([245]);case Z.null:return fs([246]);case Z.bytes:return r.value.length?void 0:fs([64]);case Z.string:return r.value===""?fs([96]):void 0;case Z.array:return r.value===0?fs([128]):void 0;case Z.map:return r.value===0?fs([160]):void 0;case Z.uint:return r.value<24?fs([Number(r.value)]):void 0;case Z.negint:if(r.value>=-24)return fs([31-Number(r.value)])}}var oj={float64:!1,mapSorter:uj,quickEncodeToken:CA};function sj(){let r=[];return r[Z.uint.major]=Zi,r[Z.negint.major]=Qm,r[Z.bytes.major]=Gf,r[Z.string.major]=tA,r[Z.array.major]=ey,r[Z.map.major]=ty,r[Z.tag.major]=ry,r[Z.float.major]=ny,r}var IA=sj(),uv=new Qh,Xf=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${nv} object contains circular references`);return new Xf(t,e)}},Wa={null:new Fe(Z.null,null),undefined:new Fe(Z.undefined,void 0),true:new Fe(Z.true,!0),false:new Fe(Z.false,!1),emptyArray:new Fe(Z.array,0),emptyMap:new Fe(Z.map,0)},Va={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Fe(Z.float,r):r>=0?new Fe(Z.uint,r):new Fe(Z.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new Fe(Z.uint,r):new Fe(Z.negint,r)},Uint8Array(r,e,t,n){return new Fe(Z.bytes,r)},string(r,e,t,n){return new Fe(Z.string,r)},boolean(r,e,t,n){return r?Wa.true:Wa.false},null(r,e,t,n){return Wa.null},undefined(r,e,t,n){return Wa.undefined},ArrayBuffer(r,e,t,n){return new Fe(Z.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new Fe(Z.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[Wa.emptyArray,new Fe(Z.break)]:Wa.emptyArray;n=Xf.createCheck(n,r);let i=[],o=0;for(let a of r)i[o++]=oy(a,t,n);return t.addBreakTokens?[new Fe(Z.array,r.length),i,new Fe(Z.break)]:[new Fe(Z.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),a=i?r.size:o.length;if(!a)return t.addBreakTokens===!0?[Wa.emptyMap,new Fe(Z.break)]:Wa.emptyMap;n=Xf.createCheck(n,r);let c=[],f=0;for(let d of o)c[f++]=[oy(d,t,n),oy(i?r.get(d):r[d],t,n)];return aj(c,t),t.addBreakTokens?[new Fe(Z.map,a),c,new Fe(Z.break)]:[new Fe(Z.map,a),c]}};Va.Map=Va.Object;Va.Buffer=Va.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Va[`${r}Array`]=Va.DataView;function oy(r,e={},t){let n=A2(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||Va[n];if(typeof i=="function"){let a=i(r,n,e,t);if(a!=null)return a}let o=Va[n];if(!o)throw new Error(`${nv} unsupported type: ${n}`);return o(r,n,e,t)}function aj(r,e){e.mapSorter&&r.sort(e.mapSorter)}function uj(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,o=IA[i].compareTokens(t,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function TA(r,e,t,n){if(Array.isArray(e))for(let i of e)TA(r,i,t,n);else t[e.type.major](r,e,n)}function cj(r,e,t){let n=oy(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let a=o.encodedSize(n,t),c=new Qh(a);if(o(c,n,t),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return rv(c.chunks[0])}}return uv.reset(),TA(uv,n,e,t),uv.toBytes(!0)}function Js(r,e){return e=Object.assign({},oj,e),cj(r,IA,e)}h();p();var fj={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},cv=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=ko[e];if(t===void 0){let n=Se[e];if(!n)throw new Error(`${wt} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},rp=Symbol.for("DONE"),sy=Symbol.for("BREAK");function lj(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=np(e,t);if(o===sy){if(r.value===1/0)break;throw new Error(`${wt} got unexpected break to lengthed array`)}if(o===rp)throw new Error(`${wt} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function hj(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let a=0;a<r.value;a++){let c=np(e,t);if(c===sy){if(r.value===1/0)break;throw new Error(`${wt} got unexpected break to lengthed map`)}if(c===rp)throw new Error(`${wt} found map but not enough entries (got ${a} [no key], expected ${r.value})`);if(n!==!0&&typeof c!="string")throw new Error(`${wt} non-string keys not supported (got ${typeof c})`);let f=np(e,t);if(f===rp)throw new Error(`${wt} found map but not enough entries (got ${a} [no value], expected ${r.value})`);n?o.set(c,f):i[c]=f}return n?o:i}function np(r,e){if(r.done())return rp;let t=r.next();if(t.type===Z.break)return sy;if(t.type.terminal)return t.value;if(t.type===Z.array)return lj(t,r,e);if(t.type===Z.map)return hj(t,r,e);if(t.type===Z.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=np(r,e);return e.tags[t.value](n)}throw new Error(`${wt} tag not supported (${t.value})`)}throw new Error("unsupported")}function to(r,e){if(!(r instanceof Uint8Array))throw new Error(`${wt} data to decode must be a Uint8Array`);e=Object.assign({},fj,e);let t=e.tokenizer||new cv(r,e),n=np(t,e);if(n===rp)throw new Error(`${wt} did not find any content to decode`);if(n===sy)throw new Error(`${wt} got unexpected break`);if(!t.done())throw new Error(`${wt} too many terminals, data makes no sense`);return n}var kA=42;function pj(r){if(r.asCID!==r&&r["/"]!==r.bytes)return null;let e=we.asCID(r);if(!e)return null;let t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new Fe(Z.tag,kA),new Fe(Z.bytes,t)]}function dj(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function mj(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var yj={float64:!0,typeEncoders:{Object:pj,undefined:dj,number:mj}};function gj(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return we.decode(r.subarray(1))}var FA={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};FA.tags[kA]=gj;var ip="dag-cbor",Ha=113,ls=r=>Js(r,yj),ro=r=>to(r,FA);var Tt={};xt(Tt,{DEFAULT_AES_ALG:()=>Ja,getEncryptedFile:()=>_v,getFile:()=>cp,getFileSystemLinks:()=>Oj,getSimpleLinks:()=>ol,putEncryptedFile:()=>xv,putFile:()=>cc,putLinks:()=>fc});h();p();var bi={};xt(bi,{code:()=>yn,createLink:()=>oc,createNode:()=>uy,decode:()=>Ya,encode:()=>Ga,name:()=>sp,prepare:()=>pv,validate:()=>dv});h();p();h();p();var wj=new TextDecoder;function lv(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function ay(r,e){let t;[t,e]=lv(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function RA(r,e){let t;return[t,e]=lv(r,e),[t&7,t>>3,e]}function bj(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=RA(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=ay(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=ay(r,n),e.Name=wj.decode(a)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=lv(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function BA(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let c,f;if([c,f,t]=RA(r,t),c!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${c}`);if(f===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=ay(r,t),n&&(i=!0)}else if(f===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let d;[d,t]=ay(r,t),n.push(bj(d))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${f}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let a={};return o&&(a.Data=o),a.Links=n||[],a}h();p();var LA=new TextEncoder,OA=2**32,vj=2**31;function _j(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=op(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=LA.encode(r.Name);t-=n.length,e.set(n,t),t=op(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=op(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function NA(r){let e=Ej(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=op(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=_j(r.Links[i],t.subarray(0,n));n-=o,n=op(t,n,o)-1,t[n]=18}return t}function xj(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+Qf(t)}if(typeof r.Name=="string"){let t=LA.encode(r.Name).length;e+=1+t+Qf(t)}return typeof r.Tsize=="number"&&(e+=1+Qf(r.Tsize)),e}function Ej(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+Qf(t)}if(r.Links)for(let t of r.Links){let n=xj(t);e+=1+n+Qf(n)}return e}function op(r,e,t){e-=Qf(t);let n=e;for(;t>=vj;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function Qf(r){return r%2===0&&r++,Math.floor((Pj(r)+6)/7)}function Pj(r){let e=0;return r>=OA&&(r=Math.floor(r/OA),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+Sj[r]}var Sj=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];h();p();var Dj=["Data","Links"],Aj=["Hash","Name","Tsize"],hv=new TextEncoder;function MA(r,e){if(r===e)return 0;let t=r.Name?hv.encode(r.Name):[],n=e.Name?hv.encode(e.Name):[],i=t.length,o=n.length;for(let a=0,c=Math.min(i,o);a<c;++a)if(t[a]!==n[a]){i=t[a],o=n[a];break}return i<o?-1:o<i?1:0}function UA(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function KA(r){if(typeof r.asCID=="object"){let t=we.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Hash){let t=we.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=we.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=we.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function pv(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=hv.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(KA),e.Links.sort(MA);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function dv(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!UA(r,Dj))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!UA(t,Aj))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&MA(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function uy(r,e=[]){return pv({Data:r,Links:e})}function oc(r,e,t){return KA({Hash:t,Name:r,Tsize:e})}var sp="dag-pb",yn=112;function Ga(r){dv(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),NA(e)}function Ya(r){let e=BA(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=we.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}h();p();h();p();var Fo={};xt(Fo,{code:()=>hs,decode:()=>Ij,encode:()=>Cj,name:()=>ap});h();p();var ap="raw",hs=85,Cj=r=>Ao(r),Ij=r=>Ao(r);var jA={[sp]:bi,[ip]:wi,[ap]:Fo},$A={[yn]:bi,[Ha]:wi,[hs]:Fo};function mv(r){let e=$A[r];if(!e)throw new Error(`No codec was registered for the code: ${yv(r)}. Is it part of the multicodec table (https://github.com/multiformats/multicodec/blob/master/table.csv)?`);return e}function Tj(r){let e=jA[r];if(!e)throw new Error(`No codec was registered for the name: ${r}`);return e}function cy(r){return typeof r=="string"?Tj(r):mv(r)}function zA(r,e){let t=cy(r);if(e.code!==t.code){let n=mv(e.code);throw new Error(`Expected a ${t.name} CID, found a ${n.name} CID instead.`)}}function qA(r){return typeof r=="string"?!!jA[r]:!!$A[r]}function yv(r){let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,r),`0x${Ge(e,"hex").replace(/^(00)*/,"")}`}var kj=new Uint8Array([8,1]);async function Zf(r,e){return zA(yn,e),Ya(await r.getBlock(e))}function up(r,e){let t=uy(kj,e);return r.putBlock(Ga(t),yn)}h();p();var kr=r=>Ye(r)&&r.content!==void 0,fy=r=>Ye(r)&&r.ls!==void 0,wv=r=>Ye(r)&&Ht(r.name)&&Jn(r.size)&&Yb(r.isFile),VA=r=>Ye(r)&&Ht(r.name)&&Jn(r.size)&&ps(r.cid),Ur=r=>Ye(r)&&Ht(r.name)&&Ht(r.ipns),HA=r=>{if(Ye(r)){let e=Object.values(r);return e.length>0&&e.every(Ur)}return!1},GA=r=>Array.isArray(r)&&r.every(Ur),Fj=r=>wv(r)&&ps(r.cid),YA=r=>Ye(r)&&Object.values(r).every(e=>Fj(e)||Ur(e)),Rj=r=>Ye(r)&&Jn(r.mtime)&&Jn(r.ctime)&&Jn(r.mode)&&Ht(r._type),sc=r=>Ye(r)&&Rj(r.unixMeta)&&Yb(r.isFile)&&Bj(r.version),ly=r=>Ye(r)&&Object.values(r).every(hy),hy=r=>Ye(r)&&ps(r.cid)&&ps(r.userland)&&ps(r.metadata)&&ly(r.subSkeleton)||Ur(r),bv=r=>Ye(r)&&ly(r.skeleton)&&sc(r.metadata)&&r.metadata.isFile===!1,JA=r=>bv(r)&&ps(r.userland),vv=r=>Ye(r)&&sc(r.metadata)&&r.metadata.isFile===!0,XA=r=>vv(r)&&ps(r.userland),ps=r=>!!we.asCID(r)||Ht(r)||r&&"code"in r&&"version"in r&&("multihash"in r||"hash"in r),Bj=r=>{if(!Ye(r))return!1;let{major:e,minor:t,patch:n}=r;return Jn(e)&&Jn(t)&&Jn(n)};h();p();var el=r=>r.reduce((e,t)=>(e[t.name]=t,e),{}),tl=r=>{let e=r.Name||"",t=r.Hash,n=r.Tsize||0;return{name:e,cid:t,size:n}},Ln=(r,e,t,n)=>({name:r,cid:Xn(e),size:n,isFile:t}),py=r=>{let{name:e,cid:t,size:n}=r;return oc(e,n,ke(t))};var il={};xt(il,{SymmAlg:()=>$t});h();p();h();p();var ds;(function(r){r.ECC="ecc",r.RSA="rsa"})(ds||(ds={}));var dy;(function(r){r.P_256="P-256",r.P_384="P-384",r.P_521="P-521"})(dy||(dy={}));var my;(function(r){r[r.B1024=1024]="B1024",r[r.B2048=2048]="B2048",r[r.B4096=4096]="B4096"})(my||(my={}));var $t;(function(r){r.AES_CTR="AES-CTR",r.AES_CBC="AES-CBC",r.AES_GCM="AES-GCM"})($t||($t={}));var ac;(function(r){r[r.B128=128]="B128",r[r.B192=192]="B192",r[r.B256=256]="B256"})(ac||(ac={}));var nl;(function(r){r.SHA_1="SHA-1",r.SHA_256="SHA-256",r.SHA_384="SHA-384",r.SHA_512="SHA-512"})(nl||(nl={}));var uc;(function(r){r[r.B8=8]="B8",r[r.B16=16]="B16"})(uc||(uc={}));var _r;(function(r){r.Exchange="exchange",r.Write="write"})(_r||(_r={}));var Ja=$t.AES_CTR,cp=async(r,e)=>r.getUnixFile(e),_v=async(r,e,t,n)=>{let i=await cp(r,t),o;try{o=ro(i)}catch{return i}if(!ht(o,"alg")||!ht(o,"cip")||!Lj(o.alg)||!ArrayBuffer.isView(o.cip))throw new Error('Unexpected private block. Expected "alg" and "cip" field.');let a=o.alg,c=new Uint8Array(o.cip.buffer),f=await e.aes.decrypt(c,n,a),d=ro(f);return d instanceof Uint8Array?d:typeof d=="string"?Oe(d,"utf8"):Oe(JSON.stringify(d),"utf8")},cc=async(r,e)=>r.putChunked(e),xv=async(r,e,t,n)=>{let i=m2(t)?await t2(t):t,o=ls(i),a=$t.AES_GCM,c=await e.aes.encrypt(o,n,a),f=ls({alg:a,cip:c});return cc(r,f)},ol=async(r,e)=>{let t=await Zf(r,e);return el(t.Links.map(tl))},Oj=async(r,e)=>{let t=await Zf(r,e),n=await Promise.all(t.Links.map(async i=>{let o=await Zf(r,i.Hash),a=el(o.Links.map(tl));if(!!a.softLink){let d=await r.getUnixFile(ke(a.softLink.cid)),m=new TextDecoder().decode(d);return JSON.parse(m)}let f=await ro(await cp(r,ke(a.metadata.cid)));return{...tl(i),isFile:ht(f,"isFile")?f.isFile:!1}}));return el(n)},fc=async(r,e)=>{let t=Object.values(e).reduce(async(i,o)=>{let a=await i;if(Ur(o)){let c=await r.putChunked(Oe(JSON.stringify(o),"utf8")),f=await up(r,[oc("softLink",c.size,c.cid)]),d=await r.size(f);return[...a,oc(o.name,d,f)]}else return ht(o,"Hash")&&o.Hash?[...a,o]:VA(o)?[...a,py(o)]:a},Promise.resolve([])),n=await up(r,await t);return{cid:n,isFile:!1,size:await r.size(n)}};function Lj(r){return Ht(r)&&Object.values($t).includes(r)}h();p();var Qs={};xt(Qs,{checkValue:()=>ZA,get:()=>Mj,getAndCheckValue:()=>Pv,getValue:()=>QA,getValueFromLinks:()=>Ev,putFile:()=>Uj,putTree:()=>Nj});h();p();var Nj=async(r,e,t,n,i)=>{let o=await fc(r,e),a=Ln("userland",o.cid,!0,o.size),[c,f]=await Promise.all([Sv(r,"metadata",n),Sv(r,"skeleton",t)]),d=i!=null?Ln("previous",i,!1,await r.size(i)):void 0,m={metadata:c,skeleton:f,userland:a,previous:d},{cid:w,size:E}=await fc(r,m);return{cid:w,userland:ke(a.cid),metadata:ke(c.cid),size:E,isFile:!1,skeleton:t}},Uj=async(r,e,t,n)=>{let i=await cc(r,e),o=Ln("userland",i.cid,!0,i.size),a=await Sv(r,"metadata",t),c=n!=null?Ln("previous",n,!1,await r.size(n)):void 0,f={metadata:a,userland:o,previous:c},{cid:d,size:m}=await fc(r,f);return{cid:d,userland:ke(o.cid),metadata:ke(a.cid),size:m,isFile:!0,skeleton:{}}},Mj=async(r,e)=>{let t=await ol(r,e),n=await Pv(r,t,"metadata",sc),i=n.isFile?void 0:await Pv(r,t,"skeleton",ly),o=t.userland?.cid||null;if(!ps(o))throw new Error("Could not find userland");let a=t.previous?.cid||void 0;return{userland:o,metadata:n,previous:a,skeleton:i}},QA=async(r,e,t)=>{let n=we.asCID(e);if(ps(e)){if(!n)return null;let i=await ol(r,n);return Ev(r,i,t)}return Ev(r,e,t)},Ev=async(r,e,t)=>{let n=e[t]?.cid;if(!n)return null;let i=await cp(r,ke(n)),o=ro(i),a;return o instanceof Uint8Array?a=JSON.parse(Ge(o,"utf8")):a=o,a},Pv=async(r,e,t,n,i=!1)=>{let o=await QA(r,e,t);return ZA(o,t,n,i)},ZA=(r,e,t,n=!1)=>{if(!d2(r)){if(n)return r;throw new Error(`Could not find header value: ${e}`)}if(t(r))return r;throw new Error(`Improperly formatted header value: ${e}`)};async function Sv(r,e,t){let{cid:n,size:i}=await cc(r,ls(t));return Ln(e,n,!0,i)}var sn={};xt(sn,{addNode:()=>Qq,findLatestRevision:()=>H8,getByCID:()=>Ky,getByName:()=>Zq,getLatestByBareNameFilter:()=>eW,getLatestByCID:()=>V8,getLatestByName:()=>W8,getRevision:()=>f_,readNode:()=>q8});h();p();h();p();var yy=r=>fp(r)||Zs(r)||Ur(r),Zs=r=>Ye(r)&&sc(r.metadata)&&r.metadata.isFile&&Ht(r.key)&&Vm(r.content),fp=r=>Ye(r)&&sc(r.metadata)&&r.metadata.isFile===!1&&Jn(r.revision)&&Kj(r.links)&&eC(r.skeleton),Dv=r=>wv(r)&&Ht(r.key)&&Ht(r.pointer),Kj=r=>Ye(r)&&Object.values(r).every(e=>Dv(e)||Ur(e)),eC=r=>Ye(r)&&Object.values(r).every(e=>Av(e)||Ur(e)),Av=r=>Ye(r)&&Vm(r.cid)&&Ht(r.key)&&eC(r.subSkeleton);h();p();h();p();var wy=r=>Array.prototype.map.call(r,e=>("00"+e.toString(16)).slice(-2)).join(""),tC=r=>{let e=new Uint8Array(r.length/2);for(let t=0;t<e.length;t++)e[t]=parseInt(r.slice(t*2,t*2+2),16);return e};var K8=Ze(M8(),1),Vq=1024,Hq=16,j8=320,a_=async(r,e)=>{let t="0".repeat(Vq/4);return ao(r,t,Lo(e,"base64pad"))},ao=async(r,e,t)=>{let n=c_(e),i=await r.hash.sha256(t);return n.add(Ge(i,"hex")),await z8(n)},oa=async(r,e,t,n)=>{let i=Ge(t,"base64pad"),o=Oe(`${n}${i}`,"utf8");return await ao(r,e,o)},sa=async(r,e)=>{let t=await u_(r,c_(e));return Gq(r,t)},Gq=async(r,e)=>{let t=e.toBytes(),n=await r.hash.sha256(t);return wy(n)},$8=async(r,e,t=j8)=>{let n=await u_(r,c_(e),t);return await z8(n)},u_=async(r,e,t=j8)=>{if(t>e.toBytes().byteLength*8)throw new Error("threshold is bigger than filter size");if(Yq(e)>=t)return e;let i=e.toBytes(),o=i;do{let a=await r.hash.sha256(o);e.add(wy(a)),o=a}while(Jq(i,e.toBytes()));return u_(r,e,t)},Yq=r=>{let e=new Uint32Array(r.toBytes()),t=0;for(let n=0;n<e.length;n++)t+=Xq(e[n]);return t},z8=r=>wy(r.toBytes()),c_=r=>{let e=tC(r);return K8.BloomFilter.fromBytes(e,Hq)},Jq=(r,e)=>{if(r.byteLength!==e.byteLength)return!1;let t=new Uint8Array(r),n=new Uint8Array(e);for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0},Xq=r=>{let e=r-(r>>1&1431655765),t=(e&858993459)+(e>>2&858993459);return(t+(t>>4)&252645135)*16843009>>24};function Lo(r,e){return Oe(Ge(r,e),"utf8")}var Qq=async(r,e,t,n,i)=>{let{cid:o,size:a}=await xv(r,e,n,i),c=await oa(e,n.bareNameFilter,i,n.revision),f=await sa(e,c);if(await t.add(f,o),Zs(n)){let w=Oe(n.key,"base64pad"),E=await ao(e,n.bareNameFilter,Lo(w,"base64pad")),T=await oa(e,E,w,n.revision),F=await sa(e,T);await t.add(F,ke(n.content))}let[d,m]=Zs(n)?[{},!0]:[n.skeleton,!1];return{cid:o,name:f,key:i,size:a,isFile:m,skeleton:d}},q8=async(r,e,t,n)=>{let i=await _v(r,e,t,n),o=JSON.parse(Ge(i,"utf8"));if(!yy(o))throw new Error(`Could not parse a valid filesystem object: ${o}`);return o},Zq=async(r,e,t,n,i)=>{let o=await t.get(n);return o===null?null:Ky(r,e,o,i)},Ky=async(r,e,t,n)=>await q8(r,e,t,n),W8=async(r,e,t,n,i)=>{let o=await t.get(n);return o===null?null:V8(r,e,t,o,i)},V8=async(r,e,t,n,i)=>{let o=await Ky(r,e,n,i),a=await H8(e,t,o.bareNameFilter,i,o.revision);return a?.cid?await Ky(r,e,ke(a?.cid),i):o},eW=async(r,e,t,n,i)=>{let o=await oa(e,n,i,1),a=await sa(e,o);return W8(r,e,t,a,i)},H8=async(r,e,t,n,i)=>{let o=i,a=null,c=0,f=null;for(;a===null;){let d=i+Math.pow(2,c),m=await f_(r,e,t,n,d);m!==null?(f=m,o=d):a=d,c++}for(;o<a-1;){let d=Math.floor((a+o)/2),m=await f_(r,e,t,n,d);m!==null?(f=m,o=d):a=d}return f},f_=async(r,e,t,n,i)=>{let o=await oa(r,t,n,i),a=await sa(r,o),c=await e.get(a);return c?{cid:c,name:a,number:i}:null};h();p();async function G8(r,{bareFilter:e,shareKey:t}){let n=await r.hash.sha256(Oe(t,"base64pad"));return $8(r,await ao(r,e,Lo(n,"hex")))}h();p();async function jy(r,{counter:e,recipientExchangeDid:t,senderRootDid:n}){let i=Oe(`${t}${n}${e}`,"utf8");return Ge(await r.hash.sha256(i),"base64pad")}function Y8({entryIndexCid:r,symmKey:e,symmKeyAlgo:t}){let n=r;return{algo:t,key:typeof e=="string"?Oe(e,"base64pad"):e,cid:n}}h();p();h();p();h();p();var Cp=class{constructor(e){this.content=e,this.readOnly=!1}async put(){let{cid:e}=await this.putDetailed();return e}async updateContent(e){if(this.readOnly)throw new Error("File is read-only");return this.content=e,this}},wl=Cp;var bl=class extends wl{constructor(t,n){super(n);this.depot=t}static create(t,n){return new bl(t,n)}static async fromCID(t,n){let i=await Tt.getFile(t,n);return new bl(t,i)}static instanceOf(t){return Ye(t)&&ht(t,"content")}async put(){let{cid:t}=await this.putDetailed();return t}async putDetailed(){return Tt.putFile(this.depot,this.content)}},$y=bl;h();p();var l_=class{constructor(){this.readOnly=!1}async put(){let{cid:e}=await this.putDetailed();return e}async ls(e){let t=await this.get(e);if(t===null)throw new Error("Path does not exist");if(kr(t))throw new Error("Can not `ls` a file");return t.getLinks()}async cat(e){let t=await this.get(e);if(t===null)throw new Error("Path does not exist");if(!kr(t))throw new Error("Can not `cat` a directory");return t.content}async mkdir(e){return this.mkdirRecurse(e,()=>this.put())}async mkdirRecurse(e,t){let[n,...i]=e;if(!n)throw new Error("Invalid path: empty");let o=await this.getOrCreateDirectChild(n,t);if(kr(o))throw new Error(`There is a file along the given path: ${Do(e)}`);return i.length&&await o.mkdirRecurse(i,()=>this.updateDirectChild(o,n,t)),this}async add(e,t){return await this.addRecurse(e,t,()=>this.put()),this}async addRecurse(e,t,n){let[i,...o]=e;if(!i)throw new Error("Invalid path: empty");if(o.length===0)await this.createOrUpdateChildFile(t,i,n);else{let a=await this.getOrCreateDirectChild(i,n);if(kr(a))throw new Error(`There is a file along the given path: ${Do(e)}`);await a.addRecurse(o,t,async()=>{await this.updateDirectChild(a,i,n)})}return this}async rm(e){return await this.rmRecurse(e,()=>this.put()),this}async rmRecurse(e,t){let[n,...i]=e;if(!n)throw new Error("Invalid path: empty");if(i.length===0)this.removeDirectChild(n),t&&await t();else{let o=await this.getDirectChild(n);if(o===null)throw new Error("Invalid path: does not exist");if(kr(o))throw new Error(`There is a file along the given path: ${Do(e)}`);await o.rmRecurse(i,async()=>{await this.updateDirectChild(o,n,t)})}return this}async mv(e,t){let n=await this.get(e);if(n===null)throw new Error(`Path does not exist: ${Do(e)}`);if(t.length<1)throw new Error(`Path does not exist: ${Do(t)}`);let i=t.slice(0,-1),o=await this.get(i);if(!o)await this.mkdir(i),o=await this.get(i);else if(kr(o))throw new Error(`Can not \`mv\` to a file: ${Do(i)}`);return await this.rm(e),await[...t].reverse().reduce((a,c,f)=>a.then(async d=>{let m=t.slice(0,-(f+1)),w=m.length?await this.get(m):this;if(w&&!kr(w))return await w.updateDirectChild(d,c,null),w;throw new Error("Failed to update tree while moving node")}),Promise.resolve(n)),this}async exists(e){return await this.get(e)!==null}read(e){return this.get(e)}write(e,t){return this.add(e,t)}async getOrCreateDirectChild(e,t){let n=await this.getDirectChild(e);return n!==null?n:this.createChildTree(e,t)}async updateChild(e,t){let n=[];return await t.reduce(async(i,o,a)=>{let c=await i;if(n.push([o,c]),a+1===t.length)return c;let f=await c.getDirectChild(o);if(!fy(f)){let d=t.slice(a+1);throw new Error(`Expected a tree at the given path: ${Do(d)}`)}return f},Promise.resolve(this)),await n.reverse().reduce(async(i,[o,a])=>(await a.updateDirectChild(await i,o,null),a),Promise.resolve(e)),this}},vl=l_;var aa=class extends vl{constructor(t,n){super();this.type="BareTree",this.links=n,this.children={},this.depot=t}static async empty(t){return new aa(t,{})}static async fromCID(t,n){let i=el(await t.getUnixDirectory(n));return new aa(t,i)}static fromLinks(t,n){return new aa(t,n)}static instanceOf(t){return Ye(t)&&ht(t,"links")&&ht(t,"children")&&ht(t,"type")&&t.type==="BareTree"}async createChildTree(t,n){let i=await aa.empty(this.depot),o=this.children[t];if(o){if(kr(o))throw new Error(`There is a file at the given path: ${t}`);return o}return await this.updateDirectChild(i,t,n),i}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null)a=await $y.create(this.depot,t);else if($y.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){return Tt.putLinks(this.depot,this.links)}async putAndUpdateLink(t,n,i){let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}async updateDirectChild(t,n,i){return this.children[n]=t,this.putAndUpdateLink(t,n,i)}removeDirectChild(t){return delete this.links[t],this.children[t]&&delete this.children[t],this}async getDirectChild(t){if(this.children[t])return this.children[t];let n=this.links[t]||null;if(n===null)return null;let i=ke(n.cid),o=n.isFile?await $y.fromCID(this.depot,i):await aa.fromCID(this.depot,i);return this.children[t]?this.children[t]:(this.children[t]=o,o)}async get(t){let[n,...i]=t;if(!n)return this;let o=await this.getDirectChild(n);if(i.length){if(o===null||kr(o))return null}else return o;return o.get(i)}updateLink(t,n){let{cid:i,size:o,isFile:a}=n;return this.links[t]=Ln(t,i,a,o),this}getLinks(){return this.links}},ua=aa;h();p();h();p();var rW={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,a:!0,b:!0,c:!0,d:!0,e:!0,f:!0},nW=r=>rW[r]===!0,wn=class{constructor(e,t){this.links=t,this.children={},this.depot=e}static create(e){return new wn(e,{})}static async fromCID(e,t){let n=await ol(e,t);return new wn(e,n)}async putDetailed(){return fc(this.depot,this.links)}async put(){let{cid:e}=await this.putDetailed();return e}async add(e,t){if(!nW(e[0]))throw new Error("Not a valid name, must be hexadecimal");let n=this.nextTreeOrSiblingName(e);if(e!==n)if(n===null)this.links[e]=Ln(e,t,!0,0);else if(n.length===1)await(await this.getDirectChild(n)).add(e.slice(1),t),await this.putAndUpdateChildLink(n);else{let i=this.addEmptyChild(e[0]),o=this.links[n].cid;this.removeChild(n),await Promise.all([i.add(e.slice(1),t),i.add(n.slice(1),ke(o))]),await this.putAndUpdateChildLink(e[0])}}async putAndUpdateChildLink(e){let t=this.links[e]?.cid,{cid:n,size:i}=await this.children[e].putDetailed(),o=this.links[e]?.cid;if(t!=o)return await this.putAndUpdateChildLink(e);this.links[e]=Ln(e,n,!1,i)}addEmptyChild(e){let t=wn.create(this.depot);return this.children[e]=t,t}async get(e){let t=this.nextTreeName(e);return t===null?null:t.length>1?ke(this.links[t].cid):(await this.getDirectChild(t)).get(e.slice(1))}async exists(e){return await this.get(e)!==null}async members(){return(await Promise.all(Object.values(this.links).map(async({name:t,cid:n})=>t.length>1?[{name:t,cid:ke(n)}]:(await(await wn.fromCID(this.depot,ke(n))).members()).map(a=>({...a,name:t+a.name}))))).reduce((t,n)=>t.concat(n))}async getDirectChild(e){if(this.children[e])return this.children[e];let t=await wn.fromCID(this.depot,ke(this.links[e].cid));return this.children[e]?this.children[e]:(this.children[e]=t,t)}removeChild(e){delete this.links[e],this.children[e]&&delete this.children[e]}directChildExists(e){return this.links[e]!==void 0||this.children[e]!==void 0}nextTreeName(e){return this.directChildExists(e[0])?e[0]:this.directChildExists(e)?e:null}nextTreeOrSiblingName(e){let t=e[0];return this.directChildExists(t)?t:Object.keys(this.links).find(n=>t===n[0])||null}};h();p();h();p();var iW=r=>({mtime:Date.now(),ctime:Date.now(),mode:r?644:755,_type:r?"file":"dir"}),eu=(r,e)=>({isFile:r,version:e,unixMeta:iW(r)}),zy=r=>({...r,unixMeta:{...r.unixMeta,mtime:Date.now()}});h();p();h();p();var Ip=(r,e,t)=>({major:r,minor:e,patch:t}),Pc=r=>{let e=r.split(".").map(t=>parseInt(t));return e.length!==3||e.some(t=>typeof t!="number")?null:{major:e[0],minor:e[1],patch:e[2]}},Sc=r=>{let{major:e,minor:t,patch:n}=r;return`${e}.${t}.${n}`},h_=(r,e)=>r.major===e.major&&r.minor===e.minor&&r.patch===e.patch,Wy=(r,e)=>r.major!=e.major?r.major<e.major:r.minor!=e.minor?r.minor<e.minor:r.patch<e.patch,X8=(r,e)=>Wy(e,r);function Q8(r,e){return Wy(e,r)||h_(r,e)}var eI=r=>Wy(r,Ai)?"too-low":X8(r,Dc)?"too-high":!0,tI=Ip(0,0,0),Lue=Ip(1,0,0),Ai=Ip(2,0,0),Dc=Ip(3,0,0),p_=[Ai,Dc];h();p();var Cc=class{constructor(e,t,n){this.crypto=e,this.depot=t,this.node=n}async back(e=-1){let t=Math.min(e,-1),n=this.node.header?.revision;return n&&await this._getRevision(n+t)||null}async prior(e){return this.node.header.metadata.unixMeta.mtime<e?this.node:this._prior(this.node.header.revision-1,e)}async list(e=5){let t=this.node.header.revision;return Promise.all(Array.from({length:e},(n,i)=>{let o=i+1;return this._getRevisionInfoFromNumber(t-o).then(a=>({revisionInfo:a,delta:-o}))})).then(n=>n.filter(i=>!!i.revisionInfo)).then(n=>n.map(i=>{let o=i.revisionInfo.metadata.unixMeta.mtime;return{delta:i.delta,timestamp:o}}))}async _getRevision(e){let t=await this._getRevisionInfoFromNumber(e);return t&&await this.node.fromInfo(this.node.mmpt,this.node.key,t)}_getRevisionInfo(e){return sn.readNode(this.depot,this.crypto,ke(e.cid),this.node.key)}async _getRevisionInfoFromNumber(e){let{mmpt:t}=this.node,{bareNameFilter:n}=this.node.header,i=this.node.key,o=await sn.getRevision(this.crypto,t,n,i,e);return o&&this._getRevisionInfo(o)}async _prior(e,t){let n=await this._getRevisionInfoFromNumber(e);return n?.revision?n.metadata.unixMeta.mtime<t?this._getRevision(n.revision):this._prior(n.revision-1,t):null}};var ca=class extends wl{constructor({crypto:t,depot:n,content:i,mmpt:o,key:a,header:c}){super(i);this.crypto=t,this.depot=n,this.header=c,this.key=a,this.mmpt=o,this.history=new Cc(t,n,f(this));function f(d){return{...d,fromInfo:async(m,w,E)=>f(await ca.fromInfo(t,n,m,w,E))}}}static instanceOf(t){return Ye(t)&&ht(t,"content")&&ht(t,"mmpt")&&ht(t,"header")&&Zs(t.header)}static async create(t,n,i,o,a,c){let f=await t.aes.exportKey(await t.aes.genKey(Ja)),d=await ao(t,a,Lo(c,"base64pad")),m=await Tt.putEncryptedFile(n,t,o,f);return new ca({crypto:t,depot:n,content:o,mmpt:i,key:c,header:{bareNameFilter:d,key:Ge(f,"base64pad"),revision:1,metadata:eu(!0,Ai),content:Xn(m.cid)}})}static async fromBareNameFilter(t,n,i,o,a){let c=await sn.getLatestByBareNameFilter(n,t,i,o,a);return this.fromInfo(t,n,i,a,c)}static async fromLatestName(t,n,i,o,a){let c=await sn.getLatestByName(n,t,i,o,a);return ca.fromInfo(t,n,i,a,c)}static async fromName(t,n,i,o,a){let c=await sn.getByName(n,t,i,o,a);return ca.fromInfo(t,n,i,a,c)}static async fromInfo(t,n,i,o,a){if(!Zs(a))throw new Error("Could not parse a valid private file using the given key");let c=await Tt.getEncryptedFile(n,t,ke(a.content),Oe(a.key,"base64pad"));return new ca({crypto:t,depot:n,content:c,key:o,mmpt:i,header:a})}async getName(){let{bareNameFilter:t,revision:n}=this.header,i=await oa(this.crypto,t,this.key,n);return sa(this.crypto,i)}async updateParentNameFilter(t){return this.header.bareNameFilter=await ao(this.crypto,t,Lo(Oe(this.header.key,"base64pad"),"base64pad")),this}async updateContent(t){let n=await Tt.putEncryptedFile(this.depot,this.crypto,t,Oe(this.header.key,"base64pad"));return this.content=t,this.header={...this.header,revision:this.header.revision+1,content:Xn(n.cid)},this}async putDetailed(){return sn.addNode(this.depot,this.crypto,this.mmpt,{...this.header,metadata:zy(this.header.metadata)},this.key)}},Ci=ca;var er=class extends vl{constructor({crypto:t,depot:n,manners:i,reference:o,mmpt:a,key:c,header:f}){super();this.crypto=t,this.depot=n,this.manners=i,this.reference=o,this.children={},this.header=f,this.key=c,this.mmpt=a,this.history=new Cc(t,n,d(this));function d(m){return{...m,fromInfo:async(w,E,T)=>d(await er.fromInfo(t,n,i,o,w,E,T))}}}static instanceOf(t){return Ye(t)&&ht(t,"mmpt")&&ht(t,"header")&&fp(t.header)}static async create(t,n,i,o,a,c,f){let d=f?await ao(t,f,Lo(c,"base64pad")):await a_(t,c);return new er({crypto:t,depot:n,manners:i,reference:o,mmpt:a,key:c,header:{metadata:eu(!1,Ai),bareNameFilter:d,revision:1,links:{},skeleton:{}}})}static async fromBaseKey(t,n,i,o,a,c){let f=await a_(t,c);return this.fromBareNameFilter(t,n,i,o,a,f,c)}static async fromBareNameFilter(t,n,i,o,a,c,f){let d=await sn.getLatestByBareNameFilter(n,t,a,c,f);return this.fromInfo(t,n,i,o,a,f,d)}static async fromLatestName(t,n,i,o,a,c,f){let d=await sn.getLatestByName(n,t,a,c,f);return this.fromInfo(t,n,i,o,a,f,d)}static async fromName(t,n,i,o,a,c,f){let d=await sn.getByName(n,t,a,c,f);return this.fromInfo(t,n,i,o,a,f,d)}static async fromInfo(t,n,i,o,a,c,f){if(!fp(f))throw new Error("Could not parse a valid private tree using the given key");return new er({crypto:t,depot:n,manners:i,reference:o,mmpt:a,key:c,header:f})}async createChildTree(t,n){let i=await this.crypto.aes.genKey(Ja).then(this.crypto.aes.exportKey),o=await er.create(this.crypto,this.depot,this.manners,this.reference,this.mmpt,i,this.header.bareNameFilter),a=this.children[t];if(a){if(Ci.instanceOf(a))throw new Error(`There is a file at the given path: ${t}`);return a}return await this.updateDirectChild(o,t,n),o}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null){let c=await this.crypto.aes.genKey(Ja).then(this.crypto.aes.exportKey);a=await Ci.create(this.crypto,this.depot,this.mmpt,t,this.header.bareNameFilter,c)}else if(Ci.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){let t=Object.assign({},this.header);return t.skeleton=rI(t.skeleton),sn.addNode(this.depot,this.crypto,this.mmpt,t,this.key)}async updateDirectChild(t,n,i){if(this.readOnly)throw new Error("Tree is read-only");await t.updateParentNameFilter(this.header.bareNameFilter),this.children[n]=t;let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}removeDirectChild(t){return this.header={...this.header,revision:this.header.revision+1,links:Jb(this.header.links,t),skeleton:Jb(this.header.skeleton,t)},this.children[t]&&delete this.children[t],this}async getDirectChild(t){let n=null;if(this.children[t])return this.children[t];let i=this.header.links[t];if(i===void 0)return null;if(Dv(i)){let o=Oe(i.key,"base64pad");n=i.isFile?await Ci.fromLatestName(this.crypto,this.depot,this.mmpt,i.pointer,o):await er.fromLatestName(this.crypto,this.depot,this.manners,this.reference,this.mmpt,i.pointer,o)}else if(Ur(i))return er.resolveSoftLink(this.crypto,this.depot,this.manners,this.reference,i);return this.children[t]?this.children[t]:(n&&(this.children[t]=n),n)}async getName(){let{bareNameFilter:t,revision:n}=this.header,i=await oa(this.crypto,t,this.key,n);return sa(this.crypto,i)}async updateParentNameFilter(t){return this.header.bareNameFilter=await ao(this.crypto,t,Lo(this.key,"base64pad")),this}async get(t){if(t.length===0)return this;let[n,...i]=t,o=this.header.skeleton[n];return o===void 0?null:this.getRecurse(o,i)}async getRecurse(t,n){let[i,...o]=n;if(Ur(t)){let d=await er.resolveSoftLink(this.crypto,this.depot,this.manners,this.reference,t);if(!d)return null;if(i===void 0)return d;if(er.instanceOf(d))return d.get(n).then(sW);throw new Error("Was expecting a directory at: "+Do(n))}if(i===void 0)return oW(this.crypto,this.depot,this.manners,this.reference,this.mmpt,t);let a=t.subSkeleton[i];if(a!==void 0)return this.getRecurse(a,o);let c=await sn.getLatestByCID(this.depot,this.crypto,this.mmpt,ke(t.cid),Oe(t.key,"base64pad"));if(!fp(c))return null;let f=c.skeleton[i];return f===void 0?null:this.getRecurse(f,o)}assignLink({name:t,link:n,skeleton:i}){this.header.links[t]=n,this.header.skeleton[t]=i,this.header.revision=this.header.revision+1,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(t,n,i,o,a){let c=a.ipns.split("/")[0];if(!a.privateName||!a.key)throw new Error("Mixing public and private soft links is not supported yet.");let f=await o.dns.lookupDnsLink(c);if(!f)throw new Error(`Failed to resolve the soft link: ${a.ipns} - Could not resolve DNSLink`);let d=(await Tt.getSimpleLinks(n,ke(f))).private.cid,m=await wn.fromCID(n,ke(d)),w=Oe(a.key,"base64pad"),E=await sn.getLatestByName(n,t,m,a.privateName,w);if(!E)return null;let T=E.metadata.isFile?await Ci.fromInfo(t,n,m,w,E):await er.fromInfo(t,n,i,o,m,w,E);return T&&(T.readOnly=!0),T}getLinks(){return y2(this.header.links,t=>{if(Ur(t))return{...t};{let{key:n,...i}=t;return{...i}}})}updateLink(t,n){let{cid:i,size:o,isFile:a,skeleton:c}=n,f=Ge(n.key,"base64pad"),d=n.name;return this.assignLink({name:t,link:{name:t,key:f,pointer:d,size:o,isFile:a},skeleton:{cid:Xn(i),key:f,subSkeleton:c}}),this}insertSoftLink({name:t,key:n,privateName:i,username:o}){let a={ipns:this.reference.dataRoot.domain(o),name:t,privateName:i,key:Ge(n,"base64pad")};return this.assignLink({name:t,link:a,skeleton:a}),this}};async function oW(r,e,t,n,i,o){let a=Oe(o.key,"base64pad"),c=await sn.getLatestByCID(e,r,i,ke(o.cid),a);return Zs(c)?await Ci.fromInfo(r,e,i,a,c):await er.fromInfo(r,e,t,n,i,a,c)}function rI(r){return Object.entries(r).reduce((e,[t,n])=>{let i=n;return Av(n)&&(n.cid=ke(n.cid).toString(),n.subSkeleton=rI(n.subSkeleton)),{...e,[t]:i}},{})}function sW(r){return r&&(r.readOnly=!0),r}var Vy=Ar("public",".well-known","exchange");async function nI(r,e,t,n,i,o,{shareWith:a,sharedBy:c}){let f=Array.isArray(a)?a:a.startsWith("did:")?[a]:await aW(e,n,a),d=i.sharedCounter||1,m=i.mmpt,w=await Promise.all(f.map(async re=>[re,await jy(r,{counter:d,recipientExchangeDid:re,senderRootDid:c.rootDid})])),E=await r.aes.genKey($t.AES_GCM).then(r.aes.exportKey),T=await er.create(r,e,t,n,m,E,null);await Promise.all(o.map(async([re,be])=>{let Pe=await be.getName();return T.insertSoftLink({key:be.key,name:re,privateName:Pe,username:c.username})}));let F=$t.AES_GCM,U=Object.assign({},T.header),pe=await cc(e,await r.aes.encrypt(Oe(JSON.stringify(U),"utf8"),T.key,F));if(w.length){let re=await G8(r,{bareFilter:U.bareNameFilter,shareKey:w[0][1]});await m.add(re,pe.cid)}let he=ls(Y8({entryIndexCid:Xn(pe.cid),symmKey:T.key,symmKeyAlgo:F})),De=await Promise.all(w.map(async([re,be])=>{let{publicKey:Pe}=rc(r,re),Y=await r.rsa.encrypt(he,Pe),ge=await e.putChunked(Y);return{name:be,cid:ge.cid,size:ge.size}}));return await i.addShares(De),{shareId:d.toString(),sharedBy:c}}async function aW(r,e,t){let n=await e.dataRoot.lookup(t);if(!n)throw new Error("This person doesn't have a filesystem yet.");let o=(await Tt.getSimpleLinks(r,n))["p"]?.cid||null;if(!o)throw new Error("This person's filesystem doesn't have a pretty tree.");let a=await ua.fromCID(r,ke(o)),c=Qt(ec(Vy)),f=await a.get(c);return f&&f instanceof ua?Object.keys(f.getLinks()):[]}async function oI(r){await r.mkdir(Ar("private","Apps")),await r.mkdir(Ar("private","Audio")),await r.mkdir(Ar("private","Documents")),await r.mkdir(Ar("private","Photos")),await r.mkdir(Ar("private","Video")),await r.write(Kh("private","Welcome.txt"),new TextEncoder().encode("Welcome to your personal transportable encrypted file system \u{1F44B}"))}async function sI(r,e){let t=await Io(r);await e.mkdir(Nf(Vy,Ar(t)))}async function aI(r,e){let t=await Io(r);return e.exists(Nf(Vy,Ar(t)))}h();p();async function d_({crypto:r,accountDID:e}){let t=await cI(r,e);return r.keystore.exportSymmKey(t)}async function tu({crypto:r,accountDID:e,readKey:t}){let n=await cI(r,e);return r.keystore.importSymmKey(t,n)}function uI(r){return Oe(r,"base64pad")}function cI(r,e){let t=Ar("private");return tc({crypto:r,path:t,accountDID:e})}h();p();var Tp,uo,gs=class{constructor(e){ib(this,Tp,void 0);ib(this,uo,void 0);ob(this,Tp,e.crypto),ob(this,uo,e.storage),this.fs=e.fs,this.type=e.type,this.username=e.username}async destroy(){await os(this,uo).removeItem(os(this,uo).KEYS.ACCOUNT_UCAN),await os(this,uo).removeItem(os(this,uo).KEYS.CID_LOG),await os(this,uo).removeItem(os(this,uo).KEYS.SESSION),await os(this,uo).removeItem(os(this,uo).KEYS.UCANS),await os(this,Tp).keystore.clearStore(),this.fs&&this.fs.deactivate()}};Tp=new WeakMap,uo=new WeakMap;function cW(r){return Ye(r)&&ht(r,"username")&&ht(r,"type")}async function m_(r){return r.getItem(r.KEYS.SESSION).then(e=>e||null).then(e=>e?JSON.parse(e):null).then(e=>cW(e)?e:null)}function Ic(r,e){return r.setItem(r.KEYS.SESSION,JSON.stringify({type:e.type,username:e.username}))}h();p();var Uo="webCrypto";async function g_(r,e){let t=await r.reference.didRoot.lookup(e),n=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN);if(n){let i=za(n),o=Qn(n),{ptc:a}=o.payload;return t===i&&a==="SUPER_USER"}else{let i=await Zt(r.crypto);return t===i}}async function w_(r,e,t){let n=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN)??void 0,i=await Jr({dependencies:r,audience:t,issuer:await Zt(r.crypto),lifetimeInSeconds:60*60*24*30*12*1e3,potency:"SUPER_USER",proof:n});return{token:rn(i)}}async function fW(r,e,t){let{token:n}=t,i=Qn(n);await $a(r.crypto,i)&&(await r.storage.setItem(r.storage.KEYS.ACCOUNT_UCAN,n),await Ic(r.storage,{type:Uo,username:e}))}async function b_(r,e){return await Ic(r.storage,{type:e.type||Uo,username:e.username}),{success:!0}}async function lW(r,e,t){return e?new gs({crypto:r.crypto,storage:r.storage,type:Uo,username:e}):null}function Gy(r){return{type:Uo,canDelegateAccount:(...e)=>g_(r,...e),delegateAccount:(...e)=>w_(r,...e),linkDevice:(...e)=>fW(r,...e),register:(...e)=>b_(r,...e),session:lW,createChannel:()=>{throw new Error("Not implemented")},isUsernameValid:()=>{throw new Error("Not implemented")},isUsernameAvailable:()=>{throw new Error("Not implemented")}}}h();p();h();p();h();p();var $r=class extends Error{constructor(e){super(e),this.name="LinkingError"}},co=class extends Error{constructor(e){super(e),this.name="LinkingWarning"}},Yy=(r,e)=>{switch(e.name){case"LinkingWarning":r.warn(e.message);break;case"LinkingError":throw e;default:throw e}},_l=(r,e,t)=>{try{let n=JSON.parse(r);return e(n)?{ok:!0,value:n}:{ok:!1,error:new co(`${t.participant} received an unexpected message in ${t.callSite}: ${r}. Ignoring message.`)}}catch{return{ok:!1,error:new co(`${t.participant} received a message in ${t.callSite} that it could not parse: ${r}. Ignoring message.`)}}};var v_=async(r,e)=>{let{username:t}=e,n=m=>Yy(r.manners,m),i=new qa,o={username:t,sessionKey:null,temporaryRsaPair:null,step:"BROADCAST"},a=async m=>{let{data:w}=m,E=w.arrayBuffer?new TextDecoder().decode(await w.arrayBuffer()):w;switch(o.step){case"BROADCAST":return n(new co("Consumer is not ready to start linking"));case"NEGOTIATION":if(o.sessionKey)n(new co("Consumer already received a session key"));else if(!o.temporaryRsaPair||!o.temporaryRsaPair.privateKey)n(new $r("Consumer missing RSA key pair when handling session key message"));else{let T=await dW(r.crypto,o.temporaryRsaPair.privateKey,E);if(T.ok){o.sessionKey=T.value;let{pin:F,challenge:U}=await mW(r.crypto,o.sessionKey);f.send(U),i?.emit("challenge",{pin:Array.from(F)}),o.step="DELEGATION"}else n(T.error)}break;case"DELEGATION":if(!o.sessionKey)n(new $r("Consumer was missing session key when linking device"));else if(!o.username)n(new $r("Consumer was missing username when linking device"));else{let T=await yW(r.auth,r.crypto,o.sessionKey,o.username,E);if(T.ok){let{approved:F}=T.value;i?.emit("link",{approved:F,username:o.username}),await c()}else n(T.error)}break}},c=async()=>{i?.emit("done",void 0),i=null,f.close(),clearInterval(d)},f=await r.auth.createChannel({handleMessage:a,username:t}),d=setInterval(async()=>{if(o.sessionKey)clearInterval(d);else{let{temporaryRsaPair:m,temporaryDID:w}=await pW(r.crypto);o.temporaryRsaPair=m,o.step="NEGOTIATION",f.send(w)}},2e3);return{on:(...m)=>i?.on(...m),cancel:c}},pW=async r=>{let e=await r.rsa.genKey(),t=await r.rsa.exportPublicKey(e.publicKey),n=qf(r,t,"rsa");return{temporaryRsaPair:e,temporaryDID:n}},dW=async(r,e,t)=>{let i=_l(t,o=>Ye(o)&&"iv"in o&&typeof o.iv=="string"&&"msg"in o&&typeof o.msg=="string"&&"sessionKey"in o&&typeof o.sessionKey=="string",{participant:"Consumer",callSite:"handleSessionKey"});if(i.ok){let{iv:o,msg:a,sessionKey:c}=i.value,f=Oe(o,"base64pad"),d;try{let F=Oe(c,"base64pad");d=await r.rsa.decrypt(F,e)}catch{return{ok:!1,error:new co(`Consumer received a session key in handleSessionKey that it could not decrypt: ${t}. Ignoring message`)}}let m=null;try{m=await r.aes.decrypt(Oe(a,"base64pad"),d,$t.AES_GCM,f)}catch{return{ok:!1,error:new $r("Consumer could not decrypt closed UCAN with provided session key.")}}let w=Qn(Ge(m,"utf8"));if(await $a(r,w)===!1)return{ok:!1,error:new $r("Consumer received an invalid closed UCAN")};if(w.payload.ptc)return{ok:!1,error:new $r("Consumer received a closed UCAN with potency. Closed UCAN must not have potency.")};let E=w.payload.fct[0]&&w.payload.fct[0].sessionKey;if(!E)return{ok:!1,error:new $r("Consumer received a closed UCAN that was missing a session key in facts.")};let T=Ge(d,"base64pad");return E!==T?{ok:!1,error:new $r("Consumer received a closed UCAN session key does not match the session key")}:{ok:!0,value:d}}else return i},mW=async(r,e)=>{let t=Array.from(r.misc.randomNumbers({amount:6})).map(a=>a%9),n=r.misc.randomNumbers({amount:16}),i=await r.aes.encrypt(Oe(JSON.stringify({did:await Zt(r),pin:t}),"utf8"),e,$t.AES_GCM,n),o=JSON.stringify({iv:Ge(n,"base64pad"),msg:Ge(i,"base64pad")});return{pin:t,challenge:o}},yW=async(r,e,t,n,i)=>{let a=_l(i,c=>Ye(c)&&"iv"in c&&typeof c.iv=="string"&&"msg"in c&&typeof c.msg=="string",{participant:"Consumer",callSite:"linkDevice"});if(a.ok){let{iv:c,msg:f}=a.value,d=Oe(c,"base64"),m=null;try{m=await e.aes.decrypt(Oe(f,"base64pad"),t,$t.AES_GCM,d)}catch{return{ok:!1,error:new co("Consumer ignoring message that could not be decrypted in linkDevice.")}}let w=_l(Ge(m,"utf8"),Ye,{participant:"Consumer",callSite:"linkDevice"});return w.ok?w?.value.linkStatus==="DENIED"?{ok:!0,value:{approved:!1}}:(await r.linkDevice(n,w.value),{ok:!0,value:{approved:!0}}):w}else return a};h();p();var __=async(r,e)=>{let{username:t}=e,n=E=>Yy(r.manners,E);if(!await r.auth.canDelegateAccount(t))throw new $r(`Producer cannot delegate account for username ${t}`);let o=new qa,a={username:t,sessionKey:null,step:"BROADCAST"},c=async E=>{let{data:T}=E,F=T.arrayBuffer?new TextDecoder().decode(await T.arrayBuffer()):T;switch(a.step){case"BROADCAST":{let{sessionKey:U,sessionKeyMessage:pe}=await gW(r.crypto,F);return a.sessionKey=U,a.step="NEGOTIATION",w.send(pe)}case"NEGOTIATION":if(a.sessionKey){let U=await wW(r.crypto,a.sessionKey,F);if(a.step="DELEGATION",U.ok){let{pin:pe,audience:he}=U.value,De=()=>{let Pe=!1;return{confirmPin:async()=>{Pe||(Pe=!0,a.sessionKey?await bW(r.auth,r.crypto,a.sessionKey,t,he,f):n(new $r("Producer missing session key when delegating account")))},rejectPin:async()=>{Pe||(Pe=!0,a.sessionKey?await vW(r.crypto,a.sessionKey,f):n(new $r("Producer missing session key when declining account delegation")))}}},{confirmPin:re,rejectPin:be}=De();o?.emit("challenge",{pin:pe,confirmPin:re,rejectPin:be})}else n(U.error)}else n(new $r("Producer missing session key when handling user challenge"));break;case"DELEGATION":return n(new co("Producer received an unexpected message while delegating an account. The message will be ignored."))}},f=async(E,T)=>{await w.send(E),a.username!=null&&(o?.emit("link",{approved:T,username:a.username}),d())},d=()=>{a.sessionKey=null,a.step="BROADCAST"},m=async()=>{o?.emit("done",void 0),o=null,w.close()},w=await r.auth.createChannel({username:t,handleMessage:c});return{on:(...E)=>o?.on(...E),cancel:m}},gW=async(r,e)=>{let t=await r.aes.genKey($t.AES_GCM),n=await r.aes.exportKey(t),{publicKey:i}=rc(r,e),o=await r.rsa.encrypt(n,i),a=await Jr({dependencies:{crypto:r},issuer:await Zt(r),audience:e,lifetimeInSeconds:60*5,facts:[{sessionKey:Ge(n,"base64pad")}],potency:null}),c=r.misc.randomNumbers({amount:16}),f=await r.aes.encrypt(Oe(rn(a),"utf8"),t,$t.AES_GCM,c),d=JSON.stringify({iv:Ge(c,"base64pad"),msg:Ge(f,"base64pad"),sessionKey:Ge(o,"base64pad")});return{sessionKey:t,sessionKeyMessage:d}},wW=async(r,e,t)=>{let i=_l(t,o=>Ye(o)&&"iv"in o&&typeof o.iv=="string"&&"msg"in o&&typeof o.msg=="string",{participant:"Producer",callSite:"handleUserChallenge"});if(i.ok){let{iv:o,msg:a}=i.value,c=Oe(o,"base64pad"),f=null;try{f=await r.aes.decrypt(Oe(a,"base64pad"),e,$t.AES_GCM,c)}catch{return{ok:!1,error:new co("Ignoring message that could not be decrypted.")}}let d=JSON.parse(Ge(f,"utf8")),m=d.pin??null,w=d.did??null;return m!==null&&w!==null?{ok:!0,value:{pin:m,audience:w}}:{ok:!1,error:new $r(`Producer received invalid pin ${d.pin} or audience ${d.audience}`)}}else return i},bW=async(r,e,t,n,i,o)=>{let a=await r.delegateAccount(n,i),c=JSON.stringify(a),f=e.misc.randomNumbers({amount:16}),d=await e.aes.encrypt(Oe(c,"utf8"),t,$t.AES_GCM,f),m=JSON.stringify({iv:Ge(f,"base64pad"),msg:Ge(d,"base64pad")});await o(m,!0)},vW=async(r,e,t)=>{let n=JSON.stringify({linkStatus:"DENIED"}),i=r.misc.randomNumbers({amount:16}),o=await r.aes.encrypt(Oe(n,"utf8"),e,$t.AES_GCM,i),a=JSON.stringify({iv:Ge(i,"base64pad"),msg:Ge(o,"base64pad")});await t(a,!1)};h();p();function _W(r){return{...r,permissions:{...r.permissions,...Wh}}}function Tc(r){return Ht(r.namespace)?r.namespace:Nb(r.namespace)}h();p();h();p();h();p();function hI(r,e,t,n){var i,o=!1,a=0;function c(){i&&clearTimeout(i)}function f(){c(),o=!0}typeof e!="boolean"&&(n=t,t=e,e=void 0);function d(){for(var m=arguments.length,w=new Array(m),E=0;E<m;E++)w[E]=arguments[E];var T=this,F=Date.now()-a;if(o)return;function U(){a=Date.now(),t.apply(T,w)}function pe(){i=void 0}n&&!i&&U(),c(),n===void 0&&F>r?U():e!==!0&&(i=setTimeout(n?pe:U,n===void 0?r-F:r))}return d.cancel=f,d}h();p();var xl=class extends Error{constructor(e){super(e),this.name="NoPermissionError"}};h();p();h();p();h();p();function pI(r){let e=r.slice(1);return e.length<1?null:e}h();p();h();p();var ei=class{constructor(e){this.node=e}back(e=-1){let t=Math.abs(Math.min(e,-1));return Array.from({length:t},(n,i)=>i).reduce(n=>n.then(i=>i?ei._getPreviousVersion(i):null),Promise.resolve(this.node))}async prior(e){return ei._prior(this.node,e)}async list(e=5){let{acc:t}=await Array.from({length:e},(n,i)=>i).reduce((n,i)=>n.then(({node:o,acc:a})=>o?ei._getPreviousVersion(o).then(c=>({node:c,acc:[...a,{delta:-(i+1),timestamp:o.header.metadata.unixMeta.mtime}]})):Promise.resolve({node:null,acc:a})),ei._getPreviousVersion(this.node).then(n=>({node:n,acc:[]})));return t}static async _getPreviousVersion(e){return e.header.previous?e.fromCID(ke(e.header.previous)):Promise.resolve(null)}static async _prior(e,t){if(e.header.metadata.unixMeta.mtime<t)return e;let n=await ei._getPreviousVersion(e);return n?ei._prior(n,t):null}};var ru=class extends wl{constructor({depot:t,content:n,header:i,cid:o}){super(n);this.depot=t,this.cid=o,this.header=i,this.history=new ei(a(this));function a(c){return{...c,fromCID:async f=>a(await ru.fromCID(t,f))}}}static instanceOf(t){return Ye(t)&&ht(t,"content")&&ht(t,"header")&&vv(t.header)}static async create(t,n){return new ru({depot:t,content:n,header:{metadata:eu(!0,Ai)},cid:null})}static async fromCID(t,n){let i=await Qs.get(t,n);return ru.fromInfo(t,i,n)}static async fromInfo(t,n,i){let{userland:o,metadata:a,previous:c}=n,f=await Tt.getFile(t,ke(o));return new ru({depot:t,content:f,header:{metadata:a,previous:c},cid:i})}async putDetailed(){let t=await Qs.putFile(this.depot,this.content,zy(this.header.metadata),this.cid);return this.cid=t.cid,t}},El=ru;var Sn=class extends vl{constructor({depot:t,reference:n,links:i,header:o,cid:a}){super();this.depot=t,this.reference=n,this.children={},this.cid=a,this.links=i,this.header=o,this.history=new ei(c(this));function c(f){return{...f,fromCID:async d=>c(await Sn.fromCID(t,n,d))}}}static async empty(t,n){return new Sn({depot:t,reference:n,links:{},header:{metadata:eu(!1,Ai),skeleton:{}},cid:null})}static async fromCID(t,n,i){let o=await Qs.get(t,i);if(!JA(o))throw new Error(`Could not parse a valid public tree at: ${i}`);return Sn.fromInfo(t,n,o,i)}static async fromInfo(t,n,i,o){let{userland:a,metadata:c,previous:f,skeleton:d}=i,m=await Tt.getFileSystemLinks(t,ke(a));return new Sn({depot:t,reference:n,links:m,header:{metadata:c,previous:f,skeleton:d},cid:o})}static instanceOf(t){return ht(t,"links")&&ht(t,"header")&&YA(t.links)&&bv(t.header)}async createChildTree(t,n){let i=await Sn.empty(this.depot,this.reference),o=this.children[t];if(o){if(El.instanceOf(o))throw new Error(`There is a file at the given path: ${t}`);if(Sn.instanceOf(o))return o;throw new Error(`Not a public tree at the given path: ${t}`)}return await this.updateDirectChild(i,t,n),i}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null)a=await El.create(this.depot,t);else if(El.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){let t=await Qs.putTree(this.depot,this.links,this.header.skeleton,this.header.metadata,this.cid);return this.header.previous=this.cid||void 0,this.cid=t.cid,t}async updateDirectChild(t,n,i){if(this.readOnly)throw new Error("Tree is read-only");this.children[n]=t;let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}removeDirectChild(t){return delete this.links[t],delete this.header.skeleton[t],this.children[t]&&delete this.children[t],this}async getDirectChild(t){let n=null;if(this.children[t])return this.children[t];let i=this.header.skeleton[t]||null;if(i===null)return null;if(hy(i)){let o=ke(i.cid);n=i.isFile?await El.fromCID(this.depot,o):await Sn.fromCID(this.depot,this.reference,o)}else if(Ur(i))return Sn.resolveSoftLink(this.depot,this.reference,i);return this.children[t]?this.children[t]:(n&&(this.children[t]=n),n)}async get(t){if(t.length<1)return this;let n=await this.getRecurse(this.header.skeleton,t);if(hy(n)){let i=ke(n.cid),o=await Qs.get(this.depot,i);return XA(o)?El.fromInfo(this.depot,o,i):Sn.fromInfo(this.depot,this.reference,o,i)}return n}async getRecurse(t,n){let i=n[0],o=t[i]||null,a=pI(n);if(Ur(o)){let c=await Sn.resolveSoftLink(this.depot,this.reference,o);return a?Sn.instanceOf(c)?c.get(a).then(xW):null:c}else return o===null||a===null?o:o.subSkeleton?this.getRecurse(o.subSkeleton,a):null}assignLink({name:t,link:n,skeleton:i}){this.links[t]=n,this.header.skeleton[t]=i,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(t,n,i){let[o,...a]=i.ipns.split("/"),c=zh(a.join("/"));if(!(Uf("public",c)||Uf("p",c)))throw new Error("Mixing public and private soft links is not supported yet.");let d=await n.dns.lookupDnsLink(o);if(!d)throw new Error(`Failed to resolve the soft link: ${i.ipns} - Could not resolve DNSLink`);let m=(await Tt.getSimpleLinks(t,ke(d))).public.cid,w=ec(c),T=await(await Sn.fromCID(t,n,ke(m))).get(Qt(w));return T&&(T.readOnly=!0),T}getLinks(){return Object.values(this.links).reduce((t,n)=>{let i=this.header.skeleton[n.name];return{...t,[n.name]:i&&i.isFile!==void 0?{...n,isFile:i.isFile}:{...n}}},{})}updateLink(t,n){let{cid:i,metadata:o,userland:a,size:c,isFile:f,skeleton:d}=n;return this.assignLink({name:t,link:Ln(t,i,!1,c),skeleton:{cid:Xn(i),metadata:o,userland:a,subSkeleton:d,isFile:f}}),this}insertSoftLink({name:t,path:n,username:i}){let o={ipns:this.reference.dataRoot.domain(i)+`/public/${Cr(n)}`,name:t};return this.assignLink({name:t,link:o,skeleton:o}),this}};function xW(r){return r&&(r.readOnly=!0),r}var ws=Sn;h();p();h();p();h();p();var E_=({name:r,code:e,encode:t})=>new x_(r,e,t),x_=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Ka(this.code,t):t.then(n=>Ka(this.code,n))}else throw Error("Unknown type, must be binary type")}};h();p();h();p();var RW={},ce,xr=new Array(32).fill(void 0);xr.push(void 0,null,!0,!1);function Jt(r){return xr[r]}var Mo=0,Jy;function Pl(){return Jy.byteLength===0&&(Jy=new Uint8Array(ce.memory.buffer)),Jy}var Xy=new TextEncoder("utf-8"),EW=typeof Xy.encodeInto=="function"?function(r,e){return Xy.encodeInto(r,e)}:function(r,e){let t=Xy.encode(r);return e.set(t),{read:r.length,written:t.length}};function Qy(r,e,t){if(t===void 0){let c=Xy.encode(r),f=e(c.length);return Pl().subarray(f,f+c.length).set(c),Mo=c.length,f}let n=r.length,i=e(n),o=Pl(),a=0;for(;a<n;a++){let c=r.charCodeAt(a);if(c>127)break;o[i+a]=c}if(a!==n){a!==0&&(r=r.slice(a)),i=t(i,n,n=a+r.length*3);let c=Pl().subarray(i+a,i+n),f=EW(r,c);a+=f.written}return Mo=a,i}function PW(r){return r==null}var Zy;function Le(){return Zy.byteLength===0&&(Zy=new Int32Array(ce.memory.buffer)),Zy}var kp=xr.length;function SW(r){r<36||(xr[r]=kp,kp=r)}function kt(r){let e=Jt(r);return SW(r),e}var vI=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});vI.decode();function nu(r,e){return vI.decode(Pl().subarray(r,r+e))}function Pt(r){kp===xr.length&&xr.push(xr.length+1);let e=kp;return kp=xr[e],xr[e]=r,e}function P_(r){let e=typeof r;if(e=="number"||e=="boolean"||r==null)return`${r}`;if(e=="string")return`"${r}"`;if(e=="symbol"){let i=r.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){let i=r.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(r)){let i=r.length,o="[";i>0&&(o+=P_(r[0]));for(let a=1;a<i;a++)o+=", "+P_(r[a]);return o+="]",o}let t=/\[object ([^\]]+)\]/.exec(toString.call(r)),n;if(t.length>1)n=t[1];else return toString.call(r);if(n=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:n}var mI=new FinalizationRegistry(r=>{ce.__wbindgen_export_2.get(r.dtor)(r.a,r.b)});function DW(r,e,t,n){let i={a:r,b:e,cnt:1,dtor:t},o=(...a)=>{i.cnt++;let c=i.a;i.a=0;try{return n(c,i.b,...a)}finally{--i.cnt===0?(ce.__wbindgen_export_2.get(i.dtor)(c,i.b),mI.unregister(i)):i.a=c}};return o.original=i,mI.register(o,i,i),o}function AW(r,e,t){ce._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__ha1ec3a5271c97341(r,e,Pt(t))}var Dn=32;function Ii(r){if(Dn==1)throw new Error("out of js stack");return xr[--Dn]=r,Dn}function eg(r,e){let t=e(r.length*1);return Pl().set(r,t/1),Mo=r.length,t}function CW(r,e){if(!(r instanceof e))throw new Error(`expected instance of ${e.name}`);return r.ptr}function S_(r,e){return Pl().subarray(r/1,r/1+e)}function yI(r,e){try{return r.apply(this,e)}catch(t){ce.__wbindgen_exn_store(Pt(t))}}function IW(r,e,t,n){ce.wasm_bindgen__convert__closures__invoke2_mut__h1338dfb1e5ae1cd8(r,e,Pt(t),Pt(n))}var Kfe=Object.freeze({DagProtobuf:112,112:"DagProtobuf",DagCbor:113,113:"DagCbor",DagJson:297,297:"DagJson",Raw:85,85:"Raw"}),jfe=new FinalizationRegistry(r=>ce.__wbg_foreignblockstore_free(r));var gI=new FinalizationRegistry(r=>ce.__wbg_publicdirectory_free(r)),Ko=class{static __wrap(e){let t=Object.create(Ko.prototype);return t.ptr=e,gI.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,gI.unregister(this),e}free(){let e=this.__destroy_into_raw();ce.__wbg_publicdirectory_free(e)}constructor(e){try{let t=ce.publicdirectory_new(Ii(e));return Ko.__wrap(t)}finally{xr[Dn++]=void 0}}getNode(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_getNode(a,this.ptr,Ii(e),Pt(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[Dn++]=void 0}}lookupNode(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16),c=Qy(e,ce.__wbindgen_malloc,ce.__wbindgen_realloc),f=Mo;ce.publicdirectory_lookupNode(a,this.ptr,c,f,Pt(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}store(e){try{let o=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_store(o,this.ptr,Pt(e));var t=Le()[o/4+0],n=Le()[o/4+1],i=Le()[o/4+2];if(i)throw kt(n);return kt(t)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}static load(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16),c=eg(e,ce.__wbindgen_malloc),f=Mo;ce.publicdirectory_load(a,c,f,Pt(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}read(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_read(a,this.ptr,Ii(e),Pt(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[Dn++]=void 0}}ls(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_ls(a,this.ptr,Ii(e),Pt(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[Dn++]=void 0}}rm(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_rm(a,this.ptr,Ii(e),Pt(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[Dn++]=void 0}}write(e,t,n,i){try{let f=ce.__wbindgen_add_to_stack_pointer(-16),d=eg(t,ce.__wbindgen_malloc),m=Mo;ce.publicdirectory_write(f,this.ptr,Ii(e),d,m,Ii(n),Pt(i));var o=Le()[f/4+0],a=Le()[f/4+1],c=Le()[f/4+2];if(c)throw kt(a);return kt(o)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[Dn++]=void 0,xr[Dn++]=void 0}}basicMv(e,t,n,i){try{let f=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_basicMv(f,this.ptr,Ii(e),Ii(t),Ii(n),Pt(i));var o=Le()[f/4+0],a=Le()[f/4+1],c=Le()[f/4+2];if(c)throw kt(a);return kt(o)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[Dn++]=void 0,xr[Dn++]=void 0,xr[Dn++]=void 0}}mkdir(e,t,n){try{let c=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_mkdir(c,this.ptr,Ii(e),Ii(t),Pt(n));var i=Le()[c/4+0],o=Le()[c/4+1],a=Le()[c/4+2];if(a)throw kt(o);return kt(i)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[Dn++]=void 0,xr[Dn++]=void 0}}baseHistoryOn(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16);CW(e,Ko),ce.publicdirectory_baseHistoryOn(a,this.ptr,e.ptr,Pt(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}previousCid(){let e=ce.publicdirectory_previousCid(this.ptr);return kt(e)}metadata(){try{let i=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_metadata(i,this.ptr);var e=Le()[i/4+0],t=Le()[i/4+1],n=Le()[i/4+2];if(n)throw kt(t);return kt(e)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}asNode(){let e=ce.publicdirectory_asNode(this.ptr);return Sl.__wrap(e)}getId(){try{let n=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicdirectory_getId(n,this.ptr);var e=Le()[n/4+0],t=Le()[n/4+1];return nu(e,t)}finally{ce.__wbindgen_add_to_stack_pointer(16),ce.__wbindgen_free(e,t)}}},wI=new FinalizationRegistry(r=>ce.__wbg_publicfile_free(r)),kc=class{static __wrap(e){let t=Object.create(kc.prototype);return t.ptr=e,wI.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,wI.unregister(this),e}free(){let e=this.__destroy_into_raw();ce.__wbg_publicfile_free(e)}constructor(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16),c=eg(t,ce.__wbindgen_malloc),f=Mo;ce.publicfile_new(a,Ii(e),c,f);var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kc.__wrap(n)}finally{ce.__wbindgen_add_to_stack_pointer(16),xr[Dn++]=void 0}}getId(){try{let n=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicfile_getId(n,this.ptr);var e=Le()[n/4+0],t=Le()[n/4+1];return nu(e,t)}finally{ce.__wbindgen_add_to_stack_pointer(16),ce.__wbindgen_free(e,t)}}store(e){try{let o=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicfile_store(o,this.ptr,Pt(e));var t=Le()[o/4+0],n=Le()[o/4+1],i=Le()[o/4+2];if(i)throw kt(n);return kt(t)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}static load(e,t){try{let a=ce.__wbindgen_add_to_stack_pointer(-16),c=eg(e,ce.__wbindgen_malloc),f=Mo;ce.publicfile_load(a,c,f,Pt(t));var n=Le()[a/4+0],i=Le()[a/4+1],o=Le()[a/4+2];if(o)throw kt(i);return kt(n)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}previousCid(){let e=ce.publicfile_previousCid(this.ptr);return kt(e)}metadata(){try{let i=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicfile_metadata(i,this.ptr);var e=Le()[i/4+0],t=Le()[i/4+1],n=Le()[i/4+2];if(n)throw kt(t);return kt(e)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}contentCid(){try{let i=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicfile_contentCid(i,this.ptr);var e=Le()[i/4+0],t=Le()[i/4+1],n=S_(e,t).slice();return ce.__wbindgen_free(e,t*1),n}finally{ce.__wbindgen_add_to_stack_pointer(16)}}},bI=new FinalizationRegistry(r=>ce.__wbg_publicnode_free(r)),Sl=class{static __wrap(e){let t=Object.create(Sl.prototype);return t.ptr=e,bI.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,bI.unregister(this),e}free(){let e=this.__destroy_into_raw();ce.__wbg_publicnode_free(e)}asDir(){try{let i=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicnode_asDir(i,this.ptr);var e=Le()[i/4+0],t=Le()[i/4+1],n=Le()[i/4+2];if(n)throw kt(t);return Ko.__wrap(e)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}asFile(){try{let i=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicnode_asFile(i,this.ptr);var e=Le()[i/4+0],t=Le()[i/4+1],n=Le()[i/4+2];if(n)throw kt(t);return kc.__wrap(e)}finally{ce.__wbindgen_add_to_stack_pointer(16)}}isDir(){return ce.publicnode_isDir(this.ptr)!==0}isFile(){return ce.publicnode_isFile(this.ptr)!==0}getId(){try{let n=ce.__wbindgen_add_to_stack_pointer(-16);ce.publicnode_getId(n,this.ptr);var e=Le()[n/4+0],t=Le()[n/4+1];return nu(e,t)}finally{ce.__wbindgen_add_to_stack_pointer(16),ce.__wbindgen_free(e,t)}}};async function TW(r,e){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,e)}catch(n){if(r.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}let t=await r.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{let t=await WebAssembly.instantiate(r,e);return t instanceof WebAssembly.Instance?{instance:t,module:r}:t}}function kW(){let r={};return r.wbg={},r.wbg.__wbindgen_string_get=function(e,t){let n=Jt(t),i=typeof n=="string"?n:void 0;var o=PW(i)?0:Qy(i,ce.__wbindgen_malloc,ce.__wbindgen_realloc),a=Mo;Le()[e/4+1]=a,Le()[e/4+0]=o},r.wbg.__wbindgen_object_drop_ref=function(e){kt(e)},r.wbg.__wbg_publicdirectory_new=function(e){let t=Ko.__wrap(e);return Pt(t)},r.wbg.__wbg_publicfile_new=function(e){let t=kc.__wrap(e);return Pt(t)},r.wbg.__wbg_publicnode_new=function(e){let t=Sl.__wrap(e);return Pt(t)},r.wbg.__wbindgen_string_new=function(e,t){let n=nu(e,t);return Pt(n)},r.wbg.__wbg_putBlock_88cdb3be9020efb7=function(e,t,n,i){var o=S_(t,n).slice();ce.__wbindgen_free(t,n*1);let a=Jt(e).putBlock(o,i>>>0);return Pt(a)},r.wbg.__wbg_getBlock_ef67031e09d5c6fd=function(e,t,n){var i=S_(t,n).slice();ce.__wbindgen_free(t,n*1);let o=Jt(e).getBlock(i);return Pt(o)},r.wbg.__wbindgen_bigint_new=function(e,t){let n=BigInt(nu(e,t));return Pt(n)},r.wbg.__wbindgen_number_new=function(e){return Pt(e)},r.wbg.__wbindgen_cb_drop=function(e){let t=kt(e).original;return t.cnt--==1?(t.a=0,!0):!1},r.wbg.__wbg_new_693216e109162396=function(){let e=new Error;return Pt(e)},r.wbg.__wbg_stack_0ddaca5d1abfb52f=function(e,t){let n=Jt(t).stack,i=Qy(n,ce.__wbindgen_malloc,ce.__wbindgen_realloc),o=Mo;Le()[e/4+1]=o,Le()[e/4+0]=i},r.wbg.__wbg_error_09919627ac0992f5=function(e,t){try{console.error(nu(e,t))}finally{ce.__wbindgen_free(e,t)}},r.wbg.__wbg_get_f0f4f1608ebf633e=function(e,t){let n=Jt(e)[t>>>0];return Pt(n)},r.wbg.__wbg_length_93debb0e2e184ab6=function(e){return Jt(e).length},r.wbg.__wbg_new_2ab697f1555e0dbc=function(){let e=new Array;return Pt(e)},r.wbg.__wbg_new_306ce8d57919e6ae=function(){let e=new Object;return Pt(e)},r.wbg.__wbg_push_811c8b08bf4ff9d5=function(e,t){return Jt(e).push(Jt(t))},r.wbg.__wbg_new_651776e932b7e9c7=function(e,t){let n=new Error(nu(e,t));return Pt(n)},r.wbg.__wbg_call_9855a4612eb496cb=function(){return yI(function(e,t,n){let i=Jt(e).call(Jt(t),Jt(n));return Pt(i)},arguments)},r.wbg.__wbg_getTime_7c8d3b79f51e2b87=function(e){return Jt(e).getTime()},r.wbg.__wbg_new_78403b138428b684=function(e,t){try{var n={a:e,b:t},i=(a,c)=>{let f=n.a;n.a=0;try{return IW(f,n.b,a,c)}finally{n.a=f}};let o=new Promise(i);return Pt(o)}finally{n.a=n.b=0}},r.wbg.__wbg_resolve_f269ce174f88b294=function(e){let t=Promise.resolve(Jt(e));return Pt(t)},r.wbg.__wbg_then_1c698eedca15eed6=function(e,t){let n=Jt(e).then(Jt(t));return Pt(n)},r.wbg.__wbg_then_4debc41d4fc92ce5=function(e,t,n){let i=Jt(e).then(Jt(t),Jt(n));return Pt(i)},r.wbg.__wbg_buffer_de1150f91b23aa89=function(e){let t=Jt(e).buffer;return Pt(t)},r.wbg.__wbg_newwithbyteoffsetandlength_9ca61320599a2c84=function(e,t,n){let i=new Uint8Array(Jt(e),t>>>0,n>>>0);return Pt(i)},r.wbg.__wbg_new_97cf52648830a70d=function(e){let t=new Uint8Array(Jt(e));return Pt(t)},r.wbg.__wbg_set_a0172b213e2469e9=function(e,t,n){Jt(e).set(Jt(t),n>>>0)},r.wbg.__wbg_length_e09c0b925ab8de5d=function(e){return Jt(e).length},r.wbg.__wbg_set_b12cd0ab82903c2f=function(){return yI(function(e,t,n){return Reflect.set(Jt(e),Jt(t),Jt(n))},arguments)},r.wbg.__wbindgen_debug_string=function(e,t){let n=P_(Jt(t)),i=Qy(n,ce.__wbindgen_malloc,ce.__wbindgen_realloc),o=Mo;Le()[e/4+1]=o,Le()[e/4+0]=i},r.wbg.__wbindgen_throw=function(e,t){throw new Error(nu(e,t))},r.wbg.__wbindgen_memory=function(){let e=ce.memory;return Pt(e)},r.wbg.__wbindgen_closure_wrapper945=function(e,t,n){let i=DW(e,t,417,AW);return Pt(i)},r}function FW(r,e){return ce=r.exports,_I.__wbindgen_wasm_module=e,Zy=new Int32Array(ce.memory.buffer),Jy=new Uint8Array(ce.memory.buffer),ce}async function _I(r){typeof r>"u"&&(r=new URL("wasm_wnfs_bg.wasm",RW.url));let e=kW();(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));let{instance:t,module:n}=await TW(await r,e);return FW(t,n)}var xI=_I;h();p();var Fp=class{constructor(e){this.depot=e}async getBlock(e){let t=we.decode(e);return await this.depot.getBlock(t)}async putBlock(e,t){if(!qA(t))throw new Error(`No codec was registered for the code: ${yv(t)}`);return(await this.depot.putBlock(e,t)).bytes}};var EI=!1;async function PI({manners:r}){if(EI)return;EI=!0,r.log("\u23EC Loading WNFS WASM");let e=performance.now();await xI(r.wnfsWasmLookup(Xb));let t=performance.now()-e;r.log(`\u{1F9EA} Loaded WNFS WASM (${t.toFixed(0)}ms)`)}var iu=class{constructor(e,t,n,i){this.dependencies=e,this.root=Promise.resolve(t),this.lastRoot=t,this.store=n,this.readOnly=i}static async empty(e){await PI(e);let t=new Fp(e.depot),n=new Ko(new Date);return new iu(e,n,t,!1)}static async fromCID(e,t){await PI(e);let n=new Fp(e.depot),i=await Ko.load(t.bytes,n);return new iu(e,i,n,!1)}async atomically(e){let t=await this.root;this.root=e(t),await this.root}async withError(e,t){try{return await e}catch(n){throw console.error(`Error during WASM operation ${t}:`),n}}async ls(e){let t=await this.root,{result:n}=await this.withError(t.getNode(e,this.store),`ls(${e.join("/")})`);if(n==null)throw new Error(`Can't ls ${e.join("/")}: No such directory`);if(!n.isDir())throw new Error(`Can't ls ${e.join("/")}: Not a directory`);let i=n.asDir(),{result:o}=await this.withError(t.ls(e,this.store),`ls(${e.join("/")})`),a={};for(let c of o){let f=await i.lookupNode(c.name,this.store),d=f.isFile()?we.decode(await f.asFile().store(this.store)):we.decode(await f.asDir().store(this.store));a[c.name]={name:c.name,isFile:c.metadata.unixMeta.kind==="file",size:0,cid:d}}return a}async mkdir(e){return await this.atomically(async t=>{let{rootDir:n}=await this.withError(t.mkdir(e,new Date,this.store),`mkdir(${e.join("/")})`);return n}),this}async cat(e){let t=await this.root,{result:n}=await this.withError(t.read(e,this.store),`read(${e.join("/")})`),i=we.decode(n);return this.dependencies.depot.getUnixFile(i)}async add(e,t){let{cid:n}=await this.dependencies.depot.putChunked(t);return await this.atomically(async i=>{let{rootDir:o}=await this.withError(i.write(e,n.bytes,new Date,this.store),`write(${e.join("/")})`);return o}),this}async rm(e){return await this.atomically(async t=>{let{rootDir:n}=await this.withError(t.rm(e,this.store),`rm(${e.join("/")})`);return n}),this}async mv(e,t){return await this.atomically(async n=>{let{rootDir:i}=await this.withError(n.basicMv(e,t,new Date,this.store),`basicMv(${e.join("/")}, ${t.join("/")})`);return i}),this}async get(e){let t=await this.root,{result:n}=await this.withError(t.getNode(e,this.store),`getNode(${e.join("/")})`);if(n==null)return null;if(n.isFile()){let i=n.asFile(),o=await this.cat(e),a=e.slice(0,-1),c=e[e.length-1];return new A_(o,a,c,this,i)}else if(n.isDir()){let i=n.asDir();return new D_(this.readOnly,e,this,i)}throw new Error("Unknown node type. Can only handle files and directories.")}async exists(e){let t=await this.root;try{return await t.getNode(e,this.store),!0}catch{return!1}}async historyStep(){return await this.atomically(async e=>{let{rootDir:t}=await e.baseHistoryOn(this.lastRoot,this.store);return this.lastRoot=e,t}),await this.root}async put(){let t=await(await this.historyStep()).store(this.store);return we.decode(t)}async putDetailed(){return{cid:await this.put(),size:0,isFile:!1}}},D_=class{constructor(e,t,n,i){this.readOnly=e,this.directory=t,this.publicRoot=n,this.cachedDir=i}checkMutability(e){if(this.readOnly)throw new Error(`Directory is read-only. Cannot ${e}`)}async updateCache(){let t=await(await this.publicRoot.root).getNode(this.directory,this.publicRoot.store);this.cachedDir=t.asDir()}get header(){return SI(this.cachedDir)}async ls(e){return await this.publicRoot.ls([...this.directory,...e])}async mkdir(e){return this.checkMutability(`mkdir at ${[...this.directory,...e].join("/")}`),await this.publicRoot.mkdir([...this.directory,...e]),await this.updateCache(),this}async cat(e){return await this.publicRoot.cat([...this.directory,...e])}async add(e,t){return this.checkMutability(`write at ${[...this.directory,...e].join("/")}`),await this.publicRoot.add([...this.directory,...e],t),await this.updateCache(),this}async rm(e){return this.checkMutability(`remove at ${[...this.directory,...e].join("/")}`),await this.publicRoot.rm([...this.directory,...e]),await this.updateCache(),this}async mv(e,t){return this.checkMutability(`mv from ${[...this.directory,...e].join("/")} to ${[...this.directory,...t].join("/")}`),await this.publicRoot.mv([...this.directory,...e],[...this.directory,...t]),await this.updateCache(),this}async get(e){return await this.publicRoot.get([...this.directory,...e])}async exists(e){return await this.publicRoot.exists([...this.directory,...e])}async put(){await this.publicRoot.put();let t=await(await this.publicRoot.root).store(this.publicRoot.store);return we.decode(t)}async putDetailed(){return{isFile:!1,size:0,cid:await this.put()}}},A_=class extends Cp{constructor(t,n,i,o,a){super(t);this.directory=n,this.filename=i,this.publicRoot=o,this.cachedFile=a}async updateCache(){let n=await(await this.publicRoot.root).getNode([...this.directory,this.filename],this.publicRoot.store);this.cachedFile=n.asFile()}get header(){return SI(this.cachedFile)}async updateContent(t){return await super.updateContent(t),await this.updateCache(),this}async putDetailed(){let t=await this.publicRoot.root,n=[...this.directory,this.filename],{result:i}=await t.getNode(n,this.publicRoot.store);if(i==null)throw new Error(`No file at /${n.join("/")}.`);if(!i.isFile())throw new Error(`Not a file at /${n.join("/")}`);let o=i.asFile();return{isFile:!0,size:0,cid:we.decode(await o.store(this.publicRoot.store))}}};function SI(r){let e=r.metadata(),t={isFile:e.unixMeta.kind==="file",version:e.version,unixMeta:{_type:e.unixMeta.kind,ctime:Number(e.unixMeta.created),mtime:Number(e.unixMeta.modified),mode:e.unixMeta.mode}},n=r.previousCid();return n==null?{metadata:t}:{metadata:t,previous:we.decode(n)}}var Rp=class{constructor({dependencies:e,links:t,mmpt:n,privateLog:i,sharedCounter:o,sharedLinks:a,publicTree:c,prettyTree:f,privateNodes:d}){this.dependencies=e,this.links=t,this.mmpt=n,this.privateLog=i,this.sharedCounter=o,this.sharedLinks=a,this.publicTree=c,this.prettyTree=f,this.privateNodes=d}static async empty({accountDID:e,dependencies:t,rootKey:n,wnfsWasm:i}){i&&t.manners.log("\u26A0\uFE0F Running an EXPERIMENTAL new version of the file system: 3.0.0");let o=i?await iu.empty(t):await ws.empty(t.depot,t.reference),a=await ua.empty(t.depot),c=wn.create(t.depot),f=Cr(Ar("private")),d=await er.create(t.crypto,t.depot,t.manners,t.reference,c,n,null);await d.put();let m=new Rp({dependencies:t,links:{},mmpt:c,privateLog:[],sharedCounter:1,sharedLinks:{},publicTree:o,prettyTree:a,privateNodes:{[f]:d}});return await tu({accountDID:e,crypto:t.crypto,readKey:n}),await m.setVersion(i?Dc:Ai),await Promise.all([m.updatePuttable("public",o),m.updatePuttable("p",a),m.updatePuttable("private",c)]),m}static async fromCID({accountDID:e,dependencies:t,cid:n,permissions:i}){let{crypto:o,depot:a,manners:c}=t,f=await Tt.getSimpleLinks(t.depot,n),d=await LW(o,e,i||Wh),m=await DI(t.depot,f),w=h_(m,Dc);w&&t.manners.log("\u26A0\uFE0F Running an EXPERIMENTAL new version of the file system: 3.0.0");let E=f["public"]?.cid||null,T=E===null?await ws.empty(t.depot,t.reference):w?await iu.fromCID({depot:a,manners:c},ke(E)):await ws.fromCID(t.depot,t.reference,ke(E)),F=f["p"]?await ua.fromCID(t.depot,ke(f["p"].cid)):await ua.empty(t.depot),U=f["private"]?.cid||null,pe,he;U===null?(pe=wn.create(t.depot),he={}):(pe=await wn.fromCID(t.depot,ke(U)),he=await OW(t,e,d,pe));let De=f["privateLog"]?.cid,re=De?await Zf(a,ke(De)).then(Me=>Me.Links.map(tl)).then(Me=>Me.sort((vt,Nt)=>parseInt(vt.name,10)-parseInt(Nt.name,10))):[],be=f["shared"]?.cid||null,Pe=be?await this.getSharedLinks(a,ke(be)):{},Y=f["sharedCounter"]?.cid||null,ge=Y?await Tt.getFile(t.depot,ke(Y)).then(Me=>JSON.parse(Ge(Me,"utf8"))):1,_e=new Rp({dependencies:t,links:f,mmpt:pe,privateLog:re,sharedCounter:ge,sharedLinks:Pe,publicTree:T,prettyTree:F,privateNodes:he});return f["version"]==null&&await _e.setVersion(Ai),_e}async put(){let{cid:e}=await this.putDetailed();return e}async putDetailed(){return Tt.putLinks(this.dependencies.depot,this.links)}updateLink(e,t){let{cid:n,size:i,isFile:o}=t;return this.links[e]=Ln(e,n,o,i),this}async updatePuttable(e,t){return this.updateLink(e,await t.putDetailed())}findPrivateNode(e){return C_(this.privateNodes,e)}async addPrivateLogEntry(e,t){let n=[...this.privateLog],i=Math.max(0,n.length-1),o=n[i]?.cid?await e.getUnixFile(ke(n[i].cid)).then(w=>Ge(w,"utf8")).then(w=>w.split(",")):[];o.length+1>Rp.LOG_CHUNK_SIZE&&(i=i+1,o=[]);let c=await this.dependencies.crypto.hash.sha256(Oe(Xn(t),"utf8")),f=[...o,c],d=await Tt.putFile(this.dependencies.depot,Oe(f.join(","),"utf8"));n[i]={name:i.toString(),cid:d.cid,size:d.size};let m=await up(this.dependencies.depot,n.map(py));this.updateLink("privateLog",{cid:m,isFile:!1,size:await this.dependencies.depot.size(m)}),this.privateLog=n}async addShares(e){this.sharedLinks=e.reduce((i,o)=>({...i,[o.name]:o}),this.sharedLinks);let t=Object.values(this.sharedLinks).reduce((i,{cid:o,name:a,size:c})=>({...i,[a]:{cid:o,name:a,size:c}}),{}),n=await this.dependencies.depot.putBlock(ls(t),Ha);return this.updateLink("shared",{cid:n,isFile:!1,size:await this.dependencies.depot.size(n)}),this}static async getSharedLinks(e,t){let n=await e.getBlock(t),i=ro(n);if(!Ye(i))throw new Error("Invalid shared section, not an object");return Object.values(i).reduce((o,a)=>{if(!Ye(a))return o;let c=a.name?a.name:null,f=a.cid?ke(a.cid):null;return!c||!f?o:{...o,[c]:{name:c,cid:f,size:a.size||0}}},{})}async setSharedCounter(e){this.sharedCounter=e;let{cid:t,size:n}=await Tt.putFile(this.dependencies.depot,Oe(JSON.stringify(e),"utf8"));return this.updateLink("sharedCounter",{cid:t,isFile:!0,size:n}),e}async bumpSharedCounter(){let e=this.sharedCounter+1;return this.setSharedCounter(e)}async setVersion(e){let t=Oe(Sc(e),"utf8"),n=await Tt.putFile(this.dependencies.depot,t);return this.updateLink("version",n)}async getVersion(){return await DI(this.dependencies.depot,this.links)}},ou=Rp;ou.LOG_CHUNK_SIZE=1020;async function BW(r,e,t,n,i){let o=await zm({accountDID:t,crypto:r,path:i}),a=await e.getItem(o);if(a)return a;let[c,f]=C_(n,i);if(!f)return null;let m=Qt(i).slice(Qt(c).length);return Ci.instanceOf(f)?m.length===0?f.header.bareNameFilter:null:(f.exists(m)||(hn(i)?await f.mkdir(m):await f.add(m,new Uint8Array)),f.get(m).then(w=>w?w.header.bareNameFilter:null))}function C_(r,e){let t=r[Cr(e)];if(t)return[e,t];let n=Bb(e);return n?C_(r,n):[e,null]}function OW(r,e,t,n){let{crypto:i,storage:o}=r;return NW(t).reduce((a,{path:c,key:f})=>a.then(async d=>{let m,w=Qt(c);if(w.length===1&&w[0]==="private")m=await er.fromBaseKey(r.crypto,r.depot,r.manners,r.reference,n,f);else{let T=await BW(i,o,e,d,c);if(!T)throw new Error(`Was trying to load the PrivateTree for the path \`${c}\`, but couldn't find the bare name filter for it.`);hn(c)?m=await er.fromBareNameFilter(r.crypto,r.depot,r.manners,r.reference,n,T,f):m=await Ci.fromBareNameFilter(r.crypto,r.depot,n,T,f)}let E=Cr(c);return{...d,[E]:m}}),Promise.resolve({}))}async function DI(r,e){let t=await Tt.getFile(r,ke(e["version"].cid));return Pc(Ge(t))??tI}async function LW(r,e,t){return Vh(t).reduce(async(n,i)=>{if(qh("public",i))return n;let o=await tc({accountDID:e,crypto:r,path:i}),a=await r.keystore.exportSymmKey(o),c={path:i,key:a};return n.then(f=>[...f,c])},Promise.resolve([]))}function NW(r){return r.sort((e,t)=>Cr(e.path).localeCompare(Cr(t.path)))}var su=class{constructor({account:e,dependencies:t,eventEmitter:n,root:i,localOnly:o}){this.account=e,this.dependencies=t,this.eventEmitter=n,this.localOnly=o||!1,this.proofs={},this.publishHooks=[],this.root=i,this._publishWhenOnline=[],this._publishing=!1,this._whenOnline=this._whenOnline.bind(this),this._beforeLeaving=this._beforeLeaving.bind(this);let a=async f=>{await this.dependencies.reference.repositories.cidLog.add(f),this.dependencies.manners.log("\u{1F4D3} Adding to the CID ledger:",f.toString())},c=hI(3e3,!1,(f,d)=>{if(globalThis.navigator.onLine)return this._publishing=[f,!0],this.dependencies.reference.dataRoot.update(f,d).then(()=>{this._publishing&&this._publishing[0]===f&&(n.emit("publish",{root:f}),this._publishing=!1)});this._publishWhenOnline.push([f,d])},!1);this.publishHooks.push(a),this.publishHooks.push(c),this.localOnly||(globalThis.addEventListener("online",this._whenOnline),globalThis.addEventListener("beforeunload",this._beforeLeaving))}static async empty(e){let{account:t,dependencies:n,eventEmitter:i,localOnly:o}=e,a=e.rootKey||await n.crypto.aes.genKey(Ja).then(n.crypto.aes.exportKey),c=e.version===Sc(Dc),f=await ou.empty({accountDID:t.rootDID,dependencies:n,rootKey:a,wnfsWasm:c});return new su({account:t,dependencies:n,eventEmitter:i,root:f,localOnly:o})}static async fromCID(e,t){let{account:n,dependencies:i,eventEmitter:o,permissions:a,localOnly:c}=t,f=await ou.fromCID({accountDID:n.rootDID,dependencies:i,cid:e,permissions:a});return new su({account:n,dependencies:i,eventEmitter:o,root:f,localOnly:c})}deactivate(){this.localOnly||(globalThis.removeEventListener("online",this._whenOnline),globalThis.removeEventListener("beforeunload",this._beforeLeaving))}async ls(e){if(cs(e))throw new Error("`ls` only accepts directory paths");return this.runOnNode(e,{public:async(t,n)=>t.ls(n),private:async(t,n)=>{if(kr(t))throw new Error("Tried to `ls` a file");return t.ls(n)}})}async mkdir(e,t={}){if(cs(e))throw new Error("`mkdir` only accepts directory paths");return await this.runMutationOnNode(e,{public:async(n,i)=>{await n.mkdir(i)},private:async(n,i)=>{if(kr(n))throw new Error("Tried to `mkdir` a file");await n.mkdir(i)}}),t.publish&&await this.publish(),this}async write(e,t,n={}){if(Ur(t)||HA(t)||GA(t)){if(cs(e))throw new Error("Can't add soft links to a file");await this.runMutationOnNode(e,{public:async(o,a)=>{let c=Array.isArray(t)?t:Ye(t)?Object.values(t):[t];await this.runOnChildTree(o,a,async f=>(c.forEach(d=>{(er.instanceOf(f)||ws.instanceOf(f))&&f.assignLink({name:d.name,link:d,skeleton:d})}),f))},private:async(o,a)=>{let c=Array.isArray(t)?t:Ye(t)?Object.values(t):[t];await this.runOnChildTree(o,a,async f=>(c.forEach(d=>{(er.instanceOf(f)||ws.instanceOf(f))&&f.assignLink({name:d.name,link:d,skeleton:d})}),f))}})}else{if(hn(e))throw new Error("`add` only accepts file paths when working with regular files");await this.runMutationOnNode(e,{public:async(o,a)=>{await o.add(a,t)},private:async(o,a)=>{kr(o)?await o.updateContent(t):await o.add(a,t)}})}return n.publish&&await this.publish(),this}async read(e){if(hn(e))throw new Error("`cat` only accepts file paths");return this.runOnNode(e,{public:async(t,n)=>await t.cat(n),private:async(t,n)=>kr(t)?t.content:await t.cat(n)})}async exists(e){return this.runOnNode(e,{public:async(t,n)=>await t.exists(n),private:async(t,n)=>kr(t)||await t.exists(n)})}async get(e){return this.runOnNode(e,{public:async(t,n)=>await t.get(n),private:async(t,n)=>kr(t)?t:await t.get(n)})}async mv(e,t){let n=Km(e,t);if(!Fb(e,t)){let i=jm(e),o=jm(t);throw new Error(`Can't move to a different kind of path, from is a ${i} and to is a ${o}`)}if(!n)throw new Error("`mv` is only supported on the same tree for now");if(await this.exists(t))throw new Error("Destination already exists");return await this.runMutationOnNode(e,{public:async(i,o)=>{let[a,...c]=Qt(t);await i.mv(o,c)},private:async(i,o)=>{if(kr(i))throw new Error("Tried to `mv` within a file");let[a,...c]=Qt(t);await i.mv(o,c)}}),this}resolveSymlink(e){return ht(e,"privateName")?er.resolveSoftLink(this.dependencies.crypto,this.dependencies.depot,this.dependencies.manners,this.dependencies.reference,e):ws.resolveSoftLink(this.dependencies.depot,this.dependencies.reference,e)}async rm(e){return await this.runMutationOnNode(e,{public:async(t,n)=>{await t.rm(n)},private:async(t,n)=>{if(kr(t))throw new Error("Cannot `rm` a file you've asked permission for");await t.rm(n)}}),this}async symlink(e){let{at:t,name:n}=e,i=e.referringTo.path,o=e.referringTo.username||this.account.username;if(t==null)throw new Error("Missing parameter `symlink.at`");if(cs(t))throw new Error("`symlink.at` only accepts directory paths");let a=Km(t,i);if(!o)throw new Error("I need a username in order to use this method");if(!a)throw new Error("`link` is only supported on the same tree for now");return await this.runMutationOnNode(t,{public:async(c,f)=>{if(!ua.instanceOf(c))if(ws.instanceOf(c))await this.runOnChildTree(c,f,async d=>(ws.instanceOf(d)&&d.insertSoftLink({path:ec(i),name:n,username:o}),d));else throw new Error("Symlinks not supported in WASM-WNFS yet.")},private:async(c,f)=>{if(kr(c))throw new Error("Cannot add a soft link to a file");await this.runOnChildTree(c,f,async d=>{if(er.instanceOf(d)){let m=await this.runOnNode(i,{public:async()=>{throw new Error("File system hit a public node within a private node. This is not supported/this should not happen.")},private:async(w,E)=>{let T=kr(w)?w:await w.get(E);if(er.instanceOf(T))return T;if(Ci.instanceOf(T))return T;throw new Error("`symlink.referringTo` is not of the right type")}});if(!m)throw new Error("Could not find the item the symlink is referring to");d.insertSoftLink({name:n,username:o,key:m.key,privateName:await m.getName()})}return d})}}),this}async publish(){let e=Array.from(Object.entries(this.proofs));this.proofs={};let t=await this.root.put();return e.forEach(([n,i])=>{this.publishHooks.forEach(o=>o(t,i))}),t}async historyStep(){let e=this.root.publicTree;ht(e,"historyStep")&&typeof e.historyStep=="function"&&await e.historyStep()}async acceptShare({shareId:e,sharedBy:t}){let n=await this.loadShare({shareId:e,sharedBy:t});return await this.write(Ar("private","Shared with me",t),await n.ls([]).then(Object.values).then(i=>i.filter(Ur))),this}async loadShare({shareId:e,sharedBy:t}){let n=await Io(this.dependencies.crypto),i=await this.dependencies.reference.didRoot.lookup(t),o=await jy(this.dependencies.crypto,{counter:parseInt(e,10),recipientExchangeDid:n,senderRootDid:i}),a=await this.dependencies.reference.dataRoot.lookup(t);if(!a)throw new Error("This user doesn't have a filesystem yet.");let c=await Tt.getSimpleLinks(this.dependencies.depot,a),f=c["shared"]?.cid||null;if(!f)throw new Error("This user hasn't shared anything yet.");let d=await ou.getSharedLinks(this.dependencies.depot,ke(f)),m=Ye(d)?d[o]:null;if(!m)throw new Error("Couldn't find a matching share.");let w=Ye(m)?m.cid:null;if(!w)throw new Error("Couldn't find a matching share.");let E=await this.dependencies.depot.getBlock(ke(w)),T=await this.dependencies.crypto.keystore.decrypt(E),F=ro(T);if(!ht(F,"cid"))throw new Error("Share payload is missing the `cid` property");if(!ht(F,"key"))throw new Error("Share payload is missing the `key` property");if(!ht(F,"algo"))throw new Error("Share payload is missing the `algo` property");let U=F.cid,pe=F.key,he=F.algo;if(!c["private"]?.cid)throw new Error("This user's filesystem doesn't have a private branch");let re=await wn.fromCID(this.dependencies.depot,ke(c["private"]?.cid)),be=await this.dependencies.depot.getBlock(ke(U)),Pe=await this.dependencies.crypto.aes.decrypt(be,pe,he),Y=JSON.parse(Ge(Pe,"utf8"));if(!yy(Y))throw new Error("The share payload did not point to a valid entry index");return er.fromInfo(this.dependencies.crypto,this.dependencies.depot,this.dependencies.manners,this.dependencies.reference,re,pe,Y)}async sharePrivate(e,{sharedBy:t,shareWith:n}){let i=e.filter(c=>Uf("private",c));if(!t){if(!this.account.username)throw new Error("I need a username in order to use this method");t={rootDid:this.account.rootDID,username:this.account.username}}let o=await i.reduce(async(c,f)=>{let d=await c,m=Ob(f),w=await this.get(f);return m&&(Ci.instanceOf(w)||er.instanceOf(w))?[...d,[m,w]]:d},Promise.resolve([]));if(!o.length)throw new Error("Didn't find any items to share");let a=await nI(this.dependencies.crypto,this.dependencies.depot,this.dependencies.manners,this.dependencies.reference,this.root,o,{shareWith:n,sharedBy:t});return await this.root.bumpSharedCounter(),await this.root.updatePuttable("private",this.root.mmpt),await this.publish(),a}async checkMutationPermissionAndAddProof(e,t){let n=t?"make changes to":"query";if(!this.localOnly){let i=await this.dependencies.reference.repositories.ucans.lookupFilesystemUcan(e);if(!i||Gs(i)||!i.signature)throw new xl(`I don't have the necessary permissions to ${n} the file system at "${Cr(e)}"`);this.proofs[i.signature]=i}}async runMutationOnNode(e,t){let n=Qt(e),i=n[0],o=n.slice(1);if(await this.checkMutationPermissionAndAddProof(e,!0),i==="public")await t.public(this.root.publicTree,o),await t.public(this.root.prettyTree,o),await Promise.all([this.root.updatePuttable("public",this.root.publicTree),this.root.updatePuttable("p",this.root.prettyTree)]);else if(i==="private"){let[a,c]=this.root.findPrivateNode(e);if(!c)throw new xl(`I don't have the necessary permissions to make changes to the file system at "${Cr(e)}"`);await t.private(c,n.slice(Qt(a).length)),await c.put(),await this.root.updatePuttable("private",this.root.mmpt);let f=await this.root.mmpt.put();await this.root.addPrivateLogEntry(this.dependencies.depot,f)}else throw i==="p"?new Error("The pretty path is read only"):new Error("Not a valid FileSystem path");this.eventEmitter.emit("local-change",{root:await this.root.put(),path:e})}async runOnNode(e,t){let n=Qt(e),i=n[0],o=n.slice(1);if(await this.checkMutationPermissionAndAddProof(e,!1),i==="public")return await t.public(this.root.publicTree,o);if(i==="private"){let[a,c]=this.root.findPrivateNode(e);if(!c)throw new xl(`I don't have the necessary permissions to query the file system at "${Cr(e)}"`);return await t.private(c,n.slice(Qt(a).length))}else{if(i==="p")return await t.public(this.root.prettyTree,o);throw new Error("Not a valid FileSystem path")}}async runOnChildTree(e,t,n){let i=e;if(t.length){await i.exists(t)||await i.mkdir(t);let o=await i.get(t);if(fy(o))i=o;else throw new Error("Path does not point to a directory")}return i=await n(i),t.length?await e.updateChild(i,t):e}_whenOnline(){let e=[...this._publishWhenOnline];this._publishWhenOnline=[],e.forEach(([t,n])=>{this.publishHooks.forEach(i=>i(t,n))})}_beforeLeaving(e){let t="Are you sure you want to leave? We don't control the browser so you may lose your data.";if(this._publishing||this._publishWhenOnline.length)return(e||globalThis.event).returnValue=t,t}},I_=su;async function Bp({config:r,dependencies:e,eventEmitter:t,rootKey:n,username:i}){let{crypto:o,depot:a,manners:c,reference:f,storage:d}=e,m,w,E=f.repositories.cidLog,T={username:i,rootDID:await f.didRoot.lookup(i)},F=navigator.onLine?await MW(f,i,{maxRetries:20}):null,U=F?E.indexOf(F):-1;if(navigator.onLine)if(!F)m=E.newest(),m?c.log("\u{1F4D3} No DNSLink, using local CID:",m.toString()):c.log("\u{1F4D3} Creating a new file system");else if(U===E.length()-1)m=F,c.log("\u{1F4D3} DNSLink is up to date:",m.toString());else if(U!==-1&&U<E.length()-1){m=E.newest();let De=E.length()-1-U,re=De===1?"1 newer local entry":De.toString()+" newer local entries";c.log("\u{1F4D3} DNSLink is outdated ("+re+"), using local CID:",m.toString())}else m=F,await E.add(m),c.log("\u{1F4D3} DNSLink is newer:",m.toString());else throw m=E.newest(),m&&c.log("\u{1F4D3} Working offline, using local CID:",m.toString()),new Error("Offline, don't have a filesystem to work with.");let pe=r.permissions,he={crypto:o,depot:a,reference:f,storage:d};return m?(await UW(e.depot,r,m),await c.fileSystem.hooks.beforeLoadExisting(m,T,he),w=await I_.fromCID(m,{account:T,dependencies:e,eventEmitter:t,permissions:pe}),await c.fileSystem.hooks.afterLoadExisting(w,T,he),w):(await c.fileSystem.hooks.beforeLoadNew(T,he),w=await I_.empty({account:T,dependencies:e,eventEmitter:t,rootKey:n,permissions:pe,version:r.fileSystem?.version}),await c.fileSystem.hooks.afterLoadNew(w,T,he),w)}async function II({auth:r,dependencies:e,oldUsername:t,newUsername:n,readKey:i}){let{crypto:o,reference:a,storage:c}=e,f=await Zt(o),{success:d}=await r.register({username:n});if(!d)throw new Error("Failed to register new user");let m=await c.getItem(c.KEYS.ACCOUNT_UCAN),w=await Jr({dependencies:e,potency:"APPEND",resource:"*",proof:m||void 0,lifetimeInSeconds:60*3,audience:f,issuer:f}),E=await a.dataRoot.lookup(t);if(!E)throw new Error("Failed to lookup oldUsername");return await a.dataRoot.update(E,w),await tu({accountDID:f,crypto:o,readKey:i}),{success:!0}}var AI={versionMismatch:{newer:async()=>CI(`Sorry, we can't sync your filesystem with this app. This app only understands older versions of filesystems.

Please try to hard refresh this site or let this app's developer know.

Feel free to contact Fission support: support@fission.codes`),older:async()=>CI(`Sorry, we can't sync your filesystem with this app. Your filesystem version is out-dated and it needs to be migrated.

Run a migration (https://guide.fission.codes/accounts/account-signup/account-migration) or talk to Fission support: support@fission.codes`)}};async function UW(r,e,t){let n=await Tt.getSimpleLinks(r,t),i=n["version"]==null?"1.0.0":new TextDecoder().decode(await Tt.getFile(r,ke(n["version"].cid))),o=async()=>(await(e.userMessages||AI).versionMismatch.newer(i),new Error(`Incompatible filesystem version. Version: ${i} Supported versions: ${p_.map(d=>Sc(d)).join(", ")}. Please upgrade this app's webnative version.`)),a=async()=>(await(e.userMessages||AI).versionMismatch.older(i),new Error(`Incompatible filesystem version. Version: ${i} Supported versions: ${p_.map(d=>Sc(d)).join(", ")}. The user should migrate their filesystem.`)),c=Pc(i);if(c==null)throw await o();let f=eI(c);if(f==="too-high")throw await o();if(f==="too-low")throw await a()}function CI(r){globalThis.alert!=null&&globalThis.alert(r)}async function MW(r,e,t={}){let n=t.maxRetries??0,i=t.retryInterval??500,o=await r.dataRoot.lookup(e).catch(()=>null);return o?o.toString()===Hm?null:o:new Promise((a,c)=>{let f=0,d=setInterval(async()=>{if(o=await r.dataRoot.lookup(e).catch(()=>null),!o&&f<n){f++;return}else f>=n&&c("Failed to load data root");clearInterval(d),a(o?.toString()===Hm?null:o)},i)})}h();p();h();p();var KW=globalThis||window||self,At=KW.crypto;var QI=Ze(TI(),1);h();p();h();p();h();p();h();p();var T_=new Error("Key does not exist. Make sure you properly instantiated the keystore."),kI=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),FI=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),jW=new Error("ECC is not enabled for this browser. Please use RSA instead."),RI=new Error("Cryptosystem not supported. Please use ECC or RSA"),BI=new Error("Invalid key use. Please use 'exchange' or 'write"),$W=new Error("Max must be less than 256 and greater than 0");function Dl(r){if(!r||r===null)throw T_;if(r.privateKey===void 0)throw kI;return r}function k_(r){if(!r||r===null)throw T_;if(r.privateKey!==void 0||r.algorithm===void 0)throw FI;return r}function zW(r){OI(r,[ds.ECC,ds.RSA],RI)}function Fc(r){OI(r,[_r.Exchange,_r.Write],BI)}function OI(r,e,t){if(!e.some(i=>i===r))throw t}var LI={KeyDoesNotExist:T_,NotKeyPair:kI,NotKey:FI,ECCNotEnabled:jW,UnsupportedCrypto:RI,InvalidKeyUse:BI,checkIsKeyPair:Dl,checkIsKey:k_,checkValidCryptoSystem:zW,checkValidKeyUse:Fc,InvalidMaxValue:$W};function qW(r,e){let t=e===8?new Uint8Array(r):new Uint16Array(r);return Array.from(t).map(n=>String.fromCharCode(n)).join("")}function WW(r){return Ge(new Uint8Array(r),"base64pad")}function F_(r,e){let t=e===8?new Uint8Array(r.length):new Uint16Array(r.length);for(let n=0,i=r.length;n<i;n++)t[n]=r.charCodeAt(n);return t.buffer}function NI(r){return Oe(r,"base64pad").buffer}function VW(){return new Uint8Array([1,0,1])}function HW(r,{max:e}={max:255}){if(e<1||e>255)throw LI.InvalidMaxValue;let t=new Uint8Array(r);if(e==255)return At.getRandomValues(t),t.buffer;let n=0,i=e+1,o=Math.floor(256/i)*i,a=new Uint8Array(1);for(;n<t.length;)At.getRandomValues(a),a[0]<o&&(t[n]=a[0]%i,n++);return t.buffer}function GW(r,e){let t=new Uint8Array(r),n=new Uint8Array(e),i=new Uint8Array(t.length+n.length);return i.set(t),i.set(n,t.length),i.buffer}var UI=r=>ig(r,e=>F_(e,uc.B8)),MI=r=>ig(r,e=>F_(e,uc.B16)),rg=r=>ig(r,NI),ng=(r,e)=>{switch(e){case 8:return UI(r);default:return MI(r)}},ig=(r,e)=>{if(typeof r=="string")return e(r);if(typeof r=="object"&&r.byteLength!==void 0)return new Uint8Array(r).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")};async function YW(r){return new Promise(e=>{let{port1:t,port2:n}=new MessageChannel;n.onmessage=i=>e(i.data),t.postMessage(r)})}var tr={arrBufToStr:qW,arrBufToBase64:WW,strToArrBuf:F_,base64ToArrBuf:NI,publicExponent:VW,randomBuf:HW,joinBufs:GW,normalizeUtf8ToBuf:UI,normalizeUtf16ToBuf:MI,normalizeBase64ToBuf:rg,normalizeToBuf:ig,structuralClone:YW};h();p();var R_="ECDH",B_="ECDSA",Al="RSA-OAEP",au="RSASSA-PKCS1-v1_5",O_=128,KI="ecc",L_=dy.P_256,jI=my.B2048,uu=$t.AES_CTR,Op=ac.B256,N_=64,Lp=nl.SHA_256,Cl=uc.B16,$I="keystore",zI="exchange-key",qI="write-key";async function U_(r){return At.subtle.generateKey({name:r?.alg||uu,length:r?.length||Op},!0,["encrypt","decrypt"])}async function XW(r,e){let t=tr.base64ToArrBuf(r);return At.subtle.importKey("raw",t,{name:e?.alg||uu,length:e?.length||Op},!0,["encrypt","decrypt"])}var Np={makeKey:U_,importKey:XW};h();p();async function og(r,e,t){let n=tr.normalizeUtf16ToBuf(r),i=typeof e=="string"?await Np.importKey(e,t):e,o=t?.alg||uu,a=t?.iv||tr.randomBuf(16),c=await At.subtle.encrypt({name:o,iv:o===$t.AES_CTR?void 0:a,counter:o===$t.AES_CTR?new Uint8Array(a):void 0,length:o===$t.AES_CTR?N_:void 0},i,n);return tr.joinBufs(a,c)}async function sg(r,e,t){let n=tr.normalizeBase64ToBuf(r),i=typeof e=="string"?await Np.importKey(e,t):e,o=t?.alg||uu,a=n.slice(0,16),c=n.slice(16);return await At.subtle.decrypt({name:o,iv:o===$t.AES_CTR?void 0:a,counter:o===$t.AES_CTR?new Uint8Array(a):void 0,length:o===$t.AES_CTR?N_:void 0},i,c)}async function QW(r,e,t){let n=await og(r,e,t);return tr.arrBufToBase64(n)}async function ZW(r,e,t){let n=await sg(r,e,t);return tr.arrBufToStr(n,16)}async function eV(r){let e=await At.subtle.exportKey("raw",r);return tr.arrBufToBase64(e)}var WI={encryptBytes:og,decryptBytes:sg,encrypt:QW,decrypt:ZW,exportKey:eV};var Il={...Np,...WI};h();p();h();p();async function rV(r,e,t){Fc(t);let n=t===_r.Exchange?Al:au,i=t===_r.Exchange?["encrypt","decrypt"]:["sign","verify"];return At.subtle.generateKey({name:n,modulusLength:r,publicExponent:tr.publicExponent(),hash:{name:e}},!1,i)}function nV(r){return r.replace(`-----BEGIN PUBLIC KEY-----
`,"").replace(`
-----END PUBLIC KEY-----`,"")}async function iV(r,e,t){Fc(t);let n=t===_r.Exchange?Al:au,i=t===_r.Exchange?["encrypt"]:["verify"],o=tr.base64ToArrBuf(nV(r));return At.subtle.importKey("spki",o,{name:n,hash:{name:e}},!0,i)}var cu={makeKeypair:rV,importPublicKey:iV};h();p();async function oV(r,e,t=Cl){return At.subtle.sign({name:au,saltLength:O_},e,ng(r,t))}async function sV(r,e,t,n=Cl,i=Lp){return At.subtle.verify({name:au,saltLength:O_},typeof t=="string"?await cu.importPublicKey(t,i,_r.Write):t,rg(e),ng(r,n))}async function aV(r,e,t=Cl,n=Lp){return At.subtle.encrypt({name:Al},typeof e=="string"?await cu.importPublicKey(e,n,_r.Exchange):e,ng(r,t))}async function uV(r,e){let t=rg(r);return At.subtle.decrypt({name:Al},e,t)}async function cV(r){let e=await At.subtle.exportKey("spki",r.publicKey);return tr.arrBufToBase64(e)}var fa={sign:oV,verify:sV,encrypt:aV,decrypt:uV,getPublicKey:cV};h();p();h();p();var bs=Ze(Mm(),1);function fV(r){return bs.default.createInstance({name:r})}async function lV(r,e,t=bs.default){if(await GI(r,t))return;let n=await e();await VI(r,n,t)}async function VI(r,e,t=bs.default){return t.setItem(r,e)}async function hV(r,e=bs.default){return HI(r,Dl,e)}async function pV(r,e=bs.default){return HI(r,k_,e)}async function HI(r,e,t=bs.default){let n=await t.getItem(r);return n===null?null:e(n)}async function GI(r,e=bs.default){return await e.getItem(r)!==null}async function dV(r,e=bs.default){return e.removeItem(r)}async function YI(r){return r.dropInstance()}async function mV(r){return r?YI(r):bs.default.clear()}var Ti={createStore:fV,createIfDoesNotExist:lV,put:VI,getKeypair:hV,getKey:pV,exists:GI,rm:dV,dropStore:YI,clear:mV};h();p();h();p();async function yV(r,e){Fc(e);let t=e===_r.Exchange?R_:B_,n=e===_r.Exchange?["deriveKey","deriveBits"]:["sign","verify"];return At.subtle.generateKey({name:t,namedCurve:r},!1,n)}async function gV(r,e,t){Fc(t);let n=t===_r.Exchange?R_:B_,i=t===_r.Exchange?[]:["verify"],o=tr.base64ToArrBuf(r);return At.subtle.importKey("raw",o,{name:n,namedCurve:e},!0,i)}var JI={makeKeypair:yV,importPublicKey:gV};var M_={type:KI,curve:L_,rsaSize:jI,symmAlg:uu,symmLen:Op,hashAlg:Lp,charSize:Cl,storeName:$I,exchangeKeyName:zI,writeKeyName:qI};function wV(r,e=!0){let t;return r?t={...M_,...r}:t=M_,r?.type||(t.type=e?ds.ECC:ds.RSA),t}async function bV(){let r=await JI.makeKeypair(L_,_r.Exchange);try{await tr.structuralClone(r)}catch{return!1}return!0}function vV(r,e={}){return{...r,...e}}function _V(r){return{alg:r.symmAlg,length:r.symmLen}}var jn={defaultConfig:M_,normalize:wV,eccEnabled:bV,merge:vV,symmKeyOpts:_V};h();p();var Up=class{constructor(e,t){this.cfg=e,this.store=t}async writeKey(){let e=await Ti.getKeypair(this.cfg.writeKeyName,this.store);return Dl(e)}async exchangeKey(){let e=await Ti.getKeypair(this.cfg.exchangeKeyName,this.store);return Dl(e)}async getSymmKey(e,t){let n=jn.merge(this.cfg,t),i=await Ti.getKey(e,this.store);if(i!==null)return i;let o=await Il.makeKey(jn.symmKeyOpts(n));return await Ti.put(e,o,this.store),o}async keyExists(e){return await Ti.getKey(e,this.store)!==null}async deleteKey(e){return Ti.rm(e,this.store)}async destroy(){return Ti.dropStore(this.store)}async importSymmKey(e,t,n){let i=jn.merge(this.cfg,n),o=await Il.importKey(e,jn.symmKeyOpts(i));await Ti.put(t,o,this.store)}async exportSymmKey(e,t){let n=await this.getSymmKey(e,t);return Il.exportKey(n)}async encryptWithSymmKey(e,t,n){let i=jn.merge(this.cfg,n),o=await this.getSymmKey(t,n),a=await Il.encryptBytes(tr.strToArrBuf(e,i.charSize),o,jn.symmKeyOpts(i));return tr.arrBufToBase64(a)}async decryptWithSymmKey(e,t,n){let i=jn.merge(this.cfg,n),o=await this.getSymmKey(t,n),a=await Il.decryptBytes(tr.base64ToArrBuf(e),o,jn.symmKeyOpts(i));return tr.arrBufToStr(a,i.charSize)}};var Rc=class extends Up{static async init(e){let t=jn.normalize({...e||{},type:ds.RSA}),{rsaSize:n,hashAlg:i,storeName:o,exchangeKeyName:a,writeKeyName:c}=t,f=Ti.createStore(o);return await Ti.createIfDoesNotExist(a,()=>cu.makeKeypair(n,i,_r.Exchange),f),await Ti.createIfDoesNotExist(c,()=>cu.makeKeypair(n,i,_r.Write),f),new Rc(t,f)}async sign(e,t){let n=jn.merge(this.cfg,t),i=await this.writeKey();return tr.arrBufToBase64(await fa.sign(e,i.privateKey,n.charSize))}async verify(e,t,n,i){let o=jn.merge(this.cfg,i);return fa.verify(e,t,n,o.charSize,o.hashAlg)}async encrypt(e,t,n){let i=jn.merge(this.cfg,n);return tr.arrBufToBase64(await fa.encrypt(e,t,i.charSize,i.hashAlg))}async decrypt(e,t,n){let i=await this.exchangeKey(),o=jn.merge(this.cfg,n);return tr.arrBufToStr(await fa.decrypt(e,i.privateKey),o.charSize)}async publicExchangeKey(){let e=await this.exchangeKey();return fa.getPublicKey(e)}async publicWriteKey(){let e=await this.writeKey();return fa.getPublicKey(e)}},XI=Rc;var K_={...cu,...fa,...XI};var xV={decrypt:EV,encrypt:PV,exportKey:SV,genKey:DV};function ZI(r,e){return At.subtle.importKey("raw",r,{name:e,length:ac.B256},!0,["encrypt","decrypt"])}async function EV(r,e,t,n){let i=Jh(e)?e:await ZI(e,t),o=n?await At.subtle.decrypt({name:t,iv:n},i,r):await sg(r,i,{alg:t});return new Uint8Array(o)}async function PV(r,e,t,n){let i=Jh(e)?e:await ZI(e,t),o=n?await At.subtle.encrypt({name:t,iv:n},i,r):await og(r,i,{alg:t});return new Uint8Array(o)}async function SV(r){let e=await At.subtle.exportKey("raw",r);return new Uint8Array(e)}function DV(r){return U_({length:ac.B256,alg:r})}var AV={keyTypes:{"bls12-381":{magicBytes:new Uint8Array([234,1]),verify:()=>{throw new Error("Not implemented")}},ed25519:{magicBytes:new Uint8Array([237,1]),verify:CV},rsa:{magicBytes:new Uint8Array([0,245,2]),verify:IV}}};async function CV({message:r,publicKey:e,signature:t}){return QI.default.sign.detached.verify(r,t,e)}async function IV({message:r,publicKey:e,signature:t}){return K_.verify(r,t,await At.subtle.importKey("spki",e,{name:au,hash:j_},!1,["verify"]),8)}var TV={sha256:kV};async function kV(r){return new Uint8Array(await At.subtle.digest("sha-256",r))}function FV(r){return r.destroy()}async function RV(r,e){let t=await r.exchangeKey();return t3(e,t.privateKey)}async function BV(r,e){if(await r.keyExists(e)===!1)throw new Error(`Expected a key under the name '${e}', but couldn't find anything`);let t=await r.getSymmKey(e),n=await At.subtle.exportKey("raw",t);return new Uint8Array(n)}function OV(r){return Promise.resolve("rsa")}function LV(r){return Promise.resolve("RS256")}function NV(r,e,t){return r.importSymmKey(Ge(e,"base64pad"),t)}function UV(r,e){return r.keyExists(e)}async function MV(r){let e=await r.exchangeKey(),t=await At.subtle.exportKey("spki",e.publicKey);return new Uint8Array(t)}async function KV(r){let e=await r.writeKey(),t=await At.subtle.exportKey("spki",e.publicKey);return new Uint8Array(t)}async function jV(r,e){let t=await r.writeKey(),n=await K_.sign(e,t.privateKey,r.cfg.charSize);return new Uint8Array(n)}var $V={randomNumbers:zV};function zV(r){return At.getRandomValues(new Uint8Array(r.amount))}var qV={decrypt:t3,encrypt:WV,exportPublicKey:VV,genKey:HV},ag="RSA-OAEP",j_="SHA-256";function e3(r,e){return At.subtle.importKey("spki",r,{name:ag,hash:j_},!1,e)}async function t3(r,e){let t=await At.subtle.decrypt({name:ag},Jh(e)?e:await e3(e,["decrypt"]),r);return new Uint8Array(t)}async function WV(r,e){let t=Jh(e)?e:await e3(e,["encrypt"]),n=await At.subtle.encrypt({name:ag},t,r);return new Uint8Array(n)}async function VV(r){let e=await At.subtle.exportKey("spki",r);return new Uint8Array(e)}function HV(){return At.subtle.generateKey({name:ag,modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:j_}},!0,["encrypt","decrypt"])}async function r3({storeName:r,exchangeKeyName:e,writeKeyName:t}){let n=await Rc.init({charSize:8,hashAlg:nl.SHA_256,storeName:r,exchangeKeyName:e,writeKeyName:t});return{aes:xV,did:AV,hash:TV,misc:$V,rsa:qV,keystore:{clearStore:(...i)=>FV(n,...i),decrypt:(...i)=>RV(n,...i),exportSymmKey:(...i)=>BV(n,...i),getAlgorithm:(...i)=>OV(n,...i),getUcanAlgorithm:(...i)=>LV(n,...i),importSymmKey:(...i)=>NV(n,...i),keyExists:(...i)=>UV(n,...i),publicExchangeKey:(...i)=>MV(n,...i),publicWriteKey:(...i)=>KV(n,...i),sign:(...i)=>jV(n,...i)}}}h();p();var n3=Ze(Mm(),1);h();p();var ug={ACCOUNT_UCAN:"account-ucan",CID_LOG:"cid-log",SESSION:"session",UCANS:"permissioned-ucans"};function YV(r,e){return Xh("storage.getItem"),r.getItem(e)}function JV(r,e,t){return Xh("storage.setItem"),r.setItem(e,t)}function XV(r,e){return Xh("storage.removeItem"),r.removeItem(e)}async function QV(r){return Xh("storage.clear"),r.clear()}function i3({name:r}){let e=n3.default.createInstance({name:r});return{KEYS:ug,getItem:(...t)=>YV(e,...t),setItem:(...t)=>JV(e,...t),removeItem:(...t)=>XV(e,...t),clear:(...t)=>QV(e,...t)}}h();p();var An={};xt(An,{PRODUCTION:()=>jo,STAGING:()=>$o,apiUrl:()=>ti,did:()=>vs,shareLink:()=>rH});h();p();h();p();async function Bc(r){return Promise.any([eH(r),tH(r)])}async function eH(r){return o3(`https://dns.google/resolve?name=${r}&type=txt`)}function tH(r){return o3(`https://cloudflare-dns.com/dns-query?name=${r}&type=txt`)}function o3(r){return fetch(r,{headers:{accept:"application/dns-json"}}).then(e=>e.json()).then(e=>{if(e.Answer){let t=e.Answer.map(n=>(n.data||"").replace(/^"+|"+$/g,""));return t[0][3]===";"?t.sort((n,i)=>n.slice(0,4).localeCompare(i.slice(0,4))).map(n=>n.slice(4)).join(""):t.join("")}else return null})}async function cg(r){let e=await Bc(r.startsWith("_dnslink.")?r:`_dnslink.${r}`);return e&&!e.includes("/ipns/")?e.replace(/^dnslink=/,"").replace(/^\/ipfs\//,""):null}var jo={apiPath:"/v2/api",lobby:"https://auth.fission.codes",server:"https://runfission.com",userDomain:"fission.name"},$o={apiPath:"/v2/api",lobby:"https://auth.runfission.net",server:"https://runfission.net",userDomain:"fissionuser.net"};function ti(r,e){return`${r.server}${r.apiPath}${e?.length?"/"+e.replace(/^\/+/,""):""}`}var Oc={did:null,host:null,lastFetched:0};async function vs(r){let e;try{e=new URL(r.server).host}catch{throw new Error("Unable to parse API Endpoint")}let t=Date.now();if((Oc.host!==e||Oc.lastFetched+1e3*60*60*3<=t)&&(Oc.did=await Bc("_did."+e),Oc.host=e,Oc.lastFetched=t),!Oc.did)throw new Error("Couldn't get the Fission API DID");return Oc.did}function rH(r,e){return r.lobby+"/#/share/"+encodeURIComponent(e.sharedBy.username)+"/"+encodeURIComponent(e.shareId)+"/"}h();p();h();p();h();p();h();p();h();p();var s3="RSA";h();p();h();p();h();p();h();p();h();p();h();p();h();p();var lg=class{constructor(){nb(this,"index",0);nb(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){let t=this.index,n=e();return n===void 0&&(this.index=t),n}parseWith(e){let t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let t=this.readChar();if(t===e)return t})}readSeparator(e,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,t,n,i){return this.readAtomically(()=>{let o=0,a=0,c=this.peekChar();if(c===void 0)return;let f=c==="0",d=2**(8*i)-1;for(;;){let m=this.readAtomically(()=>{let w=this.readChar();if(w===void 0)return;let E=Number.parseInt(w,e);if(!Number.isNaN(E))return E});if(m===void 0)break;if(o*=e,o+=m,o>d||(a+=1,t!==void 0&&a>t))return}if(a!==0)return!n&&f&&a>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let t=0;t<e.length;t++){let n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[t]=n}return e})}readIPv6Addr(){let e=t=>{for(let n=0;n<t.length/2;n++){let i=n*2;if(n<t.length-3){let a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return t[i]=a[0],t[i+1]=a[1],t[i+2]=a[2],t[i+3]=a[3],[i+4,!0]}let o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[i,!1];t[i]=o>>8,t[i+1]=o&255}return[t.length,!1]};return this.readAtomically(()=>{let t=new Uint8Array(16),[n,i]=e(t);if(n===16)return t;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let o=new Uint8Array(14),a=16-(n+2),[c]=e(o.subarray(0,a));return t.set(o.subarray(0,c),16-c),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var a3=45,iH=15,Tl=new lg;function u3(r){if(!(r.length>iH))return Tl.new(r).parseWith(()=>Tl.readIPv4Addr())}function c3(r){if(!(r.length>a3))return Tl.new(r).parseWith(()=>Tl.readIPv6Addr())}function f3(r){if(!(r.length>a3))return Tl.new(r).parseWith(()=>Tl.readIPAddr())}function l3(r){return Boolean(u3(r))}function h3(r){return Boolean(c3(r))}function hg(r){return Boolean(f3(r))}h();p();h();p();h();p();var $_={};xt($_,{identity:()=>oH});h();p();var oH=$f({prefix:"\0",name:"identity",encode:r=>u2(r),decode:r=>a2(r)});var z_={};xt(z_,{base2:()=>sH});h();p();var sH=Ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var q_={};xt(q_,{base8:()=>aH});h();p();var aH=Ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var W_={};xt(W_,{base10:()=>uH});h();p();var uH=ja({prefix:"9",name:"base10",alphabet:"0123456789"});var V_={};xt(V_,{base16:()=>cH,base16upper:()=>fH});h();p();var cH=Ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),fH=Ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var H_={};xt(H_,{base36:()=>lH,base36upper:()=>hH});h();p();var lH=ja({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),hH=ja({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Y_={};xt(Y_,{base64:()=>G_,base64pad:()=>pH,base64url:()=>dH,base64urlpad:()=>mH});h();p();var G_=Ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pH=Ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),dH=Ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mH=Ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var J_={};xt(J_,{base256emoji:()=>vH});h();p();var p3=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),yH=p3.reduce((r,e,t)=>(r[t]=e,r),[]),gH=p3.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function wH(r){return r.reduce((e,t)=>(e+=yH[t],e),"")}function bH(r){let e=[];for(let t of r){let n=gH[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var vH=$f({prefix:"\u{1F680}",name:"base256emoji",encode:wH,decode:bH});var X_={};xt(X_,{sha256:()=>zo,sha512:()=>_H});h();p();var d3=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),zo=E_({name:"sha2-256",code:18,encode:d3("SHA-256")}),_H=E_({name:"sha2-512",code:19,encode:d3("SHA-512")});var Q_={};xt(Q_,{identity:()=>kl});h();p();var m3=0,xH="identity",y3=Ao,EH=r=>Ka(m3,y3(r)),kl={code:m3,name:xH,encode:y3,digest:EH};h();p();var Yde=new TextEncoder,Jde=new TextDecoder;var bn={...$_,...z_,...q_,...W_,...V_,...Hb,...H_,...Wb,...Y_,...J_},eme={...X_,...Q_};h();p();h();p();function Fl(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function pg(r=0){return globalThis.Buffer?.allocUnsafe!=null?Fl(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function w3(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var g3=w3("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Z_=w3("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=pg(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),SH={utf8:g3,"utf-8":g3,hex:bn.base16,latin1:Z_,ascii:Z_,binary:Z_,...bn},dg=SH;function ri(r,e="utf8"){let t=dg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var b3=l3,DH=h3,ex=function(r){let e=0;if(r=r.toString().trim(),b3(r)){let t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(DH(r)){let t=r.split(":",8),n;for(n=0;n<t.length;n++){let o=b3(t[n]),a;o&&(a=ex(t[n]),t[n]=ri(a.slice(0,2),"base16")),a!=null&&++n<8&&t.splice(n,0,ri(a.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);let o=[n,1];for(n=9-t.length;n>0;n--)o.push("0");t.splice.apply(t,o)}let i=new Uint8Array(e+16);for(n=0;n<t.length;n++){let o=parseInt(t[n],16);i[e++]=o>>8&255,i[e++]=o&255}return i}throw new Error("invalid ip address")},v3=function(r,e=0,t){e=~~e,t=t??r.length-e;let n=new DataView(r.buffer);if(t===4){let i=[];for(let o=0;o<t;o++)i.push(r[e+o]);return i.join(".")}if(t===16){let i=[];for(let o=0;o<t;o+=2)i.push(n.getUint16(e+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};h();p();var Mp={},tx={},CH=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];CH.forEach(r=>{let e=IH(...r);tx[e.code]=e,Mp[e.name]=e});function IH(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}function zr(r){if(typeof r=="number"){if(tx[r]!=null)return tx[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(Mp[r]!=null)return Mp[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}var _s=Ze(Kp(),1);h();p();function ix(r,e="utf8"){let t=dg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Fl(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}h();p();function la(r,e){e==null&&(e=r.reduce((i,o)=>i+o.length,0));let t=pg(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return Fl(t)}function F3(r,e){switch(zr(r).code){case 4:case 41:return qH(e);case 6:case 273:case 33:case 132:return B3(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return VH(e);case 421:return JH(e);case 444:return k3(e);case 445:return k3(e);case 466:return YH(e);default:return ri(e,"base16")}}function R3(r,e){switch(zr(r).code){case 4:return T3(e);case 41:return T3(e);case 6:case 273:case 33:case 132:return sx(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return WH(e);case 421:return HH(e);case 444:return XH(e);case 445:return QH(e);case 466:return GH(e);default:return ix(e,"base16")}}var ox=Object.values(bn).map(r=>r.decoder),zH=function(){let r=ox[0].or(ox[1]);return ox.slice(2).forEach(e=>r=r.or(e)),r}();function T3(r){if(!hg(r))throw new Error("invalid ip address");return ex(r)}function qH(r){let e=v3(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!hg(e))throw new Error("invalid ip address");return e}function sx(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function B3(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function WH(r){let e=ix(r),t=Uint8Array.from(_s.default.encode(e.length));return la([t,e],t.length+e.length)}function VH(r){let e=_s.default.decode(r);if(r=r.slice(_s.default.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return ri(r)}function HH(r){let e;r[0]==="Q"||r[0]==="1"?e=pn(Tr.decode(`z${r}`)).bytes:e=we.parse(r).multihash.bytes;let t=Uint8Array.from(_s.default.encode(e.length));return la([t,e],t.length+e.length)}function GH(r){let e=zH.decode(r),t=Uint8Array.from(_s.default.encode(e.length));return la([t,e],t.length+e.length)}function YH(r){let e=_s.default.decode(r),t=r.slice(_s.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return"u"+ri(t,"base64url")}function JH(r){let e=_s.default.decode(r),t=r.slice(_s.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return ri(t,"base58btc")}function XH(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=Kt.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=sx(n);return la([t,i],t.length+i.length)}function QH(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=Kt.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=sx(n);return la([t,i],t.length+i.length)}function k3(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=ri(e,"base32"),i=B3(t);return`${n}:${i}`}var Rl=Ze(Kp(),1);function ZH(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=zr(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw L3("invalid address: "+r);if(o.path===!0){e.push([i,lx(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function eG(r){let e=[];return r.map(t=>{let n=gg(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),lx(e.join("/"))}function tG(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=gg(e);return e.length>1?[t.code,R3(t.code,e[1])]:[t.code]})}function ax(r){return r.map(e=>{let t=gg(e);return e[1]!=null?[t.code,F3(t.code,e[1])]:[t.code]})}function ux(r){return yg(la(r.map(e=>{let t=gg(e),n=Uint8Array.from(Rl.default.encode(t.code));return e.length>1&&e[1]!=null&&(n=la([n,e[1]])),n})))}function cx(r,e){return r.size>0?r.size/8:r.size===0?0:Rl.default.decode(e)+(Rl.default.decode.bytes??0)}function mg(r){let e=[],t=0;for(;t<r.length;){let n=Rl.default.decode(r,t),i=Rl.default.decode.bytes??0,o=zr(n),a=cx(o,r.slice(t+i));if(a===0){e.push([n]),t+=i;continue}let c=r.slice(t+i,t+i+a);if(t+=a+i,t>r.length)throw L3("Invalid address Uint8Array: "+ri(r,"base16"));e.push([n,c])}return e}function fx(r){let e=mg(r),t=ax(e);return eG(t)}function rG(r){r=lx(r);let e=ZH(r),t=tG(e);return ux(t)}function O3(r){return rG(r)}function yg(r){let e=nG(r);if(e!=null)throw e;return Uint8Array.from(r)}function nG(r){try{mg(r)}catch(e){return e}}function lx(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function L3(r){return new Error("Error parsing address: "+r)}function gg(r){return zr(r[0])}var px=Ze(Kp(),1);var $3=Ze(qo(),1);h();p();function M3(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var Bl=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},hx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},jp,$p,zp,K3,sG=Symbol.for("nodejs.util.inspect.custom"),j3=[zr("dns").code,zr("dns4").code,zr("dns6").code,zr("dnsaddr").code],aG=[zr("p2p").code,zr("ipfs").code],uG=new Map,z3=Symbol.for("@multiformats/js-multiaddr/multiaddr");function cG(r){return Boolean(r?.[z3])}var ha=class{constructor(e){if(jp.set(this,void 0),$p.set(this,void 0),zp.set(this,void 0),this[K3]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=yg(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=O3(e)}else if(cG(e))this.bytes=yg(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Bl(this,jp,"f")==null&&hx(this,jp,fx(this.bytes),"f"),Bl(this,jp,"f")}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),n,i;if(t.length>2)j3.includes(e[0])&&aG.includes(e[1])?(n=zr("tcp").name,i=443):(n=zr(t[2]).name,i=parseInt(t[3]));else if(j3.includes(e[0]))n=zr("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:n,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},zr(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=px.default.decode(t,n),o=px.default.decode.bytes??0,a=zr(i),c=cx(a,t.slice(n+o));n+=c+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return Bl(this,$p,"f")==null&&hx(this,$p,mg(this.bytes),"f"),Bl(this,$p,"f")}stringTuples(){return Bl(this,zp,"f")==null&&hx(this,zp,ax(this.tuples()),"f"),Bl(this,zp,"f")}encapsulate(e){return e=new ha(e),new ha(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new ha(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new ha(ux(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Mp.ipfs.code).pop();if(t?.[1]!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?ri(Tr.decode(`z${n}`),"base58btc"):ri(we.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>zr(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return M3(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(o=>o.resolvable);if(t==null)return[this];let n=uG.get(t.name);if(n==null)throw(0,$3.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new ha(o))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(jp=new WeakMap,$p=new WeakMap,zp=new WeakMap,K3=z3,sG)](){return`Multiaddr(${fx(this.bytes)})`}};function qp(r){return new ha(r)}h();p();h();p();function dx(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var fG=Ze(qo(),1);h();p();var q3=Symbol.for("@libp2p/peer-id");var lG=Symbol.for("nodejs.util.inspect.custom"),W3=Object.values(bn).map(r=>r.decoder).reduce((r,e)=>r.or(e),bn.identity.decoder),V3=114,H3=36,G3=37,Wp=class{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[q3](){return!0}toString(){return this.string==null&&(this.string=Tr.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return we.createV1(V3,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return dx(this.multihash.bytes,e);if(typeof e=="string")return Y3(e).equals(this);if(e?.multihash?.bytes!=null)return dx(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[lG](){return`PeerId(${this.toString()})`}},Vp=class extends Wp{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}},Hp=class extends Wp{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}},Gp=class extends Wp{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}};function Y3(r,e){if(e=e??W3,r.charAt(0)==="1"||r.charAt(0)==="Q"){let t=pn(Tr.decode(`z${r}`));return r.startsWith("12D")?new Hp({multihash:t}):r.startsWith("16U")?new Gp({multihash:t}):new Vp({multihash:t})}return hG(W3.decode(r))}function hG(r){try{let e=pn(r);if(e.code===kl.code){if(e.digest.length===H3)return new Hp({multihash:e});if(e.digest.length===G3)return new Gp({multihash:e})}if(e.code===zo.code)return new Vp({multihash:e})}catch{return pG(we.decode(r))}throw new Error("Supplied PeerID CID is invalid")}function pG(r){if(r==null||r.multihash==null||r.version==null||r.version===1&&r.code!==V3)throw new Error("Supplied PeerID CID is invalid");let e=r.multihash;if(e.code===zo.code)return new Vp({multihash:r.multihash});if(e.code===kl.code){if(e.digest.length===H3)return new Hp({multihash:r.multihash});if(e.digest.length===G3)return new Gp({multihash:r.multihash})}throw new Error("Supplied PeerID CID is invalid")}h();p();h();p();h();p();var Yp=dG;function dG(r,e,t){if(!r)return t;var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;)if(i=n.shift(),!r||(r=r[i],r===void 0))return t;return r}var Xk=Ze(Wo(),1),Jc=Ze(qo(),1);h();p();h();p();h();p();h();p();h();p();var vg=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");h();p();h();p();h();p();h();p();function _g(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function e6(r=0){return globalThis.Buffer?.allocUnsafe!=null?_g(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function r6(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var t6=r6("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),mx=r6("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=e6(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),AG={utf8:t6,"utf-8":t6,hex:bn.base16,latin1:mx,ascii:mx,binary:mx,...bn},xg=AG;function n6(r,e="utf8"){let t=xg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();function i6(r,e="utf8"){let t=xg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?_g(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}var pa="/",o6=new TextEncoder().encode(pa),Eg=o6[0],Je=class{constructor(e,t){if(typeof e=="string")this._buf=i6(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Eg)throw new Error("Invalid key")}toString(e="utf8"){return n6(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Je(e.join(pa))}static random(){return new Je(vg().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Je(e):typeof e.uint8Array=="function"?new Je(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=o6),this._buf[0]!==Eg){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Eg,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Eg;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],a=n[i];if(o<a)return!0;if(o>a)return!1}return t.length<n.length}reverse(){return Je.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(pa).slice(1)}type(){return CG(this.baseNamespace())}name(){return IG(this.baseNamespace())}instance(e){return new Je(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(pa)||(e+=pa),e+=this.type(),new Je(e)}parent(){let e=this.list();return e.length===1?new Je(pa):new Je(e.slice(0,-1).join(pa))}child(e){return this.toString()===pa?e:e.toString()===pa?this:new Je(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Je.withNamespaces([...this.namespaces(),...TG(e.map(t=>t.namespaces()))])}};function CG(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function IG(r){let e=r.split(":");return e[e.length-1]}function TG(r){return[].concat(...r)}var a6=Ze(Wo(),1);h();p();async function Nc(r){let e=0;for await(let t of r)e++;return e}var kG=(0,a6.default)("ipfs:repo:migrator:migration-8");function u6(r){return r.child?u6(r.child):r}function FG(r){try{let e=Kt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=we.decode(e).multihash.bytes,n=Kt.encode(t).slice(1).toUpperCase();return new Je(`/${n}`,!1)}catch{return r}}function RG(r){try{let e=Kt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=pn(e),n=Kt.encode(we.createV1(hs,t).bytes).slice(1);return new Je(`/${n.toUpperCase()}`,!1)}catch{return r}}async function s6(r,e,t){let n=r.blocks;await n.open();let i=u6(n),o=await Nc(i.queryKeys({filters:[a=>t(a).toString()!==a.toString()]}));try{let a=0;for await(let c of i.query({})){let f=t(c.key);f.toString()!==c.key.toString()&&(a+=1,kG(`Migrating Block from ${c.key} to ${f}`,await i.has(c.key)),await i.delete(c.key),await i.put(f,c.value),e(a/o*100,`Migrated Block from ${c.key} to ${f}`))}}finally{await n.close()}}var c6={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(r,e=()=>{})=>s6(r,e,FG),revert:(r,e=()=>{})=>s6(r,e,RG)};h();p();h();p();h();p();var Kc=Ze(pu(),1),sT=Kc.default.Reader,zG=Kc.default.Writer,M0e=Kc.default.util,Cg=Kc.default.roots.default||(Kc.default.roots.default={}),aT=Cg.ipfs=(()=>{let r={};return r.pin=function(){let e={};return e.Set=function(){function t(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(i,o){return o||(o=zG.create()),i.version!=null&&Object.hasOwnProperty.call(i,"version")&&o.uint32(8).uint32(i.version),i.fanout!=null&&Object.hasOwnProperty.call(i,"fanout")&&o.uint32(16).uint32(i.fanout),i.seed!=null&&Object.hasOwnProperty.call(i,"seed")&&o.uint32(29).fixed32(i.seed),o},t.decode=function(i,o){i instanceof sT||(i=sT.create(i));for(var a=o===void 0?i.len:i.pos+o,c=new Cg.ipfs.pin.Set;i.pos<a;){var f=i.uint32();switch(f>>>3){case 1:c.version=i.uint32();break;case 2:c.fanout=i.uint32();break;case 3:c.seed=i.fixed32();break;default:i.skipType(f&7);break}}return c},t.fromObject=function(i){if(i instanceof Cg.ipfs.pin.Set)return i;var o=new Cg.ipfs.pin.Set;return i.version!=null&&(o.version=i.version>>>0),i.fanout!=null&&(o.fanout=i.fanout>>>0),i.seed!=null&&(o.seed=i.seed>>>0),o},t.toObject=function(i,o){o||(o={});var a={};return o.defaults&&(a.version=0,a.fanout=0,a.seed=0),i.version!=null&&i.hasOwnProperty("version")&&(a.version=i.version),i.fanout!=null&&i.hasOwnProperty("fanout")&&(a.fanout=i.fanout),i.seed!=null&&i.hasOwnProperty("seed")&&(a.seed=i.seed),a},t.prototype.toJSON=function(){return this.constructor.toObject(this,Kc.default.util.toJSONOptions)},t}(),e}(),r})();var dT=Ze(cT(),1),Bg=Ze(Kp(),1);h();p();var Zp=new Je("/local/pins"),Tg=256,fT=8192,Tx=we.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),jc={direct:"direct",recursive:"recursive"};function kx(r){return new Je(`/${Kt.encode(r.multihash.bytes).toUpperCase().substring(1)}`)}h();p();h();p();h();p();function Ml(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function kg(r=0){return globalThis.Buffer?.allocUnsafe!=null?Ml(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Fg(r,e){e==null&&(e=r.reduce((i,o)=>i+o.length,0));let t=kg(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return Ml(t)}h();p();function lT(r,e){for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}h();p();h();p();function pT(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var hT=pT("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Fx=pT("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=kg(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),qG={utf8:hT,"utf-8":hT,hex:bn.base16,latin1:Fx,ascii:Fx,binary:Fx,...bn},Rg=qG;function Kl(r,e="utf8"){let t=Rg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();function jl(r,e="utf8"){let t=Rg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ml(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}var Rx=aT.pin.Set;function WG(r){let e=r.Data;if(!e)throw new Error("No data present");let t=Bg.default.decode(e),n=Bg.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+t>e.length)throw new Error("Impossibly large set header length");let i=e.slice(n,t+n),o=Rx.toObject(Rx.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(o.version!==1)throw new Error(`Unsupported Set version: ${o.version}`);if(o.fanout>r.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:e.slice(t+n)}}function VG(r,e){let t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,r,!0);let i=jl(e.toString()),o=Fg([t,i],t.byteLength+i.byteLength);return(0,dT.default)(Kl(o))}async function*mT(r,e){let t=WG(e),n=0;for(let i of e.Links){if(n<t.header.fanout){let o=i.Hash;if(!Tx.equals(o)){let a=await r.get(o),c=Ya(a);yield*mT(r,c)}}else yield i.Hash;n++}}async function*ed(r,e,t){let n=e.Links.find(a=>a.Name===t);if(!n)throw new Error("No link found with name "+t);let i=await r.get(n.Hash),o=Ya(i);yield*mT(r,o)}function HG(r,e){return t(e,0);async function t(n,i){let o=Rx.encode({version:1,fanout:Tg,seed:i}).finish(),a=Bg.default.encode(o.length),c=Fg([a,o]),f=[];for(let m=0;m<Tg;m++)f.push({Name:"",Tsize:1,Hash:Tx});if(n.length<=fT){let m=n.map(T=>({link:{Name:"",Tsize:1,Hash:T.key},data:T.data||new Uint8Array})).sort((T,F)=>lT(T.link.Hash.bytes,F.link.Hash.bytes)),w=f.concat(m.map(T=>T.link));return{Data:Fg([c,...m.map(T=>T.data)]),Links:w}}else{let m=n.reduce((E,T)=>{let F=VG(i,T.key)%Tg;return E[F]=F in E?E[F].concat([T]):[T],E},[]),w=0;for(let E of m){let T=await t(E,i+1);await d(T,w),w++}return{Data:c,Links:f}}async function d(m,w){let E=Ga(m),T=await zo.digest(E),F=we.createV0(T);await r.put(F,E);let U=m.Links.reduce((pe,he)=>pe+(he.Tsize||0),0)+E.length;f[w]={Name:"",Tsize:U,Hash:F}}}}async function Bx(r,e,t){let n=await HG(r,t.map(f=>({key:f}))),i=Ga(n),o=await zo.digest(i),a=we.createV0(o);await r.put(a,i);let c=n.Links.reduce((f,d)=>f+d.Tsize,0)+i.length;return{Name:e,Tsize:c,Hash:a}}async function YG(r,e,t,n){if(!await e.has(Zp))return;let i=await e.get(Zp),o=we.decode(i),a=await r.get(o),c=Ya(a),f=0,d=await Nc(ed(r,c,jc.recursive))+await Nc(ed(r,c,jc.direct));for await(let m of ed(r,c,jc.recursive)){f++;let w={depth:1/0};m.version!==0&&(w.version=m.version),m.code!==yn&&(w.codec=m.code),await t.put(kx(m),Js(w)),n(f/d*100,`Migrated recursive pin ${m}`)}for await(let m of ed(r,c,jc.direct)){f++;let w={depth:0};m.version!==0&&(w.version=m.version),m.code!==yn&&(w.codec=m.code),await t.put(kx(m),Js(w)),n(f/d*100,`Migrated direct pin ${m}`)}await r.delete(o),await e.delete(Zp)}async function JG(r,e,t,n){let i=[],o=[],a=0,c=await Nc(t.queryKeys({}));for await(let{key:E,value:T}of t.query({})){a++;let F=to(T),U=we.create(F.version||0,F.codec||yn,pn(Kt.decode("b"+E.toString().toLowerCase().split("/").pop())));F.depth===0?(n(a/c*100,`Reverted direct pin ${U}`),o.push(U)):(n(a/c*100,`Reverted recursive pin ${U}`),i.push(U))}n(100,"Updating pin root");let f={Links:[await Bx(r,jc.direct,o),await Bx(r,jc.recursive,i)]},d=Ga(f),m=await zo.digest(d),w=we.createV0(m);await r.put(w,d),await e.put(Zp,w.bytes)}async function yT(r,e,t){let n=r.blocks,i=r.datastore,o=r.pins;await n.open(),await i.open(),await o.open();try{await t(n,i,o,e)}finally{await o.close(),await i.close(),await n.close()}}var gT={version:9,description:"Migrates pins to datastore",migrate:(r,e=()=>{})=>yT(r,e,YG),revert:(r,e=()=>{})=>yT(r,e,JG)};h();p();h();p();var lo={};xt(lo,{abortedError:()=>XG,dbDeleteFailedError:()=>Lx,dbOpenFailedError:()=>Ox,dbWriteFailedError:()=>Nx,notFoundError:()=>Ps});h();p();var $l=Ze(qo(),1);function Ox(r){return r=r||new Error("Cannot open database"),(0,$l.default)(r,"ERR_DB_OPEN_FAILED")}function Lx(r){return r=r||new Error("Delete failed"),(0,$l.default)(r,"ERR_DB_DELETE_FAILED")}function Nx(r){return r=r||new Error("Write failed"),(0,$l.default)(r,"ERR_DB_WRITE_FAILED")}function Ps(r){return r=r||new Error("Not Found"),(0,$l.default)(r,"ERR_NOT_FOUND")}function XG(r){return r=r||new Error("Aborted"),(0,$l.default)(r,"ERR_ABORTED")}var wT=new Je("/config"),td=new Je("/version");function rd(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function QG(r,e,t){let n=await e(r);if(n)return n;let i=rd(t);return i?new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{o(Boolean(c.result))}}):!1}async function ZG(r,e,t,n){if(await t(r))return e(r);let i=rd(n);if(!i)throw Ps();return new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return o(c.result);a(Ps())}})}function Og(r){let e=r.get.bind(r),t=r.has.bind(r);return r.get=n=>ZG(n,e,t,r),r.has=n=>QG(n,t,r),r}function Ux(r){return{...r,root:Og(r.root),datastore:Og(r.datastore),pins:Og(r.pins),keys:Og(r.keys)}}async function eY(r,e,t=()=>{}){let n=rd(e);if(!n){t(`${r} did not need an upgrade`);return}t(`Upgrading ${r}`),await xT(n,(o,a)=>[{type:"del",key:o},{type:"put",key:jl(o),value:a}])}async function tY(r,e,t=()=>{}){let n=rd(e);if(!n){t(`${r} did not need a downgrade`);return}t(`Downgrading ${r}`),await xT(n,(o,a)=>[{type:"del",key:o},{type:"put",key:Kl(o),value:a}])}function vT(r){return r.child?vT(r.child):r}async function bT(r,e,t){let n=Object.entries(r).map(([a,c])=>({key:a,backend:vT(c)})).filter(({key:a,backend:c})=>c.constructor.name==="LevelDatastore").map(({key:a,backend:c})=>({name:a,store:c}));e(0,`Migrating ${n.length} dbs`);let i=0,o=a=>{e(Math.round(i/n.length*100),a)};for(let{name:a,store:c}of n){await c.open();try{await t(a,c,o)}finally{i++,await c.close()}}e(100,`Migrated ${n.length} dbs`)}var _T={version:10,description:"Migrates datastore-level keys to binary",migrate:(r,e=()=>{})=>bT(r,e,eY),revert:(r,e=()=>{})=>bT(r,e,tY)};function xT(r,e){function t(n,i){let o=r.store("readwrite"),a=o.transaction,c=0,f;a.onabort=()=>i(f||a.error||new Error("aborted by user")),a.oncomplete=()=>i();function d(){let m=n[c++],w=m.key,E;try{E=m.type==="del"?o.delete(w):o.put(m.value,w)}catch(T){f=T,a.abort();return}c<n.length&&(E.onsuccess=d)}d()}return new Promise((n,i)=>{let o=r.iterator(),a=f=>f;o._deserializeKey=o._deserializeValue=a,c();function c(){let f=(d,m,w)=>{if(d||m===void 0){let E=T=>{if(T){i(T);return}n()};o.end(E);return}t(e(m,w),c)};o.next(f)}})}h();p();var du=new Je("/local/filesroot");async function rY(r,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await r.root.open(),await r.datastore.open(),await r.root.has(du)){let t=await r.root.get(du);await r.datastore.put(du,t),await r.root.delete(du)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo datastore")}async function nY(r,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await r.root.open(),await r.datastore.open(),await r.datastore.has(du)){let t=await r.datastore.get(du);await r.root.put(du,t),await r.datastore.delete(du)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo root datastore")}var ET={version:11,description:"Store mfs root in the datastore",migrate:rY,revert:nY};h();p();var qx=Ze(pu(),1);h();p();var $c=Ze(pu(),1),PT=$c.default.Reader,iY=$c.default.Writer,oY=$c.default.util,Lg=$c.default.roots.default||($c.default.roots.default={}),Mx=Lg.Protocols=(()=>{function r(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.protocols=oY.emptyArray,r.encode=function(t,n){if(n||(n=iY.create()),t.protocols!=null&&t.protocols.length)for(var i=0;i<t.protocols.length;++i)n.uint32(10).string(t.protocols[i]);return n},r.decode=function(t,n){t instanceof PT||(t=PT.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Lg.Protocols;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(t.string());break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof Lg.Protocols)return t;var n=new Lg.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var i=0;i<t.protocols.length;++i)n.protocols[i]=String(t.protocols[i])}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.protocols=[]),t.protocols&&t.protocols.length){i.protocols=[];for(var o=0;o<t.protocols.length;++o)i.protocols[o]=t.protocols[o]}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,$c.default.util.toJSONOptions)},r})();h();p();var da=Ze(pu(),1),zl=da.default.Reader,Kx=da.default.Writer,yr=da.default.util,un=da.default.roots.default||(da.default.roots.default={}),jx=un.Addresses=(()=>{function r(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.addrs=yr.emptyArray,r.prototype.certifiedRecord=null,r.encode=function(t,n){if(n||(n=Kx.create()),t.addrs!=null&&t.addrs.length)for(var i=0;i<t.addrs.length;++i)un.Addresses.Address.encode(t.addrs[i],n.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&un.Addresses.CertifiedRecord.encode(t.certifiedRecord,n.uint32(18).fork()).ldelim(),n},r.decode=function(t,n){t instanceof zl||(t=zl.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new un.Addresses;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(un.Addresses.Address.decode(t,t.uint32()));break;case 2:o.certifiedRecord=un.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof un.Addresses)return t;var n=new un.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var i=0;i<t.addrs.length;++i){if(typeof t.addrs[i]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[i]=un.Addresses.Address.fromObject(t.addrs[i])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=un.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addrs=[]),n.defaults&&(i.certifiedRecord=null),t.addrs&&t.addrs.length){i.addrs=[];for(var o=0;o<t.addrs.length;++o)i.addrs[o]=un.Addresses.Address.toObject(t.addrs[o],n)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(i.certifiedRecord=un.Addresses.CertifiedRecord.toObject(t.certifiedRecord,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,da.default.util.toJSONOptions)},r.Address=function(){function e(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}e.prototype.multiaddr=yr.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:yr.oneOfGetter(t=["isCertified"]),set:yr.oneOfSetter(t)}),e.encode=function(i,o){return o||(o=Kx.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&o.uint32(10).bytes(i.multiaddr),i.isCertified!=null&&Object.hasOwnProperty.call(i,"isCertified")&&o.uint32(16).bool(i.isCertified),o},e.decode=function(i,o){i instanceof zl||(i=zl.create(i));for(var a=o===void 0?i.len:i.pos+o,c=new un.Addresses.Address;i.pos<a;){var f=i.uint32();switch(f>>>3){case 1:c.multiaddr=i.bytes();break;case 2:c.isCertified=i.bool();break;default:i.skipType(f&7);break}}return c},e.fromObject=function(i){if(i instanceof un.Addresses.Address)return i;var o=new un.Addresses.Address;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?yr.base64.decode(i.multiaddr,o.multiaddr=yr.newBuffer(yr.base64.length(i.multiaddr)),0):i.multiaddr.length&&(o.multiaddr=i.multiaddr)),i.isCertified!=null&&(o.isCertified=Boolean(i.isCertified)),o},e.toObject=function(i,o){o||(o={});var a={};return o.defaults&&(o.bytes===String?a.multiaddr="":(a.multiaddr=[],o.bytes!==Array&&(a.multiaddr=yr.newBuffer(a.multiaddr)))),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(a.multiaddr=o.bytes===String?yr.base64.encode(i.multiaddr,0,i.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),i.isCertified!=null&&i.hasOwnProperty("isCertified")&&(a.isCertified=i.isCertified,o.oneofs&&(a._isCertified="isCertified")),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,da.default.util.toJSONOptions)},e}(),r.CertifiedRecord=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.seq=yr.Long?yr.Long.fromBits(0,0,!0):0,e.prototype.raw=yr.newBuffer([]),e.encode=function(n,i){return i||(i=Kx.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&i.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&i.uint32(18).bytes(n.raw),i},e.decode=function(n,i){n instanceof zl||(n=zl.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new un.Addresses.CertifiedRecord;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.seq=n.uint64();break;case 2:a.raw=n.bytes();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof un.Addresses.CertifiedRecord)return n;var i=new un.Addresses.CertifiedRecord;return n.seq!=null&&(yr.Long?(i.seq=yr.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?i.seq=parseInt(n.seq,10):typeof n.seq=="number"?i.seq=n.seq:typeof n.seq=="object"&&(i.seq=new yr.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?yr.base64.decode(n.raw,i.raw=yr.newBuffer(yr.base64.length(n.raw)),0):n.raw.length&&(i.raw=n.raw)),i},e.toObject=function(n,i){i||(i={});var o={};if(i.defaults){if(yr.Long){var a=new yr.Long(0,0,!0);o.seq=i.longs===String?a.toString():i.longs===Number?a.toNumber():a}else o.seq=i.longs===String?"0":0;i.bytes===String?o.raw="":(o.raw=[],i.bytes!==Array&&(o.raw=yr.newBuffer(o.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?o.seq=i.longs===String?String(n.seq):n.seq:o.seq=i.longs===String?yr.Long.prototype.toString.call(n.seq):i.longs===Number?new yr.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(o.raw=i.bytes===String?yr.base64.encode(n.raw,0,n.raw.length):i.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,da.default.util.toJSONOptions)},e}(),r})();h();p();var ma=Ze(pu(),1),ql=ma.default.Reader,$x=ma.default.Writer,Xt=ma.default.util,qr=ma.default.roots.default||(ma.default.roots.default={}),zx=qr.Peer=(()=>{function r(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.addresses=Xt.emptyArray,r.prototype.protocols=Xt.emptyArray,r.prototype.metadata=Xt.emptyArray,r.prototype.pubKey=null,r.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(r.prototype,"_pubKey",{get:Xt.oneOfGetter(e=["pubKey"]),set:Xt.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_peerRecordEnvelope",{get:Xt.oneOfGetter(e=["peerRecordEnvelope"]),set:Xt.oneOfSetter(e)}),r.encode=function(n,i){if(i||(i=$x.create()),n.addresses!=null&&n.addresses.length)for(var o=0;o<n.addresses.length;++o)qr.Address.encode(n.addresses[o],i.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var o=0;o<n.protocols.length;++o)i.uint32(18).string(n.protocols[o]);if(n.metadata!=null&&n.metadata.length)for(var o=0;o<n.metadata.length;++o)qr.Metadata.encode(n.metadata[o],i.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&i.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&i.uint32(42).bytes(n.peerRecordEnvelope),i},r.decode=function(n,i){n instanceof ql||(n=ql.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new qr.Peer;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.addresses&&a.addresses.length||(a.addresses=[]),a.addresses.push(qr.Address.decode(n,n.uint32()));break;case 2:a.protocols&&a.protocols.length||(a.protocols=[]),a.protocols.push(n.string());break;case 3:a.metadata&&a.metadata.length||(a.metadata=[]),a.metadata.push(qr.Metadata.decode(n,n.uint32()));break;case 4:a.pubKey=n.bytes();break;case 5:a.peerRecordEnvelope=n.bytes();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof qr.Peer)return n;var i=new qr.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");i.addresses=[];for(var o=0;o<n.addresses.length;++o){if(typeof n.addresses[o]!="object")throw TypeError(".Peer.addresses: object expected");i.addresses[o]=qr.Address.fromObject(n.addresses[o])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");i.protocols=[];for(var o=0;o<n.protocols.length;++o)i.protocols[o]=String(n.protocols[o])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");i.metadata=[];for(var o=0;o<n.metadata.length;++o){if(typeof n.metadata[o]!="object")throw TypeError(".Peer.metadata: object expected");i.metadata[o]=qr.Metadata.fromObject(n.metadata[o])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?Xt.base64.decode(n.pubKey,i.pubKey=Xt.newBuffer(Xt.base64.length(n.pubKey)),0):n.pubKey.length&&(i.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?Xt.base64.decode(n.peerRecordEnvelope,i.peerRecordEnvelope=Xt.newBuffer(Xt.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(i.peerRecordEnvelope=n.peerRecordEnvelope)),i},r.toObject=function(n,i){i||(i={});var o={};if((i.arrays||i.defaults)&&(o.addresses=[],o.protocols=[],o.metadata=[]),n.addresses&&n.addresses.length){o.addresses=[];for(var a=0;a<n.addresses.length;++a)o.addresses[a]=qr.Address.toObject(n.addresses[a],i)}if(n.protocols&&n.protocols.length){o.protocols=[];for(var a=0;a<n.protocols.length;++a)o.protocols[a]=n.protocols[a]}if(n.metadata&&n.metadata.length){o.metadata=[];for(var a=0;a<n.metadata.length;++a)o.metadata[a]=qr.Metadata.toObject(n.metadata[a],i)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(o.pubKey=i.bytes===String?Xt.base64.encode(n.pubKey,0,n.pubKey.length):i.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,i.oneofs&&(o._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(o.peerRecordEnvelope=i.bytes===String?Xt.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):i.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,i.oneofs&&(o._peerRecordEnvelope="peerRecordEnvelope")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,ma.default.util.toJSONOptions)},r})(),pbe=qr.Address=(()=>{function r(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.multiaddr=Xt.newBuffer([]),r.prototype.isCertified=null;let e;return Object.defineProperty(r.prototype,"_isCertified",{get:Xt.oneOfGetter(e=["isCertified"]),set:Xt.oneOfSetter(e)}),r.encode=function(n,i){return i||(i=$x.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&i.uint32(16).bool(n.isCertified),i},r.decode=function(n,i){n instanceof ql||(n=ql.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new qr.Address;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.multiaddr=n.bytes();break;case 2:a.isCertified=n.bool();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof qr.Address)return n;var i=new qr.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?Xt.base64.decode(n.multiaddr,i.multiaddr=Xt.newBuffer(Xt.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),n.isCertified!=null&&(i.isCertified=Boolean(n.isCertified)),i},r.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=Xt.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?Xt.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(o.isCertified=n.isCertified,i.oneofs&&(o._isCertified="isCertified")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,ma.default.util.toJSONOptions)},r})(),dbe=qr.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value=Xt.newBuffer([]),r.encode=function(t,n){return n||(n=$x.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&n.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&n.uint32(18).bytes(t.value),n},r.decode=function(t,n){t instanceof ql||(t=ql.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new qr.Metadata;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.key=t.string();break;case 2:o.value=t.bytes();break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof qr.Metadata)return t;var n=new qr.Metadata;return t.key!=null&&(n.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?Xt.base64.decode(t.value,n.value=Xt.newBuffer(Xt.base64.length(t.value)),0):t.value.length&&(n.value=t.value)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.key="",n.bytes===String?i.value="":(i.value=[],n.bytes!==Array&&(i.value=Xt.newBuffer(i.value)))),t.key!=null&&t.hasOwnProperty("key")&&(i.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(i.value=n.bytes===String?Xt.base64.encode(t.value,0,t.value.length):n.bytes===Array?Array.prototype.slice.call(t.value):t.value),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,ma.default.util.toJSONOptions)},r})();h();p();var zc=Ze(pu(),1),ST=zc.default.Reader,sY=zc.default.Writer,gr=zc.default.util,Ng=zc.default.roots.default||(zc.default.roots.default={}),DT=Ng.Envelope=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.publicKey=gr.newBuffer([]),r.prototype.payloadType=gr.newBuffer([]),r.prototype.payload=gr.newBuffer([]),r.prototype.signature=gr.newBuffer([]),r.encode=function(t,n){return n||(n=sY.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&n.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&n.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&n.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&n.uint32(42).bytes(t.signature),n},r.decode=function(t,n){t instanceof ST||(t=ST.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Ng.Envelope;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.publicKey=t.bytes();break;case 2:o.payloadType=t.bytes();break;case 3:o.payload=t.bytes();break;case 5:o.signature=t.bytes();break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof Ng.Envelope)return t;var n=new Ng.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?gr.base64.decode(t.publicKey,n.publicKey=gr.newBuffer(gr.base64.length(t.publicKey)),0):t.publicKey.length&&(n.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?gr.base64.decode(t.payloadType,n.payloadType=gr.newBuffer(gr.base64.length(t.payloadType)),0):t.payloadType.length&&(n.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?gr.base64.decode(t.payload,n.payload=gr.newBuffer(gr.base64.length(t.payload)),0):t.payload.length&&(n.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?gr.base64.decode(t.signature,n.signature=gr.newBuffer(gr.base64.length(t.signature)),0):t.signature.length&&(n.signature=t.signature)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.publicKey="":(i.publicKey=[],n.bytes!==Array&&(i.publicKey=gr.newBuffer(i.publicKey))),n.bytes===String?i.payloadType="":(i.payloadType=[],n.bytes!==Array&&(i.payloadType=gr.newBuffer(i.payloadType))),n.bytes===String?i.payload="":(i.payload=[],n.bytes!==Array&&(i.payload=gr.newBuffer(i.payload))),n.bytes===String?i.signature="":(i.signature=[],n.bytes!==Array&&(i.signature=gr.newBuffer(i.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(i.publicKey=n.bytes===String?gr.base64.encode(t.publicKey,0,t.publicKey.length):n.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(i.payloadType=n.bytes===String?gr.base64.encode(t.payloadType,0,t.payloadType.length):n.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(i.payload=n.bytes===String?gr.base64.encode(t.payload,0,t.payload.length):n.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(i.signature=n.bytes===String?gr.base64.encode(t.signature,0,t.signature.length):n.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,zc.default.util.toJSONOptions)},r})();h();p();var mu=Ze(pu(),1),Ug=mu.default.Reader,AT=mu.default.Writer,Fr=mu.default.util,Go=mu.default.roots.default||(mu.default.roots.default={}),CT=Go.PeerRecord=(()=>{function r(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.peerId=Fr.newBuffer([]),r.prototype.seq=Fr.Long?Fr.Long.fromBits(0,0,!0):0,r.prototype.addresses=Fr.emptyArray,r.encode=function(t,n){if(n||(n=AT.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&n.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)Go.PeerRecord.AddressInfo.encode(t.addresses[i],n.uint32(26).fork()).ldelim();return n},r.decode=function(t,n){t instanceof Ug||(t=Ug.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Go.PeerRecord;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.peerId=t.bytes();break;case 2:o.seq=t.uint64();break;case 3:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(Go.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof Go.PeerRecord)return t;var n=new Go.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?Fr.base64.decode(t.peerId,n.peerId=Fr.newBuffer(Fr.base64.length(t.peerId)),0):t.peerId.length&&(n.peerId=t.peerId)),t.seq!=null&&(Fr.Long?(n.seq=Fr.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new Fr.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var i=0;i<t.addresses.length;++i){if(typeof t.addresses[i]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[i]=Go.PeerRecord.AddressInfo.fromObject(t.addresses[i])}}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addresses=[]),n.defaults)if(n.bytes===String?i.peerId="":(i.peerId=[],n.bytes!==Array&&(i.peerId=Fr.newBuffer(i.peerId))),Fr.Long){var o=new Fr.Long(0,0,!0);i.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.seq=n.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(i.peerId=n.bytes===String?Fr.base64.encode(t.peerId,0,t.peerId.length):n.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?i.seq=n.longs===String?String(t.seq):t.seq:i.seq=n.longs===String?Fr.Long.prototype.toString.call(t.seq):n.longs===Number?new Fr.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){i.addresses=[];for(var a=0;a<t.addresses.length;++a)i.addresses[a]=Go.PeerRecord.AddressInfo.toObject(t.addresses[a],n)}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,mu.default.util.toJSONOptions)},r.AddressInfo=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.multiaddr=Fr.newBuffer([]),e.encode=function(n,i){return i||(i=AT.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),i},e.decode=function(n,i){n instanceof Ug||(n=Ug.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new Go.PeerRecord.AddressInfo;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.multiaddr=n.bytes();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof Go.PeerRecord.AddressInfo)return n;var i=new Go.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?Fr.base64.decode(n.multiaddr,i.multiaddr=Fr.newBuffer(Fr.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),i},e.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=Fr.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?Fr.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,mu.default.util.toJSONOptions)},e}(),r})();qx.default.util.Long=void 0;qx.default.configure();async function aY(r,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let a=i.toString(),[,c,f,d,m]=a.split("/");if(c==="peers"&&!!["protos","addrs","metadata","keys"].includes(f)&&!!d)if(t[d]=t[d]||{addresses:[],protocols:[],metadata:[]},f==="protos"){let w=Mx.decode(o);t[d].protocols=w.protocols.sort()}else if(f==="addrs"){let w=jx.decode(o);t[d].addresses=w.addrs.sort((E,T)=>qp(E.multiaddr).toString().localeCompare(qp(T.multiaddr).toString())),w.certifiedRecord&&w.certifiedRecord.raw&&(t[d].peerRecordEnvelope=w.certifiedRecord.raw)}else f==="metadata"?t[d].metadata.push({key:m,value:o}):f==="keys"&&(t[d].pubKey=o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let i of Object.keys(t)){let o=t[i];o.metadata=o.metadata.sort((c,f)=>c.key.localeCompare(f.key));let a=zx.encode(o).finish();await r.datastore.put(new Je(`/peers/${i}`),a)}await r.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function uY(r,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let a=i.toString(),[,,c]=a.split("/");t[c]=zx.decode(o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let[i,o]of Object.entries(t)){if(o.protocols&&o.protocols.length>0&&await r.datastore.put(new Je(`/peers/protos/${i}`),Mx.encode({protocols:o.protocols}).finish()),o.addresses&&o.addresses.length>0){let a=o.peerRecordEnvelope,c;if(a){let f=DT.decode(a),d=CT.decode(f.payload);c={raw:a,seq:d.seq}}await r.datastore.put(new Je(`/peers/addrs/${i}`),jx.encode({addrs:o.addresses,certifiedRecord:c}).finish())}if(o.metadata&&o.metadata.length>0)for(let{key:a,value:c}of o.metadata)await r.datastore.put(new Je(`/peers/metadata/${i}/${a}`),c);o.pubKey&&await r.datastore.put(new Je(`/peers/keys/${i}`),o.pubKey)}await r.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}var IT={version:12,description:"Store each peerstore peer under a single datastore key",migrate:aY,revert:uY};var qc={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},Mg=[Object.assign({version:1},qc),Object.assign({version:2},qc),Object.assign({version:3},qc),Object.assign({version:4},qc),Object.assign({version:5},qc),Object.assign({version:6},qc),Object.assign({version:7},qc),c6,gT,_T,ET,IT];h();p();h();p();var TT=Ze(Wo(),1);var Wx={};xt(Wx,{InvalidValueError:()=>Hl,MissingRepoOptionsError:()=>Ss,NonReversibleMigrationError:()=>Wl,NotInitializedRepoError:()=>yu,RequiredParameterError:()=>Vl});h();p();var Wl=class extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=Wl.code,this.message=e}};Wl.code="ERR_NON_REVERSIBLE_MIGRATION";var yu=class extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=yu.code,this.message=e}};yu.code="ERR_NOT_INITIALIZED_REPO";var Vl=class extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=Vl.code,this.message=e}};Vl.code="ERR_REQUIRED_PARAMETER";var Hl=class extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=Hl.code,this.message=e}};Hl.code="ERR_INVALID_VALUE";var Ss=class extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=Ss.code,this.message=e}};Ss.code="ERR_MISSING_REPO_OPTIONS";var Vx=(0,TT.default)("ipfs:repo:migrator:repo:init");async function kT(r){if(!r)throw new Ss("Please pass repo options when trying to open a repo");let e=r.root;try{await e.open();let t=await e.has(td),n=await e.has(wT);return!t||!n?(Vx(`Version entry present: ${t}`),Vx(`Config entry present: ${n}`),!1):!0}catch(t){return Vx("While checking if repo is initialized error was thrown: "+t.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}async function Hx(r){if(!await kT(r))throw new yu("Repo is not initialized!");let e=r.root;await e.open();try{return parseInt(Kl(await e.get(td)))}finally{await e.close()}}async function nd(r,e){if(!e)throw new Ss("Please pass repo options when trying to open a repo");let t=e.root;await t.open(),await t.put(td,jl(String(r))),await t.close()}var FT=Ze(Wo(),1),Yo=(0,FT.default)("ipfs:repo:migrator");function fY(r){return r=r||Mg,!Array.isArray(r)||r.length===0?0:r[r.length-1].version}async function RT(r,e,t,n,i={}){let o=i.ignoreLock??!1,a=i.onProgress,c=i.isDryRun??!1,f=i.migrations??Mg;if(!r)throw new ho.RequiredParameterError("Path argument is required!");if(!t)throw new ho.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ho.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new ho.InvalidValueError("Version has to be positive integer!");e=Ux(e);let d=await Hx(e);if(d===n){Yo("Nothing to migrate.");return}if(d>n)throw new ho.InvalidValueError(`Current repo's version (${d}) is higher then toVersion (${n}), you probably wanted to revert it?`);OT(f,d,n);let m;!c&&!o&&(m=await t.repoLock.lock(r));try{for(let w of f){if(n!==void 0&&w.version>n)break;if(!(w.version<=d)){Yo(`Migrating version ${w.version}`);try{if(!c){let E=()=>{};a&&(E=(T,F)=>a(w.version,T.toFixed(2),F)),await w.migrate(e,E)}}catch(E){let T=w.version-1;throw Yo(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${T}`),await nd(T,e),new Error(`During migration to version ${w.version} exception was raised: ${E.stack||E.message||E}`)}Yo(`Migrating to version ${w.version} finished`)}}c||await nd(n||fY(f),e),Yo("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!c&&!o&&m&&await m.close()}}async function BT(r,e,t,n,i={}){let o=i.ignoreLock??!1,a=i.onProgress,c=i.isDryRun??!1,f=i.migrations??Mg;if(!r)throw new ho.RequiredParameterError("Path argument is required!");if(!t)throw new ho.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ho.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new ho.InvalidValueError("Version has to be positive integer!");e=Ux(e);let d=await Hx(e);if(d===n){Yo("Nothing to revert.");return}if(d<n)throw new ho.InvalidValueError(`Current repo's version (${d}) is lower then toVersion (${n}), you probably wanted to migrate it?`);OT(f,n,d,!0);let m;!c&&!o&&(m=await t.repoLock.lock(r)),Yo(`Reverting from version ${d} to ${n}`);try{let w=f.slice().reverse();for(let E of w){if(E.version<=n)break;if(!(E.version>d)){Yo(`Reverting migration version ${E.version}`);try{if(!c){let T=()=>{};a&&(T=(F,U)=>a(E.version,F.toFixed(2),U)),await E.revert(e,T)}}catch(T){let F=E.version;throw Yo(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${F}`),await nd(F,e),T.message=`During reversion to version ${E.version} exception was raised: ${T.message}`,T}Yo(`Reverting to version ${E.version} finished`)}}c||await nd(n,e),Yo(`All migrations successfully reverted to version ${n}!`)}finally{!c&&!o&&m&&await m.close()}}function OT(r,e,t,n=!1){let i=0;for(let o of r){if(o.version>t)break;if(o.version>e){if(n&&!o.revert)throw new ho.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${o.version} is not reversible. Cancelling reversion.`);i++}}if(i!==t-e)throw new ho.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${t}`)}var ho=Wx;var Qk=Ze(UT(),1);h();p();var HT=Ze(VT(),1),GT=HT.default;h();p();h();p();var tk=Ze(Wo(),1);h();p();h();p();h();p();h();p();function zg(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function YT(r=0){return globalThis.Buffer?.allocUnsafe!=null?zg(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function XT(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var JT=XT("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Yx=XT("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=YT(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),xY={utf8:JT,"utf-8":JT,hex:bn.base16,latin1:Yx,ascii:Yx,binary:Yx,...bn},qg=xY;function Jl(r,e="utf8"){let t=qg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}h();p();function wu(r,e="utf8"){let t=qg[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?zg(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}h();p();h();p();var Wc=class extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=Wc.code}};Wc.code="ERR_LOCK_EXISTS";var Fi=class extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=Fi.code}};Fi.code="ERR_NOT_FOUND";var Vc=class extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=Vc.code}};Vc.code="ERR_INVALID_REPO_VERSION";var id="ERR_REPO_NOT_INITIALIZED",QT="ERR_REPO_ALREADY_OPEN",ZT="ERR_REPO_ALREADY_CLOSED";async function Wg(r,e,t){let n=await e(r);if(n)return n;let i=ek(t);return i?new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{o(Boolean(c.result))}}):!1}async function Vg(r,e,t,n){if(await t(r))return e(r);let i=ek(n);if(!i)throw new Fi;return new Promise((o,a)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{a(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return o(c.result);a(new Fi)}})}function ek(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}var PY=(0,tk.default)("ipfs:repo:version"),Jx=new Je("version");function rk(r){return{async exists(){return Wg(Jx,r.has.bind(r),r)},async get(){let e=await Vg(Jx,r.get.bind(r),r.has.bind(r),r);return parseInt(Jl(e),10)},set(e){return r.put(Jx,wu(String(e)))},async check(e){let t=await this.get();return PY("comparing version: %s and %s",t,e),t===e||(t===6&&e===7||e===6&&t===7)}}}h();p();h();p();var pk=Ze(ik(),1);h();p();var sd=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Qx=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},ok=r=>globalThis.DOMException===void 0?new Qx(r):new DOMException(r),sk=r=>{let e=r.reason===void 0?ok("This operation was aborted."):r.reason;return e instanceof Error?e:ok(e)};function Zx(r,e,t,n){let i,o=new Promise((a,c)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){a(r);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:f}=n;f.aborted&&c(sk(f)),f.addEventListener("abort",()=>{c(sk(f))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof t=="function"){try{a(t())}catch(m){c(m)}return}let f=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,d=t instanceof Error?t:new sd(f);typeof r.cancel=="function"&&r.cancel(),c(d)},e),(async()=>{try{a(await r)}catch(f){c(f)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}h();p();h();p();function e1(r,e,t){let n=0,i=r.length;for(;i>0;){let o=Math.trunc(i/2),a=n+o;t(r[a],e)<=0?(n=++a,i-=o+1):i=o}return n}var Hc=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},ya,ad=class{constructor(){ya.set(this,[])}enqueue(e,t){t={priority:0,...t};let n={priority:t.priority,run:e};if(this.size&&Hc(this,ya,"f")[this.size-1].priority>=t.priority){Hc(this,ya,"f").push(n);return}let i=e1(Hc(this,ya,"f"),n,(o,a)=>a.priority-o.priority);Hc(this,ya,"f").splice(i,0,n)}dequeue(){let e=Hc(this,ya,"f").shift();return e?.run}filter(e){return Hc(this,ya,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return Hc(this,ya,"f").length}};ya=new WeakMap;var Er=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},We=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Kr,cd,fd,vu,Zg,ld,Gg,Jo,ud,Ri,Yg,Bi,hd,bu,Jg,ak,uk,hk,ck,fk,lk,Xg,t1,r1,e0,Qg,AY=new sd,n1=class extends Error{},Ds=class extends pk.default{constructor(e){var t,n,i,o;if(super(),Kr.add(this),cd.set(this,void 0),fd.set(this,void 0),vu.set(this,0),Zg.set(this,void 0),ld.set(this,void 0),Gg.set(this,0),Jo.set(this,void 0),ud.set(this,void 0),Ri.set(this,void 0),Yg.set(this,void 0),Bi.set(this,0),hd.set(this,void 0),bu.set(this,void 0),Jg.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:ad,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);Er(this,cd,e.carryoverConcurrencyCount,"f"),Er(this,fd,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),Er(this,Zg,e.intervalCap,"f"),Er(this,ld,e.interval,"f"),Er(this,Ri,new e.queueClass,"f"),Er(this,Yg,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Er(this,Jg,e.throwOnTimeout===!0,"f"),Er(this,bu,e.autoStart===!1,"f")}get concurrency(){return We(this,hd,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Er(this,hd,e,"f"),We(this,Kr,"m",e0).call(this)}async add(e,t={}){return new Promise((n,i)=>{let o=async()=>{var a,c,f;Er(this,Bi,(c=We(this,Bi,"f"),c++,c),"f"),Er(this,vu,(f=We(this,vu,"f"),f++,f),"f");try{if(!((a=t.signal)===null||a===void 0)&&a.aborted){i(new n1("The task was aborted."));return}let m=await(this.timeout===void 0&&t.timeout===void 0?e({signal:t.signal}):Zx(Promise.resolve(e({signal:t.signal})),t.timeout===void 0?this.timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?We(this,Jg,"f"):t.throwOnTimeout)&&i(AY)}));n(m),this.emit("completed",m)}catch(d){i(d),this.emit("error",d)}We(this,Kr,"m",hk).call(this)};We(this,Ri,"f").enqueue(o,t),We(this,Kr,"m",Xg).call(this),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return We(this,bu,"f")?(Er(this,bu,!1,"f"),We(this,Kr,"m",e0).call(this),this):this}pause(){Er(this,bu,!0,"f")}clear(){Er(this,Ri,new(We(this,Yg,"f")),"f")}async onEmpty(){We(this,Ri,"f").size!==0&&await We(this,Kr,"m",Qg).call(this,"empty")}async onSizeLessThan(e){We(this,Ri,"f").size<e||await We(this,Kr,"m",Qg).call(this,"next",()=>We(this,Ri,"f").size<e)}async onIdle(){We(this,Bi,"f")===0&&We(this,Ri,"f").size===0||await We(this,Kr,"m",Qg).call(this,"idle")}get size(){return We(this,Ri,"f").size}sizeBy(e){return We(this,Ri,"f").filter(e).length}get pending(){return We(this,Bi,"f")}get isPaused(){return We(this,bu,"f")}};cd=new WeakMap,fd=new WeakMap,vu=new WeakMap,Zg=new WeakMap,ld=new WeakMap,Gg=new WeakMap,Jo=new WeakMap,ud=new WeakMap,Ri=new WeakMap,Yg=new WeakMap,Bi=new WeakMap,hd=new WeakMap,bu=new WeakMap,Jg=new WeakMap,Kr=new WeakSet,ak=function(){return We(this,fd,"f")||We(this,vu,"f")<We(this,Zg,"f")},uk=function(){return We(this,Bi,"f")<We(this,hd,"f")},hk=function(){var e;Er(this,Bi,(e=We(this,Bi,"f"),e--,e),"f"),We(this,Kr,"m",Xg).call(this),this.emit("next")},ck=function(){this.emit("empty"),We(this,Bi,"f")===0&&this.emit("idle")},fk=function(){We(this,Kr,"m",r1).call(this),We(this,Kr,"m",t1).call(this),Er(this,ud,void 0,"f")},lk=function(){let e=Date.now();if(We(this,Jo,"f")===void 0){let t=We(this,Gg,"f")-e;if(t<0)Er(this,vu,We(this,cd,"f")?We(this,Bi,"f"):0,"f");else return We(this,ud,"f")===void 0&&Er(this,ud,setTimeout(()=>{We(this,Kr,"m",fk).call(this)},t),"f"),!0}return!1},Xg=function(){if(We(this,Ri,"f").size===0)return We(this,Jo,"f")&&clearInterval(We(this,Jo,"f")),Er(this,Jo,void 0,"f"),We(this,Kr,"m",ck).call(this),!1;if(!We(this,bu,"f")){let e=!We(this,Kr,"a",lk);if(We(this,Kr,"a",ak)&&We(this,Kr,"a",uk)){let t=We(this,Ri,"f").dequeue();return t?(this.emit("active"),t(),e&&We(this,Kr,"m",t1).call(this),!0):!1}}return!1},t1=function(){We(this,fd,"f")||We(this,Jo,"f")!==void 0||(Er(this,Jo,setInterval(()=>{We(this,Kr,"m",r1).call(this)},We(this,ld,"f")),"f"),Er(this,Gg,Date.now()+We(this,ld,"f"),"f"))},r1=function(){We(this,vu,"f")===0&&We(this,Bi,"f")===0&&We(this,Jo,"f")&&(clearInterval(We(this,Jo,"f")),Er(this,Jo,void 0,"f")),Er(this,vu,We(this,cd,"f")?We(this,Bi,"f"):0,"f"),We(this,Kr,"m",e0).call(this)},e0=function(){for(;We(this,Kr,"m",Xg).call(this););},Qg=async function(e,t){return new Promise(n=>{let i=()=>{t&&!t()||(this.off(e,i),n())};this.on(e,i)})};h();p();var mk=CY;function CY(r,e,t){var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(i=n.pop(),!i)return!1;dk(i);for(var o;o=n.shift();)if(dk(o),typeof r[o]>"u"&&(r[o]={}),r=r[o],!r||typeof r!="object")return!1;return r[i]=t,!0}function dk(r){if(r=="__proto__"||r=="constructor"||r=="prototype")throw new Error("setting of prototype values not supported")}var t0=Ze(qo(),1);var IY=Ds.default?Ds.default:Ds,i1=new Je("config");function yk(r){let e=new IY({concurrency:1}),t={async getAll(o={}){let a=await Vg(i1,r.get.bind(r),r.has.bind(r),r);return JSON.parse(Jl(a))},async get(o,a={}){if(o==null)throw new Fi(`Key ${o} does not exist in config`);let c=await this.getAll(a),f=Yp(c,o);if(f===void 0)throw new Fi(`Key ${o} does not exist in config`);return f},set(o,a,c={}){if(typeof o!="string"&&!(o instanceof String))throw(0,t0.default)(new Error("Invalid key type: "+typeof o),"ERR_INVALID_KEY");if(a===void 0||a instanceof Uint8Array)throw(0,t0.default)(new Error("Invalid value type: "+typeof a),"ERR_INVALID_VALUE");return e.add(()=>n({key:o,value:a},c.signal))},replace(o,a={}){if(!o||o instanceof Uint8Array)throw(0,t0.default)(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return e.add(()=>n({key:void 0,value:o},a.signal))},async exists(){return Wg(i1,r.has.bind(r),r)}};return t;async function n(o,a){if(a&&a.aborted)return;let c=o.key,f=o.value;if(c){let d=await t.getAll();return typeof d=="object"&&d!==null&&mk(d,c,f),i(d)}return i(f)}function i(o){let a=wu(JSON.stringify(o,null,2));return r.put(i1,a)}}h();p();h();p();h();p();h();p();function pd(r){if(typeof r!="object"||r===null)return!1;let e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function o1(r,e={}){if(!pd(r)&&!Array.isArray(r))throw new TypeError("Expected a plain object or array");let{deep:t,compare:n}=e,i=[],o=[],a=f=>{let d=i.indexOf(f);if(d!==-1)return o[d];let m=[];return i.push(f),o.push(m),m.push(...f.map(w=>Array.isArray(w)?a(w):pd(w)?c(w):w)),m},c=f=>{let d=i.indexOf(f);if(d!==-1)return o[d];let m={},w=Object.keys(f).sort(n);i.push(f),o.push(m);for(let E of w){let T=f[E],F;t&&Array.isArray(T)?F=a(T):F=t&&pd(T)?c(T):T,Object.defineProperty(m,E,{...Object.getOwnPropertyDescriptor(f,E),value:F})}return m};return Array.isArray(r)?t?a(r):r.slice():c(r)}var s1=new Je("datastore_spec");function gk(r){return{exists(){return r.has(s1)},async get(){let e=await r.get(s1);return JSON.parse(Jl(e))},async set(e){return r.put(s1,wu(JSON.stringify(o1(e,{deep:!0}))))}}}h();p();var a1=new Je("api");function wk(r){return{async get(){let e=await r.get(a1);return e&&e.toString()},set(e){return r.put(a1,wu(e.toString()))},delete(){return r.delete(a1)}}}h();p();h();p();async function*dd(r,e){for await(let t of r)await e(t)&&(yield t)}h();p();h();p();var r0=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Xl=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new r0(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new r0(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function As(r={}){return TY(t=>{let n=t.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function TY(r,e){e=e??{};let t=e.onEnd,n=new Xl,i,o,a,c=async()=>n.isEmpty()?a?{done:!0}:await new Promise((U,pe)=>{o=he=>{o=null,n.push(he);try{U(r(n))}catch(De){pe(De)}return i}}):r(n),f=U=>o!=null?o(U):(n.push(U),i),d=U=>(n=new Xl,o!=null?o({error:U}):(n.push({error:U}),i)),m=U=>{if(a)return i;if(e?.objectMode!==!0&&U?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return f({done:!1,value:U})},w=U=>a?i:(a=!0,U!=null?d(U):f({done:!0})),E=()=>(n=new Xl,w(),{done:!0}),T=U=>(w(U),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:E,throw:T,push:m,end:w,get readableLength(){return n.size}},t==null)return i;let F=i;return i={[Symbol.asyncIterator](){return this},next(){return F.next()},throw(U){return F.throw(U),t!=null&&(t(U),t=void 0),{done:!0}},return(){return F.return(),t!=null&&(t(),t=void 0),{done:!0}},push:m,end(U){return F.end(U),t!=null&&(t(U),t=void 0),i},get readableLength(){return F.readableLength}},i}h();p();async function u1(r){for await(let e of r);}var bk=Ze(qo(),1);function vk(r){return{open(){return r.open()},close(){return r.close()},query(e,t){return r.query(e,t)},queryKeys(e,t){return r.queryKeys(e,t)},async get(e,t){let n=_u(e);return n.isIdentity?Promise.resolve(n.digest):r.get(e,t)},async*getMany(e,t){for await(let n of e)yield this.get(n,t)},async put(e,t,n){let{isIdentity:i}=_u(e);i||await r.put(e,t,n)},async*putMany(e,t){let n=As({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await u1(r.putMany(async function*(){for await(let{key:o,value:a}of e)_u(o).isIdentity||(yield{key:o,value:a}),n.push({key:o,value:a})}())),n.end()}catch(o){n.end(o)}}),yield*n},has(e,t){let{isIdentity:n}=_u(e);return n?Promise.resolve(!0):r.has(e,t)},delete(e,t){let{isIdentity:n}=_u(e);return n?Promise.resolve():r.delete(e,t)},deleteMany(e,t){return r.deleteMany(dd(e,n=>!_u(n).isIdentity),t)},batch(){let e=r.batch();return{put(t,n){let{isIdentity:i}=_u(t);i||e.put(t,n)},delete(t){let{isIdentity:n}=_u(t);n||e.delete(t)},commit:t=>e.commit(t)}}}}function _u(r){let e=we.asCID(r);if(e==null)throw(0,bk.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==kl.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}h();p();h();p();var _k=Ze(Wo(),1),xk=(0,_k.default)("ipfs:repo:lock:memory"),Ek="repo.lock",md={};async function kY(r){let e=r+"/"+Ek;if(xk("locking %s",e),md[e]===!0)throw new Wc(`Lock already being held for file: ${e}`);return md[e]=!0,{async close(){md[e]&&delete md[e]}}}async function FY(r){let e=r+"/"+Ek;return xk(`checking lock: ${e}`),Boolean(md[e])}var Pk={lock:kY,locked:FY};var Sk={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:Pk};h();p();var c1={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};h();p();var Ck=Ze(qo(),1),Ik=Ze(Wo(),1);h();p();async function n0(r){for await(let e of r)return e}h();p();function i0({enumerable:r=!0,configurable:e=!1}={}){return{enumerable:r,configurable:e,writable:!1}}function*RY(r,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(let[t,n]of e.entries()){let i=[...r,t],o=we.asCID(n);o?yield[i.join("/"),o]:typeof n=="object"&&(yield*f1(n,i))}else{let t=we.asCID(e);t?yield[r.join("/"),t]:yield*f1(e,r)}}function*f1(r,e){if(!(r==null||r instanceof Uint8Array))for(let[t,n]of Object.entries(r)){let i=[...e,t];yield*RY(i,n)}}function*BY(r,e){if(Array.isArray(e))for(let[t,n]of e.entries()){let i=[...r,t];yield i.join("/"),typeof n=="object"&&!we.asCID(n)&&(yield*l1(n,i))}else yield*l1(e,r)}function*l1(r,e){if(!(r==null||typeof r!="object"))for(let[t,n]of Object.entries(r)){let i=[...e,t];yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!we.asCID(n)&&(yield*BY(i,n))}}function OY(r,e){let t=r;for(let[n,i]of e.entries()){if(t=t[i],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);let o=we.asCID(t);if(o)return{value:o,remaining:e.slice(n+1).join("/")}}return{value:t}}var h1=class{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:i0(),bytes:i0(),value:i0(),asBlock:i0()})}links(){return f1(this.value,[])}tree(){return l1(this.value,[])}get(e="/"){return OY(this.value,e.split("/").filter(Boolean))}};function o0({bytes:r,cid:e,value:t,codec:n}){let i=t!==void 0?t:n&&n.decode(r);if(i===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new h1({cid:e,bytes:r,value:i})}h();p();var Dk=Ze(qo(),1);function yd(r){let e=we.asCID(r);if(e==null)throw(0,Dk.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let t=Kt.encode(e.multihash.bytes);return new Je("/"+t.slice(1).toUpperCase(),!1)}function p1(r){return pn(Kt.decode(`b${r.toString().toLowerCase().substring(1)}`))}h();p();var Ak=Ze(Wo(),1);var LY=(0,Ak.default)("ipfs:repo:utils:walk-dag");async function*Ql(r,e,t,n){try{let i=await e.get(r,n),o=await t(r.code),a=o0({bytes:i,cid:r,codec:o});for(let[,c]of a.links())yield c,yield*Ql(c,e,t,n)}catch(i){throw LY("Could not walk DAG for CID",r.toString(),i),i}}h();p();var ii={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};h();p();var gd=class extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(let[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){let n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield e)}for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield e)}}get(e){if(this.cache.has(e)){let t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){let t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){let i=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");let t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}}*entriesAscending(){for(let[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(let t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(let[n,i]of this.entriesAscending())e.call(t,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}};var NY=2048;function UY(r){let e=`Invalid type '${r}', must be one of {direct, indirect, recursive, all}`;return(0,Ck.default)(new Error(e),"ERR_INVALID_PIN_TYPE")}var s0=class{constructor({pinstore:e,blockstore:t,loadCodec:n}){this.pinstore=e,this.blockstore=t,this.loadCodec=n,this.log=(0,Ik.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);let n={depth:0};return e.version!==0&&(n.version=e.version),e.code!==yn&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),this.pinstore.put(yd(e),Js(n))}unpin(e,t){return this.pinstore.delete(yd(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);let n={depth:1/0};e.version!==0&&(n.version=e.version),e.code!==yn&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),await this.pinstore.put(yd(e),Js(n))}async*directKeys(e){for await(let t of this.pinstore.query({filters:[n=>to(n.value).depth===0]})){let n=to(t.value),i=n.version||0,o=n.codec!=null?n.codec:yn,a=p1(t.key);yield{cid:we.create(i,o,a),metadata:n.metadata}}}async*recursiveKeys(e){for await(let t of this.pinstore.query({filters:[n=>to(n.value).depth===1/0]})){let n=to(t.value),i=n.version||0,o=n.codec!=null?n.codec:yn,a=p1(t.key);yield{cid:we.create(i,o,a),metadata:n.metadata}}}async*indirectKeys(e){for await(let{cid:t}of this.recursiveKeys())for await(let n of Ql(t,this.blockstore,this.loadCodec,e)){let i=[ii.recursive];(await this.isPinnedWithType(n,i)).pinned||(yield n)}}async isPinnedWithType(e,t,n){Array.isArray(t)||(t=[t]);let i=t.includes(ii.all),o=t.includes(ii.direct),a=t.includes(ii.recursive),c=t.includes(ii.indirect);if(a||o||i){let m=await n0(this.pinstore.query({prefix:yd(e).toString(),filters:[w=>{if(i)return!0;let E=to(w.value);return t.includes(E.depth===0?ii.direct:ii.recursive)}],limit:1}));if(m){let w=to(m.value);return{cid:e,pinned:!0,reason:w.depth===0?ii.direct:ii.recursive,metadata:w.metadata}}}let f=this;async function*d(m,w){for await(let{cid:E}of w)for await(let T of Ql(E,f.blockstore,f.loadCodec))if(T.equals(m)){yield E;return}}if(i||c){let m=await n0(d(e,this.recursiveKeys()));if(m)return{cid:e,pinned:!0,reason:ii.indirect,parent:m}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t={}){let n=new gd({maxSize:t.cidCacheMaxSize??NY}),i=async(o,a)=>{if(n.has(o.toString()))return;n.set(o.toString(),!0);let c=await this.blockstore.get(o,a),f=await this.loadCodec(o.code),d=o0({bytes:c,cid:o,codec:f});await Promise.all([...d.links()].map(([,m])=>i(m,a)))};await i(e,t)}static checkPinType(e){if(typeof e!="string"||!Object.keys(ii).includes(e))throw UY(e);return!0}};h();p();h();p();async function*Gc(r,e){for await(let t of r)yield e(t)}var kk=Ze(qo(),1);function Fk(r,e){return{open(){return e.open()},close(){return e.close()},query(t,n){return e.query(t,n)},queryKeys(t,n){return e.queryKeys(t,n)},async get(t,n){return e.get(t,n)},async*getMany(t,n){yield*e.getMany(t,n)},async put(t,n,i){await e.put(t,n,i)},async*putMany(t,n){yield*e.putMany(t,n)},has(t,n){return e.has(t,n)},async delete(t,n){return await Tk(t,r),e.delete(t,n)},deleteMany(t,n){return e.deleteMany(Gc(t,async i=>(await Tk(i,r),i)),n)},batch(){return e.batch()}}}async function Tk(r,e){let{pinned:t,reason:n}=await e.isPinnedWithType(r,ii.all);if(t)throw(0,kk.default)(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}h();p();h();p();var d1=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},m1=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},Rk=r=>globalThis.DOMException===void 0?new m1(r):new DOMException(r),Bk=r=>{let e=r.reason===void 0?Rk("This operation was aborted."):r.reason;return e instanceof Error?e:Rk(e)};function y1(r,e){let{milliseconds:t,fallback:n,message:i,customTimers:o={setTimeout,clearTimeout}}=e,a,c=new Promise((f,d)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t===Number.POSITIVE_INFINITY){f(r);return}if(e.signal){let{signal:m}=e;m.aborted&&d(Bk(m)),m.addEventListener("abort",()=>{d(Bk(m))})}a=o.setTimeout.call(void 0,()=>{if(n){try{f(n())}catch(E){d(E)}return}let m=typeof i=="string"?i:`Promise timed out after ${t} milliseconds`,w=i instanceof Error?i:new d1(m);typeof r.cancel=="function"&&r.cancel(),d(w)},t),(async()=>{try{f(await r)}catch(m){d(m)}finally{o.clearTimeout.call(void 0,a)}})()});return c.clear=()=>{o.clearTimeout.call(void 0,a),a=void 0},c}h();p();h();p();var g1="lock:worker:request-read",w1="lock:worker:release-read",b1="lock:master:grant-read",v1="lock:worker:request-write",_1="lock:worker:release-write",x1="lock:master:grant-write";h();p();var xu={},Zl=r=>{r.addEventListener("message",e=>{Zl.dispatchEvent("message",r,e)}),r.port!=null&&r.port.addEventListener("message",e=>{Zl.dispatchEvent("message",r,e)})};Zl.addEventListener=(r,e)=>{xu[r]==null&&(xu[r]=[]),xu[r].push(e)};Zl.removeEventListener=(r,e)=>{xu[r]!=null&&(xu[r]=xu[r].filter(t=>t===e))};Zl.dispatchEvent=function(r,e,t){xu[r]!=null&&xu[r].forEach(n=>n(e,t))};var E1=Zl;var Ok=(r,e,t,n,i)=>(o,a)=>{if(a.data.type!==t)return;let c={type:a.data.type,name:a.data.name,identifier:a.data.identifier};r.dispatchEvent(new MessageEvent(e,{data:{name:c.name,handler:async()=>(o.postMessage({type:i,name:c.name,identifier:c.identifier}),await new Promise(f=>{let d=m=>{if(m==null||m.data==null)return;let w={type:m.data.type,name:m.data.name,identifier:m.data.identifier};w.type===n&&w.identifier===c.identifier&&(o.removeEventListener("message",d),f())};o.addEventListener("message",d)}))}}))},Lk=(r,e,t,n)=>async()=>{let i=vg();return globalThis.postMessage({type:e,identifier:i,name:r}),await new Promise(o=>{let a=c=>{if(c==null||c.data==null)return;let f={type:c.data.type,identifier:c.data.identifier};f.type===t&&f.identifier===i&&(globalThis.removeEventListener("message",a),o(()=>{globalThis.postMessage({type:n,identifier:i,name:r})}))};globalThis.addEventListener("message",a)})},MY={singleProcess:!1},Nk=r=>{if(r=Object.assign({},MY,r),Boolean(globalThis.document)||r.singleProcess){let t=new EventTarget;return E1.addEventListener("message",Ok(t,"requestReadLock",g1,w1,b1)),E1.addEventListener("message",Ok(t,"requestWriteLock",v1,_1,x1)),t}return{isWorker:!0,readLock:t=>Lk(t,g1,b1,w1),writeLock:t=>Lk(t,v1,x1,_1)}};var Yc={},Eu;async function P1(r,e){let t,n=new Promise(i=>{t=i});return r.add(async()=>await y1((async()=>await new Promise(i=>{t(()=>{i()})}))(),{milliseconds:e.timeout})),await n}var KY=(r,e)=>{if(Eu.isWorker===!0)return{readLock:Eu.readLock(r,e),writeLock:Eu.writeLock(r,e)};let t=new Ds({concurrency:1}),n;return{async readLock(){if(n!=null)return await P1(n,e);n=new Ds({concurrency:e.concurrency,autoStart:!1});let i=n,o=P1(n,e);return t.add(async()=>(i.start(),await i.onIdle().then(()=>{n===i&&(n=null)}))),await o},async writeLock(){return n=null,await P1(t,e)}}},jY={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function S1(r){let e=Object.assign({},jY,r);return Eu==null&&(Eu=Nk(e),Eu.isWorker!==!0&&(Eu.addEventListener("requestReadLock",t=>{Yc[t.data.name]!=null&&Yc[t.data.name].readLock().then(async n=>await t.data.handler().finally(()=>n()))}),Eu.addEventListener("requestWriteLock",async t=>{Yc[t.data.name]!=null&&Yc[t.data.name].writeLock().then(async n=>await t.data.handler().finally(()=>n()))}))),Yc[e.name]==null&&(Yc[e.name]=KY(e.name,e)),Yc[e.name]}h();p();var Gk=Ze(Wo(),1);h();p();h();p();async function*D1(r,e=1){let t=[];e<1&&(e=1);for await(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length>0;)yield t.slice(0,e),t=t.slice(e)}async function*A1(r,e=1){for await(let t of D1(r,e)){let n=t.map(async i=>await i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}h();p();var Vk=Ze(I1(),1),qY=(...r)=>{let e;for(;r.length>0;)e=r.shift()(e);return e},Hk=r=>r!=null&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),T1=r=>r!=null&&typeof r.sink=="function"&&Hk(r.source),WY=r=>e=>{let t=r.sink(e);if(t.then!=null){let n=As({objectMode:!0});return t.then(()=>{n.end()},o=>{n.end(o)}),(0,Vk.default)(n,async function*(){yield*r.source,n.end()}())}return r.source};function k1(r,...e){if(T1(r)){let n=r;r=()=>n.source}else if(Hk(r)){let n=r;r=()=>n}let t=[r,...e];if(t.length>1&&T1(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let n=1;n<t.length-1;n++)T1(t[n])&&(t[n]=WY(t[n]));return qY(...t)}h();p();async function*a0(...r){let e=As({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}}),yield*e}var wd=(0,Gk.default)("ipfs:repo:gc"),VY=Ps().code,HY=256,GY=new Je("/local/filesroot");function Yk({gcLock:r,pins:e,blockstore:t,root:n,loadCodec:i}){async function*o(){let a=Date.now();wd("Creating set of marked blocks");let c=await r.writeLock();try{let f=await YY({pins:e,blockstore:t,root:n,loadCodec:i}),d=t.queryKeys({});yield*JY({blockstore:t},f,d),wd(`Complete (${Date.now()-a}ms)`)}finally{c()}}return o}async function YY({pins:r,blockstore:e,loadCodec:t,root:n}){let i=async function*(){let c;try{c=await n.get(GY)}catch(d){if(d.code===VY){wd("No blocks in MFS");return}throw d}let f=we.decode(c);yield f,yield*Ql(f,e,t)}(),o=a0(Gc(r.recursiveKeys(),({cid:c})=>c),r.indirectKeys(),Gc(r.directKeys(),({cid:c})=>c),i),a=new Set;for await(let c of a0(o,i))a.add(Kt.encode(c.multihash.bytes));return a}async function*JY({blockstore:r},e,t){let n=0,i=0;yield*k1(A1(Gc(t,async a=>async function(){n++;try{let f=Kt.encode(a.multihash.bytes);if(e.has(f))return null;try{await r.delete(a),i++}catch(d){return{err:new Error(`Could not delete block with CID ${a}: ${d.message}`)}}return{cid:a}}catch(f){let d=`Could delete block with CID ${a}`;return wd(d,f),{err:new Error(d+`: ${f.message}`)}}}),HY),a=>dd(a,Boolean)),wd(`Marked set has ${e.size} unique blocks. Blockstore has ${n} blocks. Deleted ${i} blocks.`)}var oi=(0,Xk.default)("ipfs:repo"),XY=Number.MAX_SAFE_INTEGER,QY="repoAutoMigrate",R1=class{constructor(e,t,n,i){if(typeof e!="string")throw new Error("missing repo path");if(typeof t!="function")throw new Error("missing codec loader");this.options=GT(Sk,i),this.closed=!0,this.path=e,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;let o=n.blocks,a=n.pins;this.pins=new s0({pinstore:a,blockstore:o,loadCodec:t});let c=Fk(this.pins,o);this.blocks=vk(c),this.version=rk(this.root),this.config=yk(this.root),this.spec=gk(this.root),this.apiAddr=wk(this.root),this.gcLock=S1({name:e,singleProcess:this.options.repoOwner!==!1}),this.gc=Yk({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){oi("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(ZY(e)),await this.spec.set(eJ(e)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw(0,Jc.default)(new Error("repo is already open"),QT);oi("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),oi("acquired repo.lock"),!await this.version.check(12))if(await this._isAutoMigrationEnabled())await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new Vc("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");oi("creating datastore"),await this.datastore.open(),oi("creating blocks"),await this.blocks.open(),oi("creating keystore"),await this.keys.open(),oi("creating pins"),await this.pins.pinstore.open(),this.closed=!1,oi("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(t){oi("error removing lock",t)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,Jc.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){oi("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(t){throw t.code==="ERR_NOT_FOUND"?(0,Jc.default)(new Error("repo is not initialized yet"),id,{path:this.path}):t}if(!e)throw(0,Jc.default)(new Error("repo is not initialized yet"),id,{path:this.path})}async close(){if(this.closed)throw(0,Jc.default)(new Error("repo is already closed"),ZT);oi("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==id&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),oi("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,t,n,i,o]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),Jk(this.datastore),Jk(this.keys)]),a=t.size+i+o;return{repoPath:this.path,storageMax:e,version:n,numObjects:t.count,repoSize:a}}throw(0,Jc.default)(new Error("repo is not initialized yet"),id,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(QY)}catch(t){if(t.code===Fi.code)e=!0;else throw t}return e}async _migrate(e,t){return await this.version.get()>e?(oi(`reverting to version ${e}`),BT(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(oi(`migrating to version ${e}`),RT(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt((0,Qk.default)(e))}catch{return BigInt(XY)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(let{key:n,value:i}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(i.byteLength),t+=BigInt(n.bytes.byteLength);return{count:e,size:t}}};async function Jk(r){let e=BigInt(0);for await(let t of r.query({}))e+=BigInt(t.value.byteLength),e+=BigInt(t.key.uint8Array().byteLength);return e}function Zk(r,e,t,n){return new R1(r,e,t,n)}function ZY(r){return r.Datastore=Object.assign({},c1,Yp(r,"datastore")),r}function eJ(r){let e={...c1.Spec,...Yp(r,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(t=>({mountpoint:t.mountpoint,type:t.child.type,path:t.child.path,shardFunc:t.child.shardFunc}))}}h();p();h();p();async function u0(r){for await(let e of r);}var sF=Ze(qo(),1);h();p();var O1=Ze(c0(),1),Xc=Ze(f0(),1),L1=Ze(l0(),1),oF=Ze(B1(),1),iF=(r,e)=>async function*(){yield*(await(0,oF.default)(r)).sort(e)}(),h0=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,O1.default)(this.putMany(e,n)),e=[],await(0,O1.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,Xc.default)(n,i=>i.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Xc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>iF(i,o),n)),e.offset!=null){let i=0;n=(0,Xc.default)(n,()=>i++>=(e.offset||0))}return e.limit!=null&&(n=(0,L1.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,Xc.default)(n,i=>i.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Xc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>iF(i,o),n)),e.offset!=null){let i=0;n=(0,Xc.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,L1.default)(n,e.limit)),n}};function eh(r){let e=we.asCID(r);if(!e)throw(0,sF.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Je("/"+Kt.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function Pu(r){return we.createV1(hs,pn(Kt.decode("b"+r.toString().slice(1).toLowerCase())))}function N1(r){let e=r.substring(0,1);if(e==="/")return N1(r.substring(1));let t;e.toLowerCase()==="b"?t=o=>Kt.decode(o.toLowerCase()).subarray(2):e.toLowerCase()==="c"?t=o=>Vb.decode(o.toLowerCase()).subarray(2):e==="z"?t=o=>Tr.decode(o).subarray(2):e==="Q"?t=o=>Tr.decode("z"+o):t=o=>Kt.decode("b"+o.toLowerCase()).subarray(2);let n;for(let o=1;o<r.length;o++)try{n=t(r.substring(0,o))}catch(a){if(a.message!=="Unexpected end of data")throw a}let i="/C";return n&&(i=`/${Kt.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}function oJ(r){return{...r,prefix:r.prefix?N1(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e({key:Pu(t.key),value:t.value})):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e({key:Pu(t.key),value:t.value},{key:Pu(n.key),value:n.value})):void 0}}function sJ(r){return{...r,prefix:r.prefix?N1(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e(Pu(t))):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e(Pu(t),Pu(n))):void 0}}var p0=class extends h0{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(let{key:n,value:i}of this.child.query(oJ(e),t))yield{key:Pu(n),value:i}}async*queryKeys(e,t){for await(let n of this.child.queryKeys(sJ(e),t))yield Pu(n)}async get(e,t){return this.child.get(eh(e),t)}async*getMany(e,t){for await(let n of e)yield this.get(n,t)}async put(e,t,n){await this.child.put(eh(e),t,n)}async*putMany(e,t){let n=As({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let o=this.child;await u0(this.child.putMany(async function*(){for await(let a of e){let c=eh(a.key);await o.has(c,t)||(yield{key:c,value:a.value}),n.push(a)}}())),n.end()}catch(o){n.end(o)}}),yield*n}has(e,t){return this.child.has(eh(e),t)}delete(e,t){return this.child.delete(eh(e),t)}deleteMany(e,t){let n=As({objectMode:!0});return u0(this.child.deleteMany(async function*(){for await(let i of e)yield eh(i),n.push(i);n.end()}(),t)).catch(i=>{n.end(i)}),n}};h();p();h();p();h();p();var aF=Ze(B1(),1),d0=(r,e)=>async function*(){yield*(await(0,aF.default)(r)).sort(e)}();var U1=Ze(c0(),1),Qc=Ze(f0(),1),M1=Ze(l0(),1),Xo=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,U1.default)(this.putMany(e,n)),e=[],await(0,U1.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,Qc.default)(n,i=>i.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Qc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>d0(i,o),n)),e.offset!=null){let i=0;n=(0,Qc.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,M1.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,Qc.default)(n,i=>i.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,Qc.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>d0(i,o),n)),e.offset!=null){let i=0;n=(0,Qc.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,M1.default)(n,e.limit)),n}};var bd=class extends Xo{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){if(!await this.has(e))throw Ps();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:new Je(e),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Je(e))}};h();p();h();p();h();p();h();p();var uF="SHARDING",cF="_README";h();p();var fJ=Ze(lF(),1);h();p();var ZPe=new Je(uF),eSe=new Je(cF);h();p();var lJ=Ze(f0(),1),hJ=Ze(l0(),1),pJ=Ze(I1(),1);h();p();h();p();var Cs=Ze(Wo(),1);Cs.default.formatters.b=r=>r==null?"undefined":Tr.baseEncode(r);Cs.default.formatters.t=r=>r==null?"undefined":Kt.baseEncode(r);Cs.default.formatters.m=r=>r==null?"undefined":G_.baseEncode(r);Cs.default.formatters.p=r=>r==null?"undefined":r.toString();Cs.default.formatters.c=r=>r==null?"undefined":r.toString();Cs.default.formatters.k=r=>r==null?"undefined":r.toString();function pF(r){return Object.assign((0,Cs.default)(r),{error:(0,Cs.default)(`${r}:error`),trace:(0,Cs.default)(`${r}:trace`)})}var dJ=Ze(c0(),1),wSe=pF("datastore:core:tiered");h();p();h();p();async function*th(r,e){for await(let t of r)await e(t)&&(yield t)}h();p();async function*K1(r,e){for await(let t of r)yield e(t)}h();p();async function*m0(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}}h();p();h();p();async function j1(r){let e=[];for await(let t of r)e.push(t);return e}async function*y0(r,e){yield*(await j1(r)).sort(e)}var CR=Ze(AR(),1),df=class extends Xo{constructor(e,t={}){super(),this.db=typeof e=="string"?new CR.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw lo.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(n){throw lo.dbWriteFailedError(n)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(n){throw n.notFound?lo.notFoundError(n):lo.dbWriteFailedError(n)}return t}async has(e){try{await this.db.get(e.toString())}catch(t){if(t.notFound)return!1;throw t}return!0}async delete(e){try{await this.db.del(e.toString())}catch(t){throw lo.dbDeleteFailedError(t)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(t,n)=>{e.push({type:"put",key:t.toString(),value:n})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((o,a)=>th(o,a),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,a)=>y0(o,a),t));let{offset:n,limit:i}=e;if(n){let o=0;t=th(t,()=>o++>=n)}return i&&(t=m0(t,i)),t}queryKeys(e){let t=K1(this._query({values:!1,prefix:e.prefix}),({key:o})=>o);Array.isArray(e.filters)&&(t=e.filters.reduce((o,a)=>th(o,a),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,a)=>y0(o,a),t));let{offset:n,limit:i}=e;if(n){let o=0;t=th(t,()=>o++>=n)}return i&&(t=m0(t,i)),t}_query(e){let t={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){let i=e.prefix.toString();t.gte=i,t.lt=i+"\xFF"}let n=this.db.iterator(t);if(n[Symbol.asyncIterator])return vX(n);if(n.next!=null&&n.end!=null)return _X(n);throw new Error("Level returned incompatible iterator")}};async function*vX(r){for await(let[e,t]of r)yield{key:new Je(e,!1),value:t};await r.close()}function _X(r){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,t)=>{r.next((n,i,o)=>{if(n)return t(n);if(i==null)return r.end(a=>{if(a)return t(a);e({done:!0,value:void 0})});e({done:!1,value:{key:new Je(i,!1),value:o}})})}),return:()=>new Promise((e,t)=>{r.end(n=>{if(n)return t(n);e({done:!0,value:void 0})})})}}}}function IR(r){let e=new bd;return Zk(r,t=>{let n={[yn]:bi,[sp]:bi,[Ha]:wi,[ip]:wi,[hs]:Fo,[ap]:Fo};return Promise.resolve(n[t])},{root:new df(`${r}/root`,{prefix:"",version:2}),blocks:new p0(new df(`${r}/blocks`,{prefix:"",version:2})),keys:new df(`${r}/keys`,{prefix:"",version:2}),datastore:e,pins:new df(`${r}/pins`,{prefix:"",version:2})},{repoLock:{lock:async()=>({close:async()=>{}}),locked:async()=>!1},autoMigrate:!1})}var RE={},EX=/^((?!chrome|android).)*safari/i.test(globalThis.navigator?.userAgent||""),BR=1*60*1e3,BE=5*60*1e3,OE={retryNumber:0,lastBackoff:0,currentBackoff:1e3},PX={config:{Addresses:{Delegates:[]},Bootstrap:[],Discovery:{webRTCStar:{Enabled:!1}},Pubsub:{Enabled:!1}},preload:{enabled:!1,addresses:[]},libp2p:{peerDiscovery:[],connectionManager:{autoDial:!1}},init:{algorithm:EX?s3:void 0,emptyRepo:!0}};async function OR(r,e,t,n,i){let o=await kR(r.storage,t);if(o.length===0)throw new Error("\u{1F4A5} Couldn't start IPFS node, peer list is empty");let a=IR(n),c=await e.create({...PX,repo:a});return o.forEach(f=>{RE[f.toString()]=null,RR(c,f,i)}),globalThis.addEventListener("online",async()=>{(await kR(r.storage,t)).filter(f=>{let d=f.toString();return!d.includes("/localhost/")&&!d.includes("/127.0.0.1/")&&!d.includes("/0.0.0.0/")}).forEach(f=>{RR(c,f,i)})}),i&&console.log("\u{1F680} Started IPFS node"),{ipfs:c,repo:a}}function TR(r){return fetch(r).then(e=>e.json()).then(e=>Array.isArray(e)?e:[]).then(e=>e.filter(t=>Ht(t)&&t.includes("/wss/"))).catch(()=>{throw new Error("\u{1F4A5} Couldn't start IPFS node, failed to fetch peer list")})}async function kR(r,e){let t,n=`ipfs-peers-${e}`,i=await r.getItem(n);return Ht(i)&&i.trim()!==""?(t=JSON.parse(i),TR(e).then(o=>r.setItem(n,JSON.stringify(o))).catch(o=>{console.error(o)})):(t=await TR(e),await r.setItem(n,JSON.stringify(t))),t.map(qp)}function Kd(r,e,t,n){let i=null;t.currentBackoff<BE?i=setTimeout(()=>FR(r,e,t,n),t.currentBackoff):i=setTimeout(()=>FR(r,e,t,n),BE),RE[e.toString()]=i,LR(r,e).then(({latency:o})=>{let a={connected:!0,lastConnectedAt:Date.now(),latency:o};q0(e,a),i&&clearTimeout(i),i===RE[e.toString()]&&setTimeout(()=>Kd(r,e,OE,a),BR)}).catch(()=>{})}async function FR(r,e,t,n){let i={...n,connected:!1,latency:null};q0(e,i);try{await r.swarm.disconnect(e),await r.swarm.connect(e)}catch{}if(t.currentBackoff<BE){let o={retryNumber:t.retryNumber+1,lastBackoff:t.currentBackoff,currentBackoff:t.lastBackoff+t.currentBackoff};Kd(r,e,o,i)}else Kd(r,e,t,i)}function RR(r,e,t){LR(r,e).then(({latency:n})=>r.swarm.connect(e,{timeout:60*1e3}).then(()=>{t&&console.log(`\u{1FA90} Connected to ${e}`);let i={connected:!0,lastConnectedAt:Date.now(),latency:n};q0(e,i),setTimeout(()=>Kd(r,e,OE,i),BR)})).catch(()=>{t&&console.log(`\u{1FA93} Could not connect to ${e}`);let n={connected:!1,lastConnectedAt:null,latency:null};q0(e,n),Kd(r,e,OE,n)})}async function LR(r,e){return r.libp2p.ping(e).then(t=>({latency:t}))}var mf=[],SX=!1;function q0(r,e){mf=mf.filter(a=>a.peer!==r).concat({peer:r,status:e});let t=mf.every(a=>!a.status.connected),n=mf.reduce((a,{status:c})=>a>=(c.lastConnectedAt||0)?a:c.lastConnectedAt||0,0),i=mf.filter(a=>a.status.latency!==null),o=i.length>0?mf.reduce((a,c)=>a+(c.status.latency||0),0)/i.length:null;SX&&(console.table(mf),console.log("offline",t),console.log("last connected at",n===0?null:n),console.log("average latency",o))}var UR="https://unpkg.com/ipfs-core@0.17.0/dist/index.min.js",MR=(r,e,t,n,i)=>OR(r,e,t,n,i),KR=async r=>{if(!r)throw new Error("This function requires a URL to a CDN");return import(r).then(e=>self.IpfsCore)};h();p();async function jR(r){return{getBlock:async e=>{let{ipfs:t}=await r();return t.block.get(e)},getUnixDirectory:async e=>{let{ipfs:t}=await r(),n=[];for await(let i of t.ls(e)){let{name:o="",cid:a,size:c,type:f}=i;n.push({name:o,cid:a,size:c,isFile:f!=="dir"})}return n},getUnixFile:async e=>{let{ipfs:t}=await r(),n=[];for await(let i of t.cat(e))n.push(i);return Oh(n)},putBlock:async(e,t)=>{let{repo:n}=await r(),i=cy(t),o=await zo.digest(e),a=we.createV1(i.code,o);return await n.blocks.put(a,e),a},putChunked:async e=>{let{ipfs:t}=await r();return{...await t.add(e,{cidVersion:1,hashAlg:"sha2-256",rawLeaves:!0,wrapWithDirectory:!1,preload:!1,pin:!1}),isFile:!0}},size:async e=>{let{ipfs:t}=await r();return(await t.files.stat(`/ipfs/${e}`)).cumulativeSize}}}async function W0(r,e,t){let n=null;return jR(async()=>n||(n=await MR(r,await KR(UR),e,t,!1),n))}async function LE(r,e){return W0(r,jo.server+"/ipfs/peers",e)}h();p();async function zR(r,e){return W0(r,$o.server+"/ipfs/peers",e)}h();p();h();p();h();p();function qR(r){return({rootDID:e})=>`${r}/user/link/${e}`}h();p();var WR=async(r,e,t)=>{let{username:n,handleMessage:i}=t,o=await kX(r,n);if(!o)throw new Error(`Failed to lookup DID for ${n}`);let a=`deviceLink#${o}`;console.log("Opening channel",a);let c=new WebSocket(e({rootDID:o}));await FX(c),c.onmessage=i;let f=BX(c),d=RX(c);return{send:f,close:d}},kX=async(r,e)=>{let t=await r.didRoot.lookup(e).catch(()=>(console.warn("Could not fetch root DID. Retrying."),null));return t||new Promise((n,i)=>{let a=0,c=setInterval(async()=>{if(t=await r.didRoot.lookup(e).catch(()=>(console.warn("Could not fetch root DID. Retrying."),null)),!t&&a<10){a++;return}else!t&&a===10&&i("Failed to fetch root DID.");clearInterval(c),n(t)},1e3)})},FX=async r=>new Promise((e,t)=>{r.onopen=()=>e(),r.onerror=()=>t("Websocket channel could not be opened")}),RX=r=>function(){r&&r.close(1e3)},BX=r=>function(e){let t=typeof e=="string"?new TextEncoder().encode(e).buffer:e;r?.send(t)};h();p();h();p();var VR=["fission","ipfs","ipns","did","id","identity",".htaccess","htaccess",".htpasswd","htpasswd",".well-known","well-known","400","401","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","421","422","423","424","426","428","429","431","500","501","502","503","504","505","506","507","508","509","510","511","_domainkey","about","about-us","abuse","access","account","accounts","ad","add","admin","administration","administrator","ads","ads.txt","advertise","advertising","aes128-ctr","aes128-gcm","aes192-ctr","aes256-ctr","aes256-gcm","affiliate","affiliates","ajax","alert","alerts","alpha","amp","analytics","api","app","app-ads.txt","apps","asc","assets","atom","auth","authentication","authorize","autoconfig","autodiscover","avatar","backup","banner","banners","bbs","beta","billing","billings","blog","blogs","board","bookmark","bookmarks","broadcasthost","business","buy","cache","calendar","campaign","captcha","careers","cart","cas","categories","category","cdn","cgi","cgi-bin","chacha20-poly1305","change","channel","channels","chart","chat","checkout","clear","client","close","cloud","cms","com","comment","comments","community","compare","compose","config","connect","contact","contest","cookies","copy","copyright","count","cp","cpanel","create","crossdomain.xml","css","curve25519-sha256","customer","customers","customize","dashboard","db","deals","debug","delete","desc","destroy","dev","developer","developers","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha1","disconnect","discuss","dns","dns0","dns1","dns2","dns3","dns4","docs","documentation","domain","download","downloads","downvote","draft","drop","ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","edit","editor","email","enterprise","error","errors","event","events","example","exception","exit","explore","export","extensions","false","family","faq","faqs","favicon.ico","features","feed","feedback","feeds","file","files","filter","follow","follower","followers","following","fonts","forgot","forgot-password","forgotpassword","form","forms","forum","forums","friend","friends","ftp","get","git","go","graphql","group","groups","guest","guidelines","guides","head","header","help","hide","hmac-sha","hmac-sha1","hmac-sha1-etm","hmac-sha2-256","hmac-sha2-256-etm","hmac-sha2-512","hmac-sha2-512-etm","home","host","hosting","hostmaster","htpasswd","http","httpd","https","humans.txt","icons","images","imap","img","import","index","info","insert","investors","invitations","invite","invites","invoice","is","isatap","issues","it","jobs","join","js","json","keybase.txt","learn","legal","license","licensing","like","limit","live","load","local","localdomain","localhost","lock","login","logout","lost-password","m","mail","mail0","mail1","mail2","mail3","mail4","mail5","mail6","mail7","mail8","mail9","mailer-daemon","mailerdaemon","map","marketing","marketplace","master","me","media","member","members","message","messages","metrics","mis","mobile","moderator","modify","more","mx","mx1","my","net","network","new","news","newsletter","newsletters","next","nil","no-reply","nobody","noc","none","noreply","notification","notifications","ns","ns0","ns1","ns2","ns3","ns4","ns5","ns6","ns7","ns8","ns9","null","oauth","oauth2","offer","offers","online","openid","order","orders","overview","owa","owner","page","pages","partners","passwd","password","pay","payment","payments","photo","photos","pixel","plans","plugins","policies","policy","pop","pop3","popular","portal","portfolio","post","postfix","postmaster","poweruser","preferences","premium","press","previous","pricing","print","privacy","privacy-policy","private","prod","product","production","profile","profiles","project","projects","public","purchase","put","quota","recover","recovery","redirect","reduce","refund","refunds","register","registration","remove","replies","reply","report","request","request-password","reset","reset-password","response","return","returns","review","reviews","robots.txt","root","rootuser","rsa-sha2-2","rsa-sha2-512","rss","rules","sales","save","script","sdk","search","secure","security","select","services","session","sessions","settings","setup","share","shift","shop","signin","signup","site","sitemap","sites","smtp","sort","source","sql","ssh","ssh-rsa","ssl","ssladmin","ssladministrator","sslwebmaster","stage","staging","stat","static","statistics","stats","status","store","style","styles","stylesheet","stylesheets","subdomain","subscribe","sudo","super","superuser","support","survey","sync","sysadmin","system","tablet","tag","tags","team","telnet","terms","terms-of-use","test","testimonials","theme","themes","today","tools","topic","topics","tour","training","translate","translations","trending","trial","true","umac-128","umac-128-etm","umac-64","umac-64-etm","undefined","unfollow","unlike","unsubscribe","update","upgrade","usenet","user","username","users","uucp","var","verify","video","view","void","vote","vpn","webmail","webmaster","website","widget","widgets","wiki","wpad","write","www","www-data","www1","www2","www3","www4","you","yourname","yourusername","zlib"];async function HR(r,e,t){let n=rn(await Jr({audience:await vs(r),dependencies:e,issuer:await Zt(e.crypto)}));return{success:(await fetch(ti(r,"/user"),{method:"PUT",headers:{authorization:`Bearer ${n}`,"content-type":"application/json"},body:JSON.stringify(t)})).status<300}}async function GR(r,e){return!(await fetch(ti(r,`/user/data/${e}`))).ok}function YR(r){return!r.startsWith("-")&&!r.endsWith("-")&&!r.startsWith("_")&&/^[a-zA-Z0-9_-]+$/.test(r)&&!VR.includes(r.toLowerCase())}function NX(r,e,t){return WR(e.reference,qR(`${r.server}${r.apiPath}`.replace(/^https?:\/\//,"wss://")),t)}var UX=async(r,e)=>GR(r,e),MX=async r=>YR(r),KX=async(r,e,t)=>{let{success:n}=await HR(r,e,t);return n?b_(e,{...t,type:Uo}):{success:!1}};function ph(r,e){let t=Gy(e);return{type:t.type,canDelegateAccount:t.canDelegateAccount,delegateAccount:t.delegateAccount,linkDevice:t.linkDevice,session:t.session,isUsernameValid:MX,createChannel:(...n)=>NX(r,e,...n),isUsernameAvailable:(...n)=>UX(r,...n),register:(...n)=>KX(r,e,...n)}}function JR(r){return ph(jo,r)}h();p();function XR(r){return ph($o,r)}h();p();h();p();h();p();async function zX(r,e){let t=await r.reference.didRoot.lookup(e);return await d_({crypto:r.crypto,accountDID:t})?g_(r,e):!1}async function qX(r,e,t){let n=await r.reference.didRoot.lookup(e),i=await d_({crypto:r.crypto,accountDID:n}),{token:o}=await w_(r,e,t);return{readKey:Ge(i,"base64pad"),ucan:o}}async function WX(r,e,t){if(!HX(t))throw new $r(`Consumer received invalid link device response from producer: Expected read key and ucan, but got ${JSON.stringify(t)}`);let{readKey:n,ucan:i}=t,o=Qn(i);if(await $a(r.crypto,o)){await r.storage.setItem(r.storage.KEYS.ACCOUNT_UCAN,i),await tu({accountDID:await r.reference.didRoot.lookup(e),crypto:r.crypto,readKey:uI(n)});let a=await Zt(r.crypto),c=await Jr({dependencies:r,potency:"APPEND",resource:"*",proof:i,lifetimeInSeconds:60*60*24*30*12*1e3,audience:a,issuer:a});await r.reference.repositories.ucans.add(c)}else throw new $r(`Consumer received invalid link device response from producer. Given ucan is invalid: ${t.ucan}`);await Ic(r.storage,{type:Uo,username:e})}async function VX(r,e,t,n){if(e){if(!r.reference.repositories.ucans.find(a=>a.payload.exp<Date.now()+604800?!1:a.payload.ptc==="APPEND"&&a.payload.rsc==="*")){let a=await Zt(r.crypto),c=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN),f=await Jr({dependencies:r,potency:"APPEND",resource:"*",proof:c||void 0,lifetimeInSeconds:60*60*24*30*12*1e3,audience:a,issuer:a});await r.reference.repositories.ucans.add(f)}let o=t.fileSystem?.loadImmediately===!1?void 0:await Bp({config:t,dependencies:{crypto:r.crypto,depot:r.depot,manners:r.manners,reference:r.reference,storage:r.storage},eventEmitter:n.fileSystem,username:e});return new gs({crypto:r.crypto,fs:o,storage:r.storage,type:Uo,username:e})}return null}function HX(r){return Ye(r)&&"readKey"in r&&typeof r.readKey=="string"&&"ucan"in r&&typeof r.ucan=="string"}function QR(r){let e=Gy(r);return{type:e.type,session:VX,canDelegateAccount:(...t)=>zX(r,...t),delegateAccount:(...t)=>qX(r,...t),linkDevice:(...t)=>WX(r,...t),createChannel:e.createChannel,isUsernameValid:e.isUsernameValid,isUsernameAvailable:e.isUsernameAvailable,register:e.register}}function V0(r,e){let t=ph(r,e),n=QR(e);return{type:n.type,canDelegateAccount:n.canDelegateAccount,delegateAccount:n.delegateAccount,linkDevice:n.linkDevice,session:n.session,createChannel:t.createChannel,isUsernameValid:t.isUsernameValid,isUsernameAvailable:t.isUsernameAvailable,register:t.register}}function UE(r){return V0(jo,r)}h();p();function eB(r){return V0($o,r)}h();p();h();p();async function XX(r,e){let t=new URL(self.location.href),n=t.searchParams.get("authorised");if(!n)return null;let i=t.searchParams.get("username")??"",o=await rB(async()=>tQ(e,n==="via-postmessage"?await ZX(r,e.crypto):JSON.parse(Ge(await e.depot.getUnixFile(ke(n)),"utf8"))),{tries:20,timeout:6e4,timeoutMessage:"Trying to retrieve UCAN(s) and readKey(s) from the auth lobby timed out after 60 seconds."});if(!o)throw new Error("Failed to retrieve secrets from lobby url parameters");return t.searchParams.delete("authorised"),t.searchParams.delete("cancelled"),t.searchParams.delete("newUser"),t.searchParams.delete("username"),history.replaceState(null,document.title,t.toString()),{...o,username:i}}async function QX(r,e,t={}){let{permissions:n}=t,i=n?.app,o=n?.fs,a=n?.platform,c=n?.raw,f=n?.sharing,d=await Io(e.crypto),m=await Zt(e.crypto),w=!!document.body.querySelector("iframe#webnative-ipfs")&&typeof SharedWorker=="function",E=t.returnUrl||window.location.href,T=[["didExchange",d],["didWrite",m],["redirectTo",E],["sdk",zf.toString()],["sharedRepo",w?"t":"f"],["sharing",f?"t":"f"]].concat(i?[["appFolder",`${i.creator}/${i.name}`]]:[],o?.private?o.private.map(F=>["privatePath",Cr(F,{absolute:!0})]):[],o?.public?o.public.map(F=>["publicPath",Cr(F,{absolute:!0})]):[],c?[["raw",Ub(JSON.stringify(c))]]:[],t.extraParams?Object.entries(t.extraParams):[]).concat((()=>{let F=a?.apps;switch(typeof F){case"string":return[["app",F]];case"object":return F.map(U=>["app",U]);default:return[]}})());window.location.href=r.lobby+"?"+T.map(([F,U])=>encodeURIComponent(F)+"="+encodeURIComponent(U)).join("&")}async function ZX(r,e){let t=await Io(e),n=await new Promise(i=>{let o=document.createElement("iframe");o.id="webnative-secret-exchange",o.style.width="0",o.style.height="0",o.style.border="none",o.style.display="none",document.body.appendChild(o),o.onload=()=>{i(o)},o.src=`${r.lobby}/exchange.html`});return new Promise((i,o)=>{function a(){globalThis.removeEventListener("message",c),document.body.removeChild(n),o()}function c(d){if(new URL(d.origin).host!==new URL(r.lobby).host||d.data==null)return a();let m;try{m=JSON.parse(d.data)}catch{a()}eQ(m)||a(),globalThis.removeEventListener("message",c);try{document.body.removeChild(n)}catch{}i(m)}if(globalThis.addEventListener("message",c),n.contentWindow==null)throw new Error("Can't import UCANs & readKey(s): No access to its contentWindow");let f={webnative:"exchange-secrets",didExchange:t};n.contentWindow.postMessage(f,n.src)})}function eQ(r){return Ye(r)&&Ht(r.sessionKey)&&Ht(r.secrets)&&Ht(r.iv)}function tB(r){return Ye(r)&&Ye(r.fs)&&Object.values(r.fs).every(e=>ht(e,"key")&&ht(e,"bareNameFilter"))&&Array.isArray(r.ucans)&&r.ucans.every(e=>Ht(e))}async function tQ({crypto:r},e){let t=await r.keystore.decrypt(Oe(e.sessionKey,"base64pad")),i=t[1]===0?Oe(new TextDecoder("utf-16").decode(t),"base64pad"):t,o=await r.aes.decrypt(Oe(e.secrets,"base64pad"),i,$t.AES_GCM,Oe(e.iv,"base64pad")),a=JSON.parse(Ge(o,"utf8"));if(!tB(a))throw new Error("Invalid secrets received");let c=tB(a)?Object.entries(a.fs).map(([d,{bareNameFilter:m,key:w}])=>({bareNameFilter:m,path:zh(d),readKey:Oe(w,"base64pad")})):[],f=a.ucans.map(d=>Qn(d));return{fileSystemSecrets:c,ucans:f}}async function rB(r,e){return await Promise.race([r(),new Promise((t,n)=>e.tries>0?setTimeout(()=>rB(r,{...e,tries:e.tries-1}).then(t,n),e.timeout):setTimeout(()=>n(new Error(e.timeoutMessage)),e.timeout))])}function H0(r,e){return{collect:()=>XX(r,e),request:(...t)=>QX(r,e,...t)}}function ME(r){return H0(jo,r)}h();p();function iB(r){return H0($o,r)}h();p();h();p();h();p();h();p();function oB({storage:r}){return KE.create({storage:r,storageName:r.KEYS.CID_LOG})}var KE=class extends nc{constructor(e){super(e)}fromJSON(e){return ke(e)}toJSON(e){return e.toString()}indexOf(e){return this.memoryCache.map(t=>t.toString()).indexOf(e.toString())}newest(){return this.memoryCache[this.memoryCache.length-1]}};async function oQ(r,e){let t=await r.storage.getItem(r.storage.KEYS.ACCOUNT_UCAN);return t?za(t):await Zt(r.crypto)}async function sB(r){return{dataRoot:{domain:()=>{throw new Error("Not implemented")},lookup:()=>{throw new Error("Not implemented")},update:()=>{throw new Error("Not implemented")}},didRoot:{lookup:(...e)=>oQ(r,...e)},dns:{lookupDnsLink:cg,lookupTxtRecord:Bc},repositories:{cidLog:await oB({storage:r.storage}),ucans:await b2({storage:r.storage})}}}h();p();async function aB(r,e,t){let n=await aQ(r,e,t);if(!n)return null;if(n!==null)return n;try{let i=await cg(t+".files."+r.userDomain);return i?ke(i):null}catch(i){throw console.error(i),new Error("Could not locate user root in DNS")}}async function aQ(r,e,t){try{let i=await(await fetch(ti(r,`user/data/${t}`),{cache:"reload"})).json();return ke(i)}catch(n){return e.manners.log("Could not locate user root on Fission server: ",ht(n,"toString")?n.toString():n),null}}async function uB(r,e,t,n){let i=t.toString();return e.manners.log("\u{1F30A} Updating your DNSLink:",i),await cB(ti(r,`user/data/${i}`),{headers:async()=>({authorization:`Bearer ${rn(await Jr({dependencies:e,audience:await vs(r),issuer:await Zt(e.crypto),potency:"APPEND",proof:rn(n),resource:n.payload.rsc}))}`}),retries:100,retryDelay:5e3,retryOn:[502,503,504]},{method:"PUT"}).then(o=>(o.status<300?e.manners.log("\u{1FAB4} DNSLink updated:",i):e.manners.log("\u{1F525} Failed to update DNSLink for:",i),{success:o.status<300})).catch(o=>(e.manners.log("\u{1F525} Failed to update DNSLink for:",i),console.error(o),{success:!1}))}async function cB(r,e,t,n=0){let i=await e.headers(),o=await fetch(r,{...t,headers:{...t.headers,...i}});if(e.retryOn.includes(o.status)){if(n<e.retries)return await new Promise((a,c)=>setTimeout(()=>cB(r,e,t,n+1).then(a,c),e.retryDelay));throw new Error("Too many retries for fetch")}return o}h();p();async function fB(r,e){try{let t=await Bc(`_did.${e}.${r.userDomain}`);if(t!==null)return t}catch{}throw new Error("Could not locate user DID in DNS.")}async function G0(r,e){let t=await sB(e);return t.dataRoot.domain=n=>`${n}.files.${r.userDomain}`,t.dataRoot.lookup=(...n)=>aB(r,e,...n),t.dataRoot.update=(...n)=>uB(r,e,...n),t.didRoot.lookup=(...n)=>fB(r,...n),t}function jE(r){return G0(jo,r)}h();p();function hB(r){return G0($o,r)}h();p();async function hQ(r,e){return r[e]}async function pQ(r,e,t){return r[e]=t,t}async function dQ(r,e){delete r[e]}async function mQ(r){for(let e in r)delete r[e]}function pB(){let r={};return{KEYS:ug,getItem:(...e)=>hQ(r,...e),setItem:(...e)=>pQ(r,...e),removeItem:(...e)=>dQ(r,...e),clear:(...e)=>mQ(r,...e)}}h();p();function dB(r){return{log:r.configuration.debug?console.log:()=>{},warn:r.configuration.debug?console.warn:()=>{},wnfsWasmLookup:e=>fetch(`https://unpkg.com/wnfs@${e}/wasm_wnfs_bg.wasm`),fileSystem:{hooks:{afterLoadExisting:async()=>{},afterLoadNew:async e=>{await e.publish()},beforeLoadExisting:async()=>{},beforeLoadNew:async()=>{}}}}}h();p();h();p();var mB={};h();p();var yB={};h();p();var gB={};h();p();var wB={};h();p();var bB={};h();p();var vB={};h();p();var $E={};xt($E,{create:()=>bQ,deleteByDomain:()=>vQ,index:()=>wQ,publish:()=>_Q});h();p();async function wQ(r,e){let t=await e.reference.repositories.ucans.lookupAppUcan("*");if(t===null)throw"Could not find your local UCAN";let n=rn(await Jr({dependencies:e,audience:await vs(r),issuer:await Zt(e.crypto),proof:t,potency:null})),o=await(await fetch(ti(r,"/app"),{method:"GET",headers:{authorization:`Bearer ${n}`}})).json();return Object.values(o).filter(a=>a.urls.length>0).map(({urls:a,insertedAt:c,modifiedAt:f})=>({domains:a,insertedAt:c,modifiedAt:f}))}async function bQ(r,e,t){let n=await e.reference.repositories.ucans.lookupAppUcan("*");if(n===null)throw"Could not find your local UCAN";let i=rn(await Jr({dependencies:e,audience:await vs(r),issuer:await Zt(e.crypto),proof:n,potency:null})),o=Ht(t)?ti(r,`/app?subdomain=${encodeURIComponent(t)}`):ti(r,"/app"),c=await(await fetch(o,{method:"POST",headers:{authorization:`Bearer ${i}`}})).json(),f=new Date().toISOString();return{domains:[c],insertedAt:f,modifiedAt:f}}async function vQ(r,e,t){let n=await e.reference.repositories.ucans.lookupAppUcan(t);if(n===null)throw new Error("Could not find your local UCAN");let i=rn(await Jr({dependencies:e,audience:await vs(r),issuer:await Zt(e.crypto),proof:n,potency:null})),a=await(await fetch(ti(r,"/app"),{method:"GET",headers:{authorization:`Bearer ${i}`}})).json(),c=Object.entries(a).find(([f,d])=>d.urls.includes(t));if(c==null)throw new Error(`Couldn't find an app with domain ${t}`);await fetch(ti(r,`/app/${encodeURIComponent(c[0])}`),{method:"DELETE",headers:{authorization:`Bearer ${i}`}})}async function _Q(r,e,t,n){let i=await e.reference.repositories.ucans.lookupAppUcan(t);if(i===null)throw"Could not find your local UCAN";let o=rn(await Jr({dependencies:e,audience:await vs(r),issuer:await Zt(e.crypto),proof:i,potency:null})),a=ti(r,`/app/${t}/${n}`);await fetch(a,{method:"PUT",headers:{authorization:`Bearer ${o}`}})}var xB=(t=>(t.InsecureContext="INSECURE_CONTEXT",t.UnsupportedBrowser="UNSUPPORTED_BROWSER",t))(xB||{});async function xQ(r){if(!r)throw new Error("Expected a settings object of the type `Partial<Components> & Configuration` as the first parameter");if(globalThis.isSecureContext===!1)throw"INSECURE_CONTEXT";if(await kB()===!1)throw"UNSUPPORTED_BROWSER";let e=await CB(r);return AB(VE(r),e)}var EB={async fissionWebCrypto(r){let{disableWnfs:e,staging:t}=r,n=r.manners||mh(r),i=r.crypto||await yf(r),o=r.storage||Bu(r),a=r.reference||await WE({crypto:i,manners:n,storage:o});return e?t?XR({crypto:i,reference:a,storage:o}):JR({crypto:i,reference:a,storage:o}):t?eB({crypto:i,reference:a,storage:o}):UE({crypto:i,reference:a,storage:o})}},PB={async fissionLobby(r){let{staging:e}=r,t=r.storage||Bu(r),n=r.crypto||await yf(r),i=r.depot||await qE({storage:t},r);return e?iB({crypto:n,depot:i}):ME({crypto:n,depot:i})}},EQ={browser(r){return yf(r)}},SB={async fissionIPFS(r){let e=`${Tc(r)}/ipfs`,t=r.storage||Bu(r);return r.staging?zR({storage:t},e):LE({storage:t},e)}},PQ={default(r){return mh(r)}},DB={async fission(r){let{staging:e}=r,t=r.manners||mh(r),n=r.crypto||await yf(r),i=r.storage||Bu(r);return e?hB({crypto:n,manners:t,storage:i}):jE({crypto:n,manners:t,storage:i})}},SQ={browser(r){return Bu(r)},memory(){return pB()}};async function AB(r,e){let t=r.permissions;await AQ(e,r);let n=S2(),i=await m_(e.storage),o=(m=>({implementation:m,accountConsumer(w){return v_({auth:m,crypto:e.crypto,manners:e.manners},{username:w})},accountProducer(w){return __({auth:m,crypto:e.crypto,manners:e.manners},{username:w})},isUsernameAvailable:m.isUsernameAvailable,isUsernameValid:m.isUsernameValid,register:m.register,async session(){let w=await m_(e.storage);return w?this.implementation.session(e,w.username,r,{fileSystem:n}):null}}))(e.auth),a={async collect(){let m=await e.capabilities.collect();return m?(await x2({capabilities:m,crypto:e.crypto,reference:e.reference,storage:e.storage}),m.username):null},request(m){return e.capabilities.request({permissions:t,...m||{}})},async session(m){if(!E2(e.reference.repositories.ucans,t||{}))return console.warn("The present UCANs did not satisfy the configured permissions."),null;let E=await e.reference.didRoot.lookup(m);if(!await P2(e.crypto,E,t||{}))return console.warn("The present filesystem secrets did not satisfy the configured permissions."),null;await Ic(e.storage,{type:Wf,username:m});let F=r.fileSystem?.loadImmediately===!1?void 0:await Bp({config:r,dependencies:e,eventEmitter:n,username:m});return new gs({fs:F,username:m,crypto:e.crypto,storage:e.storage,type:Wf})}},c=null;if(HE(r)){let m=await a.collect();m&&(c=await a.session(m)),i&&i.type===Wf&&(c=await a.session(i.username))}else i&&i.type!==Wf&&(c=await o.session());let d={...{accountDID:m=>e.reference.didRoot.lookup(m),agentDID:()=>Zt(e.crypto),sharingDID:()=>Io(e.crypto),fileSystem:{...D2(n),addPublicExchangeKey:m=>sI(e.crypto,m),addSampleData:m=>oI(m),hasPublicExchangeKey:m=>aI(e.crypto,m),load:m=>Bp({config:r,username:m,dependencies:e,eventEmitter:n}),recover:m=>II({auth:o,dependencies:e,...m})}},configuration:{...r},auth:o,components:e,capabilities:a,session:c};if(r.debug&&(r.debugging?.injectIntoGlobalContext===void 0?!0:r.debugging?.injectIntoGlobalContext)){let w=globalThis;w.__webnative=w.__webnative||{},w.__webnative.programs=w.__webnative.programs||{},w.__webnative.programs[Tc(r)]=d}return d}var DQ={async fission(r){let e=r.crypto||await yf(r),t=r.manners||mh(r),n=r.storage||Bu(r),i={...r,crypto:e,manners:t,storage:n},o=await DB.fission(i),a=await SB.fissionIPFS(i),c=await PB.fissionLobby({...i,depot:a});return{auth:await EB.fissionWebCrypto({...i,reference:o}),capabilities:c,depot:a,reference:o,crypto:e,manners:t,storage:n}}};async function CB(r){let e=VE(r),t=r.crypto||await yf(e),n=r.manners||mh(e),i=r.storage||Bu(e),o=r.reference||await WE({crypto:t,manners:n,storage:i}),a=r.depot||await qE({storage:i},e),c=r.capabilities||TB({crypto:t,depot:a});return{auth:r.auth||IB({crypto:t,reference:o,storage:i}),capabilities:c,crypto:t,depot:a,manners:n,reference:o,storage:i}}function IB({crypto:r,reference:e,storage:t}){return UE({crypto:r,reference:e,storage:t})}function TB({crypto:r,depot:e}){return ME({crypto:r,depot:e})}function yf(r){return r3({storeName:Tc(r),exchangeKeyName:"exchange-key",writeKeyName:"write-key"})}function qE({storage:r},e){return LE({storage:r},`${Tc(e)}/ipfs`)}function mh(r){return dB({configuration:r})}function WE({crypto:r,manners:e,storage:t}){return jE({crypto:r,manners:e,storage:t})}function Bu(r){return i3({name:Tc(r)})}async function kB(){return zE.default.supports(zE.default.INDEXEDDB)&&await(()=>new Promise(r=>{let e=indexedDB.open("testDatabase");e.onsuccess=()=>r(!0),e.onerror=()=>r(!1)}))()}async function AQ(r,e){let[t,n]=["migrated",zf],i=Pc(zf);if(!i)throw new Error("The webnative VERSION should be a semver string");if(await r.storage.getItem(t).then(d=>typeof d=="string"?Pc(d):null).then(d=>d&&Q8(d,i))||!globalThis.indexedDB)return;let a=globalThis.indexedDB.databases?(await globalThis.indexedDB.databases()).map(d=>d.name):["keystore","localforage"],c=a.includes("keystore")?await _B("keystore"):null;if(c){let d=await dh(c,"keyvaluepairs","exchange-key"),m=await dh(c,"keyvaluepairs","write-key");d&&m&&(await r.storage.setItem("exchange-key",d),await r.storage.setItem("write-key",m))}let f=a.includes("localforage")?await _B("localforage"):null;if(f){let d=await dh(f,"keyvaluepairs","ucan"),m=await dh(f,"keyvaluepairs","webnative.auth_ucans"),w=await dh(f,"keyvaluepairs","readKey"),E=await dh(f,"keyvaluepairs","webnative.auth_username");if(w&&Ht(w)){let T=d||(Array.isArray(m)?m[0]:void 0),F=T?za(T):typeof E=="string"?await r.reference.didRoot.lookup(E):null;if(!F)throw new Error("Failed to retrieve account DID");await tu({accountDID:F,crypto:r.crypto,readKey:Oe(w,"base64pad")})}d&&await r.storage.setItem(r.storage.KEYS.ACCOUNT_UCAN,d),E&&await r.storage.setItem(r.storage.KEYS.SESSION,JSON.stringify({type:HE(e)?Wf:Uo,username:E}))}await r.storage.setItem(t,n)}function dh(r,e,t){return new Promise((n,i)=>{if(!r.objectStoreNames.contains(e))return n(null);let c=r.transaction([e],"readonly").objectStore(e).get(t);c.onerror=()=>{n(null)},c.onsuccess=()=>{n(c.result)}})}function _B(r){return new Promise((e,t)=>{let n=globalThis.indexedDB.open(r);n.onerror=()=>{e(null)},n.onsuccess=()=>{e(n.result)},n.onupgradeneeded=i=>{n.transaction?.abort(),globalThis.indexedDB.deleteDatabase(r)}})}function VE(r){return{namespace:r.namespace,debug:r.debug,fileSystem:r.fileSystem,permissions:r.permissions,userMessages:r.userMessages}}function HE(r){return!!r.permissions}return T5(CQ);})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
return webnative;
}));
//# sourceMappingURL=index.umd.min.js.map
