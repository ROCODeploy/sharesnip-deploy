"use strict";var webnative=(()=>{var eK=Object.create;var _y=Object.defineProperty;var tK=Object.getOwnPropertyDescriptor;var rK=Object.getOwnPropertyNames;var nK=Object.getPrototypeOf,iK=Object.prototype.hasOwnProperty;var Nu=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var Qt=(r,e)=>()=>(r&&(e=r(r=0)),e);var ee=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Me=(r,e)=>{for(var t in e)_y(r,t,{get:e[t],enumerable:!0})},TS=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of rK(e))!iK.call(r,i)&&i!==t&&_y(r,i,{get:()=>e[i],enumerable:!(n=tK(e,i))||n.enumerable});return r};var Ie=(r,e,t)=>(t=r!=null?eK(nK(r)):{},TS(e||!r||!r.__esModule?_y(t,"default",{value:r,enumerable:!0}):t,r)),qn=r=>TS(_y({},"__esModule",{value:!0}),r);var hd=ee((FS,fv)=>{(function(r){if(typeof FS=="object"&&typeof fv<"u")fv.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var e;typeof window<"u"?e=window:typeof globalThis<"u"?e=globalThis:typeof self<"u"?e=self:e=this,e.localforage=r()}})(function(){var r,e,t;return function n(i,o,a){function u(m,y){if(!o[m]){if(!i[m]){var E=typeof Nu=="function"&&Nu;if(!y&&E)return E(m,!0);if(l)return l(m,!0);var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var T=o[m]={exports:{}};i[m][0].call(T.exports,function(O){var ce=i[m][1][O];return u(ce||O)},T,T.exports,n,i,o,a)}return o[m].exports}for(var l=typeof Nu=="function"&&Nu,h=0;h<a.length;h++)u(a[h]);return u}({1:[function(n,i,o){(function(a){"use strict";var u=a.MutationObserver||a.WebKitMutationObserver,l;if(u){var h=0,m=new u(O),y=a.document.createTextNode("");m.observe(y,{characterData:!0}),l=function(){y.data=h=++h%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var E=new a.MessageChannel;E.port1.onmessage=O,l=function(){E.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?l=function(){var ne=a.document.createElement("script");ne.onreadystatechange=function(){O(),ne.onreadystatechange=null,ne.parentNode.removeChild(ne),ne=null},a.document.documentElement.appendChild(ne)}:l=function(){setTimeout(O,0)};var k,T=[];function O(){k=!0;for(var ne,ve,X=T.length;X;){for(ve=T,T=[],ne=-1;++ne<X;)ve[ne]();X=T.length}k=!1}i.exports=ce;function ce(ne){T.push(ne)===1&&!k&&l()}}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,i,o){"use strict";var a=n(1);function u(){}var l={},h=["REJECTED"],m=["FULFILLED"],y=["PENDING"];i.exports=E;function E(W){if(typeof W!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,W!==u&&ce(this,W)}E.prototype.catch=function(W){return this.then(null,W)},E.prototype.then=function(W,de){if(typeof W!="function"&&this.state===m||typeof de!="function"&&this.state===h)return this;var ge=new this.constructor(u);if(this.state!==y){var Ue=this.state===m?W:de;T(ge,Ue,this.outcome)}else this.queue.push(new k(ge,W,de));return ge};function k(W,de,ge){this.promise=W,typeof de=="function"&&(this.onFulfilled=de,this.callFulfilled=this.otherCallFulfilled),typeof ge=="function"&&(this.onRejected=ge,this.callRejected=this.otherCallRejected)}k.prototype.callFulfilled=function(W){l.resolve(this.promise,W)},k.prototype.otherCallFulfilled=function(W){T(this.promise,this.onFulfilled,W)},k.prototype.callRejected=function(W){l.reject(this.promise,W)},k.prototype.otherCallRejected=function(W){T(this.promise,this.onRejected,W)};function T(W,de,ge){a(function(){var Ue;try{Ue=de(ge)}catch(St){return l.reject(W,St)}Ue===W?l.reject(W,new TypeError("Cannot resolve promise with itself")):l.resolve(W,Ue)})}l.resolve=function(W,de){var ge=ne(O,de);if(ge.status==="error")return l.reject(W,ge.value);var Ue=ge.value;if(Ue)ce(W,Ue);else{W.state=m,W.outcome=de;for(var St=-1,$t=W.queue.length;++St<$t;)W.queue[St].callFulfilled(de)}return W},l.reject=function(W,de){W.state=h,W.outcome=de;for(var ge=-1,Ue=W.queue.length;++ge<Ue;)W.queue[ge].callRejected(de);return W};function O(W){var de=W&&W.then;if(W&&(typeof W=="object"||typeof W=="function")&&typeof de=="function")return function(){de.apply(W,arguments)}}function ce(W,de){var ge=!1;function Ue(qt){ge||(ge=!0,l.reject(W,qt))}function St(qt){ge||(ge=!0,l.resolve(W,qt))}function $t(){de(St,Ue)}var Bt=ne($t);Bt.status==="error"&&Ue(Bt.value)}function ne(W,de){var ge={};try{ge.value=W(de),ge.status="success"}catch(Ue){ge.status="error",ge.value=Ue}return ge}E.resolve=ve;function ve(W){return W instanceof this?W:l.resolve(new this(u),W)}E.reject=X;function X(W){var de=new this(u);return l.reject(de,W)}E.all=me;function me(W){var de=this;if(Object.prototype.toString.call(W)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ge=W.length,Ue=!1;if(!ge)return this.resolve([]);for(var St=new Array(ge),$t=0,Bt=-1,qt=new this(u);++Bt<ge;)yr(W[Bt],Bt);return qt;function yr(Ut,Wr){de.resolve(Ut).then(Un,function(Ur){Ue||(Ue=!0,l.reject(qt,Ur))});function Un(Ur){St[Wr]=Ur,++$t===ge&&!Ue&&(Ue=!0,l.resolve(qt,St))}}}E.race=be;function be(W){var de=this;if(Object.prototype.toString.call(W)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ge=W.length,Ue=!1;if(!ge)return this.resolve([]);for(var St=-1,$t=new this(u);++St<ge;)Bt(W[St]);return $t;function Bt(qt){de.resolve(qt).then(function(yr){Ue||(Ue=!0,l.resolve($t,yr))},function(yr){Ue||(Ue=!0,l.reject($t,yr))})}}},{1:1}],3:[function(n,i,o){(function(a){"use strict";typeof a.Promise!="function"&&(a.Promise=n(2))}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,i,o){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};function u(b,C){if(!(b instanceof C))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var h=l();function m(){try{if(!h||!h.open)return!1;var b=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),C=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!b||C)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function y(b,C){b=b||[],C=C||{};try{return new Blob(b,C)}catch(w){if(w.name!=="TypeError")throw w;for(var S=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,F=new S,B=0;B<b.length;B+=1)F.append(b[B]);return F.getBlob(C.type)}}typeof Promise>"u"&&n(3);var E=Promise;function k(b,C){C&&b.then(function(S){C(null,S)},function(S){C(S)})}function T(b,C,S){typeof C=="function"&&b.then(C),typeof S=="function"&&b.catch(S)}function O(b){return typeof b!="string"&&(console.warn(b+" used as a key, but it is not a string."),b=String(b)),b}function ce(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var ne="local-forage-detect-blob-support",ve=void 0,X={},me=Object.prototype.toString,be="readonly",W="readwrite";function de(b){for(var C=b.length,S=new ArrayBuffer(C),F=new Uint8Array(S),B=0;B<C;B++)F[B]=b.charCodeAt(B);return S}function ge(b){return new E(function(C){var S=b.transaction(ne,W),F=y([""]);S.objectStore(ne).put(F,"key"),S.onabort=function(B){B.preventDefault(),B.stopPropagation(),C(!1)},S.oncomplete=function(){var B=navigator.userAgent.match(/Chrome\/(\d+)/),w=navigator.userAgent.match(/Edge\//);C(w||!B||parseInt(B[1],10)>=43)}}).catch(function(){return!1})}function Ue(b){return typeof ve=="boolean"?E.resolve(ve):ge(b).then(function(C){return ve=C,ve})}function St(b){var C=X[b.name],S={};S.promise=new E(function(F,B){S.resolve=F,S.reject=B}),C.deferredOperations.push(S),C.dbReady?C.dbReady=C.dbReady.then(function(){return S.promise}):C.dbReady=S.promise}function $t(b){var C=X[b.name],S=C.deferredOperations.pop();if(S)return S.resolve(),S.promise}function Bt(b,C){var S=X[b.name],F=S.deferredOperations.pop();if(F)return F.reject(C),F.promise}function qt(b,C){return new E(function(S,F){if(X[b.name]=X[b.name]||Er(),b.db)if(C)St(b),b.db.close();else return S(b.db);var B=[b.name];C&&B.push(b.version);var w=h.open.apply(h,B);C&&(w.onupgradeneeded=function($){var H=w.result;try{H.createObjectStore(b.storeName),$.oldVersion<=1&&H.createObjectStore(ne)}catch(Y){if(Y.name==="ConstraintError")console.warn('The database "'+b.name+'" has been upgraded from version '+$.oldVersion+" to version "+$.newVersion+', but the storage "'+b.storeName+'" already exists.');else throw Y}}),w.onerror=function($){$.preventDefault(),F(w.error)},w.onsuccess=function(){var $=w.result;$.onversionchange=function(H){H.target.close()},S($),$t(b)}})}function yr(b){return qt(b,!1)}function Ut(b){return qt(b,!0)}function Wr(b,C){if(!b.db)return!0;var S=!b.db.objectStoreNames.contains(b.storeName),F=b.version<b.db.version,B=b.version>b.db.version;if(F&&(b.version!==C&&console.warn('The database "'+b.name+`" can't be downgraded from version `+b.db.version+" to version "+b.version+"."),b.version=b.db.version),B||S){if(S){var w=b.db.version+1;w>b.version&&(b.version=w)}return!0}return!1}function Un(b){return new E(function(C,S){var F=new FileReader;F.onerror=S,F.onloadend=function(B){var w=btoa(B.target.result||"");C({__local_forage_encoded_blob:!0,data:w,type:b.type})},F.readAsBinaryString(b)})}function Ur(b){var C=de(atob(b.data));return y([C],{type:b.type})}function en(b){return b&&b.__local_forage_encoded_blob}function ua(b){var C=this,S=C._initReady().then(function(){var F=X[C._dbInfo.name];if(F&&F.dbReady)return F.dbReady});return T(S,b,b),S}function er(b){St(b);for(var C=X[b.name],S=C.forages,F=0;F<S.length;F++){var B=S[F];B._dbInfo.db&&(B._dbInfo.db.close(),B._dbInfo.db=null)}return b.db=null,yr(b).then(function(w){return b.db=w,Wr(b)?Ut(b):w}).then(function(w){b.db=C.db=w;for(var $=0;$<S.length;$++)S[$]._dbInfo.db=w}).catch(function(w){throw Bt(b,w),w})}function Ht(b,C,S,F){F===void 0&&(F=1);try{var B=b.db.transaction(b.storeName,C);S(null,B)}catch(w){if(F>0&&(!b.db||w.name==="InvalidStateError"||w.name==="NotFoundError"))return E.resolve().then(function(){if(!b.db||w.name==="NotFoundError"&&!b.db.objectStoreNames.contains(b.storeName)&&b.version<=b.db.version)return b.db&&(b.version=b.db.version+1),Ut(b)}).then(function(){return er(b).then(function(){Ht(b,C,S,F-1)})}).catch(S);S(w)}}function Er(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ve(b){var C=this,S={db:null};if(b)for(var F in b)S[F]=b[F];var B=X[S.name];B||(B=Er(),X[S.name]=B),B.forages.push(C),C._initReady||(C._initReady=C.ready,C.ready=ua);var w=[];function $(){return E.resolve()}for(var H=0;H<B.forages.length;H++){var Y=B.forages[H];Y!==C&&w.push(Y._initReady().catch($))}var V=B.forages.slice(0);return E.all(w).then(function(){return S.db=B.db,yr(S)}).then(function(te){return S.db=te,Wr(S,C._defaultConfig.version)?Ut(S):te}).then(function(te){S.db=B.db=te,C._dbInfo=S;for(var pe=0;pe<V.length;pe++){var ze=V[pe];ze!==C&&(ze._dbInfo.db=S.db,ze._dbInfo.version=S.version)}})}function fn(b,C){var S=this;b=O(b);var F=new E(function(B,w){S.ready().then(function(){Ht(S._dbInfo,be,function($,H){if($)return w($);try{var Y=H.objectStore(S._dbInfo.storeName),V=Y.get(b);V.onsuccess=function(){var te=V.result;te===void 0&&(te=null),en(te)&&(te=Ur(te)),B(te)},V.onerror=function(){w(V.error)}}catch(te){w(te)}})}).catch(w)});return k(F,C),F}function eo(b,C){var S=this,F=new E(function(B,w){S.ready().then(function(){Ht(S._dbInfo,be,function($,H){if($)return w($);try{var Y=H.objectStore(S._dbInfo.storeName),V=Y.openCursor(),te=1;V.onsuccess=function(){var pe=V.result;if(pe){var ze=pe.value;en(ze)&&(ze=Ur(ze));var Ne=b(ze,pe.key,te++);Ne!==void 0?B(Ne):pe.continue()}else B()},V.onerror=function(){w(V.error)}}catch(pe){w(pe)}})}).catch(w)});return k(F,C),F}function to(b,C,S){var F=this;b=O(b);var B=new E(function(w,$){var H;F.ready().then(function(){return H=F._dbInfo,me.call(C)==="[object Blob]"?Ue(H.db).then(function(Y){return Y?C:Un(C)}):C}).then(function(Y){Ht(F._dbInfo,W,function(V,te){if(V)return $(V);try{var pe=te.objectStore(F._dbInfo.storeName);Y===null&&(Y=void 0);var ze=pe.put(Y,b);te.oncomplete=function(){Y===void 0&&(Y=null),w(Y)},te.onabort=te.onerror=function(){var Ne=ze.error?ze.error:ze.transaction.error;$(Ne)}}catch(Ne){$(Ne)}})}).catch($)});return k(B,S),B}function ks(b,C){var S=this;b=O(b);var F=new E(function(B,w){S.ready().then(function(){Ht(S._dbInfo,W,function($,H){if($)return w($);try{var Y=H.objectStore(S._dbInfo.storeName),V=Y.delete(b);H.oncomplete=function(){B()},H.onerror=function(){w(V.error)},H.onabort=function(){var te=V.error?V.error:V.transaction.error;w(te)}}catch(te){w(te)}})}).catch(w)});return k(F,C),F}function Kr(b){var C=this,S=new E(function(F,B){C.ready().then(function(){Ht(C._dbInfo,W,function(w,$){if(w)return B(w);try{var H=$.objectStore(C._dbInfo.storeName),Y=H.clear();$.oncomplete=function(){F()},$.onabort=$.onerror=function(){var V=Y.error?Y.error:Y.transaction.error;B(V)}}catch(V){B(V)}})}).catch(B)});return k(S,b),S}function ro(b){var C=this,S=new E(function(F,B){C.ready().then(function(){Ht(C._dbInfo,be,function(w,$){if(w)return B(w);try{var H=$.objectStore(C._dbInfo.storeName),Y=H.count();Y.onsuccess=function(){F(Y.result)},Y.onerror=function(){B(Y.error)}}catch(V){B(V)}})}).catch(B)});return k(S,b),S}function Tn(b,C){var S=this,F=new E(function(B,w){if(b<0){B(null);return}S.ready().then(function(){Ht(S._dbInfo,be,function($,H){if($)return w($);try{var Y=H.objectStore(S._dbInfo.storeName),V=!1,te=Y.openKeyCursor();te.onsuccess=function(){var pe=te.result;if(!pe){B(null);return}b===0||V?B(pe.key):(V=!0,pe.advance(b))},te.onerror=function(){w(te.error)}}catch(pe){w(pe)}})}).catch(w)});return k(F,C),F}function tn(b){var C=this,S=new E(function(F,B){C.ready().then(function(){Ht(C._dbInfo,be,function(w,$){if(w)return B(w);try{var H=$.objectStore(C._dbInfo.storeName),Y=H.openKeyCursor(),V=[];Y.onsuccess=function(){var te=Y.result;if(!te){F(V);return}V.push(te.key),te.continue()},Y.onerror=function(){B(Y.error)}}catch(te){B(te)}})}).catch(B)});return k(S,b),S}function Ko(b,C){C=ce.apply(this,arguments);var S=this.config();b=typeof b!="function"&&b||{},b.name||(b.name=b.name||S.name,b.storeName=b.storeName||S.storeName);var F=this,B;if(!b.name)B=E.reject("Invalid arguments");else{var w=b.name===S.name&&F._dbInfo.db,$=w?E.resolve(F._dbInfo.db):yr(b).then(function(H){var Y=X[b.name],V=Y.forages;Y.db=H;for(var te=0;te<V.length;te++)V[te]._dbInfo.db=H;return H});b.storeName?B=$.then(function(H){if(!!H.objectStoreNames.contains(b.storeName)){var Y=H.version+1;St(b);var V=X[b.name],te=V.forages;H.close();for(var pe=0;pe<te.length;pe++){var ze=te[pe];ze._dbInfo.db=null,ze._dbInfo.version=Y}var Ne=new E(function(Qe,dt){var pt=h.open(b.name,Y);pt.onerror=function(Lt){var hr=pt.result;hr.close(),dt(Lt)},pt.onupgradeneeded=function(){var Lt=pt.result;Lt.deleteObjectStore(b.storeName)},pt.onsuccess=function(){var Lt=pt.result;Lt.close(),Qe(Lt)}});return Ne.then(function(Qe){V.db=Qe;for(var dt=0;dt<te.length;dt++){var pt=te[dt];pt._dbInfo.db=Qe,$t(pt._dbInfo)}}).catch(function(Qe){throw(Bt(b,Qe)||E.resolve()).catch(function(){}),Qe})}}):B=$.then(function(H){St(b);var Y=X[b.name],V=Y.forages;H.close();for(var te=0;te<V.length;te++){var pe=V[te];pe._dbInfo.db=null}var ze=new E(function(Ne,Qe){var dt=h.deleteDatabase(b.name);dt.onerror=function(){var pt=dt.result;pt&&pt.close(),Qe(dt.error)},dt.onblocked=function(){console.warn('dropInstance blocked for database "'+b.name+'" until all open connections are closed')},dt.onsuccess=function(){var pt=dt.result;pt&&pt.close(),Ne(pt)}});return ze.then(function(Ne){Y.db=Ne;for(var Qe=0;Qe<V.length;Qe++){var dt=V[Qe];$t(dt._dbInfo)}}).catch(function(Ne){throw(Bt(b,Ne)||E.resolve()).catch(function(){}),Ne})})}return k(B,C),B}var ac={_driver:"asyncStorage",_initStorage:Ve,_support:m(),iterate:eo,getItem:fn,setItem:to,removeItem:ks,clear:Kr,length:ro,key:Tn,keys:tn,dropInstance:Ko};function Kn(){return typeof openDatabase=="function"}var Fn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cc="~~local_forage_type~",ln=/^~~local_forage_type~([^~]+)~/,lr="__lfsc__:",ni=lr.length,ii="arbf",$o="blob",xn="si08",K="ui08",G="uic8",le="si16",_e="si32",$e="ur16",sr="ui32",tt="fl32",ct="fl64",He=ni+ii.length,mt=Object.prototype.toString;function ht(b){var C=b.length*.75,S=b.length,F,B=0,w,$,H,Y;b[b.length-1]==="="&&(C--,b[b.length-2]==="="&&C--);var V=new ArrayBuffer(C),te=new Uint8Array(V);for(F=0;F<S;F+=4)w=Fn.indexOf(b[F]),$=Fn.indexOf(b[F+1]),H=Fn.indexOf(b[F+2]),Y=Fn.indexOf(b[F+3]),te[B++]=w<<2|$>>4,te[B++]=($&15)<<4|H>>2,te[B++]=(H&3)<<6|Y&63;return V}function Cr(b){var C=new Uint8Array(b),S="",F;for(F=0;F<C.length;F+=3)S+=Fn[C[F]>>2],S+=Fn[(C[F]&3)<<4|C[F+1]>>4],S+=Fn[(C[F+1]&15)<<2|C[F+2]>>6],S+=Fn[C[F+2]&63];return C.length%3===2?S=S.substring(0,S.length-1)+"=":C.length%3===1&&(S=S.substring(0,S.length-2)+"=="),S}function zo(b,C){var S="";if(b&&(S=mt.call(b)),b&&(S==="[object ArrayBuffer]"||b.buffer&&mt.call(b.buffer)==="[object ArrayBuffer]")){var F,B=lr;b instanceof ArrayBuffer?(F=b,B+=ii):(F=b.buffer,S==="[object Int8Array]"?B+=xn:S==="[object Uint8Array]"?B+=K:S==="[object Uint8ClampedArray]"?B+=G:S==="[object Int16Array]"?B+=le:S==="[object Uint16Array]"?B+=$e:S==="[object Int32Array]"?B+=_e:S==="[object Uint32Array]"?B+=sr:S==="[object Float32Array]"?B+=tt:S==="[object Float64Array]"?B+=ct:C(new Error("Failed to get type for BinaryArray"))),C(B+Cr(F))}else if(S==="[object Blob]"){var w=new FileReader;w.onload=function(){var $=cc+b.type+"~"+Cr(this.result);C(lr+$o+$)},w.readAsArrayBuffer(b)}else try{C(JSON.stringify(b))}catch($){console.error("Couldn't convert value into a JSON string: ",b),C(null,$)}}function fa(b){if(b.substring(0,ni)!==lr)return JSON.parse(b);var C=b.substring(He),S=b.substring(ni,He),F;if(S===$o&&ln.test(C)){var B=C.match(ln);F=B[1],C=C.substring(B[0].length)}var w=ht(C);switch(S){case ii:return w;case $o:return y([w],{type:F});case xn:return new Int8Array(w);case K:return new Uint8Array(w);case G:return new Uint8ClampedArray(w);case le:return new Int16Array(w);case $e:return new Uint16Array(w);case _e:return new Int32Array(w);case sr:return new Uint32Array(w);case tt:return new Float32Array(w);case ct:return new Float64Array(w);default:throw new Error("Unkown type: "+S)}}var jo={serialize:zo,deserialize:fa,stringToBuffer:ht,bufferToString:Cr};function la(b,C,S,F){b.executeSql("CREATE TABLE IF NOT EXISTS "+C.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],S,F)}function Eu(b){var C=this,S={db:null};if(b)for(var F in b)S[F]=typeof b[F]!="string"?b[F].toString():b[F];var B=new E(function(w,$){try{S.db=openDatabase(S.name,String(S.version),S.description,S.size)}catch(H){return $(H)}S.db.transaction(function(H){la(H,S,function(){C._dbInfo=S,w()},function(Y,V){$(V)})},$)});return S.serializer=jo,B}function no(b,C,S,F,B,w){b.executeSql(S,F,B,function($,H){H.code===H.SYNTAX_ERR?$.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[C.storeName],function(Y,V){V.rows.length?w(Y,H):la(Y,C,function(){Y.executeSql(S,F,B,w)},w)},w):w($,H)},w)}function Yh(b,C){var S=this;b=O(b);var F=new E(function(B,w){S.ready().then(function(){var $=S._dbInfo;$.db.transaction(function(H){no(H,$,"SELECT * FROM "+$.storeName+" WHERE key = ? LIMIT 1",[b],function(Y,V){var te=V.rows.length?V.rows.item(0).value:null;te&&(te=$.serializer.deserialize(te)),B(te)},function(Y,V){w(V)})})}).catch(w)});return k(F,C),F}function vi(b,C){var S=this,F=new E(function(B,w){S.ready().then(function(){var $=S._dbInfo;$.db.transaction(function(H){no(H,$,"SELECT * FROM "+$.storeName,[],function(Y,V){for(var te=V.rows,pe=te.length,ze=0;ze<pe;ze++){var Ne=te.item(ze),Qe=Ne.value;if(Qe&&(Qe=$.serializer.deserialize(Qe)),Qe=b(Qe,Ne.key,ze+1),Qe!==void 0){B(Qe);return}}B()},function(Y,V){w(V)})})}).catch(w)});return k(F,C),F}function io(b,C,S,F){var B=this;b=O(b);var w=new E(function($,H){B.ready().then(function(){C===void 0&&(C=null);var Y=C,V=B._dbInfo;V.serializer.serialize(C,function(te,pe){pe?H(pe):V.db.transaction(function(ze){no(ze,V,"INSERT OR REPLACE INTO "+V.storeName+" (key, value) VALUES (?, ?)",[b,te],function(){$(Y)},function(Ne,Qe){H(Qe)})},function(ze){if(ze.code===ze.QUOTA_ERR){if(F>0){$(io.apply(B,[b,Y,S,F-1]));return}H(ze)}})})}).catch(H)});return k(w,S),w}function qo(b,C,S){return io.apply(this,[b,C,S,1])}function Au(b,C){var S=this;b=O(b);var F=new E(function(B,w){S.ready().then(function(){var $=S._dbInfo;$.db.transaction(function(H){no(H,$,"DELETE FROM "+$.storeName+" WHERE key = ?",[b],function(){B()},function(Y,V){w(V)})})}).catch(w)});return k(F,C),F}function Su(b){var C=this,S=new E(function(F,B){C.ready().then(function(){var w=C._dbInfo;w.db.transaction(function($){no($,w,"DELETE FROM "+w.storeName,[],function(){F()},function(H,Y){B(Y)})})}).catch(B)});return k(S,b),S}function el(b){var C=this,S=new E(function(F,B){C.ready().then(function(){var w=C._dbInfo;w.db.transaction(function($){no($,w,"SELECT COUNT(key) as c FROM "+w.storeName,[],function(H,Y){var V=Y.rows.item(0).c;F(V)},function(H,Y){B(Y)})})}).catch(B)});return k(S,b),S}function Pu(b,C){var S=this,F=new E(function(B,w){S.ready().then(function(){var $=S._dbInfo;$.db.transaction(function(H){no(H,$,"SELECT key FROM "+$.storeName+" WHERE id = ? LIMIT 1",[b+1],function(Y,V){var te=V.rows.length?V.rows.item(0).key:null;B(te)},function(Y,V){w(V)})})}).catch(w)});return k(F,C),F}function En(b){var C=this,S=new E(function(F,B){C.ready().then(function(){var w=C._dbInfo;w.db.transaction(function($){no($,w,"SELECT key FROM "+w.storeName,[],function(H,Y){for(var V=[],te=0;te<Y.rows.length;te++)V.push(Y.rows.item(te).key);F(V)},function(H,Y){B(Y)})})}).catch(B)});return k(S,b),S}function uc(b){return new E(function(C,S){b.transaction(function(F){F.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(B,w){for(var $=[],H=0;H<w.rows.length;H++)$.push(w.rows.item(H).name);C({db:b,storeNames:$})},function(B,w){S(w)})},function(F){S(F)})})}function g(b,C){C=ce.apply(this,arguments);var S=this.config();b=typeof b!="function"&&b||{},b.name||(b.name=b.name||S.name,b.storeName=b.storeName||S.storeName);var F=this,B;return b.name?B=new E(function(w){var $;b.name===S.name?$=F._dbInfo.db:$=openDatabase(b.name,"","",0),b.storeName?w({db:$,storeNames:[b.storeName]}):w(uc($))}).then(function(w){return new E(function($,H){w.db.transaction(function(Y){function V(Ne){return new E(function(Qe,dt){Y.executeSql("DROP TABLE IF EXISTS "+Ne,[],function(){Qe()},function(pt,Lt){dt(Lt)})})}for(var te=[],pe=0,ze=w.storeNames.length;pe<ze;pe++)te.push(V(w.storeNames[pe]));E.all(te).then(function(){$()}).catch(function(Ne){H(Ne)})},function(Y){H(Y)})})}):B=E.reject("Invalid arguments"),k(B,C),B}var x={_driver:"webSQLStorage",_initStorage:Eu,_support:Kn(),iterate:vi,getItem:Yh,setItem:qo,removeItem:Au,clear:Su,length:el,key:Pu,keys:En,dropInstance:g};function _(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function d(b,C){var S=b.name+"/";return b.storeName!==C.storeName&&(S+=b.storeName+"/"),S}function D(){var b="_localforage_support_test";try{return localStorage.setItem(b,!0),localStorage.removeItem(b),!1}catch{return!0}}function R(){return!D()||localStorage.length>0}function U(b){var C=this,S={};if(b)for(var F in b)S[F]=b[F];return S.keyPrefix=d(b,C._defaultConfig),R()?(C._dbInfo=S,S.serializer=jo,E.resolve()):E.reject()}function oe(b){var C=this,S=C.ready().then(function(){for(var F=C._dbInfo.keyPrefix,B=localStorage.length-1;B>=0;B--){var w=localStorage.key(B);w.indexOf(F)===0&&localStorage.removeItem(w)}});return k(S,b),S}function ye(b,C){var S=this;b=O(b);var F=S.ready().then(function(){var B=S._dbInfo,w=localStorage.getItem(B.keyPrefix+b);return w&&(w=B.serializer.deserialize(w)),w});return k(F,C),F}function Ke(b,C){var S=this,F=S.ready().then(function(){for(var B=S._dbInfo,w=B.keyPrefix,$=w.length,H=localStorage.length,Y=1,V=0;V<H;V++){var te=localStorage.key(V);if(te.indexOf(w)===0){var pe=localStorage.getItem(te);if(pe&&(pe=B.serializer.deserialize(pe)),pe=b(pe,te.substring($),Y++),pe!==void 0)return pe}}});return k(F,C),F}function Se(b,C){var S=this,F=S.ready().then(function(){var B=S._dbInfo,w;try{w=localStorage.key(b)}catch{w=null}return w&&(w=w.substring(B.keyPrefix.length)),w});return k(F,C),F}function Dt(b){var C=this,S=C.ready().then(function(){for(var F=C._dbInfo,B=localStorage.length,w=[],$=0;$<B;$++){var H=localStorage.key($);H.indexOf(F.keyPrefix)===0&&w.push(H.substring(F.keyPrefix.length))}return w});return k(S,b),S}function Te(b){var C=this,S=C.keys().then(function(F){return F.length});return k(S,b),S}function rt(b,C){var S=this;b=O(b);var F=S.ready().then(function(){var B=S._dbInfo;localStorage.removeItem(B.keyPrefix+b)});return k(F,C),F}function ot(b,C,S){var F=this;b=O(b);var B=F.ready().then(function(){C===void 0&&(C=null);var w=C;return new E(function($,H){var Y=F._dbInfo;Y.serializer.serialize(C,function(V,te){if(te)H(te);else try{localStorage.setItem(Y.keyPrefix+b,V),$(w)}catch(pe){(pe.name==="QuotaExceededError"||pe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&H(pe),H(pe)}})})});return k(B,S),B}function ut(b,C){if(C=ce.apply(this,arguments),b=typeof b!="function"&&b||{},!b.name){var S=this.config();b.name=b.name||S.name,b.storeName=b.storeName||S.storeName}var F=this,B;return b.name?B=new E(function(w){b.storeName?w(d(b,F._defaultConfig)):w(b.name+"/")}).then(function(w){for(var $=localStorage.length-1;$>=0;$--){var H=localStorage.key($);H.indexOf(w)===0&&localStorage.removeItem(H)}}):B=E.reject("Invalid arguments"),k(B,C),B}var lt={_driver:"localStorageWrapper",_initStorage:U,_support:_(),iterate:Ke,getItem:ye,setItem:ot,removeItem:rt,clear:oe,length:Te,key:Se,keys:Dt,dropInstance:ut},et=function(C,S){return C===S||typeof C=="number"&&typeof S=="number"&&isNaN(C)&&isNaN(S)},ft=function(C,S){for(var F=C.length,B=0;B<F;){if(et(C[B],S))return!0;B++}return!1},nt=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"},Ce={},qe={},xe={INDEXEDDB:ac,WEBSQL:x,LOCALSTORAGE:lt},Be=[xe.INDEXEDDB._driver,xe.WEBSQL._driver,xe.LOCALSTORAGE._driver],Le=["dropInstance"],Ee=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Le),z={description:"",driver:Be.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function j(b,C){b[C]=function(){var S=arguments;return b.ready().then(function(){return b[C].apply(b,S)})}}function fe(){for(var b=1;b<arguments.length;b++){var C=arguments[b];if(C)for(var S in C)C.hasOwnProperty(S)&&(nt(C[S])?arguments[0][S]=C[S].slice():arguments[0][S]=C[S])}return arguments[0]}var re=function(){function b(C){u(this,b);for(var S in xe)if(xe.hasOwnProperty(S)){var F=xe[S],B=F._driver;this[S]=B,Ce[B]||this.defineDriver(F)}this._defaultConfig=fe({},z),this._config=fe({},this._defaultConfig,C),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return b.prototype.config=function(S){if((typeof S>"u"?"undefined":a(S))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var F in S){if(F==="storeName"&&(S[F]=S[F].replace(/\W/g,"_")),F==="version"&&typeof S[F]!="number")return new Error("Database version must be a number.");this._config[F]=S[F]}return"driver"in S&&S.driver?this.setDriver(this._config.driver):!0}else return typeof S=="string"?this._config[S]:this._config},b.prototype.defineDriver=function(S,F,B){var w=new E(function($,H){try{var Y=S._driver,V=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!S._driver){H(V);return}for(var te=Ee.concat("_initStorage"),pe=0,ze=te.length;pe<ze;pe++){var Ne=te[pe],Qe=!ft(Le,Ne);if((Qe||S[Ne])&&typeof S[Ne]!="function"){H(V);return}}var dt=function(){for(var hr=function(nb){return function(){var Lm=new Error("Method "+nb+" is not implemented by the current driver"),Om=E.reject(Lm);return k(Om,arguments[arguments.length-1]),Om}},Ar=0,$r=Le.length;Ar<$r;Ar++){var Jh=Le[Ar];S[Jh]||(S[Jh]=hr(Jh))}};dt();var pt=function(hr){Ce[Y]&&console.info("Redefining LocalForage driver: "+Y),Ce[Y]=S,qe[Y]=hr,$()};"_support"in S?S._support&&typeof S._support=="function"?S._support().then(pt,H):pt(!!S._support):pt(!0)}catch(Lt){H(Lt)}});return T(w,F,B),w},b.prototype.driver=function(){return this._driver||null},b.prototype.getDriver=function(S,F,B){var w=Ce[S]?E.resolve(Ce[S]):E.reject(new Error("Driver not found."));return T(w,F,B),w},b.prototype.getSerializer=function(S){var F=E.resolve(jo);return T(F,S),F},b.prototype.ready=function(S){var F=this,B=F._driverSet.then(function(){return F._ready===null&&(F._ready=F._initDriver()),F._ready});return T(B,S,S),B},b.prototype.setDriver=function(S,F,B){var w=this;nt(S)||(S=[S]);var $=this._getSupportedDrivers(S);function H(){w._config.driver=w.driver()}function Y(pe){return w._extend(pe),H(),w._ready=w._initStorage(w._config),w._ready}function V(pe){return function(){var ze=0;function Ne(){for(;ze<pe.length;){var Qe=pe[ze];return ze++,w._dbInfo=null,w._ready=null,w.getDriver(Qe).then(Y).catch(Ne)}H();var dt=new Error("No available storage method found.");return w._driverSet=E.reject(dt),w._driverSet}return Ne()}}var te=this._driverSet!==null?this._driverSet.catch(function(){return E.resolve()}):E.resolve();return this._driverSet=te.then(function(){var pe=$[0];return w._dbInfo=null,w._ready=null,w.getDriver(pe).then(function(ze){w._driver=ze._driver,H(),w._wrapLibraryMethodsWithReady(),w._initDriver=V($)})}).catch(function(){H();var pe=new Error("No available storage method found.");return w._driverSet=E.reject(pe),w._driverSet}),T(this._driverSet,F,B),this._driverSet},b.prototype.supports=function(S){return!!qe[S]},b.prototype._extend=function(S){fe(this,S)},b.prototype._getSupportedDrivers=function(S){for(var F=[],B=0,w=S.length;B<w;B++){var $=S[B];this.supports($)&&F.push($)}return F},b.prototype._wrapLibraryMethodsWithReady=function(){for(var S=0,F=Ee.length;S<F;S++)j(this,Ee[S])},b.prototype.createInstance=function(S){return new b(S)},b}(),ie=new re;i.exports=ie},{3:3}]},{},[4])(4)})});var mv={};Me(mv,{concat:()=>pn});function pn(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));let t=new Uint8Array(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}var Ku=Qt(()=>{});var WS={};Me(WS,{equals:()=>$u});function $u(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var wd=Qt(()=>{});function wK(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var u=r.length,l=r.charAt(0),h=Math.log(u)/Math.log(256),m=Math.log(256)/Math.log(u);function y(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var O=0,ce=0,ne=0,ve=T.length;ne!==ve&&T[ne]===0;)ne++,O++;for(var X=(ve-ne)*m+1>>>0,me=new Uint8Array(X);ne!==ve;){for(var be=T[ne],W=0,de=X-1;(be!==0||W<ce)&&de!==-1;de--,W++)be+=256*me[de]>>>0,me[de]=be%u>>>0,be=be/u>>>0;if(be!==0)throw new Error("Non-zero carry");ce=W,ne++}for(var ge=X-ce;ge!==X&&me[ge]===0;)ge++;for(var Ue=l.repeat(O);ge<X;++ge)Ue+=r.charAt(me[ge]);return Ue}function E(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var O=0;if(T[O]!==" "){for(var ce=0,ne=0;T[O]===l;)ce++,O++;for(var ve=(T.length-O)*h+1>>>0,X=new Uint8Array(ve);T[O];){var me=t[T.charCodeAt(O)];if(me===255)return;for(var be=0,W=ve-1;(me!==0||be<ne)&&W!==-1;W--,be++)me+=u*X[W]>>>0,X[W]=me%256>>>0,me=me/256>>>0;if(me!==0)throw new Error("Non-zero carry");ne=be,O++}if(T[O]!==" "){for(var de=ve-ne;de!==ve&&X[de]===0;)de++;for(var ge=new Uint8Array(ce+(ve-de)),Ue=ce;de!==ve;)ge[Ue++]=X[de++];return ge}}}function k(T){var O=E(T);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:E,decode:k}}var bK,vK,VS,GS=Qt(()=>{bK=wK,vK=bK,VS=vK});var gZ,YS,Xo,JS,XS,_c=Qt(()=>{gZ=new Uint8Array(0),YS=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Xo=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},JS=r=>new TextEncoder().encode(r),XS=r=>new TextDecoder().decode(r)});var gv,wv,bv,QS,vv,Ay,xc,_K,xK,Ir,Bs=Qt(()=>{GS();_c();gv=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},wv=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return QS(this,e)}},bv=class{constructor(e){this.decoders=e}or(e){return QS(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},QS=(r,e)=>new bv({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),vv=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new gv(e,t,n),this.decoder=new wv(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Ay=({name:r,prefix:e,encode:t,decode:n})=>new vv(r,e,t,n),xc=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=VS(t,e);return Ay({prefix:r,name:e,encode:n,decode:o=>Xo(i(o))})},_K=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),u=0,l=0,h=0;for(let m=0;m<o;++m){let y=i[r[m]];if(y===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<t|y,u+=t,u>=8&&(u-=8,a[h++]=255&l>>u)}if(u>=t||255&l<<8-u)throw new SyntaxError("Unexpected end of data");return a},xK=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,u=0;for(let l=0;l<r.length;++l)for(u=u<<8|r[l],a+=8;a>t;)a-=t,o+=e[i&u>>a];if(a&&(o+=e[i&u<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Ir=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Ay({prefix:e,name:r,encode(i){return xK(i,n,t)},decode(i){return _K(i,n,t,r)}})});var _v={};Me(_v,{identity:()=>EK});var EK,ZS=Qt(()=>{Bs();_c();EK=Ay({prefix:"\0",name:"identity",encode:r=>XS(r),decode:r=>JS(r)})});var xv={};Me(xv,{base2:()=>AK});var AK,eP=Qt(()=>{Bs();AK=Ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var Ev={};Me(Ev,{base8:()=>SK});var SK,tP=Qt(()=>{Bs();SK=Ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var Av={};Me(Av,{base10:()=>PK});var PK,rP=Qt(()=>{Bs();PK=xc({prefix:"9",name:"base10",alphabet:"0123456789"})});var Sv={};Me(Sv,{base16:()=>DK,base16upper:()=>CK});var DK,CK,nP=Qt(()=>{Bs();DK=Ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),CK=Ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var Sy={};Me(Sy,{base32:()=>Vt,base32hex:()=>TK,base32hexpad:()=>BK,base32hexpadupper:()=>LK,base32hexupper:()=>FK,base32pad:()=>Pv,base32padupper:()=>IK,base32upper:()=>kK,base32z:()=>OK});var Vt,kK,Pv,IK,TK,FK,BK,LK,OK,Qo=Qt(()=>{Bs();Vt=Ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),kK=Ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pv=Ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),IK=Ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),TK=Ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),FK=Ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),BK=Ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),LK=Ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),OK=Ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Dv={};Me(Dv,{base36:()=>NK,base36upper:()=>RK});var NK,RK,iP=Qt(()=>{Bs();NK=xc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),RK=xc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var bd={};Me(bd,{base58btc:()=>Pn,base58flickr:()=>MK});var Pn,MK,Ec=Qt(()=>{Bs();Pn=xc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),MK=xc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var Cv={};Me(Cv,{base64:()=>UK,base64pad:()=>KK,base64url:()=>$K,base64urlpad:()=>zK});var UK,KK,$K,zK,oP=Qt(()=>{Bs();UK=Ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),KK=Ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$K=Ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),zK=Ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});function cP(r,e,t){e=e||[],t=t||0;for(var n=t;r>=WK;)e[t++]=r&255|sP,r/=128;for(;r&HK;)e[t++]=r&255|sP,r>>>=7;return e[t]=r|0,cP.bytes=t-n+1,e}function kv(r,n){var t=0,n=n||0,i=0,o=n,a,u=r.length;do{if(o>=u)throw kv.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&aP)<<i:(a&aP)*Math.pow(2,i),i+=7}while(a>=GK);return kv.bytes=o-n,t}var jK,sP,qK,HK,WK,VK,GK,aP,YK,JK,XK,QK,ZK,e$,t$,r$,n$,i$,o$,s$,vd,uP=Qt(()=>{jK=cP,sP=128,qK=127,HK=~qK,WK=Math.pow(2,31);VK=kv,GK=128,aP=127;YK=Math.pow(2,7),JK=Math.pow(2,14),XK=Math.pow(2,21),QK=Math.pow(2,28),ZK=Math.pow(2,35),e$=Math.pow(2,42),t$=Math.pow(2,49),r$=Math.pow(2,56),n$=Math.pow(2,63),i$=function(r){return r<YK?1:r<JK?2:r<XK?3:r<QK?4:r<ZK?5:r<e$?6:r<t$?7:r<r$?8:r<n$?9:10},o$={encode:jK,decode:VK,encodingLength:i$},s$=o$,vd=s$});var _d,gl,wl,Dy=Qt(()=>{uP();_d=r=>[vd.decode(r),vd.decode.bytes],gl=(r,e,t=0)=>(vd.encode(r,e,t),e),wl=r=>vd.encodingLength(r)});var po={};Me(po,{Digest:()=>zu,create:()=>Ac,decode:()=>Ci,equals:()=>Iv});var Ac,Ci,Iv,zu,Zo=Qt(()=>{_c();Dy();Ac=(r,e)=>{let t=e.byteLength,n=wl(r),i=n+wl(t),o=new Uint8Array(i+t);return gl(r,o,0),gl(t,o,n),o.set(e,i),new zu(r,t,e,o)},Ci=r=>{let e=Xo(r),[t,n]=_d(e),[i,o]=_d(e.subarray(n)),a=e.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new zu(t,i,a,e)},Iv=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&YS(r.bytes,e.bytes),zu=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}});var Fv,Tv,Bv=Qt(()=>{Zo();Fv=({name:r,code:e,encode:t})=>new Tv(r,e,t),Tv=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Ac(this.code,t):t.then(n=>Ac(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var Lv={};Me(Lv,{sha256:()=>bl,sha512:()=>a$});var lP,bl,a$,Cy=Qt(()=>{Bv();lP=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),bl=Fv({name:"sha2-256",code:18,encode:lP("SHA-256")}),a$=Fv({name:"sha2-512",code:19,encode:lP("SHA-512")})});var Nv={};Me(Nv,{identity:()=>Ov});var hP,c$,dP,u$,Ov,Rv=Qt(()=>{_c();Zo();hP=0,c$="identity",dP=Xo,u$=r=>Ac(hP,dP(r)),Ov={code:hP,name:c$,encode:dP,digest:u$}});var Os={};Me(Os,{code:()=>Ls,decode:()=>l$,encode:()=>f$,name:()=>Mv});var Mv,Ls,f$,l$,ju=Qt(()=>{_c();Mv="raw",Ls=85,f$=r=>Xo(r),l$=r=>Xo(r)});var RZ,MZ,pP=Qt(()=>{RZ=new TextEncoder,MZ=new TextDecoder});var Uv={};Me(Uv,{CID:()=>we});var we,d$,p$,m$,xd,y$,mP,yP,ky,Iy,g$,w$,b$,cr=Qt(()=>{Dy();Zo();Ec();Qo();_c();we=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Iy,byteLength:Iy,code:ky,version:ky,multihash:ky,bytes:ky,_baseCache:Iy,asCID:Iy})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==xd)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==y$)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return we.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Ac(e,t);return we.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Iv(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return p$(t,i,e||Pn.encoder);default:return m$(t,i,e||Vt.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return w$(/^0\.0/,b$),!!(e&&(e[yP]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof we)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new we(t,n,i,o||mP(t,n,i.bytes))}else if(e!=null&&e[yP]===!0){let{version:t,multihash:n,code:i}=e,o=Ci(n);return we.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==xd)throw new Error(`Version 0 CID must use dag-pb (code: ${xd}) block encoding`);return new we(e,t,n,n.bytes)}case 1:{let i=mP(e,t,n.bytes);return new we(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return we.create(0,xd,e)}static createV1(e,t){return we.create(1,e,t)}static decode(e){let[t,n]=we.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=we.inspectBytes(e),n=t.size-t.multihashSize,i=Xo(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),a=new zu(t.multihashCode,t.digestSize,o,i);return[t.version===0?we.createV0(a):we.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[y,E]=_d(e.subarray(t));return t+=E,y},i=n(),o=xd;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=t,u=n(),l=n(),h=t+l,m=h-a;return{version:i,codec:o,multihashCode:u,digestSize:l,multihashSize:m,size:h}}static parse(e,t){let[n,i]=d$(e,t),o=we.decode(i);return o._baseCache.set(n,e),o}},d$=(r,e)=>{switch(r[0]){case"Q":{let t=e||Pn;return[Pn.prefix,t.decode(`${Pn.prefix}${r}`)]}case Pn.prefix:{let t=e||Pn;return[Pn.prefix,t.decode(r)]}case Vt.prefix:{let t=e||Vt;return[Vt.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},p$=(r,e,t)=>{let{prefix:n}=t;if(n!==Pn.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},m$=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},xd=112,y$=18,mP=(r,e,t)=>{let n=wl(r),i=n+wl(e),o=new Uint8Array(i+t.byteLength);return gl(r,o,0),gl(e,o,n),o.set(t,i),o},yP=Symbol.for("@ipld/js-cid/CID"),ky={writable:!1,configurable:!1,enumerable:!0},Iy={writable:!1,enumerable:!1,configurable:!1},g$="0.0.0-dev",w$=(r,e)=>{if(r.test(g$))console.warn(e);else throw new Error(e)},b$=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Ed=Qt(()=>{cr();Dy();_c();Bv();Zo()});var Kv,HZ,gP=Qt(()=>{ZS();eP();tP();rP();nP();Qo();iP();Ec();oP();Cy();Rv();ju();pP();Ed();Kv={..._v,...xv,...Ev,...Av,...Sv,...Sy,...Dv,...bd,...Cv},HZ={...Lv,...Nv}});function bP(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var wP,$v,v$,Ty,zv=Qt(()=>{gP();wP=bP("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),$v=bP("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),v$={utf8:wP,"utf-8":wP,hex:Kv.base16,latin1:$v,ascii:$v,binary:$v,...Kv},Ty=v$});var vP={};Me(vP,{fromString:()=>wt});function wt(r,e="utf8"){let t=Ty[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}var mo=Qt(()=>{zv()});var Ad={};Me(Ad,{toString:()=>Ze});function Ze(r,e="utf8"){let t=Ty[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return t.encoder.encode(r).substring(1)}var Dn=Qt(()=>{zv()});var o_=ee(()=>{});var KP=ee((zee,Gy)=>{(function(r){"use strict";var e=function(g){var x,_=new Float64Array(16);if(g)for(x=0;x<g.length;x++)_[x]=g[x];return _},t=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=e(),a=e([1]),u=e([56129,1]),l=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),y=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),E=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function k(g,x,_,d){g[x]=_>>24&255,g[x+1]=_>>16&255,g[x+2]=_>>8&255,g[x+3]=_&255,g[x+4]=d>>24&255,g[x+5]=d>>16&255,g[x+6]=d>>8&255,g[x+7]=d&255}function T(g,x,_,d,D){var R,U=0;for(R=0;R<D;R++)U|=g[x+R]^_[d+R];return(1&U-1>>>8)-1}function O(g,x,_,d){return T(g,x,_,d,16)}function ce(g,x,_,d){return T(g,x,_,d,32)}function ne(g,x,_,d){for(var D=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,R=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,U=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,oe=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,ye=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,Ke=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,Se=x[0]&255|(x[1]&255)<<8|(x[2]&255)<<16|(x[3]&255)<<24,Dt=x[4]&255|(x[5]&255)<<8|(x[6]&255)<<16|(x[7]&255)<<24,Te=x[8]&255|(x[9]&255)<<8|(x[10]&255)<<16|(x[11]&255)<<24,rt=x[12]&255|(x[13]&255)<<8|(x[14]&255)<<16|(x[15]&255)<<24,ot=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,ut=_[16]&255|(_[17]&255)<<8|(_[18]&255)<<16|(_[19]&255)<<24,lt=_[20]&255|(_[21]&255)<<8|(_[22]&255)<<16|(_[23]&255)<<24,et=_[24]&255|(_[25]&255)<<8|(_[26]&255)<<16|(_[27]&255)<<24,ft=_[28]&255|(_[29]&255)<<8|(_[30]&255)<<16|(_[31]&255)<<24,nt=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24,Ce=D,qe=R,xe=U,Be=oe,Le=ye,Ee=Ke,z=Se,j=Dt,fe=Te,re=rt,ie=ot,b=ut,C=lt,S=et,F=ft,B=nt,w,$=0;$<20;$+=2)w=Ce+C|0,Le^=w<<7|w>>>32-7,w=Le+Ce|0,fe^=w<<9|w>>>32-9,w=fe+Le|0,C^=w<<13|w>>>32-13,w=C+fe|0,Ce^=w<<18|w>>>32-18,w=Ee+qe|0,re^=w<<7|w>>>32-7,w=re+Ee|0,S^=w<<9|w>>>32-9,w=S+re|0,qe^=w<<13|w>>>32-13,w=qe+S|0,Ee^=w<<18|w>>>32-18,w=ie+z|0,F^=w<<7|w>>>32-7,w=F+ie|0,xe^=w<<9|w>>>32-9,w=xe+F|0,z^=w<<13|w>>>32-13,w=z+xe|0,ie^=w<<18|w>>>32-18,w=B+b|0,Be^=w<<7|w>>>32-7,w=Be+B|0,j^=w<<9|w>>>32-9,w=j+Be|0,b^=w<<13|w>>>32-13,w=b+j|0,B^=w<<18|w>>>32-18,w=Ce+Be|0,qe^=w<<7|w>>>32-7,w=qe+Ce|0,xe^=w<<9|w>>>32-9,w=xe+qe|0,Be^=w<<13|w>>>32-13,w=Be+xe|0,Ce^=w<<18|w>>>32-18,w=Ee+Le|0,z^=w<<7|w>>>32-7,w=z+Ee|0,j^=w<<9|w>>>32-9,w=j+z|0,Le^=w<<13|w>>>32-13,w=Le+j|0,Ee^=w<<18|w>>>32-18,w=ie+re|0,b^=w<<7|w>>>32-7,w=b+ie|0,fe^=w<<9|w>>>32-9,w=fe+b|0,re^=w<<13|w>>>32-13,w=re+fe|0,ie^=w<<18|w>>>32-18,w=B+F|0,C^=w<<7|w>>>32-7,w=C+B|0,S^=w<<9|w>>>32-9,w=S+C|0,F^=w<<13|w>>>32-13,w=F+S|0,B^=w<<18|w>>>32-18;Ce=Ce+D|0,qe=qe+R|0,xe=xe+U|0,Be=Be+oe|0,Le=Le+ye|0,Ee=Ee+Ke|0,z=z+Se|0,j=j+Dt|0,fe=fe+Te|0,re=re+rt|0,ie=ie+ot|0,b=b+ut|0,C=C+lt|0,S=S+et|0,F=F+ft|0,B=B+nt|0,g[0]=Ce>>>0&255,g[1]=Ce>>>8&255,g[2]=Ce>>>16&255,g[3]=Ce>>>24&255,g[4]=qe>>>0&255,g[5]=qe>>>8&255,g[6]=qe>>>16&255,g[7]=qe>>>24&255,g[8]=xe>>>0&255,g[9]=xe>>>8&255,g[10]=xe>>>16&255,g[11]=xe>>>24&255,g[12]=Be>>>0&255,g[13]=Be>>>8&255,g[14]=Be>>>16&255,g[15]=Be>>>24&255,g[16]=Le>>>0&255,g[17]=Le>>>8&255,g[18]=Le>>>16&255,g[19]=Le>>>24&255,g[20]=Ee>>>0&255,g[21]=Ee>>>8&255,g[22]=Ee>>>16&255,g[23]=Ee>>>24&255,g[24]=z>>>0&255,g[25]=z>>>8&255,g[26]=z>>>16&255,g[27]=z>>>24&255,g[28]=j>>>0&255,g[29]=j>>>8&255,g[30]=j>>>16&255,g[31]=j>>>24&255,g[32]=fe>>>0&255,g[33]=fe>>>8&255,g[34]=fe>>>16&255,g[35]=fe>>>24&255,g[36]=re>>>0&255,g[37]=re>>>8&255,g[38]=re>>>16&255,g[39]=re>>>24&255,g[40]=ie>>>0&255,g[41]=ie>>>8&255,g[42]=ie>>>16&255,g[43]=ie>>>24&255,g[44]=b>>>0&255,g[45]=b>>>8&255,g[46]=b>>>16&255,g[47]=b>>>24&255,g[48]=C>>>0&255,g[49]=C>>>8&255,g[50]=C>>>16&255,g[51]=C>>>24&255,g[52]=S>>>0&255,g[53]=S>>>8&255,g[54]=S>>>16&255,g[55]=S>>>24&255,g[56]=F>>>0&255,g[57]=F>>>8&255,g[58]=F>>>16&255,g[59]=F>>>24&255,g[60]=B>>>0&255,g[61]=B>>>8&255,g[62]=B>>>16&255,g[63]=B>>>24&255}function ve(g,x,_,d){for(var D=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,R=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,U=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,oe=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,ye=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,Ke=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,Se=x[0]&255|(x[1]&255)<<8|(x[2]&255)<<16|(x[3]&255)<<24,Dt=x[4]&255|(x[5]&255)<<8|(x[6]&255)<<16|(x[7]&255)<<24,Te=x[8]&255|(x[9]&255)<<8|(x[10]&255)<<16|(x[11]&255)<<24,rt=x[12]&255|(x[13]&255)<<8|(x[14]&255)<<16|(x[15]&255)<<24,ot=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,ut=_[16]&255|(_[17]&255)<<8|(_[18]&255)<<16|(_[19]&255)<<24,lt=_[20]&255|(_[21]&255)<<8|(_[22]&255)<<16|(_[23]&255)<<24,et=_[24]&255|(_[25]&255)<<8|(_[26]&255)<<16|(_[27]&255)<<24,ft=_[28]&255|(_[29]&255)<<8|(_[30]&255)<<16|(_[31]&255)<<24,nt=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24,Ce=D,qe=R,xe=U,Be=oe,Le=ye,Ee=Ke,z=Se,j=Dt,fe=Te,re=rt,ie=ot,b=ut,C=lt,S=et,F=ft,B=nt,w,$=0;$<20;$+=2)w=Ce+C|0,Le^=w<<7|w>>>32-7,w=Le+Ce|0,fe^=w<<9|w>>>32-9,w=fe+Le|0,C^=w<<13|w>>>32-13,w=C+fe|0,Ce^=w<<18|w>>>32-18,w=Ee+qe|0,re^=w<<7|w>>>32-7,w=re+Ee|0,S^=w<<9|w>>>32-9,w=S+re|0,qe^=w<<13|w>>>32-13,w=qe+S|0,Ee^=w<<18|w>>>32-18,w=ie+z|0,F^=w<<7|w>>>32-7,w=F+ie|0,xe^=w<<9|w>>>32-9,w=xe+F|0,z^=w<<13|w>>>32-13,w=z+xe|0,ie^=w<<18|w>>>32-18,w=B+b|0,Be^=w<<7|w>>>32-7,w=Be+B|0,j^=w<<9|w>>>32-9,w=j+Be|0,b^=w<<13|w>>>32-13,w=b+j|0,B^=w<<18|w>>>32-18,w=Ce+Be|0,qe^=w<<7|w>>>32-7,w=qe+Ce|0,xe^=w<<9|w>>>32-9,w=xe+qe|0,Be^=w<<13|w>>>32-13,w=Be+xe|0,Ce^=w<<18|w>>>32-18,w=Ee+Le|0,z^=w<<7|w>>>32-7,w=z+Ee|0,j^=w<<9|w>>>32-9,w=j+z|0,Le^=w<<13|w>>>32-13,w=Le+j|0,Ee^=w<<18|w>>>32-18,w=ie+re|0,b^=w<<7|w>>>32-7,w=b+ie|0,fe^=w<<9|w>>>32-9,w=fe+b|0,re^=w<<13|w>>>32-13,w=re+fe|0,ie^=w<<18|w>>>32-18,w=B+F|0,C^=w<<7|w>>>32-7,w=C+B|0,S^=w<<9|w>>>32-9,w=S+C|0,F^=w<<13|w>>>32-13,w=F+S|0,B^=w<<18|w>>>32-18;g[0]=Ce>>>0&255,g[1]=Ce>>>8&255,g[2]=Ce>>>16&255,g[3]=Ce>>>24&255,g[4]=Ee>>>0&255,g[5]=Ee>>>8&255,g[6]=Ee>>>16&255,g[7]=Ee>>>24&255,g[8]=ie>>>0&255,g[9]=ie>>>8&255,g[10]=ie>>>16&255,g[11]=ie>>>24&255,g[12]=B>>>0&255,g[13]=B>>>8&255,g[14]=B>>>16&255,g[15]=B>>>24&255,g[16]=z>>>0&255,g[17]=z>>>8&255,g[18]=z>>>16&255,g[19]=z>>>24&255,g[20]=j>>>0&255,g[21]=j>>>8&255,g[22]=j>>>16&255,g[23]=j>>>24&255,g[24]=fe>>>0&255,g[25]=fe>>>8&255,g[26]=fe>>>16&255,g[27]=fe>>>24&255,g[28]=re>>>0&255,g[29]=re>>>8&255,g[30]=re>>>16&255,g[31]=re>>>24&255}function X(g,x,_,d){ne(g,x,_,d)}function me(g,x,_,d){ve(g,x,_,d)}var be=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function W(g,x,_,d,D,R,U){var oe=new Uint8Array(16),ye=new Uint8Array(64),Ke,Se;for(Se=0;Se<16;Se++)oe[Se]=0;for(Se=0;Se<8;Se++)oe[Se]=R[Se];for(;D>=64;){for(X(ye,oe,U,be),Se=0;Se<64;Se++)g[x+Se]=_[d+Se]^ye[Se];for(Ke=1,Se=8;Se<16;Se++)Ke=Ke+(oe[Se]&255)|0,oe[Se]=Ke&255,Ke>>>=8;D-=64,x+=64,d+=64}if(D>0)for(X(ye,oe,U,be),Se=0;Se<D;Se++)g[x+Se]=_[d+Se]^ye[Se];return 0}function de(g,x,_,d,D){var R=new Uint8Array(16),U=new Uint8Array(64),oe,ye;for(ye=0;ye<16;ye++)R[ye]=0;for(ye=0;ye<8;ye++)R[ye]=d[ye];for(;_>=64;){for(X(U,R,D,be),ye=0;ye<64;ye++)g[x+ye]=U[ye];for(oe=1,ye=8;ye<16;ye++)oe=oe+(R[ye]&255)|0,R[ye]=oe&255,oe>>>=8;_-=64,x+=64}if(_>0)for(X(U,R,D,be),ye=0;ye<_;ye++)g[x+ye]=U[ye];return 0}function ge(g,x,_,d,D){var R=new Uint8Array(32);me(R,d,D,be);for(var U=new Uint8Array(8),oe=0;oe<8;oe++)U[oe]=d[oe+16];return de(g,x,_,U,R)}function Ue(g,x,_,d,D,R,U){var oe=new Uint8Array(32);me(oe,R,U,be);for(var ye=new Uint8Array(8),Ke=0;Ke<8;Ke++)ye[Ke]=R[Ke+16];return W(g,x,_,d,D,ye,oe)}var St=function(g){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var x,_,d,D,R,U,oe,ye;x=g[0]&255|(g[1]&255)<<8,this.r[0]=x&8191,_=g[2]&255|(g[3]&255)<<8,this.r[1]=(x>>>13|_<<3)&8191,d=g[4]&255|(g[5]&255)<<8,this.r[2]=(_>>>10|d<<6)&7939,D=g[6]&255|(g[7]&255)<<8,this.r[3]=(d>>>7|D<<9)&8191,R=g[8]&255|(g[9]&255)<<8,this.r[4]=(D>>>4|R<<12)&255,this.r[5]=R>>>1&8190,U=g[10]&255|(g[11]&255)<<8,this.r[6]=(R>>>14|U<<2)&8191,oe=g[12]&255|(g[13]&255)<<8,this.r[7]=(U>>>11|oe<<5)&8065,ye=g[14]&255|(g[15]&255)<<8,this.r[8]=(oe>>>8|ye<<8)&8191,this.r[9]=ye>>>5&127,this.pad[0]=g[16]&255|(g[17]&255)<<8,this.pad[1]=g[18]&255|(g[19]&255)<<8,this.pad[2]=g[20]&255|(g[21]&255)<<8,this.pad[3]=g[22]&255|(g[23]&255)<<8,this.pad[4]=g[24]&255|(g[25]&255)<<8,this.pad[5]=g[26]&255|(g[27]&255)<<8,this.pad[6]=g[28]&255|(g[29]&255)<<8,this.pad[7]=g[30]&255|(g[31]&255)<<8};St.prototype.blocks=function(g,x,_){for(var d=this.fin?0:2048,D,R,U,oe,ye,Ke,Se,Dt,Te,rt,ot,ut,lt,et,ft,nt,Ce,qe,xe,Be=this.h[0],Le=this.h[1],Ee=this.h[2],z=this.h[3],j=this.h[4],fe=this.h[5],re=this.h[6],ie=this.h[7],b=this.h[8],C=this.h[9],S=this.r[0],F=this.r[1],B=this.r[2],w=this.r[3],$=this.r[4],H=this.r[5],Y=this.r[6],V=this.r[7],te=this.r[8],pe=this.r[9];_>=16;)D=g[x+0]&255|(g[x+1]&255)<<8,Be+=D&8191,R=g[x+2]&255|(g[x+3]&255)<<8,Le+=(D>>>13|R<<3)&8191,U=g[x+4]&255|(g[x+5]&255)<<8,Ee+=(R>>>10|U<<6)&8191,oe=g[x+6]&255|(g[x+7]&255)<<8,z+=(U>>>7|oe<<9)&8191,ye=g[x+8]&255|(g[x+9]&255)<<8,j+=(oe>>>4|ye<<12)&8191,fe+=ye>>>1&8191,Ke=g[x+10]&255|(g[x+11]&255)<<8,re+=(ye>>>14|Ke<<2)&8191,Se=g[x+12]&255|(g[x+13]&255)<<8,ie+=(Ke>>>11|Se<<5)&8191,Dt=g[x+14]&255|(g[x+15]&255)<<8,b+=(Se>>>8|Dt<<8)&8191,C+=Dt>>>5|d,Te=0,rt=Te,rt+=Be*S,rt+=Le*(5*pe),rt+=Ee*(5*te),rt+=z*(5*V),rt+=j*(5*Y),Te=rt>>>13,rt&=8191,rt+=fe*(5*H),rt+=re*(5*$),rt+=ie*(5*w),rt+=b*(5*B),rt+=C*(5*F),Te+=rt>>>13,rt&=8191,ot=Te,ot+=Be*F,ot+=Le*S,ot+=Ee*(5*pe),ot+=z*(5*te),ot+=j*(5*V),Te=ot>>>13,ot&=8191,ot+=fe*(5*Y),ot+=re*(5*H),ot+=ie*(5*$),ot+=b*(5*w),ot+=C*(5*B),Te+=ot>>>13,ot&=8191,ut=Te,ut+=Be*B,ut+=Le*F,ut+=Ee*S,ut+=z*(5*pe),ut+=j*(5*te),Te=ut>>>13,ut&=8191,ut+=fe*(5*V),ut+=re*(5*Y),ut+=ie*(5*H),ut+=b*(5*$),ut+=C*(5*w),Te+=ut>>>13,ut&=8191,lt=Te,lt+=Be*w,lt+=Le*B,lt+=Ee*F,lt+=z*S,lt+=j*(5*pe),Te=lt>>>13,lt&=8191,lt+=fe*(5*te),lt+=re*(5*V),lt+=ie*(5*Y),lt+=b*(5*H),lt+=C*(5*$),Te+=lt>>>13,lt&=8191,et=Te,et+=Be*$,et+=Le*w,et+=Ee*B,et+=z*F,et+=j*S,Te=et>>>13,et&=8191,et+=fe*(5*pe),et+=re*(5*te),et+=ie*(5*V),et+=b*(5*Y),et+=C*(5*H),Te+=et>>>13,et&=8191,ft=Te,ft+=Be*H,ft+=Le*$,ft+=Ee*w,ft+=z*B,ft+=j*F,Te=ft>>>13,ft&=8191,ft+=fe*S,ft+=re*(5*pe),ft+=ie*(5*te),ft+=b*(5*V),ft+=C*(5*Y),Te+=ft>>>13,ft&=8191,nt=Te,nt+=Be*Y,nt+=Le*H,nt+=Ee*$,nt+=z*w,nt+=j*B,Te=nt>>>13,nt&=8191,nt+=fe*F,nt+=re*S,nt+=ie*(5*pe),nt+=b*(5*te),nt+=C*(5*V),Te+=nt>>>13,nt&=8191,Ce=Te,Ce+=Be*V,Ce+=Le*Y,Ce+=Ee*H,Ce+=z*$,Ce+=j*w,Te=Ce>>>13,Ce&=8191,Ce+=fe*B,Ce+=re*F,Ce+=ie*S,Ce+=b*(5*pe),Ce+=C*(5*te),Te+=Ce>>>13,Ce&=8191,qe=Te,qe+=Be*te,qe+=Le*V,qe+=Ee*Y,qe+=z*H,qe+=j*$,Te=qe>>>13,qe&=8191,qe+=fe*w,qe+=re*B,qe+=ie*F,qe+=b*S,qe+=C*(5*pe),Te+=qe>>>13,qe&=8191,xe=Te,xe+=Be*pe,xe+=Le*te,xe+=Ee*V,xe+=z*Y,xe+=j*H,Te=xe>>>13,xe&=8191,xe+=fe*$,xe+=re*w,xe+=ie*B,xe+=b*F,xe+=C*S,Te+=xe>>>13,xe&=8191,Te=(Te<<2)+Te|0,Te=Te+rt|0,rt=Te&8191,Te=Te>>>13,ot+=Te,Be=rt,Le=ot,Ee=ut,z=lt,j=et,fe=ft,re=nt,ie=Ce,b=qe,C=xe,x+=16,_-=16;this.h[0]=Be,this.h[1]=Le,this.h[2]=Ee,this.h[3]=z,this.h[4]=j,this.h[5]=fe,this.h[6]=re,this.h[7]=ie,this.h[8]=b,this.h[9]=C},St.prototype.finish=function(g,x){var _=new Uint16Array(10),d,D,R,U;if(this.leftover){for(U=this.leftover,this.buffer[U++]=1;U<16;U++)this.buffer[U]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(d=this.h[1]>>>13,this.h[1]&=8191,U=2;U<10;U++)this.h[U]+=d,d=this.h[U]>>>13,this.h[U]&=8191;for(this.h[0]+=d*5,d=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=d,d=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=d,_[0]=this.h[0]+5,d=_[0]>>>13,_[0]&=8191,U=1;U<10;U++)_[U]=this.h[U]+d,d=_[U]>>>13,_[U]&=8191;for(_[9]-=1<<13,D=(d^1)-1,U=0;U<10;U++)_[U]&=D;for(D=~D,U=0;U<10;U++)this.h[U]=this.h[U]&D|_[U];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,R=this.h[0]+this.pad[0],this.h[0]=R&65535,U=1;U<8;U++)R=(this.h[U]+this.pad[U]|0)+(R>>>16)|0,this.h[U]=R&65535;g[x+0]=this.h[0]>>>0&255,g[x+1]=this.h[0]>>>8&255,g[x+2]=this.h[1]>>>0&255,g[x+3]=this.h[1]>>>8&255,g[x+4]=this.h[2]>>>0&255,g[x+5]=this.h[2]>>>8&255,g[x+6]=this.h[3]>>>0&255,g[x+7]=this.h[3]>>>8&255,g[x+8]=this.h[4]>>>0&255,g[x+9]=this.h[4]>>>8&255,g[x+10]=this.h[5]>>>0&255,g[x+11]=this.h[5]>>>8&255,g[x+12]=this.h[6]>>>0&255,g[x+13]=this.h[6]>>>8&255,g[x+14]=this.h[7]>>>0&255,g[x+15]=this.h[7]>>>8&255},St.prototype.update=function(g,x,_){var d,D;if(this.leftover){for(D=16-this.leftover,D>_&&(D=_),d=0;d<D;d++)this.buffer[this.leftover+d]=g[x+d];if(_-=D,x+=D,this.leftover+=D,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(_>=16&&(D=_-_%16,this.blocks(g,x,D),x+=D,_-=D),_){for(d=0;d<_;d++)this.buffer[this.leftover+d]=g[x+d];this.leftover+=_}};function $t(g,x,_,d,D,R){var U=new St(R);return U.update(_,d,D),U.finish(g,x),0}function Bt(g,x,_,d,D,R){var U=new Uint8Array(16);return $t(U,0,_,d,D,R),O(g,x,U,0)}function qt(g,x,_,d,D){var R;if(_<32)return-1;for(Ue(g,0,x,0,_,d,D),$t(g,16,g,32,_-32,g),R=0;R<16;R++)g[R]=0;return 0}function yr(g,x,_,d,D){var R,U=new Uint8Array(32);if(_<32||(ge(U,0,32,d,D),Bt(x,16,x,32,_-32,U)!==0))return-1;for(Ue(g,0,x,0,_,d,D),R=0;R<32;R++)g[R]=0;return 0}function Ut(g,x){var _;for(_=0;_<16;_++)g[_]=x[_]|0}function Wr(g){var x,_,d=1;for(x=0;x<16;x++)_=g[x]+d+65535,d=Math.floor(_/65536),g[x]=_-d*65536;g[0]+=d-1+37*(d-1)}function Un(g,x,_){for(var d,D=~(_-1),R=0;R<16;R++)d=D&(g[R]^x[R]),g[R]^=d,x[R]^=d}function Ur(g,x){var _,d,D,R=e(),U=e();for(_=0;_<16;_++)U[_]=x[_];for(Wr(U),Wr(U),Wr(U),d=0;d<2;d++){for(R[0]=U[0]-65517,_=1;_<15;_++)R[_]=U[_]-65535-(R[_-1]>>16&1),R[_-1]&=65535;R[15]=U[15]-32767-(R[14]>>16&1),D=R[15]>>16&1,R[14]&=65535,Un(U,R,1-D)}for(_=0;_<16;_++)g[2*_]=U[_]&255,g[2*_+1]=U[_]>>8}function en(g,x){var _=new Uint8Array(32),d=new Uint8Array(32);return Ur(_,g),Ur(d,x),ce(_,0,d,0)}function ua(g){var x=new Uint8Array(32);return Ur(x,g),x[0]&1}function er(g,x){var _;for(_=0;_<16;_++)g[_]=x[2*_]+(x[2*_+1]<<8);g[15]&=32767}function Ht(g,x,_){for(var d=0;d<16;d++)g[d]=x[d]+_[d]}function Er(g,x,_){for(var d=0;d<16;d++)g[d]=x[d]-_[d]}function Ve(g,x,_){var d,D,R=0,U=0,oe=0,ye=0,Ke=0,Se=0,Dt=0,Te=0,rt=0,ot=0,ut=0,lt=0,et=0,ft=0,nt=0,Ce=0,qe=0,xe=0,Be=0,Le=0,Ee=0,z=0,j=0,fe=0,re=0,ie=0,b=0,C=0,S=0,F=0,B=0,w=_[0],$=_[1],H=_[2],Y=_[3],V=_[4],te=_[5],pe=_[6],ze=_[7],Ne=_[8],Qe=_[9],dt=_[10],pt=_[11],Lt=_[12],hr=_[13],Ar=_[14],$r=_[15];d=x[0],R+=d*w,U+=d*$,oe+=d*H,ye+=d*Y,Ke+=d*V,Se+=d*te,Dt+=d*pe,Te+=d*ze,rt+=d*Ne,ot+=d*Qe,ut+=d*dt,lt+=d*pt,et+=d*Lt,ft+=d*hr,nt+=d*Ar,Ce+=d*$r,d=x[1],U+=d*w,oe+=d*$,ye+=d*H,Ke+=d*Y,Se+=d*V,Dt+=d*te,Te+=d*pe,rt+=d*ze,ot+=d*Ne,ut+=d*Qe,lt+=d*dt,et+=d*pt,ft+=d*Lt,nt+=d*hr,Ce+=d*Ar,qe+=d*$r,d=x[2],oe+=d*w,ye+=d*$,Ke+=d*H,Se+=d*Y,Dt+=d*V,Te+=d*te,rt+=d*pe,ot+=d*ze,ut+=d*Ne,lt+=d*Qe,et+=d*dt,ft+=d*pt,nt+=d*Lt,Ce+=d*hr,qe+=d*Ar,xe+=d*$r,d=x[3],ye+=d*w,Ke+=d*$,Se+=d*H,Dt+=d*Y,Te+=d*V,rt+=d*te,ot+=d*pe,ut+=d*ze,lt+=d*Ne,et+=d*Qe,ft+=d*dt,nt+=d*pt,Ce+=d*Lt,qe+=d*hr,xe+=d*Ar,Be+=d*$r,d=x[4],Ke+=d*w,Se+=d*$,Dt+=d*H,Te+=d*Y,rt+=d*V,ot+=d*te,ut+=d*pe,lt+=d*ze,et+=d*Ne,ft+=d*Qe,nt+=d*dt,Ce+=d*pt,qe+=d*Lt,xe+=d*hr,Be+=d*Ar,Le+=d*$r,d=x[5],Se+=d*w,Dt+=d*$,Te+=d*H,rt+=d*Y,ot+=d*V,ut+=d*te,lt+=d*pe,et+=d*ze,ft+=d*Ne,nt+=d*Qe,Ce+=d*dt,qe+=d*pt,xe+=d*Lt,Be+=d*hr,Le+=d*Ar,Ee+=d*$r,d=x[6],Dt+=d*w,Te+=d*$,rt+=d*H,ot+=d*Y,ut+=d*V,lt+=d*te,et+=d*pe,ft+=d*ze,nt+=d*Ne,Ce+=d*Qe,qe+=d*dt,xe+=d*pt,Be+=d*Lt,Le+=d*hr,Ee+=d*Ar,z+=d*$r,d=x[7],Te+=d*w,rt+=d*$,ot+=d*H,ut+=d*Y,lt+=d*V,et+=d*te,ft+=d*pe,nt+=d*ze,Ce+=d*Ne,qe+=d*Qe,xe+=d*dt,Be+=d*pt,Le+=d*Lt,Ee+=d*hr,z+=d*Ar,j+=d*$r,d=x[8],rt+=d*w,ot+=d*$,ut+=d*H,lt+=d*Y,et+=d*V,ft+=d*te,nt+=d*pe,Ce+=d*ze,qe+=d*Ne,xe+=d*Qe,Be+=d*dt,Le+=d*pt,Ee+=d*Lt,z+=d*hr,j+=d*Ar,fe+=d*$r,d=x[9],ot+=d*w,ut+=d*$,lt+=d*H,et+=d*Y,ft+=d*V,nt+=d*te,Ce+=d*pe,qe+=d*ze,xe+=d*Ne,Be+=d*Qe,Le+=d*dt,Ee+=d*pt,z+=d*Lt,j+=d*hr,fe+=d*Ar,re+=d*$r,d=x[10],ut+=d*w,lt+=d*$,et+=d*H,ft+=d*Y,nt+=d*V,Ce+=d*te,qe+=d*pe,xe+=d*ze,Be+=d*Ne,Le+=d*Qe,Ee+=d*dt,z+=d*pt,j+=d*Lt,fe+=d*hr,re+=d*Ar,ie+=d*$r,d=x[11],lt+=d*w,et+=d*$,ft+=d*H,nt+=d*Y,Ce+=d*V,qe+=d*te,xe+=d*pe,Be+=d*ze,Le+=d*Ne,Ee+=d*Qe,z+=d*dt,j+=d*pt,fe+=d*Lt,re+=d*hr,ie+=d*Ar,b+=d*$r,d=x[12],et+=d*w,ft+=d*$,nt+=d*H,Ce+=d*Y,qe+=d*V,xe+=d*te,Be+=d*pe,Le+=d*ze,Ee+=d*Ne,z+=d*Qe,j+=d*dt,fe+=d*pt,re+=d*Lt,ie+=d*hr,b+=d*Ar,C+=d*$r,d=x[13],ft+=d*w,nt+=d*$,Ce+=d*H,qe+=d*Y,xe+=d*V,Be+=d*te,Le+=d*pe,Ee+=d*ze,z+=d*Ne,j+=d*Qe,fe+=d*dt,re+=d*pt,ie+=d*Lt,b+=d*hr,C+=d*Ar,S+=d*$r,d=x[14],nt+=d*w,Ce+=d*$,qe+=d*H,xe+=d*Y,Be+=d*V,Le+=d*te,Ee+=d*pe,z+=d*ze,j+=d*Ne,fe+=d*Qe,re+=d*dt,ie+=d*pt,b+=d*Lt,C+=d*hr,S+=d*Ar,F+=d*$r,d=x[15],Ce+=d*w,qe+=d*$,xe+=d*H,Be+=d*Y,Le+=d*V,Ee+=d*te,z+=d*pe,j+=d*ze,fe+=d*Ne,re+=d*Qe,ie+=d*dt,b+=d*pt,C+=d*Lt,S+=d*hr,F+=d*Ar,B+=d*$r,R+=38*qe,U+=38*xe,oe+=38*Be,ye+=38*Le,Ke+=38*Ee,Se+=38*z,Dt+=38*j,Te+=38*fe,rt+=38*re,ot+=38*ie,ut+=38*b,lt+=38*C,et+=38*S,ft+=38*F,nt+=38*B,D=1,d=R+D+65535,D=Math.floor(d/65536),R=d-D*65536,d=U+D+65535,D=Math.floor(d/65536),U=d-D*65536,d=oe+D+65535,D=Math.floor(d/65536),oe=d-D*65536,d=ye+D+65535,D=Math.floor(d/65536),ye=d-D*65536,d=Ke+D+65535,D=Math.floor(d/65536),Ke=d-D*65536,d=Se+D+65535,D=Math.floor(d/65536),Se=d-D*65536,d=Dt+D+65535,D=Math.floor(d/65536),Dt=d-D*65536,d=Te+D+65535,D=Math.floor(d/65536),Te=d-D*65536,d=rt+D+65535,D=Math.floor(d/65536),rt=d-D*65536,d=ot+D+65535,D=Math.floor(d/65536),ot=d-D*65536,d=ut+D+65535,D=Math.floor(d/65536),ut=d-D*65536,d=lt+D+65535,D=Math.floor(d/65536),lt=d-D*65536,d=et+D+65535,D=Math.floor(d/65536),et=d-D*65536,d=ft+D+65535,D=Math.floor(d/65536),ft=d-D*65536,d=nt+D+65535,D=Math.floor(d/65536),nt=d-D*65536,d=Ce+D+65535,D=Math.floor(d/65536),Ce=d-D*65536,R+=D-1+37*(D-1),D=1,d=R+D+65535,D=Math.floor(d/65536),R=d-D*65536,d=U+D+65535,D=Math.floor(d/65536),U=d-D*65536,d=oe+D+65535,D=Math.floor(d/65536),oe=d-D*65536,d=ye+D+65535,D=Math.floor(d/65536),ye=d-D*65536,d=Ke+D+65535,D=Math.floor(d/65536),Ke=d-D*65536,d=Se+D+65535,D=Math.floor(d/65536),Se=d-D*65536,d=Dt+D+65535,D=Math.floor(d/65536),Dt=d-D*65536,d=Te+D+65535,D=Math.floor(d/65536),Te=d-D*65536,d=rt+D+65535,D=Math.floor(d/65536),rt=d-D*65536,d=ot+D+65535,D=Math.floor(d/65536),ot=d-D*65536,d=ut+D+65535,D=Math.floor(d/65536),ut=d-D*65536,d=lt+D+65535,D=Math.floor(d/65536),lt=d-D*65536,d=et+D+65535,D=Math.floor(d/65536),et=d-D*65536,d=ft+D+65535,D=Math.floor(d/65536),ft=d-D*65536,d=nt+D+65535,D=Math.floor(d/65536),nt=d-D*65536,d=Ce+D+65535,D=Math.floor(d/65536),Ce=d-D*65536,R+=D-1+37*(D-1),g[0]=R,g[1]=U,g[2]=oe,g[3]=ye,g[4]=Ke,g[5]=Se,g[6]=Dt,g[7]=Te,g[8]=rt,g[9]=ot,g[10]=ut,g[11]=lt,g[12]=et,g[13]=ft,g[14]=nt,g[15]=Ce}function fn(g,x){Ve(g,x,x)}function eo(g,x){var _=e(),d;for(d=0;d<16;d++)_[d]=x[d];for(d=253;d>=0;d--)fn(_,_),d!==2&&d!==4&&Ve(_,_,x);for(d=0;d<16;d++)g[d]=_[d]}function to(g,x){var _=e(),d;for(d=0;d<16;d++)_[d]=x[d];for(d=250;d>=0;d--)fn(_,_),d!==1&&Ve(_,_,x);for(d=0;d<16;d++)g[d]=_[d]}function ks(g,x,_){var d=new Uint8Array(32),D=new Float64Array(80),R,U,oe=e(),ye=e(),Ke=e(),Se=e(),Dt=e(),Te=e();for(U=0;U<31;U++)d[U]=x[U];for(d[31]=x[31]&127|64,d[0]&=248,er(D,_),U=0;U<16;U++)ye[U]=D[U],Se[U]=oe[U]=Ke[U]=0;for(oe[0]=Se[0]=1,U=254;U>=0;--U)R=d[U>>>3]>>>(U&7)&1,Un(oe,ye,R),Un(Ke,Se,R),Ht(Dt,oe,Ke),Er(oe,oe,Ke),Ht(Ke,ye,Se),Er(ye,ye,Se),fn(Se,Dt),fn(Te,oe),Ve(oe,Ke,oe),Ve(Ke,ye,Dt),Ht(Dt,oe,Ke),Er(oe,oe,Ke),fn(ye,oe),Er(Ke,Se,Te),Ve(oe,Ke,u),Ht(oe,oe,Se),Ve(Ke,Ke,oe),Ve(oe,Se,Te),Ve(Se,ye,D),fn(ye,Dt),Un(oe,ye,R),Un(Ke,Se,R);for(U=0;U<16;U++)D[U+16]=oe[U],D[U+32]=Ke[U],D[U+48]=ye[U],D[U+64]=Se[U];var rt=D.subarray(32),ot=D.subarray(16);return eo(rt,rt),Ve(ot,ot,rt),Ur(g,ot),0}function Kr(g,x){return ks(g,x,i)}function ro(g,x){return t(x,32),Kr(g,x)}function Tn(g,x,_){var d=new Uint8Array(32);return ks(d,_,x),me(g,n,d,be)}var tn=qt,Ko=yr;function ac(g,x,_,d,D,R){var U=new Uint8Array(32);return Tn(U,D,R),tn(g,x,_,d,U)}function Kn(g,x,_,d,D,R){var U=new Uint8Array(32);return Tn(U,D,R),Ko(g,x,_,d,U)}var Fn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function cc(g,x,_,d){for(var D=new Int32Array(16),R=new Int32Array(16),U,oe,ye,Ke,Se,Dt,Te,rt,ot,ut,lt,et,ft,nt,Ce,qe,xe,Be,Le,Ee,z,j,fe,re,ie,b,C=g[0],S=g[1],F=g[2],B=g[3],w=g[4],$=g[5],H=g[6],Y=g[7],V=x[0],te=x[1],pe=x[2],ze=x[3],Ne=x[4],Qe=x[5],dt=x[6],pt=x[7],Lt=0;d>=128;){for(Le=0;Le<16;Le++)Ee=8*Le+Lt,D[Le]=_[Ee+0]<<24|_[Ee+1]<<16|_[Ee+2]<<8|_[Ee+3],R[Le]=_[Ee+4]<<24|_[Ee+5]<<16|_[Ee+6]<<8|_[Ee+7];for(Le=0;Le<80;Le++)if(U=C,oe=S,ye=F,Ke=B,Se=w,Dt=$,Te=H,rt=Y,ot=V,ut=te,lt=pe,et=ze,ft=Ne,nt=Qe,Ce=dt,qe=pt,z=Y,j=pt,fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=(w>>>14|Ne<<32-14)^(w>>>18|Ne<<32-18)^(Ne>>>41-32|w<<32-(41-32)),j=(Ne>>>14|w<<32-14)^(Ne>>>18|w<<32-18)^(w>>>41-32|Ne<<32-(41-32)),fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,z=w&$^~w&H,j=Ne&Qe^~Ne&dt,fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,z=Fn[Le*2],j=Fn[Le*2+1],fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,z=D[Le%16],j=R[Le%16],fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,xe=ie&65535|b<<16,Be=fe&65535|re<<16,z=xe,j=Be,fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=(C>>>28|V<<32-28)^(V>>>34-32|C<<32-(34-32))^(V>>>39-32|C<<32-(39-32)),j=(V>>>28|C<<32-28)^(C>>>34-32|V<<32-(34-32))^(C>>>39-32|V<<32-(39-32)),fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,z=C&S^C&F^S&F,j=V&te^V&pe^te&pe,fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,rt=ie&65535|b<<16,qe=fe&65535|re<<16,z=Ke,j=et,fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=xe,j=Be,fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,Ke=ie&65535|b<<16,et=fe&65535|re<<16,S=U,F=oe,B=ye,w=Ke,$=Se,H=Dt,Y=Te,C=rt,te=ot,pe=ut,ze=lt,Ne=et,Qe=ft,dt=nt,pt=Ce,V=qe,Le%16===15)for(Ee=0;Ee<16;Ee++)z=D[Ee],j=R[Ee],fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=D[(Ee+9)%16],j=R[(Ee+9)%16],fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,xe=D[(Ee+1)%16],Be=R[(Ee+1)%16],z=(xe>>>1|Be<<32-1)^(xe>>>8|Be<<32-8)^xe>>>7,j=(Be>>>1|xe<<32-1)^(Be>>>8|xe<<32-8)^(Be>>>7|xe<<32-7),fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,xe=D[(Ee+14)%16],Be=R[(Ee+14)%16],z=(xe>>>19|Be<<32-19)^(Be>>>61-32|xe<<32-(61-32))^xe>>>6,j=(Be>>>19|xe<<32-19)^(xe>>>61-32|Be<<32-(61-32))^(Be>>>6|xe<<32-6),fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,D[Ee]=ie&65535|b<<16,R[Ee]=fe&65535|re<<16;z=C,j=V,fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[0],j=x[0],fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,g[0]=C=ie&65535|b<<16,x[0]=V=fe&65535|re<<16,z=S,j=te,fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[1],j=x[1],fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,g[1]=S=ie&65535|b<<16,x[1]=te=fe&65535|re<<16,z=F,j=pe,fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[2],j=x[2],fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,g[2]=F=ie&65535|b<<16,x[2]=pe=fe&65535|re<<16,z=B,j=ze,fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[3],j=x[3],fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,g[3]=B=ie&65535|b<<16,x[3]=ze=fe&65535|re<<16,z=w,j=Ne,fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[4],j=x[4],fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,g[4]=w=ie&65535|b<<16,x[4]=Ne=fe&65535|re<<16,z=$,j=Qe,fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[5],j=x[5],fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,g[5]=$=ie&65535|b<<16,x[5]=Qe=fe&65535|re<<16,z=H,j=dt,fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[6],j=x[6],fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,g[6]=H=ie&65535|b<<16,x[6]=dt=fe&65535|re<<16,z=Y,j=pt,fe=j&65535,re=j>>>16,ie=z&65535,b=z>>>16,z=g[7],j=x[7],fe+=j&65535,re+=j>>>16,ie+=z&65535,b+=z>>>16,re+=fe>>>16,ie+=re>>>16,b+=ie>>>16,g[7]=Y=ie&65535|b<<16,x[7]=pt=fe&65535|re<<16,Lt+=128,d-=128}return d}function ln(g,x,_){var d=new Int32Array(8),D=new Int32Array(8),R=new Uint8Array(256),U,oe=_;for(d[0]=1779033703,d[1]=3144134277,d[2]=1013904242,d[3]=2773480762,d[4]=1359893119,d[5]=2600822924,d[6]=528734635,d[7]=1541459225,D[0]=4089235720,D[1]=2227873595,D[2]=4271175723,D[3]=1595750129,D[4]=2917565137,D[5]=725511199,D[6]=4215389547,D[7]=327033209,cc(d,D,x,_),_%=128,U=0;U<_;U++)R[U]=x[oe-_+U];for(R[_]=128,_=256-128*(_<112?1:0),R[_-9]=0,k(R,_-8,oe/536870912|0,oe<<3),cc(d,D,R,_),U=0;U<8;U++)k(g,8*U,d[U],D[U]);return 0}function lr(g,x){var _=e(),d=e(),D=e(),R=e(),U=e(),oe=e(),ye=e(),Ke=e(),Se=e();Er(_,g[1],g[0]),Er(Se,x[1],x[0]),Ve(_,_,Se),Ht(d,g[0],g[1]),Ht(Se,x[0],x[1]),Ve(d,d,Se),Ve(D,g[3],x[3]),Ve(D,D,h),Ve(R,g[2],x[2]),Ht(R,R,R),Er(U,d,_),Er(oe,R,D),Ht(ye,R,D),Ht(Ke,d,_),Ve(g[0],U,oe),Ve(g[1],Ke,ye),Ve(g[2],ye,oe),Ve(g[3],U,Ke)}function ni(g,x,_){var d;for(d=0;d<4;d++)Un(g[d],x[d],_)}function ii(g,x){var _=e(),d=e(),D=e();eo(D,x[2]),Ve(_,x[0],D),Ve(d,x[1],D),Ur(g,d),g[31]^=ua(_)<<7}function $o(g,x,_){var d,D;for(Ut(g[0],o),Ut(g[1],a),Ut(g[2],a),Ut(g[3],o),D=255;D>=0;--D)d=_[D/8|0]>>(D&7)&1,ni(g,x,d),lr(x,g),lr(g,g),ni(g,x,d)}function xn(g,x){var _=[e(),e(),e(),e()];Ut(_[0],m),Ut(_[1],y),Ut(_[2],a),Ve(_[3],m,y),$o(g,_,x)}function K(g,x,_){var d=new Uint8Array(64),D=[e(),e(),e(),e()],R;for(_||t(x,32),ln(d,x,32),d[0]&=248,d[31]&=127,d[31]|=64,xn(D,d),ii(g,D),R=0;R<32;R++)x[R+32]=g[R];return 0}var G=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function le(g,x){var _,d,D,R;for(d=63;d>=32;--d){for(_=0,D=d-32,R=d-12;D<R;++D)x[D]+=_-16*x[d]*G[D-(d-32)],_=Math.floor((x[D]+128)/256),x[D]-=_*256;x[D]+=_,x[d]=0}for(_=0,D=0;D<32;D++)x[D]+=_-(x[31]>>4)*G[D],_=x[D]>>8,x[D]&=255;for(D=0;D<32;D++)x[D]-=_*G[D];for(d=0;d<32;d++)x[d+1]+=x[d]>>8,g[d]=x[d]&255}function _e(g){var x=new Float64Array(64),_;for(_=0;_<64;_++)x[_]=g[_];for(_=0;_<64;_++)g[_]=0;le(g,x)}function $e(g,x,_,d){var D=new Uint8Array(64),R=new Uint8Array(64),U=new Uint8Array(64),oe,ye,Ke=new Float64Array(64),Se=[e(),e(),e(),e()];ln(D,d,32),D[0]&=248,D[31]&=127,D[31]|=64;var Dt=_+64;for(oe=0;oe<_;oe++)g[64+oe]=x[oe];for(oe=0;oe<32;oe++)g[32+oe]=D[32+oe];for(ln(U,g.subarray(32),_+32),_e(U),xn(Se,U),ii(g,Se),oe=32;oe<64;oe++)g[oe]=d[oe];for(ln(R,g,_+64),_e(R),oe=0;oe<64;oe++)Ke[oe]=0;for(oe=0;oe<32;oe++)Ke[oe]=U[oe];for(oe=0;oe<32;oe++)for(ye=0;ye<32;ye++)Ke[oe+ye]+=R[oe]*D[ye];return le(g.subarray(32),Ke),Dt}function sr(g,x){var _=e(),d=e(),D=e(),R=e(),U=e(),oe=e(),ye=e();return Ut(g[2],a),er(g[1],x),fn(D,g[1]),Ve(R,D,l),Er(D,D,g[2]),Ht(R,g[2],R),fn(U,R),fn(oe,U),Ve(ye,oe,U),Ve(_,ye,D),Ve(_,_,R),to(_,_),Ve(_,_,D),Ve(_,_,R),Ve(_,_,R),Ve(g[0],_,R),fn(d,g[0]),Ve(d,d,R),en(d,D)&&Ve(g[0],g[0],E),fn(d,g[0]),Ve(d,d,R),en(d,D)?-1:(ua(g[0])===x[31]>>7&&Er(g[0],o,g[0]),Ve(g[3],g[0],g[1]),0)}function tt(g,x,_,d){var D,R=new Uint8Array(32),U=new Uint8Array(64),oe=[e(),e(),e(),e()],ye=[e(),e(),e(),e()];if(_<64||sr(ye,d))return-1;for(D=0;D<_;D++)g[D]=x[D];for(D=0;D<32;D++)g[D+32]=d[D];if(ln(U,g,_),_e(U),$o(oe,ye,U),xn(ye,x.subarray(32)),lr(oe,ye),ii(R,oe),_-=64,ce(x,0,R,0)){for(D=0;D<_;D++)g[D]=0;return-1}for(D=0;D<_;D++)g[D]=x[D+64];return _}var ct=32,He=24,mt=32,ht=16,Cr=32,zo=32,fa=32,jo=32,la=32,Eu=He,no=mt,Yh=ht,vi=64,io=32,qo=64,Au=32,Su=64;r.lowlevel={crypto_core_hsalsa20:me,crypto_stream_xor:Ue,crypto_stream:ge,crypto_stream_salsa20_xor:W,crypto_stream_salsa20:de,crypto_onetimeauth:$t,crypto_onetimeauth_verify:Bt,crypto_verify_16:O,crypto_verify_32:ce,crypto_secretbox:qt,crypto_secretbox_open:yr,crypto_scalarmult:ks,crypto_scalarmult_base:Kr,crypto_box_beforenm:Tn,crypto_box_afternm:tn,crypto_box:ac,crypto_box_open:Kn,crypto_box_keypair:ro,crypto_hash:ln,crypto_sign:$e,crypto_sign_keypair:K,crypto_sign_open:tt,crypto_secretbox_KEYBYTES:ct,crypto_secretbox_NONCEBYTES:He,crypto_secretbox_ZEROBYTES:mt,crypto_secretbox_BOXZEROBYTES:ht,crypto_scalarmult_BYTES:Cr,crypto_scalarmult_SCALARBYTES:zo,crypto_box_PUBLICKEYBYTES:fa,crypto_box_SECRETKEYBYTES:jo,crypto_box_BEFORENMBYTES:la,crypto_box_NONCEBYTES:Eu,crypto_box_ZEROBYTES:no,crypto_box_BOXZEROBYTES:Yh,crypto_sign_BYTES:vi,crypto_sign_PUBLICKEYBYTES:io,crypto_sign_SECRETKEYBYTES:qo,crypto_sign_SEEDBYTES:Au,crypto_hash_BYTES:Su,gf:e,D:l,L:G,pack25519:Ur,unpack25519:er,M:Ve,A:Ht,S:fn,Z:Er,pow2523:to,add:lr,set25519:Ut,modL:le,scalarmult:$o,scalarbase:xn};function el(g,x){if(g.length!==ct)throw new Error("bad key size");if(x.length!==He)throw new Error("bad nonce size")}function Pu(g,x){if(g.length!==fa)throw new Error("bad public key size");if(x.length!==jo)throw new Error("bad secret key size")}function En(){for(var g=0;g<arguments.length;g++)if(!(arguments[g]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function uc(g){for(var x=0;x<g.length;x++)g[x]=0}r.randomBytes=function(g){var x=new Uint8Array(g);return t(x,g),x},r.secretbox=function(g,x,_){En(g,x,_),el(_,x);for(var d=new Uint8Array(mt+g.length),D=new Uint8Array(d.length),R=0;R<g.length;R++)d[R+mt]=g[R];return qt(D,d,d.length,x,_),D.subarray(ht)},r.secretbox.open=function(g,x,_){En(g,x,_),el(_,x);for(var d=new Uint8Array(ht+g.length),D=new Uint8Array(d.length),R=0;R<g.length;R++)d[R+ht]=g[R];return d.length<32||yr(D,d,d.length,x,_)!==0?null:D.subarray(mt)},r.secretbox.keyLength=ct,r.secretbox.nonceLength=He,r.secretbox.overheadLength=ht,r.scalarMult=function(g,x){if(En(g,x),g.length!==zo)throw new Error("bad n size");if(x.length!==Cr)throw new Error("bad p size");var _=new Uint8Array(Cr);return ks(_,g,x),_},r.scalarMult.base=function(g){if(En(g),g.length!==zo)throw new Error("bad n size");var x=new Uint8Array(Cr);return Kr(x,g),x},r.scalarMult.scalarLength=zo,r.scalarMult.groupElementLength=Cr,r.box=function(g,x,_,d){var D=r.box.before(_,d);return r.secretbox(g,x,D)},r.box.before=function(g,x){En(g,x),Pu(g,x);var _=new Uint8Array(la);return Tn(_,g,x),_},r.box.after=r.secretbox,r.box.open=function(g,x,_,d){var D=r.box.before(_,d);return r.secretbox.open(g,x,D)},r.box.open.after=r.secretbox.open,r.box.keyPair=function(){var g=new Uint8Array(fa),x=new Uint8Array(jo);return ro(g,x),{publicKey:g,secretKey:x}},r.box.keyPair.fromSecretKey=function(g){if(En(g),g.length!==jo)throw new Error("bad secret key size");var x=new Uint8Array(fa);return Kr(x,g),{publicKey:x,secretKey:new Uint8Array(g)}},r.box.publicKeyLength=fa,r.box.secretKeyLength=jo,r.box.sharedKeyLength=la,r.box.nonceLength=Eu,r.box.overheadLength=r.secretbox.overheadLength,r.sign=function(g,x){if(En(g,x),x.length!==qo)throw new Error("bad secret key size");var _=new Uint8Array(vi+g.length);return $e(_,g,g.length,x),_},r.sign.open=function(g,x){if(En(g,x),x.length!==io)throw new Error("bad public key size");var _=new Uint8Array(g.length),d=tt(_,g,g.length,x);if(d<0)return null;for(var D=new Uint8Array(d),R=0;R<D.length;R++)D[R]=_[R];return D},r.sign.detached=function(g,x){for(var _=r.sign(g,x),d=new Uint8Array(vi),D=0;D<d.length;D++)d[D]=_[D];return d},r.sign.detached.verify=function(g,x,_){if(En(g,x,_),x.length!==vi)throw new Error("bad signature size");if(_.length!==io)throw new Error("bad public key size");var d=new Uint8Array(vi+g.length),D=new Uint8Array(vi+g.length),R;for(R=0;R<vi;R++)d[R]=x[R];for(R=0;R<g.length;R++)d[R+vi]=g[R];return tt(D,d,d.length,_)>=0},r.sign.keyPair=function(){var g=new Uint8Array(io),x=new Uint8Array(qo);return K(g,x),{publicKey:g,secretKey:x}},r.sign.keyPair.fromSecretKey=function(g){if(En(g),g.length!==qo)throw new Error("bad secret key size");for(var x=new Uint8Array(io),_=0;_<x.length;_++)x[_]=g[32+_];return{publicKey:x,secretKey:new Uint8Array(g)}},r.sign.keyPair.fromSeed=function(g){if(En(g),g.length!==Au)throw new Error("bad seed size");for(var x=new Uint8Array(io),_=new Uint8Array(qo),d=0;d<32;d++)_[d]=g[d];return K(x,_,!0),{publicKey:x,secretKey:_}},r.sign.publicKeyLength=io,r.sign.secretKeyLength=qo,r.sign.seedLength=Au,r.sign.signatureLength=vi,r.hash=function(g){En(g);var x=new Uint8Array(Su);return ln(x,g,g.length),x},r.hash.hashLength=Su,r.verify=function(g,x){return En(g,x),g.length===0||x.length===0||g.length!==x.length?!1:T(g,0,x,0,g.length)===0},r.setPRNG=function(g){t=g},function(){var g=typeof self<"u"?self.crypto||self.msCrypto:null;if(g&&g.getRandomValues){var x=65536;r.setPRNG(function(_,d){var D,R=new Uint8Array(d);for(D=0;D<d;D+=x)g.getRandomValues(R.subarray(D,D+Math.min(d-D,x)));for(D=0;D<d;D++)_[D]=R[D];uc(R)})}else typeof Nu<"u"&&(g=o_(),g&&g.randomBytes&&r.setPRNG(function(_,d){var D,R=g.randomBytes(d);for(D=0;D<d;D++)_[D]=R[D];uc(R)}))}()})(typeof Gy<"u"&&Gy.exports?Gy.exports:self.nacl=self.nacl||{})});var tD=ee((hie,eD)=>{eD.exports=e1;var Z3=128,nz=127,iz=~nz,oz=Math.pow(2,31);function e1(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw e1.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=oz;)e[t++]=r&255|Z3,r/=128;for(;r&iz;)e[t++]=r&255|Z3,r>>>=7;return e[t]=r|0,e1.bytes=t-n+1,e}});var iD=ee((die,nD)=>{nD.exports=t1;var sz=128,rD=127;function t1(r,n){var t=0,n=n||0,i=0,o=n,a,u=r.length;do{if(o>=u||i>49)throw t1.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&rD)<<i:(a&rD)*Math.pow(2,i),i+=7}while(a>=sz);return t1.bytes=o-n,t}});var sD=ee((pie,oD)=>{var az=Math.pow(2,7),cz=Math.pow(2,14),uz=Math.pow(2,21),fz=Math.pow(2,28),lz=Math.pow(2,35),hz=Math.pow(2,42),dz=Math.pow(2,49),pz=Math.pow(2,56),mz=Math.pow(2,63);oD.exports=function(r){return r<az?1:r<cz?2:r<uz?3:r<fz?4:r<lz?5:r<hz?6:r<dz?7:r<pz?8:r<mz?9:10}});var $c=ee((mie,aD)=>{aD.exports={encode:tD(),decode:iD(),encodingLength:sD()}});var So=ee((Cie,yD)=>{"use strict";function mD(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function kz(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return mD(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),mD(new i,t)}}yD.exports=kz});var HD=ee((Aoe,qD)=>{var zl=1e3,jl=zl*60,ql=jl*60,tf=ql*24,qj=tf*7,Hj=tf*365.25;qD.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Wj(r);if(t==="number"&&isFinite(r))return e.long?Gj(r):Vj(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Wj(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Hj;case"weeks":case"week":case"w":return t*qj;case"days":case"day":case"d":return t*tf;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ql;case"minutes":case"minute":case"mins":case"min":case"m":return t*jl;case"seconds":case"second":case"secs":case"sec":case"s":return t*zl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Vj(r){var e=Math.abs(r);return e>=tf?Math.round(r/tf)+"d":e>=ql?Math.round(r/ql)+"h":e>=jl?Math.round(r/jl)+"m":e>=zl?Math.round(r/zl)+"s":r+"ms"}function Gj(r){var e=Math.abs(r);return e>=tf?Ug(r,e,tf,"day"):e>=ql?Ug(r,e,ql,"hour"):e>=jl?Ug(r,e,jl,"minute"):e>=zl?Ug(r,e,zl,"second"):r+" ms"}function Ug(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var VD=ee((Soe,WD)=>{function Yj(r){t.debug=t,t.default=t,t.coerce=l,t.disable=o,t.enable=i,t.enabled=a,t.humanize=HD(),t.destroy=h,Object.keys(r).forEach(m=>{t[m]=r[m]}),t.names=[],t.skips=[],t.formatters={};function e(m){let y=0;for(let E=0;E<m.length;E++)y=(y<<5)-y+m.charCodeAt(E),y|=0;return t.colors[Math.abs(y)%t.colors.length]}t.selectColor=e;function t(m){let y,E=null,k,T;function O(...ce){if(!O.enabled)return;let ne=O,ve=Number(new Date),X=ve-(y||ve);ne.diff=X,ne.prev=y,ne.curr=ve,y=ve,ce[0]=t.coerce(ce[0]),typeof ce[0]!="string"&&ce.unshift("%O");let me=0;ce[0]=ce[0].replace(/%([a-zA-Z%])/g,(W,de)=>{if(W==="%%")return"%";me++;let ge=t.formatters[de];if(typeof ge=="function"){let Ue=ce[me];W=ge.call(ne,Ue),ce.splice(me,1),me--}return W}),t.formatArgs.call(ne,ce),(ne.log||t.log).apply(ne,ce)}return O.namespace=m,O.useColors=t.useColors(),O.color=t.selectColor(m),O.extend=n,O.destroy=t.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(k!==t.namespaces&&(k=t.namespaces,T=t.enabled(m)),T),set:ce=>{E=ce}}),typeof t.init=="function"&&t.init(O),O}function n(m,y){let E=t(this.namespace+(typeof y>"u"?":":y)+m);return E.log=this.log,E}function i(m){t.save(m),t.namespaces=m,t.names=[],t.skips=[];let y,E=(typeof m=="string"?m:"").split(/[\s,]+/),k=E.length;for(y=0;y<k;y++)!E[y]||(m=E[y].replace(/\*/g,".*?"),m[0]==="-"?t.skips.push(new RegExp("^"+m.slice(1)+"$")):t.names.push(new RegExp("^"+m+"$")))}function o(){let m=[...t.names.map(u),...t.skips.map(u).map(y=>"-"+y)].join(",");return t.enable(""),m}function a(m){if(m[m.length-1]==="*")return!0;let y,E;for(y=0,E=t.skips.length;y<E;y++)if(t.skips[y].test(m))return!1;for(y=0,E=t.names.length;y<E;y++)if(t.names[y].test(m))return!0;return!1}function u(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function l(m){return m instanceof Error?m.stack||m.message:m}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}WD.exports=Yj});var fs=ee((Mi,Kg)=>{Mi.formatArgs=Xj;Mi.save=Qj;Mi.load=Zj;Mi.useColors=Jj;Mi.storage=eq();Mi.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Mi.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Jj(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Xj(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Kg.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Mi.log=console.debug||console.log||(()=>{});function Qj(r){try{r?Mi.storage.setItem("debug",r):Mi.storage.removeItem("debug")}catch{}}function Zj(){let r;try{r=Mi.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function eq(){try{return localStorage}catch{}}Kg.exports=VD()(Mi);var{formatters:tq}=Kg.exports;tq.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var k1=ee((Loe,YD)=>{"use strict";var oq=async r=>{let e=0;for await(let t of r)e++;return e};YD.exports=oq});var lC=ee((Joe,fC)=>{"use strict";fC.exports=vq;function vq(r,e){for(var t=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)t[n++]=arguments[i++];return new Promise(function(u,l){t[n]=function(m){if(o)if(o=!1,m)l(m);else{for(var y=new Array(arguments.length-1),E=0;E<y.length;)y[E++]=arguments[E];u.apply(null,y)}};try{r.apply(e||null,t)}catch(h){o&&(o=!1,l(h))}})}});var mC=ee(pC=>{"use strict";var Hg=pC;Hg.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Wl=new Array(64),dC=new Array(123);for(ls=0;ls<64;)dC[Wl[ls]=ls<26?ls+65:ls<52?ls+71:ls<62?ls-4:ls-59|43]=ls++;var ls;Hg.encode=function(e,t,n){for(var i=null,o=[],a=0,u=0,l;t<n;){var h=e[t++];switch(u){case 0:o[a++]=Wl[h>>2],l=(h&3)<<4,u=1;break;case 1:o[a++]=Wl[l|h>>4],l=(h&15)<<2,u=2;break;case 2:o[a++]=Wl[l|h>>6],o[a++]=Wl[h&63],u=0;break}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0)}return u&&(o[a++]=Wl[l],o[a++]=61,u===1&&(o[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var hC="invalid encoding";Hg.decode=function(e,t,n){for(var i=n,o=0,a,u=0;u<e.length;){var l=e.charCodeAt(u++);if(l===61&&o>1)break;if((l=dC[l])===void 0)throw Error(hC);switch(o){case 0:a=l,o=1;break;case 1:t[n++]=a<<2|(l&48)>>4,a=l,o=2;break;case 2:t[n++]=(a&15)<<4|(l&60)>>2,a=l,o=3;break;case 3:t[n++]=(a&3)<<6|l,o=0;break}}if(o===1)throw Error(hC);return n-i};Hg.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var gC=ee((Qoe,yC)=>{"use strict";yC.exports=Wg;function Wg(){this._listeners={}}Wg.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};Wg.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this};Wg.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}});var AC=ee((Zoe,EC)=>{"use strict";EC.exports=wC(wC);function wC(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(l,h,m){e[0]=l,h[m]=t[0],h[m+1]=t[1],h[m+2]=t[2],h[m+3]=t[3]}function o(l,h,m){e[0]=l,h[m]=t[3],h[m+1]=t[2],h[m+2]=t[1],h[m+3]=t[0]}r.writeFloatLE=n?i:o,r.writeFloatBE=n?o:i;function a(l,h){return t[0]=l[h],t[1]=l[h+1],t[2]=l[h+2],t[3]=l[h+3],e[0]}function u(l,h){return t[3]=l[h],t[2]=l[h+1],t[1]=l[h+2],t[0]=l[h+3],e[0]}r.readFloatLE=n?a:u,r.readFloatBE=n?u:a}():function(){function e(n,i,o,a){var u=i<0?1:0;if(u&&(i=-i),i===0)n(1/i>0?0:2147483648,o,a);else if(isNaN(i))n(2143289344,o,a);else if(i>34028234663852886e22)n((u<<31|2139095040)>>>0,o,a);else if(i<11754943508222875e-54)n((u<<31|Math.round(i/1401298464324817e-60))>>>0,o,a);else{var l=Math.floor(Math.log(i)/Math.LN2),h=Math.round(i*Math.pow(2,-l)*8388608)&8388607;n((u<<31|l+127<<23|h)>>>0,o,a)}}r.writeFloatLE=e.bind(null,bC),r.writeFloatBE=e.bind(null,vC);function t(n,i,o){var a=n(i,o),u=(a>>31)*2+1,l=a>>>23&255,h=a&8388607;return l===255?h?NaN:u*(1/0):l===0?u*1401298464324817e-60*h:u*Math.pow(2,l-150)*(h+8388608)}r.readFloatLE=t.bind(null,_C),r.readFloatBE=t.bind(null,xC)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(l,h,m){e[0]=l,h[m]=t[0],h[m+1]=t[1],h[m+2]=t[2],h[m+3]=t[3],h[m+4]=t[4],h[m+5]=t[5],h[m+6]=t[6],h[m+7]=t[7]}function o(l,h,m){e[0]=l,h[m]=t[7],h[m+1]=t[6],h[m+2]=t[5],h[m+3]=t[4],h[m+4]=t[3],h[m+5]=t[2],h[m+6]=t[1],h[m+7]=t[0]}r.writeDoubleLE=n?i:o,r.writeDoubleBE=n?o:i;function a(l,h){return t[0]=l[h],t[1]=l[h+1],t[2]=l[h+2],t[3]=l[h+3],t[4]=l[h+4],t[5]=l[h+5],t[6]=l[h+6],t[7]=l[h+7],e[0]}function u(l,h){return t[7]=l[h],t[6]=l[h+1],t[5]=l[h+2],t[4]=l[h+3],t[3]=l[h+4],t[2]=l[h+5],t[1]=l[h+6],t[0]=l[h+7],e[0]}r.readDoubleLE=n?a:u,r.readDoubleBE=n?u:a}():function(){function e(n,i,o,a,u,l){var h=a<0?1:0;if(h&&(a=-a),a===0)n(0,u,l+i),n(1/a>0?0:2147483648,u,l+o);else if(isNaN(a))n(0,u,l+i),n(2146959360,u,l+o);else if(a>17976931348623157e292)n(0,u,l+i),n((h<<31|2146435072)>>>0,u,l+o);else{var m;if(a<22250738585072014e-324)m=a/5e-324,n(m>>>0,u,l+i),n((h<<31|m/4294967296)>>>0,u,l+o);else{var y=Math.floor(Math.log(a)/Math.LN2);y===1024&&(y=1023),m=a*Math.pow(2,-y),n(m*4503599627370496>>>0,u,l+i),n((h<<31|y+1023<<20|m*1048576&1048575)>>>0,u,l+o)}}}r.writeDoubleLE=e.bind(null,bC,0,4),r.writeDoubleBE=e.bind(null,vC,4,0);function t(n,i,o,a,u){var l=n(a,u+i),h=n(a,u+o),m=(h>>31)*2+1,y=h>>>20&2047,E=4294967296*(h&1048575)+l;return y===2047?E?NaN:m*(1/0):y===0?m*5e-324*E:m*Math.pow(2,y-1075)*(E+4503599627370496)}r.readDoubleLE=t.bind(null,_C,0,4),r.readDoubleBE=t.bind(null,xC,4,0)}(),r}function bC(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function vC(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function _C(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function xC(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var SC=ee((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var DC=ee(PC=>{"use strict";var T1=PC;T1.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};T1.read=function(e,t,n){var i=n-t;if(i<1)return"";for(var o=null,a=[],u=0,l;t<n;)l=e[t++],l<128?a[u++]=l:l>191&&l<224?a[u++]=(l&31)<<6|e[t++]&63:l>239&&l<365?(l=((l&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,a[u++]=55296+(l>>10),a[u++]=56320+(l&1023)):a[u++]=(l&15)<<12|(e[t++]&63)<<6|e[t++]&63,u>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),u=0);return o?(u&&o.push(String.fromCharCode.apply(String,a.slice(0,u))),o.join("")):String.fromCharCode.apply(String,a.slice(0,u))};T1.write=function(e,t,n){for(var i=n,o,a,u=0;u<e.length;++u)o=e.charCodeAt(u),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&((a=e.charCodeAt(u+1))&64512)===56320?(o=65536+((o&1023)<<10)+(a&1023),++u,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128);return n-i}});var kC=ee((tse,CC)=>{"use strict";CC.exports=_q;function _q(r,e,t){var n=t||8192,i=n>>>1,o=null,a=n;return function(l){if(l<1||l>i)return r(l);a+l>n&&(o=r(n),a=0);var h=e.call(o,a,a+=l);return a&7&&(a=(a|7)+1),h}}});var TC=ee((rse,IC)=>{"use strict";IC.exports=wn;var up=Hc();function wn(r,e){this.lo=r>>>0,this.hi=e>>>0}var rf=wn.zero=new wn(0,0);rf.toNumber=function(){return 0};rf.zzEncode=rf.zzDecode=function(){return this};rf.length=function(){return 1};var xq=wn.zeroHash="\0\0\0\0\0\0\0\0";wn.fromNumber=function(e){if(e===0)return rf;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new wn(n,i)};wn.from=function(e){if(typeof e=="number")return wn.fromNumber(e);if(up.isString(e))if(up.Long)e=up.Long.fromString(e);else return wn.fromNumber(parseInt(e,10));return e.low||e.high?new wn(e.low>>>0,e.high>>>0):rf};wn.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};wn.prototype.toLong=function(e){return up.Long?new up.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var qc=String.prototype.charCodeAt;wn.fromHash=function(e){return e===xq?rf:new wn((qc.call(e,0)|qc.call(e,1)<<8|qc.call(e,2)<<16|qc.call(e,3)<<24)>>>0,(qc.call(e,4)|qc.call(e,5)<<8|qc.call(e,6)<<16|qc.call(e,7)<<24)>>>0)};wn.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};wn.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};wn.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};wn.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var Hc=ee(F1=>{"use strict";var Je=F1;Je.asPromise=lC();Je.base64=mC();Je.EventEmitter=gC();Je.float=AC();Je.inquire=SC();Je.utf8=DC();Je.pool=kC();Je.LongBits=TC();Je.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);Je.global=Je.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||F1;Je.emptyArray=Object.freeze?Object.freeze([]):[];Je.emptyObject=Object.freeze?Object.freeze({}):{};Je.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Je.isString=function(e){return typeof e=="string"||e instanceof String};Je.isObject=function(e){return e&&typeof e=="object"};Je.isset=Je.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};Je.Buffer=function(){try{var r=Je.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();Je._Buffer_from=null;Je._Buffer_allocUnsafe=null;Je.newBuffer=function(e){return typeof e=="number"?Je.Buffer?Je._Buffer_allocUnsafe(e):new Je.Array(e):Je.Buffer?Je._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};Je.Array=typeof Uint8Array<"u"?Uint8Array:Array;Je.Long=Je.global.dcodeIO&&Je.global.dcodeIO.Long||Je.global.Long||Je.inquire("long");Je.key2Re=/^true|false|0|1$/;Je.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Je.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Je.longToHash=function(e){return e?Je.LongBits.from(e).toHash():Je.LongBits.zeroHash};Je.longFromHash=function(e,t){var n=Je.LongBits.fromHash(e);return Je.Long?Je.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function FC(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}Je.merge=FC;Je.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function BC(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&FC(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}Je.newError=BC;Je.ProtocolError=BC("ProtocolError");Je.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(t[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};Je.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};Je.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Je._configure=function(){var r=Je.Buffer;if(!r){Je._Buffer_from=Je._Buffer_allocUnsafe=null;return}Je._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},Je._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var U1=ee((ise,RC)=>{"use strict";RC.exports=Mt;var Po=Hc(),B1,Vg=Po.LongBits,LC=Po.base64,OC=Po.utf8;function fp(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function O1(){}function Eq(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function Mt(){this.len=0,this.head=new fp(O1,0,0),this.tail=this.head,this.states=null}var NC=function(){return Po.Buffer?function(){return(Mt.create=function(){return new B1})()}:function(){return new Mt}};Mt.create=NC();Mt.alloc=function(e){return new Po.Array(e)};Po.Array!==Array&&(Mt.alloc=Po.pool(Mt.alloc,Po.Array.prototype.subarray));Mt.prototype._push=function(e,t,n){return this.tail=this.tail.next=new fp(e,t,n),this.len+=t,this};function N1(r,e,t){e[t]=r&255}function Aq(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function R1(r,e){this.len=r,this.next=void 0,this.val=e}R1.prototype=Object.create(fp.prototype);R1.prototype.fn=Aq;Mt.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new R1((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Mt.prototype.int32=function(e){return e<0?this._push(M1,10,Vg.fromNumber(e)):this.uint32(e)};Mt.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function M1(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}Mt.prototype.uint64=function(e){var t=Vg.from(e);return this._push(M1,t.length(),t)};Mt.prototype.int64=Mt.prototype.uint64;Mt.prototype.sint64=function(e){var t=Vg.from(e).zzEncode();return this._push(M1,t.length(),t)};Mt.prototype.bool=function(e){return this._push(N1,1,e?1:0)};function L1(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}Mt.prototype.fixed32=function(e){return this._push(L1,4,e>>>0)};Mt.prototype.sfixed32=Mt.prototype.fixed32;Mt.prototype.fixed64=function(e){var t=Vg.from(e);return this._push(L1,4,t.lo)._push(L1,4,t.hi)};Mt.prototype.sfixed64=Mt.prototype.fixed64;Mt.prototype.float=function(e){return this._push(Po.float.writeFloatLE,4,e)};Mt.prototype.double=function(e){return this._push(Po.float.writeDoubleLE,8,e)};var Sq=Po.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};Mt.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(N1,1,0);if(Po.isString(e)){var n=Mt.alloc(t=LC.length(e));LC.decode(e,n,0),e=n}return this.uint32(t)._push(Sq,t,e)};Mt.prototype.string=function(e){var t=OC.length(e);return t?this.uint32(t)._push(OC.write,t,e):this._push(N1,1,0)};Mt.prototype.fork=function(){return this.states=new Eq(this),this.head=this.tail=new fp(O1,0,0),this.len=0,this};Mt.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new fp(O1,0,0),this.len=0),this};Mt.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};Mt.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};Mt._configure=function(r){B1=r,Mt.create=NC(),B1._configure()}});var KC=ee((ose,UC)=>{"use strict";UC.exports=Js;var MC=U1();(Js.prototype=Object.create(MC.prototype)).constructor=Js;var Wc=Hc();function Js(){MC.call(this)}Js._configure=function(){Js.alloc=Wc._Buffer_allocUnsafe,Js.writeBytesBuffer=Wc.Buffer&&Wc.Buffer.prototype instanceof Uint8Array&&Wc.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};Js.prototype.bytes=function(e){Wc.isString(e)&&(e=Wc._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(Js.writeBytesBuffer,t,e),this};function Pq(r,e,t){r.length<40?Wc.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}Js.prototype.string=function(e){var t=Wc.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Pq,t,e),this};Js._configure()});var z1=ee((sse,HC)=>{"use strict";HC.exports=qr;var Xs=Hc(),$1,jC=Xs.LongBits,Dq=Xs.utf8;function hs(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function qr(r){this.buf=r,this.pos=0,this.len=r.length}var $C=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new qr(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new qr(e);throw Error("illegal buffer")},qC=function(){return Xs.Buffer?function(t){return(qr.create=function(i){return Xs.Buffer.isBuffer(i)?new $1(i):$C(i)})(t)}:$C};qr.create=qC();qr.prototype._slice=Xs.Array.prototype.subarray||Xs.Array.prototype.slice;qr.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,hs(this,10);return e}}();qr.prototype.int32=function(){return this.uint32()|0};qr.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function K1(){var r=new jC(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw hs(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw hs(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}qr.prototype.bool=function(){return this.uint32()!==0};function Gg(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}qr.prototype.fixed32=function(){if(this.pos+4>this.len)throw hs(this,4);return Gg(this.buf,this.pos+=4)};qr.prototype.sfixed32=function(){if(this.pos+4>this.len)throw hs(this,4);return Gg(this.buf,this.pos+=4)|0};function zC(){if(this.pos+8>this.len)throw hs(this,8);return new jC(Gg(this.buf,this.pos+=4),Gg(this.buf,this.pos+=4))}qr.prototype.float=function(){if(this.pos+4>this.len)throw hs(this,4);var e=Xs.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};qr.prototype.double=function(){if(this.pos+8>this.len)throw hs(this,4);var e=Xs.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};qr.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw hs(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};qr.prototype.string=function(){var e=this.bytes();return Dq.read(e,0,e.length)};qr.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw hs(this,e);this.pos+=e}else do if(this.pos>=this.len)throw hs(this);while(this.buf[this.pos++]&128);return this};qr.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};qr._configure=function(r){$1=r,qr.create=qC(),$1._configure();var e=Xs.Long?"toLong":"toNumber";Xs.merge(qr.prototype,{int64:function(){return K1.call(this)[e](!1)},uint64:function(){return K1.call(this)[e](!0)},sint64:function(){return K1.call(this).zzDecode()[e](!1)},fixed64:function(){return zC.call(this)[e](!0)},sfixed64:function(){return zC.call(this)[e](!1)}})}});var YC=ee((ase,GC)=>{"use strict";GC.exports=nf;var VC=z1();(nf.prototype=Object.create(VC.prototype)).constructor=nf;var WC=Hc();function nf(r){VC.call(this,r)}nf._configure=function(){WC.Buffer&&(nf.prototype._slice=WC.Buffer.prototype.slice)};nf.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};nf._configure()});var XC=ee((cse,JC)=>{"use strict";JC.exports=lp;var j1=Hc();(lp.prototype=Object.create(j1.EventEmitter.prototype)).constructor=lp;function lp(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");j1.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}lp.prototype.rpcCall=function r(e,t,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return j1.asPromise(r,a,e,t,n,i);if(!a.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return a.rpcImpl(e,t[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(l,h){if(l)return a.emit("error",l,e),o(l);if(h===null){a.end(!0);return}if(!(h instanceof n))try{h=n[a.responseDelimited?"decodeDelimited":"decode"](h)}catch(m){return a.emit("error",m,e),o(m)}return a.emit("data",h,e),o(null,h)})}catch(u){a.emit("error",u,e),setTimeout(function(){o(u)},0);return}};lp.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var ZC=ee(QC=>{"use strict";var Cq=QC;Cq.Service=XC()});var tk=ee((fse,ek)=>{"use strict";ek.exports={}});var ik=ee(nk=>{"use strict";var li=nk;li.build="minimal";li.Writer=U1();li.BufferWriter=KC();li.Reader=z1();li.BufferReader=YC();li.util=Hc();li.rpc=ZC();li.roots=tk();li.configure=rk;function rk(){li.util._configure(),li.Writer._configure(li.BufferWriter),li.Reader._configure(li.BufferReader)}rk()});var Vc=ee((hse,ok)=>{"use strict";ok.exports=ik()});var uk=ee((q1,ck)=>{"use strict";Object.defineProperty(q1,"__esModule",{value:!0});Jg.BASE=2166136261;function Jg(r,e=Jg.BASE){let t=r.length;for(let n=0;n<t;n++)e^=r.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}q1.default=Jg;ck.exports=Jg});var Ck=ee((Gse,Dk)=>{"use strict";var Pk="[a-fA-F\\d:]",Jc=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${Pk})|(?<=${Pk})(?=\\s|$))`:"",ps="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Zr="[a-fA-F\\d]{1,4}",iw=`
(?:
(?:${Zr}:){7}(?:${Zr}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Zr}:){6}(?:${ps}|:${Zr}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Zr}:){5}(?::${ps}|(?::${Zr}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Zr}:){4}(?:(?::${Zr}){0,1}:${ps}|(?::${Zr}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Zr}:){3}(?:(?::${Zr}){0,2}:${ps}|(?::${Zr}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Zr}:){2}(?:(?::${Zr}){0,3}:${ps}|(?::${Zr}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Zr}:){1}(?:(?::${Zr}){0,4}:${ps}|(?::${Zr}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${Zr}){0,5}:${ps}|(?::${Zr}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Wq=new RegExp(`(?:^${ps}$)|(?:^${iw}$)`),Vq=new RegExp(`^${ps}$`),Gq=new RegExp(`^${iw}$`),ix=r=>r&&r.exact?Wq:new RegExp(`(?:${Jc(r)}${ps}${Jc(r)})|(?:${Jc(r)}${iw}${Jc(r)})`,"g");ix.v4=r=>r&&r.exact?Vq:new RegExp(`${Jc(r)}${ps}${Jc(r)}`,"g");ix.v6=r=>r&&r.exact?Gq:new RegExp(`${Jc(r)}${iw}${Jc(r)}`,"g");Dk.exports=ix});var Ik=ee((Yse,kk)=>{"use strict";var ox=Ck(),Jl=r=>ox({exact:!0}).test(r);Jl.v4=r=>ox.v4({exact:!0}).test(r);Jl.v6=r=>ox.v6({exact:!0}).test(r);Jl.version=r=>Jl(r)?Jl.v4(r)?4:6:void 0;kk.exports=Jl});var Ok=ee((Jse,Lk)=>{"use strict";var ax=Ik(),{toString:Tk}=(Dn(),qn(Ad)),Yq=ax,sx=ax.v4,Fk=ax.v6,Bk=function(r,e,t){t=~~t;let n;if(sx(r))n=e||new Uint8Array(t+4),r.split(/\./g).map(function(i){n[t++]=parseInt(i,10)&255});else if(Fk(r)){let i=r.split(":",8),o;for(o=0;o<i.length;o++){let a=sx(i[o]),u;a&&(u=Bk(i[o]),i[o]=Tk(u.slice(0,2),"base16")),u&&++o<8&&i.splice(o,0,Tk(u.slice(2,4),"base16"))}if(i[0]==="")for(;i.length<8;)i.unshift("0");else if(i[i.length-1]==="")for(;i.length<8;)i.push("0");else if(i.length<8){for(o=0;o<i.length&&i[o]!=="";o++);let a=[o,"1"];for(o=9-i.length;o>0;o--)a.push("0");i.splice.apply(i,a)}for(n=e||new Uint8Array(t+16),o=0;o<i.length;o++){let a=parseInt(i[o],16);n[t++]=a>>8&255,n[t++]=a&255}}if(!n)throw Error("Invalid ip address: "+r);return n},Jq=function(r,e,t){e=~~e,t=t||r.length-e;let n=[],i,o=new DataView(r.buffer);if(t===4){for(let a=0;a<t;a++)n.push(r[e+a]);i=n.join(".")}else if(t===16){for(let a=0;a<t;a+=2)n.push(o.getUint16(e+a).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};Lk.exports={isIP:Yq,isV4:sx,isV6:Fk,toBytes:Bk,toString:Jq}});var ow=ee((Xse,Rk)=>{"use strict";function hi(r){if(typeof r=="number"){if(hi.codes[r])return hi.codes[r];throw new Error("no protocol with code: "+r)}else if(typeof r=="string"){if(hi.names[r])return hi.names[r];throw new Error("no protocol with name: "+r)}throw new Error("invalid protocol id type: "+r)}var Co=-1;hi.lengthPrefixedVarSize=Co;hi.V=Co;hi.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Co,"ip6zone"],[53,Co,"dns","resolvable"],[54,Co,"dns4","resolvable"],[55,Co,"dns6","resolvable"],[56,Co,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Co,"unix",!1,"path"],[421,Co,"ipfs"],[421,Co,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Co,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Co,"memory"]];hi.names={};hi.codes={};hi.table.map(r=>{let e=Nk.apply(null,r);return hi.codes[e.code]=e,hi.names[e.name]=e,null});hi.object=Nk;function Nk(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}Rk.exports=hi});var Hk=ee((Qse,qk)=>{"use strict";var sw=Ok(),Kk=ow(),{CID:Xq}=(cr(),qn(Uv)),{base32:$k}=(Qo(),qn(Sy)),{base58btc:Qq}=(Ec(),qn(bd)),Zq=(Zo(),qn(po)),Xl=$c(),{toString:aw}=(Dn(),qn(Ad)),{fromString:zk}=(mo(),qn(vP)),{concat:cw}=(Ku(),qn(mv));qk.exports=yp;function yp(r,e){return e instanceof Uint8Array?yp.toString(r,e):yp.toBytes(r,e)}yp.toString=function(e,t){switch(Kk(e).code){case 4:case 41:return eH(t);case 6:case 273:case 33:case 132:return jk(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return rH(t);case 421:return iH(t);case 444:return Uk(t);case 445:return Uk(t);default:return aw(t,"base16")}};yp.toBytes=function(e,t){switch(Kk(e).code){case 4:return Mk(t);case 41:return Mk(t);case 6:case 273:case 33:case 132:return cx(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return tH(t);case 421:return nH(t);case 444:return oH(t);case 445:return sH(t);default:return zk(t,"base16")}};function Mk(r){if(!sw.isIP(r))throw new Error("invalid ip address");return sw.toBytes(r)}function eH(r){let e=sw.toString(r);if(!e||!sw.isIP(e))throw new Error("invalid ip address");return e}function cx(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function jk(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function tH(r){let e=zk(r),t=Uint8Array.from(Xl.encode(e.length));return cw([t,e],t.length+e.length)}function rH(r){let e=Xl.decode(r);if(r=r.slice(Xl.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return aw(r)}function nH(r){let e;r[0]==="Q"||r[0]==="1"?e=Zq.decode(Qq.decode(`z${r}`)).bytes:e=Xq.parse(r).multihash.bytes;let t=Uint8Array.from(Xl.encode(e.length));return cw([t,e],t.length+e.length)}function iH(r){let e=Xl.decode(r),t=r.slice(Xl.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return aw(t,"base58btc")}function oH(r){let e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let t=$k.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=cx(n);return cw([t,i],t.length+i.length)}function sH(r){let e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let t=$k.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=cx(n);return cw([t,i],t.length+i.length)}function Uk(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=aw(e,"base32"),i=jk(t);return n+":"+i}});var nI=ee((Zse,rI)=>{"use strict";var Vk=Hk(),ux=ow(),gp=$c(),{concat:Wk}=(Ku(),qn(mv)),{toString:aH}=(Dn(),qn(Ad));rI.exports={stringToStringTuples:Gk,stringTuplesToString:Yk,tuplesToStringTuples:Xk,stringTuplesToTuples:Jk,bytesToTuples:fx,tuplesToBytes:Qk,bytesToString:cH,stringToBytes:eI,fromString:uH,fromBytes:tI,validateBytes:lx,isValidBytes:fH,cleanPath:uw,ParseError:hx,protoFromTuple:wp,sizeForAddr:Zk};function Gk(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=ux(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw hx("invalid address: "+r);if(o.path){e.push([i,uw(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function Yk(r){let e=[];return r.map(t=>{let n=wp(t);return e.push(n.name),t.length>1&&e.push(t[1]),null}),uw(e.join("/"))}function Jk(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=wp(e);return e.length>1?[t.code,Vk.toBytes(t.code,e[1])]:[t.code]})}function Xk(r){return r.map(e=>{let t=wp(e);return e[1]?[t.code,Vk.toString(t.code,e[1])]:[t.code]})}function Qk(r){return tI(Wk(r.map(e=>{let t=wp(e),n=Uint8Array.from(gp.encode(t.code));return e.length>1&&(n=Wk([n,e[1]])),n})))}function Zk(r,e){return r.size>0?r.size/8:r.size===0?0:gp.decode(e)+gp.decode.bytes}function fx(r){let e=[],t=0;for(;t<r.length;){let n=gp.decode(r,t),i=gp.decode.bytes,o=ux(n),a=Zk(o,r.slice(t+i));if(a===0){e.push([n]),t+=i;continue}let u=r.slice(t+i,t+i+a);if(t+=a+i,t>r.length)throw hx("Invalid address Uint8Array: "+aH(r,"base16"));e.push([n,u])}return e}function cH(r){let e=fx(r),t=Xk(e);return Yk(t)}function eI(r){r=uw(r);let e=Gk(r),t=Jk(e);return Qk(t)}function uH(r){return eI(r)}function tI(r){let e=lx(r);if(e)throw e;return Uint8Array.from(r)}function lx(r){try{fx(r)}catch(e){return e}}function fH(r){return lx(r)===void 0}function uw(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function hx(r){return new Error("Error parsing address: "+r)}function wp(r){return ux(r[0])}});var aI=ee((eae,sI)=>{"use strict";var ms=nI(),Ql=ow(),iI=$c(),{CID:lH}=(cr(),qn(Uv)),{base58btc:hH}=(Ec(),qn(bd)),dH=So(),pH=Symbol.for("nodejs.util.inspect.custom"),{toString:fw}=(Dn(),qn(Ad)),{equals:mH}=(wd(),qn(WS)),dx=new Map,oI=Symbol.for("@multiformats/js-multiaddr/multiaddr"),On=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,oI,{value:!0}),e instanceof Uint8Array)this.bytes=ms.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=ms.fromString(e)}else if(On.isMultiaddr(e))this.bytes=ms.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return ms.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},t=this.toString().split("/");return e.family=t[1]==="ip4"?4:6,e.host=t[2],e.transport=t[3],e.port=parseInt(t[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},Ql(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=iI.decode(t,n),o=iI.decode.bytes,a=Ql(i);n+=ms.sizeForAddr(a,t.slice(n+o))+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return ms.bytesToTuples(this.bytes)}stringTuples(){let e=ms.bytesToTuples(this.bytes);return ms.tuplesToStringTuples(e)}encapsulate(e){return e=new On(e),new On(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new On(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new On(ms.tuplesToBytes(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Ql.names.ipfs.code).pop();if(t&&t[1]){let n=t[1];return n[0]==="Q"||n[0]==="1"?fw(hH.decode(`z${n}`),"base58btc"):fw(lH.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>!!Ql(t[0]).path)[0][1],e||(e=null)}catch{e=null}return e}equals(e){return mH(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(i=>i.resolvable);if(!e)return[this];let t=dx.get(e.name);if(!t)throw dH(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await t(this)).map(i=>new On(i))}nodeAddress(){let e=this.protoCodes(),t=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){let t=(e||this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}static fromNodeAddress(e,t){if(!e)throw new Error("requires node address object");if(!t)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new On("/"+[n,e.address,t,e.port].join("/"))}static isName(e){return On.isMultiaddr(e)?e.protos().some(t=>t.resolvable):!1}static isMultiaddr(e){return e instanceof On||Boolean(e&&e[oI])}[pH](){return"<Multiaddr "+fw(this.bytes,"base16")+" - "+ms.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+fw(this.bytes,"base16")+" - "+ms.bytesToString(this.bytes)+">"}};On.protocols=Ql;On.resolvers=dx;function yH(r){return new On(r)}sI.exports={Multiaddr:On,multiaddr:yH,protocols:Ql,resolvers:dx}});var gI=ee((Aae,hw)=>{"use strict";hw.exports=SH;hw.exports.format=mI;hw.exports.parse=yI;var xH=/\B(?=(\d{3})+(?!\d))/g,EH=/(?:\.0*|(\.[^0]+)0+)$/,Qc={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},AH=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function SH(r,e){return typeof r=="string"?yI(r):typeof r=="number"?mI(r,e):null}function mI(r,e){if(!Number.isFinite(r))return null;var t=Math.abs(r),n=e&&e.thousandsSeparator||"",i=e&&e.unitSeparator||"",o=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,a=Boolean(e&&e.fixedDecimals),u=e&&e.unit||"";(!u||!Qc[u.toLowerCase()])&&(t>=Qc.pb?u="PB":t>=Qc.tb?u="TB":t>=Qc.gb?u="GB":t>=Qc.mb?u="MB":t>=Qc.kb?u="KB":u="B");var l=r/Qc[u.toLowerCase()],h=l.toFixed(o);return a||(h=h.replace(EH,"$1")),n&&(h=h.split(".").map(function(m,y){return y===0?m.replace(xH,n):m}).join(".")),h+i+u}function yI(r){if(typeof r=="number"&&!isNaN(r))return r;if(typeof r!="string")return null;var e=AH.exec(r),t,n="b";return e?(t=parseFloat(e[1]),n=e[4].toLowerCase()):(t=parseInt(r,10),n="b"),isNaN(t)?null:Math.floor(Qc[n]*t)}});var bI=ee((Sae,wI)=>{"use strict";wI.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}});var SI=ee((EI,AI)=>{"use strict";var dw=bI(),{hasOwnProperty:_I}=Object.prototype,{propertyIsEnumerable:PH}=Object,rh=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),DH=EI,vI={concatArrays:!1,ignoreUndefined:!1},pw=r=>{let e=[];for(let t in r)_I.call(r,t)&&e.push(t);if(Object.getOwnPropertySymbols){let t=Object.getOwnPropertySymbols(r);for(let n of t)PH.call(r,n)&&e.push(n)}return e};function nh(r){return Array.isArray(r)?CH(r):dw(r)?kH(r):r}function CH(r){let e=r.slice(0,0);return pw(r).forEach(t=>{rh(e,t,nh(r[t]))}),e}function kH(r){let e=Object.getPrototypeOf(r)===null?Object.create(null):{};return pw(r).forEach(t=>{rh(e,t,nh(r[t]))}),e}var xI=(r,e,t,n)=>(t.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in r&&r[i]!==Object.getPrototypeOf(r)?rh(r,i,bx(r[i],e[i],n)):rh(r,i,nh(e[i])))}),r),IH=(r,e,t)=>{let n=r.slice(0,0),i=0;return[r,e].forEach(o=>{let a=[];for(let u=0;u<o.length;u++)!_I.call(o,u)||(a.push(String(u)),o===r?rh(n,i++,o[u]):rh(n,i++,nh(o[u])));n=xI(n,o,pw(o).filter(u=>!a.includes(u)),t)}),n};function bx(r,e,t){return t.concatArrays&&Array.isArray(r)&&Array.isArray(e)?IH(r,e,t):!dw(e)||!dw(r)?nh(e):xI(r,e,pw(e),t)}AI.exports=function(...r){let e=bx(nh(vI),this!==DH&&this||{},vI),t={_:{}};for(let n of r)if(n!==void 0){if(!dw(n))throw new TypeError("`"+n+"` is not an Option Object");t=bx(t,{_:n},e)}return t._}});var LI=ee((Lae,_x)=>{"use strict";var LH=Object.prototype.hasOwnProperty,Gn="~";function _p(){}Object.create&&(_p.prototype=Object.create(null),new _p().__proto__||(Gn=!1));function OH(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function BI(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new OH(t,n||r,i),a=Gn?Gn+e:e;return r._events[a]?r._events[a].fn?r._events[a]=[r._events[a],o]:r._events[a].push(o):(r._events[a]=o,r._eventsCount++),r}function gw(r,e){--r._eventsCount===0?r._events=new _p:delete r._events[e]}function Nn(){this._events=new _p,this._eventsCount=0}Nn.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)LH.call(t,n)&&e.push(Gn?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Nn.prototype.listeners=function(e){var t=Gn?Gn+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a};Nn.prototype.listenerCount=function(e){var t=Gn?Gn+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Nn.prototype.emit=function(e,t,n,i,o,a){var u=Gn?Gn+e:e;if(!this._events[u])return!1;var l=this._events[u],h=arguments.length,m,y;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,a),!0}for(y=1,m=new Array(h-1);y<h;y++)m[y-1]=arguments[y];l.fn.apply(l.context,m)}else{var E=l.length,k;for(y=0;y<E;y++)switch(l[y].once&&this.removeListener(e,l[y].fn,void 0,!0),h){case 1:l[y].fn.call(l[y].context);break;case 2:l[y].fn.call(l[y].context,t);break;case 3:l[y].fn.call(l[y].context,t,n);break;case 4:l[y].fn.call(l[y].context,t,n,i);break;default:if(!m)for(k=1,m=new Array(h-1);k<h;k++)m[k-1]=arguments[k];l[y].fn.apply(l[y].context,m)}}return!0};Nn.prototype.on=function(e,t,n){return BI(this,e,t,n,!1)};Nn.prototype.once=function(e,t,n){return BI(this,e,t,n,!0)};Nn.prototype.removeListener=function(e,t,n,i){var o=Gn?Gn+e:e;if(!this._events[o])return this;if(!t)return gw(this,o),this;var a=this._events[o];if(a.fn)a.fn===t&&(!i||a.once)&&(!n||a.context===n)&&gw(this,o);else{for(var u=0,l=[],h=a.length;u<h;u++)(a[u].fn!==t||i&&!a[u].once||n&&a[u].context!==n)&&l.push(a[u]);l.length?this._events[o]=l.length===1?l[0]:l:gw(this,o)}return this};Nn.prototype.removeAllListeners=function(e){var t;return e?(t=Gn?Gn+e:e,this._events[t]&&gw(this,t)):(this._events=new _p,this._eventsCount=0),this};Nn.prototype.off=Nn.prototype.removeListener;Nn.prototype.addListener=Nn.prototype.on;Nn.prefixed=Gn;Nn.EventEmitter=Nn;typeof _x<"u"&&(_x.exports=Nn)});var df=ee((lce,YI)=>{"use strict";var UH=async function*(r,e){for await(let t of r)await e(t)&&(yield t)};YI.exports=UH});var oh=ee((mce,JI)=>{"use strict";var $H=async r=>{for await(let e of r);};JI.exports=$H});var aT=ee((Sce,sT)=>{"use strict";var qH=async r=>{for await(let e of r)return e};sT.exports=qH});var Lp=ee((sue,hT)=>{"use strict";var YH=async function*(r,e){for await(let t of r)yield e(t)};hT.exports=YH});var _T=ee((bue,vT)=>{"use strict";async function*ZH(r,e=1){let t=[];e<1&&(e=1);for await(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length;)yield t.slice(0,e),t=t.slice(e)}vT.exports=ZH});var ET=ee((vue,xT)=>{"use strict";var eW=_T();async function*tW(r,e=1){for await(let t of eW(r,e)){let n=t.map(i=>i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}xT.exports=tW});var ST=ee((xue,AT)=>{AT.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var CT=ee((Aue,DT)=>{var PT=ST();DT.exports=class{constructor(e){this.hwm=e||16,this.head=new PT(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let t=this.head;this.head=t.next=new PT(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}});var IT=ee((Sue,kT)=>{var Wx=CT();kT.exports=r=>{r=r||{};let e;typeof r=="function"?(e=r,r={}):e=r.onEnd;let t=new Wx,n,i,o,a=()=>{if(!t.isEmpty()){if(r.writev){let O,ce=[];for(;!t.isEmpty();){if(O=t.shift(),O.error)throw O.error;ce.push(O.value)}return{done:O.done,value:ce}}let T=t.shift();if(T.error)throw T.error;return T}return o?{done:!0}:new Promise((T,O)=>{i=ce=>(i=null,ce.error?O(ce.error):r.writev&&!ce.done?T({done:ce.done,value:[ce.value]}):T(ce),n)})},u=T=>i?i(T):(t.push(T),n),l=T=>(t=new Wx,i?i({error:T}):(t.push({error:T}),n)),h=T=>o?n:u({done:!1,value:T}),m=T=>o?n:(o=!0,T?l(T):u({done:!0})),y=()=>(t=new Wx,m(),{done:!0}),E=T=>(m(T),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:a,return:y,throw:E,push:h,end:m},!e)return n;let k=n;return n={[Symbol.asyncIterator](){return this},next(){return k.next()},throw(T){return k.throw(T),e&&(e(T),e=null),{done:!0}},return(){return k.return(),e&&(e(),e=null),{done:!0}},push:h,end(T){return k.end(T),e&&(e(T),e=null),n}},n}});var Iw=ee((Pue,TT)=>{"use strict";var rW=IT(),nW=async function*(...r){let e=rW();setTimeout(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}},0),yield*e};TT.exports=nW});var Np=ee((Jue,zT)=>{"use strict";var mW=async function*(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}};zT.exports=mW});var Fw=ee((Xue,jT)=>{"use strict";var yW=async r=>{let e=[];for await(let t of r)e.push(t);return e};jT.exports=yW});var s4=ee((Sle,o4)=>{"use strict";var TW=Fw(),FW=async function*(r,e){yield*(await TW(r)).sort(e)};o4.exports=FW});var c4=ee(a4=>{"use strict";a4.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var bs=ee((Cle,u4)=>{"use strict";u4.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var h4=ee(Nw=>{"use strict";Nw.byteLength=LW;Nw.toByteArray=NW;Nw.fromByteArray=UW;var ra=[],Io=[],BW=typeof Uint8Array<"u"?Uint8Array:Array,uE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(wf=0,f4=uE.length;wf<f4;++wf)ra[wf]=uE[wf],Io[uE.charCodeAt(wf)]=wf;var wf,f4;Io["-".charCodeAt(0)]=62;Io["_".charCodeAt(0)]=63;function l4(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function LW(r){var e=l4(r),t=e[0],n=e[1];return(t+n)*3/4-n}function OW(r,e,t){return(e+t)*3/4-t}function NW(r){var e,t=l4(r),n=t[0],i=t[1],o=new BW(OW(r,n,i)),a=0,u=i>0?n-4:n,l;for(l=0;l<u;l+=4)e=Io[r.charCodeAt(l)]<<18|Io[r.charCodeAt(l+1)]<<12|Io[r.charCodeAt(l+2)]<<6|Io[r.charCodeAt(l+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return i===2&&(e=Io[r.charCodeAt(l)]<<2|Io[r.charCodeAt(l+1)]>>4,o[a++]=e&255),i===1&&(e=Io[r.charCodeAt(l)]<<10|Io[r.charCodeAt(l+1)]<<4|Io[r.charCodeAt(l+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function RW(r){return ra[r>>18&63]+ra[r>>12&63]+ra[r>>6&63]+ra[r&63]}function MW(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(RW(n));return i.join("")}function UW(r){for(var e,t=r.length,n=t%3,i=[],o=16383,a=0,u=t-n;a<u;a+=o)i.push(MW(r,a,a+o>u?u:a+o));return n===1?(e=r[t-1],i.push(ra[e>>2]+ra[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(ra[e>>10]+ra[e>>4&63]+ra[e<<2&63]+"=")),i.join("")}});var d4=ee(fE=>{fE.read=function(r,e,t,n,i){var o,a,u=i*8-n-1,l=(1<<u)-1,h=l>>1,m=-7,y=t?i-1:0,E=t?-1:1,k=r[e+y];for(y+=E,o=k&(1<<-m)-1,k>>=-m,m+=u;m>0;o=o*256+r[e+y],y+=E,m-=8);for(a=o&(1<<-m)-1,o>>=-m,m+=n;m>0;a=a*256+r[e+y],y+=E,m-=8);if(o===0)o=1-h;else{if(o===l)return a?NaN:(k?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-h}return(k?-1:1)*a*Math.pow(2,o-n)};fE.write=function(r,e,t,n,i,o){var a,u,l,h=o*8-i-1,m=(1<<h)-1,y=m>>1,E=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=n?0:o-1,T=n?1:-1,O=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=m):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+y>=1?e+=E/l:e+=E*Math.pow(2,1-y),e*l>=2&&(a++,l/=2),a+y>=m?(u=0,a=m):a+y>=1?(u=(e*l-1)*Math.pow(2,i),a=a+y):(u=e*Math.pow(2,y-1)*Math.pow(2,i),a=0));i>=8;r[t+k]=u&255,k+=T,u/=256,i-=8);for(a=a<<i|u,h+=i;h>0;r[t+k]=a&255,k+=T,a/=256,h-=8);r[t+k-T]|=O*128}});var vf=ee(hh=>{"use strict";var lE=h4(),fh=d4(),p4=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;hh.Buffer=J;hh.SlowBuffer=HW;hh.INSPECT_MAX_BYTES=50;var Rw=2147483647;hh.kMaxLength=Rw;J.TYPED_ARRAY_SUPPORT=KW();!J.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function KW(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(J.prototype,"parent",{enumerable:!0,get:function(){if(!!J.isBuffer(this))return this.buffer}});Object.defineProperty(J.prototype,"offset",{enumerable:!0,get:function(){if(!!J.isBuffer(this))return this.byteOffset}});function za(r){if(r>Rw)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,J.prototype),e}function J(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return mE(r)}return w4(r,e,t)}J.poolSize=8192;function w4(r,e,t){if(typeof r=="string")return zW(r,e);if(ArrayBuffer.isView(r))return jW(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(na(r,ArrayBuffer)||r&&na(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(na(r,SharedArrayBuffer)||r&&na(r.buffer,SharedArrayBuffer)))return dE(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return J.from(n,e,t);let i=qW(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return J.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}J.from=function(r,e,t){return w4(r,e,t)};Object.setPrototypeOf(J.prototype,Uint8Array.prototype);Object.setPrototypeOf(J,Uint8Array);function b4(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function $W(r,e,t){return b4(r),r<=0?za(r):e!==void 0?typeof t=="string"?za(r).fill(e,t):za(r).fill(e):za(r)}J.alloc=function(r,e,t){return $W(r,e,t)};function mE(r){return b4(r),za(r<0?0:yE(r)|0)}J.allocUnsafe=function(r){return mE(r)};J.allocUnsafeSlow=function(r){return mE(r)};function zW(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!J.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=v4(r,e)|0,n=za(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function hE(r){let e=r.length<0?0:yE(r.length)|0,t=za(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function jW(r){if(na(r,Uint8Array)){let e=new Uint8Array(r);return dE(e.buffer,e.byteOffset,e.byteLength)}return hE(r)}function dE(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,J.prototype),n}function qW(r){if(J.isBuffer(r)){let e=yE(r.length)|0,t=za(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||wE(r.length)?za(0):hE(r);if(r.type==="Buffer"&&Array.isArray(r.data))return hE(r.data)}function yE(r){if(r>=Rw)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Rw.toString(16)+" bytes");return r|0}function HW(r){return+r!=r&&(r=0),J.alloc(+r)}J.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==J.prototype};J.compare=function(e,t){if(na(e,Uint8Array)&&(e=J.from(e,e.offset,e.byteLength)),na(t,Uint8Array)&&(t=J.from(t,t.offset,t.byteLength)),!J.isBuffer(e)||!J.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};J.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};J.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return J.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=J.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let a=e[n];if(na(a,Uint8Array))o+a.length>i.length?(J.isBuffer(a)||(a=J.from(a)),a.copy(i,o)):Uint8Array.prototype.set.call(i,a,o);else if(J.isBuffer(a))a.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=a.length}return i};function v4(r,e){if(J.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||na(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return pE(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return k4(r).length;default:if(i)return n?-1:pE(r).length;e=(""+e).toLowerCase(),i=!0}}J.byteLength=v4;function WW(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return rV(this,e,t);case"utf8":case"utf-8":return x4(this,e,t);case"ascii":return eV(this,e,t);case"latin1":case"binary":return tV(this,e,t);case"base64":return QW(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nV(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}J.prototype._isBuffer=!0;function bf(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}J.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)bf(this,t,t+1);return this};J.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)bf(this,t,t+3),bf(this,t+1,t+2);return this};J.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)bf(this,t,t+7),bf(this,t+1,t+6),bf(this,t+2,t+5),bf(this,t+3,t+4);return this};J.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?x4(this,0,e):WW.apply(this,arguments)};J.prototype.toLocaleString=J.prototype.toString;J.prototype.equals=function(e){if(!J.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:J.compare(this,e)===0};J.prototype.inspect=function(){let e="",t=hh.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};p4&&(J.prototype[p4]=J.prototype.inspect);J.prototype.compare=function(e,t,n,i,o){if(na(e,Uint8Array)&&(e=J.from(e,e.offset,e.byteLength)),!J.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let a=o-i,u=n-t,l=Math.min(a,u),h=this.slice(i,o),m=e.slice(t,n);for(let y=0;y<l;++y)if(h[y]!==m[y]){a=h[y],u=m[y];break}return a<u?-1:u<a?1:0};function _4(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,wE(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=J.from(e,n)),J.isBuffer(e))return e.length===0?-1:m4(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):m4(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function m4(r,e,t,n,i){let o=1,a=r.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,u/=2,t/=2}function l(m,y){return o===1?m[y]:m.readUInt16BE(y*o)}let h;if(i){let m=-1;for(h=t;h<a;h++)if(l(r,h)===l(e,m===-1?0:h-m)){if(m===-1&&(m=h),h-m+1===u)return m*o}else m!==-1&&(h-=h-m),m=-1}else for(t+u>a&&(t=a-u),h=t;h>=0;h--){let m=!0;for(let y=0;y<u;y++)if(l(r,h+y)!==l(e,y)){m=!1;break}if(m)return h}return-1}J.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};J.prototype.indexOf=function(e,t,n){return _4(this,e,t,n,!0)};J.prototype.lastIndexOf=function(e,t,n){return _4(this,e,t,n,!1)};function VW(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let a;for(a=0;a<n;++a){let u=parseInt(e.substr(a*2,2),16);if(wE(u))return a;r[t+a]=u}return a}function GW(r,e,t,n){return Mw(pE(e,r.length-t),r,t,n)}function YW(r,e,t,n){return Mw(aV(e),r,t,n)}function JW(r,e,t,n){return Mw(k4(e),r,t,n)}function XW(r,e,t,n){return Mw(cV(e,r.length-t),r,t,n)}J.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let a=!1;for(;;)switch(i){case"hex":return VW(this,e,t,n);case"utf8":case"utf-8":return GW(this,e,t,n);case"ascii":case"latin1":case"binary":return YW(this,e,t,n);case"base64":return JW(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return XW(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};J.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function QW(r,e,t){return e===0&&t===r.length?lE.fromByteArray(r):lE.fromByteArray(r.slice(e,t))}function x4(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=t){let l,h,m,y;switch(u){case 1:o<128&&(a=o);break;case 2:l=r[i+1],(l&192)===128&&(y=(o&31)<<6|l&63,y>127&&(a=y));break;case 3:l=r[i+1],h=r[i+2],(l&192)===128&&(h&192)===128&&(y=(o&15)<<12|(l&63)<<6|h&63,y>2047&&(y<55296||y>57343)&&(a=y));break;case 4:l=r[i+1],h=r[i+2],m=r[i+3],(l&192)===128&&(h&192)===128&&(m&192)===128&&(y=(o&15)<<18|(l&63)<<12|(h&63)<<6|m&63,y>65535&&y<1114112&&(a=y))}}a===null?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=u}return ZW(n)}var y4=4096;function ZW(r){let e=r.length;if(e<=y4)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=y4));return t}function eV(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function tV(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function rV(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=uV[r[o]];return i}function nV(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}J.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,J.prototype),i};function vn(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}J.prototype.readUintLE=J.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||vn(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return i};J.prototype.readUintBE=J.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||vn(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};J.prototype.readUint8=J.prototype.readUInt8=function(e,t){return e=e>>>0,t||vn(e,1,this.length),this[e]};J.prototype.readUint16LE=J.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||vn(e,2,this.length),this[e]|this[e+1]<<8};J.prototype.readUint16BE=J.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||vn(e,2,this.length),this[e]<<8|this[e+1]};J.prototype.readUint32LE=J.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};J.prototype.readUint32BE=J.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};J.prototype.readBigUInt64LE=su(function(e){e=e>>>0,lh(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Mp(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});J.prototype.readBigUInt64BE=su(function(e){e=e>>>0,lh(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Mp(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});J.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||vn(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};J.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||vn(e,t,this.length);let i=t,o=1,a=this[e+--i];for(;i>0&&(o*=256);)a+=this[e+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};J.prototype.readInt8=function(e,t){return e=e>>>0,t||vn(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};J.prototype.readInt16LE=function(e,t){e=e>>>0,t||vn(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};J.prototype.readInt16BE=function(e,t){e=e>>>0,t||vn(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};J.prototype.readInt32LE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};J.prototype.readInt32BE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};J.prototype.readBigInt64LE=su(function(e){e=e>>>0,lh(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Mp(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});J.prototype.readBigInt64BE=su(function(e){e=e>>>0,lh(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Mp(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});J.prototype.readFloatLE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),fh.read(this,e,!0,23,4)};J.prototype.readFloatBE=function(e,t){return e=e>>>0,t||vn(e,4,this.length),fh.read(this,e,!1,23,4)};J.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||vn(e,8,this.length),fh.read(this,e,!0,52,8)};J.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||vn(e,8,this.length),fh.read(this,e,!1,52,8)};function mi(r,e,t,n,i,o){if(!J.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}J.prototype.writeUintLE=J.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;mi(this,e,t,n,u,0)}let o=1,a=0;for(this[t]=e&255;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n};J.prototype.writeUintBE=J.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;mi(this,e,t,n,u,0)}let o=n-1,a=1;for(this[t+o]=e&255;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n};J.prototype.writeUint8=J.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,1,255,0),this[t]=e&255,t+1};J.prototype.writeUint16LE=J.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};J.prototype.writeUint16BE=J.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};J.prototype.writeUint32LE=J.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};J.prototype.writeUint32BE=J.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function E4(r,e,t,n,i){C4(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,t}function A4(r,e,t,n,i){C4(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=a,a=a>>8,r[t+2]=a,a=a>>8,r[t+1]=a,a=a>>8,r[t]=a,t+8}J.prototype.writeBigUInt64LE=su(function(e,t=0){return E4(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});J.prototype.writeBigUInt64BE=su(function(e,t=0){return A4(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});J.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);mi(this,e,t,n,l-1,-l)}let o=0,a=1,u=0;for(this[t]=e&255;++o<n&&(a*=256);)e<0&&u===0&&this[t+o-1]!==0&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+n};J.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);mi(this,e,t,n,l-1,-l)}let o=n-1,a=1,u=0;for(this[t+o]=e&255;--o>=0&&(a*=256);)e<0&&u===0&&this[t+o+1]!==0&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+n};J.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};J.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};J.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};J.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};J.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||mi(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};J.prototype.writeBigInt64LE=su(function(e,t=0){return E4(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});J.prototype.writeBigInt64BE=su(function(e,t=0){return A4(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function S4(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function P4(r,e,t,n,i){return e=+e,t=t>>>0,i||S4(r,e,t,4,34028234663852886e22,-34028234663852886e22),fh.write(r,e,t,n,23,4),t+4}J.prototype.writeFloatLE=function(e,t,n){return P4(this,e,t,!0,n)};J.prototype.writeFloatBE=function(e,t,n){return P4(this,e,t,!1,n)};function D4(r,e,t,n,i){return e=+e,t=t>>>0,i||S4(r,e,t,8,17976931348623157e292,-17976931348623157e292),fh.write(r,e,t,n,52,8),t+8}J.prototype.writeDoubleLE=function(e,t,n){return D4(this,e,t,!0,n)};J.prototype.writeDoubleBE=function(e,t,n){return D4(this,e,t,!1,n)};J.prototype.copy=function(e,t,n,i){if(!J.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};J.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!J.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let a=e.charCodeAt(0);(i==="utf8"&&a<128||i==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let a=J.isBuffer(e)?e:J.from(e,i),u=a.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%u]}return this};var uh={};function gE(r,e,t){uh[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}gE("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);gE("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);gE("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=g4(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=g4(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function g4(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function iV(r,e,t){lh(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Mp(e,r.length-(t+1))}function C4(r,e,t,n,i,o){if(r>t||r<e){let a=typeof e=="bigint"?"n":"",u;throw o>3?e===0||e===BigInt(0)?u=`>= 0${a} and < 2${a} ** ${(o+1)*8}${a}`:u=`>= -(2${a} ** ${(o+1)*8-1}${a}) and < 2 ** ${(o+1)*8-1}${a}`:u=`>= ${e}${a} and <= ${t}${a}`,new uh.ERR_OUT_OF_RANGE("value",u,r)}iV(n,i,o)}function lh(r,e){if(typeof r!="number")throw new uh.ERR_INVALID_ARG_TYPE(e,"number",r)}function Mp(r,e,t){throw Math.floor(r)!==r?(lh(r,t),new uh.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new uh.ERR_BUFFER_OUT_OF_BOUNDS:new uh.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var oV=/[^+/0-9A-Za-z-_]/g;function sV(r){if(r=r.split("=")[0],r=r.trim().replace(oV,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function pE(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function aV(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function cV(r,e){let t,n,i,o=[];for(let a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function k4(r){return lE.toByteArray(sV(r))}function Mw(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function na(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function wE(r){return r!==r}var uV=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function su(r){return typeof BigInt>"u"?fV:r}function fV(){throw new Error("BigInt not supported")}});var vE=ee((Ble,I4)=>{"use strict";var bE=null;I4.exports=function(){return bE===null&&(bE={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),bE}});var EE=ee(T4=>{"use strict";var _E=bs(),lV=new Set(["buffer","view","utf8"]),xE=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!lV.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new _E(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new _E(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new _E(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};T4.Encoding=xE});var DE=ee(Uw=>{"use strict";var{Buffer:SE}=vf()||{},{Encoding:PE}=EE(),hV=vE(),Up=class extends PE{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new Kp({encode:this.encode,decode:e=>this.decode(SE.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Kp=class extends PE{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Up({encode:e=>{let t=this.encode(e);return SE.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},AE=class extends PE{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Up({encode:e=>SE.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=hV();return new Kp({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Uw.BufferFormat=Up;Uw.ViewFormat=Kp;Uw.UTF8Format=AE});var O4=ee(_f=>{"use strict";var{Buffer:Rn}=vf()||{Buffer:{isBuffer:()=>!1}},{textEncoder:B4,textDecoder:F4}=vE()(),{BufferFormat:$p,ViewFormat:CE,UTF8Format:L4}=DE(),Kw=r=>r;_f.utf8=new L4({encode:function(r){return Rn.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?F4.decode(r):String(r)},decode:Kw,name:"utf8",createViewTranscoder(){return new CE({encode:function(r){return ArrayBuffer.isView(r)?r:B4.encode(r)},decode:function(r){return F4.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new $p({encode:function(r){return Rn.isBuffer(r)?r:ArrayBuffer.isView(r)?Rn.from(r.buffer,r.byteOffset,r.byteLength):Rn.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});_f.json=new L4({encode:JSON.stringify,decode:JSON.parse,name:"json"});_f.buffer=new $p({encode:function(r){return Rn.isBuffer(r)?r:ArrayBuffer.isView(r)?Rn.from(r.buffer,r.byteOffset,r.byteLength):Rn.from(String(r),"utf8")},decode:Kw,name:"buffer",createViewTranscoder(){return new CE({encode:function(r){return ArrayBuffer.isView(r)?r:Rn.from(String(r),"utf8")},decode:function(r){return Rn.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});_f.view=new CE({encode:function(r){return ArrayBuffer.isView(r)?r:B4.encode(r)},decode:Kw,name:"view",createBufferTranscoder(){return new $p({encode:function(r){return Rn.isBuffer(r)?r:ArrayBuffer.isView(r)?Rn.from(r.buffer,r.byteOffset,r.byteLength):Rn.from(String(r),"utf8")},decode:Kw,name:`${this.name}+buffer`})}});_f.hex=new $p({encode:function(r){return Rn.isBuffer(r)?r:Rn.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});_f.base64=new $p({encode:function(r){return Rn.isBuffer(r)?r:Rn.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var M4=ee(R4=>{"use strict";var N4=bs(),zw=O4(),{Encoding:dV}=EE(),{BufferFormat:pV,ViewFormat:mV,UTF8Format:yV}=DE(),zp=Symbol("formats"),$w=Symbol("encodings"),gV=new Set(["buffer","view","utf8"]),kE=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>gV.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[$w]=new Map,this[zp]=new Set(e);for(let t in zw)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[$w].values()))}encoding(e){let t=this[$w].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=_V[e],!t)throw new N4(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=wV(e)}let{name:n,format:i}=t;if(!this[zp].has(i))if(this[zp].has("view"))t=t.createViewTranscoder();else if(this[zp].has("buffer"))t=t.createBufferTranscoder();else if(this[zp].has("utf8"))t=t.createUTF8Transcoder();else throw new N4(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[$w].set(o,t)}return t}};R4.Transcoder=kE;function wV(r){if(r instanceof dV)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${xV++}`;switch(bV(r)){case"view":return new mV({...r,name:t});case"utf8":return new yV({...r,name:t});case"buffer":return new pV({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function bV(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var vV={binary:zw.buffer,"utf-8":zw.utf8},_V={...zw,...vV},xV=0});var Y4=ee((Mle,IE)=>{"use strict";var dh=typeof Reflect=="object"?Reflect:null,U4=dh&&typeof dh.apply=="function"?dh.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},jw;dh&&typeof dh.ownKeys=="function"?jw=dh.ownKeys:Object.getOwnPropertySymbols?jw=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:jw=function(e){return Object.getOwnPropertyNames(e)};function EV(r){console&&console.warn&&console.warn(r)}var $4=Number.isNaN||function(e){return e!==e};function Zt(){Zt.init.call(this)}IE.exports=Zt;IE.exports.once=DV;Zt.EventEmitter=Zt;Zt.prototype._events=void 0;Zt.prototype._eventsCount=0;Zt.prototype._maxListeners=void 0;var K4=10;function qw(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Zt,"defaultMaxListeners",{enumerable:!0,get:function(){return K4},set:function(r){if(typeof r!="number"||r<0||$4(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");K4=r}});Zt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Zt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||$4(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function z4(r){return r._maxListeners===void 0?Zt.defaultMaxListeners:r._maxListeners}Zt.prototype.getMaxListeners=function(){return z4(this)};Zt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var u=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw u.context=a,u}var l=o[e];if(l===void 0)return!1;if(typeof l=="function")U4(l,this,t);else for(var h=l.length,m=V4(l,h),n=0;n<h;++n)U4(m[n],this,t);return!0};function j4(r,e,t,n){var i,o,a;if(qw(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),a=o[e]),a===void 0)a=o[e]=t,++r._eventsCount;else if(typeof a=="function"?a=o[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),i=z4(r),i>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=e,u.count=a.length,EV(u)}return r}Zt.prototype.addListener=function(e,t){return j4(this,e,t,!1)};Zt.prototype.on=Zt.prototype.addListener;Zt.prototype.prependListener=function(e,t){return j4(this,e,t,!0)};function AV(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function q4(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=AV.bind(n);return i.listener=t,n.wrapFn=i,i}Zt.prototype.once=function(e,t){return qw(t),this.on(e,q4(this,e,t)),this};Zt.prototype.prependOnceListener=function(e,t){return qw(t),this.prependListener(e,q4(this,e,t)),this};Zt.prototype.removeListener=function(e,t){var n,i,o,a,u;if(qw(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){u=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():SV(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,u||t)}return this};Zt.prototype.off=Zt.prototype.removeListener;Zt.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function H4(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?PV(i):V4(i,i.length)}Zt.prototype.listeners=function(e){return H4(this,e,!0)};Zt.prototype.rawListeners=function(e){return H4(this,e,!1)};Zt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):W4.call(r,e)};Zt.prototype.listenerCount=W4;function W4(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Zt.prototype.eventNames=function(){return this._eventsCount>0?jw(this._events):[]};function V4(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function SV(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function PV(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function DV(r,e){return new Promise(function(t,n){function i(a){r.removeListener(e,o),n(a)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}G4(r,e,o,{once:!0}),e!=="error"&&CV(r,i,{once:!0})})}function CV(r,e,t){typeof r.on=="function"&&G4(r,"error",e,t)}function G4(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var X4=ee((Ule,J4)=>{J4.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var jp=ee(TE=>{"use strict";var Q4=X4();TE.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,a){o?i(o):n(a)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};TE.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){Q4(()=>e(null,t))}).catch(function(t){Q4(()=>e(t))})}});var Hw=ee(FE=>{"use strict";FE.getCallback=function(r,e){return typeof r=="function"?r:e};FE.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var hu=ee(Yw=>{"use strict";var{fromCallback:BE}=jp(),zi=bs(),{getOptions:LE,getCallback:Z4}=Hw(),xf=Symbol("promise"),ph=Symbol("callback"),ia=Symbol("working"),Ef=Symbol("handleOne"),ja=Symbol("handleMany"),OE=Symbol("autoClose"),fu=Symbol("finishWork"),oa=Symbol("returnMany"),au=Symbol("closing"),qp=Symbol("handleClose"),Ww=Symbol("closed"),Hp=Symbol("closeCallbacks"),uu=Symbol("keyEncoding"),Af=Symbol("valueEncoding"),NE=Symbol("abortOnClose"),Vw=Symbol("legacy"),RE=Symbol("keys"),ME=Symbol("values"),cu=Symbol("limit"),To=Symbol("count"),Gw=Object.freeze({}),kV=()=>{},eF=!1,Wp=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[Ww]=!1,this[Hp]=[],this[ia]=!1,this[au]=!1,this[OE]=!1,this[ph]=null,this[Ef]=this[Ef].bind(this),this[ja]=this[ja].bind(this),this[qp]=this[qp].bind(this),this[uu]=t[uu],this[Af]=t[Af],this[Vw]=n,this[cu]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[To]=0,this[NE]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[To]}get limit(){return this[cu]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,a,u)=>{o?i(o):this[Vw]?a===void 0&&u===void 0?n():n([a,u]):n(a)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[au]?this.nextTick(e,new zi("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ia]?this.nextTick(e,new zi("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[ia]=!0,this[ph]=e,this[To]>=this[cu]?this.nextTick(this[Ef],null):this._next(this[Ef])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=Z4(t,n),n=BE(n,xf),t=LE(t,Gw),Number.isInteger(e)?(this[au]?this.nextTick(n,new zi("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ia]?this.nextTick(n,new zi("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[cu]<1/0&&(e=Math.min(e,this[cu]-this[To])),this[ia]=!0,this[ph]=n,e<=0?this.nextTick(this[ja],null,[]):this._nextv(e,t,this[ja])),n[xf]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[xf])}_nextv(e,t,n){let i=[],o=(a,u,l)=>{if(a)return n(a);if(this[Vw]?u===void 0&&l===void 0:u===void 0)return n(null,i);i.push(this[Vw]?[u,l]:u),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=Z4(e,t),t=BE(t,xf),e=LE(e,Gw),this[au]?this.nextTick(t,new zi("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ia]?this.nextTick(t,new zi("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[ia]=!0,this[ph]=t,this[OE]=!0,this[To]>=this[cu]?this.nextTick(this[ja],null,[]):this._all(e,this[ja])),t[xf]}_all(e,t){let n=this[To],i=[],o=()=>{let u=this[cu]<1/0?Math.min(1e3,this[cu]-n):1e3;u<=0?this.nextTick(t,null,i):this._nextv(u,Gw,a)},a=(u,l)=>{u?t(u):l.length===0?t(null,i):(i.push.apply(i,l),n+=l.length,o())};o()}[fu](){let e=this[ph];return this[NE]&&e===null?kV:(this[ia]=!1,this[ph]=null,this[au]&&this._close(this[qp]),e)}[oa](e,t,n){this[OE]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=LE(t,Gw),!this[au]){if(this[ia])throw new zi("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[uu]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new zi("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=BE(e,xf),this[Ww]?this.nextTick(e):this[au]?this[Hp].push(e):(this[au]=!0,this[Hp].push(e),this[ia]?this[NE]&&this[fu]()(new zi("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[qp])),e[xf]}_close(e){this.nextTick(e)}[qp](){this[Ww]=!0,this.db.detachResource(this);let e=this[Hp];this[Hp]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Ww]||await this.close()}}},mh=class extends Wp{constructor(e,t){super(e,t,!0),this[RE]=t.keys!==!1,this[ME]=t.values!==!1}[Ef](e,t,n){let i=this[fu]();if(e)return i(e);try{t=this[RE]&&t!==void 0?this[uu].decode(t):void 0,n=this[ME]&&n!==void 0?this[Af].decode(n):void 0}catch(o){return i(new lu("entry",o))}t===void 0&&n===void 0||this[To]++,i(null,t,n)}[ja](e,t){let n=this[fu]();if(e)return this[oa](n,e);try{for(let i of t){let o=i[0],a=i[1];i[0]=this[RE]&&o!==void 0?this[uu].decode(o):void 0,i[1]=this[ME]&&a!==void 0?this[Af].decode(a):void 0}}catch(i){return this[oa](n,new lu("entries",i))}this[To]+=t.length,this[oa](n,null,t)}end(e){return!eF&&typeof console<"u"&&(eF=!0,console.warn(new zi("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},UE=class extends Wp{constructor(e,t){super(e,t,!1)}[Ef](e,t){let n=this[fu]();if(e)return n(e);try{t=t!==void 0?this[uu].decode(t):void 0}catch(i){return n(new lu("key",i))}t!==void 0&&this[To]++,n(null,t)}[ja](e,t){let n=this[fu]();if(e)return this[oa](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[uu].decode(o):void 0}}catch(i){return this[oa](n,new lu("keys",i))}this[To]+=t.length,this[oa](n,null,t)}},KE=class extends Wp{constructor(e,t){super(e,t,!1)}[Ef](e,t){let n=this[fu]();if(e)return n(e);try{t=t!==void 0?this[Af].decode(t):void 0}catch(i){return n(new lu("value",i))}t!==void 0&&this[To]++,n(null,t)}[ja](e,t){let n=this[fu]();if(e)return this[oa](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Af].decode(o):void 0}}catch(i){return this[oa](n,new lu("values",i))}this[To]+=t.length,this[oa](n,null,t)}},lu=class extends zi{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(mh.prototype,r.split(" ")[0],{get(){throw new zi(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new zi(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});mh.keyEncoding=uu;mh.valueEncoding=Af;Yw.AbstractIterator=mh;Yw.AbstractKeyIterator=UE;Yw.AbstractValueIterator=KE});var tF=ee($E=>{"use strict";var{AbstractKeyIterator:IV,AbstractValueIterator:TV}=hu(),Sf=Symbol("iterator"),Vp=Symbol("callback"),yh=Symbol("handleOne"),Pf=Symbol("handleMany"),Gp=class extends IV{constructor(e,t){super(e,t),this[Sf]=e.iterator({...t,keys:!0,values:!1}),this[yh]=this[yh].bind(this),this[Pf]=this[Pf].bind(this)}},Jw=class extends TV{constructor(e,t){super(e,t),this[Sf]=e.iterator({...t,keys:!1,values:!0}),this[yh]=this[yh].bind(this),this[Pf]=this[Pf].bind(this)}};for(let r of[Gp,Jw]){let e=r===Gp,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[Vp]=n,this[Sf].next(this[yh])},r.prototype[yh]=function(n,i,o){let a=this[Vp];n?a(n):a(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[Vp]=o,this[Sf].nextv(n,i,this[Pf])},r.prototype._all=function(n,i){this[Vp]=i,this[Sf].all(n,this[Pf])},r.prototype[Pf]=function(n,i){let o=this[Vp];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[Sf].seek(n,i)},r.prototype._close=function(n){this[Sf].close(n)}}$E.DefaultKeyIterator=Gp;$E.DefaultValueIterator=Jw});var rF=ee(r0=>{"use strict";var{AbstractIterator:FV,AbstractKeyIterator:BV,AbstractValueIterator:LV}=hu(),zE=bs(),yi=Symbol("nut"),e0=Symbol("undefer"),t0=Symbol("factory"),Xw=class extends FV{constructor(e,t){super(e,t),this[yi]=null,this[t0]=()=>e.iterator(t),this.db.defer(()=>this[e0]())}},Qw=class extends BV{constructor(e,t){super(e,t),this[yi]=null,this[t0]=()=>e.keys(t),this.db.defer(()=>this[e0]())}},Zw=class extends LV{constructor(e,t){super(e,t),this[yi]=null,this[t0]=()=>e.values(t),this.db.defer(()=>this[e0]())}};for(let r of[Xw,Qw,Zw])r.prototype[e0]=function(){this.db.status==="open"&&(this[yi]=this[t0]())},r.prototype._next=function(e){this[yi]!==null?this[yi].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new zE("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[yi]!==null?this[yi].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new zE("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[yi]!==null?this[yi].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new zE("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[yi]!==null?this[yi]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[yi]!==null?this[yi].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};r0.DeferredIterator=Xw;r0.DeferredKeyIterator=Qw;r0.DeferredValueIterator=Zw});var qE=ee(iF=>{"use strict";var{fromCallback:nF}=jp(),n0=bs(),{getCallback:OV,getOptions:NV}=Hw(),i0=Symbol("promise"),Fo=Symbol("status"),gh=Symbol("operations"),Yp=Symbol("finishClose"),wh=Symbol("closeCallbacks"),jE=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[gh]=[],this[wh]=[],this[Fo]="open",this[Yp]=this[Yp].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[gh].length}put(e,t,n){if(this[Fo]!=="open")throw new n0("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,a=n,u=o.keyEncoding(n&&n.keyEncoding),l=o.valueEncoding(n&&n.valueEncoding),h=u.format;n={...n,keyEncoding:h,valueEncoding:l.format},o!==this.db&&(n.sublevel=null);let m=o.prefixKey(u.encode(e),h),y=l.encode(t);return this._put(m,y,n),this[gh].push({...a,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[Fo]!=="open")throw new n0("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,a=i.keyEncoding(t&&t.keyEncoding),u=a.format;return t={...t,keyEncoding:u},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(a.encode(e),u),t),this[gh].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[Fo]!=="open")throw new n0("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[gh]=[],this}_clear(){}write(e,t){return t=OV(e,t),t=nF(t,i0),e=NV(e),this[Fo]!=="open"?this.nextTick(t,new n0("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[Fo]="writing",this._write(e,n=>{this[Fo]="closing",this[wh].push(()=>t(n)),n||this.db.emit("batch",this[gh]),this._close(this[Yp])})),t[i0]}_write(e,t){}close(e){return e=nF(e,i0),this[Fo]==="closing"?this[wh].push(e):this[Fo]==="closed"?this.nextTick(e):(this[wh].push(e),this[Fo]!=="writing"&&(this[Fo]="closing",this._close(this[Yp]))),e[i0]}_close(e){this.nextTick(e)}[Yp](){this[Fo]="closed",this.db.detachResource(this);let e=this[wh];this[wh]=[];for(let t of e)t()}};iF.AbstractChainedBatch=jE});var sF=ee(oF=>{"use strict";var{AbstractChainedBatch:RV}=qE(),MV=bs(),bh=Symbol("encoded"),HE=class extends RV{constructor(e){super(e),this[bh]=[]}_put(e,t,n){this[bh].push({...n,type:"put",key:e,value:t})}_del(e,t){this[bh].push({...t,type:"del",key:e})}_clear(){this[bh]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[bh].length===0?this.nextTick(t):this.db._batch(this[bh],e,t):this.nextTick(t,new MV("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};oF.DefaultChainedBatch=HE});var uF=ee((Vle,cF)=>{"use strict";var aF=bs(),UV=Object.prototype.hasOwnProperty,KV=new Set(["lt","lte","gt","gte"]);cF.exports=function(r,e){let t={};for(let n in r)if(!!UV.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new aF(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new aF("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});KV.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var WE=ee((Gle,lF)=>{var fF;lF.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):r=>(fF||(fF=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var pF=ee((Yle,dF)=>{"use strict";var hF=WE();dF.exports=function(r,...e){e.length===0?hF(r):hF(()=>r(...e))}});var mF=ee(o0=>{"use strict";var{AbstractIterator:$V,AbstractKeyIterator:zV,AbstractValueIterator:jV}=hu(),vh=Symbol("unfix"),vs=Symbol("iterator"),Df=Symbol("handleOne"),du=Symbol("handleMany"),qa=Symbol("callback"),Jp=class extends $V{constructor(e,t,n,i){super(e,t),this[vs]=n,this[vh]=i,this[Df]=this[Df].bind(this),this[du]=this[du].bind(this),this[qa]=null}[Df](e,t,n){let i=this[qa];if(e)return i(e);t!==void 0&&(t=this[vh](t)),i(e,t,n)}[du](e,t){let n=this[qa];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[vh](o))}n(e,t)}},Xp=class extends zV{constructor(e,t,n,i){super(e,t),this[vs]=n,this[vh]=i,this[Df]=this[Df].bind(this),this[du]=this[du].bind(this),this[qa]=null}[Df](e,t){let n=this[qa];if(e)return n(e);t!==void 0&&(t=this[vh](t)),n(e,t)}[du](e,t){let n=this[qa];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[vh](o))}n(e,t)}},Qp=class extends jV{constructor(e,t,n){super(e,t),this[vs]=n}};for(let r of[Jp,Xp])r.prototype._next=function(e){this[qa]=e,this[vs].next(this[Df])},r.prototype._nextv=function(e,t,n){this[qa]=n,this[vs].nextv(e,t,this[du])},r.prototype._all=function(e,t){this[qa]=t,this[vs].all(e,this[du])};for(let r of[Qp])r.prototype._next=function(e){this[vs].next(e)},r.prototype._nextv=function(e,t,n){this[vs].nextv(e,t,n)},r.prototype._all=function(e,t){this[vs].all(e,t)};for(let r of[Jp,Xp,Qp])r.prototype._seek=function(e,t){this[vs].seek(e,t)},r.prototype._close=function(e){this[vs].close(e)};o0.AbstractSublevelIterator=Jp;o0.AbstractSublevelKeyIterator=Xp;o0.AbstractSublevelValueIterator=Qp});var bF=ee((Xle,wF)=>{"use strict";var VE=bs(),{Buffer:JE}=vf()||{},{AbstractSublevelIterator:qV,AbstractSublevelKeyIterator:HV,AbstractSublevelValueIterator:WV}=mF(),Ha=Symbol("prefix"),yF=Symbol("upperBound"),Zp=Symbol("prefixRange"),ji=Symbol("parent"),GE=Symbol("unfix"),gF=new TextEncoder,VV={separator:"!"};wF.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new VE("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new VE("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?VV:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:a,manifest:u,...l}=e.defaults(o);i=YV(i,a);let h=a.charCodeAt(0)+1,m=n[ji]||n;if(!gF.encode(i).every(k=>k>h&&k<127))throw new VE(`Prefix must use bytes > ${h} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(GV(m,u),l);let y=(n.prefix||"")+a+i+a,E=y.slice(0,-1)+String.fromCharCode(h);this[ji]=m,this[Ha]=new s0(y),this[yF]=new s0(E),this[GE]=new XE,this.nextTick=m.nextTick}prefixKey(n,i){if(i==="utf8")return this[Ha].utf8+n;if(n.byteLength===0)return this[Ha][i];if(i==="view"){let o=this[Ha].view,a=new Uint8Array(o.byteLength+n.byteLength);return a.set(o,0),a.set(n,o.byteLength),a}else{let o=this[Ha].buffer;return JE.concat([o,n],o.byteLength+n.byteLength)}}[Zp](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[Ha][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[yF][i]}get prefix(){return this[Ha].utf8}get db(){return this[ji]}_open(n,i){this[ji].open({passive:!0},i)}_put(n,i,o,a){this[ji].put(n,i,o,a)}_get(n,i,o){this[ji].get(n,i,o)}_getMany(n,i,o){this[ji].getMany(n,i,o)}_del(n,i,o){this[ji].del(n,i,o)}_batch(n,i,o){this[ji].batch(n,i,o)}_clear(n,i){this[Zp](n,n.keyEncoding),this[ji].clear(n,i)}_iterator(n){this[Zp](n,n.keyEncoding);let i=this[ji].iterator(n),o=this[GE].get(this[Ha].utf8.length,n.keyEncoding);return new qV(this,n,i,o)}_keys(n){this[Zp](n,n.keyEncoding);let i=this[ji].keys(n),o=this[GE].get(this[Ha].utf8.length,n.keyEncoding);return new HV(this,n,i,o)}_values(n){this[Zp](n,n.keyEncoding);let i=this[ji].values(n);return new WV(this,n,i)}}return{AbstractSublevel:e}};var GV=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:YE(r,"utf8"),buffer:YE(r,"buffer"),view:YE(r,"view")}}},YE=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},s0=class{constructor(e){this.utf8=e,this.view=gF.encode(e),this.buffer=JE?JE.from(this.view.buffer,0,this.view.byteLength):{}}},XE=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},YV=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var r2=ee(t2=>{"use strict";var{supports:JV}=c4(),{Transcoder:XV}=M4(),{EventEmitter:QV}=Y4(),{fromCallback:pu}=jp(),_s=bs(),{AbstractIterator:Cf}=hu(),{DefaultKeyIterator:ZV,DefaultValueIterator:eG}=tF(),{DeferredIterator:tG,DeferredKeyIterator:rG,DeferredValueIterator:nG}=rF(),{DefaultChainedBatch:vF}=sF(),{getCallback:kf,getOptions:mu}=Hw(),a0=uF(),Et=Symbol("promise"),Wa=Symbol("landed"),If=Symbol("resources"),QE=Symbol("closeResources"),em=Symbol("operations"),tm=Symbol("undefer"),c0=Symbol("deferOpen"),_F=Symbol("options"),kt=Symbol("status"),Tf=Symbol("defaultOptions"),_h=Symbol("transcoder"),u0=Symbol("keyEncoding"),ZE=Symbol("valueEncoding"),iG=()=>{},rm=class extends QV{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=mu(t);let{keyEncoding:n,valueEncoding:i,passive:o,...a}=t;this[If]=new Set,this[em]=[],this[c0]=!0,this[_F]=a,this[kt]="opening",this.supports=JV(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[_h]=new XV(oG(this)),this[u0]=this[_h].encoding(n||"utf8"),this[ZE]=this[_h].encoding(i||"utf8");for(let u of this[_h].encodings())this.supports.encodings[u.commonName]||(this.supports.encodings[u.commonName]=!0);this[Tf]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[u0].commonName,valueEncoding:this[ZE].commonName}),key:Object.freeze({keyEncoding:this[u0].commonName})},this.nextTick(()=>{this[c0]&&this.open({passive:!1},iG)})}get status(){return this[kt]}keyEncoding(e){return this[_h].encoding(e??this[u0])}valueEncoding(e){return this[_h].encoding(e??this[ZE])}open(e,t){t=kf(e,t),t=pu(t,Et),e={...this[_F],...mu(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[kt]==="closing"||this[kt]==="opening"?this.once(Wa,i?()=>n(i):n):this[kt]!=="open"?t(new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[kt]==="opening"?this.once(Wa,n):this.nextTick(n):this[kt]==="closed"||this[c0]?(this[c0]=!1,this[kt]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[kt]="closed",this[QE](()=>{this.emit(Wa),n(i)}),this[tm]();return}this[kt]="open",this[tm](),this.emit(Wa),this[kt]==="open"&&this.emit("open"),this[kt]==="open"&&this.emit("ready"),n()})):this[kt]==="open"?this.nextTick(n):this.once(Wa,()=>this.open(e,t)),t[Et]}_open(e,t){this.nextTick(t)}close(e){e=pu(e,Et);let t=n=>{this[kt]==="opening"||this[kt]==="closing"?this.once(Wa,n?t(n):t):this[kt]!=="closed"?e(new _s("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[kt]==="open"){this[kt]="closing",this.emit("closing");let n=i=>{this[kt]="open",this[tm](),this.emit(Wa),t(i)};this[QE](()=>{this._close(i=>{if(i)return n(i);this[kt]="closed",this[tm](),this.emit(Wa),this[kt]==="closed"&&this.emit("closed"),t()})})}else this[kt]==="closed"?this.nextTick(t):this.once(Wa,()=>this.close(e));return e[Et]}[QE](e){if(this[If].size===0)return this.nextTick(e);let t=this[If].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[If])o.close(i);n=!1,this[If].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=kf(t,n),n=pu(n,Et),t=mu(t,this[Tf].entry),this[kt]==="opening")return this.defer(()=>this.get(e,t,n)),n[Et];if(xh(this,n))return n[Et];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[Et];let o=this.keyEncoding(t.keyEncoding),a=this.valueEncoding(t.valueEncoding),u=o.format,l=a.format;return(t.keyEncoding!==u||t.valueEncoding!==l)&&(t=Object.assign({},t,{keyEncoding:u,valueEncoding:l})),this._get(this.prefixKey(o.encode(e),u),t,(h,m)=>{if(h)return(h.code==="LEVEL_NOT_FOUND"||h.notFound||/NotFound/i.test(h))&&(h.code||(h.code="LEVEL_NOT_FOUND"),h.notFound||(h.notFound=!0),h.status||(h.status=404)),n(h);try{m=a.decode(m)}catch(y){return n(new _s("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:y}))}n(null,m)}),n[Et]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=kf(t,n),n=pu(n,Et),t=mu(t,this[Tf].entry),this[kt]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[Et];if(xh(this,n))return n[Et];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[Et];if(e.length===0)return this.nextTick(n,null,[]),n[Et];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),a=i.format,u=o.format;(t.keyEncoding!==a||t.valueEncoding!==u)&&(t=Object.assign({},t,{keyEncoding:a,valueEncoding:u}));let l=new Array(e.length);for(let h=0;h<e.length;h++){let m=e[h],y=this._checkKey(m);if(y)return this.nextTick(n,y),n[Et];l[h]=this.prefixKey(i.encode(m),a)}return this._getMany(l,t,(h,m)=>{if(h)return n(h);try{for(let y=0;y<m.length;y++)m[y]!==void 0&&(m[y]=o.decode(m[y]))}catch(y){return n(new _s(`Could not decode one or more of ${m.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:y}))}n(null,m)}),n[Et]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=kf(n,i),i=pu(i,Et),n=mu(n,this[Tf].entry),this[kt]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[Et];if(xh(this,i))return i[Et];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[Et];let a=this.keyEncoding(n.keyEncoding),u=this.valueEncoding(n.valueEncoding),l=a.format,h=u.format;(n.keyEncoding!==l||n.valueEncoding!==h)&&(n=Object.assign({},n,{keyEncoding:l,valueEncoding:h}));let m=this.prefixKey(a.encode(e),l),y=u.encode(t);return this._put(m,y,n,E=>{if(E)return i(E);this.emit("put",e,t),i()}),i[Et]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=kf(t,n),n=pu(n,Et),t=mu(t,this[Tf].key),this[kt]==="opening")return this.defer(()=>this.del(e,t,n)),n[Et];if(xh(this,n))return n[Et];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[Et];let o=this.keyEncoding(t.keyEncoding),a=o.format;return t.keyEncoding!==a&&(t=Object.assign({},t,{keyEncoding:a})),this._del(this.prefixKey(o.encode(e),a),t,u=>{if(u)return n(u);this.emit("del",e),n()}),n[Et]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[kt]==="opening")return new vF(this);if(this[kt]!=="open")throw new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=kf(t,n),n=pu(n,Et),t=mu(t,this[Tf].empty),this[kt]==="opening")return this.defer(()=>this.batch(e,t,n)),n[Et];if(xh(this,n))return n[Et];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[Et];if(e.length===0)return this.nextTick(n),n[Et];let i=new Array(e.length),{keyEncoding:o,valueEncoding:a,...u}=t;for(let l=0;l<e.length;l++){if(typeof e[l]!="object"||e[l]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[Et];let h=Object.assign({},e[l]);if(h.type!=="put"&&h.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[Et];let m=this._checkKey(h.key);if(m)return this.nextTick(n,m),n[Et];let y=h.sublevel!=null?h.sublevel:this,E=y.keyEncoding(h.keyEncoding||o),k=E.format;if(h.key=y.prefixKey(E.encode(h.key),k),h.keyEncoding=k,h.type==="put"){let T=this._checkValue(h.value);if(T)return this.nextTick(n,T),n[Et];let O=y.valueEncoding(h.valueEncoding||a);h.value=O.encode(h.value),h.valueEncoding=O.format}y!==this&&(h.sublevel=null),i[l]=h}return this._batch(i,u,l=>{if(l)return n(l);this.emit("batch",e),n()}),n[Et]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,e2.defaults(t))}_sublevel(e,t){return new e2(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=kf(e,t),t=pu(t,Et),e=mu(e,this[Tf].empty),this[kt]==="opening")return this.defer(()=>this.clear(e,t)),t[Et];if(xh(this,t))return t[Et];let n=e,i=this.keyEncoding(e.keyEncoding);return e=a0(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[Et]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=a0(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Cf.keyEncoding]=t,e[Cf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[kt]==="opening")return new tG(this,e);if(this[kt]!=="open")throw new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Cf(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=a0(e,t),e[Cf.keyEncoding]=t,e[Cf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[kt]==="opening")return new rG(this,e);if(this[kt]!=="open")throw new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new ZV(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=a0(e,t),e[Cf.keyEncoding]=t,e[Cf.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[kt]==="opening")return new nG(this,e);if(this[kt]!=="open")throw new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new eG(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[em].push(e)}[tm](){if(this[em].length===0)return;let e=this[em];this[em]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[If].add(e)}detachResource(e){this[If].delete(e)}_chainedBatch(){return new vF(this)}_checkKey(e){if(e==null)return new _s("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new _s("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};rm.prototype.nextTick=pF();var{AbstractSublevel:e2}=bF()({AbstractLevel:rm});t2.AbstractLevel=rm;t2.AbstractSublevel=e2;var xh=function(r,e){return r[kt]!=="open"?(r.nextTick(e,new _s("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},oG=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var n2=ee(Ff=>{"use strict";Ff.AbstractLevel=r2().AbstractLevel;Ff.AbstractSublevel=r2().AbstractSublevel;Ff.AbstractIterator=hu().AbstractIterator;Ff.AbstractKeyIterator=hu().AbstractKeyIterator;Ff.AbstractValueIterator=hu().AbstractValueIterator;Ff.AbstractChainedBatch=qE().AbstractChainedBatch});var EF=ee((ehe,xF)=>{xF.exports=aG;var sG=WE();function aG(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,a,u,l=!0,h;Array.isArray(r)?(n=[],o=i=r.length):(a=Object.keys(r),n={},o=i=a.length);function m(E){function k(){t&&t(E,n),t=null}l?sG(k):k()}function y(E,k,T){if(n[E]=T,k&&(u=!0),--o===0||k)m(k);else if(!u&&h<i){let O;a?(O=a[h],h+=1,r[O](function(ce,ne){y(O,ce,ne)})):(O=h,h+=1,r[O](function(ce,ne){y(O,ce,ne)}))}}h=e,o?a?a.some(function(E,k){return r[E](function(T,O){y(E,T,O)}),k===e-1}):r.some(function(E,k){return E(function(T,O){y(k,T,O)}),k===e-1}):m(null),l=!1}});var i2=ee((the,AF)=>{"use strict";AF.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var o2=ee((rhe,SF)=>{"use strict";var cG=new TextEncoder;SF.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):cG.encode(r)}});var IF=ee(kF=>{"use strict";var{AbstractIterator:uG}=n2(),PF=i2(),f0=o2(),sa=Symbol("cache"),Va=Symbol("finished"),qi=Symbol("options"),Ga=Symbol("currentOptions"),Bf=Symbol("position"),s2=Symbol("location"),Eh=Symbol("first"),DF={},a2=class extends uG{constructor(e,t,n){super(e,n),this[sa]=[],this[Va]=this.limit===0,this[qi]=n,this[Ga]={...n},this[Bf]=void 0,this[s2]=t,this[Eh]=!0}_nextv(e,t,n){if(this[Eh]=!1,this[Va])return this.nextTick(n,null,[]);if(this[sa].length>0)return e=Math.min(e,this[sa].length),this.nextTick(n,null,this[sa].splice(0,e));this[Bf]!==void 0&&(this[qi].reverse?(this[Ga].lt=this[Bf],this[Ga].lte=void 0):(this[Ga].gt=this[Bf],this[Ga].gte=void 0));let i;try{i=PF(this[Ga])}catch{return this[Va]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[s2]],"readonly"),a=o.objectStore(this[s2]),u=[];if(this[qi].reverse){let l=!this[qi].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[l](i,"prev").onsuccess=h=>{let m=h.target.result;if(m){let{key:y,value:E}=m;this[Bf]=y,u.push([this[qi].keys&&y!==void 0?f0(y):void 0,this[qi].values&&E!==void 0?f0(E):void 0]),u.length<e?m.continue():CF(o)}else this[Va]=!0}}else{let l,h,m=()=>{if(l===void 0||h===void 0)return;let y=Math.max(l.length,h.length);y===0||e===1/0?this[Va]=!0:this[Bf]=l[y-1],u.length=y;for(let E=0;E<y;E++){let k=l[E],T=h[E];u[E]=[this[qi].keys&&k!==void 0?f0(k):void 0,this[qi].values&&T!==void 0?f0(T):void 0]}CF(o)};this[qi].keys||e<1/0?a.getAllKeys(i,e<1/0?e:void 0).onsuccess=y=>{l=y.target.result,m()}:(l=[],this.nextTick(m)),this[qi].values?a.getAll(i,e<1/0?e:void 0).onsuccess=y=>{h=y.target.result,m()}:(h=[],this.nextTick(m))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,u),n=null}}_next(e){if(this[sa].length>0){let[t,n]=this[sa].shift();this.nextTick(e,null,t,n)}else if(this[Va])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[Eh]&&(this[Eh]=!1,t=1),this._nextv(t,DF,(n,i)=>{if(n)return e(n);this[sa]=i,this._next(e)})}}_all(e,t){this[Eh]=!1;let n=this[sa].splice(0,this[sa].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,DF,(o,a)=>{if(o)return t(o);n.length>0&&(a=n.concat(a)),t(null,a)})}_seek(e,t){this[Eh]=!0,this[sa]=[],this[Va]=!1,this[Bf]=void 0,this[Ga]={...this[qi]};let n;try{n=PF(this[qi])}catch{this[Va]=!0;return}n!==null&&!n.includes(e)?this[Va]=!0:this[qi].reverse?this[Ga].lte=e:this[Ga].gte=e}};kF.Iterator=a2;function CF(r){typeof r.commit=="function"&&r.commit()}});var FF=ee((ihe,TF)=>{"use strict";TF.exports=function(e,t,n,i,o){if(i.limit===0)return e.nextTick(o);let a=e.db.transaction([t],"readwrite"),u=a.objectStore(t),l=0;a.oncomplete=function(){o()},a.onabort=function(){o(a.error||new Error("aborted by user"))};let h=u.openKeyCursor?"openKeyCursor":"openCursor",m=i.reverse?"prev":"next";u[h](n,m).onsuccess=function(y){let E=y.target.result;E&&(u.delete(E.key).onsuccess=function(){(i.limit<=0||++l<i.limit)&&E.continue()})}}});var MF=ee(RF=>{"use strict";var{AbstractLevel:fG}=n2(),BF=bs(),lG=EF(),{fromCallback:hG}=jp(),{Iterator:dG}=IF(),LF=o2(),pG=FF(),mG=i2(),NF="level-js-",nm=Symbol("idb"),c2=Symbol("namePrefix"),Ya=Symbol("location"),u2=Symbol("version"),Lf=Symbol("store"),im=Symbol("onComplete"),OF=Symbol("promise"),l0=class extends fG{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new BF("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...a}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof e!="string")throw new Error("constructor requires a location string argument");this[Ya]=e,this[c2]=i??NF,this[u2]=parseInt(o||1,10),this[nm]=null}get location(){return this[Ya]}get namePrefix(){return this[c2]}get version(){return this[u2]}get db(){return this[nm]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[c2]+this[Ya],this[u2]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[nm]=n.result,t()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[Ya])||o.createObjectStore(this[Ya])}}[Lf](e){return this[nm].transaction([this[Ya]],e).objectStore(this[Ya])}[im](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[Lf]("readonly"),o;try{o=i.get(e)}catch(a){return this.nextTick(n,a)}this[im](o,function(a,u){if(a)return n(a);if(u===void 0)return n(new BF("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,LF(u))})}_getMany(e,t,n){let i=this[Lf]("readonly"),o=e.map(a=>u=>{let l;try{l=i.get(a)}catch(h){return u(h)}l.onsuccess=()=>{let h=l.result;u(null,h===void 0?h:LF(h))},l.onerror=h=>{h.stopPropagation(),u(l.error)}});lG(o,16,n)}_del(e,t,n){let i=this[Lf]("readwrite"),o;try{o=i.delete(e)}catch(a){return this.nextTick(n,a)}this[im](o,n)}_put(e,t,n,i){let o=this[Lf]("readwrite"),a;try{a=o.put(t,e)}catch(u){return this.nextTick(i,u)}this[im](a,i)}_iterator(e){return new dG(this,this[Ya],e)}_batch(e,t,n){let i=this[Lf]("readwrite"),o=i.transaction,a=0,u;o.onabort=function(){n(u||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function l(){let h=e[a++],m=h.key,y;try{y=h.type==="del"?i.delete(m):i.put(h.value,m)}catch(E){u=E,o.abort();return}a<e.length?y.onsuccess=l:typeof o.commit=="function"&&o.commit()}l()}_clear(e,t){let n,i;try{n=mG(e)}catch{return this.nextTick(t)}if(e.limit>=0)return pG(this,this[Ya],n,e,t);try{let o=this[Lf]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(t,o)}this[im](i,t)}_close(e){this[nm].close(),this.nextTick(e)}};l0.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=NF),t=hG(t,OF);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[OF]};RF.BrowserLevel=l0});var KF=ee(UF=>{UF.Level=MF().BrowserLevel});var iB=ee((nB,E0)=>{(function(r){var e={36:n(Math.pow(36,5)),16:n(Math.pow(16,7)),10:n(Math.pow(10,9)),2:n(Math.pow(2,30))},t={36:n(36),16:n(16),10:n(10),2:n(2)};function n(u,l){if(!(this instanceof n))return new n(u,l);if(this._low=0,this._high=0,this.remainder=null,typeof l>"u")return o.call(this,u);if(typeof u=="string")return a.call(this,u,l);i.call(this,u,l)}function i(u,l){return this._low=u|0,this._high=l|0,this}n.prototype.fromBits=i;function o(u){return this._low=u&65535,this._high=u>>>16,this}n.prototype.fromNumber=o;function a(u,l){var h=parseInt(u,l||10);return this._low=h&65535,this._high=h>>>16,this}n.prototype.fromString=a,n.prototype.toNumber=function(){return this._high*65536+this._low},n.prototype.toString=function(u){return this.toNumber().toString(u||10)},n.prototype.add=function(u){var l=this._low+u._low,h=l>>>16;return h+=this._high+u._high,this._low=l&65535,this._high=h&65535,this},n.prototype.subtract=function(u){return this.add(u.clone().negate())},n.prototype.multiply=function(u){var l=this._high,h=this._low,m=u._high,y=u._low,E,k;return k=h*y,E=k>>>16,E+=l*y,E&=65535,E+=h*m,this._low=k&65535,this._high=E&65535,this},n.prototype.div=function(u){if(u._low==0&&u._high==0)throw Error("division by zero");if(u._high==0&&u._low==1)return this.remainder=new n(0),this;if(u.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(u))return this.remainder=new n(0),this._low=1,this._high=0,this;for(var l=u.clone(),h=-1;!this.lt(l);)l.shiftLeft(1,!0),h++;for(this.remainder=this.clone(),this._low=0,this._high=0;h>=0;h--)l.shiftRight(1),this.remainder.lt(l)||(this.remainder.subtract(l),h>=16?this._high|=1<<h-16:this._low|=1<<h);return this},n.prototype.negate=function(){var u=(~this._low&65535)+1;return this._low=u&65535,this._high=~this._high+(u>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(u){return this._low==u._low&&this._high==u._high},n.prototype.greaterThan=n.prototype.gt=function(u){return this._high>u._high?!0:this._high<u._high?!1:this._low>u._low},n.prototype.lessThan=n.prototype.lt=function(u){return this._high<u._high?!0:this._high>u._high?!1:this._low<u._low},n.prototype.or=function(u){return this._low|=u._low,this._high|=u._high,this},n.prototype.and=function(u){return this._low&=u._low,this._high&=u._high,this},n.prototype.not=function(){return this._low=~this._low&65535,this._high=~this._high&65535,this},n.prototype.xor=function(u){return this._low^=u._low,this._high^=u._high,this},n.prototype.shiftRight=n.prototype.shiftr=function(u){return u>16?(this._low=this._high>>u-16,this._high=0):u==16?(this._low=this._high,this._high=0):(this._low=this._low>>u|this._high<<16-u&65535,this._high>>=u),this},n.prototype.shiftLeft=n.prototype.shiftl=function(u,l){return u>16?(this._high=this._low<<u-16,this._low=0,l||(this._high&=65535)):u==16?(this._high=this._low,this._low=0):(this._high=this._high<<u|this._low>>16-u,this._low=this._low<<u&65535,l||(this._high&=65535)),this},n.prototype.rotateLeft=n.prototype.rotl=function(u){var l=this._high<<16|this._low;return l=l<<u|l>>>32-u,this._low=l&65535,this._high=l>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(u){var l=this._high<<16|this._low;return l=l>>>u|l<<32-u,this._low=l&65535,this._high=l>>>16,this},n.prototype.clone=function(){return new n(this._low,this._high)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof E0<"u"&&E0.exports?E0.exports=n:r.UINT32=n})(nB)});var sB=ee((oB,A0)=>{(function(r){var e={16:n(Math.pow(16,5)),10:n(Math.pow(10,5)),2:n(Math.pow(2,5))},t={16:n(16),10:n(10),2:n(2)};function n(u,l,h,m){if(!(this instanceof n))return new n(u,l,h,m);if(this.remainder=null,typeof u=="string")return a.call(this,u,l);if(typeof l>"u")return o.call(this,u);i.apply(this,arguments)}function i(u,l,h,m){return typeof h>"u"?(this._a00=u&65535,this._a16=u>>>16,this._a32=l&65535,this._a48=l>>>16,this):(this._a00=u|0,this._a16=l|0,this._a32=h|0,this._a48=m|0,this)}n.prototype.fromBits=i;function o(u){return this._a00=u&65535,this._a16=u>>>16,this._a32=0,this._a48=0,this}n.prototype.fromNumber=o;function a(u,l){l=l||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var h=e[l]||new n(Math.pow(l,5)),m=0,y=u.length;m<y;m+=5){var E=Math.min(5,y-m),k=parseInt(u.slice(m,m+E),l);this.multiply(E<5?new n(Math.pow(l,E)):h).add(new n(k))}return this}n.prototype.fromString=a,n.prototype.toNumber=function(){return this._a16*65536+this._a00},n.prototype.toString=function(u){u=u||10;var l=t[u]||new n(u);if(!this.gt(l))return this.toNumber().toString(u);for(var h=this.clone(),m=new Array(64),y=63;y>=0&&(h.div(l),m[y]=h.remainder.toNumber().toString(u),!!h.gt(l));y--);return m[y-1]=h.toNumber().toString(u),m.join("")},n.prototype.add=function(u){var l=this._a00+u._a00,h=l>>>16;h+=this._a16+u._a16;var m=h>>>16;m+=this._a32+u._a32;var y=m>>>16;return y+=this._a48+u._a48,this._a00=l&65535,this._a16=h&65535,this._a32=m&65535,this._a48=y&65535,this},n.prototype.subtract=function(u){return this.add(u.clone().negate())},n.prototype.multiply=function(u){var l=this._a00,h=this._a16,m=this._a32,y=this._a48,E=u._a00,k=u._a16,T=u._a32,O=u._a48,ce=l*E,ne=ce>>>16;ne+=l*k;var ve=ne>>>16;ne&=65535,ne+=h*E,ve+=ne>>>16,ve+=l*T;var X=ve>>>16;return ve&=65535,ve+=h*k,X+=ve>>>16,ve&=65535,ve+=m*E,X+=ve>>>16,X+=l*O,X&=65535,X+=h*T,X&=65535,X+=m*k,X&=65535,X+=y*E,this._a00=ce&65535,this._a16=ne&65535,this._a32=ve&65535,this._a48=X&65535,this},n.prototype.div=function(u){if(u._a16==0&&u._a32==0&&u._a48==0){if(u._a00==0)throw Error("division by zero");if(u._a00==1)return this.remainder=new n(0),this}if(u.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(u))return this.remainder=new n(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var l=u.clone(),h=-1;!this.lt(l);)l.shiftLeft(1,!0),h++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;h>=0;h--)l.shiftRight(1),this.remainder.lt(l)||(this.remainder.subtract(l),h>=48?this._a48|=1<<h-48:h>=32?this._a32|=1<<h-32:h>=16?this._a16|=1<<h-16:this._a00|=1<<h);return this},n.prototype.negate=function(){var u=(~this._a00&65535)+1;return this._a00=u&65535,u=(~this._a16&65535)+(u>>>16),this._a16=u&65535,u=(~this._a32&65535)+(u>>>16),this._a32=u&65535,this._a48=~this._a48+(u>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(u){return this._a48==u._a48&&this._a00==u._a00&&this._a32==u._a32&&this._a16==u._a16},n.prototype.greaterThan=n.prototype.gt=function(u){return this._a48>u._a48?!0:this._a48<u._a48?!1:this._a32>u._a32?!0:this._a32<u._a32?!1:this._a16>u._a16?!0:this._a16<u._a16?!1:this._a00>u._a00},n.prototype.lessThan=n.prototype.lt=function(u){return this._a48<u._a48?!0:this._a48>u._a48?!1:this._a32<u._a32?!0:this._a32>u._a32?!1:this._a16<u._a16?!0:this._a16>u._a16?!1:this._a00<u._a00},n.prototype.or=function(u){return this._a00|=u._a00,this._a16|=u._a16,this._a32|=u._a32,this._a48|=u._a48,this},n.prototype.and=function(u){return this._a00&=u._a00,this._a16&=u._a16,this._a32&=u._a32,this._a48&=u._a48,this},n.prototype.xor=function(u){return this._a00^=u._a00,this._a16^=u._a16,this._a32^=u._a32,this._a48^=u._a48,this},n.prototype.not=function(){return this._a00=~this._a00&65535,this._a16=~this._a16&65535,this._a32=~this._a32&65535,this._a48=~this._a48&65535,this},n.prototype.shiftRight=n.prototype.shiftr=function(u){return u%=64,u>=48?(this._a00=this._a48>>u-48,this._a16=0,this._a32=0,this._a48=0):u>=32?(u-=32,this._a00=(this._a32>>u|this._a48<<16-u)&65535,this._a16=this._a48>>u&65535,this._a32=0,this._a48=0):u>=16?(u-=16,this._a00=(this._a16>>u|this._a32<<16-u)&65535,this._a16=(this._a32>>u|this._a48<<16-u)&65535,this._a32=this._a48>>u&65535,this._a48=0):(this._a00=(this._a00>>u|this._a16<<16-u)&65535,this._a16=(this._a16>>u|this._a32<<16-u)&65535,this._a32=(this._a32>>u|this._a48<<16-u)&65535,this._a48=this._a48>>u&65535),this},n.prototype.shiftLeft=n.prototype.shiftl=function(u,l){return u%=64,u>=48?(this._a48=this._a00<<u-48,this._a32=0,this._a16=0,this._a00=0):u>=32?(u-=32,this._a48=this._a16<<u|this._a00>>16-u,this._a32=this._a00<<u&65535,this._a16=0,this._a00=0):u>=16?(u-=16,this._a48=this._a32<<u|this._a16>>16-u,this._a32=(this._a16<<u|this._a00>>16-u)&65535,this._a16=this._a00<<u&65535,this._a00=0):(this._a48=this._a48<<u|this._a32>>16-u,this._a32=(this._a32<<u|this._a16>>16-u)&65535,this._a16=(this._a16<<u|this._a00>>16-u)&65535,this._a00=this._a00<<u&65535),l||(this._a48&=65535),this},n.prototype.rotateLeft=n.prototype.rotl=function(u){if(u%=64,u==0)return this;if(u>=32){var l=this._a00;if(this._a00=this._a32,this._a32=l,l=this._a48,this._a48=this._a16,this._a16=l,u==32)return this;u-=32}var h=this._a48<<16|this._a32,m=this._a16<<16|this._a00,y=h<<u|m>>>32-u,E=m<<u|h>>>32-u;return this._a00=E&65535,this._a16=E>>>16,this._a32=y&65535,this._a48=y>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(u){if(u%=64,u==0)return this;if(u>=32){var l=this._a00;if(this._a00=this._a32,this._a32=l,l=this._a48,this._a48=this._a16,this._a16=l,u==32)return this;u-=32}var h=this._a48<<16|this._a32,m=this._a16<<16|this._a00,y=h>>>u|m<<32-u,E=m>>>u|h<<32-u;return this._a00=E&65535,this._a16=E>>>16,this._a32=y&65535,this._a48=y>>>16,this},n.prototype.clone=function(){return new n(this._a00,this._a16,this._a32,this._a48)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof A0<"u"&&A0.exports?A0.exports=n:r.UINT64=n})(oB)});var I2=ee(k2=>{k2.UINT32=iB();k2.UINT64=sB()});var lB=ee((zhe,fB)=>{var Za=I2().UINT32;Za.prototype.xxh_update=function(r,e){var t=dm._low,n=dm._high,i,o;o=r*t,i=o>>>16,i+=e*t,i&=65535,i+=r*n;var a=this._low+(o&65535),u=a>>>16;u+=this._high+(i&65535);var l=u<<16|a&65535;l=l<<13|l>>>19,a=l&65535,u=l>>>16,t=hm._low,n=hm._high,o=a*t,i=o>>>16,i+=u*t,i&=65535,i+=a*n,this._low=o&65535,this._high=i&65535};var hm=Za("2654435761"),dm=Za("2246822519"),aB=Za("3266489917"),RG=Za("668265263"),cB=Za("374761393");function MG(r){for(var e=[],t=0,n=r.length;t<n;t++){var i=r.charCodeAt(t);i<128?e.push(i):i<2048?e.push(192|i>>6,128|i&63):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|i&63):(t++,i=65536+((i&1023)<<10|r.charCodeAt(t)&1023),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return new Uint8Array(e)}function Uf(){if(arguments.length==2)return new Uf(arguments[1]).update(arguments[0]).digest();if(!(this instanceof Uf))return new Uf(arguments[0]);uB.call(this,arguments[0])}function uB(r){return this.seed=r instanceof Za?r.clone():Za(r),this.v1=this.seed.clone().add(hm).add(dm),this.v2=this.seed.clone().add(dm),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(hm),this.total_len=0,this.memsize=0,this.memory=null,this}Uf.prototype.init=uB;Uf.prototype.update=function(r){var e=typeof r=="string",t;e&&(r=MG(r),e=!1,t=!0),typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer&&(t=!0,r=new Uint8Array(r));var n=0,i=r.length,o=n+i;if(i==0)return this;if(this.total_len+=i,this.memsize==0&&(e?this.memory="":t?this.memory=new Uint8Array(16):this.memory=new Buffer(16)),this.memsize+i<16)return e?this.memory+=r:t?this.memory.set(r.subarray(0,i),this.memsize):r.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){e?this.memory+=r.slice(0,16-this.memsize):t?this.memory.set(r.subarray(0,16-this.memsize),this.memsize):r.copy(this.memory,this.memsize,0,16-this.memsize);var a=0;e?(this.v1.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v2.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v3.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v4.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2))):(this.v1.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v2.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v3.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v4.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2])),n+=16-this.memsize,this.memsize=0,e&&(this.memory="")}if(n<=o-16){var u=o-16;do e?(this.v1.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v2.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v3.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)),n+=4,this.v4.xxh_update(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2))):(this.v1.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v2.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v3.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),n+=4,this.v4.xxh_update(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2])),n+=4;while(n<=u)}return n<o&&(e?this.memory+=r.slice(n):t?this.memory.set(r.subarray(n,o),this.memsize):r.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this};Uf.prototype.digest=function(){var r=this.memory,e=typeof r=="string",t=0,n=this.memsize,i,o,a=new Za;for(this.total_len>=16?i=this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):i=this.seed.clone().add(cB),i.add(a.fromNumber(this.total_len));t<=n-4;)e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2)):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2]),i.add(a.multiply(aB)).rotl(17).multiply(RG),t+=4;for(;t<n;)a.fromBits(e?r.charCodeAt(t++):r[t++],0),i.add(a.multiply(cB)).rotl(11).multiply(hm);return o=i.clone().shiftRight(15),i.xor(o).multiply(dm),o=i.clone().shiftRight(13),i.xor(o).multiply(aB),o=i.clone().shiftRight(16),i.xor(o),this.init(this.seed),i};fB.exports=Uf});var yB=ee((jhe,mB)=>{var _r=I2().UINT64,Gt=_r("11400714785074694791"),pr=_r("14029467366897019727"),hB=_r("1609587929392839161"),pm=_r("9650029242287828579"),dB=_r("2870177450012600261");function UG(r){for(var e=[],t=0,n=r.length;t<n;t++){var i=r.charCodeAt(t);i<128?e.push(i):i<2048?e.push(192|i>>6,128|i&63):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|i&63):(t++,i=65536+((i&1023)<<10|r.charCodeAt(t)&1023),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return new Uint8Array(e)}function Kf(){if(arguments.length==2)return new Kf(arguments[1]).update(arguments[0]).digest();if(!(this instanceof Kf))return new Kf(arguments[0]);pB.call(this,arguments[0])}function pB(r){return this.seed=r instanceof _r?r.clone():_r(r),this.v1=this.seed.clone().add(Gt).add(pr),this.v2=this.seed.clone().add(pr),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(Gt),this.total_len=0,this.memsize=0,this.memory=null,this}Kf.prototype.init=pB;Kf.prototype.update=function(r){var e=typeof r=="string",t;e&&(r=UG(r),e=!1,t=!0),typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer&&(t=!0,r=new Uint8Array(r));var n=0,i=r.length,o=n+i;if(i==0)return this;if(this.total_len+=i,this.memsize==0&&(e?this.memory="":t?this.memory=new Uint8Array(32):this.memory=new Buffer(32)),this.memsize+i<32)return e?this.memory+=r:t?this.memory.set(r.subarray(0,i),this.memsize):r.copy(this.memory,this.memsize,0,i),this.memsize+=i,this;if(this.memsize>0){e?this.memory+=r.slice(0,32-this.memsize):t?this.memory.set(r.subarray(0,32-this.memsize),this.memsize):r.copy(this.memory,this.memsize,0,32-this.memsize);var a=0;if(e){var u;u=_r(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v1.add(u.multiply(pr)).rotl(31).multiply(Gt),a+=8,u=_r(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v2.add(u.multiply(pr)).rotl(31).multiply(Gt),a+=8,u=_r(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v3.add(u.multiply(pr)).rotl(31).multiply(Gt),a+=8,u=_r(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v4.add(u.multiply(pr)).rotl(31).multiply(Gt)}else{var u;u=_r(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v1.add(u.multiply(pr)).rotl(31).multiply(Gt),a+=8,u=_r(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v2.add(u.multiply(pr)).rotl(31).multiply(Gt),a+=8,u=_r(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v3.add(u.multiply(pr)).rotl(31).multiply(Gt),a+=8,u=_r(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v4.add(u.multiply(pr)).rotl(31).multiply(Gt)}n+=32-this.memsize,this.memsize=0,e&&(this.memory="")}if(n<=o-32){var l=o-32;do{if(e){var u;u=_r(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v1.add(u.multiply(pr)).rotl(31).multiply(Gt),n+=8,u=_r(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v2.add(u.multiply(pr)).rotl(31).multiply(Gt),n+=8,u=_r(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v3.add(u.multiply(pr)).rotl(31).multiply(Gt),n+=8,u=_r(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2),r.charCodeAt(n+5)<<8|r.charCodeAt(n+4),r.charCodeAt(n+7)<<8|r.charCodeAt(n+6)),this.v4.add(u.multiply(pr)).rotl(31).multiply(Gt)}else{var u;u=_r(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v1.add(u.multiply(pr)).rotl(31).multiply(Gt),n+=8,u=_r(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v2.add(u.multiply(pr)).rotl(31).multiply(Gt),n+=8,u=_r(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v3.add(u.multiply(pr)).rotl(31).multiply(Gt),n+=8,u=_r(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2],r[n+5]<<8|r[n+4],r[n+7]<<8|r[n+6]),this.v4.add(u.multiply(pr)).rotl(31).multiply(Gt)}n+=8}while(n<=l)}return n<o&&(e?this.memory+=r.slice(n):t?this.memory.set(r.subarray(n,o),this.memsize):r.copy(this.memory,this.memsize,n,o),this.memsize=o-n),this};Kf.prototype.digest=function(){var r=this.memory,e=typeof r=="string",t=0,n=this.memsize,i,o,a=new _r;for(this.total_len>=32?(i=this.v1.clone().rotl(1),i.add(this.v2.clone().rotl(7)),i.add(this.v3.clone().rotl(12)),i.add(this.v4.clone().rotl(18)),i.xor(this.v1.multiply(pr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pm),i.xor(this.v2.multiply(pr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pm),i.xor(this.v3.multiply(pr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pm),i.xor(this.v4.multiply(pr).rotl(31).multiply(Gt)),i.multiply(Gt).add(pm)):i=this.seed.clone().add(dB),i.add(a.fromNumber(this.total_len));t<=n-8;)e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2),r.charCodeAt(t+5)<<8|r.charCodeAt(t+4),r.charCodeAt(t+7)<<8|r.charCodeAt(t+6)):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2],r[t+5]<<8|r[t+4],r[t+7]<<8|r[t+6]),a.multiply(pr).rotl(31).multiply(Gt),i.xor(a).rotl(27).multiply(Gt).add(pm),t+=8;for(t+4<=n&&(e?a.fromBits(r.charCodeAt(t+1)<<8|r.charCodeAt(t),r.charCodeAt(t+3)<<8|r.charCodeAt(t+2),0,0):a.fromBits(r[t+1]<<8|r[t],r[t+3]<<8|r[t+2],0,0),i.xor(a.multiply(Gt)).rotl(23).multiply(pr).add(hB),t+=4);t<n;)a.fromBits(e?r.charCodeAt(t++):r[t++],0,0,0),i.xor(a.multiply(dB)).rotl(11).multiply(Gt);return o=i.clone().shiftRight(33),i.xor(o).multiply(pr),o=i.clone().shiftRight(29),i.xor(o).multiply(hB),o=i.clone().shiftRight(32),i.xor(o),this.init(this.seed),i};mB.exports=Kf});var wB=ee((qhe,gB)=>{gB.exports={h32:lB(),h64:yB()}});var Lo=ee(xr=>{"use strict";var KG=xr&&xr.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$G=xr&&xr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xr,"__esModule",{value:!0});var Xn=$G(wB()),zG=vf();function jG(r,e){for(var t=new Array(r),n=typeof e=="function"?e:function(){return e},i=0;i<r;i++)t[i]=n();return t}xr.allocateArray=jG;function T2(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=ec());var n=Xn.default.h64(r,t+1),i=Xn.default.h64(r,t+2);if(e)return{first:n.toNumber(),second:i.toNumber()};var o=n.toString(16);o.length<16&&(o="0".repeat(16-o.length)+o);var a=i.toString(16);return a.length<16&&(a="0".repeat(16-a.length)+a),{first:Number(o),second:Number(a)}}xr.hashTwice=T2;function qG(r,e){e===void 0&&(e=ec());var t=Xn.default.h64(r,e+1),n=Xn.default.h64(r,e+2),i=t.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{first:i,second:o}}xr.hashTwiceAsString=qG;function HG(r,e){e===void 0&&(e=ec());var t=Xn.default.h64(r,e+1),n=Xn.default.h64(r,e+2),i=t.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var o=n.toString(16);return o.length<16&&(o="0".repeat(16-o.length)+o),{int:{first:t.toNumber(),second:n.toNumber()},string:{first:i,second:o}}}xr.allInOneHashTwice=HG;function F2(r,e,t,n){return Math.abs((e+r*t)%n)}xr.doubleHashing=F2;function WG(r,e,t,n){n===void 0&&(n=ec());function i(o,a,u,l,h){if(h===void 0&&(h=[]),h.length===l)return h;var m=T2(a,!0,n+u%o),y=F2(o,m.first,m.second,u);return h.includes(y)||h.push(y),i(o+1,a,u,l,h)}return i(1,r,e,t)}xr.getDistinctIndices=WG;function VG(r,e,t,n){n===void 0&&(n=ec());for(var i=[],o=1;o<=t;o++){var a=T2(r,!0,n+e%o);i.push(F2(o,a.first,a.second,e))}if(i.length!==t)throw new Error("report this, please, shouldnt be of different size");return i}xr.getIndices=VG;function GG(r,e,t){t===void 0&&(t=Math.random),r=Math.ceil(r),e=Math.floor(e);var n=t();return Math.floor(n*(e-r+1))+r}xr.randomInt=GG;function YG(r,e){for(var t=Math.max(r.length,e.length),n=zG.Buffer.allocUnsafe(t).fill(0),i=0;i<t;++i)i<r.length&&i<e.length?n[t-i-1]=r[r.length-i-1]^e[e.length-i-1]:i<r.length&&i>=e.length?n[t-i-1]^=r[r.length-i-1]:i<e.length&&i>=r.length&&(n[t-i-1]^=e[e.length-i-1]);for(var o=0,a=n.values(),u=a.next();!u.done&&u.value===0;)o++,u=a.next();var l=n.slice(o);return l}xr.xorBuffer=YG;function JG(r){var e,t;if(r===null||!r)return!0;try{for(var n=KG(r),i=n.next();!i.done;i=n.next()){var o=i.value;if(o!==0)return!1}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return!0}xr.isEmptyBuffer=JG;function XG(r,e,t){switch(e===void 0&&(e=ec()),t){case 32:return Xn.default.h32(r,e).toNumber();case 64:return Xn.default.h64(r,e).toNumber();default:return Xn.default.h64(r,e).toNumber()}}xr.hashAsInt=XG;function QG(r,e,t,n){e===void 0&&(e=ec()),t===void 0&&(t=16),n===void 0&&(n=64);var i;switch(n){case 32:i=Xn.default.h32(r,e);break;case 64:i=Xn.default.h64(r,e);break;default:i=Xn.default.h64(r,e);break}var o="";return t===16?(o=i.toString(t),o.length<n/4&&(o="0".repeat(n/4-o.length)+o)):t===2&&(o=B2(i.toString(16)),o.length<n&&(o="0".repeat(n-o.length)+o)),o}xr.hashAsString=QG;function ZG(r,e,t,n){e===void 0&&(e=ec()),t===void 0&&(t=16),n===void 0&&(n=64);var i;switch(n){case 32:i=Xn.default.h32(r,e);break;case 64:i=Xn.default.h64(r,e);break;default:i=Xn.default.h64(r,e);break}var o="";return t===16?(o=i.toString(t),o.length<n/4&&(o="0".repeat(n/4-o.length)+o)):t===2&&(o=B2(i.toString(16)),o.length<n&&(o="0".repeat(n-o.length)+o)),{int:i.toNumber(),string:o}}xr.hashIntAndString=ZG;function ec(){return 78187493520}xr.getDefaultSeed=ec;function eY(r){return Math.ceil(Math.pow(2,Math.floor(Math.log(r)/Math.log(2))))}xr.power2=eY;function B2(r){return parseInt(r,16).toString(2)}xr.hex2bin=B2;function tY(r){return[128,64,32,16,8,4,2,1].map(function(e){return(e&r)>0?1:0})}xr.uint8ToBits=tY;function rY(r){return r.reduce(function(e,t,n){if(t===0)return e;if(t===1)return e+Math.pow(2,7-n);throw new Error("Not binary")},0)}xr.bitsToUint8=rY});var vB=ee((bB,L2)=>{(function(r,e,t){function n(u){var l=this,h=a();l.next=function(){var m=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=m-(l.c=m|0)},l.c=1,l.s0=h(" "),l.s1=h(" "),l.s2=h(" "),l.s0-=h(u),l.s0<0&&(l.s0+=1),l.s1-=h(u),l.s1<0&&(l.s1+=1),l.s2-=h(u),l.s2<0&&(l.s2+=1),h=null}function i(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var h=new n(u),m=l&&l.state,y=h.next;return y.int32=function(){return h.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,m&&(typeof m=="object"&&i(m,h),y.state=function(){return i(h,{})}),y}function a(){var u=4022871197,l=function(h){h=String(h);for(var m=0;m<h.length;m++){u+=h.charCodeAt(m);var y=.02519603282416938*u;u=y>>>0,y-=u,y*=u,u=y>>>0,y-=u,u+=y*4294967296}return(u>>>0)*23283064365386963e-26};return l}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.alea=o})(bB,typeof L2=="object"&&L2,typeof define=="function"&&define)});var xB=ee((_B,O2)=>{(function(r,e,t){function n(a){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var m=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^m^m>>>8},a===(a|0)?u.x=a:l+=a;for(var h=0;h<l.length+64;h++)u.x^=l.charCodeAt(h)|0,u.next()}function i(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function o(a,u){var l=new n(a),h=u&&u.state,m=function(){return(l.next()>>>0)/4294967296};return m.double=function(){do var y=l.next()>>>11,E=(l.next()>>>0)/4294967296,k=(y+E)/(1<<21);while(k===0);return k},m.int32=l.next,m.quick=m,h&&(typeof h=="object"&&i(h,l),m.state=function(){return i(l,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor128=o})(_B,typeof O2=="object"&&O2,typeof define=="function"&&define)});var AB=ee((EB,N2)=>{(function(r,e,t){function n(a){var u=this,l="";u.next=function(){var m=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(m^m<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(a|0)?u.x=a:l+=a;for(var h=0;h<l.length+64;h++)u.x^=l.charCodeAt(h)|0,h==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function o(a,u){var l=new n(a),h=u&&u.state,m=function(){return(l.next()>>>0)/4294967296};return m.double=function(){do var y=l.next()>>>11,E=(l.next()>>>0)/4294967296,k=(y+E)/(1<<21);while(k===0);return k},m.int32=l.next,m.quick=m,h&&(typeof h=="object"&&i(h,l),m.state=function(){return i(l,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorwow=o})(EB,typeof N2=="object"&&N2,typeof define=="function"&&define)});var PB=ee((SB,R2)=>{(function(r,e,t){function n(a){var u=this;u.next=function(){var h=u.x,m=u.i,y,E,k;return y=h[m],y^=y>>>7,E=y^y<<24,y=h[m+1&7],E^=y^y>>>10,y=h[m+3&7],E^=y^y>>>3,y=h[m+4&7],E^=y^y<<7,y=h[m+7&7],y=y^y<<13,E^=y^y<<9,h[m]=E,u.i=m+1&7,E};function l(h,m){var y,E,k=[];if(m===(m|0))E=k[0]=m;else for(m=""+m,y=0;y<m.length;++y)k[y&7]=k[y&7]<<15^m.charCodeAt(y)+k[y+1&7]<<13;for(;k.length<8;)k.push(0);for(y=0;y<8&&k[y]===0;++y);for(y==8?E=k[7]=-1:E=k[y],h.x=k,h.i=0,y=256;y>0;--y)h.next()}l(u,a)}function i(a,u){return u.x=a.x.slice(),u.i=a.i,u}function o(a,u){a==null&&(a=+new Date);var l=new n(a),h=u&&u.state,m=function(){return(l.next()>>>0)/4294967296};return m.double=function(){do var y=l.next()>>>11,E=(l.next()>>>0)/4294967296,k=(y+E)/(1<<21);while(k===0);return k},m.int32=l.next,m.quick=m,h&&(h.x&&i(h,l),m.state=function(){return i(l,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xorshift7=o})(SB,typeof R2=="object"&&R2,typeof define=="function"&&define)});var CB=ee((DB,M2)=>{(function(r,e,t){function n(a){var u=this;u.next=function(){var h=u.w,m=u.X,y=u.i,E,k;return u.w=h=h+1640531527|0,k=m[y+34&127],E=m[y=y+1&127],k^=k<<13,E^=E<<17,k^=k>>>15,E^=E>>>12,k=m[y]=k^E,u.i=y,k+(h^h>>>16)|0};function l(h,m){var y,E,k,T,O,ce=[],ne=128;for(m===(m|0)?(E=m,m=null):(m=m+"\0",E=0,ne=Math.max(ne,m.length)),k=0,T=-32;T<ne;++T)m&&(E^=m.charCodeAt((T+32)%m.length)),T===0&&(O=E),E^=E<<10,E^=E>>>15,E^=E<<4,E^=E>>>13,T>=0&&(O=O+1640531527|0,y=ce[T&127]^=E+O,k=y==0?k+1:0);for(k>=128&&(ce[(m&&m.length||0)&127]=-1),k=127,T=4*128;T>0;--T)E=ce[k+34&127],y=ce[k=k+1&127],E^=E<<13,y^=y<<17,E^=E>>>15,y^=y>>>12,ce[k]=E^y;h.w=O,h.X=ce,h.i=k}l(u,a)}function i(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function o(a,u){a==null&&(a=+new Date);var l=new n(a),h=u&&u.state,m=function(){return(l.next()>>>0)/4294967296};return m.double=function(){do var y=l.next()>>>11,E=(l.next()>>>0)/4294967296,k=(y+E)/(1<<21);while(k===0);return k},m.int32=l.next,m.quick=m,h&&(h.X&&i(h,l),m.state=function(){return i(l,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.xor4096=o})(DB,typeof M2=="object"&&M2,typeof define=="function"&&define)});var IB=ee((kB,U2)=>{(function(r,e,t){function n(a){var u=this,l="";u.next=function(){var m=u.b,y=u.c,E=u.d,k=u.a;return m=m<<25^m>>>7^y,y=y-E|0,E=E<<24^E>>>8^k,k=k-m|0,u.b=m=m<<20^m>>>12^y,u.c=y=y-E|0,u.d=E<<16^y>>>16^k,u.a=k-m|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=a|0):l+=a;for(var h=0;h<l.length+20;h++)u.b^=l.charCodeAt(h)|0,u.next()}function i(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function o(a,u){var l=new n(a),h=u&&u.state,m=function(){return(l.next()>>>0)/4294967296};return m.double=function(){do var y=l.next()>>>11,E=(l.next()>>>0)/4294967296,k=(y+E)/(1<<21);while(k===0);return k},m.int32=l.next,m.quick=m,h&&(typeof h=="object"&&i(h,l),m.state=function(){return i(l,{})}),m}e&&e.exports?e.exports=o:t&&t.amd?t(function(){return o}):this.tychei=o})(kB,typeof U2=="object"&&U2,typeof define=="function"&&define)});var FB=ee((TB,S0)=>{(function(r,e,t){var n=256,i=6,o=52,a="random",u=t.pow(n,i),l=t.pow(2,o),h=l*2,m=n-1,y;function E(X,me,be){var W=[];me=me==!0?{entropy:!0}:me||{};var de=ce(O(me.entropy?[X,ve(e)]:X??ne(),3),W),ge=new k(W),Ue=function(){for(var St=ge.g(i),$t=u,Bt=0;St<l;)St=(St+Bt)*n,$t*=n,Bt=ge.g(1);for(;St>=h;)St/=2,$t/=2,Bt>>>=1;return(St+Bt)/$t};return Ue.int32=function(){return ge.g(4)|0},Ue.quick=function(){return ge.g(4)/4294967296},Ue.double=Ue,ce(ve(ge.S),e),(me.pass||be||function(St,$t,Bt,qt){return qt&&(qt.S&&T(qt,ge),St.state=function(){return T(ge,{})}),Bt?(t[a]=St,$t):St})(Ue,de,"global"in me?me.global:this==t,me.state)}function k(X){var me,be=X.length,W=this,de=0,ge=W.i=W.j=0,Ue=W.S=[];for(be||(X=[be++]);de<n;)Ue[de]=de++;for(de=0;de<n;de++)Ue[de]=Ue[ge=m&ge+X[de%be]+(me=Ue[de])],Ue[ge]=me;(W.g=function(St){for(var $t,Bt=0,qt=W.i,yr=W.j,Ut=W.S;St--;)$t=Ut[qt=m&qt+1],Bt=Bt*n+Ut[m&(Ut[qt]=Ut[yr=m&yr+$t])+(Ut[yr]=$t)];return W.i=qt,W.j=yr,Bt})(n)}function T(X,me){return me.i=X.i,me.j=X.j,me.S=X.S.slice(),me}function O(X,me){var be=[],W=typeof X,de;if(me&&W=="object")for(de in X)try{be.push(O(X[de],me-1))}catch{}return be.length?be:W=="string"?X:X+"\0"}function ce(X,me){for(var be=X+"",W,de=0;de<be.length;)me[m&de]=m&(W^=me[m&de]*19)+be.charCodeAt(de++);return ve(me)}function ne(){try{var X;return y&&(X=y.randomBytes)?X=X(n):(X=new Uint8Array(n),(r.crypto||r.msCrypto).getRandomValues(X)),ve(X)}catch{var me=r.navigator,be=me&&me.plugins;return[+new Date,r,be,r.screen,ve(e)]}}function ve(X){return String.fromCharCode.apply(0,X)}if(ce(t.random(),e),typeof S0=="object"&&S0.exports){S0.exports=E;try{y=o_()}catch{}}else typeof define=="function"&&define.amd?define(function(){return E}):t["seed"+a]=E})(typeof self<"u"?self:TB,[],Math)});var LB=ee((Whe,BB)=>{var nY=vB(),iY=xB(),oY=AB(),sY=PB(),aY=CB(),cY=IB(),$f=FB();$f.alea=nY;$f.xor128=iY;$f.xorwow=oY;$f.xorshift7=sY;$f.xor4096=aY;$f.tychei=cY;BB.exports=$f});var Es=ee(zf=>{"use strict";var uY=zf&&zf.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},fY=zf&&zf.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zf,"__esModule",{value:!0});var lY=uY(Lo()),OB=fY(LB()),hY=function(){function r(){this._seed=lY.getDefaultSeed(),this._rng=OB.default(""+this._seed)}return Object.defineProperty(r.prototype,"seed",{get:function(){return this._seed},set:function(e){this._seed=e,this._rng=OB.default(""+this._seed)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"random",{get:function(){return this._rng},enumerable:!0,configurable:!0}),r.prototype.saveAsJSON=function(){throw new Error("not-implemented")},r.fromJSON=function(e){throw new Error("not-implemented")},r}();zf.default=hY});var RB=ee(()=>{var NB;(function(r){(function(e){var t=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(r);typeof t.Reflect>"u"?t.Reflect=r:n=i(t.Reflect,n),e(n);function i(o,a){return function(u,l){typeof o[u]!="function"&&Object.defineProperty(o,u,{configurable:!0,writable:!0,value:l}),a&&a(u,l)}}})(function(e){var t=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",u={__proto__:[]}instanceof Array,l=!a&&!u,h={create:a?function(){return xn(Object.create(null))}:u?function(){return xn({__proto__:null})}:function(){return xn({})},has:l?function(K,G){return t.call(K,G)}:function(K,G){return G in K},get:l?function(K,G){return t.call(K,G)?K[G]:void 0}:function(K,G){return K[G]}},m=Object.getPrototypeOf(Function),y=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",E=!y&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ni(),k=!y&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ii(),T=!y&&typeof WeakMap=="function"?WeakMap:$o(),O=new T;function ce(K,G,le,_e){if(er(le)){if(!ro(K))throw new TypeError;if(!tn(G))throw new TypeError;return St(K,G)}else{if(!ro(K))throw new TypeError;if(!Ve(G))throw new TypeError;if(!Ve(_e)&&!er(_e)&&!Ht(_e))throw new TypeError;return Ht(_e)&&(_e=void 0),le=Kr(le),$t(K,G,le,_e)}}e("decorate",ce);function ne(K,G){function le(_e,$e){if(!Ve(_e))throw new TypeError;if(!er($e)&&!Ko($e))throw new TypeError;Un(K,G,_e,$e)}return le}e("metadata",ne);function ve(K,G,le,_e){if(!Ve(le))throw new TypeError;return er(_e)||(_e=Kr(_e)),Un(K,G,le,_e)}e("defineMetadata",ve);function X(K,G,le){if(!Ve(G))throw new TypeError;return er(le)||(le=Kr(le)),qt(K,G,le)}e("hasMetadata",X);function me(K,G,le){if(!Ve(G))throw new TypeError;return er(le)||(le=Kr(le)),yr(K,G,le)}e("hasOwnMetadata",me);function be(K,G,le){if(!Ve(G))throw new TypeError;return er(le)||(le=Kr(le)),Ut(K,G,le)}e("getMetadata",be);function W(K,G,le){if(!Ve(G))throw new TypeError;return er(le)||(le=Kr(le)),Wr(K,G,le)}e("getOwnMetadata",W);function de(K,G){if(!Ve(K))throw new TypeError;return er(G)||(G=Kr(G)),Ur(K,G)}e("getMetadataKeys",de);function ge(K,G){if(!Ve(K))throw new TypeError;return er(G)||(G=Kr(G)),en(K,G)}e("getOwnMetadataKeys",ge);function Ue(K,G,le){if(!Ve(G))throw new TypeError;er(le)||(le=Kr(le));var _e=Bt(G,le,!1);if(er(_e)||!_e.delete(K))return!1;if(_e.size>0)return!0;var $e=O.get(G);return $e.delete(le),$e.size>0||O.delete(G),!0}e("deleteMetadata",Ue);function St(K,G){for(var le=K.length-1;le>=0;--le){var _e=K[le],$e=_e(G);if(!er($e)&&!Ht($e)){if(!tn($e))throw new TypeError;G=$e}}return G}function $t(K,G,le,_e){for(var $e=K.length-1;$e>=0;--$e){var sr=K[$e],tt=sr(G,le,_e);if(!er(tt)&&!Ht(tt)){if(!Ve(tt))throw new TypeError;_e=tt}}return _e}function Bt(K,G,le){var _e=O.get(K);if(er(_e)){if(!le)return;_e=new E,O.set(K,_e)}var $e=_e.get(G);if(er($e)){if(!le)return;$e=new E,_e.set(G,$e)}return $e}function qt(K,G,le){var _e=yr(K,G,le);if(_e)return!0;var $e=lr(G);return Ht($e)?!1:qt(K,$e,le)}function yr(K,G,le){var _e=Bt(G,le,!1);return er(_e)?!1:to(_e.has(K))}function Ut(K,G,le){var _e=yr(K,G,le);if(_e)return Wr(K,G,le);var $e=lr(G);if(!Ht($e))return Ut(K,$e,le)}function Wr(K,G,le){var _e=Bt(G,le,!1);if(!er(_e))return _e.get(K)}function Un(K,G,le,_e){var $e=Bt(le,_e,!0);$e.set(K,G)}function Ur(K,G){var le=en(K,G),_e=lr(K);if(_e===null)return le;var $e=Ur(_e,G);if($e.length<=0)return le;if(le.length<=0)return $e;for(var sr=new k,tt=[],ct=0,He=le;ct<He.length;ct++){var mt=He[ct],ht=sr.has(mt);ht||(sr.add(mt),tt.push(mt))}for(var Cr=0,zo=$e;Cr<zo.length;Cr++){var mt=zo[Cr],ht=sr.has(mt);ht||(sr.add(mt),tt.push(mt))}return tt}function en(K,G){var le=[],_e=Bt(K,G,!1);if(er(_e))return le;for(var $e=_e.keys(),sr=Kn($e),tt=0;;){var ct=cc(sr);if(!ct)return le.length=tt,le;var He=Fn(ct);try{le[tt]=He}catch(mt){try{ln(sr)}finally{throw mt}}tt++}}function ua(K){if(K===null)return 1;switch(typeof K){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return K===null?1:6;default:return 6}}function er(K){return K===void 0}function Ht(K){return K===null}function Er(K){return typeof K=="symbol"}function Ve(K){return typeof K=="object"?K!==null:typeof K=="function"}function fn(K,G){switch(ua(K)){case 0:return K;case 1:return K;case 2:return K;case 3:return K;case 4:return K;case 5:return K}var le=G===3?"string":G===5?"number":"default",_e=ac(K,i);if(_e!==void 0){var $e=_e.call(K,le);if(Ve($e))throw new TypeError;return $e}return eo(K,le==="default"?"number":le)}function eo(K,G){if(G==="string"){var le=K.toString;if(Tn(le)){var _e=le.call(K);if(!Ve(_e))return _e}var $e=K.valueOf;if(Tn($e)){var _e=$e.call(K);if(!Ve(_e))return _e}}else{var $e=K.valueOf;if(Tn($e)){var _e=$e.call(K);if(!Ve(_e))return _e}var sr=K.toString;if(Tn(sr)){var _e=sr.call(K);if(!Ve(_e))return _e}}throw new TypeError}function to(K){return!!K}function ks(K){return""+K}function Kr(K){var G=fn(K,3);return Er(G)?G:ks(G)}function ro(K){return Array.isArray?Array.isArray(K):K instanceof Object?K instanceof Array:Object.prototype.toString.call(K)==="[object Array]"}function Tn(K){return typeof K=="function"}function tn(K){return typeof K=="function"}function Ko(K){switch(ua(K)){case 3:return!0;case 4:return!0;default:return!1}}function ac(K,G){var le=K[G];if(le!=null){if(!Tn(le))throw new TypeError;return le}}function Kn(K){var G=ac(K,o);if(!Tn(G))throw new TypeError;var le=G.call(K);if(!Ve(le))throw new TypeError;return le}function Fn(K){return K.value}function cc(K){var G=K.next();return G.done?!1:G}function ln(K){var G=K.return;G&&G.call(K)}function lr(K){var G=Object.getPrototypeOf(K);if(typeof K!="function"||K===m||G!==m)return G;var le=K.prototype,_e=le&&Object.getPrototypeOf(le);if(_e==null||_e===Object.prototype)return G;var $e=_e.constructor;return typeof $e!="function"||$e===K?G:$e}function ni(){var K={},G=[],le=function(){function tt(ct,He,mt){this._index=0,this._keys=ct,this._values=He,this._selector=mt}return tt.prototype["@@iterator"]=function(){return this},tt.prototype[o]=function(){return this},tt.prototype.next=function(){var ct=this._index;if(ct>=0&&ct<this._keys.length){var He=this._selector(this._keys[ct],this._values[ct]);return ct+1>=this._keys.length?(this._index=-1,this._keys=G,this._values=G):this._index++,{value:He,done:!1}}return{value:void 0,done:!0}},tt.prototype.throw=function(ct){throw this._index>=0&&(this._index=-1,this._keys=G,this._values=G),ct},tt.prototype.return=function(ct){return this._index>=0&&(this._index=-1,this._keys=G,this._values=G),{value:ct,done:!0}},tt}();return function(){function tt(){this._keys=[],this._values=[],this._cacheKey=K,this._cacheIndex=-2}return Object.defineProperty(tt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),tt.prototype.has=function(ct){return this._find(ct,!1)>=0},tt.prototype.get=function(ct){var He=this._find(ct,!1);return He>=0?this._values[He]:void 0},tt.prototype.set=function(ct,He){var mt=this._find(ct,!0);return this._values[mt]=He,this},tt.prototype.delete=function(ct){var He=this._find(ct,!1);if(He>=0){for(var mt=this._keys.length,ht=He+1;ht<mt;ht++)this._keys[ht-1]=this._keys[ht],this._values[ht-1]=this._values[ht];return this._keys.length--,this._values.length--,ct===this._cacheKey&&(this._cacheKey=K,this._cacheIndex=-2),!0}return!1},tt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=K,this._cacheIndex=-2},tt.prototype.keys=function(){return new le(this._keys,this._values,_e)},tt.prototype.values=function(){return new le(this._keys,this._values,$e)},tt.prototype.entries=function(){return new le(this._keys,this._values,sr)},tt.prototype["@@iterator"]=function(){return this.entries()},tt.prototype[o]=function(){return this.entries()},tt.prototype._find=function(ct,He){return this._cacheKey!==ct&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=ct)),this._cacheIndex<0&&He&&(this._cacheIndex=this._keys.length,this._keys.push(ct),this._values.push(void 0)),this._cacheIndex},tt}();function _e(tt,ct){return tt}function $e(tt,ct){return ct}function sr(tt,ct){return[tt,ct]}}function ii(){return function(){function K(){this._map=new E}return Object.defineProperty(K.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),K.prototype.has=function(G){return this._map.has(G)},K.prototype.add=function(G){return this._map.set(G,G),this},K.prototype.delete=function(G){return this._map.delete(G)},K.prototype.clear=function(){this._map.clear()},K.prototype.keys=function(){return this._map.keys()},K.prototype.values=function(){return this._map.values()},K.prototype.entries=function(){return this._map.entries()},K.prototype["@@iterator"]=function(){return this.keys()},K.prototype[o]=function(){return this.keys()},K}()}function $o(){var K=16,G=h.create(),le=_e();return function(){function He(){this._key=_e()}return He.prototype.has=function(mt){var ht=$e(mt,!1);return ht!==void 0?h.has(ht,this._key):!1},He.prototype.get=function(mt){var ht=$e(mt,!1);return ht!==void 0?h.get(ht,this._key):void 0},He.prototype.set=function(mt,ht){var Cr=$e(mt,!0);return Cr[this._key]=ht,this},He.prototype.delete=function(mt){var ht=$e(mt,!1);return ht!==void 0?delete ht[this._key]:!1},He.prototype.clear=function(){this._key=_e()},He}();function _e(){var He;do He="@@WeakMap@@"+ct();while(h.has(G,He));return G[He]=!0,He}function $e(He,mt){if(!t.call(He,le)){if(!mt)return;Object.defineProperty(He,le,{value:h.create()})}return He[le]}function sr(He,mt){for(var ht=0;ht<mt;++ht)He[ht]=Math.random()*255|0;return He}function tt(He){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(He)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(He)):sr(new Uint8Array(He),He):sr(new Array(He),He)}function ct(){var He=tt(K);He[6]=He[6]&79|64,He[8]=He[8]&191|128;for(var mt="",ht=0;ht<K;++ht){var Cr=He[ht];(ht===4||ht===6||ht===8)&&(mt+="-"),Cr<16&&(mt+="0"),mt+=Cr.toString(16).toLowerCase()}return mt}}function xn(K){return K.__=void 0,delete K.__,K}})})(NB||(NB={}))});var Hi=ee(Oo=>{"use strict";var dY=Oo&&Oo.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},pY=Oo&&Oo.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(dY(arguments[e]));return r};Object.defineProperty(Oo,"__esModule",{value:!0});RB();function mm(r){return r==null?r:Array.isArray(r)?r.map(mm):typeof r=="object"?"saveAsJSON"in r?r.saveAsJSON():Object.assign({},r):r}Oo.cloneField=mm;function mY(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(n){var i={type:r};return e.forEach(function(o){i[o]=mm(n[o])}),i}}Oo.cloneObject=mY;function yY(r){return function(e){return e.prototype.saveAsJSON=function(){return r.export(this)},e.fromJSON=function(t){return r.import(t)},e}}Oo.Exportable=yY;var K2=Symbol("bloom-filters:exportable:class-name"),kh=Symbol("bloom-filters:exportable:fields"),Ih=Symbol("bloom-filters:exportable:constructor-parameters");function gY(r,e){return r===void 0&&(r=mm),e===void 0&&(e=function(t){return t}),function(t,n){var i=[];Reflect.hasMetadata(kh,t)&&(i=Reflect.getMetadata(kh,t)),i.push({name:n,exporter:r,importer:e}),Reflect.defineMetadata(kh,i,t)}}Oo.Field=gY;function wY(r){return function(e,t,n){var i=new Map;Reflect.hasMetadata(Ih,e)&&(i=Reflect.getMetadata(Ih,e)),i.set(r,n),Reflect.defineMetadata(Ih,i,e)}}Oo.Parameter=wY;function bY(r,e){return e===void 0&&(e=[]),function(t){if(Reflect.defineMetadata(K2,r,t.prototype),!Reflect.hasMetadata(kh,t.prototype)||e.length===0)throw new SyntaxError("No exported fields declared when @AutoExportable is called");Reflect.hasMetadata(Ih,t)||Reflect.defineMetadata(Ih,new Map,t),t.prototype.saveAsJSON=function(){var n=this,i={type:Reflect.getMetadata(K2,t.prototype)},o=Reflect.getMetadata(kh,t.prototype);return o.forEach(function(a){i[a.name]=a.exporter(n[a.name])}),e.forEach(function(a){i[a]=mm(n[a])}),i},t.fromJSON=function(n){var i=Reflect.getMetadata(K2,t.prototype),o=Reflect.getMetadata(Ih,t),a=Reflect.getMetadata(kh,t.prototype);if(n.type!==i)throw new Error("Cannot create an object "+i+' from a JSON export with type "'+n.type+'"');var u=[],l=[];e.map(function(m){return{name:m,importer:function(y){return y}}}).concat(a).forEach(function(m){if(!(m.name in n))throw new Error('Invalid import: required field "'+m+'" not found in JSON export "'+n+'"');o.has(m.name)?u[o.get(m.name)]=m.importer(n[m.name]):l.push({name:m.name,value:m.importer(n[m.name])})});var h=new(t.bind.apply(t,pY([void 0],u)));return l.forEach(function(m){h[m.name]=m.value}),h}}}Oo.AutoExportable=bY});var D0=ee(P0=>{"use strict";Object.defineProperty(P0,"__esModule",{value:!0});function vY(r,e){return Math.ceil(-(r*Math.log(e)/Math.pow(Math.log(2),2)))}P0.optimalFilterSize=vY;function _Y(r,e){return Math.ceil(r/e*Math.log(2))}P0.optimalHashes=_Y});var KB=ee(Wi=>{"use strict";var xY=Wi&&Wi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ym=Wi&&Wi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},gm=Wi&&Wi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},MB=Wi&&Wi.__param||function(r,e){return function(t,n){e(t,n,r)}},EY=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var AY=EY(Es()),jf=Hi(),UB=D0(),wm=Lo(),SY=function(r){xY(e,r);function e(n,i){var o=r.call(this)||this;if(i<1)throw new Error("A BloomFilter cannot uses less than one hash function, while you tried to use "+i+".");return o._size=n,o._nbHashes=i,o._filter=wm.allocateArray(o._size,0),o._length=0,o}t=e,e.create=function(n,i){var o=UB.optimalFilterSize(n,i),a=UB.optimalHashes(o,n);return new t(o,a)},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(u){return a.add(u)}),a},e.fromBytes=function(n,i){for(var o=[],a=0;a<n.length;a++){var u=wm.uint8ToBits(n[a]);o=o.concat(u)}var l=new t(o.length,i);return l._filter=o,l},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=wm.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)this._filter[i[o]]=1;this._length++},e.prototype.has=function(n){for(var i=wm.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)if(!this._filter[i[o]])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes?!1:this._filter.every(function(i,o){return n._filter[o]===i})},e.prototype.toBytes=function(){for(var n=new Uint8Array(Math.ceil(this._size/8)),i=0;i<n.length;i++){var o=this._filter.slice(i*8,i*8+8);n[i]=wm.bitsToUint8(o)}return n};var t;return ym([jf.Field(),gm("design:type",Number)],e.prototype,"_size",void 0),ym([jf.Field(),gm("design:type",Number)],e.prototype,"_nbHashes",void 0),ym([jf.Field(),gm("design:type",Array)],e.prototype,"_filter",void 0),ym([jf.Field(),gm("design:type",Number)],e.prototype,"_length",void 0),e=t=ym([jf.AutoExportable("BloomFilter",["_seed"]),MB(0,jf.Parameter("_size")),MB(1,jf.Parameter("_nbHashes")),gm("design:paramtypes",[Number,Number])],e),e}(AY.default);Wi.default=SY});var jB=ee(Vi=>{"use strict";var PY=Vi&&Vi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bm=Vi&&Vi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vm=Vi&&Vi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},$B=Vi&&Vi.__param||function(r,e){return function(t,n){e(t,n,r)}},DY=Vi&&Vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vi,"__esModule",{value:!0});var CY=DY(Es()),qf=Hi(),zB=D0(),C0=Lo(),kY=function(r){PY(e,r);function e(n,i){var o=r.call(this)||this;if(i<1)throw new Error("A CountingBloomFilter must used at least one hash function, but you tried to use "+i+" functions. Consider increasing it.");return o._size=n,o._nbHashes=i,o._filter=C0.allocateArray(o._size,function(){return[0,0]}),o._length=0,o}t=e,e.create=function(n,i){var o=zB.optimalFilterSize(n,i);return new t(o,zB.optimalHashes(o,n))},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(u){return a.add(u)}),a},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=C0.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)this._filter[i[o]][1]+=1,this._filter[i[o]][1]>0&&(this._filter[i[o]][0]=1);this._length++},e.prototype.remove=function(n){for(var i=C0.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=!0,a=0;a<i.length;a++)this._filter[i[a]][1]-=1,this._filter[i[a]][1]<=0&&(this._filter[i[a]][0]=0);return this._length--,o},e.prototype.has=function(n){for(var i=C0.getDistinctIndices(n,this._size,this._nbHashes,this.seed),o=0;o<i.length;o++)if(!this._filter[i[o]][0])return!1;return!0},e.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length?!1:this._filter.every(function(i,o){return n._filter[o][0]===i[0]&&n._filter[o][1]===i[1]})};var t;return bm([qf.Field(),vm("design:type",Number)],e.prototype,"_size",void 0),bm([qf.Field(),vm("design:type",Number)],e.prototype,"_nbHashes",void 0),bm([qf.Field(),vm("design:type",Array)],e.prototype,"_filter",void 0),bm([qf.Field(),vm("design:type",Number)],e.prototype,"_length",void 0),e=t=bm([qf.AutoExportable("CountingBloomFilter",["_seed"]),$B(0,qf.Parameter("_size")),$B(1,qf.Parameter("_nbHashes")),vm("design:paramtypes",[Number,Number])],e),e}(CY.default);Vi.default=kY});var qB=ee(Gi=>{"use strict";var IY=Gi&&Gi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gu=Gi&&Gi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},wu=Gi&&Gi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},k0=Gi&&Gi.__param||function(r,e){return function(t,n){e(t,n,r)}},TY=Gi&&Gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gi,"__esModule",{value:!0});var FY=TY(Es()),No=Hi(),I0=Lo();function BY(r,e){return Math.ceil(Math.log(r)/Math.log(e))}function LY(r,e,t){return Math.ceil(r*-Math.log(e)/(Math.log(t)*Math.log(1-t)))}function OY(r,e,t){return Math.ceil(r*(Math.log(e)*Math.log(1-e))/-(t*Math.log(e)))}var NY=function(r){IY(e,r);function e(n,i,o,a){var u=r.call(this)||this;return u._size=n,u._nbHashes=i,u._loadFactor=o,u._m=Math.ceil(u._size/u._nbHashes),u._filter=I0.allocateArray(u._nbHashes,function(){return I0.allocateArray(u._m,0)}),u._capacity=a!==void 0?a:OY(u._size,o,i),u._length=0,u}t=e,e.create=function(n,i,o){o===void 0&&(o=.5);var a=LY(n,i,o),u=BY(i,o);return new t(a,u,o,n)},e.from=function(n,i,o){o===void 0&&(o=.5);var a=Array.from(n),u=t.create(a.length,i,o);return a.forEach(function(l){return u.add(l)}),u},Object.defineProperty(e.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadFactor",{get:function(){return this._loadFactor},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=I0.getIndices(n,this._m,this._nbHashes,this.seed),o=0;o<this._nbHashes;o++)this._filter[o][i[o]]=1;this._length++},e.prototype.has=function(n){for(var i=I0.getIndices(n,this._m,this._nbHashes,this.seed),o=0;o<this._nbHashes;o++)if(!this._filter[o][i[o]])return!1;return!0},e.prototype.rate=function(){var n=this._currentload();return Math.pow(n,this._nbHashes)},e.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length||this._loadFactor!==n._loadFactor?!1:this._filter.every(function(i,o){return n._filter[o].every(function(a,u){return i[u]===a})})},e.prototype._currentload=function(){var n=this._filter.map(function(o){return o.reduce(function(a,u){return a+u},0)}),i=n.reduce(function(o,a){return o+a},0);return i/this._size};var t;return gu([No.Field(),wu("design:type",Number)],e.prototype,"_size",void 0),gu([No.Field(),wu("design:type",Number)],e.prototype,"_nbHashes",void 0),gu([No.Field(),wu("design:type",Number)],e.prototype,"_loadFactor",void 0),gu([No.Field(),wu("design:type",Number)],e.prototype,"_m",void 0),gu([No.Field(),wu("design:type",Array)],e.prototype,"_filter",void 0),gu([No.Field(),wu("design:type",Number)],e.prototype,"_capacity",void 0),gu([No.Field(),wu("design:type",Number)],e.prototype,"_length",void 0),e=t=gu([No.AutoExportable("PartitionedBloomFilter",["_seed"]),k0(0,No.Parameter("_size")),k0(1,No.Parameter("_nbHashes")),k0(2,No.Parameter("_loadFactor")),k0(3,No.Parameter("_capacity")),wu("design:paramtypes",[Number,Number,Number,Number])],e),e}(FY.default);Gi.default=NY});var $2=ee(Qn=>{"use strict";var RY=Qn&&Qn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_m=Qn&&Qn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},xm=Qn&&Qn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},HB=Qn&&Qn.__param||function(r,e){return function(t,n){e(t,n,r)}},MY=Qn&&Qn.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UY=Qn&&Qn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qn,"__esModule",{value:!0});var KY=UY(Es()),Hf=Hi(),T0=Lo(),$Y=function(r){RY(e,r);function e(n,i){var o=r.call(this)||this;return o._columns=n,o._rows=i,o._matrix=T0.allocateArray(o._rows,function(){return T0.allocateArray(o._columns,0)}),o._allSums=0,o}t=e,e.create=function(n,i){i===void 0&&(i=.999);var o=Math.ceil(Math.E/n),a=Math.ceil(Math.log(1/i));return new t(o,a)},e.from=function(n,i,o){var a,u;o===void 0&&(o=.999);var l=t.create(i,o);try{for(var h=MY(n),m=h.next();!m.done;m=h.next()){var y=m.value;l.update(y)}}catch(E){a={error:E}}finally{try{m&&!m.done&&(u=h.return)&&u.call(h)}finally{if(a)throw a.error}}return l},Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sum",{get:function(){return this._allSums},enumerable:!0,configurable:!0}),e.prototype.update=function(n,i){i===void 0&&(i=1),this._allSums+=i;for(var o=T0.getDistinctIndices(n,this._columns,this._rows,this.seed),a=0;a<this._rows;a++)this._matrix[a][o[a]]+=i},e.prototype.count=function(n){for(var i=1/0,o=T0.getDistinctIndices(n,this._columns,this._rows,this.seed),a=0;a<this._rows;a++){var u=this._matrix[a][o[a]];i=Math.min(u,i)}return i},e.prototype.equals=function(n){if(this._columns!==n._columns||this._rows!==n._rows)return!1;for(var i=0;i<this._rows;i++)for(var o=0;o<this._columns;o++)if(this._matrix[i][o]!==n._matrix[i][o])return!1;return!0},e.prototype.merge=function(n){if(this._columns!==n._columns)throw new Error("Cannot merge two sketches with different number of columns");if(this._rows!==n._rows)throw new Error("Cannot merge two sketches with different number of rows");for(var i=0;i<this._rows;i++)for(var o=0;o<this._columns;o++)this._matrix[i][o]+=n._matrix[i][o]},e.prototype.clone=function(){var n=new t(this._columns,this._rows);return n.merge(this),n.seed=this.seed,n};var t;return _m([Hf.Field(),xm("design:type",Number)],e.prototype,"_columns",void 0),_m([Hf.Field(),xm("design:type",Number)],e.prototype,"_rows",void 0),_m([Hf.Field(),xm("design:type",Array)],e.prototype,"_matrix",void 0),_m([Hf.Field(),xm("design:type",Number)],e.prototype,"_allSums",void 0),e=t=_m([Hf.AutoExportable("CountMinSketch",["_seed"]),HB(0,Hf.Parameter("_columns")),HB(1,Hf.Parameter("_rows")),xm("design:paramtypes",[Number,Number])],e),e}(KY.default);Qn.default=$Y});var VB=ee(Yi=>{"use strict";var zY=Yi&&Yi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Em=Yi&&Yi.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Am=Yi&&Yi.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},jY=Yi&&Yi.__param||function(r,e){return function(t,n){e(t,n,r)}},qY=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var HY=qY(Es()),Th=Hi(),WB=Lo(),z2=Math.pow(2,32);function WY(r){switch(r){case 16:return .673;case 32:return .697;case 64:return .709;default:return .7213/(1+1.079/r)}}var VY=function(r){zY(e,r);function e(n){var i=r.call(this)||this;return i._nbRegisters=n,i._nbBytesPerHash=Math.round(Math.log2(n)),i._correctionBias=WY(n),i._registers=WB.allocateArray(i._nbRegisters,0),i}t=e,Object.defineProperty(e.prototype,"nbRegisters",{get:function(){return this._nbRegisters},enumerable:!0,configurable:!0}),e.prototype.update=function(n){for(var i=WB.hashAsInt(n,this.seed).toString(2),o=1+parseInt(i.slice(0,this._nbBytesPerHash-1),2),a=i.slice(this._nbBytesPerHash),u=0;a[u]!=="1"&&u<a.length-1;)u++;this._registers[o]=Math.max(this._registers[o],u)},e.prototype.count=function(n){n===void 0&&(n=!1);var i=this._registers.reduce(function(a,u){return a+Math.pow(2,-u)},0),o=this._correctionBias*Math.pow(this._nbRegisters,2)/i;return o>z2/30&&(o=-z2*Math.log(1-o/z2)),n&&(o=Math.round(o)),o},e.prototype.accuracy=function(){return 1.04/Math.sqrt(this._nbRegisters)},e.prototype.merge=function(n){if(this.nbRegisters!==n.nbRegisters)throw new Error("Two HyperLogLog must have the same number of registers to be merged. Tried to merge two HyperLogLog with m = "+this.nbRegisters+" and m = "+n.nbRegisters);for(var i=new t(this.nbRegisters),o=0;o<this.nbRegisters-1;o++)i._registers[o]=Math.max(this._registers[o],n._registers[o]);return i},e.prototype.equals=function(n){if(this.nbRegisters!==n.nbRegisters)return!1;for(var i=0;i<this.nbRegisters-1;i++)if(this._registers[i]!==n._registers[i])return!1;return!0};var t;return Em([Th.Field(),Am("design:type",Number)],e.prototype,"_nbRegisters",void 0),Em([Th.Field(),Am("design:type",Number)],e.prototype,"_nbBytesPerHash",void 0),Em([Th.Field(),Am("design:type",Number)],e.prototype,"_correctionBias",void 0),Em([Th.Field(),Am("design:type",Array)],e.prototype,"_registers",void 0),e=t=Em([Th.AutoExportable("HyperLogLog",["_seed"]),jY(0,Th.Parameter("_nbRegisters")),Am("design:paramtypes",[Number])],e),e}(HY.default);Yi.default=VY});var F0=ee((Fh,Sm)=>{(function(){var r,e="4.17.21",t=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",u=500,l="__lodash_placeholder__",h=1,m=2,y=4,E=1,k=2,T=1,O=2,ce=4,ne=8,ve=16,X=32,me=64,be=128,W=256,de=512,ge=30,Ue="...",St=800,$t=16,Bt=1,qt=2,yr=3,Ut=1/0,Wr=9007199254740991,Un=17976931348623157e292,Ur=0/0,en=4294967295,ua=en-1,er=en>>>1,Ht=[["ary",be],["bind",T],["bindKey",O],["curry",ne],["curryRight",ve],["flip",de],["partial",X],["partialRight",me],["rearg",W]],Er="[object Arguments]",Ve="[object Array]",fn="[object AsyncFunction]",eo="[object Boolean]",to="[object Date]",ks="[object DOMException]",Kr="[object Error]",ro="[object Function]",Tn="[object GeneratorFunction]",tn="[object Map]",Ko="[object Number]",ac="[object Null]",Kn="[object Object]",Fn="[object Promise]",cc="[object Proxy]",ln="[object RegExp]",lr="[object Set]",ni="[object String]",ii="[object Symbol]",$o="[object Undefined]",xn="[object WeakMap]",K="[object WeakSet]",G="[object ArrayBuffer]",le="[object DataView]",_e="[object Float32Array]",$e="[object Float64Array]",sr="[object Int8Array]",tt="[object Int16Array]",ct="[object Int32Array]",He="[object Uint8Array]",mt="[object Uint8ClampedArray]",ht="[object Uint16Array]",Cr="[object Uint32Array]",zo=/\b__p \+= '';/g,fa=/\b(__p \+=) '' \+/g,jo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,la=/&(?:amp|lt|gt|quot|#39);/g,Eu=/[&<>"']/g,no=RegExp(la.source),Yh=RegExp(Eu.source),vi=/<%-([\s\S]+?)%>/g,io=/<%([\s\S]+?)%>/g,qo=/<%=([\s\S]+?)%>/g,Au=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Su=/^\w*$/,el=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pu=/[\\^$.*+?()[\]{}|]/g,En=RegExp(Pu.source),uc=/^\s+/,g=/\s/,x=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_=/\{\n\/\* \[wrapped with (.+)\] \*/,d=/,? & /,D=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,R=/[()=,{}\[\]\/\s]/,U=/\\(\\)?/g,oe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ye=/\w*$/,Ke=/^[-+]0x[0-9a-f]+$/i,Se=/^0b[01]+$/i,Dt=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,rt=/^(?:0|[1-9]\d*)$/,ot=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ut=/($^)/,lt=/['\n\r\u2028\u2029\\]/g,et="\\ud800-\\udfff",ft="\\u0300-\\u036f",nt="\\ufe20-\\ufe2f",Ce="\\u20d0-\\u20ff",qe=ft+nt+Ce,xe="\\u2700-\\u27bf",Be="a-z\\xdf-\\xf6\\xf8-\\xff",Le="\\xac\\xb1\\xd7\\xf7",Ee="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",z="\\u2000-\\u206f",j=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fe="A-Z\\xc0-\\xd6\\xd8-\\xde",re="\\ufe0e\\ufe0f",ie=Le+Ee+z+j,b="['\u2019]",C="["+et+"]",S="["+ie+"]",F="["+qe+"]",B="\\d+",w="["+xe+"]",$="["+Be+"]",H="[^"+et+ie+B+xe+Be+fe+"]",Y="\\ud83c[\\udffb-\\udfff]",V="(?:"+F+"|"+Y+")",te="[^"+et+"]",pe="(?:\\ud83c[\\udde6-\\uddff]){2}",ze="[\\ud800-\\udbff][\\udc00-\\udfff]",Ne="["+fe+"]",Qe="\\u200d",dt="(?:"+$+"|"+H+")",pt="(?:"+Ne+"|"+H+")",Lt="(?:"+b+"(?:d|ll|m|re|s|t|ve))?",hr="(?:"+b+"(?:D|LL|M|RE|S|T|VE))?",Ar=V+"?",$r="["+re+"]?",Jh="(?:"+Qe+"(?:"+[te,pe,ze].join("|")+")"+$r+Ar+")*",E8="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",nb="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Lm=$r+Ar+Jh,Om="(?:"+[w,pe,ze].join("|")+")"+Lm,cO="(?:"+[te+F+"?",F,pe,ze,C].join("|")+")",uO=RegExp(b,"g"),fO=RegExp(F,"g"),ib=RegExp(Y+"(?="+Y+")|"+cO+Lm,"g"),lO=RegExp([Ne+"?"+$+"+"+Lt+"(?="+[S,Ne,"$"].join("|")+")",pt+"+"+hr+"(?="+[S,Ne+dt,"$"].join("|")+")",Ne+"?"+dt+"+"+Lt,Ne+"+"+hr,nb,E8,B,Om].join("|"),"g"),hO=RegExp("["+Qe+et+qe+re+"]"),dO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mO=-1,dr={};dr[_e]=dr[$e]=dr[sr]=dr[tt]=dr[ct]=dr[He]=dr[mt]=dr[ht]=dr[Cr]=!0,dr[Er]=dr[Ve]=dr[G]=dr[eo]=dr[le]=dr[to]=dr[Kr]=dr[ro]=dr[tn]=dr[Ko]=dr[Kn]=dr[ln]=dr[lr]=dr[ni]=dr[xn]=!1;var ar={};ar[Er]=ar[Ve]=ar[G]=ar[le]=ar[eo]=ar[to]=ar[_e]=ar[$e]=ar[sr]=ar[tt]=ar[ct]=ar[tn]=ar[Ko]=ar[Kn]=ar[ln]=ar[lr]=ar[ni]=ar[ii]=ar[He]=ar[mt]=ar[ht]=ar[Cr]=!0,ar[Kr]=ar[ro]=ar[xn]=!1;var yO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},gO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vO=parseFloat,_O=parseInt,A8=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,xO=typeof self=="object"&&self&&self.Object===Object&&self,hn=A8||xO||Function("return this")(),ob=typeof Fh=="object"&&Fh&&!Fh.nodeType&&Fh,Du=ob&&typeof Sm=="object"&&Sm&&!Sm.nodeType&&Sm,S8=Du&&Du.exports===ob,sb=S8&&A8.process,oo=function(){try{var N=Du&&Du.require&&Du.require("util").types;return N||sb&&sb.binding&&sb.binding("util")}catch{}}(),P8=oo&&oo.isArrayBuffer,D8=oo&&oo.isDate,C8=oo&&oo.isMap,k8=oo&&oo.isRegExp,I8=oo&&oo.isSet,T8=oo&&oo.isTypedArray;function _i(N,Z,q){switch(q.length){case 0:return N.call(Z);case 1:return N.call(Z,q[0]);case 2:return N.call(Z,q[0],q[1]);case 3:return N.call(Z,q[0],q[1],q[2])}return N.apply(Z,q)}function EO(N,Z,q,Re){for(var gt=-1,zt=N==null?0:N.length;++gt<zt;){var rn=N[gt];Z(Re,rn,q(rn),N)}return Re}function so(N,Z){for(var q=-1,Re=N==null?0:N.length;++q<Re&&Z(N[q],q,N)!==!1;);return N}function AO(N,Z){for(var q=N==null?0:N.length;q--&&Z(N[q],q,N)!==!1;);return N}function F8(N,Z){for(var q=-1,Re=N==null?0:N.length;++q<Re;)if(!Z(N[q],q,N))return!1;return!0}function fc(N,Z){for(var q=-1,Re=N==null?0:N.length,gt=0,zt=[];++q<Re;){var rn=N[q];Z(rn,q,N)&&(zt[gt++]=rn)}return zt}function Nm(N,Z){var q=N==null?0:N.length;return!!q&&tl(N,Z,0)>-1}function ab(N,Z,q){for(var Re=-1,gt=N==null?0:N.length;++Re<gt;)if(q(Z,N[Re]))return!0;return!1}function gr(N,Z){for(var q=-1,Re=N==null?0:N.length,gt=Array(Re);++q<Re;)gt[q]=Z(N[q],q,N);return gt}function lc(N,Z){for(var q=-1,Re=Z.length,gt=N.length;++q<Re;)N[gt+q]=Z[q];return N}function cb(N,Z,q,Re){var gt=-1,zt=N==null?0:N.length;for(Re&&zt&&(q=N[++gt]);++gt<zt;)q=Z(q,N[gt],gt,N);return q}function SO(N,Z,q,Re){var gt=N==null?0:N.length;for(Re&&gt&&(q=N[--gt]);gt--;)q=Z(q,N[gt],gt,N);return q}function ub(N,Z){for(var q=-1,Re=N==null?0:N.length;++q<Re;)if(Z(N[q],q,N))return!0;return!1}var PO=fb("length");function DO(N){return N.split("")}function CO(N){return N.match(D)||[]}function B8(N,Z,q){var Re;return q(N,function(gt,zt,rn){if(Z(gt,zt,rn))return Re=zt,!1}),Re}function Rm(N,Z,q,Re){for(var gt=N.length,zt=q+(Re?1:-1);Re?zt--:++zt<gt;)if(Z(N[zt],zt,N))return zt;return-1}function tl(N,Z,q){return Z===Z?KO(N,Z,q):Rm(N,L8,q)}function kO(N,Z,q,Re){for(var gt=q-1,zt=N.length;++gt<zt;)if(Re(N[gt],Z))return gt;return-1}function L8(N){return N!==N}function O8(N,Z){var q=N==null?0:N.length;return q?hb(N,Z)/q:Ur}function fb(N){return function(Z){return Z==null?r:Z[N]}}function lb(N){return function(Z){return N==null?r:N[Z]}}function N8(N,Z,q,Re,gt){return gt(N,function(zt,rn,tr){q=Re?(Re=!1,zt):Z(q,zt,rn,tr)}),q}function IO(N,Z){var q=N.length;for(N.sort(Z);q--;)N[q]=N[q].value;return N}function hb(N,Z){for(var q,Re=-1,gt=N.length;++Re<gt;){var zt=Z(N[Re]);zt!==r&&(q=q===r?zt:q+zt)}return q}function db(N,Z){for(var q=-1,Re=Array(N);++q<N;)Re[q]=Z(q);return Re}function TO(N,Z){return gr(Z,function(q){return[q,N[q]]})}function R8(N){return N&&N.slice(0,$8(N)+1).replace(uc,"")}function xi(N){return function(Z){return N(Z)}}function pb(N,Z){return gr(Z,function(q){return N[q]})}function Xh(N,Z){return N.has(Z)}function M8(N,Z){for(var q=-1,Re=N.length;++q<Re&&tl(Z,N[q],0)>-1;);return q}function U8(N,Z){for(var q=N.length;q--&&tl(Z,N[q],0)>-1;);return q}function FO(N,Z){for(var q=N.length,Re=0;q--;)N[q]===Z&&++Re;return Re}var BO=lb(yO),LO=lb(gO);function OO(N){return"\\"+bO[N]}function NO(N,Z){return N==null?r:N[Z]}function rl(N){return hO.test(N)}function RO(N){return dO.test(N)}function MO(N){for(var Z,q=[];!(Z=N.next()).done;)q.push(Z.value);return q}function mb(N){var Z=-1,q=Array(N.size);return N.forEach(function(Re,gt){q[++Z]=[gt,Re]}),q}function K8(N,Z){return function(q){return N(Z(q))}}function hc(N,Z){for(var q=-1,Re=N.length,gt=0,zt=[];++q<Re;){var rn=N[q];(rn===Z||rn===l)&&(N[q]=l,zt[gt++]=q)}return zt}function Mm(N){var Z=-1,q=Array(N.size);return N.forEach(function(Re){q[++Z]=Re}),q}function UO(N){var Z=-1,q=Array(N.size);return N.forEach(function(Re){q[++Z]=[Re,Re]}),q}function KO(N,Z,q){for(var Re=q-1,gt=N.length;++Re<gt;)if(N[Re]===Z)return Re;return-1}function $O(N,Z,q){for(var Re=q+1;Re--;)if(N[Re]===Z)return Re;return Re}function nl(N){return rl(N)?jO(N):PO(N)}function Ho(N){return rl(N)?qO(N):DO(N)}function $8(N){for(var Z=N.length;Z--&&g.test(N.charAt(Z)););return Z}var zO=lb(wO);function jO(N){for(var Z=ib.lastIndex=0;ib.test(N);)++Z;return Z}function qO(N){return N.match(ib)||[]}function HO(N){return N.match(lO)||[]}var WO=function N(Z){Z=Z==null?hn:dc.defaults(hn.Object(),Z,dc.pick(hn,pO));var q=Z.Array,Re=Z.Date,gt=Z.Error,zt=Z.Function,rn=Z.Math,tr=Z.Object,yb=Z.RegExp,VO=Z.String,ao=Z.TypeError,Um=q.prototype,GO=zt.prototype,il=tr.prototype,Km=Z["__core-js_shared__"],$m=GO.toString,Yt=il.hasOwnProperty,YO=0,z8=function(){var s=/[^.]+$/.exec(Km&&Km.keys&&Km.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),zm=il.toString,JO=$m.call(tr),XO=hn._,QO=yb("^"+$m.call(Yt).replace(Pu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jm=S8?Z.Buffer:r,pc=Z.Symbol,qm=Z.Uint8Array,j8=jm?jm.allocUnsafe:r,Hm=K8(tr.getPrototypeOf,tr),q8=tr.create,H8=il.propertyIsEnumerable,Wm=Um.splice,W8=pc?pc.isConcatSpreadable:r,Qh=pc?pc.iterator:r,Cu=pc?pc.toStringTag:r,Vm=function(){try{var s=Bu(tr,"defineProperty");return s({},"",{}),s}catch{}}(),ZO=Z.clearTimeout!==hn.clearTimeout&&Z.clearTimeout,eN=Re&&Re.now!==hn.Date.now&&Re.now,tN=Z.setTimeout!==hn.setTimeout&&Z.setTimeout,Gm=rn.ceil,Ym=rn.floor,gb=tr.getOwnPropertySymbols,rN=jm?jm.isBuffer:r,V8=Z.isFinite,nN=Um.join,iN=K8(tr.keys,tr),nn=rn.max,Bn=rn.min,oN=Re.now,sN=Z.parseInt,G8=rn.random,aN=Um.reverse,wb=Bu(Z,"DataView"),Zh=Bu(Z,"Map"),bb=Bu(Z,"Promise"),ol=Bu(Z,"Set"),ed=Bu(Z,"WeakMap"),td=Bu(tr,"create"),Jm=ed&&new ed,sl={},cN=Lu(wb),uN=Lu(Zh),fN=Lu(bb),lN=Lu(ol),hN=Lu(ed),Xm=pc?pc.prototype:r,rd=Xm?Xm.valueOf:r,Y8=Xm?Xm.toString:r;function A(s){if(kr(s)&&!vt(s)&&!(s instanceof Ft)){if(s instanceof co)return s;if(Yt.call(s,"__wrapped__"))return JA(s)}return new co(s)}var al=function(){function s(){}return function(c){if(!Sr(c))return{};if(q8)return q8(c);s.prototype=c;var f=new s;return s.prototype=r,f}}();function Qm(){}function co(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=r}A.templateSettings={escape:vi,evaluate:io,interpolate:qo,variable:"",imports:{_:A}},A.prototype=Qm.prototype,A.prototype.constructor=A,co.prototype=al(Qm.prototype),co.prototype.constructor=co;function Ft(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=en,this.__views__=[]}function dN(){var s=new Ft(this.__wrapped__);return s.__actions__=oi(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=oi(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=oi(this.__views__),s}function pN(){if(this.__filtered__){var s=new Ft(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function mN(){var s=this.__wrapped__.value(),c=this.__dir__,f=vt(s),p=c<0,v=f?s.length:0,P=D5(0,v,this.__views__),I=P.start,L=P.end,M=L-I,se=p?L:I-1,ae=this.__iteratees__,he=ae.length,Pe=0,Ge=Bn(M,this.__takeCount__);if(!f||!p&&v==M&&Ge==M)return bA(s,this.__actions__);var st=[];e:for(;M--&&Pe<Ge;){se+=c;for(var xt=-1,at=s[se];++xt<he;){var Ct=ae[xt],Ot=Ct.iteratee,Si=Ct.type,jn=Ot(at);if(Si==qt)at=jn;else if(!jn){if(Si==Bt)continue e;break e}}st[Pe++]=at}return st}Ft.prototype=al(Qm.prototype),Ft.prototype.constructor=Ft;function ku(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var p=s[c];this.set(p[0],p[1])}}function yN(){this.__data__=td?td(null):{},this.size=0}function gN(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function wN(s){var c=this.__data__;if(td){var f=c[s];return f===a?r:f}return Yt.call(c,s)?c[s]:r}function bN(s){var c=this.__data__;return td?c[s]!==r:Yt.call(c,s)}function vN(s,c){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=td&&c===r?a:c,this}ku.prototype.clear=yN,ku.prototype.delete=gN,ku.prototype.get=wN,ku.prototype.has=bN,ku.prototype.set=vN;function ha(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var p=s[c];this.set(p[0],p[1])}}function _N(){this.__data__=[],this.size=0}function xN(s){var c=this.__data__,f=Zm(c,s);if(f<0)return!1;var p=c.length-1;return f==p?c.pop():Wm.call(c,f,1),--this.size,!0}function EN(s){var c=this.__data__,f=Zm(c,s);return f<0?r:c[f][1]}function AN(s){return Zm(this.__data__,s)>-1}function SN(s,c){var f=this.__data__,p=Zm(f,s);return p<0?(++this.size,f.push([s,c])):f[p][1]=c,this}ha.prototype.clear=_N,ha.prototype.delete=xN,ha.prototype.get=EN,ha.prototype.has=AN,ha.prototype.set=SN;function da(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var p=s[c];this.set(p[0],p[1])}}function PN(){this.size=0,this.__data__={hash:new ku,map:new(Zh||ha),string:new ku}}function DN(s){var c=ly(this,s).delete(s);return this.size-=c?1:0,c}function CN(s){return ly(this,s).get(s)}function kN(s){return ly(this,s).has(s)}function IN(s,c){var f=ly(this,s),p=f.size;return f.set(s,c),this.size+=f.size==p?0:1,this}da.prototype.clear=PN,da.prototype.delete=DN,da.prototype.get=CN,da.prototype.has=kN,da.prototype.set=IN;function Iu(s){var c=-1,f=s==null?0:s.length;for(this.__data__=new da;++c<f;)this.add(s[c])}function TN(s){return this.__data__.set(s,a),this}function FN(s){return this.__data__.has(s)}Iu.prototype.add=Iu.prototype.push=TN,Iu.prototype.has=FN;function Wo(s){var c=this.__data__=new ha(s);this.size=c.size}function BN(){this.__data__=new ha,this.size=0}function LN(s){var c=this.__data__,f=c.delete(s);return this.size=c.size,f}function ON(s){return this.__data__.get(s)}function NN(s){return this.__data__.has(s)}function RN(s,c){var f=this.__data__;if(f instanceof ha){var p=f.__data__;if(!Zh||p.length<t-1)return p.push([s,c]),this.size=++f.size,this;f=this.__data__=new da(p)}return f.set(s,c),this.size=f.size,this}Wo.prototype.clear=BN,Wo.prototype.delete=LN,Wo.prototype.get=ON,Wo.prototype.has=NN,Wo.prototype.set=RN;function J8(s,c){var f=vt(s),p=!f&&Ou(s),v=!f&&!p&&bc(s),P=!f&&!p&&!v&&ll(s),I=f||p||v||P,L=I?db(s.length,VO):[],M=L.length;for(var se in s)(c||Yt.call(s,se))&&!(I&&(se=="length"||v&&(se=="offset"||se=="parent")||P&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||ga(se,M)))&&L.push(se);return L}function X8(s){var c=s.length;return c?s[Ib(0,c-1)]:r}function MN(s,c){return hy(oi(s),Tu(c,0,s.length))}function UN(s){return hy(oi(s))}function vb(s,c,f){(f!==r&&!Vo(s[c],f)||f===r&&!(c in s))&&pa(s,c,f)}function nd(s,c,f){var p=s[c];(!(Yt.call(s,c)&&Vo(p,f))||f===r&&!(c in s))&&pa(s,c,f)}function Zm(s,c){for(var f=s.length;f--;)if(Vo(s[f][0],c))return f;return-1}function KN(s,c,f,p){return mc(s,function(v,P,I){c(p,v,f(v),I)}),p}function Q8(s,c){return s&&Ts(c,dn(c),s)}function $N(s,c){return s&&Ts(c,ai(c),s)}function pa(s,c,f){c=="__proto__"&&Vm?Vm(s,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[c]=f}function _b(s,c){for(var f=-1,p=c.length,v=q(p),P=s==null;++f<p;)v[f]=P?r:tv(s,c[f]);return v}function Tu(s,c,f){return s===s&&(f!==r&&(s=s<=f?s:f),c!==r&&(s=s>=c?s:c)),s}function uo(s,c,f,p,v,P){var I,L=c&h,M=c&m,se=c&y;if(f&&(I=v?f(s,p,v,P):f(s)),I!==r)return I;if(!Sr(s))return s;var ae=vt(s);if(ae){if(I=k5(s),!L)return oi(s,I)}else{var he=Ln(s),Pe=he==ro||he==Tn;if(bc(s))return xA(s,L);if(he==Kn||he==Er||Pe&&!v){if(I=M||Pe?{}:$A(s),!L)return M?w5(s,$N(I,s)):g5(s,Q8(I,s))}else{if(!ar[he])return v?s:{};I=I5(s,he,L)}}P||(P=new Wo);var Ge=P.get(s);if(Ge)return Ge;P.set(s,I),yS(s)?s.forEach(function(at){I.add(uo(at,c,f,at,s,P))}):pS(s)&&s.forEach(function(at,Ct){I.set(Ct,uo(at,c,f,Ct,s,P))});var st=se?M?$b:Kb:M?ai:dn,xt=ae?r:st(s);return so(xt||s,function(at,Ct){xt&&(Ct=at,at=s[Ct]),nd(I,Ct,uo(at,c,f,Ct,s,P))}),I}function zN(s){var c=dn(s);return function(f){return Z8(f,s,c)}}function Z8(s,c,f){var p=f.length;if(s==null)return!p;for(s=tr(s);p--;){var v=f[p],P=c[v],I=s[v];if(I===r&&!(v in s)||!P(I))return!1}return!0}function eA(s,c,f){if(typeof s!="function")throw new ao(i);return fd(function(){s.apply(r,f)},c)}function id(s,c,f,p){var v=-1,P=Nm,I=!0,L=s.length,M=[],se=c.length;if(!L)return M;f&&(c=gr(c,xi(f))),p?(P=ab,I=!1):c.length>=t&&(P=Xh,I=!1,c=new Iu(c));e:for(;++v<L;){var ae=s[v],he=f==null?ae:f(ae);if(ae=p||ae!==0?ae:0,I&&he===he){for(var Pe=se;Pe--;)if(c[Pe]===he)continue e;M.push(ae)}else P(c,he,p)||M.push(ae)}return M}var mc=DA(Is),tA=DA(Eb,!0);function jN(s,c){var f=!0;return mc(s,function(p,v,P){return f=!!c(p,v,P),f}),f}function ey(s,c,f){for(var p=-1,v=s.length;++p<v;){var P=s[p],I=c(P);if(I!=null&&(L===r?I===I&&!Ai(I):f(I,L)))var L=I,M=P}return M}function qN(s,c,f,p){var v=s.length;for(f=_t(f),f<0&&(f=-f>v?0:v+f),p=p===r||p>v?v:_t(p),p<0&&(p+=v),p=f>p?0:wS(p);f<p;)s[f++]=c;return s}function rA(s,c){var f=[];return mc(s,function(p,v,P){c(p,v,P)&&f.push(p)}),f}function An(s,c,f,p,v){var P=-1,I=s.length;for(f||(f=F5),v||(v=[]);++P<I;){var L=s[P];c>0&&f(L)?c>1?An(L,c-1,f,p,v):lc(v,L):p||(v[v.length]=L)}return v}var xb=CA(),nA=CA(!0);function Is(s,c){return s&&xb(s,c,dn)}function Eb(s,c){return s&&nA(s,c,dn)}function ty(s,c){return fc(c,function(f){return wa(s[f])})}function Fu(s,c){c=gc(c,s);for(var f=0,p=c.length;s!=null&&f<p;)s=s[Fs(c[f++])];return f&&f==p?s:r}function iA(s,c,f){var p=c(s);return vt(s)?p:lc(p,f(s))}function $n(s){return s==null?s===r?$o:ac:Cu&&Cu in tr(s)?P5(s):U5(s)}function Ab(s,c){return s>c}function HN(s,c){return s!=null&&Yt.call(s,c)}function WN(s,c){return s!=null&&c in tr(s)}function VN(s,c,f){return s>=Bn(c,f)&&s<nn(c,f)}function Sb(s,c,f){for(var p=f?ab:Nm,v=s[0].length,P=s.length,I=P,L=q(P),M=1/0,se=[];I--;){var ae=s[I];I&&c&&(ae=gr(ae,xi(c))),M=Bn(ae.length,M),L[I]=!f&&(c||v>=120&&ae.length>=120)?new Iu(I&&ae):r}ae=s[0];var he=-1,Pe=L[0];e:for(;++he<v&&se.length<M;){var Ge=ae[he],st=c?c(Ge):Ge;if(Ge=f||Ge!==0?Ge:0,!(Pe?Xh(Pe,st):p(se,st,f))){for(I=P;--I;){var xt=L[I];if(!(xt?Xh(xt,st):p(s[I],st,f)))continue e}Pe&&Pe.push(st),se.push(Ge)}}return se}function GN(s,c,f,p){return Is(s,function(v,P,I){c(p,f(v),P,I)}),p}function od(s,c,f){c=gc(c,s),s=HA(s,c);var p=s==null?s:s[Fs(lo(c))];return p==null?r:_i(p,s,f)}function oA(s){return kr(s)&&$n(s)==Er}function YN(s){return kr(s)&&$n(s)==G}function JN(s){return kr(s)&&$n(s)==to}function sd(s,c,f,p,v){return s===c?!0:s==null||c==null||!kr(s)&&!kr(c)?s!==s&&c!==c:XN(s,c,f,p,sd,v)}function XN(s,c,f,p,v,P){var I=vt(s),L=vt(c),M=I?Ve:Ln(s),se=L?Ve:Ln(c);M=M==Er?Kn:M,se=se==Er?Kn:se;var ae=M==Kn,he=se==Kn,Pe=M==se;if(Pe&&bc(s)){if(!bc(c))return!1;I=!0,ae=!1}if(Pe&&!ae)return P||(P=new Wo),I||ll(s)?MA(s,c,f,p,v,P):A5(s,c,M,f,p,v,P);if(!(f&E)){var Ge=ae&&Yt.call(s,"__wrapped__"),st=he&&Yt.call(c,"__wrapped__");if(Ge||st){var xt=Ge?s.value():s,at=st?c.value():c;return P||(P=new Wo),v(xt,at,f,p,P)}}return Pe?(P||(P=new Wo),S5(s,c,f,p,v,P)):!1}function QN(s){return kr(s)&&Ln(s)==tn}function Pb(s,c,f,p){var v=f.length,P=v,I=!p;if(s==null)return!P;for(s=tr(s);v--;){var L=f[v];if(I&&L[2]?L[1]!==s[L[0]]:!(L[0]in s))return!1}for(;++v<P;){L=f[v];var M=L[0],se=s[M],ae=L[1];if(I&&L[2]){if(se===r&&!(M in s))return!1}else{var he=new Wo;if(p)var Pe=p(se,ae,M,s,c,he);if(!(Pe===r?sd(ae,se,E|k,p,he):Pe))return!1}}return!0}function sA(s){if(!Sr(s)||L5(s))return!1;var c=wa(s)?QO:Dt;return c.test(Lu(s))}function ZN(s){return kr(s)&&$n(s)==ln}function e5(s){return kr(s)&&Ln(s)==lr}function t5(s){return kr(s)&&wy(s.length)&&!!dr[$n(s)]}function aA(s){return typeof s=="function"?s:s==null?ci:typeof s=="object"?vt(s)?fA(s[0],s[1]):uA(s):kS(s)}function Db(s){if(!ud(s))return iN(s);var c=[];for(var f in tr(s))Yt.call(s,f)&&f!="constructor"&&c.push(f);return c}function r5(s){if(!Sr(s))return M5(s);var c=ud(s),f=[];for(var p in s)p=="constructor"&&(c||!Yt.call(s,p))||f.push(p);return f}function Cb(s,c){return s<c}function cA(s,c){var f=-1,p=si(s)?q(s.length):[];return mc(s,function(v,P,I){p[++f]=c(v,P,I)}),p}function uA(s){var c=jb(s);return c.length==1&&c[0][2]?jA(c[0][0],c[0][1]):function(f){return f===s||Pb(f,s,c)}}function fA(s,c){return Hb(s)&&zA(c)?jA(Fs(s),c):function(f){var p=tv(f,s);return p===r&&p===c?rv(f,s):sd(c,p,E|k)}}function ry(s,c,f,p,v){s!==c&&xb(c,function(P,I){if(v||(v=new Wo),Sr(P))n5(s,c,I,f,ry,p,v);else{var L=p?p(Vb(s,I),P,I+"",s,c,v):r;L===r&&(L=P),vb(s,I,L)}},ai)}function n5(s,c,f,p,v,P,I){var L=Vb(s,f),M=Vb(c,f),se=I.get(M);if(se){vb(s,f,se);return}var ae=P?P(L,M,f+"",s,c,I):r,he=ae===r;if(he){var Pe=vt(M),Ge=!Pe&&bc(M),st=!Pe&&!Ge&&ll(M);ae=M,Pe||Ge||st?vt(L)?ae=L:zr(L)?ae=oi(L):Ge?(he=!1,ae=xA(M,!0)):st?(he=!1,ae=EA(M,!0)):ae=[]:ld(M)||Ou(M)?(ae=L,Ou(L)?ae=bS(L):(!Sr(L)||wa(L))&&(ae=$A(M))):he=!1}he&&(I.set(M,ae),v(ae,M,p,P,I),I.delete(M)),vb(s,f,ae)}function lA(s,c){var f=s.length;if(!!f)return c+=c<0?f:0,ga(c,f)?s[c]:r}function hA(s,c,f){c.length?c=gr(c,function(P){return vt(P)?function(I){return Fu(I,P.length===1?P[0]:P)}:P}):c=[ci];var p=-1;c=gr(c,xi(it()));var v=cA(s,function(P,I,L){var M=gr(c,function(se){return se(P)});return{criteria:M,index:++p,value:P}});return IO(v,function(P,I){return y5(P,I,f)})}function i5(s,c){return dA(s,c,function(f,p){return rv(s,p)})}function dA(s,c,f){for(var p=-1,v=c.length,P={};++p<v;){var I=c[p],L=Fu(s,I);f(L,I)&&ad(P,gc(I,s),L)}return P}function o5(s){return function(c){return Fu(c,s)}}function kb(s,c,f,p){var v=p?kO:tl,P=-1,I=c.length,L=s;for(s===c&&(c=oi(c)),f&&(L=gr(s,xi(f)));++P<I;)for(var M=0,se=c[P],ae=f?f(se):se;(M=v(L,ae,M,p))>-1;)L!==s&&Wm.call(L,M,1),Wm.call(s,M,1);return s}function pA(s,c){for(var f=s?c.length:0,p=f-1;f--;){var v=c[f];if(f==p||v!==P){var P=v;ga(v)?Wm.call(s,v,1):Bb(s,v)}}return s}function Ib(s,c){return s+Ym(G8()*(c-s+1))}function s5(s,c,f,p){for(var v=-1,P=nn(Gm((c-s)/(f||1)),0),I=q(P);P--;)I[p?P:++v]=s,s+=f;return I}function Tb(s,c){var f="";if(!s||c<1||c>Wr)return f;do c%2&&(f+=s),c=Ym(c/2),c&&(s+=s);while(c);return f}function Pt(s,c){return Gb(qA(s,c,ci),s+"")}function a5(s){return X8(hl(s))}function c5(s,c){var f=hl(s);return hy(f,Tu(c,0,f.length))}function ad(s,c,f,p){if(!Sr(s))return s;c=gc(c,s);for(var v=-1,P=c.length,I=P-1,L=s;L!=null&&++v<P;){var M=Fs(c[v]),se=f;if(M==="__proto__"||M==="constructor"||M==="prototype")return s;if(v!=I){var ae=L[M];se=p?p(ae,M,L):r,se===r&&(se=Sr(ae)?ae:ga(c[v+1])?[]:{})}nd(L,M,se),L=L[M]}return s}var mA=Jm?function(s,c){return Jm.set(s,c),s}:ci,u5=Vm?function(s,c){return Vm(s,"toString",{configurable:!0,enumerable:!1,value:iv(c),writable:!0})}:ci;function f5(s){return hy(hl(s))}function fo(s,c,f){var p=-1,v=s.length;c<0&&(c=-c>v?0:v+c),f=f>v?v:f,f<0&&(f+=v),v=c>f?0:f-c>>>0,c>>>=0;for(var P=q(v);++p<v;)P[p]=s[p+c];return P}function l5(s,c){var f;return mc(s,function(p,v,P){return f=c(p,v,P),!f}),!!f}function ny(s,c,f){var p=0,v=s==null?p:s.length;if(typeof c=="number"&&c===c&&v<=er){for(;p<v;){var P=p+v>>>1,I=s[P];I!==null&&!Ai(I)&&(f?I<=c:I<c)?p=P+1:v=P}return v}return Fb(s,c,ci,f)}function Fb(s,c,f,p){var v=0,P=s==null?0:s.length;if(P===0)return 0;c=f(c);for(var I=c!==c,L=c===null,M=Ai(c),se=c===r;v<P;){var ae=Ym((v+P)/2),he=f(s[ae]),Pe=he!==r,Ge=he===null,st=he===he,xt=Ai(he);if(I)var at=p||st;else se?at=st&&(p||Pe):L?at=st&&Pe&&(p||!Ge):M?at=st&&Pe&&!Ge&&(p||!xt):Ge||xt?at=!1:at=p?he<=c:he<c;at?v=ae+1:P=ae}return Bn(P,ua)}function yA(s,c){for(var f=-1,p=s.length,v=0,P=[];++f<p;){var I=s[f],L=c?c(I):I;if(!f||!Vo(L,M)){var M=L;P[v++]=I===0?0:I}}return P}function gA(s){return typeof s=="number"?s:Ai(s)?Ur:+s}function Ei(s){if(typeof s=="string")return s;if(vt(s))return gr(s,Ei)+"";if(Ai(s))return Y8?Y8.call(s):"";var c=s+"";return c=="0"&&1/s==-Ut?"-0":c}function yc(s,c,f){var p=-1,v=Nm,P=s.length,I=!0,L=[],M=L;if(f)I=!1,v=ab;else if(P>=t){var se=c?null:x5(s);if(se)return Mm(se);I=!1,v=Xh,M=new Iu}else M=c?[]:L;e:for(;++p<P;){var ae=s[p],he=c?c(ae):ae;if(ae=f||ae!==0?ae:0,I&&he===he){for(var Pe=M.length;Pe--;)if(M[Pe]===he)continue e;c&&M.push(he),L.push(ae)}else v(M,he,f)||(M!==L&&M.push(he),L.push(ae))}return L}function Bb(s,c){return c=gc(c,s),s=HA(s,c),s==null||delete s[Fs(lo(c))]}function wA(s,c,f,p){return ad(s,c,f(Fu(s,c)),p)}function iy(s,c,f,p){for(var v=s.length,P=p?v:-1;(p?P--:++P<v)&&c(s[P],P,s););return f?fo(s,p?0:P,p?P+1:v):fo(s,p?P+1:0,p?v:P)}function bA(s,c){var f=s;return f instanceof Ft&&(f=f.value()),cb(c,function(p,v){return v.func.apply(v.thisArg,lc([p],v.args))},f)}function Lb(s,c,f){var p=s.length;if(p<2)return p?yc(s[0]):[];for(var v=-1,P=q(p);++v<p;)for(var I=s[v],L=-1;++L<p;)L!=v&&(P[v]=id(P[v]||I,s[L],c,f));return yc(An(P,1),c,f)}function vA(s,c,f){for(var p=-1,v=s.length,P=c.length,I={};++p<v;){var L=p<P?c[p]:r;f(I,s[p],L)}return I}function Ob(s){return zr(s)?s:[]}function Nb(s){return typeof s=="function"?s:ci}function gc(s,c){return vt(s)?s:Hb(s,c)?[s]:YA(Wt(s))}var h5=Pt;function wc(s,c,f){var p=s.length;return f=f===r?p:f,!c&&f>=p?s:fo(s,c,f)}var _A=ZO||function(s){return hn.clearTimeout(s)};function xA(s,c){if(c)return s.slice();var f=s.length,p=j8?j8(f):new s.constructor(f);return s.copy(p),p}function Rb(s){var c=new s.constructor(s.byteLength);return new qm(c).set(new qm(s)),c}function d5(s,c){var f=c?Rb(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function p5(s){var c=new s.constructor(s.source,ye.exec(s));return c.lastIndex=s.lastIndex,c}function m5(s){return rd?tr(rd.call(s)):{}}function EA(s,c){var f=c?Rb(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function AA(s,c){if(s!==c){var f=s!==r,p=s===null,v=s===s,P=Ai(s),I=c!==r,L=c===null,M=c===c,se=Ai(c);if(!L&&!se&&!P&&s>c||P&&I&&M&&!L&&!se||p&&I&&M||!f&&M||!v)return 1;if(!p&&!P&&!se&&s<c||se&&f&&v&&!p&&!P||L&&f&&v||!I&&v||!M)return-1}return 0}function y5(s,c,f){for(var p=-1,v=s.criteria,P=c.criteria,I=v.length,L=f.length;++p<I;){var M=AA(v[p],P[p]);if(M){if(p>=L)return M;var se=f[p];return M*(se=="desc"?-1:1)}}return s.index-c.index}function SA(s,c,f,p){for(var v=-1,P=s.length,I=f.length,L=-1,M=c.length,se=nn(P-I,0),ae=q(M+se),he=!p;++L<M;)ae[L]=c[L];for(;++v<I;)(he||v<P)&&(ae[f[v]]=s[v]);for(;se--;)ae[L++]=s[v++];return ae}function PA(s,c,f,p){for(var v=-1,P=s.length,I=-1,L=f.length,M=-1,se=c.length,ae=nn(P-L,0),he=q(ae+se),Pe=!p;++v<ae;)he[v]=s[v];for(var Ge=v;++M<se;)he[Ge+M]=c[M];for(;++I<L;)(Pe||v<P)&&(he[Ge+f[I]]=s[v++]);return he}function oi(s,c){var f=-1,p=s.length;for(c||(c=q(p));++f<p;)c[f]=s[f];return c}function Ts(s,c,f,p){var v=!f;f||(f={});for(var P=-1,I=c.length;++P<I;){var L=c[P],M=p?p(f[L],s[L],L,f,s):r;M===r&&(M=s[L]),v?pa(f,L,M):nd(f,L,M)}return f}function g5(s,c){return Ts(s,qb(s),c)}function w5(s,c){return Ts(s,UA(s),c)}function oy(s,c){return function(f,p){var v=vt(f)?EO:KN,P=c?c():{};return v(f,s,it(p,2),P)}}function cl(s){return Pt(function(c,f){var p=-1,v=f.length,P=v>1?f[v-1]:r,I=v>2?f[2]:r;for(P=s.length>3&&typeof P=="function"?(v--,P):r,I&&zn(f[0],f[1],I)&&(P=v<3?r:P,v=1),c=tr(c);++p<v;){var L=f[p];L&&s(c,L,p,P)}return c})}function DA(s,c){return function(f,p){if(f==null)return f;if(!si(f))return s(f,p);for(var v=f.length,P=c?v:-1,I=tr(f);(c?P--:++P<v)&&p(I[P],P,I)!==!1;);return f}}function CA(s){return function(c,f,p){for(var v=-1,P=tr(c),I=p(c),L=I.length;L--;){var M=I[s?L:++v];if(f(P[M],M,P)===!1)break}return c}}function b5(s,c,f){var p=c&T,v=cd(s);function P(){var I=this&&this!==hn&&this instanceof P?v:s;return I.apply(p?f:this,arguments)}return P}function kA(s){return function(c){c=Wt(c);var f=rl(c)?Ho(c):r,p=f?f[0]:c.charAt(0),v=f?wc(f,1).join(""):c.slice(1);return p[s]()+v}}function ul(s){return function(c){return cb(DS(PS(c).replace(uO,"")),s,"")}}function cd(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=al(s.prototype),p=s.apply(f,c);return Sr(p)?p:f}}function v5(s,c,f){var p=cd(s);function v(){for(var P=arguments.length,I=q(P),L=P,M=fl(v);L--;)I[L]=arguments[L];var se=P<3&&I[0]!==M&&I[P-1]!==M?[]:hc(I,M);if(P-=se.length,P<f)return LA(s,c,sy,v.placeholder,r,I,se,r,r,f-P);var ae=this&&this!==hn&&this instanceof v?p:s;return _i(ae,this,I)}return v}function IA(s){return function(c,f,p){var v=tr(c);if(!si(c)){var P=it(f,3);c=dn(c),f=function(L){return P(v[L],L,v)}}var I=s(c,f,p);return I>-1?v[P?c[I]:I]:r}}function TA(s){return ya(function(c){var f=c.length,p=f,v=co.prototype.thru;for(s&&c.reverse();p--;){var P=c[p];if(typeof P!="function")throw new ao(i);if(v&&!I&&fy(P)=="wrapper")var I=new co([],!0)}for(p=I?p:f;++p<f;){P=c[p];var L=fy(P),M=L=="wrapper"?zb(P):r;M&&Wb(M[0])&&M[1]==(be|ne|X|W)&&!M[4].length&&M[9]==1?I=I[fy(M[0])].apply(I,M[3]):I=P.length==1&&Wb(P)?I[L]():I.thru(P)}return function(){var se=arguments,ae=se[0];if(I&&se.length==1&&vt(ae))return I.plant(ae).value();for(var he=0,Pe=f?c[he].apply(this,se):ae;++he<f;)Pe=c[he].call(this,Pe);return Pe}})}function sy(s,c,f,p,v,P,I,L,M,se){var ae=c&be,he=c&T,Pe=c&O,Ge=c&(ne|ve),st=c&de,xt=Pe?r:cd(s);function at(){for(var Ct=arguments.length,Ot=q(Ct),Si=Ct;Si--;)Ot[Si]=arguments[Si];if(Ge)var jn=fl(at),Pi=FO(Ot,jn);if(p&&(Ot=SA(Ot,p,v,Ge)),P&&(Ot=PA(Ot,P,I,Ge)),Ct-=Pi,Ge&&Ct<se){var jr=hc(Ot,jn);return LA(s,c,sy,at.placeholder,f,Ot,jr,L,M,se-Ct)}var Go=he?f:this,va=Pe?Go[s]:s;return Ct=Ot.length,L?Ot=K5(Ot,L):st&&Ct>1&&Ot.reverse(),ae&&M<Ct&&(Ot.length=M),this&&this!==hn&&this instanceof at&&(va=xt||cd(va)),va.apply(Go,Ot)}return at}function FA(s,c){return function(f,p){return GN(f,s,c(p),{})}}function ay(s,c){return function(f,p){var v;if(f===r&&p===r)return c;if(f!==r&&(v=f),p!==r){if(v===r)return p;typeof f=="string"||typeof p=="string"?(f=Ei(f),p=Ei(p)):(f=gA(f),p=gA(p)),v=s(f,p)}return v}}function Mb(s){return ya(function(c){return c=gr(c,xi(it())),Pt(function(f){var p=this;return s(c,function(v){return _i(v,p,f)})})})}function cy(s,c){c=c===r?" ":Ei(c);var f=c.length;if(f<2)return f?Tb(c,s):c;var p=Tb(c,Gm(s/nl(c)));return rl(c)?wc(Ho(p),0,s).join(""):p.slice(0,s)}function _5(s,c,f,p){var v=c&T,P=cd(s);function I(){for(var L=-1,M=arguments.length,se=-1,ae=p.length,he=q(ae+M),Pe=this&&this!==hn&&this instanceof I?P:s;++se<ae;)he[se]=p[se];for(;M--;)he[se++]=arguments[++L];return _i(Pe,v?f:this,he)}return I}function BA(s){return function(c,f,p){return p&&typeof p!="number"&&zn(c,f,p)&&(f=p=r),c=ba(c),f===r?(f=c,c=0):f=ba(f),p=p===r?c<f?1:-1:ba(p),s5(c,f,p,s)}}function uy(s){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=ho(c),f=ho(f)),s(c,f)}}function LA(s,c,f,p,v,P,I,L,M,se){var ae=c&ne,he=ae?I:r,Pe=ae?r:I,Ge=ae?P:r,st=ae?r:P;c|=ae?X:me,c&=~(ae?me:X),c&ce||(c&=~(T|O));var xt=[s,c,v,Ge,he,st,Pe,L,M,se],at=f.apply(r,xt);return Wb(s)&&WA(at,xt),at.placeholder=p,VA(at,s,c)}function Ub(s){var c=rn[s];return function(f,p){if(f=ho(f),p=p==null?0:Bn(_t(p),292),p&&V8(f)){var v=(Wt(f)+"e").split("e"),P=c(v[0]+"e"+(+v[1]+p));return v=(Wt(P)+"e").split("e"),+(v[0]+"e"+(+v[1]-p))}return c(f)}}var x5=ol&&1/Mm(new ol([,-0]))[1]==Ut?function(s){return new ol(s)}:av;function OA(s){return function(c){var f=Ln(c);return f==tn?mb(c):f==lr?UO(c):TO(c,s(c))}}function ma(s,c,f,p,v,P,I,L){var M=c&O;if(!M&&typeof s!="function")throw new ao(i);var se=p?p.length:0;if(se||(c&=~(X|me),p=v=r),I=I===r?I:nn(_t(I),0),L=L===r?L:_t(L),se-=v?v.length:0,c&me){var ae=p,he=v;p=v=r}var Pe=M?r:zb(s),Ge=[s,c,f,p,v,ae,he,P,I,L];if(Pe&&R5(Ge,Pe),s=Ge[0],c=Ge[1],f=Ge[2],p=Ge[3],v=Ge[4],L=Ge[9]=Ge[9]===r?M?0:s.length:nn(Ge[9]-se,0),!L&&c&(ne|ve)&&(c&=~(ne|ve)),!c||c==T)var st=b5(s,c,f);else c==ne||c==ve?st=v5(s,c,L):(c==X||c==(T|X))&&!v.length?st=_5(s,c,f,p):st=sy.apply(r,Ge);var xt=Pe?mA:WA;return VA(xt(st,Ge),s,c)}function NA(s,c,f,p){return s===r||Vo(s,il[f])&&!Yt.call(p,f)?c:s}function RA(s,c,f,p,v,P){return Sr(s)&&Sr(c)&&(P.set(c,s),ry(s,c,r,RA,P),P.delete(c)),s}function E5(s){return ld(s)?r:s}function MA(s,c,f,p,v,P){var I=f&E,L=s.length,M=c.length;if(L!=M&&!(I&&M>L))return!1;var se=P.get(s),ae=P.get(c);if(se&&ae)return se==c&&ae==s;var he=-1,Pe=!0,Ge=f&k?new Iu:r;for(P.set(s,c),P.set(c,s);++he<L;){var st=s[he],xt=c[he];if(p)var at=I?p(xt,st,he,c,s,P):p(st,xt,he,s,c,P);if(at!==r){if(at)continue;Pe=!1;break}if(Ge){if(!ub(c,function(Ct,Ot){if(!Xh(Ge,Ot)&&(st===Ct||v(st,Ct,f,p,P)))return Ge.push(Ot)})){Pe=!1;break}}else if(!(st===xt||v(st,xt,f,p,P))){Pe=!1;break}}return P.delete(s),P.delete(c),Pe}function A5(s,c,f,p,v,P,I){switch(f){case le:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case G:return!(s.byteLength!=c.byteLength||!P(new qm(s),new qm(c)));case eo:case to:case Ko:return Vo(+s,+c);case Kr:return s.name==c.name&&s.message==c.message;case ln:case ni:return s==c+"";case tn:var L=mb;case lr:var M=p&E;if(L||(L=Mm),s.size!=c.size&&!M)return!1;var se=I.get(s);if(se)return se==c;p|=k,I.set(s,c);var ae=MA(L(s),L(c),p,v,P,I);return I.delete(s),ae;case ii:if(rd)return rd.call(s)==rd.call(c)}return!1}function S5(s,c,f,p,v,P){var I=f&E,L=Kb(s),M=L.length,se=Kb(c),ae=se.length;if(M!=ae&&!I)return!1;for(var he=M;he--;){var Pe=L[he];if(!(I?Pe in c:Yt.call(c,Pe)))return!1}var Ge=P.get(s),st=P.get(c);if(Ge&&st)return Ge==c&&st==s;var xt=!0;P.set(s,c),P.set(c,s);for(var at=I;++he<M;){Pe=L[he];var Ct=s[Pe],Ot=c[Pe];if(p)var Si=I?p(Ot,Ct,Pe,c,s,P):p(Ct,Ot,Pe,s,c,P);if(!(Si===r?Ct===Ot||v(Ct,Ot,f,p,P):Si)){xt=!1;break}at||(at=Pe=="constructor")}if(xt&&!at){var jn=s.constructor,Pi=c.constructor;jn!=Pi&&"constructor"in s&&"constructor"in c&&!(typeof jn=="function"&&jn instanceof jn&&typeof Pi=="function"&&Pi instanceof Pi)&&(xt=!1)}return P.delete(s),P.delete(c),xt}function ya(s){return Gb(qA(s,r,ZA),s+"")}function Kb(s){return iA(s,dn,qb)}function $b(s){return iA(s,ai,UA)}var zb=Jm?function(s){return Jm.get(s)}:av;function fy(s){for(var c=s.name+"",f=sl[c],p=Yt.call(sl,c)?f.length:0;p--;){var v=f[p],P=v.func;if(P==null||P==s)return v.name}return c}function fl(s){var c=Yt.call(A,"placeholder")?A:s;return c.placeholder}function it(){var s=A.iteratee||ov;return s=s===ov?aA:s,arguments.length?s(arguments[0],arguments[1]):s}function ly(s,c){var f=s.__data__;return B5(c)?f[typeof c=="string"?"string":"hash"]:f.map}function jb(s){for(var c=dn(s),f=c.length;f--;){var p=c[f],v=s[p];c[f]=[p,v,zA(v)]}return c}function Bu(s,c){var f=NO(s,c);return sA(f)?f:r}function P5(s){var c=Yt.call(s,Cu),f=s[Cu];try{s[Cu]=r;var p=!0}catch{}var v=zm.call(s);return p&&(c?s[Cu]=f:delete s[Cu]),v}var qb=gb?function(s){return s==null?[]:(s=tr(s),fc(gb(s),function(c){return H8.call(s,c)}))}:cv,UA=gb?function(s){for(var c=[];s;)lc(c,qb(s)),s=Hm(s);return c}:cv,Ln=$n;(wb&&Ln(new wb(new ArrayBuffer(1)))!=le||Zh&&Ln(new Zh)!=tn||bb&&Ln(bb.resolve())!=Fn||ol&&Ln(new ol)!=lr||ed&&Ln(new ed)!=xn)&&(Ln=function(s){var c=$n(s),f=c==Kn?s.constructor:r,p=f?Lu(f):"";if(p)switch(p){case cN:return le;case uN:return tn;case fN:return Fn;case lN:return lr;case hN:return xn}return c});function D5(s,c,f){for(var p=-1,v=f.length;++p<v;){var P=f[p],I=P.size;switch(P.type){case"drop":s+=I;break;case"dropRight":c-=I;break;case"take":c=Bn(c,s+I);break;case"takeRight":s=nn(s,c-I);break}}return{start:s,end:c}}function C5(s){var c=s.match(_);return c?c[1].split(d):[]}function KA(s,c,f){c=gc(c,s);for(var p=-1,v=c.length,P=!1;++p<v;){var I=Fs(c[p]);if(!(P=s!=null&&f(s,I)))break;s=s[I]}return P||++p!=v?P:(v=s==null?0:s.length,!!v&&wy(v)&&ga(I,v)&&(vt(s)||Ou(s)))}function k5(s){var c=s.length,f=new s.constructor(c);return c&&typeof s[0]=="string"&&Yt.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function $A(s){return typeof s.constructor=="function"&&!ud(s)?al(Hm(s)):{}}function I5(s,c,f){var p=s.constructor;switch(c){case G:return Rb(s);case eo:case to:return new p(+s);case le:return d5(s,f);case _e:case $e:case sr:case tt:case ct:case He:case mt:case ht:case Cr:return EA(s,f);case tn:return new p;case Ko:case ni:return new p(s);case ln:return p5(s);case lr:return new p;case ii:return m5(s)}}function T5(s,c){var f=c.length;if(!f)return s;var p=f-1;return c[p]=(f>1?"& ":"")+c[p],c=c.join(f>2?", ":" "),s.replace(x,`{
/* [wrapped with `+c+`] */
`)}function F5(s){return vt(s)||Ou(s)||!!(W8&&s&&s[W8])}function ga(s,c){var f=typeof s;return c=c??Wr,!!c&&(f=="number"||f!="symbol"&&rt.test(s))&&s>-1&&s%1==0&&s<c}function zn(s,c,f){if(!Sr(f))return!1;var p=typeof c;return(p=="number"?si(f)&&ga(c,f.length):p=="string"&&c in f)?Vo(f[c],s):!1}function Hb(s,c){if(vt(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||Ai(s)?!0:Su.test(s)||!Au.test(s)||c!=null&&s in tr(c)}function B5(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function Wb(s){var c=fy(s),f=A[c];if(typeof f!="function"||!(c in Ft.prototype))return!1;if(s===f)return!0;var p=zb(f);return!!p&&s===p[0]}function L5(s){return!!z8&&z8 in s}var O5=Km?wa:uv;function ud(s){var c=s&&s.constructor,f=typeof c=="function"&&c.prototype||il;return s===f}function zA(s){return s===s&&!Sr(s)}function jA(s,c){return function(f){return f==null?!1:f[s]===c&&(c!==r||s in tr(f))}}function N5(s){var c=yy(s,function(p){return f.size===u&&f.clear(),p}),f=c.cache;return c}function R5(s,c){var f=s[1],p=c[1],v=f|p,P=v<(T|O|be),I=p==be&&f==ne||p==be&&f==W&&s[7].length<=c[8]||p==(be|W)&&c[7].length<=c[8]&&f==ne;if(!(P||I))return s;p&T&&(s[2]=c[2],v|=f&T?0:ce);var L=c[3];if(L){var M=s[3];s[3]=M?SA(M,L,c[4]):L,s[4]=M?hc(s[3],l):c[4]}return L=c[5],L&&(M=s[5],s[5]=M?PA(M,L,c[6]):L,s[6]=M?hc(s[5],l):c[6]),L=c[7],L&&(s[7]=L),p&be&&(s[8]=s[8]==null?c[8]:Bn(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=v,s}function M5(s){var c=[];if(s!=null)for(var f in tr(s))c.push(f);return c}function U5(s){return zm.call(s)}function qA(s,c,f){return c=nn(c===r?s.length-1:c,0),function(){for(var p=arguments,v=-1,P=nn(p.length-c,0),I=q(P);++v<P;)I[v]=p[c+v];v=-1;for(var L=q(c+1);++v<c;)L[v]=p[v];return L[c]=f(I),_i(s,this,L)}}function HA(s,c){return c.length<2?s:Fu(s,fo(c,0,-1))}function K5(s,c){for(var f=s.length,p=Bn(c.length,f),v=oi(s);p--;){var P=c[p];s[p]=ga(P,f)?v[P]:r}return s}function Vb(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}var WA=GA(mA),fd=tN||function(s,c){return hn.setTimeout(s,c)},Gb=GA(u5);function VA(s,c,f){var p=c+"";return Gb(s,T5(p,$5(C5(p),f)))}function GA(s){var c=0,f=0;return function(){var p=oN(),v=$t-(p-f);if(f=p,v>0){if(++c>=St)return arguments[0]}else c=0;return s.apply(r,arguments)}}function hy(s,c){var f=-1,p=s.length,v=p-1;for(c=c===r?p:c;++f<c;){var P=Ib(f,v),I=s[P];s[P]=s[f],s[f]=I}return s.length=c,s}var YA=N5(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(el,function(f,p,v,P){c.push(v?P.replace(U,"$1"):p||f)}),c});function Fs(s){if(typeof s=="string"||Ai(s))return s;var c=s+"";return c=="0"&&1/s==-Ut?"-0":c}function Lu(s){if(s!=null){try{return $m.call(s)}catch{}try{return s+""}catch{}}return""}function $5(s,c){return so(Ht,function(f){var p="_."+f[0];c&f[1]&&!Nm(s,p)&&s.push(p)}),s.sort()}function JA(s){if(s instanceof Ft)return s.clone();var c=new co(s.__wrapped__,s.__chain__);return c.__actions__=oi(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}function z5(s,c,f){(f?zn(s,c,f):c===r)?c=1:c=nn(_t(c),0);var p=s==null?0:s.length;if(!p||c<1)return[];for(var v=0,P=0,I=q(Gm(p/c));v<p;)I[P++]=fo(s,v,v+=c);return I}function j5(s){for(var c=-1,f=s==null?0:s.length,p=0,v=[];++c<f;){var P=s[c];P&&(v[p++]=P)}return v}function q5(){var s=arguments.length;if(!s)return[];for(var c=q(s-1),f=arguments[0],p=s;p--;)c[p-1]=arguments[p];return lc(vt(f)?oi(f):[f],An(c,1))}var H5=Pt(function(s,c){return zr(s)?id(s,An(c,1,zr,!0)):[]}),W5=Pt(function(s,c){var f=lo(c);return zr(f)&&(f=r),zr(s)?id(s,An(c,1,zr,!0),it(f,2)):[]}),V5=Pt(function(s,c){var f=lo(c);return zr(f)&&(f=r),zr(s)?id(s,An(c,1,zr,!0),r,f):[]});function G5(s,c,f){var p=s==null?0:s.length;return p?(c=f||c===r?1:_t(c),fo(s,c<0?0:c,p)):[]}function Y5(s,c,f){var p=s==null?0:s.length;return p?(c=f||c===r?1:_t(c),c=p-c,fo(s,0,c<0?0:c)):[]}function J5(s,c){return s&&s.length?iy(s,it(c,3),!0,!0):[]}function X5(s,c){return s&&s.length?iy(s,it(c,3),!0):[]}function Q5(s,c,f,p){var v=s==null?0:s.length;return v?(f&&typeof f!="number"&&zn(s,c,f)&&(f=0,p=v),qN(s,c,f,p)):[]}function XA(s,c,f){var p=s==null?0:s.length;if(!p)return-1;var v=f==null?0:_t(f);return v<0&&(v=nn(p+v,0)),Rm(s,it(c,3),v)}function QA(s,c,f){var p=s==null?0:s.length;if(!p)return-1;var v=p-1;return f!==r&&(v=_t(f),v=f<0?nn(p+v,0):Bn(v,p-1)),Rm(s,it(c,3),v,!0)}function ZA(s){var c=s==null?0:s.length;return c?An(s,1):[]}function Z5(s){var c=s==null?0:s.length;return c?An(s,Ut):[]}function eR(s,c){var f=s==null?0:s.length;return f?(c=c===r?1:_t(c),An(s,c)):[]}function tR(s){for(var c=-1,f=s==null?0:s.length,p={};++c<f;){var v=s[c];p[v[0]]=v[1]}return p}function eS(s){return s&&s.length?s[0]:r}function rR(s,c,f){var p=s==null?0:s.length;if(!p)return-1;var v=f==null?0:_t(f);return v<0&&(v=nn(p+v,0)),tl(s,c,v)}function nR(s){var c=s==null?0:s.length;return c?fo(s,0,-1):[]}var iR=Pt(function(s){var c=gr(s,Ob);return c.length&&c[0]===s[0]?Sb(c):[]}),oR=Pt(function(s){var c=lo(s),f=gr(s,Ob);return c===lo(f)?c=r:f.pop(),f.length&&f[0]===s[0]?Sb(f,it(c,2)):[]}),sR=Pt(function(s){var c=lo(s),f=gr(s,Ob);return c=typeof c=="function"?c:r,c&&f.pop(),f.length&&f[0]===s[0]?Sb(f,r,c):[]});function aR(s,c){return s==null?"":nN.call(s,c)}function lo(s){var c=s==null?0:s.length;return c?s[c-1]:r}function cR(s,c,f){var p=s==null?0:s.length;if(!p)return-1;var v=p;return f!==r&&(v=_t(f),v=v<0?nn(p+v,0):Bn(v,p-1)),c===c?$O(s,c,v):Rm(s,L8,v,!0)}function uR(s,c){return s&&s.length?lA(s,_t(c)):r}var fR=Pt(tS);function tS(s,c){return s&&s.length&&c&&c.length?kb(s,c):s}function lR(s,c,f){return s&&s.length&&c&&c.length?kb(s,c,it(f,2)):s}function hR(s,c,f){return s&&s.length&&c&&c.length?kb(s,c,r,f):s}var dR=ya(function(s,c){var f=s==null?0:s.length,p=_b(s,c);return pA(s,gr(c,function(v){return ga(v,f)?+v:v}).sort(AA)),p});function pR(s,c){var f=[];if(!(s&&s.length))return f;var p=-1,v=[],P=s.length;for(c=it(c,3);++p<P;){var I=s[p];c(I,p,s)&&(f.push(I),v.push(p))}return pA(s,v),f}function Yb(s){return s==null?s:aN.call(s)}function mR(s,c,f){var p=s==null?0:s.length;return p?(f&&typeof f!="number"&&zn(s,c,f)?(c=0,f=p):(c=c==null?0:_t(c),f=f===r?p:_t(f)),fo(s,c,f)):[]}function yR(s,c){return ny(s,c)}function gR(s,c,f){return Fb(s,c,it(f,2))}function wR(s,c){var f=s==null?0:s.length;if(f){var p=ny(s,c);if(p<f&&Vo(s[p],c))return p}return-1}function bR(s,c){return ny(s,c,!0)}function vR(s,c,f){return Fb(s,c,it(f,2),!0)}function _R(s,c){var f=s==null?0:s.length;if(f){var p=ny(s,c,!0)-1;if(Vo(s[p],c))return p}return-1}function xR(s){return s&&s.length?yA(s):[]}function ER(s,c){return s&&s.length?yA(s,it(c,2)):[]}function AR(s){var c=s==null?0:s.length;return c?fo(s,1,c):[]}function SR(s,c,f){return s&&s.length?(c=f||c===r?1:_t(c),fo(s,0,c<0?0:c)):[]}function PR(s,c,f){var p=s==null?0:s.length;return p?(c=f||c===r?1:_t(c),c=p-c,fo(s,c<0?0:c,p)):[]}function DR(s,c){return s&&s.length?iy(s,it(c,3),!1,!0):[]}function CR(s,c){return s&&s.length?iy(s,it(c,3)):[]}var kR=Pt(function(s){return yc(An(s,1,zr,!0))}),IR=Pt(function(s){var c=lo(s);return zr(c)&&(c=r),yc(An(s,1,zr,!0),it(c,2))}),TR=Pt(function(s){var c=lo(s);return c=typeof c=="function"?c:r,yc(An(s,1,zr,!0),r,c)});function FR(s){return s&&s.length?yc(s):[]}function BR(s,c){return s&&s.length?yc(s,it(c,2)):[]}function LR(s,c){return c=typeof c=="function"?c:r,s&&s.length?yc(s,r,c):[]}function Jb(s){if(!(s&&s.length))return[];var c=0;return s=fc(s,function(f){if(zr(f))return c=nn(f.length,c),!0}),db(c,function(f){return gr(s,fb(f))})}function rS(s,c){if(!(s&&s.length))return[];var f=Jb(s);return c==null?f:gr(f,function(p){return _i(c,r,p)})}var OR=Pt(function(s,c){return zr(s)?id(s,c):[]}),NR=Pt(function(s){return Lb(fc(s,zr))}),RR=Pt(function(s){var c=lo(s);return zr(c)&&(c=r),Lb(fc(s,zr),it(c,2))}),MR=Pt(function(s){var c=lo(s);return c=typeof c=="function"?c:r,Lb(fc(s,zr),r,c)}),UR=Pt(Jb);function KR(s,c){return vA(s||[],c||[],nd)}function $R(s,c){return vA(s||[],c||[],ad)}var zR=Pt(function(s){var c=s.length,f=c>1?s[c-1]:r;return f=typeof f=="function"?(s.pop(),f):r,rS(s,f)});function nS(s){var c=A(s);return c.__chain__=!0,c}function jR(s,c){return c(s),s}function dy(s,c){return c(s)}var qR=ya(function(s){var c=s.length,f=c?s[0]:0,p=this.__wrapped__,v=function(P){return _b(P,s)};return c>1||this.__actions__.length||!(p instanceof Ft)||!ga(f)?this.thru(v):(p=p.slice(f,+f+(c?1:0)),p.__actions__.push({func:dy,args:[v],thisArg:r}),new co(p,this.__chain__).thru(function(P){return c&&!P.length&&P.push(r),P}))});function HR(){return nS(this)}function WR(){return new co(this.value(),this.__chain__)}function VR(){this.__values__===r&&(this.__values__=gS(this.value()));var s=this.__index__>=this.__values__.length,c=s?r:this.__values__[this.__index__++];return{done:s,value:c}}function GR(){return this}function YR(s){for(var c,f=this;f instanceof Qm;){var p=JA(f);p.__index__=0,p.__values__=r,c?v.__wrapped__=p:c=p;var v=p;f=f.__wrapped__}return v.__wrapped__=s,c}function JR(){var s=this.__wrapped__;if(s instanceof Ft){var c=s;return this.__actions__.length&&(c=new Ft(this)),c=c.reverse(),c.__actions__.push({func:dy,args:[Yb],thisArg:r}),new co(c,this.__chain__)}return this.thru(Yb)}function XR(){return bA(this.__wrapped__,this.__actions__)}var QR=oy(function(s,c,f){Yt.call(s,f)?++s[f]:pa(s,f,1)});function ZR(s,c,f){var p=vt(s)?F8:jN;return f&&zn(s,c,f)&&(c=r),p(s,it(c,3))}function eM(s,c){var f=vt(s)?fc:rA;return f(s,it(c,3))}var tM=IA(XA),rM=IA(QA);function nM(s,c){return An(py(s,c),1)}function iM(s,c){return An(py(s,c),Ut)}function oM(s,c,f){return f=f===r?1:_t(f),An(py(s,c),f)}function iS(s,c){var f=vt(s)?so:mc;return f(s,it(c,3))}function oS(s,c){var f=vt(s)?AO:tA;return f(s,it(c,3))}var sM=oy(function(s,c,f){Yt.call(s,f)?s[f].push(c):pa(s,f,[c])});function aM(s,c,f,p){s=si(s)?s:hl(s),f=f&&!p?_t(f):0;var v=s.length;return f<0&&(f=nn(v+f,0)),by(s)?f<=v&&s.indexOf(c,f)>-1:!!v&&tl(s,c,f)>-1}var cM=Pt(function(s,c,f){var p=-1,v=typeof c=="function",P=si(s)?q(s.length):[];return mc(s,function(I){P[++p]=v?_i(c,I,f):od(I,c,f)}),P}),uM=oy(function(s,c,f){pa(s,f,c)});function py(s,c){var f=vt(s)?gr:cA;return f(s,it(c,3))}function fM(s,c,f,p){return s==null?[]:(vt(c)||(c=c==null?[]:[c]),f=p?r:f,vt(f)||(f=f==null?[]:[f]),hA(s,c,f))}var lM=oy(function(s,c,f){s[f?0:1].push(c)},function(){return[[],[]]});function hM(s,c,f){var p=vt(s)?cb:N8,v=arguments.length<3;return p(s,it(c,4),f,v,mc)}function dM(s,c,f){var p=vt(s)?SO:N8,v=arguments.length<3;return p(s,it(c,4),f,v,tA)}function pM(s,c){var f=vt(s)?fc:rA;return f(s,gy(it(c,3)))}function mM(s){var c=vt(s)?X8:a5;return c(s)}function yM(s,c,f){(f?zn(s,c,f):c===r)?c=1:c=_t(c);var p=vt(s)?MN:c5;return p(s,c)}function gM(s){var c=vt(s)?UN:f5;return c(s)}function wM(s){if(s==null)return 0;if(si(s))return by(s)?nl(s):s.length;var c=Ln(s);return c==tn||c==lr?s.size:Db(s).length}function bM(s,c,f){var p=vt(s)?ub:l5;return f&&zn(s,c,f)&&(c=r),p(s,it(c,3))}var vM=Pt(function(s,c){if(s==null)return[];var f=c.length;return f>1&&zn(s,c[0],c[1])?c=[]:f>2&&zn(c[0],c[1],c[2])&&(c=[c[0]]),hA(s,An(c,1),[])}),my=eN||function(){return hn.Date.now()};function _M(s,c){if(typeof c!="function")throw new ao(i);return s=_t(s),function(){if(--s<1)return c.apply(this,arguments)}}function sS(s,c,f){return c=f?r:c,c=s&&c==null?s.length:c,ma(s,be,r,r,r,r,c)}function aS(s,c){var f;if(typeof c!="function")throw new ao(i);return s=_t(s),function(){return--s>0&&(f=c.apply(this,arguments)),s<=1&&(c=r),f}}var Xb=Pt(function(s,c,f){var p=T;if(f.length){var v=hc(f,fl(Xb));p|=X}return ma(s,p,c,f,v)}),cS=Pt(function(s,c,f){var p=T|O;if(f.length){var v=hc(f,fl(cS));p|=X}return ma(c,p,s,f,v)});function uS(s,c,f){c=f?r:c;var p=ma(s,ne,r,r,r,r,r,c);return p.placeholder=uS.placeholder,p}function fS(s,c,f){c=f?r:c;var p=ma(s,ve,r,r,r,r,r,c);return p.placeholder=fS.placeholder,p}function lS(s,c,f){var p,v,P,I,L,M,se=0,ae=!1,he=!1,Pe=!0;if(typeof s!="function")throw new ao(i);c=ho(c)||0,Sr(f)&&(ae=!!f.leading,he="maxWait"in f,P=he?nn(ho(f.maxWait)||0,c):P,Pe="trailing"in f?!!f.trailing:Pe);function Ge(jr){var Go=p,va=v;return p=v=r,se=jr,I=s.apply(va,Go),I}function st(jr){return se=jr,L=fd(Ct,c),ae?Ge(jr):I}function xt(jr){var Go=jr-M,va=jr-se,IS=c-Go;return he?Bn(IS,P-va):IS}function at(jr){var Go=jr-M,va=jr-se;return M===r||Go>=c||Go<0||he&&va>=P}function Ct(){var jr=my();if(at(jr))return Ot(jr);L=fd(Ct,xt(jr))}function Ot(jr){return L=r,Pe&&p?Ge(jr):(p=v=r,I)}function Si(){L!==r&&_A(L),se=0,p=M=v=L=r}function jn(){return L===r?I:Ot(my())}function Pi(){var jr=my(),Go=at(jr);if(p=arguments,v=this,M=jr,Go){if(L===r)return st(M);if(he)return _A(L),L=fd(Ct,c),Ge(M)}return L===r&&(L=fd(Ct,c)),I}return Pi.cancel=Si,Pi.flush=jn,Pi}var xM=Pt(function(s,c){return eA(s,1,c)}),EM=Pt(function(s,c,f){return eA(s,ho(c)||0,f)});function AM(s){return ma(s,de)}function yy(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new ao(i);var f=function(){var p=arguments,v=c?c.apply(this,p):p[0],P=f.cache;if(P.has(v))return P.get(v);var I=s.apply(this,p);return f.cache=P.set(v,I)||P,I};return f.cache=new(yy.Cache||da),f}yy.Cache=da;function gy(s){if(typeof s!="function")throw new ao(i);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}function SM(s){return aS(2,s)}var PM=h5(function(s,c){c=c.length==1&&vt(c[0])?gr(c[0],xi(it())):gr(An(c,1),xi(it()));var f=c.length;return Pt(function(p){for(var v=-1,P=Bn(p.length,f);++v<P;)p[v]=c[v].call(this,p[v]);return _i(s,this,p)})}),Qb=Pt(function(s,c){var f=hc(c,fl(Qb));return ma(s,X,r,c,f)}),hS=Pt(function(s,c){var f=hc(c,fl(hS));return ma(s,me,r,c,f)}),DM=ya(function(s,c){return ma(s,W,r,r,r,c)});function CM(s,c){if(typeof s!="function")throw new ao(i);return c=c===r?c:_t(c),Pt(s,c)}function kM(s,c){if(typeof s!="function")throw new ao(i);return c=c==null?0:nn(_t(c),0),Pt(function(f){var p=f[c],v=wc(f,0,c);return p&&lc(v,p),_i(s,this,v)})}function IM(s,c,f){var p=!0,v=!0;if(typeof s!="function")throw new ao(i);return Sr(f)&&(p="leading"in f?!!f.leading:p,v="trailing"in f?!!f.trailing:v),lS(s,c,{leading:p,maxWait:c,trailing:v})}function TM(s){return sS(s,1)}function FM(s,c){return Qb(Nb(c),s)}function BM(){if(!arguments.length)return[];var s=arguments[0];return vt(s)?s:[s]}function LM(s){return uo(s,y)}function OM(s,c){return c=typeof c=="function"?c:r,uo(s,y,c)}function NM(s){return uo(s,h|y)}function RM(s,c){return c=typeof c=="function"?c:r,uo(s,h|y,c)}function MM(s,c){return c==null||Z8(s,c,dn(c))}function Vo(s,c){return s===c||s!==s&&c!==c}var UM=uy(Ab),KM=uy(function(s,c){return s>=c}),Ou=oA(function(){return arguments}())?oA:function(s){return kr(s)&&Yt.call(s,"callee")&&!H8.call(s,"callee")},vt=q.isArray,$M=P8?xi(P8):YN;function si(s){return s!=null&&wy(s.length)&&!wa(s)}function zr(s){return kr(s)&&si(s)}function zM(s){return s===!0||s===!1||kr(s)&&$n(s)==eo}var bc=rN||uv,jM=D8?xi(D8):JN;function qM(s){return kr(s)&&s.nodeType===1&&!ld(s)}function HM(s){if(s==null)return!0;if(si(s)&&(vt(s)||typeof s=="string"||typeof s.splice=="function"||bc(s)||ll(s)||Ou(s)))return!s.length;var c=Ln(s);if(c==tn||c==lr)return!s.size;if(ud(s))return!Db(s).length;for(var f in s)if(Yt.call(s,f))return!1;return!0}function WM(s,c){return sd(s,c)}function VM(s,c,f){f=typeof f=="function"?f:r;var p=f?f(s,c):r;return p===r?sd(s,c,r,f):!!p}function Zb(s){if(!kr(s))return!1;var c=$n(s);return c==Kr||c==ks||typeof s.message=="string"&&typeof s.name=="string"&&!ld(s)}function GM(s){return typeof s=="number"&&V8(s)}function wa(s){if(!Sr(s))return!1;var c=$n(s);return c==ro||c==Tn||c==fn||c==cc}function dS(s){return typeof s=="number"&&s==_t(s)}function wy(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Wr}function Sr(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function kr(s){return s!=null&&typeof s=="object"}var pS=C8?xi(C8):QN;function YM(s,c){return s===c||Pb(s,c,jb(c))}function JM(s,c,f){return f=typeof f=="function"?f:r,Pb(s,c,jb(c),f)}function XM(s){return mS(s)&&s!=+s}function QM(s){if(O5(s))throw new gt(n);return sA(s)}function ZM(s){return s===null}function eU(s){return s==null}function mS(s){return typeof s=="number"||kr(s)&&$n(s)==Ko}function ld(s){if(!kr(s)||$n(s)!=Kn)return!1;var c=Hm(s);if(c===null)return!0;var f=Yt.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&$m.call(f)==JO}var ev=k8?xi(k8):ZN;function tU(s){return dS(s)&&s>=-Wr&&s<=Wr}var yS=I8?xi(I8):e5;function by(s){return typeof s=="string"||!vt(s)&&kr(s)&&$n(s)==ni}function Ai(s){return typeof s=="symbol"||kr(s)&&$n(s)==ii}var ll=T8?xi(T8):t5;function rU(s){return s===r}function nU(s){return kr(s)&&Ln(s)==xn}function iU(s){return kr(s)&&$n(s)==K}var oU=uy(Cb),sU=uy(function(s,c){return s<=c});function gS(s){if(!s)return[];if(si(s))return by(s)?Ho(s):oi(s);if(Qh&&s[Qh])return MO(s[Qh]());var c=Ln(s),f=c==tn?mb:c==lr?Mm:hl;return f(s)}function ba(s){if(!s)return s===0?s:0;if(s=ho(s),s===Ut||s===-Ut){var c=s<0?-1:1;return c*Un}return s===s?s:0}function _t(s){var c=ba(s),f=c%1;return c===c?f?c-f:c:0}function wS(s){return s?Tu(_t(s),0,en):0}function ho(s){if(typeof s=="number")return s;if(Ai(s))return Ur;if(Sr(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=Sr(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=R8(s);var f=Se.test(s);return f||Te.test(s)?_O(s.slice(2),f?2:8):Ke.test(s)?Ur:+s}function bS(s){return Ts(s,ai(s))}function aU(s){return s?Tu(_t(s),-Wr,Wr):s===0?s:0}function Wt(s){return s==null?"":Ei(s)}var cU=cl(function(s,c){if(ud(c)||si(c)){Ts(c,dn(c),s);return}for(var f in c)Yt.call(c,f)&&nd(s,f,c[f])}),vS=cl(function(s,c){Ts(c,ai(c),s)}),vy=cl(function(s,c,f,p){Ts(c,ai(c),s,p)}),uU=cl(function(s,c,f,p){Ts(c,dn(c),s,p)}),fU=ya(_b);function lU(s,c){var f=al(s);return c==null?f:Q8(f,c)}var hU=Pt(function(s,c){s=tr(s);var f=-1,p=c.length,v=p>2?c[2]:r;for(v&&zn(c[0],c[1],v)&&(p=1);++f<p;)for(var P=c[f],I=ai(P),L=-1,M=I.length;++L<M;){var se=I[L],ae=s[se];(ae===r||Vo(ae,il[se])&&!Yt.call(s,se))&&(s[se]=P[se])}return s}),dU=Pt(function(s){return s.push(r,RA),_i(_S,r,s)});function pU(s,c){return B8(s,it(c,3),Is)}function mU(s,c){return B8(s,it(c,3),Eb)}function yU(s,c){return s==null?s:xb(s,it(c,3),ai)}function gU(s,c){return s==null?s:nA(s,it(c,3),ai)}function wU(s,c){return s&&Is(s,it(c,3))}function bU(s,c){return s&&Eb(s,it(c,3))}function vU(s){return s==null?[]:ty(s,dn(s))}function _U(s){return s==null?[]:ty(s,ai(s))}function tv(s,c,f){var p=s==null?r:Fu(s,c);return p===r?f:p}function xU(s,c){return s!=null&&KA(s,c,HN)}function rv(s,c){return s!=null&&KA(s,c,WN)}var EU=FA(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=zm.call(c)),s[c]=f},iv(ci)),AU=FA(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=zm.call(c)),Yt.call(s,c)?s[c].push(f):s[c]=[f]},it),SU=Pt(od);function dn(s){return si(s)?J8(s):Db(s)}function ai(s){return si(s)?J8(s,!0):r5(s)}function PU(s,c){var f={};return c=it(c,3),Is(s,function(p,v,P){pa(f,c(p,v,P),p)}),f}function DU(s,c){var f={};return c=it(c,3),Is(s,function(p,v,P){pa(f,v,c(p,v,P))}),f}var CU=cl(function(s,c,f){ry(s,c,f)}),_S=cl(function(s,c,f,p){ry(s,c,f,p)}),kU=ya(function(s,c){var f={};if(s==null)return f;var p=!1;c=gr(c,function(P){return P=gc(P,s),p||(p=P.length>1),P}),Ts(s,$b(s),f),p&&(f=uo(f,h|m|y,E5));for(var v=c.length;v--;)Bb(f,c[v]);return f});function IU(s,c){return xS(s,gy(it(c)))}var TU=ya(function(s,c){return s==null?{}:i5(s,c)});function xS(s,c){if(s==null)return{};var f=gr($b(s),function(p){return[p]});return c=it(c),dA(s,f,function(p,v){return c(p,v[0])})}function FU(s,c,f){c=gc(c,s);var p=-1,v=c.length;for(v||(v=1,s=r);++p<v;){var P=s==null?r:s[Fs(c[p])];P===r&&(p=v,P=f),s=wa(P)?P.call(s):P}return s}function BU(s,c,f){return s==null?s:ad(s,c,f)}function LU(s,c,f,p){return p=typeof p=="function"?p:r,s==null?s:ad(s,c,f,p)}var ES=OA(dn),AS=OA(ai);function OU(s,c,f){var p=vt(s),v=p||bc(s)||ll(s);if(c=it(c,4),f==null){var P=s&&s.constructor;v?f=p?new P:[]:Sr(s)?f=wa(P)?al(Hm(s)):{}:f={}}return(v?so:Is)(s,function(I,L,M){return c(f,I,L,M)}),f}function NU(s,c){return s==null?!0:Bb(s,c)}function RU(s,c,f){return s==null?s:wA(s,c,Nb(f))}function MU(s,c,f,p){return p=typeof p=="function"?p:r,s==null?s:wA(s,c,Nb(f),p)}function hl(s){return s==null?[]:pb(s,dn(s))}function UU(s){return s==null?[]:pb(s,ai(s))}function KU(s,c,f){return f===r&&(f=c,c=r),f!==r&&(f=ho(f),f=f===f?f:0),c!==r&&(c=ho(c),c=c===c?c:0),Tu(ho(s),c,f)}function $U(s,c,f){return c=ba(c),f===r?(f=c,c=0):f=ba(f),s=ho(s),VN(s,c,f)}function zU(s,c,f){if(f&&typeof f!="boolean"&&zn(s,c,f)&&(c=f=r),f===r&&(typeof c=="boolean"?(f=c,c=r):typeof s=="boolean"&&(f=s,s=r)),s===r&&c===r?(s=0,c=1):(s=ba(s),c===r?(c=s,s=0):c=ba(c)),s>c){var p=s;s=c,c=p}if(f||s%1||c%1){var v=G8();return Bn(s+v*(c-s+vO("1e-"+((v+"").length-1))),c)}return Ib(s,c)}var jU=ul(function(s,c,f){return c=c.toLowerCase(),s+(f?SS(c):c)});function SS(s){return nv(Wt(s).toLowerCase())}function PS(s){return s=Wt(s),s&&s.replace(ot,BO).replace(fO,"")}function qU(s,c,f){s=Wt(s),c=Ei(c);var p=s.length;f=f===r?p:Tu(_t(f),0,p);var v=f;return f-=c.length,f>=0&&s.slice(f,v)==c}function HU(s){return s=Wt(s),s&&Yh.test(s)?s.replace(Eu,LO):s}function WU(s){return s=Wt(s),s&&En.test(s)?s.replace(Pu,"\\$&"):s}var VU=ul(function(s,c,f){return s+(f?"-":"")+c.toLowerCase()}),GU=ul(function(s,c,f){return s+(f?" ":"")+c.toLowerCase()}),YU=kA("toLowerCase");function JU(s,c,f){s=Wt(s),c=_t(c);var p=c?nl(s):0;if(!c||p>=c)return s;var v=(c-p)/2;return cy(Ym(v),f)+s+cy(Gm(v),f)}function XU(s,c,f){s=Wt(s),c=_t(c);var p=c?nl(s):0;return c&&p<c?s+cy(c-p,f):s}function QU(s,c,f){s=Wt(s),c=_t(c);var p=c?nl(s):0;return c&&p<c?cy(c-p,f)+s:s}function ZU(s,c,f){return f||c==null?c=0:c&&(c=+c),sN(Wt(s).replace(uc,""),c||0)}function e7(s,c,f){return(f?zn(s,c,f):c===r)?c=1:c=_t(c),Tb(Wt(s),c)}function t7(){var s=arguments,c=Wt(s[0]);return s.length<3?c:c.replace(s[1],s[2])}var r7=ul(function(s,c,f){return s+(f?"_":"")+c.toLowerCase()});function n7(s,c,f){return f&&typeof f!="number"&&zn(s,c,f)&&(c=f=r),f=f===r?en:f>>>0,f?(s=Wt(s),s&&(typeof c=="string"||c!=null&&!ev(c))&&(c=Ei(c),!c&&rl(s))?wc(Ho(s),0,f):s.split(c,f)):[]}var i7=ul(function(s,c,f){return s+(f?" ":"")+nv(c)});function o7(s,c,f){return s=Wt(s),f=f==null?0:Tu(_t(f),0,s.length),c=Ei(c),s.slice(f,f+c.length)==c}function s7(s,c,f){var p=A.templateSettings;f&&zn(s,c,f)&&(c=r),s=Wt(s),c=vy({},c,p,NA);var v=vy({},c.imports,p.imports,NA),P=dn(v),I=pb(v,P),L,M,se=0,ae=c.interpolate||ut,he="__p += '",Pe=yb((c.escape||ut).source+"|"+ae.source+"|"+(ae===qo?oe:ut).source+"|"+(c.evaluate||ut).source+"|$","g"),Ge="//# sourceURL="+(Yt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mO+"]")+`
`;s.replace(Pe,function(at,Ct,Ot,Si,jn,Pi){return Ot||(Ot=Si),he+=s.slice(se,Pi).replace(lt,OO),Ct&&(L=!0,he+=`' +
__e(`+Ct+`) +
'`),jn&&(M=!0,he+=`';
`+jn+`;
__p += '`),Ot&&(he+=`' +
((__t = (`+Ot+`)) == null ? '' : __t) +
'`),se=Pi+at.length,at}),he+=`';
`;var st=Yt.call(c,"variable")&&c.variable;if(!st)he=`with (obj) {
`+he+`
}
`;else if(R.test(st))throw new gt(o);he=(M?he.replace(zo,""):he).replace(fa,"$1").replace(jo,"$1;"),he="function("+(st||"obj")+`) {
`+(st?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+he+`return __p
}`;var xt=CS(function(){return zt(P,Ge+"return "+he).apply(r,I)});if(xt.source=he,Zb(xt))throw xt;return xt}function a7(s){return Wt(s).toLowerCase()}function c7(s){return Wt(s).toUpperCase()}function u7(s,c,f){if(s=Wt(s),s&&(f||c===r))return R8(s);if(!s||!(c=Ei(c)))return s;var p=Ho(s),v=Ho(c),P=M8(p,v),I=U8(p,v)+1;return wc(p,P,I).join("")}function f7(s,c,f){if(s=Wt(s),s&&(f||c===r))return s.slice(0,$8(s)+1);if(!s||!(c=Ei(c)))return s;var p=Ho(s),v=U8(p,Ho(c))+1;return wc(p,0,v).join("")}function l7(s,c,f){if(s=Wt(s),s&&(f||c===r))return s.replace(uc,"");if(!s||!(c=Ei(c)))return s;var p=Ho(s),v=M8(p,Ho(c));return wc(p,v).join("")}function h7(s,c){var f=ge,p=Ue;if(Sr(c)){var v="separator"in c?c.separator:v;f="length"in c?_t(c.length):f,p="omission"in c?Ei(c.omission):p}s=Wt(s);var P=s.length;if(rl(s)){var I=Ho(s);P=I.length}if(f>=P)return s;var L=f-nl(p);if(L<1)return p;var M=I?wc(I,0,L).join(""):s.slice(0,L);if(v===r)return M+p;if(I&&(L+=M.length-L),ev(v)){if(s.slice(L).search(v)){var se,ae=M;for(v.global||(v=yb(v.source,Wt(ye.exec(v))+"g")),v.lastIndex=0;se=v.exec(ae);)var he=se.index;M=M.slice(0,he===r?L:he)}}else if(s.indexOf(Ei(v),L)!=L){var Pe=M.lastIndexOf(v);Pe>-1&&(M=M.slice(0,Pe))}return M+p}function d7(s){return s=Wt(s),s&&no.test(s)?s.replace(la,zO):s}var p7=ul(function(s,c,f){return s+(f?" ":"")+c.toUpperCase()}),nv=kA("toUpperCase");function DS(s,c,f){return s=Wt(s),c=f?r:c,c===r?RO(s)?HO(s):CO(s):s.match(c)||[]}var CS=Pt(function(s,c){try{return _i(s,r,c)}catch(f){return Zb(f)?f:new gt(f)}}),m7=ya(function(s,c){return so(c,function(f){f=Fs(f),pa(s,f,Xb(s[f],s))}),s});function y7(s){var c=s==null?0:s.length,f=it();return s=c?gr(s,function(p){if(typeof p[1]!="function")throw new ao(i);return[f(p[0]),p[1]]}):[],Pt(function(p){for(var v=-1;++v<c;){var P=s[v];if(_i(P[0],this,p))return _i(P[1],this,p)}})}function g7(s){return zN(uo(s,h))}function iv(s){return function(){return s}}function w7(s,c){return s==null||s!==s?c:s}var b7=TA(),v7=TA(!0);function ci(s){return s}function ov(s){return aA(typeof s=="function"?s:uo(s,h))}function _7(s){return uA(uo(s,h))}function x7(s,c){return fA(s,uo(c,h))}var E7=Pt(function(s,c){return function(f){return od(f,s,c)}}),A7=Pt(function(s,c){return function(f){return od(s,f,c)}});function sv(s,c,f){var p=dn(c),v=ty(c,p);f==null&&!(Sr(c)&&(v.length||!p.length))&&(f=c,c=s,s=this,v=ty(c,dn(c)));var P=!(Sr(f)&&"chain"in f)||!!f.chain,I=wa(s);return so(v,function(L){var M=c[L];s[L]=M,I&&(s.prototype[L]=function(){var se=this.__chain__;if(P||se){var ae=s(this.__wrapped__),he=ae.__actions__=oi(this.__actions__);return he.push({func:M,args:arguments,thisArg:s}),ae.__chain__=se,ae}return M.apply(s,lc([this.value()],arguments))})}),s}function S7(){return hn._===this&&(hn._=XO),this}function av(){}function P7(s){return s=_t(s),Pt(function(c){return lA(c,s)})}var D7=Mb(gr),C7=Mb(F8),k7=Mb(ub);function kS(s){return Hb(s)?fb(Fs(s)):o5(s)}function I7(s){return function(c){return s==null?r:Fu(s,c)}}var T7=BA(),F7=BA(!0);function cv(){return[]}function uv(){return!1}function B7(){return{}}function L7(){return""}function O7(){return!0}function N7(s,c){if(s=_t(s),s<1||s>Wr)return[];var f=en,p=Bn(s,en);c=it(c),s-=en;for(var v=db(p,c);++f<s;)c(f);return v}function R7(s){return vt(s)?gr(s,Fs):Ai(s)?[s]:oi(YA(Wt(s)))}function M7(s){var c=++YO;return Wt(s)+c}var U7=ay(function(s,c){return s+c},0),K7=Ub("ceil"),$7=ay(function(s,c){return s/c},1),z7=Ub("floor");function j7(s){return s&&s.length?ey(s,ci,Ab):r}function q7(s,c){return s&&s.length?ey(s,it(c,2),Ab):r}function H7(s){return O8(s,ci)}function W7(s,c){return O8(s,it(c,2))}function V7(s){return s&&s.length?ey(s,ci,Cb):r}function G7(s,c){return s&&s.length?ey(s,it(c,2),Cb):r}var Y7=ay(function(s,c){return s*c},1),J7=Ub("round"),X7=ay(function(s,c){return s-c},0);function Q7(s){return s&&s.length?hb(s,ci):0}function Z7(s,c){return s&&s.length?hb(s,it(c,2)):0}return A.after=_M,A.ary=sS,A.assign=cU,A.assignIn=vS,A.assignInWith=vy,A.assignWith=uU,A.at=fU,A.before=aS,A.bind=Xb,A.bindAll=m7,A.bindKey=cS,A.castArray=BM,A.chain=nS,A.chunk=z5,A.compact=j5,A.concat=q5,A.cond=y7,A.conforms=g7,A.constant=iv,A.countBy=QR,A.create=lU,A.curry=uS,A.curryRight=fS,A.debounce=lS,A.defaults=hU,A.defaultsDeep=dU,A.defer=xM,A.delay=EM,A.difference=H5,A.differenceBy=W5,A.differenceWith=V5,A.drop=G5,A.dropRight=Y5,A.dropRightWhile=J5,A.dropWhile=X5,A.fill=Q5,A.filter=eM,A.flatMap=nM,A.flatMapDeep=iM,A.flatMapDepth=oM,A.flatten=ZA,A.flattenDeep=Z5,A.flattenDepth=eR,A.flip=AM,A.flow=b7,A.flowRight=v7,A.fromPairs=tR,A.functions=vU,A.functionsIn=_U,A.groupBy=sM,A.initial=nR,A.intersection=iR,A.intersectionBy=oR,A.intersectionWith=sR,A.invert=EU,A.invertBy=AU,A.invokeMap=cM,A.iteratee=ov,A.keyBy=uM,A.keys=dn,A.keysIn=ai,A.map=py,A.mapKeys=PU,A.mapValues=DU,A.matches=_7,A.matchesProperty=x7,A.memoize=yy,A.merge=CU,A.mergeWith=_S,A.method=E7,A.methodOf=A7,A.mixin=sv,A.negate=gy,A.nthArg=P7,A.omit=kU,A.omitBy=IU,A.once=SM,A.orderBy=fM,A.over=D7,A.overArgs=PM,A.overEvery=C7,A.overSome=k7,A.partial=Qb,A.partialRight=hS,A.partition=lM,A.pick=TU,A.pickBy=xS,A.property=kS,A.propertyOf=I7,A.pull=fR,A.pullAll=tS,A.pullAllBy=lR,A.pullAllWith=hR,A.pullAt=dR,A.range=T7,A.rangeRight=F7,A.rearg=DM,A.reject=pM,A.remove=pR,A.rest=CM,A.reverse=Yb,A.sampleSize=yM,A.set=BU,A.setWith=LU,A.shuffle=gM,A.slice=mR,A.sortBy=vM,A.sortedUniq=xR,A.sortedUniqBy=ER,A.split=n7,A.spread=kM,A.tail=AR,A.take=SR,A.takeRight=PR,A.takeRightWhile=DR,A.takeWhile=CR,A.tap=jR,A.throttle=IM,A.thru=dy,A.toArray=gS,A.toPairs=ES,A.toPairsIn=AS,A.toPath=R7,A.toPlainObject=bS,A.transform=OU,A.unary=TM,A.union=kR,A.unionBy=IR,A.unionWith=TR,A.uniq=FR,A.uniqBy=BR,A.uniqWith=LR,A.unset=NU,A.unzip=Jb,A.unzipWith=rS,A.update=RU,A.updateWith=MU,A.values=hl,A.valuesIn=UU,A.without=OR,A.words=DS,A.wrap=FM,A.xor=NR,A.xorBy=RR,A.xorWith=MR,A.zip=UR,A.zipObject=KR,A.zipObjectDeep=$R,A.zipWith=zR,A.entries=ES,A.entriesIn=AS,A.extend=vS,A.extendWith=vy,sv(A,A),A.add=U7,A.attempt=CS,A.camelCase=jU,A.capitalize=SS,A.ceil=K7,A.clamp=KU,A.clone=LM,A.cloneDeep=NM,A.cloneDeepWith=RM,A.cloneWith=OM,A.conformsTo=MM,A.deburr=PS,A.defaultTo=w7,A.divide=$7,A.endsWith=qU,A.eq=Vo,A.escape=HU,A.escapeRegExp=WU,A.every=ZR,A.find=tM,A.findIndex=XA,A.findKey=pU,A.findLast=rM,A.findLastIndex=QA,A.findLastKey=mU,A.floor=z7,A.forEach=iS,A.forEachRight=oS,A.forIn=yU,A.forInRight=gU,A.forOwn=wU,A.forOwnRight=bU,A.get=tv,A.gt=UM,A.gte=KM,A.has=xU,A.hasIn=rv,A.head=eS,A.identity=ci,A.includes=aM,A.indexOf=rR,A.inRange=$U,A.invoke=SU,A.isArguments=Ou,A.isArray=vt,A.isArrayBuffer=$M,A.isArrayLike=si,A.isArrayLikeObject=zr,A.isBoolean=zM,A.isBuffer=bc,A.isDate=jM,A.isElement=qM,A.isEmpty=HM,A.isEqual=WM,A.isEqualWith=VM,A.isError=Zb,A.isFinite=GM,A.isFunction=wa,A.isInteger=dS,A.isLength=wy,A.isMap=pS,A.isMatch=YM,A.isMatchWith=JM,A.isNaN=XM,A.isNative=QM,A.isNil=eU,A.isNull=ZM,A.isNumber=mS,A.isObject=Sr,A.isObjectLike=kr,A.isPlainObject=ld,A.isRegExp=ev,A.isSafeInteger=tU,A.isSet=yS,A.isString=by,A.isSymbol=Ai,A.isTypedArray=ll,A.isUndefined=rU,A.isWeakMap=nU,A.isWeakSet=iU,A.join=aR,A.kebabCase=VU,A.last=lo,A.lastIndexOf=cR,A.lowerCase=GU,A.lowerFirst=YU,A.lt=oU,A.lte=sU,A.max=j7,A.maxBy=q7,A.mean=H7,A.meanBy=W7,A.min=V7,A.minBy=G7,A.stubArray=cv,A.stubFalse=uv,A.stubObject=B7,A.stubString=L7,A.stubTrue=O7,A.multiply=Y7,A.nth=uR,A.noConflict=S7,A.noop=av,A.now=my,A.pad=JU,A.padEnd=XU,A.padStart=QU,A.parseInt=ZU,A.random=zU,A.reduce=hM,A.reduceRight=dM,A.repeat=e7,A.replace=t7,A.result=FU,A.round=J7,A.runInContext=N,A.sample=mM,A.size=wM,A.snakeCase=r7,A.some=bM,A.sortedIndex=yR,A.sortedIndexBy=gR,A.sortedIndexOf=wR,A.sortedLastIndex=bR,A.sortedLastIndexBy=vR,A.sortedLastIndexOf=_R,A.startCase=i7,A.startsWith=o7,A.subtract=X7,A.sum=Q7,A.sumBy=Z7,A.template=s7,A.times=N7,A.toFinite=ba,A.toInteger=_t,A.toLength=wS,A.toLower=a7,A.toNumber=ho,A.toSafeInteger=aU,A.toString=Wt,A.toUpper=c7,A.trim=u7,A.trimEnd=f7,A.trimStart=l7,A.truncate=h7,A.unescape=d7,A.uniqueId=M7,A.upperCase=p7,A.upperFirst=nv,A.each=iS,A.eachRight=oS,A.first=eS,sv(A,function(){var s={};return Is(A,function(c,f){Yt.call(A.prototype,f)||(s[f]=c)}),s}(),{chain:!1}),A.VERSION=e,so(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){A[s].placeholder=A}),so(["drop","take"],function(s,c){Ft.prototype[s]=function(f){f=f===r?1:nn(_t(f),0);var p=this.__filtered__&&!c?new Ft(this):this.clone();return p.__filtered__?p.__takeCount__=Bn(f,p.__takeCount__):p.__views__.push({size:Bn(f,en),type:s+(p.__dir__<0?"Right":"")}),p},Ft.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),so(["filter","map","takeWhile"],function(s,c){var f=c+1,p=f==Bt||f==yr;Ft.prototype[s]=function(v){var P=this.clone();return P.__iteratees__.push({iteratee:it(v,3),type:f}),P.__filtered__=P.__filtered__||p,P}}),so(["head","last"],function(s,c){var f="take"+(c?"Right":"");Ft.prototype[s]=function(){return this[f](1).value()[0]}}),so(["initial","tail"],function(s,c){var f="drop"+(c?"":"Right");Ft.prototype[s]=function(){return this.__filtered__?new Ft(this):this[f](1)}}),Ft.prototype.compact=function(){return this.filter(ci)},Ft.prototype.find=function(s){return this.filter(s).head()},Ft.prototype.findLast=function(s){return this.reverse().find(s)},Ft.prototype.invokeMap=Pt(function(s,c){return typeof s=="function"?new Ft(this):this.map(function(f){return od(f,s,c)})}),Ft.prototype.reject=function(s){return this.filter(gy(it(s)))},Ft.prototype.slice=function(s,c){s=_t(s);var f=this;return f.__filtered__&&(s>0||c<0)?new Ft(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),c!==r&&(c=_t(c),f=c<0?f.dropRight(-c):f.take(c-s)),f)},Ft.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ft.prototype.toArray=function(){return this.take(en)},Is(Ft.prototype,function(s,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),p=/^(?:head|last)$/.test(c),v=A[p?"take"+(c=="last"?"Right":""):c],P=p||/^find/.test(c);!v||(A.prototype[c]=function(){var I=this.__wrapped__,L=p?[1]:arguments,M=I instanceof Ft,se=L[0],ae=M||vt(I),he=function(Ct){var Ot=v.apply(A,lc([Ct],L));return p&&Pe?Ot[0]:Ot};ae&&f&&typeof se=="function"&&se.length!=1&&(M=ae=!1);var Pe=this.__chain__,Ge=!!this.__actions__.length,st=P&&!Pe,xt=M&&!Ge;if(!P&&ae){I=xt?I:new Ft(this);var at=s.apply(I,L);return at.__actions__.push({func:dy,args:[he],thisArg:r}),new co(at,Pe)}return st&&xt?s.apply(this,L):(at=this.thru(he),st?p?at.value()[0]:at.value():at)})}),so(["pop","push","shift","sort","splice","unshift"],function(s){var c=Um[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",p=/^(?:pop|shift)$/.test(s);A.prototype[s]=function(){var v=arguments;if(p&&!this.__chain__){var P=this.value();return c.apply(vt(P)?P:[],v)}return this[f](function(I){return c.apply(vt(I)?I:[],v)})}}),Is(Ft.prototype,function(s,c){var f=A[c];if(f){var p=f.name+"";Yt.call(sl,p)||(sl[p]=[]),sl[p].push({name:c,func:f})}}),sl[sy(r,O).name]=[{name:"wrapper",func:r}],Ft.prototype.clone=dN,Ft.prototype.reverse=pN,Ft.prototype.value=mN,A.prototype.at=qR,A.prototype.chain=HR,A.prototype.commit=WR,A.prototype.next=VR,A.prototype.plant=YR,A.prototype.reverse=JR,A.prototype.toJSON=A.prototype.valueOf=A.prototype.value=XR,A.prototype.first=A.prototype.head,Qh&&(A.prototype[Qh]=GR),A},dc=WO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(hn._=dc,define(function(){return dc})):Du?((Du.exports=dc)._=dc,ob._=dc):hn._=dc}).call(Fh)});var YB=ee(Zn=>{"use strict";var GY=Zn&&Zn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bh=Zn&&Zn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Lh=Zn&&Zn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},j2=Zn&&Zn.__param||function(r,e){return function(t,n){e(t,n,r)}},YY=Zn&&Zn.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(m){return l([h,m])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},GB=Zn&&Zn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zn,"__esModule",{value:!0});var JY=GB(Es()),q2=GB($2()),tc=Hi(),XY=F0(),H2=function(){function r(){this._content=[]}return Object.defineProperty(r.prototype,"length",{get:function(){return this._content.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e},enumerable:!0,configurable:!0}),r.prototype.get=function(e){return this._content[e]},r.prototype.add=function(e){var t=XY.sortedIndexBy(this._content,e,function(n){return n.frequency});this._content.splice(t,0,e)},r.prototype.remove=function(e){this._content.splice(e,1)},r.prototype.popMin=function(){return this._content.shift()},r.prototype.indexOf=function(e){return this._content.findIndex(function(t){return t.value===e})},r.prototype.clear=function(){this._content=[]},r}(),QY=function(r){GY(e,r);function e(t,n,i){var o=r.call(this)||this;return o._k=t,o._errorRate=n,o._accuracy=i,o._sketch=q2.default.create(n,i),o._heap=new H2,o}return e.prototype.add=function(t){this._sketch.update(t);var n=this._sketch.count(t);if(this._heap.length<this._k||n>=this._heap.get(0).frequency){var i=this._heap.indexOf(t);i>-1&&this._heap.remove(i),this._heap.add({value:t,frequency:n}),this._heap.length>this._k&&this._heap.popMin()}},e.prototype.clear=function(){this._sketch=q2.default.create(this._errorRate,this._accuracy),this._heap.clear()},e.prototype.values=function(){for(var t=[],n=this._heap.length-1;n>=0;n--){var i=this._heap.get(n);t.push({value:i.value,frequency:i.frequency,rank:this._heap.length-n})}return t},e.prototype.iterator=function(){var t=this._heap;return function(){var n,i;return YY(this,function(o){switch(o.label){case 0:n=t.length-1,o.label=1;case 1:return n>=0?(i=t.get(n),[4,{value:i.value,frequency:i.frequency,rank:t.length-n}]):[3,4];case 2:o.sent(),o.label=3;case 3:return n--,[3,1];case 4:return[2]}})}()},Bh([tc.Field(),Lh("design:type",Number)],e.prototype,"_k",void 0),Bh([tc.Field(),Lh("design:type",Number)],e.prototype,"_errorRate",void 0),Bh([tc.Field(),Lh("design:type",Number)],e.prototype,"_accuracy",void 0),Bh([tc.Field(),Lh("design:type",q2.default)],e.prototype,"_sketch",void 0),Bh([tc.Field(function(t){return t.content},function(t){var n=new H2;return n.content=t,n}),Lh("design:type",H2)],e.prototype,"_heap",void 0),e=Bh([tc.AutoExportable("TopK",["_seed"]),j2(0,tc.Parameter("_k")),j2(1,tc.Parameter("_errorRate")),j2(2,tc.Parameter("_accuracy")),Lh("design:paramtypes",[Number,Number,Number])],e),e}(JY.default);Zn.default=QY});var W2=ee(kn=>{"use strict";var QB=kn&&kn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),B0=kn&&kn.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},L0=kn&&kn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},JB=kn&&kn.__param||function(r,e){return function(t,n){e(t,n,r)}},ZY=kn&&kn.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},eJ=kn&&kn.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(ZY(arguments[e]));return r},tJ=kn&&kn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kn,"__esModule",{value:!0});var rJ=tJ(Es()),Oh=Hi(),nJ=Lo(),iJ=F0(),oJ=function(r){QB(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Error);function XB(r,e){return(e.a*r+e.b)%e.c}var sJ=function(r){QB(e,r);function e(t,n){var i=r.call(this)||this;return i._nbHashes=t,i._hashFunctions=n,i._signature=nJ.allocateArray(i._nbHashes,1/0),i}return Object.defineProperty(e.prototype,"nbHashes",{get:function(){return this._nbHashes},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this._signature[0]===1/0},e.prototype.add=function(t){for(var n=0;n<this._nbHashes;n++)this._signature[n]=Math.min(this._signature[n],XB(t,this._hashFunctions[n]))},e.prototype.bulkLoad=function(t){for(var n=this,i=function(u){var l=t.map(function(h){return XB(h,n._hashFunctions[u])});o._signature[u]=Math.min.apply(Math,eJ([o._signature[u]],l))},o=this,a=0;a<this._nbHashes;a++)i(a)},e.prototype.compareWith=function(t){if(this.isEmpty()||t.isEmpty())throw new oJ("Cannot compute a Jaccard similairty with a MinHash that contains no values");return iJ.intersection(this._signature,t._signature).length/this._nbHashes},B0([Oh.Field(),L0("design:type",Number)],e.prototype,"_nbHashes",void 0),B0([Oh.Field(),L0("design:type",Array)],e.prototype,"_hashFunctions",void 0),B0([Oh.Field(),L0("design:type",Array)],e.prototype,"_signature",void 0),e=B0([Oh.AutoExportable("MinHash",["_seed"]),JB(0,Oh.Parameter("_nbHashes")),JB(1,Oh.Parameter("_hashFunctions")),L0("design:paramtypes",[Number,Array])],e),e}(rJ.default);kn.MinHash=sJ});var eL=ee(V2=>{"use strict";Object.defineProperty(V2,"__esModule",{value:!0});var aJ=W2(),ZB=F0();function cJ(r){if(r!==2&&r%2===0)return!1;for(var e=2;e<Math.sqrt(r);e++)if(r%e===0)return!1;return!0}function uJ(r){for(var e=0;;){if(cJ(r+e))return r+e;e++}}var fJ=function(){function r(e,t){this._nbHashes=e,this._maxValue=t,this._hashFunctions=[];for(var n=uJ(this._maxValue),i=0;i<this._nbHashes;i++){var o=ZB.random(0,this._maxValue,!1),a=ZB.random(0,this._maxValue,!1);this._hashFunctions.push({a:o,b:a,c:n})}}return r.prototype.create=function(){return new aJ.MinHash(this._nbHashes,this._hashFunctions)},r}();V2.default=fJ});var rL=ee((sde,tL)=>{function lJ(r,e){return r===e||r!==r&&e!==e}tL.exports=lJ});var aL=ee((ade,sL)=>{var nL=1/0,hJ=17976931348623157e292,iL=0/0,dJ="[object Symbol]",pJ=/^\s+|\s+$/g,mJ=/^[-+]0x[0-9a-f]+$/i,yJ=/^0b[01]+$/i,gJ=/^0o[0-7]+$/i,wJ=parseInt;function bJ(r,e,t,n){for(var i=r.length,o=t+(n?1:-1);n?o--:++o<i;)if(e(r[o],o,r))return o;return-1}function vJ(r,e,t){if(e!==e)return bJ(r,_J,t);for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}function _J(r){return r!==r}var xJ=Object.prototype,EJ=xJ.toString,AJ=Math.max;function SJ(r,e,t){var n=r?r.length:0;if(!n)return-1;var i=t==null?0:kJ(t);return i<0&&(i=AJ(n+i,0)),vJ(r,e,i)}function oL(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function PJ(r){return!!r&&typeof r=="object"}function DJ(r){return typeof r=="symbol"||PJ(r)&&EJ.call(r)==dJ}function CJ(r){if(!r)return r===0?r:0;if(r=IJ(r),r===nL||r===-nL){var e=r<0?-1:1;return e*hJ}return r===r?r:0}function kJ(r){var e=CJ(r),t=e%1;return e===e?t?e-t:e:0}function IJ(r){if(typeof r=="number")return r;if(DJ(r))return iL;if(oL(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=oL(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(pJ,"");var t=yJ.test(r);return t||gJ.test(r)?wJ(r.slice(2),t?2:8):mJ.test(r)?iL:+r}sL.exports=SJ});var fL=ee(As=>{"use strict";var TJ=As&&As.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},FJ=As&&As.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},uL=As&&As.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},BJ=As&&As.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(As,"__esModule",{value:!0});var LJ=uL(rL()),G2=uL(aL()),cL=BJ(Lo()),OJ=Hi(),NJ=Hi(),RJ=function(){function r(t){this._elements=cL.allocateArray(t,null),this._size=t,this._length=0}e=r,Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),r.prototype.isFree=function(){return this._length<this._size},r.prototype.nextEmptySlot=function(){return G2.default(this._elements,null)},r.prototype.at=function(t){return this._elements[t]},r.prototype.add=function(t){return t===null||!this.isFree()?!1:(this.set(this.nextEmptySlot(),t),this._length++,!0)},r.prototype.remove=function(t){var n=G2.default(this._elements,t);return n<=-1?!1:(this.unset(n),!0)},r.prototype.has=function(t){return G2.default(this._elements,t)>-1},r.prototype.set=function(t,n){this._elements[t]=n},r.prototype.unset=function(t){this._elements[t]=null,this._length--},r.prototype.swapRandom=function(t,n){n===void 0&&(n=Math.random);var i=cL.randomInt(0,this._length-1,n),o=this._elements[i];return this._elements[i]=t,o},r.prototype.swap=function(t,n){var i=this._elements[t];return this._elements[t]=n,i},r.prototype.equals=function(t){return this._size!==t.size||this._length!==t.length?!1:this._elements.every(function(n,i){return LJ.default(t.at(i),n)})};var e;return r=e=TJ([OJ.Exportable({export:NJ.cloneObject("Bucket","_size","_elements"),import:function(t){if(t.type!=="Bucket"||"_size"in t,!("_elements"in t))throw new Error("Cannot create a Bucket from a JSON export which does not represent a bucket");var n=new e(t._size);return t._elements.forEach(function(i,o){i!==null&&(n._elements[o]=i,n._length++)}),n}}),FJ("design:paramtypes",[Number])],r),r}();As.default=RJ});var pL=ee(Ss=>{"use strict";var MJ=Ss&&Ss.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),UJ=Ss&&Ss.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},KJ=Ss&&Ss.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},dL=Ss&&Ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ss,"__esModule",{value:!0});var $J=dL(Es()),lL=dL(fL()),hL=Hi(),Pm=Lo();function zJ(r,e){var t=Math.ceil(Math.log2(1/e)+Math.log2(2*r));return Math.ceil(t/4)}var jJ=function(r){MJ(e,r);function e(n,i,o,a){a===void 0&&(a=500);var u=r.call(this)||this;return u._filter=Pm.allocateArray(n,function(){return new lL.default(o)}),u._size=n,u._bucketSize=o,u._fingerprintLength=i,u._length=0,u._maxKicks=a,u}t=e,e.create=function(n,i,o,a){o===void 0&&(o=4),a===void 0&&(a=500);var u=zJ(o,i),l=Math.ceil(n/o/.955);return new t(l,u,o,a)},e.from=function(n,i,o,a){o===void 0&&(o=4),a===void 0&&(a=500);var u=Array.from(n),l=t.create(u.length,i,o,a);return u.forEach(function(h){return l.add(h)}),l},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullSize",{get:function(){return this.size*this.bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fingerprintLength",{get:function(){return this._fingerprintLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketSize",{get:function(){return this._bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxKicks",{get:function(){return this._maxKicks},enumerable:!0,configurable:!0}),e.prototype.add=function(n,i,o){i===void 0&&(i=!1),o===void 0&&(o=!1);var a=this._locations(n);if(this._filter[a.firstIndex].isFree())this._filter[a.firstIndex].add(a.fingerprint);else if(this._filter[a.secondIndex].isFree())this._filter[a.secondIndex].add(a.fingerprint);else{for(var u=this.random()<.5?a.firstIndex:a.secondIndex,l=a.fingerprint,h=[],m=0;m<this._maxKicks;m++){var y=Pm.randomInt(0,this._filter[u].length-1,this.random),E=this._filter[u].at(y);h.push([u,y,E]),this._filter[u].set(y,l),l=E;var k=Pm.hashAsInt(l,this.seed,64);if(u=Math.abs(u^Math.abs(k))%this._filter.length,this._filter[u].isFree())return this._filter[u].add(l),this._length++,!0}if(!o)for(var T=h.length-1;T>=0;T--){var O=h[T];this._filter[O[0]].set(O[1],O[2])}if(i)throw new Error('The Cuckoo Filter is full, cannot insert element "'+n+'"');return!1}return this._length++,!0},e.prototype.remove=function(n){var i=this._locations(n);return this._filter[i.firstIndex].has(i.fingerprint)?(this._filter[i.firstIndex].remove(i.fingerprint),this._length--,!0):this._filter[i.secondIndex].has(i.fingerprint)?(this._filter[i.secondIndex].remove(i.fingerprint),this._length--,!0):!1},e.prototype.has=function(n){var i=this._locations(n);return this._filter[i.firstIndex].has(i.fingerprint)||this._filter[i.secondIndex].has(i.fingerprint)},e.prototype.rate=function(){var n=this._computeHashTableLoad(),i=this._fingerprintLength/n.load;return Math.pow(2,Math.log2(2*this._bucketSize)-n.load*i)},e.prototype._computeHashTableLoad=function(){var n=this._filter.length*this._bucketSize,i=this._filter.reduce(function(o,a){return o+a.length},0);return{used:i,free:n-i,size:n,load:i/n}},e.prototype._locations=function(n){var i=Pm.hashIntAndString(n,this.seed,16,64),o=i.int;if(this._fingerprintLength>i.string.length)throw new Error("The fingerprint length ("+this._fingerprintLength+") is higher than the hash length ("+i.string.length+"). Please reduce the fingerprint length or report if it is an unexpected behavior.");var a=i.string.substring(0,this._fingerprintLength),u=Math.abs(o),l=Math.abs(Pm.hashAsInt(a,this.seed,64)),h=Math.abs(u^l),m={fingerprint:a,firstIndex:u%this._size,secondIndex:h%this._size};return m},e.prototype.equals=function(n){for(var i=0,o=!0;o&&i<this._filter.length;){var a=this._filter[i];n._filter[i].equals(a)||(o=!1),i++}return o};var t;return e=t=UJ([hL.Exportable({export:hL.cloneObject("CuckooFilter","_size","_fingerprintLength","_length","_maxKicks","_filter","_seed"),import:function(n){if(n.type!=="CuckooFilter"||!("_size"in n)||!("_fingerprintLength"in n)||!("_length"in n)||!("_maxKicks"in n)||!("_filter"in n)||!("_seed"in n))throw new Error("Cannot create a CuckooFilter from a JSON export which does not represent a cuckoo filter");var i=new t(n._size,n._fingerprintLength,n._bucketSize,n._maxKicks);return i._length=n._length,i._filter=n._filter.map(function(o){var a=new lL.default(o._size);return o._elements.forEach(function(u,l){u!==null&&(a._elements[l]=u,a._length++)}),a}),i.seed=n.seed,i}}),KJ("design:paramtypes",[Number,Number,Number,Number])],e),e}($J.default);Ss.default=jJ});var J2=ee(Ji=>{"use strict";var qJ=Ji&&Ji.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),O0=Ji&&Ji.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},N0=Ji&&Ji.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Y2=Ji&&Ji.__param||function(r,e){return function(t,n){e(t,n,r)}},HJ=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});var Wf=vf(),Dm=Lo(),Vf=Hi(),WJ=HJ(Es()),VJ=Symbol.for("nodejs.util.inspect.custom"),GJ=function(r){qJ(e,r);function e(n,i,o){var a=r.call(this)||this;return a._idSum=n,a._hashSum=i,a._count=o,a}t=e,e.empty=function(){return new t(Wf.Buffer.allocUnsafe(0).fill(0),Wf.Buffer.allocUnsafe(0).fill(0),0)},e.prototype[VJ]=function(){return"Cell:<"+JSON.stringify(this._idSum.toJSON().data)+", "+JSON.stringify(this._hashSum.toJSON().data)+", "+this._count+">"},Object.defineProperty(e.prototype,"idSum",{get:function(){return this._idSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hashSum",{get:function(){return this._hashSum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.add=function(n,i){this._idSum=Dm.xorBuffer(this._idSum,n),this._hashSum=Dm.xorBuffer(this._hashSum,i),this._count++},e.prototype.xorm=function(n){return new t(Dm.xorBuffer(this._idSum,n.idSum),Dm.xorBuffer(this._hashSum,n.hashSum),this._count-n.count)},e.prototype.isEmpty=function(){return this._idSum.equals(Wf.Buffer.from(""))&&this._hashSum.equals(Wf.Buffer.from(""))&&this._count===0},e.prototype.equals=function(n){return this._count===n.count&&this._idSum.equals(n.idSum)&&this._hashSum.equals(n.hashSum)},e.prototype.isPure=function(){if(this.isEmpty()||this._count!==1&&this._count!==-1)return!1;var n=Dm.hashTwiceAsString(JSON.stringify(this._idSum.toJSON()),this.seed);return this._hashSum.equals(Wf.Buffer.from(n.first))};var t;return O0([Vf.Field(function(n){return n.toString()},Wf.Buffer.from),N0("design:type",Object)],e.prototype,"_idSum",void 0),O0([Vf.Field(function(n){return n.toString()},Wf.Buffer.from),N0("design:type",Object)],e.prototype,"_hashSum",void 0),O0([Vf.Field(),N0("design:type",Number)],e.prototype,"_count",void 0),e=t=O0([Vf.AutoExportable("Cell",["_seed"]),Y2(0,Vf.Parameter("_idSum")),Y2(1,Vf.Parameter("_hashSum")),Y2(2,Vf.Parameter("_count")),N0("design:paramtypes",[Object,Object,Number])],e),e}(WJ.default);Ji.default=GJ});var bL=ee(ei=>{"use strict";var YJ=ei&&ei.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),R0=ei&&ei.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(a=r[u])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},M0=ei&&ei.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},mL=ei&&ei.__param||function(r,e){return function(t,n){e(t,n,r)}},yL=ei&&ei.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(m){return l([h,m])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},wL=ei&&ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ei,"__esModule",{value:!0});var Gf=vf(),JJ=wL(Es()),U0=wL(J2()),Nh=Hi(),rc=Lo(),gL=D0(),XJ=function(r){YJ(e,r);function e(n,i){i===void 0&&(i=3);var o=r.call(this)||this;if(Gf.Buffer===void 0)throw new Error('No native Buffer implementation bound in your JavaScript env. If you are in a Web browser, consider importing the polyfill "feross/buffer" (https://github.com/feross/buffer).');if(i<=0)throw new Error("The hashCount must be a non-zero, positive integer");return o._size=n,o._hashCount=i,o._elements=rc.allocateArray(o._size,function(){return U0.default.empty()}),o}t=e,e.create=function(n,i){var o=gL.optimalFilterSize(n,i),a=gL.optimalHashes(o,n);return new t(o,a)},e.from=function(n,i){var o=Array.from(n),a=t.create(o.length,i);return o.forEach(function(u){return a.add(u)}),a},Object.defineProperty(e.prototype,"hashCount",{get:function(){return this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.reduce(function(n,i){return n+i.count},0)/this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),e.prototype.add=function(n){for(var i=rc.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=rc.getDistinctIndices(i.string.first,this._size,this._hashCount,this.seed),a=0;a<this._hashCount;++a)this._elements[o[a]].add(n,Gf.Buffer.from(i.string.first))},e.prototype.remove=function(n){for(var i=rc.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=rc.getDistinctIndices(i.string.first,this.size,this._hashCount,this.seed),a=0;a<this._hashCount;++a)this._elements[o[a]]=this._elements[o[a]].xorm(new U0.default(Gf.Buffer.from(n),Gf.Buffer.from(i.string.first),1));return!0},e.prototype.has=function(n){for(var i=rc.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),o=rc.getDistinctIndices(i.string.first,this.size,this._hashCount,this.seed),a=0;a<this._hashCount;++a){if(this._elements[o[a]].count===0)return!1;if(this._elements[o[a]].count===1)return!!this._elements[o[a]].idSum.equals(n)}return!0},e.prototype.listEntries=function(){var n=this,i=[];return function(){var o,a,u;return yL(this,function(l){switch(l.label){case 0:o=function(h){var m;return yL(this,function(y){switch(y.label){case 0:return m=n._elements[h],m.count>0&&i.findIndex(function(E){return E.equals(m.idSum)})===-1?n.has(m.idSum)?(i.push(m.idSum),[4,m.idSum]):[3,2]:[3,3];case 1:return y.sent(),[3,3];case 2:return[2,{value:!1}];case 3:return[2]}})},a=0,l.label=1;case 1:return a<n._elements.length-1?[5,o(a)]:[3,4];case 2:if(u=l.sent(),typeof u=="object")return[2,u.value];l.label=3;case 3:return a++,[3,1];case 4:return[2,!0]}})}()},e.prototype.substract=function(n){if(this.size!==n.size)throw new Error("The two Invertible Bloom Filters must be of the same size");var i=new t(n._size,n._hashCount);i.seed=this.seed;for(var o=0;o<this.size;++o)i._elements[o]=this._elements[o].xorm(n._elements[o]);return i},e.prototype.equals=function(n){if(n._size!==this._size||n._hashCount!==this._hashCount||n.seed!==this.seed)return!1;for(var i=0;i<n._elements.length;++i)if(!n._elements[i].equals(this._elements[i]))return!1;return!0},e.prototype.decode=function(n,i){n===void 0&&(n=[]),i===void 0&&(i=[]);for(var o=[],a=null,u=0;u<this._elements.length;++u)a=this._elements[u],a.isPure()&&o.push(u);for(;o.length!==0;){a=this._elements[o.pop()];var l=a.idSum,h=a.count;if(a.isPure()){if(h===1)n.push(l);else if(h===-1)i.push(l);else throw new Error("Please report, not possible");for(var m=rc.allInOneHashTwice(JSON.stringify(l.toJSON()),this.seed),y=rc.getDistinctIndices(m.string.first,this._size,this._hashCount,this.seed),u=0;u<y.length;++u)this._elements[y[u]]=this._elements[y[u]].xorm(new U0.default(l,Gf.Buffer.from(m.string.first),h)),this._elements[y[u]].isPure()&&o.push(y[u])}}return this._elements.findIndex(function(E){return!E.isEmpty()})>-1?{success:!1,reason:{cell:a,iblt:this},additional:n,missing:i}:{success:!0,additional:n,missing:i}};var t;return R0([Nh.Field(),M0("design:type",Number)],e.prototype,"_size",void 0),R0([Nh.Field(),M0("design:type",Number)],e.prototype,"_hashCount",void 0),R0([Nh.Field(void 0,function(n){return n.map(function(i){var o=new U0.default(Gf.Buffer.from(i._idSum),Gf.Buffer.from(i._hashSum),i._count);return o.seed=i._seed,o})}),M0("design:type",Array)],e.prototype,"_elements",void 0),e=t=R0([Nh.AutoExportable("InvertibleBloomFilter",["_seed"]),mL(0,Nh.Parameter("_size")),mL(1,Nh.Parameter("_hashCount")),M0("design:paramtypes",[Number,Number])],e),e}(JJ.default);ei.default=XJ});var vL=ee(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});var QJ=KB();Xi.BloomFilter=QJ.default;var ZJ=jB();Xi.CountingBloomFilter=ZJ.default;var eX=qB();Xi.PartitionedBloomFilter=eX.default;var tX=$2();Xi.CountMinSketch=tX.default;var rX=VB();Xi.HyperLogLog=rX.default;var nX=YB();Xi.TopK=nX.default;var iX=W2();Xi.MinHash=iX.MinHash;var oX=eL();Xi.MinHashFactory=oX.default;var sX=pL();Xi.CuckooFilter=sX.default;var aX=bL();Xi.InvertibleBloomFilter=aX.default;var cX=J2();Xi.Cell=cX.default});var tZ={};Me(tZ,{AppScenario:()=>w8,InitialisationError:()=>fg,Scenario:()=>c8,VERSION:()=>Oy,WASM_WNFS_VERSION:()=>Ny,account:()=>b8,app:()=>QQ,apps:()=>v8,authenticatedUsername:()=>BQ,bootstrapFileSystem:()=>Z0,bootstrapRootFileSystem:()=>GX,checkFileSystemVersion:()=>GL,crypto:()=>an,dataRoot:()=>Xu,did:()=>Vn,dns:()=>vc,errors:()=>a8,fs:()=>eZ,initialise:()=>ZQ,initialize:()=>ZQ,ipfs:()=>Xa,isSupported:()=>x8,keystore:()=>Ld,leave:()=>LQ,loadFileSystem:()=>Zf,loadRootFileSystem:()=>VX,lobby:()=>h8,machinery:()=>ts,path:()=>yn,permissionedApp:()=>ZQ,readKey:()=>JL,redirectToLobby:()=>OQ,setup:()=>f8,ucan:()=>Hs});var _8=Ie(hd(),1);var dd=Ie(hd(),1);var BS=typeof self<"u"&&typeof self.location=="object",Sn=r=>{if(!BS)throw new Error(`Must be in browser to use method. Provide a node-compatible implementation for ${r}`)};var oK=r=>(Sn("storage.getItem"),dd.default.getItem(r)),sK=(r,e)=>(Sn("storage.setItem"),dd.default.setItem(r,e)),aK=r=>(Sn("storage.removeItem"),dd.default.removeItem(r)),cK=()=>(Sn("storage.clear"),dd.default.clear()),LS={getItem:oK,setItem:sK,removeItem:aK,clear:cK};var dl=LS;function OS(r){dl={...dl,...r}}var wr=r=>dl.getItem(r),on=(r,e)=>dl.setItem(r,e),pl=r=>dl.removeItem(r);var xy=(r,e,t)=>({major:r,minor:e,patch:t}),ml=r=>{let e=r.split(".").map(t=>parseInt(t));return e.length!==3||e.some(t=>typeof t!="number")?null:{major:e[0],minor:e[1],patch:e[2]}},_a=r=>{let{major:e,minor:t,patch:n}=r;return`${e}.${t}.${n}`},NS=(r,e)=>r.major===e.major&&r.minor===e.minor&&r.patch===e.patch,RS=(r,e)=>r.major!=e.major?r.major<e.major:r.minor!=e.minor?r.minor<e.minor:r.patch<e.patch,fK=(r,e)=>RS(e,r),MS=r=>RS(r,Hn)?"too-low":fK(r,Ru)?"too-high":!0,US=xy(0,0,0),cZ=xy(1,0,0),Hn=xy(2,0,0),Ru=xy(3,0,0),lv=[Hn,Ru];var ke={debug:!1,endpoints:{api:"https://runfission.com",apiVersion:"v2",apiUrl:null,lobby:"https://auth.fission.codes",user:"fission.name"},getApiEndpoint:()=>ke.endpoints.apiUrl?ke.endpoints.apiUrl:`${ke.endpoints.api}/${ke.endpoints.apiVersion}/api`,userMessages:{versionMismatch:{newer:async()=>KS(`Sorry, we can't sync your filesystem with this app. This app only understands older versions of filesystems.

Please try to hard refresh this site or let this app's developer know.

Feel free to contact Fission support: support@fission.codes`),older:async()=>KS(`Sorry, we can't sync your filesystem with this app. Your filesystem version is out-dated and it needs to be migrated.

Run a migration (https://guide.fission.codes/accounts/account-signup/account-migration) or talk to Fission support: support@fission.codes`)}},shouldPin:!1,fsVersion:_a(Hn),wnfsWasmLookup:r=>fetch(`https://unpkg.com/wnfs@${r}/wasm_wnfs_bg.wasm`)};function KS(r){globalThis.alert!=null&&globalThis.alert(r)}var lK="webnative.wnfs_cid_log";function hv(){return lK+"-"+ke.endpoints.lobby}async function dv(){return await wr(hv())||[]}async function $S(r){let e=await dv();return[e.indexOf(r),e.length]}async function Jo(){return(await dv())[0]}async function pd(r){let e=await dv(),t=[r,...e].slice(0,1e3);await on(hv(),t)}async function Ey(){await pl(hv())}var ts={};Me(ts,{UCANS_STORAGE_KEY:()=>xl,USERNAME_STORAGE_KEY:()=>Ns,VERSION:()=>Oy,WASM_WNFS_VERSION:()=>Ny,api:()=>Di,arrContains:()=>S$,arrbufs:()=>gd,assertBrowser:()=>Sn,asyncWaterfall:()=>P$,authenticatedUserDomain:()=>Pd,authenticatedUsername:()=>mn,base64:()=>yo,blob:()=>vl,decodeCID:()=>De,encodeCID:()=>x$,hasProp:()=>Rt,isBlob:()=>Wv,isBool:()=>Ly,isBrowser:()=>BS,isDefined:()=>Fy,isJust:()=>By,isNum:()=>es,isObject:()=>Xe,isString:()=>rr,isValue:()=>Hv,mapObj:()=>Vv,mapObjAsync:()=>A$,notNull:()=>_l,removeKeyFromObj:()=>Sd,updateOrRemoveKeyFromObj:()=>E$});var Di={};Me(Di,{did:()=>yK});var vc={};Me(vc,{lookupDnsLink:()=>Mu,lookupTxtRecord:()=>yd});async function zS(r){return Promise.any([hK(r),dK(r)])}async function hK(r){return jS(`https://dns.google/resolve?name=${r}&type=txt`)}function dK(r){return jS(`https://cloudflare-dns.com/dns-query?name=${r}&type=txt`)}function jS(r){return fetch(r,{headers:{accept:"application/dns-json"}}).then(e=>e.json()).then(e=>{if(e.Answer){let t=e.Answer.map(n=>(n.data||"").replace(/^"+|"+$/g,""));return t[0][3]===";"?t.sort((n,i)=>n.slice(0,4).localeCompare(i.slice(0,4))).map(n=>n.slice(4)).join(""):t.join("")}else return null})}async function pK(r){let e=await zS(r.startsWith("_dnslink.")?r:`_dnslink.${r}`);return e&&!e.includes("/ipns/")?e.replace(/^dnslink=/,"").replace(/^\/ipfs\//,""):null}var qS={dns:{lookupDnsLink:pK,lookupTxtRecord:zS}};var md=qS.dns;function HS(r){md={...md,...r}}var yd=async r=>md.lookupTxtRecord(r),Mu=async r=>md.lookupDnsLink(r);var Uu={did:null,host:null,lastFetched:0};async function yK(){let r;try{r=new URL(ke.getApiEndpoint()).host}catch{throw new Error("Unable to parse API Endpoint")}let e=Date.now();if((Uu.host!==r||Uu.lastFetched+1e3*60*60*3<=e)&&(Uu.did=await yd("_did."+r),Uu.host=r,Uu.lastFetched=e),!Uu.did)throw new Error("Couldn't get the Fission API DID");return Uu.did}var gd={};Me(gd,{equal:()=>gK});var gK=(r,e)=>{let t=new Uint8Array(r),n=new Uint8Array(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0};var yo={};Me(yo,{decode:()=>_P,encode:()=>xP,makeUrlSafe:()=>EP,makeUrlUnsafe:()=>AP,urlDecode:()=>_$,urlEncode:()=>jv});function pv(r,e){for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}Ku();wd();mo();Dn();function _P(r){return Ze(wt(r,"base64pad"))}function xP(r){return Ze(wt(r),"base64pad")}function _$(r){return _P(AP(r))}function jv(r){return EP(xP(r))}function EP(r){return r.replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}function AP(r){return r.replace(/_/g,"/").replace(/-/g,"+")}var vl={};Me(vl,{toUint8Array:()=>qv});var qv=async r=>new Promise((e,t)=>{let n=()=>t(new Error("Failed to read file")),i=new FileReader;i.addEventListener("load",o=>{let a=o?.target?.result||null;if(a==null){n();return}if(typeof a=="string"){e(wt(a));return}e(new Uint8Array(a))}),i.addEventListener("error",()=>i.abort()),i.addEventListener("abort",n),i.readAsArrayBuffer(r)});cr();function De(r){let e=we.asCID(r);if(e)return e;if(typeof r=="string")return we.parse(r);if(typeof r=="object"&&"version"in r&&"code"in r&&"multihash"in r)return we.create(r.version,r.code,r.multihash);throw new Error(`Could not decode CID: ${r}`)}function x$(r){return r.toString()}function Rt(r,e){return typeof r=="object"&&r!=null&&e in r}var Fy=r=>r!==void 0,_l=r=>r!==null,By=_l,Hv=r=>Fy(r)&&_l(r),Ly=r=>typeof r=="boolean",es=r=>typeof r=="number",rr=r=>typeof r=="string",Xe=r=>r!==null&&typeof r=="object",Wv=r=>typeof Blob>"u"?!1:r instanceof Blob||Xe(r)&&r?.constructor?.name==="Blob";var Sd=(r,e)=>{let{[e]:t,...n}=r;return n},E$=(r,e,t)=>t===null?Sd(r,e):{...r,[e]:t},Vv=(r,e)=>{let t={};return Object.entries(r).forEach(([n,i])=>{t[n]=e(i,n)}),t},A$=async(r,e)=>{let t={};return await Promise.all(Object.entries(r).map(async([n,i])=>{t[n]=await e(i,n)})),t},S$=(r,e)=>r.indexOf(e)>-1,P$=async(r,e)=>{let t=r;for(let n=0;n<e.length;n++)t=await e[n](t);return t};var Oy="0.34.2",Ny="0.1.7";var xl="webnative.auth_ucans",Ns="webnative.auth_username";async function mn(){return wr(Ns).then(r=>r||null)}async function Pd({withFiles:r}={}){let e=await mn();return e?e+"."+(r?"files.":"")+ke.endpoints.user:null}var Xu={};Me(Xu,{lookup:()=>Ws,lookupOnFisson:()=>E6,update:()=>T_});function Vr(...r){ke.debug&&console.log(...r)}function SP(...r){ke.debug&&console.warn(...r)}var Vn={};Me(Vn,{KeyType:()=>Od,didToPublicKey:()=>Yu,exchange:()=>ka,ownRoot:()=>E_,publicKeyToDid:()=>Dl,root:()=>Ti,ucan:()=>jt,verifySignedData:()=>x_,write:()=>jt});var Gv={};function Aa(){return Gv}function PP(r){Gv=r}async function DP(){Gv={},await pl(xl)}var an={};Me(an,{aes:()=>sn,ed25519:()=>y_,hash:()=>bo,keystore:()=>Yr,rsa:()=>Gu,sha256Str:()=>Zy});var D$=globalThis||window||self,yt=D$.crypto;var Id={};Me(Id,{arrBufToBase64:()=>Ry,arrBufToStr:()=>OP,base64ToArrBuf:()=>Sc,default:()=>je,joinBufs:()=>Uy,normalizeBase64ToBuf:()=>Pc,normalizeToBuf:()=>kd,normalizeUnicodeToBuf:()=>rs,normalizeUtf16ToBuf:()=>t_,normalizeUtf8ToBuf:()=>e_,publicExponent:()=>NP,randomBuf:()=>RP,strToArrBuf:()=>My,structuralClone:()=>MP});var Yv={};Me(Yv,{CharSize:()=>Rs,CryptoSystem:()=>Wn,EccCurve:()=>Dd,HashAlg:()=>qu,KeyUse:()=>Nt,RsaSize:()=>Cd,SymmAlg:()=>Tr,SymmKeyLength:()=>Sa});var Wn;(function(r){r.ECC="ecc",r.RSA="rsa"})(Wn||(Wn={}));var Dd;(function(r){r.P_256="P-256",r.P_384="P-384",r.P_521="P-521"})(Dd||(Dd={}));var Cd;(function(r){r[r.B1024=1024]="B1024",r[r.B2048=2048]="B2048",r[r.B4096=4096]="B4096"})(Cd||(Cd={}));var Tr;(function(r){r.AES_CTR="AES-CTR",r.AES_CBC="AES-CBC",r.AES_GCM="AES-GCM"})(Tr||(Tr={}));var Sa;(function(r){r[r.B128=128]="B128",r[r.B192=192]="B192",r[r.B256=256]="B256"})(Sa||(Sa={}));var qu;(function(r){r.SHA_1="SHA-1",r.SHA_256="SHA-256",r.SHA_384="SHA-384",r.SHA_512="SHA-512"})(qu||(qu={}));var Rs;(function(r){r[r.B8=8]="B8",r[r.B16=16]="B16"})(Rs||(Rs={}));var Nt;(function(r){r.Exchange="exchange",r.Write="write"})(Nt||(Nt={}));var Jv=new Error("Key does not exist. Make sure you properly instantiated the keystore."),kP=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),IP=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),Xv=new Error("ECC is not enabled for this browser. Please use RSA instead."),TP=new Error("Cryptosystem not supported. Please use ECC or RSA"),FP=new Error("Invalid key use. Please use 'exchange' or 'write"),C$=new Error("Max must be less than 256 and greater than 0");function Al(r){if(!r||r===null)throw Jv;if(r.privateKey===void 0)throw kP;return r}function Qv(r){if(!r||r===null)throw Jv;if(r.privateKey!==void 0||r.algorithm===void 0)throw IP;return r}function Zv(r){BP(r,[Wn.ECC,Wn.RSA],TP)}function Hu(r){BP(r,[Nt.Exchange,Nt.Write],FP)}function BP(r,e,t){if(!e.some(i=>i===r))throw t}var LP={KeyDoesNotExist:Jv,NotKeyPair:kP,NotKey:IP,ECCNotEnabled:Xv,UnsupportedCrypto:TP,InvalidKeyUse:FP,checkIsKeyPair:Al,checkIsKey:Qv,checkValidCryptoSystem:Zv,checkValidKeyUse:Hu,InvalidMaxValue:C$};function OP(r,e){let t=e===8?new Uint8Array(r):new Uint16Array(r);return Array.from(t).map(n=>String.fromCharCode(n)).join("")}function Ry(r){return Ze(new Uint8Array(r),"base64pad")}function My(r,e){let t=e===8?new Uint8Array(r.length):new Uint16Array(r.length);for(let n=0,i=r.length;n<i;n++)t[n]=r.charCodeAt(n);return t.buffer}function Sc(r){return wt(r,"base64pad").buffer}function NP(){return new Uint8Array([1,0,1])}function RP(r,{max:e}={max:255}){if(e<1||e>255)throw LP.InvalidMaxValue;let t=new Uint8Array(r);if(e==255)return yt.getRandomValues(t),t.buffer;let n=0,i=e+1,o=Math.floor(256/i)*i,a=new Uint8Array(1);for(;n<t.length;)yt.getRandomValues(a),a[0]<o&&(t[n]=a[0]%i,n++);return t.buffer}function Uy(r,e){let t=new Uint8Array(r),n=new Uint8Array(e),i=new Uint8Array(t.length+n.length);return i.set(t),i.set(n,t.length),i.buffer}var e_=r=>kd(r,e=>My(e,Rs.B8)),t_=r=>kd(r,e=>My(e,Rs.B16)),Pc=r=>kd(r,Sc),rs=(r,e)=>{switch(e){case 8:return e_(r);default:return t_(r)}},kd=(r,e)=>{if(typeof r=="string")return e(r);if(typeof r=="object"&&r.byteLength!==void 0)return new Uint8Array(r).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")};async function MP(r){return new Promise(e=>{let{port1:t,port2:n}=new MessageChannel;n.onmessage=i=>e(i.data),t.postMessage(r)})}var je={arrBufToStr:OP,arrBufToBase64:Ry,strToArrBuf:My,base64ToArrBuf:Sc,publicExponent:NP,randomBuf:RP,joinBufs:Uy,normalizeUtf8ToBuf:e_,normalizeUtf16ToBuf:t_,normalizeBase64ToBuf:Pc,normalizeToBuf:kd,structuralClone:MP};var r_={};Me(r_,{DEFAULT_CHAR_SIZE:()=>wo,DEFAULT_CRYPTOSYSTEM:()=>Ky,DEFAULT_CTR_LEN:()=>Fd,DEFAULT_ECC_CURVE:()=>Pa,DEFAULT_EXCHANGE_KEY_NAME:()=>jy,DEFAULT_HASH_ALG:()=>Ms,DEFAULT_RSA_SIZE:()=>$y,DEFAULT_STORE_NAME:()=>zy,DEFAULT_SYMM_ALG:()=>go,DEFAULT_SYMM_LEN:()=>Ic,DEFAULT_WRITE_KEY_NAME:()=>qy,ECC_EXCHANGE_ALG:()=>Wu,ECC_WRITE_ALG:()=>Dc,RSA_EXCHANGE_ALG:()=>Cc,RSA_WRITE_ALG:()=>kc,SALT_LENGTH:()=>Td,default:()=>k$});var Wu="ECDH",Dc="ECDSA",Cc="RSA-OAEP",kc="RSASSA-PKCS1-v1_5",Td=128,Ky="ecc",Pa=Dd.P_256,$y=Cd.B2048,go=Tr.AES_CTR,Ic=Sa.B256,Fd=64,Ms=qu.SHA_256,wo=Rs.B16,zy="keystore",jy="exchange-key",qy="write-key",k$={ECC_EXCHANGE_ALG:Wu,ECC_WRITE_ALG:Dc,RSA_EXCHANGE_ALG:Cc,RSA_WRITE_ALG:kc,SALT_LENGTH:Td,DEFAULT_CRYPTOSYSTEM:Ky,DEFAULT_ECC_CURVE:Pa,DEFAULT_RSA_SIZE:$y,DEFAULT_SYMM_ALG:go,DEFAULT_CTR_LEN:Fd,DEFAULT_HASH_ALG:Ms,DEFAULT_CHAR_SIZE:wo,DEFAULT_STORE_NAME:zy,DEFAULT_EXCHANGE_KEY_NAME:jy,DEFAULT_WRITE_KEY_NAME:qy};async function n_(r){return yt.subtle.generateKey({name:r?.alg||go,length:r?.length||Ic},!0,["encrypt","decrypt"])}async function Hy(r,e){let t=je.base64ToArrBuf(r);return yt.subtle.importKey("raw",t,{name:e?.alg||go,length:e?.length||Ic},!0,["encrypt","decrypt"])}var Bd={makeKey:n_,importKey:Hy};async function Wy(r,e,t){let n=je.normalizeUtf16ToBuf(r),i=typeof e=="string"?await Bd.importKey(e,t):e,o=t?.alg||go,a=t?.iv||je.randomBuf(16),u=await yt.subtle.encrypt({name:o,iv:o===Tr.AES_CTR?void 0:a,counter:o===Tr.AES_CTR?new Uint8Array(a):void 0,length:o===Tr.AES_CTR?Fd:void 0},i,n);return je.joinBufs(a,u)}async function Vy(r,e,t){let n=je.normalizeBase64ToBuf(r),i=typeof e=="string"?await Bd.importKey(e,t):e,o=t?.alg||go,a=n.slice(0,16),u=n.slice(16);return await yt.subtle.decrypt({name:o,iv:o===Tr.AES_CTR?void 0:a,counter:o===Tr.AES_CTR?new Uint8Array(a):void 0,length:o===Tr.AES_CTR?Fd:void 0},i,u)}async function I$(r,e,t){let n=await Wy(r,e,t);return je.arrBufToBase64(n)}async function T$(r,e,t){let n=await Vy(r,e,t);return je.arrBufToStr(n,16)}async function i_(r){let e=await yt.subtle.exportKey("raw",r);return je.arrBufToBase64(e)}var UP={encryptBytes:Wy,decryptBytes:Vy,encrypt:I$,decrypt:T$,exportKey:i_};var ui={...Bd,...UP};var p6=Ie(KP(),1);var h_={};Me(h_,{RSAKeyStore:()=>Sl,decrypt:()=>WP,default:()=>Ks,encrypt:()=>HP,getPublicKey:()=>VP,importPublicKey:()=>zP,makeKeypair:()=>$P,sign:()=>jP,verify:()=>qP});async function $P(r,e,t){Hu(t);let n=t===Nt.Exchange?Cc:kc,i=t===Nt.Exchange?["encrypt","decrypt"]:["sign","verify"];return yt.subtle.generateKey({name:n,modulusLength:r,publicExponent:je.publicExponent(),hash:{name:e}},!1,i)}function F$(r){return r.replace(`-----BEGIN PUBLIC KEY-----
`,"").replace(`
-----END PUBLIC KEY-----`,"")}async function zP(r,e,t){Hu(t);let n=t===Nt.Exchange?Cc:kc,i=t===Nt.Exchange?["encrypt"]:["verify"],o=je.base64ToArrBuf(F$(r));return yt.subtle.importKey("spki",o,{name:n,hash:{name:e}},!0,i)}var Tc={makeKeypair:$P,importPublicKey:zP};async function jP(r,e,t=wo){return yt.subtle.sign({name:kc,saltLength:Td},e,rs(r,t))}async function qP(r,e,t,n=wo,i=Ms){return yt.subtle.verify({name:kc,saltLength:Td},typeof t=="string"?await Tc.importPublicKey(t,i,Nt.Write):t,Pc(e),rs(r,n))}async function HP(r,e,t=wo,n=Ms){return yt.subtle.encrypt({name:Cc},typeof e=="string"?await Tc.importPublicKey(e,n,Nt.Exchange):e,rs(r,t))}async function WP(r,e){let t=Pc(r);return yt.subtle.decrypt({name:Cc},e,t)}async function VP(r){let e=await yt.subtle.exportKey("spki",r.publicKey);return je.arrBufToBase64(e)}var Da={sign:jP,verify:qP,encrypt:HP,decrypt:WP,getPublicKey:VP};var f_={};Me(f_,{clear:()=>ZP,createIfDoesNotExist:()=>YP,createStore:()=>GP,default:()=>Gr,dropStore:()=>u_,exists:()=>c_,get:()=>a_,getKey:()=>XP,getKeypair:()=>JP,put:()=>s_,rm:()=>QP});var Us=Ie(hd(),1);function GP(r){return Us.default.createInstance({name:r})}async function YP(r,e,t=Us.default){if(await c_(r,t))return;let n=await e();await s_(r,n,t)}async function s_(r,e,t=Us.default){return t.setItem(r,e)}async function JP(r,e=Us.default){return a_(r,Al,e)}async function XP(r,e=Us.default){return a_(r,Qv,e)}async function a_(r,e,t=Us.default){let n=await t.getItem(r);return n===null?null:e(n)}async function c_(r,e=Us.default){return await e.getItem(r)!==null}async function QP(r,e=Us.default){return e.removeItem(r)}async function u_(r){return r.dropInstance()}async function ZP(r){return r?u_(r):Us.default.clear()}var Gr={createStore:GP,createIfDoesNotExist:YP,put:s_,getKeypair:JP,getKey:XP,exists:c_,rm:QP,dropStore:u_,clear:ZP};var l_={};Me(l_,{default:()=>nr,defaultConfig:()=>Yy,eccEnabled:()=>n6,merge:()=>i6,normalize:()=>r6,symmKeyOpts:()=>o6});async function e6(r,e){Hu(e);let t=e===Nt.Exchange?Wu:Dc,n=e===Nt.Exchange?["deriveKey","deriveBits"]:["sign","verify"];return yt.subtle.generateKey({name:t,namedCurve:r},!1,n)}async function t6(r,e,t){Hu(t);let n=t===Nt.Exchange?Wu:Dc,i=t===Nt.Exchange?[]:["verify"],o=je.base64ToArrBuf(r);return yt.subtle.importKey("raw",o,{name:n,namedCurve:e},!0,i)}var ns={makeKeypair:e6,importPublicKey:t6};var Yy={type:Ky,curve:Pa,rsaSize:$y,symmAlg:go,symmLen:Ic,hashAlg:Ms,charSize:wo,storeName:zy,exchangeKeyName:jy,writeKeyName:qy};function r6(r,e=!0){let t;return r?t={...Yy,...r}:t=Yy,r?.type||(t.type=e?Wn.ECC:Wn.RSA),t}async function n6(){let r=await ns.makeKeypair(Pa,Nt.Exchange);try{await je.structuralClone(r)}catch{return!1}return!0}function i6(r,e={}){return{...r,...e}}function o6(r){return{alg:r.symmAlg,length:r.symmLen}}var nr={defaultConfig:Yy,normalize:r6,eccEnabled:n6,merge:i6,symmKeyOpts:o6};var Vu=class{constructor(e,t){this.cfg=e,this.store=t}async writeKey(){let e=await Gr.getKeypair(this.cfg.writeKeyName,this.store);return Al(e)}async exchangeKey(){let e=await Gr.getKeypair(this.cfg.exchangeKeyName,this.store);return Al(e)}async getSymmKey(e,t){let n=nr.merge(this.cfg,t),i=await Gr.getKey(e,this.store);if(i!==null)return i;let o=await ui.makeKey(nr.symmKeyOpts(n));return await Gr.put(e,o,this.store),o}async keyExists(e){return await Gr.getKey(e,this.store)!==null}async deleteKey(e){return Gr.rm(e,this.store)}async destroy(){return Gr.dropStore(this.store)}async importSymmKey(e,t,n){let i=nr.merge(this.cfg,n),o=await ui.importKey(e,nr.symmKeyOpts(i));await Gr.put(t,o,this.store)}async exportSymmKey(e,t){let n=await this.getSymmKey(e,t);return ui.exportKey(n)}async encryptWithSymmKey(e,t,n){let i=nr.merge(this.cfg,n),o=await this.getSymmKey(t,n),a=await ui.encryptBytes(je.strToArrBuf(e,i.charSize),o,nr.symmKeyOpts(i));return je.arrBufToBase64(a)}async decryptWithSymmKey(e,t,n){let i=nr.merge(this.cfg,n),o=await this.getSymmKey(t,n),a=await ui.decryptBytes(je.base64ToArrBuf(e),o,nr.symmKeyOpts(i));return je.arrBufToStr(a,i.charSize)}};var Sl=class extends Vu{static async init(e){let t=nr.normalize({...e||{},type:Wn.RSA}),{rsaSize:n,hashAlg:i,storeName:o,exchangeKeyName:a,writeKeyName:u}=t,l=Gr.createStore(o);return await Gr.createIfDoesNotExist(a,()=>Tc.makeKeypair(n,i,Nt.Exchange),l),await Gr.createIfDoesNotExist(u,()=>Tc.makeKeypair(n,i,Nt.Write),l),new Sl(t,l)}async sign(e,t){let n=nr.merge(this.cfg,t),i=await this.writeKey();return je.arrBufToBase64(await Da.sign(e,i.privateKey,n.charSize))}async verify(e,t,n,i){let o=nr.merge(this.cfg,i);return Da.verify(e,t,n,o.charSize,o.hashAlg)}async encrypt(e,t,n){let i=nr.merge(this.cfg,n);return je.arrBufToBase64(await Da.encrypt(e,t,i.charSize,i.hashAlg))}async decrypt(e,t,n){let i=await this.exchangeKey(),o=nr.merge(this.cfg,n);return je.arrBufToStr(await Da.decrypt(e,i.privateKey),o.charSize)}async publicExchangeKey(){let e=await this.exchangeKey();return Da.getPublicKey(e)}async publicWriteKey(){let e=await this.writeKey();return Da.getPublicKey(e)}},Jy=Sl;var Ks={...Tc,...Da,...Jy};var Ld={};Me(Ld,{clear:()=>m_,create:()=>L$,get:()=>Ii,set:()=>O$});async function s6(r,e,t=wo,n=Ms){return yt.subtle.sign({name:Dc,hash:{name:n}},e,rs(r,t))}async function a6(r,e,t,n=wo,i=Pa,o=Ms){return yt.subtle.verify({name:Dc,hash:{name:o}},typeof t=="string"?await ns.importPublicKey(t,i,Nt.Write):t,Pc(e),rs(r,n))}async function c6(r,e,t,n=wo,i=Pa,o){let a=typeof t=="string"?await ns.importPublicKey(t,i,Nt.Exchange):t,u=await Xy(e,a,o);return ui.encryptBytes(rs(r,n),u,o)}async function u6(r,e,t,n=Pa,i){let o=typeof t=="string"?await ns.importPublicKey(t,n,Nt.Exchange):t,a=await Xy(e,o,i);return ui.decryptBytes(Pc(r),a,i)}async function f6(r){let e=await yt.subtle.exportKey("raw",r.publicKey);return je.arrBufToBase64(e)}async function Xy(r,e,t){return yt.subtle.deriveKey({name:Wu,public:e},r,{name:t?.alg||go,length:t?.length||Ic},!1,["encrypt","decrypt"])}var Ca={sign:s6,verify:a6,encrypt:c6,decrypt:u6,getPublicKey:f6,getSharedKey:Xy};var Pl=class extends Vu{static async init(e){let t=nr.normalize({...e||{},type:Wn.ECC}),{curve:n,storeName:i,exchangeKeyName:o,writeKeyName:a}=t,u=Gr.createStore(i);return await Gr.createIfDoesNotExist(o,()=>ns.makeKeypair(n,Nt.Exchange),u),await Gr.createIfDoesNotExist(a,()=>ns.makeKeypair(n,Nt.Write),u),new Pl(t,u)}async sign(e,t){let n=nr.merge(this.cfg,t),i=await this.writeKey();return je.arrBufToBase64(await Ca.sign(e,i.privateKey,n.charSize,n.hashAlg))}async verify(e,t,n,i){let o=nr.merge(this.cfg,i);return Ca.verify(e,t,n,o.charSize,o.curve,o.hashAlg)}async encrypt(e,t,n){let i=nr.merge(this.cfg,n),o=await this.exchangeKey();return je.arrBufToBase64(await Ca.encrypt(e,o.privateKey,t,i.charSize,i.curve))}async decrypt(e,t,n){let i=nr.merge(this.cfg,n),o=await this.exchangeKey();return je.arrBufToStr(await Ca.decrypt(e,o.privateKey,t,i.curve),i.charSize)}async publicExchangeKey(){let e=await this.exchangeKey();return Ca.getPublicKey(e)}async publicWriteKey(){let e=await this.writeKey();return Ca.getPublicKey(e)}},Qy=Pl;async function l6(r){let e=await nr.eccEnabled();if(!e&&r?.type==="ecc")throw Xv;let t=nr.normalize(r,e);return Zv(t.type),t.type==="ecc"?Qy.init(t):Jy.init(t)}async function h6(){return Gr.clear()}var d_={};Me(d_,{ECCKeyStore:()=>Pl,decrypt:()=>u6,default:()=>B$,encrypt:()=>c6,getPublicKey:()=>f6,getSharedKey:()=>Xy,importPublicKey:()=>t6,makeKeypair:()=>e6,sign:()=>s6,verify:()=>a6});var B$={...ns,...Ca,...Qy};var p_={init:l6,clear:h6,...Yv,...r_,...l_,...Id,ecc:d_,rsa:h_,idb:f_};var d6={type:Wn.RSA},Fc=null,m_=async()=>{Fc=await Ii(),await Fc.destroy(),Fc=null},L$=async()=>await p_.init(d6),O$=async r=>{Fc=r},Ii=async()=>Fc||(Fc=await p_.init(d6),Fc);var N$=(r,e,t)=>{Sn("rsa.verify");let n=je.arrBufToBase64(t.buffer);return Ks.verify(r,e,n)},R$=async(r,e,t)=>p6.default.sign.detached.verify(r,e,t),M$=async()=>(Sn("keystore.publicExchangeKey"),(await Ii()).publicExchangeKey()),U$=async()=>(Sn("keystore.publicWriteKey"),(await Ii()).publicWriteKey()),K$=async r=>(Sn("keystore.decrypt"),(await Ii()).decrypt(r)),$$=async(r,e)=>(Sn("keystore.sign"),(await Ii()).sign(r,{charSize:e})),z$=async(r,e)=>(Sn("keystore.importSymmKey"),(await Ii()).importSymmKey(r,e)),j$=async r=>(Sn("keystore.exportSymmKey"),(await Ii()).exportSymmKey(r)),q$=async r=>(Sn("keystore.keyExists"),(await Ii()).keyExists(r)),H$=async()=>(Sn("keystore.getAlg"),(await Ii()).cfg.type),W$=async()=>(Sn("keystore.clear"),m_()),m6={rsa:{verify:N$},ed25519:{verify:R$},keystore:{publicExchangeKey:M$,publicWriteKey:U$,decrypt:K$,sign:$$,importSymmKey:z$,exportSymmKey:j$,keyExists:q$,getAlg:H$,clear:W$}};var fi=m6;function y6(r){fi={...fi,...r}}var Zy=async r=>{let e=await yt.subtle.digest("sha-256",wt(r));return Ze(new Uint8Array(e),"hex")},bo={sha256:async r=>new Uint8Array(await yt.subtle.digest("sha-256",r)),sha256Str:Zy},sn={encrypt:async(r,e,t)=>{let n=await Hy(e,{length:Sa.B256,alg:t}),i=await Wy(r,n,{alg:t});return new Uint8Array(i)},decrypt:async(r,e,t)=>{let n=await Hy(e,{length:Sa.B256,alg:t}),i=await Vy(r,n,{alg:t});return new Uint8Array(i)},genKeyStr:async r=>{let e=await n_({length:Sa.B256,alg:r});return i_(e)},decryptGCM:async(r,e,t)=>{let n=wt(t,"base64pad"),i=await yt.subtle.importKey("raw",wt(e,"base64pad"),"AES-GCM",!1,["encrypt","decrypt"]),o=await yt.subtle.decrypt({name:"AES-GCM",iv:n},i,wt(r,"base64pad"));return Ze(new Uint8Array(o))}},Gu={decrypt:(r,e)=>yt.subtle.decrypt({name:"RSA-OAEP"},e,r),encrypt:async(r,e)=>yt.subtle.encrypt({name:"RSA-OAEP"},await yt.subtle.importKey("spki",wt(e,"base64pad").buffer,{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"]),r),genKey:()=>yt.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["encrypt","decrypt"]),verify:(r,e,t)=>fi.rsa.verify(r,e,t)},y_={verify:(r,e,t)=>fi.ed25519.verify(r,e,t)},Yr={publicExchangeKey:()=>fi.keystore.publicExchangeKey(),publicWriteKey:()=>fi.keystore.publicWriteKey(),decrypt:r=>fi.keystore.decrypt(r),sign:(r,e)=>fi.keystore.sign(r,e),importSymmKey:(r,e)=>fi.keystore.importSymmKey(r,e),exportSymmKey:r=>fi.keystore.exportSymmKey(r),keyExists:r=>fi.keystore.keyExists(r),getAlg:()=>fi.keystore.getAlg(),clear:()=>fi.keystore.clear()};var Od=(n=>(n.RSA="rsa",n.Edwards="ed25519",n.BLS="bls12-381",n))(Od||{});var w_=new Uint8Array([237,1]),b_=new Uint8Array([234,1]),v_=new Uint8Array([0,245,2]),eg="did:key:z";function g6(r){switch(r){case"ed25519":return w_;case"rsa":return v_;case"bls12-381":return b_;default:return null}}var w6=r=>{if(g_(r,v_))return{keyBuffer:r.slice(v_.byteLength),type:"rsa"};if(g_(r,w_))return{keyBuffer:r.slice(w_.byteLength),type:"ed25519"};if(g_(r,b_))return{keyBuffer:r.slice(b_.byteLength),type:"bls12-381"};throw new Error("Unsupported key algorithm. Try using RSA.")},g_=(r,e)=>gd.equal(e,r.slice(0,e.byteLength)),__=r=>{switch(r){case"rsa":return"rsa";case"ed25519":return"ed25519";case"bls12-381":return"bls12-381"}throw new Error(`Key Type ${r} not supported`)};function Dl(r,e){let t=Sc(r),n=g6(e);if(n===null)throw new Error(`Key type '${e}' not supported`);let i=Uy(n,t);return eg+Ze(new Uint8Array(i),"base58btc")}function Yu(r){if(!r.startsWith(eg))throw new Error("Please use a base58-encoded DID formatted `did:key:z...`");let e=r.substr(eg.length),t=wt(e,"base58btc"),{keyBuffer:n,type:i}=w6(t);return{publicKey:Ry(n),type:i}}async function ka(){let r=await Yr.publicExchangeKey(),e=await Yr.getAlg();return Dl(r,__(e))}async function jt(){let r=await Yr.publicWriteKey(),e=await Yr.getAlg();return Dl(r,__(e))}async function x_({charSize:r=16,data:e,did:t,signature:n}){try{let{type:i,publicKey:o}=Yu(t),a=new Uint8Array(Sc(n)),u=new Uint8Array(rs(e,r)),l=new Uint8Array(Sc(o));switch(i){case"ed25519":return await y_.verify(u,a,l);case"rsa":return await Gu.verify(u,a,l);default:return!1}}catch{return!1}}async function Fr({addSignature:r=!0,audience:e,facts:t=[],issuer:n,lifetimeInSeconds:i=30,expiration:o,potency:a="APPEND",proof:u,resource:l}){let h=Math.floor(Date.now()/1e3),m=u&&ur(u),y=await Yr.getAlg(),E={alg:Y$(y)||"UnknownAlgorithm",typ:"JWT",uav:"1.0.0"},k=o||h+i,T=h-60;if(m){let ne=m.payload;k=Math.min(ne.exp,k),T=Math.max(ne.nbf,T)}let O={aud:e,exp:k,fct:t,iss:n||await jt(),nbf:T,prf:u||null,ptc:a,rsc:l||(m?m.payload.rsc:"*")},ce=r?await b6(E,O):null;return{header:E,payload:O,signature:ce}}function ur(r){let e=r.split("."),t=JSON.parse(yo.urlDecode(e[0])),n=JSON.parse(yo.urlDecode(e[1]));return{header:t,payload:n,signature:e[2]||null}}function Br(r){let e=tg(r.header),t=rg(r.payload);return e+"."+t+"."+r.signature}function tg(r){return yo.urlEncode(JSON.stringify(r))}function rg(r){return yo.urlEncode(JSON.stringify({...r}))}function is(r){return r.payload.exp<=Math.floor(Date.now()/1e3)}async function $s(r){let e=tg(r.header),t=rg(r.payload),n=await x_({charSize:8,data:`${e}.${t}`,did:r.payload.iss,signature:yo.makeUrlUnsafe(r.signature||"")});if(!n)return n;if(!r.payload.prf)return!0;let i=ur(r.payload.prf),o=i.payload.aud===r.payload.iss;return o&&await $s(i)}function zs(r,e=0){let t=J$(r,e);return t.prf?zs(t.prf,e+1):t.iss}async function b6(r,e){let t=tg(r),n=rg(e);return yo.makeUrlSafe(await Yr.sign(`${t}.${n}`,8))}function Y$(r){switch(r){case"ed25519":return"EdDSA";case"rsa":return"RS256";default:return null}}function J$(r,e){try{return JSON.parse(yo.urlDecode(r.split(".")[1]))}catch{throw new Error(`Invalid UCAN (${e} level${e===1?"":"s"} deep): \`${r}\``)}}async function Ti(r){let e=ke.endpoints.user;try{let t=await yd(`_did.${r}.${e}`);if(t!==null)return t}catch{}throw new Error("Could not locate user DID in DNS.")}async function E_(){let r=Aa(),e=Object.values(r)[0];if(e!==void 0)return zs(e);let t=await mn();if(!rr(t))throw new Error("No logged in user");return Ti(t)}var Hs={};Me(Hs,{build:()=>Fr,decode:()=>ur,dictionary:()=>_o,encode:()=>Br,encodeHeader:()=>tg,encodePayload:()=>rg,isExpired:()=>is,isValid:()=>$s,rootIssuer:()=>zs,sign:()=>b6});var _o={};Me(_o,{WNFS_PREFIX:()=>k_,compile:()=>I_,filesystemPrefix:()=>sg,lookup:()=>Ia,lookupAppUcan:()=>X$,lookupFilesystemUcan:()=>Q$,resourceLabel:()=>og});var yn={};Me(yn,{Branch:()=>vo,Kind:()=>v6,combine:()=>Lc,directory:()=>un,file:()=>A_,fromPosix:()=>Rd,isBranch:()=>qs,isDirectory:()=>cn,isFile:()=>js,isRootDirectory:()=>_6,isSameBranch:()=>ng,isSameKind:()=>S_,kind:()=>ig,log:()=>os,map:()=>P_,parent:()=>D_,removeBranch:()=>Ju,root:()=>Bc,terminus:()=>C_,toPosix:()=>Lr,unwrap:()=>ir});var vo=(u=>(u.Public="public",u.Pretty="p",u.Private="private",u.PrivateLog="privateLog",u.Shared="shared",u.SharedCounter="sharedCounter",u.Version="version",u))(vo||{}),v6=(t=>(t.Directory="directory",t.File="file",t))(v6||{});function un(...r){if(r.some(e=>e.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{directory:r}}function A_(...r){if(r.some(e=>e.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{file:r}}function Bc(){return{directory:[]}}function Rd(r){let e=r.replace(/^\/+/,"").split("/");return r.endsWith("/")?{directory:e.slice(0,-1)}:r===""?Bc():{file:e}}function Lr(r,{absolute:e}={absolute:!1}){let t=e?"/":"",n=ir(r).join("/");return cn(r)?t+n+(n.length?"/":""):t+n}function Lc(r,e){return P_(t=>ir(r).concat(t),e)}function qs(r,e){return ir(e)[0]===r}function cn(r){return!!r.directory}function js(r){return!!r.file}function _6(r){return r.directory.length===0}function ng(r,e){return ir(r)[0]===ir(e)[0]}function S_(r,e){return cn(r)&&cn(e)?!0:!!(js(r)&&js(e))}function ig(r){return cn(r)?"directory":"file"}function P_(r,e){return cn(e)?{directory:r(e.directory)}:js(e)?{file:r(e.file)}:e}function D_(r){return cn(r)&&_6(r)?null:un(...ir(r).slice(0,-1))}function Ju(r){return P_(e=>cn(r)||e.length>1?e.slice(1):e,r)}function C_(r){let e=ir(r);return e.length<1?null:e[e.length-1]}function ir(r){return cn(r)?r.directory:js(r)?r.file:[]}function os(r){return`[ ${r.join(", ")} ]`}var k_="wnfs";function I_(r){return r.reduce((e,t)=>{let n=ur(t);if(is(n))return e;let i=og(n.payload.rsc);return{...e,[i]:t}},{})}function og(r){if(typeof r!="object")return r;let e=Array.from(Object.entries(r))[0];return e[0]+":"+(e[0]===k_?e[1].replace(/^\/+/,""):e[1])}function sg(r){return k_+":"}function Ia(r){return Aa()[r]}async function X$(r){let e=Aa();return e["*"]||e["app:*"]||e[`app:${r}`]}async function Q$(r){let e=Ia("*");if(e)return e;let t=r==="*",n=t?!1:cn(r),i=t?["*"]:ir(r),o=await mn(),a=o?sg(o):"";return i.reduce((u,l,h)=>{if(u)return u;let m=h===0,y=i.slice(0,i.length-h),E=Lr(m&&!n?A_(...y):un(...y));return Ia(`${a}${E}`)||null},null)}var x6="Qmc5m94Gu7z62RC8waSKkZUrCCBJPyHbkpmGzEePxy2oXJ";async function Ws(r){let e=await E6(r);if(!e||e.toString()===x6)return null;if(e!==null)return e;try{let t=await Mu(r+".files."+ke.endpoints.user);return!t||t===x6?null:De(t)}catch(t){throw console.error(t),new Error("Could not locate user root in dns")}}async function E6(r){let e=ke.getApiEndpoint();try{let n=await(await fetch(`${e}/user/data/${r}`,{cache:"reload"})).json();return De(n)}catch(t){return Vr("Could not locate user root on Fission server: ",Rt(t,"toString")?t.toString():t),null}}async function T_(r,e){let t=ke.getApiEndpoint(),n=r.toString();return Vr("\u{1F30A} Updating your DNSLink:",n),await A6(`${t}/user/data/${n}`,{headers:async()=>({authorization:`Bearer ${Br(await Fr({audience:await Di.did(),issuer:await jt(),potency:"APPEND",proof:e,resource:ur(e).payload.rsc}))}`}),retries:100,retryDelay:5e3,retryOn:[502,503,504]},{method:"PUT"}).then(i=>(i.status<300?Vr("\u{1FAB4} DNSLink updated:",n):Vr("\u{1F525} Failed to update DNSLink for:",n),{success:i.status<300})).catch(i=>(Vr("\u{1F525} Failed to update DNSLink for:",n),console.error(i),{success:!1}))}async function A6(r,e,t,n=0){let i=await e.headers(),o=await fetch(r,{...t,headers:{...t.headers,...i}});if(e.retryOn.includes(o.status)){if(n<e.retries)return await new Promise((a,u)=>setTimeout(()=>A6(r,e,t,n+1).then(a,u),e.retryDelay));throw new Error("Too many retries for fetch")}return o}function Md(r){return un("private","Apps",r.creator,r.name)}function ag(r){let e=[];return r.app&&e.push(Md(r.app)),r.fs?.private&&(e=e.concat(r.fs?.private.map(t=>Lc(un("private"),t)))),r.fs?.public&&(e=e.concat(r.fs?.public.map(t=>Lc(un("public"),t)))),e}async function Oc(r){let t=(await wr(xl)||[]).concat(r);PP(I_(t));let n=Z$();await on(xl,n)}function cg({app:r,fs:e,raw:t},n){let i=sg(n),o=Ia("*");if(o&&!is(ur(o)))return!0;if(r){let a=i+Lr(Md(r)),u=Ia(a);if(!u||is(ur(u)))return!1}return!(e?.private&&!e.private.every(u=>{let l=`${i}private/`+Lr(u),h=Ia(l);return h&&!is(ur(h))})||e?.public&&!e.public.every(u=>{let l=`${i}public/`+Lr(u),h=Ia(l);return h&&!is(ur(h))})||t&&!t.every(u=>{let l=og(u.rsc),h=Ia(l);return h&&!is(ur(h))}))}function Z$(){return Object.values(Aa())}var fg=(t=>(t.InsecureContext="INSECURE_CONTEXT",t.UnsupportedBrowser="UNSUPPORTED_BROWSER",t))(fg||{});async function lg({path:r}){return`wnfs__bareNameFilter__${await bo.sha256Str(S6(r))}`}async function Nc({path:r}){return`wnfs__readKey__${await bo.sha256Str(S6(r))}`}function S6(r){return"/"+ir(r).join("/")}var P6=r=>r.kind==="permissionedAppState";async function hg(r){return ag(r).reduce((e,t)=>e.then(async n=>{if(n===!1||qs("public",t))return n;let i=await Nc({path:t});return await Yr.keyExists(i)}),Promise.resolve(!0))}var Gs={};Me(Gs,{code:()=>Wd,decode:()=>Ba,encode:()=>Uc,name:()=>Hd});var e9=["string","number","bigint","symbol"],t9=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function D6(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(e9.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(r9(r))return"Buffer";let t=n9(r);return t||"Object"}function r9(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function n9(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(t9.includes(e))return e}var Q=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};Q.uint=new Q(0,"uint",!0);Q.negint=new Q(1,"negint",!0);Q.bytes=new Q(2,"bytes",!0);Q.string=new Q(3,"string",!0);Q.array=new Q(4,"array",!1);Q.map=new Q(5,"map",!1);Q.tag=new Q(6,"tag",!1);Q.float=new Q(7,"float",!0);Q.false=new Q(7,"false",!0);Q.true=new Q(7,"true",!0);Q.null=new Q(7,"null",!0);Q.undefined=new Q(7,"undefined",!0);Q.break=new Q(7,"break",!0);var Fe=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Cl=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",i9=new TextDecoder,o9=new TextEncoder;function dg(r){return Cl&&globalThis.Buffer.isBuffer(r)}function L_(r){return r instanceof Uint8Array?dg(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var T6=Cl?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):k6(r,e,t):(r,e,t)=>t-e>64?i9.decode(r.subarray(e,t)):k6(r,e,t),F6=Cl?r=>r.length>64?globalThis.Buffer.from(r):C6(r):r=>r.length>64?o9.encode(r):C6(r),Vs=r=>Uint8Array.from(r),kl=Cl?(r,e,t)=>dg(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),B6=Cl?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),L_(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},L6=Cl?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function O6(r,e){if(dg(r)&&dg(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function C6(r,e=1/0){let t,n=r.length,i=null,o=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function k6(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,a=i>239?4:i>223?3:i>191?2:1;if(e+a<=t){let u,l,h,m;switch(a){case 1:i<128&&(o=i);break;case 2:u=r[e+1],(u&192)===128&&(m=(i&31)<<6|u&63,m>127&&(o=m));break;case 3:u=r[e+1],l=r[e+2],(u&192)===128&&(l&192)===128&&(m=(i&15)<<12|(u&63)<<6|l&63,m>2047&&(m<55296||m>57343)&&(o=m));break;case 4:u=r[e+1],l=r[e+2],h=r[e+3],(u&192)===128&&(l&192)===128&&(h&192)===128&&(m=(i&15)<<18|(u&63)<<12|(l&63)<<6|h&63,m>65535&&m<1114112&&(o=m))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=a}return s9(n)}var I6=4096;function s9(r){let e=r.length;if(e<=I6)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=I6));return t}var a9=256,Ud=class{constructor(e=a9){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=L6(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=kl(n,0,this.cursor)}else t=B6(this.chunks,this.cursor);return e&&this.reset(),t}};var bt="CBOR decode error:",O_="CBOR encode error:",Kd=[];Kd[23]=1;Kd[24]=2;Kd[25]=3;Kd[26]=5;Kd[27]=9;function Ta(r,e,t){if(r.length-e<t)throw new Error(`${bt} not enough data for type`)}var gn=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Fi(r,e,t){Ta(r,e,1);let n=r[e];if(t.strict===!0&&n<gn[0])throw new Error(`${bt} integer encoded in more bytes than necessary (strict decode)`);return n}function Bi(r,e,t){Ta(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<gn[1])throw new Error(`${bt} integer encoded in more bytes than necessary (strict decode)`);return n}function Li(r,e,t){Ta(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<gn[2])throw new Error(`${bt} integer encoded in more bytes than necessary (strict decode)`);return n}function Oi(r,e,t){Ta(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<gn[3])throw new Error(`${bt} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${bt} integers outside of the safe integer range are not supported`)}function N6(r,e,t,n){return new Fe(Q.uint,Fi(r,e+1,n),2)}function R6(r,e,t,n){return new Fe(Q.uint,Bi(r,e+1,n),3)}function M6(r,e,t,n){return new Fe(Q.uint,Li(r,e+1,n),5)}function U6(r,e,t,n){return new Fe(Q.uint,Oi(r,e+1,n),9)}function xo(r,e){return Cn(r,0,e.value)}function Cn(r,e,t){if(t<gn[0]){let n=Number(t);r.push([e|n])}else if(t<gn[1]){let n=Number(t);r.push([e|24,n])}else if(t<gn[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<gn[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<gn[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=a&255,a=a>>8,i[3]=a&255,a=a>>8,i[2]=a&255,a=a>>8,i[1]=a&255,r.push(i)}else throw new Error(`${bt} encountered BigInt larger than allowable range`)}}xo.encodedSize=function(e){return Cn.encodedSize(e.value)};Cn.encodedSize=function(e){return e<gn[0]?1:e<gn[1]?2:e<gn[2]?3:e<gn[3]?5:9};xo.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function K6(r,e,t,n){return new Fe(Q.negint,-1-Fi(r,e+1,n),2)}function $6(r,e,t,n){return new Fe(Q.negint,-1-Bi(r,e+1,n),3)}function z6(r,e,t,n){return new Fe(Q.negint,-1-Li(r,e+1,n),5)}var N_=BigInt(-1),j6=BigInt(1);function q6(r,e,t,n){let i=Oi(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new Fe(Q.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${bt} integers outside of the safe integer range are not supported`);return new Fe(Q.negint,N_-BigInt(i),9)}function pg(r,e){let t=e.value,n=typeof t=="bigint"?t*N_-j6:t*-1-1;Cn(r,e.type.majorEncoded,n)}pg.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*N_-j6:t*-1-1;return n<gn[0]?1:n<gn[1]?2:n<gn[2]?3:n<gn[3]?5:9};pg.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function $d(r,e,t,n){Ta(r,e,t+n);let i=kl(r,e+t,e+t+n);return new Fe(Q.bytes,i,t+n)}function H6(r,e,t,n){return $d(r,e,1,t)}function W6(r,e,t,n){return $d(r,e,2,Fi(r,e+1,n))}function V6(r,e,t,n){return $d(r,e,3,Bi(r,e+1,n))}function G6(r,e,t,n){return $d(r,e,5,Li(r,e+1,n))}function Y6(r,e,t,n){let i=Oi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${bt} 64-bit integer bytes lengths not supported`);return $d(r,e,9,i)}function mg(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Q.string?F6(r.value):r.value),r.encodedBytes}function Il(r,e){let t=mg(e);Cn(r,e.type.majorEncoded,t.length),r.push(t)}Il.encodedSize=function(e){let t=mg(e);return Cn.encodedSize(t.length)+t.length};Il.compareTokens=function(e,t){return u9(mg(e),mg(t))};function u9(r,e){return r.length<e.length?-1:r.length>e.length?1:O6(r,e)}function zd(r,e,t,n,i){let o=t+n;Ta(r,e,o);let a=new Fe(Q.string,T6(r,e+t,e+o),o);return i.retainStringBytes===!0&&(a.byteValue=kl(r,e+t,e+o)),a}function J6(r,e,t,n){return zd(r,e,1,t,n)}function X6(r,e,t,n){return zd(r,e,2,Fi(r,e+1,n),n)}function Q6(r,e,t,n){return zd(r,e,3,Bi(r,e+1,n),n)}function Z6(r,e,t,n){return zd(r,e,5,Li(r,e+1,n),n)}function e3(r,e,t,n){let i=Oi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${bt} 64-bit integer string lengths not supported`);return zd(r,e,9,i,n)}var t3=Il;function Tl(r,e,t,n){return new Fe(Q.array,n,t)}function r3(r,e,t,n){return Tl(r,e,1,t)}function n3(r,e,t,n){return Tl(r,e,2,Fi(r,e+1,n))}function i3(r,e,t,n){return Tl(r,e,3,Bi(r,e+1,n))}function o3(r,e,t,n){return Tl(r,e,5,Li(r,e+1,n))}function s3(r,e,t,n){let i=Oi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${bt} 64-bit integer array lengths not supported`);return Tl(r,e,9,i)}function a3(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${bt} indefinite length items not allowed`);return Tl(r,e,1,1/0)}function yg(r,e){Cn(r,Q.array.majorEncoded,e.value)}yg.compareTokens=xo.compareTokens;yg.encodedSize=function(e){return Cn.encodedSize(e.value)};function Fl(r,e,t,n){return new Fe(Q.map,n,t)}function c3(r,e,t,n){return Fl(r,e,1,t)}function u3(r,e,t,n){return Fl(r,e,2,Fi(r,e+1,n))}function f3(r,e,t,n){return Fl(r,e,3,Bi(r,e+1,n))}function l3(r,e,t,n){return Fl(r,e,5,Li(r,e+1,n))}function h3(r,e,t,n){let i=Oi(r,e+1,n);if(typeof i=="bigint")throw new Error(`${bt} 64-bit integer map lengths not supported`);return Fl(r,e,9,i)}function d3(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${bt} indefinite length items not allowed`);return Fl(r,e,1,1/0)}function gg(r,e){Cn(r,Q.map.majorEncoded,e.value)}gg.compareTokens=xo.compareTokens;gg.encodedSize=function(e){return Cn.encodedSize(e.value)};function p3(r,e,t,n){return new Fe(Q.tag,t,1)}function m3(r,e,t,n){return new Fe(Q.tag,Fi(r,e+1,n),2)}function y3(r,e,t,n){return new Fe(Q.tag,Bi(r,e+1,n),3)}function g3(r,e,t,n){return new Fe(Q.tag,Li(r,e+1,n),5)}function w3(r,e,t,n){return new Fe(Q.tag,Oi(r,e+1,n),9)}function wg(r,e){Cn(r,Q.tag.majorEncoded,e.value)}wg.compareTokens=xo.compareTokens;wg.encodedSize=function(e){return Cn.encodedSize(e.value)};var m9=20,y9=21,g9=22,w9=23;function b3(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${bt} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Fe(Q.null,null,1):new Fe(Q.undefined,void 0,1)}function v3(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${bt} indefinite length items not allowed`);return new Fe(Q.break,void 0,1)}function R_(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${bt} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${bt} Infinity values are not supported`)}return new Fe(Q.float,r,e)}function _3(r,e,t,n){return R_(M_(r,e+1),3,n)}function x3(r,e,t,n){return R_(U_(r,e+1),5,n)}function E3(r,e,t,n){return R_(D3(r,e+1),9,n)}function bg(r,e,t){let n=e.value;if(n===!1)r.push([Q.float.majorEncoded|m9]);else if(n===!0)r.push([Q.float.majorEncoded|y9]);else if(n===null)r.push([Q.float.majorEncoded|g9]);else if(n===void 0)r.push([Q.float.majorEncoded|w9]);else{let i,o=!1;(!t||t.float64!==!0)&&(S3(n),i=M_(ss,1),n===i||Number.isNaN(n)?(ss[0]=249,r.push(ss.slice(0,3)),o=!0):(P3(n),i=U_(ss,1),n===i&&(ss[0]=250,r.push(ss.slice(0,5)),o=!0))),o||(b9(n),i=D3(ss,1),ss[0]=251,r.push(ss.slice(0,9)))}}bg.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){S3(n);let i=M_(ss,1);if(n===i||Number.isNaN(n))return 3;if(P3(n),i=U_(ss,1),n===i)return 5}return 9};var A3=new ArrayBuffer(9),Eo=new DataView(A3,1),ss=new Uint8Array(A3,0);function S3(r){if(r===1/0)Eo.setUint16(0,31744,!1);else if(r===-1/0)Eo.setUint16(0,64512,!1);else if(Number.isNaN(r))Eo.setUint16(0,32256,!1);else{Eo.setFloat32(0,r);let e=Eo.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)Eo.setUint16(0,31744,!1);else if(t===0)Eo.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?Eo.setUint16(0,0):i<-14?Eo.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Eo.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function M_(r,e){if(r.length-e<2)throw new Error(`${bt} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function P3(r){Eo.setFloat32(0,r,!1)}function U_(r,e){if(r.length-e<4)throw new Error(`${bt} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function b9(r){Eo.setFloat64(0,r,!1)}function D3(r,e){if(r.length-e<8)throw new Error(`${bt} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}bg.compareTokens=xo.compareTokens;function Kt(r,e,t){throw new Error(`${bt} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function vg(r){return()=>{throw new Error(`${bt} ${r}`)}}var Ae=[];for(let r=0;r<=23;r++)Ae[r]=Kt;Ae[24]=N6;Ae[25]=R6;Ae[26]=M6;Ae[27]=U6;Ae[28]=Kt;Ae[29]=Kt;Ae[30]=Kt;Ae[31]=Kt;for(let r=32;r<=55;r++)Ae[r]=Kt;Ae[56]=K6;Ae[57]=$6;Ae[58]=z6;Ae[59]=q6;Ae[60]=Kt;Ae[61]=Kt;Ae[62]=Kt;Ae[63]=Kt;for(let r=64;r<=87;r++)Ae[r]=H6;Ae[88]=W6;Ae[89]=V6;Ae[90]=G6;Ae[91]=Y6;Ae[92]=Kt;Ae[93]=Kt;Ae[94]=Kt;Ae[95]=vg("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)Ae[r]=J6;Ae[120]=X6;Ae[121]=Q6;Ae[122]=Z6;Ae[123]=e3;Ae[124]=Kt;Ae[125]=Kt;Ae[126]=Kt;Ae[127]=vg("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)Ae[r]=r3;Ae[152]=n3;Ae[153]=i3;Ae[154]=o3;Ae[155]=s3;Ae[156]=Kt;Ae[157]=Kt;Ae[158]=Kt;Ae[159]=a3;for(let r=160;r<=183;r++)Ae[r]=c3;Ae[184]=u3;Ae[185]=f3;Ae[186]=l3;Ae[187]=h3;Ae[188]=Kt;Ae[189]=Kt;Ae[190]=Kt;Ae[191]=d3;for(let r=192;r<=215;r++)Ae[r]=p3;Ae[216]=m3;Ae[217]=y3;Ae[218]=g3;Ae[219]=w3;Ae[220]=Kt;Ae[221]=Kt;Ae[222]=Kt;Ae[223]=Kt;for(let r=224;r<=243;r++)Ae[r]=vg("simple values are not supported");Ae[244]=Kt;Ae[245]=Kt;Ae[246]=Kt;Ae[247]=b3;Ae[248]=vg("simple values are not supported");Ae[249]=_3;Ae[250]=x3;Ae[251]=E3;Ae[252]=Kt;Ae[253]=Kt;Ae[254]=Kt;Ae[255]=v3;var as=[];for(let r=0;r<24;r++)as[r]=new Fe(Q.uint,r,1);for(let r=-1;r>=-24;r--)as[31-r]=new Fe(Q.negint,r,1);as[64]=new Fe(Q.bytes,new Uint8Array(0),1);as[96]=new Fe(Q.string,"",1);as[128]=new Fe(Q.array,0,1);as[160]=new Fe(Q.map,0,1);as[244]=new Fe(Q.false,!1,1);as[245]=new Fe(Q.true,!0,1);as[246]=new Fe(Q.null,null,1);function C3(r){switch(r.type){case Q.false:return Vs([244]);case Q.true:return Vs([245]);case Q.null:return Vs([246]);case Q.bytes:return r.value.length?void 0:Vs([64]);case Q.string:return r.value===""?Vs([96]):void 0;case Q.array:return r.value===0?Vs([128]):void 0;case Q.map:return r.value===0?Vs([160]):void 0;case Q.uint:return r.value<24?Vs([Number(r.value)]):void 0;case Q.negint:if(r.value>=-24)return Vs([31-Number(r.value)])}}var _9={float64:!1,mapSorter:A9,quickEncodeToken:C3};function x9(){let r=[];return r[Q.uint.major]=xo,r[Q.negint.major]=pg,r[Q.bytes.major]=Il,r[Q.string.major]=t3,r[Q.array.major]=yg,r[Q.map.major]=gg,r[Q.tag.major]=wg,r[Q.float.major]=bg,r}var k3=x9(),K_=new Ud,Bl=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${O_} object contains circular references`);return new Bl(t,e)}},Rc={null:new Fe(Q.null,null),undefined:new Fe(Q.undefined,void 0),true:new Fe(Q.true,!0),false:new Fe(Q.false,!1),emptyArray:new Fe(Q.array,0),emptyMap:new Fe(Q.map,0)},Mc={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Fe(Q.float,r):r>=0?new Fe(Q.uint,r):new Fe(Q.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new Fe(Q.uint,r):new Fe(Q.negint,r)},Uint8Array(r,e,t,n){return new Fe(Q.bytes,r)},string(r,e,t,n){return new Fe(Q.string,r)},boolean(r,e,t,n){return r?Rc.true:Rc.false},null(r,e,t,n){return Rc.null},undefined(r,e,t,n){return Rc.undefined},ArrayBuffer(r,e,t,n){return new Fe(Q.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new Fe(Q.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[Rc.emptyArray,new Fe(Q.break)]:Rc.emptyArray;n=Bl.createCheck(n,r);let i=[],o=0;for(let a of r)i[o++]=_g(a,t,n);return t.addBreakTokens?[new Fe(Q.array,r.length),i,new Fe(Q.break)]:[new Fe(Q.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),a=i?r.size:o.length;if(!a)return t.addBreakTokens===!0?[Rc.emptyMap,new Fe(Q.break)]:Rc.emptyMap;n=Bl.createCheck(n,r);let u=[],l=0;for(let h of o)u[l++]=[_g(h,t,n),_g(i?r.get(h):r[h],t,n)];return E9(u,t),t.addBreakTokens?[new Fe(Q.map,a),u,new Fe(Q.break)]:[new Fe(Q.map,a),u]}};Mc.Map=Mc.Object;Mc.Buffer=Mc.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Mc[`${r}Array`]=Mc.DataView;function _g(r,e={},t){let n=D6(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||Mc[n];if(typeof i=="function"){let a=i(r,n,e,t);if(a!=null)return a}let o=Mc[n];if(!o)throw new Error(`${O_} unsupported type: ${n}`);return o(r,n,e,t)}function E9(r,e){e.mapSorter&&r.sort(e.mapSorter)}function A9(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,o=k3[i].compareTokens(t,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function I3(r,e,t,n){if(Array.isArray(e))for(let i of e)I3(r,i,t,n);else t[e.type.major](r,e,n)}function S9(r,e,t){let n=_g(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let a=o.encodedSize(n,t),u=new Ud(a);if(o(u,n,t),u.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return L_(u.chunks[0])}}return K_.reset(),I3(K_,n,e,t),K_.toBytes(!0)}function Fa(r,e){return e=Object.assign({},_9,e),S9(r,k3,e)}var P9={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},$_=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=as[e];if(t===void 0){let n=Ae[e];if(!n)throw new Error(`${bt} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},jd=Symbol.for("DONE"),xg=Symbol.for("BREAK");function D9(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=qd(e,t);if(o===xg){if(r.value===1/0)break;throw new Error(`${bt} got unexpected break to lengthed array`)}if(o===jd)throw new Error(`${bt} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function C9(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let a=0;a<r.value;a++){let u=qd(e,t);if(u===xg){if(r.value===1/0)break;throw new Error(`${bt} got unexpected break to lengthed map`)}if(u===jd)throw new Error(`${bt} found map but not enough entries (got ${a} [no key], expected ${r.value})`);if(n!==!0&&typeof u!="string")throw new Error(`${bt} non-string keys not supported (got ${typeof u})`);let l=qd(e,t);if(l===jd)throw new Error(`${bt} found map but not enough entries (got ${a} [no value], expected ${r.value})`);n?o.set(u,l):i[u]=l}return n?o:i}function qd(r,e){if(r.done())return jd;let t=r.next();if(t.type===Q.break)return xg;if(t.type.terminal)return t.value;if(t.type===Q.array)return D9(t,r,e);if(t.type===Q.map)return C9(t,r,e);if(t.type===Q.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=qd(r,e);return e.tags[t.value](n)}throw new Error(`${bt} tag not supported (${t.value})`)}throw new Error("unsupported")}function Ao(r,e){if(!(r instanceof Uint8Array))throw new Error(`${bt} data to decode must be a Uint8Array`);e=Object.assign({},P9,e);let t=e.tokenizer||new $_(r,e),n=qd(t,e);if(n===jd)throw new Error(`${bt} did not find any content to decode`);if(n===xg)throw new Error(`${bt} got unexpected break`);if(!t.done())throw new Error(`${bt} too many terminals, data makes no sense`);return n}cr();var T3=42;function k9(r){if(r.asCID!==r)return null;let e=we.asCID(r);if(!e)return null;let t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new Fe(Q.tag,T3),new Fe(Q.bytes,t)]}function I9(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function T9(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var F9={float64:!0,typeEncoders:{Object:k9,undefined:I9,number:T9}};function B9(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return we.decode(r.subarray(1))}var F3={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};F3.tags[T3]=B9;var Hd="dag-cbor",Wd=113,Uc=r=>Fa(r,F9),Ba=r=>Ao(r,F3);function B3(r,e,t,n){var i,o=!1,a=0;function u(){i&&clearTimeout(i)}function l(){u(),o=!0}typeof e!="boolean"&&(n=t,t=e,e=void 0);function h(){for(var m=arguments.length,y=new Array(m),E=0;E<m;E++)y[E]=arguments[E];var k=this,T=Date.now()-a;if(o)return;function O(){a=Date.now(),t.apply(k,y)}function ce(){i=void 0}n&&!i&&O(),u(),n===void 0&&T>r?O():e!==!0&&(i=setTimeout(n?ce:O,n===void 0?r-T:r))}return h.cancel=l,h}cr();var Or=r=>Xe(r)&&r.content!==void 0,Eg=r=>Xe(r)&&r.ls!==void 0,j_=r=>Xe(r)&&rr(r.name)&&es(r.size)&&Ly(r.isFile),Jr=r=>Xe(r)&&rr(r.name)&&rr(r.ipns),L3=r=>{if(Xe(r)){let e=Object.values(r);return e.length>0&&e.every(Jr)}return!1},O3=r=>Array.isArray(r)&&r.every(Jr),L9=r=>j_(r)&&La(r.cid),N3=r=>Xe(r)&&Object.values(r).every(e=>L9(e)||Jr(e)),O9=r=>Xe(r)&&es(r.mtime)&&es(r.ctime)&&es(r.mode)&&rr(r._type),Zu=r=>Xe(r)&&O9(r.unixMeta)&&Ly(r.isFile)&&N9(r.version),Ag=r=>Xe(r)&&Object.values(r).every(Sg),Sg=r=>Xe(r)&&La(r.cid)&&La(r.userland)&&La(r.metadata)&&Ag(r.subSkeleton)||Jr(r),q_=r=>Xe(r)&&Ag(r.skeleton)&&Zu(r.metadata)&&r.metadata.isFile===!1,R3=r=>q_(r)&&La(r.userland),H_=r=>Xe(r)&&Zu(r.metadata)&&r.metadata.isFile===!0,M3=r=>H_(r)&&La(r.userland),La=r=>!!we.asCID(r)||rr(r)||r&&"code"in r&&"version"in r&&"multihash"in r,N9=r=>{if(!Xe(r))return!1;let{major:e,minor:t,patch:n}=r;return es(e)&&es(t)&&es(n)};var It={};Me(It,{getEncryptedFile:()=>IG,getFile:()=>kG,getFileSystemLinks:()=>TG,getSimpleLinks:()=>Ch,putEncryptedFile:()=>S2,putFile:()=>fm,putLinks:()=>Mf});var Ys={};Me(Ys,{code:()=>Gd,createLink:()=>cs,createNode:()=>Na,decode:()=>G9,encode:()=>V9,name:()=>J_,prepare:()=>G_,validate:()=>Y_});cr();var R9=new TextDecoder;function W_(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function Pg(r,e){let t;[t,e]=W_(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function U3(r,e){let t;return[t,e]=W_(r,e),[t&7,t>>3,e]}function M9(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=U3(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=Pg(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=Pg(r,n),e.Name=R9.decode(a)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=W_(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function K3(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let u,l;if([u,l,t]=U3(r,t),u!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${u}`);if(l===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=Pg(r,t),n&&(i=!0)}else if(l===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let h;[h,t]=Pg(r,t),n.push(M9(h))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${l}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let a={};return o&&(a.Data=o),a.Links=n||[],a}var z3=new TextEncoder,$3=2**32,U9=2**31;function K9(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=Vd(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=z3.encode(r.Name);t-=n.length,e.set(n,t),t=Vd(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=Vd(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function j3(r){let e=z9(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=Vd(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=K9(r.Links[i],t.subarray(0,n));n-=o,n=Vd(t,n,o)-1,t[n]=18}return t}function $9(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+Ll(t)}if(typeof r.Name=="string"){let t=z3.encode(r.Name).length;e+=1+t+Ll(t)}return typeof r.Tsize=="number"&&(e+=1+Ll(r.Tsize)),e}function z9(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+Ll(t)}if(r.Links)for(let t of r.Links){let n=$9(t);e+=1+n+Ll(n)}return e}function Vd(r,e,t){e-=Ll(t);let n=e;for(;t>=U9;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function Ll(r){return r%2===0&&r++,Math.floor((j9(r)+6)/7)}function j9(r){let e=0;return r>=$3&&(r=Math.floor(r/$3),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+q9[r]}var q9=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];cr();var H9=["Data","Links"],W9=["Hash","Name","Tsize"],V_=new TextEncoder;function H3(r,e){if(r===e)return 0;let t=r.Name?V_.encode(r.Name):[],n=e.Name?V_.encode(e.Name):[],i=t.length,o=n.length;for(let a=0,u=Math.min(i,o);a<u;++a)if(t[a]!==n[a]){i=t[a],o=n[a];break}return i<o?-1:o<i?1:0}function q3(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function W3(r){if(typeof r.asCID=="object"){let t=we.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Hash){let t=we.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=we.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=we.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function G_(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=V_.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(W3),e.Links.sort(H3);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function Y_(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!q3(r,H9))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!q3(t,W9))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&H3(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Na(r,e=[]){return G_({Data:r,Links:e})}function cs(r,e,t){return W3({Hash:t,Name:r,Tsize:e})}var J_="dag-pb",Gd=112;function V9(r){Y_(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),j3(e)}function G9(r){let e=K3(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=we.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}var Xa={};Me(Xa,{DAG_NODE_DATA:()=>am,DEFAULT_CDN_URL:()=>GF,add:()=>Ja,cat:()=>cm,catBuf:()=>aa,catRaw:()=>QF,dagGet:()=>Rf,dagPut:()=>g0,dagPutLinks:()=>um,encoded:()=>Bo,get:()=>gi,ls:()=>x2,node:()=>m0,nodeWithPkg:()=>YF,pkgFromCDN:()=>JF,set:()=>EG,size:()=>yu});var m0={};Me(m0,{OPTIONS:()=>WF,createAndConnect:()=>b2,fetchFissionPeers:()=>y2,listPeers:()=>d0,monitorBitswap:()=>xG,monitorPeers:()=>vG,ping:()=>v2,stopMonitoringBitswap:()=>VF,stopMonitoringPeers:()=>_G,tryConnecting:()=>g2});var h0=Ie(hd(),1);var V3="RSA";var G3="[a-fA-F\\d:]",Kc=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${G3})|(?<=${G3})(?=\\s|$))`:"",us="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Xr="[a-fA-F\\d]{1,4}",Dg=`
(?:
(?:${Xr}:){7}(?:${Xr}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Xr}:){6}(?:${us}|:${Xr}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Xr}:){5}(?::${us}|(?::${Xr}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Xr}:){4}(?:(?::${Xr}){0,1}:${us}|(?::${Xr}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Xr}:){3}(?:(?::${Xr}){0,2}:${us}|(?::${Xr}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Xr}:){2}(?:(?::${Xr}){0,3}:${us}|(?::${Xr}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Xr}:){1}(?:(?::${Xr}){0,4}:${us}|(?::${Xr}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${Xr}){0,5}:${us}|(?::${Xr}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),J9=new RegExp(`(?:^${us}$)|(?:^${Dg}$)`),X9=new RegExp(`^${us}$`),Q9=new RegExp(`^${Dg}$`),X_=r=>r&&r.exact?J9:new RegExp(`(?:${Kc(r)}${us}${Kc(r)})|(?:${Kc(r)}${Dg}${Kc(r)})`,"g");X_.v4=r=>r&&r.exact?X9:new RegExp(`${Kc(r)}${us}${Kc(r)}`,"g");X_.v6=r=>r&&r.exact?Q9:new RegExp(`${Kc(r)}${Dg}${Kc(r)}`,"g");var Cg=X_;function kg(r){return Cg({exact:!0}).test(r)}function Y3(r){return Cg.v6({exact:!0}).test(r)}function J3(r){return Cg.v4({exact:!0}).test(r)}Dn();var X3=J3,Z9=Y3,Q_=function(r){let e=0,t;if(X3(r))t=new Uint8Array(e+4),r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255});else if(Z9(r)){let n=r.split(":",8),i;for(i=0;i<n.length;i++){let o=X3(n[i]),a;o&&(a=Q_(n[i]),n[i]=Ze(a.slice(0,2),"base16")),a!=null&&++i<8&&n.splice(i,0,Ze(a.slice(2,4),"base16"))}if(n[0]==="")for(;n.length<8;)n.unshift("0");else if(n[n.length-1]==="")for(;n.length<8;)n.push("0");else if(n.length<8){for(i=0;i<n.length&&n[i]!=="";i++);let o=[i,1];for(i=9-n.length;i>0;i--)o.push("0");n.splice.apply(n,o)}for(t=new Uint8Array(e+16),i=0;i<n.length;i++){let o=parseInt(n[i],16);t[e++]=o>>8&255,t[e++]=o&255}}if(t==null)throw Error("Invalid ip address: "+r);return t},Q3=function(r,e,t){e=~~e,t=t??r.length-e;let n=[],i="",o=new DataView(r.buffer);if(t===4){for(let a=0;a<t;a++)n.push(r[e+a]);i=n.join(".")}else if(t===16){for(let a=0;a<t;a+=2)n.push(o.getUint16(e+a).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};var Yd={},Z_={},tz=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];tz.forEach(r=>{let e=rz(...r);Z_[e.code]=e,Yd[e.name]=e});function rz(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}function fr(r){if(typeof r=="number"){if(Z_[r]!=null)return Z_[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(Yd[r]!=null)return Yd[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}cr();Qo();Ec();Zo();var ef=Ie($c(),1);Dn();mo();Ku();function fD(r,e){switch(fr(r).code){case 4:case 41:return yz(e);case 6:case 273:case 33:case 132:return hD(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return wz(e);case 421:return vz(e);case 444:return uD(e);case 445:return uD(e);default:return Ze(e,"base16")}}function lD(r,e){switch(fr(r).code){case 4:return cD(e);case 41:return cD(e);case 6:case 273:case 33:case 132:return r1(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return gz(e);case 421:return bz(e);case 444:return _z(e);case 445:return xz(e);default:return wt(e,"base16")}}function cD(r){if(!kg(r))throw new Error("invalid ip address");return Q_(r)}function yz(r){let e=Q3(r,0,r.length);if(e==null||!kg(e))throw new Error("invalid ip address");return e}function r1(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function hD(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function gz(r){let e=wt(r),t=Uint8Array.from(ef.default.encode(e.length));return pn([t,e],t.length+e.length)}function wz(r){let e=ef.default.decode(r);if(r=r.slice(ef.default.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return Ze(r)}function bz(r){let e;r[0]==="Q"||r[0]==="1"?e=Ci(Pn.decode(`z${r}`)).bytes:e=we.parse(r).multihash.bytes;let t=Uint8Array.from(ef.default.encode(e.length));return pn([t,e],t.length+e.length)}function vz(r){let e=ef.default.decode(r),t=r.slice(ef.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return Ze(t,"base58btc")}function _z(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=Vt.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=r1(n);return pn([t,i],t.length+i.length)}function xz(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=Vt.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=r1(n);return pn([t,i],t.length+i.length)}function uD(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=Ze(e,"base32"),i=hD(t);return`${n}:${i}`}var Ol=Ie($c(),1);Ku();Dn();function Ez(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=fr(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw pD("invalid address: "+r);if(o.path===!0){e.push([i,s1(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function Az(r){let e=[];return r.map(t=>{let n=Fg(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),s1(e.join("/"))}function Sz(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=Fg(e);return e.length>1?[t.code,lD(t.code,e[1])]:[t.code]})}function n1(r){return r.map(e=>{let t=Fg(e);return e[1]!=null?[t.code,fD(t.code,e[1])]:[t.code]})}function i1(r){return Tg(pn(r.map(e=>{let t=Fg(e),n=Uint8Array.from(Ol.default.encode(t.code));return e.length>1&&e[1]!=null&&(n=pn([n,e[1]])),n})))}function o1(r,e){return r.size>0?r.size/8:r.size===0?0:Ol.default.decode(e)+Ol.default.decode.bytes}function Jd(r){let e=[],t=0;for(;t<r.length;){let n=Ol.default.decode(r,t),i=Ol.default.decode.bytes,o=fr(n),a=o1(o,r.slice(t+i));if(a===0){e.push([n]),t+=i;continue}let u=r.slice(t+i,t+i+a);if(t+=a+i,t>r.length)throw pD("Invalid address Uint8Array: "+Ze(r,"base16"));e.push([n,u])}return e}function Ig(r){let e=Jd(r),t=n1(e);return Az(t)}function Pz(r){r=s1(r);let e=Ez(r),t=Sz(e);return i1(t)}function dD(r){return Pz(r)}function Tg(r){let e=Dz(r);if(e!=null)throw e;return Uint8Array.from(r)}function Dz(r){try{Jd(r)}catch(e){return e}}function s1(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function pD(r){return new Error("Error parsing address: "+r)}function Fg(r){return fr(r[0])}var a1=Ie($c(),1);cr();Ec();var bD=Ie(So(),1);Dn();wd();var Iz=Symbol.for("nodejs.util.inspect.custom"),Tz=[fr("ip4").code,fr("ip6").code],Bg=[fr("dns").code,fr("dns4").code,fr("dns6").code,fr("dnsaddr").code],gD=[fr("p2p").code,fr("ipfs").code],Fz=[fr("tcp").code,fr("udp").code],vD=new Map,wD=Symbol.for("@multiformats/js-multiaddr/multiaddr"),Ni=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,wD,{value:!0}),e instanceof Uint8Array)this.bytes=Tg(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=dD(e)}else if(Ni.isMultiaddr(e))this.bytes=Tg(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Ig(this.bytes)}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),n,i;if(t.length>2)Bg.includes(e[0])&&gD.includes(e[1])?(n=fr("tcp").name,i=443):(n=fr(t[2]).name,i=parseInt(t[3]));else if(Bg.includes(e[0]))n=fr("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:n,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},fr(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=a1.default.decode(t,n),o=a1.default.decode.bytes,a=fr(i);n+=o1(a,t.slice(n+o))+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return Jd(this.bytes)}stringTuples(){let e=Jd(this.bytes);return n1(e)}encapsulate(e){return e=new Ni(e),new Ni(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Ni(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new Ni(i1(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Yd.ipfs.code).pop();if(t?.[1]!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?Ze(Pn.decode(`z${n}`),"base58btc"):Ze(we.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>fr(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return $u(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(o=>o.resolvable);if(t==null)return[this];let n=vD.get(t.name);if(n==null)throw(0,bD.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new Ni(o))}nodeAddress(){let e=this.protoCodes(),t=this.protoNames(),n=this.toString().split("/").slice(1),i=fr(n[2]).code,o=parseInt(n[3]);if(Bg.includes(e[0])&&gD.includes(e[1])&&(i=fr("tcp").code,o=443),n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');if(!Tz.includes(e[0])&&!Bg.includes(e[0]))throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns, dns4, dns6, dnsaddr}".`);if(!Fz.includes(i))throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:o}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}static fromNodeAddress(e,t){if(e==null)throw new Error("requires node address object");if(t==null)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new Ni("/"+[n,e.address,t,e.port].join("/"))}static isName(e){return Ni.isMultiaddr(e)?e.protos().some(t=>t.resolvable):!1}static isMultiaddr(e){return Boolean(e?.[wD])}[Iz](){return"<Multiaddr "+Ze(this.bytes,"base16")+" - "+Ig(this.bytes)+">"}inspect(){return"<Multiaddr "+Ze(this.bytes,"base16")+" - "+Ig(this.bytes)+">"}};Ni.resolvers=vD;function _D(r){return new Ni(r)}var Bz=AD,xD=128,Lz=127,Oz=~Lz,Nz=Math.pow(2,31);function AD(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Nz;)e[t++]=r&255|xD,r/=128;for(;r&Oz;)e[t++]=r&255|xD,r>>>=7;return e[t]=r|0,AD.bytes=t-n+1,e}var Rz=c1,Mz=128,ED=127;function c1(r,n){var t=0,n=n||0,i=0,o=n,a,u=r.length;do{if(o>=u)throw c1.bytes=0,new RangeError("Could not decode varint");a=r[o++],t+=i<28?(a&ED)<<i:(a&ED)*Math.pow(2,i),i+=7}while(a>=Mz);return c1.bytes=o-n,t}var Uz=Math.pow(2,7),Kz=Math.pow(2,14),$z=Math.pow(2,21),zz=Math.pow(2,28),jz=Math.pow(2,35),qz=Math.pow(2,42),Hz=Math.pow(2,49),Wz=Math.pow(2,56),Vz=Math.pow(2,63),Gz=function(r){return r<Uz?1:r<Kz?2:r<$z?3:r<zz?4:r<jz?5:r<qz?6:r<Hz?7:r<Wz?8:r<Vz?9:10},Yz={encode:Bz,decode:Rz,encodingLength:Gz},Jz=Yz,Xd=Jz;var Qd=r=>[Xd.decode(r),Xd.decode.bytes],Nl=(r,e,t=0)=>(Xd.encode(r,e,t),e),Rl=r=>Xd.encodingLength(r);var Rie=new Uint8Array(0);var SD=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Ra=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var PD=r=>new TextEncoder().encode(r),DD=r=>new TextDecoder().decode(r);var zc=(r,e)=>{let t=e.byteLength,n=Rl(r),i=n+Rl(t),o=new Uint8Array(i+t);return Nl(r,o,0),Nl(t,o,n),o.set(e,i),new Ml(r,t,e,o)},Zd=r=>{let e=Ra(r),[t,n]=Qd(e),[i,o]=Qd(e.subarray(n)),a=e.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new Ml(t,i,a,e)},kD=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&SD(r.bytes,e.bytes),Ml=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var d1={};Me(d1,{base58btc:()=>Ri,base58flickr:()=>rj});function Xz(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var u=r.length,l=r.charAt(0),h=Math.log(u)/Math.log(256),m=Math.log(256)/Math.log(u);function y(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var O=0,ce=0,ne=0,ve=T.length;ne!==ve&&T[ne]===0;)ne++,O++;for(var X=(ve-ne)*m+1>>>0,me=new Uint8Array(X);ne!==ve;){for(var be=T[ne],W=0,de=X-1;(be!==0||W<ce)&&de!==-1;de--,W++)be+=256*me[de]>>>0,me[de]=be%u>>>0,be=be/u>>>0;if(be!==0)throw new Error("Non-zero carry");ce=W,ne++}for(var ge=X-ce;ge!==X&&me[ge]===0;)ge++;for(var Ue=l.repeat(O);ge<X;++ge)Ue+=r.charAt(me[ge]);return Ue}function E(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var O=0;if(T[O]!==" "){for(var ce=0,ne=0;T[O]===l;)ce++,O++;for(var ve=(T.length-O)*h+1>>>0,X=new Uint8Array(ve);T[O];){var me=t[T.charCodeAt(O)];if(me===255)return;for(var be=0,W=ve-1;(me!==0||be<ne)&&W!==-1;W--,be++)me+=u*X[W]>>>0,X[W]=me%256>>>0,me=me/256>>>0;if(me!==0)throw new Error("Non-zero carry");ne=be,O++}if(T[O]!==" "){for(var de=ve-ne;de!==ve&&X[de]===0;)de++;for(var ge=new Uint8Array(ce+(ve-de)),Ue=ce;de!==ve;)ge[Ue++]=X[de++];return ge}}}function k(T){var O=E(T);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:E,decode:k}}var Qz=Xz,Zz=Qz,ID=Zz;var u1=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},f1=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return TD(this,e)}},l1=class{constructor(e){this.decoders=e}or(e){return TD(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},TD=(r,e)=>new l1({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),h1=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new u1(e,t,n),this.decoder=new f1(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Kl=({name:r,prefix:e,encode:t,decode:n})=>new h1(r,e,t,n),jc=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=ID(t,e);return Kl({prefix:r,name:e,encode:n,decode:o=>Ra(i(o))})},ej=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),u=0,l=0,h=0;for(let m=0;m<o;++m){let y=i[r[m]];if(y===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<t|y,u+=t,u>=8&&(u-=8,a[h++]=255&l>>u)}if(u>=t||255&l<<8-u)throw new SyntaxError("Unexpected end of data");return a},tj=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,u=0;for(let l=0;l<r.length;++l)for(u=u<<8|r[l],a+=8;a>t;)a-=t,o+=e[i&u>>a];if(a&&(o+=e[i&u<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Nr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Kl({prefix:e,name:r,encode(i){return tj(i,n,t)},decode(i){return ej(i,n,t,r)}});var Ri=jc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rj=jc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var p1={};Me(p1,{base32:()=>$l,base32hex:()=>sj,base32hexpad:()=>cj,base32hexpadupper:()=>uj,base32hexupper:()=>aj,base32pad:()=>ij,base32padupper:()=>oj,base32upper:()=>nj,base32z:()=>fj});var $l=Nr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nj=Nr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ij=Nr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),oj=Nr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sj=Nr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aj=Nr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cj=Nr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uj=Nr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fj=Nr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Rr=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Ng,byteLength:Ng,code:Og,version:Og,multihash:Og,bytes:Og,_baseCache:Ng,asCID:Ng})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==ep)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==pj)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Rr.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=zc(e,t);return Rr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&kD(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return hj(t,i,e||Ri.encoder);default:return dj(t,i,e||$l.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return yj(/^0\.0/,gj),!!(e&&(e[BD]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Rr)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new Rr(t,n,i,o||FD(t,n,i.bytes))}else if(e!=null&&e[BD]===!0){let{version:t,multihash:n,code:i}=e,o=Zd(n);return Rr.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==ep)throw new Error(`Version 0 CID must use dag-pb (code: ${ep}) block encoding`);return new Rr(e,t,n,n.bytes)}case 1:{let i=FD(e,t,n.bytes);return new Rr(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Rr.create(0,ep,e)}static createV1(e,t){return Rr.create(1,e,t)}static decode(e){let[t,n]=Rr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Rr.inspectBytes(e),n=t.size-t.multihashSize,i=Ra(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),a=new Ml(t.multihashCode,t.digestSize,o,i);return[t.version===0?Rr.createV0(a):Rr.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[y,E]=Qd(e.subarray(t));return t+=E,y},i=n(),o=ep;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let a=t,u=n(),l=n(),h=t+l,m=h-a;return{version:i,codec:o,multihashCode:u,digestSize:l,multihashSize:m,size:h}}static parse(e,t){let[n,i]=lj(e,t),o=Rr.decode(i);return o._baseCache.set(n,e),o}},lj=(r,e)=>{switch(r[0]){case"Q":{let t=e||Ri;return[Ri.prefix,t.decode(`${Ri.prefix}${r}`)]}case Ri.prefix:{let t=e||Ri;return[Ri.prefix,t.decode(r)]}case $l.prefix:{let t=e||$l;return[$l.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},hj=(r,e,t)=>{let{prefix:n}=t;if(n!==Ri.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},dj=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},ep=112,pj=18,FD=(r,e,t)=>{let n=Rl(r),i=n+Rl(e),o=new Uint8Array(i+t.byteLength);return Nl(r,o,0),Nl(e,o,n),o.set(t,i),o},BD=Symbol.for("@ipld/js-cid/CID"),Og={writable:!1,configurable:!1,enumerable:!0},Ng={writable:!1,enumerable:!1,configurable:!1},mj="0.0.0-dev",yj=(r,e)=>{if(r.test(mj))console.warn(e);else throw new Error(e)},gj=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var m1={};Me(m1,{identity:()=>wj});var wj=Kl({prefix:"\0",name:"identity",encode:r=>DD(r),decode:r=>PD(r)});var y1={};Me(y1,{base2:()=>bj});var bj=Nr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var g1={};Me(g1,{base8:()=>vj});var vj=Nr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var w1={};Me(w1,{base10:()=>_j});var _j=jc({prefix:"9",name:"base10",alphabet:"0123456789"});var b1={};Me(b1,{base16:()=>xj,base16upper:()=>Ej});var xj=Nr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ej=Nr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var v1={};Me(v1,{base36:()=>Aj,base36upper:()=>Sj});var Aj=jc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Sj=jc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var _1={};Me(_1,{base64:()=>Pj,base64pad:()=>Dj,base64url:()=>Cj,base64urlpad:()=>kj});var Pj=Nr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Dj=Nr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cj=Nr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),kj=Nr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var x1={};Me(x1,{base256emoji:()=>Lj});var LD=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Ij=LD.reduce((r,e,t)=>(r[t]=e,r),[]),Tj=LD.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Fj(r){return r.reduce((e,t)=>(e+=Ij[t],e),"")}function Bj(r){let e=[];for(let t of r){let n=Tj[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var Lj=Kl({prefix:"\u{1F680}",name:"base256emoji",encode:Fj,decode:Bj});var S1={};Me(S1,{sha256:()=>Rg,sha512:()=>Oj});var A1=({name:r,code:e,encode:t})=>new E1(r,e,t),E1=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?zc(this.code,t):t.then(n=>zc(this.code,n))}else throw Error("Unknown type, must be binary type")}};var ND=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Rg=A1({name:"sha2-256",code:18,encode:ND("SHA-256")}),Oj=A1({name:"sha2-512",code:19,encode:ND("SHA-512")});var P1={};Me(P1,{identity:()=>Mg});var RD=0,Nj="identity",MD=Ra,Rj=r=>zc(RD,MD(r)),Mg={code:RD,name:Nj,encode:MD,digest:Rj};var aoe=new TextEncoder,coe=new TextDecoder;var D1={...m1,...y1,...g1,...w1,...b1,...p1,...v1,...d1,..._1,...x1},hoe={...S1,...P1};wd();var Kj=Ie(So(),1);var UD=Symbol.for("@libp2p/peer-id");var KD=Object.values(D1).map(r=>r.decoder).reduce((r,e)=>r.or(e),D1.identity.decoder),$D=114,zD=36,jD=37,tp=class{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[UD](){return!0}toString(){return this.string==null&&(this.string=Ri.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return Rr.createV1($D,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return $u(this.multihash.bytes,e);if(typeof e=="string")return C1(e).equals(this);if(e?.multihash?.bytes!=null)return $u(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},rp=class extends tp{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}},np=class extends tp{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}},ip=class extends tp{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}};function C1(r,e){if(e=e??KD,r.charAt(0)==="1"||r.charAt(0)==="Q"){let t=Zd(Ri.decode(`z${r}`));return r.startsWith("12D")?new np({multihash:t}):r.startsWith("16U")?new ip({multihash:t}):new rp({multihash:t})}return $j(KD.decode(r))}function $j(r){try{let e=Zd(r);if(e.code===Mg.code){if(e.digest.length===zD)return new np({multihash:e});if(e.digest.length===jD)return new ip({multihash:e})}if(e.code===Rg.code)return new rp({multihash:e})}catch{return zj(Rr.decode(r))}throw new Error("Supplied PeerID CID is invalid")}function zj(r){if(r==null||r.multihash==null||r.version==null||r.version===1&&r.code!==$D)throw new Error("Supplied PeerID CID is invalid");let e=r.multihash;if(e.code===Rg.code)return new rp({multihash:r.multihash});if(e.code===Mg.code){if(e.digest.length===zD)return new np({multihash:r.multihash});if(e.digest.length===jD)return new ip({multihash:r.multihash})}throw new Error("Supplied PeerID CID is invalid")}ju();var op=jj;function jj(r,e,t){if(!r)return t;var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;)if(i=n.shift(),!r||(r=r[i],r===void 0))return t;return r}var UT=Ie(fs(),1),mf=Ie(So(),1);cr();var $g=(r=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(r));for(;r--;){let n=t[r]&63;n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n<63?e+="_":e+="-"}return e};Dn();mo();var Ma="/",GD=new TextEncoder().encode(Ma),zg=GD[0],Ye=class{constructor(e,t){if(typeof e=="string")this._buf=wt(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==zg)throw new Error("Invalid key")}toString(e="utf8"){return Ze(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Ye(e.join(Ma))}static random(){return new Ye($g().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Ye(e):typeof e.uint8Array=="function"?new Ye(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=GD),this._buf[0]!==zg){let e=new Uint8Array(this._buf.byteLength+1);e.fill(zg,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===zg;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],a=n[i];if(o<a)return!0;if(o>a)return!1}return t.length<n.length}reverse(){return Ye.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Ma).slice(1)}type(){return rq(this.baseNamespace())}name(){return nq(this.baseNamespace())}instance(e){return new Ye(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Ma)||(e+=Ma),e+=this.type(),new Ye(e)}parent(){let e=this.list();return e.length===1?new Ye(Ma):new Ye(e.slice(0,-1).join(Ma))}child(e){return this.toString()===Ma?e:e.toString()===Ma?this:new Ye(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Ye.withNamespaces([...this.namespaces(),...iq(e.map(t=>t.namespaces()))])}};function rq(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function nq(r){let e=r.split(":");return e[e.length-1]}function iq(r){return[].concat(...r)}var XD=Ie(fs(),1),QD=Ie(k1(),1);Qo();ju();Zo();var sq=(0,XD.default)("ipfs:repo:migrator:migration-8");function ZD(r){return r.child?ZD(r.child):r}function aq(r){try{let e=Vt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=we.decode(e).multihash.bytes,n=Vt.encode(t).slice(1).toUpperCase();return new Ye(`/${n}`,!1)}catch{return r}}function cq(r){try{let e=Vt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=Ci(e),n=Vt.encode(we.createV1(Ls,t).bytes).slice(1);return new Ye(`/${n.toUpperCase()}`,!1)}catch{return r}}async function JD(r,e,t){let n=r.blocks;await n.open();let i=ZD(n),o=await(0,QD.default)(i.queryKeys({filters:[a=>t(a).toString()!==a.toString()]}));try{let a=0;for await(let u of i.query({})){let l=t(u.key);l.toString()!==u.key.toString()&&(a+=1,sq(`Migrating Block from ${u.key} to ${l}`,await i.has(u.key)),await i.delete(u.key),await i.put(l,u.value),e(a/o*100,`Migrated Block from ${u.key} to ${l}`))}}finally{await n.close()}}var eC={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(r,e=()=>{})=>JD(r,e,aq),revert:(r,e=()=>{})=>JD(r,e,cq)};cr();cr();var uq=new TextDecoder;function I1(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function jg(r,e){let t;[t,e]=I1(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function tC(r,e){let t;return[t,e]=I1(r,e),[t&7,t>>3,e]}function fq(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=tC(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=jg(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=jg(r,n),e.Name=uq.decode(a)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=I1(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function rC(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let u,l;if([u,l,t]=tC(r,t),u!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${u}`);if(l===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=jg(r,t),n&&(i=!0)}else if(l===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let h;[h,t]=jg(r,t),n.push(fq(h))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${l}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let a={};return o&&(a.Data=o),a.Links=n||[],a}var iC=new TextEncoder,nC=2**32,lq=2**31;function hq(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=sp(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=iC.encode(r.Name);t-=n.length,e.set(n,t),t=sp(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=sp(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function oC(r){let e=pq(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=sp(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=hq(r.Links[i],t.subarray(0,n));n-=o,n=sp(t,n,o)-1,t[n]=18}return t}function dq(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+Hl(t)}if(typeof r.Name=="string"){let t=iC.encode(r.Name).length;e+=1+t+Hl(t)}return typeof r.Tsize=="number"&&(e+=1+Hl(r.Tsize)),e}function pq(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+Hl(t)}if(r.Links)for(let t of r.Links){let n=dq(t);e+=1+n+Hl(n)}return e}function sp(r,e,t){e-=Hl(t);let n=e;for(;t>=lq;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function Hl(r){return r%2===0&&r++,Math.floor((mq(r)+6)/7)}function mq(r){let e=0;return r>=nC&&(r=Math.floor(r/nC),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+yq[r]}var yq=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];cr();var gq=["Data","Links"],wq=["Hash","Name","Tsize"],sC=new TextEncoder;function bq(r,e){if(r===e)return 0;let t=r.Name?sC.encode(r.Name):[],n=e.Name?sC.encode(e.Name):[],i=t.length,o=n.length;for(let a=0,u=Math.min(i,o);a<u;++a)if(t[a]!==n[a]){i=t[a],o=n[a];break}return i<o?-1:o<i?1:0}function aC(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function cC(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!aC(r,gq))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!aC(t,wq))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&bq(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}var qg=112;function ap(r){cC(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),oC(e)}function cp(r){let e=rC(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=we.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}cr();var of=Ie(Vc(),1),sk=of.default.Reader,kq=of.default.Writer,dse=of.default.util,Yg=of.default.roots.default||(of.default.roots.default={}),ak=Yg.ipfs=(()=>{let r={};return r.pin=function(){let e={};return e.Set=function(){function t(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(i,o){return o||(o=kq.create()),i.version!=null&&Object.hasOwnProperty.call(i,"version")&&o.uint32(8).uint32(i.version),i.fanout!=null&&Object.hasOwnProperty.call(i,"fanout")&&o.uint32(16).uint32(i.fanout),i.seed!=null&&Object.hasOwnProperty.call(i,"seed")&&o.uint32(29).fixed32(i.seed),o},t.decode=function(i,o){i instanceof sk||(i=sk.create(i));for(var a=o===void 0?i.len:i.pos+o,u=new Yg.ipfs.pin.Set;i.pos<a;){var l=i.uint32();switch(l>>>3){case 1:u.version=i.uint32();break;case 2:u.fanout=i.uint32();break;case 3:u.seed=i.fixed32();break;default:i.skipType(l&7);break}}return u},t.fromObject=function(i){if(i instanceof Yg.ipfs.pin.Set)return i;var o=new Yg.ipfs.pin.Set;return i.version!=null&&(o.version=i.version>>>0),i.fanout!=null&&(o.fanout=i.fanout>>>0),i.seed!=null&&(o.seed=i.seed>>>0),o},t.toObject=function(i,o){o||(o={});var a={};return o.defaults&&(a.version=0,a.fanout=0,a.seed=0),i.version!=null&&i.hasOwnProperty("version")&&(a.version=i.version),i.fanout!=null&&i.hasOwnProperty("fanout")&&(a.fanout=i.fanout),i.seed!=null&&i.hasOwnProperty("seed")&&(a.seed=i.seed),a},t.prototype.toJSON=function(){return this.constructor.toObject(this,of.default.util.toJSONOptions)},t}(),e}(),r})();var lk=Ie(uk(),1),Qg=Ie($c(),1);Qo();cr();var hp=new Ye("/local/pins"),Xg=256,fk=8192,H1=we.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),sf={direct:"direct",recursive:"recursive"};function W1(r){return new Ye(`/${Vt.encode(r.multihash.bytes).toUpperCase().substring(1)}`)}Ku();Dn();mo();Cy();var V1=ak.pin.Set;function Iq(r){let e=r.Data;if(!e)throw new Error("No data present");let t=Qg.default.decode(e),n=Qg.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+t>e.length)throw new Error("Impossibly large set header length");let i=e.slice(n,t+n),o=V1.toObject(V1.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(o.version!==1)throw new Error(`Unsupported Set version: ${o.version}`);if(o.fanout>r.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:e.slice(t+n)}}function Tq(r,e){let t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,r,!0);let i=wt(e.toString()),o=pn([t,i],t.byteLength+i.byteLength);return(0,lk.default)(Ze(o))}async function*hk(r,e){let t=Iq(e),n=0;for(let i of e.Links){if(n<t.header.fanout){let o=i.Hash;if(!H1.equals(o)){let a=await r.get(o),u=cp(a);yield*hk(r,u)}}else yield i.Hash;n++}}async function*dp(r,e,t){let n=e.Links.find(a=>a.Name===t);if(!n)throw new Error("No link found with name "+t);let i=await r.get(n.Hash),o=cp(i);yield*hk(r,o)}function Fq(r,e){return t(e,0);async function t(n,i){let o=V1.encode({version:1,fanout:Xg,seed:i}).finish(),a=Qg.default.encode(o.length),u=pn([a,o]),l=[];for(let m=0;m<Xg;m++)l.push({Name:"",Tsize:1,Hash:H1});if(n.length<=fk){let m=n.map(k=>({link:{Name:"",Tsize:1,Hash:k.key},data:k.data||new Uint8Array})).sort((k,T)=>pv(k.link.Hash.bytes,T.link.Hash.bytes)),y=l.concat(m.map(k=>k.link));return{Data:pn([u,...m.map(k=>k.data)]),Links:y}}else{let m=n.reduce((E,k)=>{let T=Tq(i,k.key)%Xg;return E[T]=T in E?E[T].concat([k]):[k],E},[]),y=0;for(let E of m){let k=await t(E,i+1);await h(k,y),y++}return{Data:u,Links:l}}async function h(m,y){let E=ap(m),k=await bl.digest(E),T=we.createV0(k);await r.put(T,E);let O=m.Links.reduce((ce,ne)=>ce+(ne.Tsize||0),0)+E.length;l[y]={Name:"",Tsize:O,Hash:T}}}}async function G1(r,e,t){let n=await Fq(r,t.map(l=>({key:l}))),i=ap(n),o=await bl.digest(i),a=we.createV0(o);await r.put(a,i);let u=n.Links.reduce((l,h)=>l+h.Tsize,0)+i.length;return{Name:e,Tsize:u,Hash:a}}var Zg=Ie(k1(),1);Cy();Zo();Qo();async function Lq(r,e,t,n){if(!await e.has(hp))return;let i=await e.get(hp),o=we.decode(i),a=await r.get(o),u=cp(a),l=0,h=await(0,Zg.default)(dp(r,u,sf.recursive))+await(0,Zg.default)(dp(r,u,sf.direct));for await(let m of dp(r,u,sf.recursive)){l++;let y={depth:1/0};m.version!==0&&(y.version=m.version),m.code!==qg&&(y.codec=m.code),await t.put(W1(m),Fa(y)),n(l/h*100,`Migrated recursive pin ${m}`)}for await(let m of dp(r,u,sf.direct)){l++;let y={depth:0};m.version!==0&&(y.version=m.version),m.code!==qg&&(y.codec=m.code),await t.put(W1(m),Fa(y)),n(l/h*100,`Migrated direct pin ${m}`)}await r.delete(o),await e.delete(hp)}async function Oq(r,e,t,n){let i=[],o=[],a=0,u=await(0,Zg.default)(t.queryKeys({}));for await(let{key:E,value:k}of t.query({})){a++;let T=Ao(k),O=we.create(T.version||0,T.codec||qg,Ci(Vt.decode("b"+E.toString().toLowerCase().split("/").pop())));T.depth===0?(n(a/u*100,`Reverted direct pin ${O}`),o.push(O)):(n(a/u*100,`Reverted recursive pin ${O}`),i.push(O))}n(100,"Updating pin root");let l={Links:[await G1(r,sf.direct,o),await G1(r,sf.recursive,i)]},h=ap(l),m=await bl.digest(h),y=we.createV0(m);await r.put(y,h),await e.put(hp,y.bytes)}async function dk(r,e,t){let n=r.blocks,i=r.datastore,o=r.pins;await n.open(),await i.open(),await o.open();try{await t(n,i,o,e)}finally{await o.close(),await i.close(),await n.close()}}var pk={version:9,description:"Migrates pins to datastore",migrate:(r,e=()=>{})=>dk(r,e,Lq),revert:(r,e=()=>{})=>dk(r,e,Oq)};var Do={};Me(Do,{abortedError:()=>Nq,dbDeleteFailedError:()=>J1,dbOpenFailedError:()=>Y1,dbWriteFailedError:()=>X1,notFoundError:()=>Qs});var Vl=Ie(So(),1);function Y1(r){return r=r||new Error("Cannot open database"),(0,Vl.default)(r,"ERR_DB_OPEN_FAILED")}function J1(r){return r=r||new Error("Delete failed"),(0,Vl.default)(r,"ERR_DB_DELETE_FAILED")}function X1(r){return r=r||new Error("Write failed"),(0,Vl.default)(r,"ERR_DB_WRITE_FAILED")}function Qs(r){return r=r||new Error("Not Found"),(0,Vl.default)(r,"ERR_NOT_FOUND")}function Nq(r){return r=r||new Error("Aborted"),(0,Vl.default)(r,"ERR_ABORTED")}var mk=new Ye("/config"),pp=new Ye("/version");function mp(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function Rq(r,e,t){let n=await e(r);if(n)return n;let i=mp(t);return i?new Promise((o,a)=>{let u=i.store("readonly").get(r.toString());u.transaction.onabort=()=>{a(u.transaction.error)},u.transaction.oncomplete=()=>{o(Boolean(u.result))}}):!1}async function Mq(r,e,t,n){if(await t(r))return e(r);let i=mp(n);if(!i)throw Qs();return new Promise((o,a)=>{let u=i.store("readonly").get(r.toString());u.transaction.onabort=()=>{a(u.transaction.error)},u.transaction.oncomplete=()=>{if(u.result)return o(u.result);a(Qs())}})}function ew(r){let e=r.get.bind(r),t=r.has.bind(r);return r.get=n=>Mq(n,e,t,r),r.has=n=>Rq(n,t,r),r}function Q1(r){return{...r,root:ew(r.root),datastore:ew(r.datastore),pins:ew(r.pins),keys:ew(r.keys)}}mo();Dn();async function Uq(r,e,t=()=>{}){let n=mp(e);if(!n){t(`${r} did not need an upgrade`);return}t(`Upgrading ${r}`),await bk(n,(o,a)=>[{type:"del",key:o},{type:"put",key:wt(o),value:a}])}async function Kq(r,e,t=()=>{}){let n=mp(e);if(!n){t(`${r} did not need a downgrade`);return}t(`Downgrading ${r}`),await bk(n,(o,a)=>[{type:"del",key:o},{type:"put",key:Ze(o),value:a}])}function gk(r){return r.child?gk(r.child):r}async function yk(r,e,t){let n=Object.entries(r).map(([a,u])=>({key:a,backend:gk(u)})).filter(({key:a,backend:u})=>u.constructor.name==="LevelDatastore").map(({key:a,backend:u})=>({name:a,store:u}));e(0,`Migrating ${n.length} dbs`);let i=0,o=a=>{e(Math.round(i/n.length*100),a)};for(let{name:a,store:u}of n){await u.open();try{await t(a,u,o)}finally{i++,await u.close()}}e(100,`Migrated ${n.length} dbs`)}var wk={version:10,description:"Migrates datastore-level keys to binary",migrate:(r,e=()=>{})=>yk(r,e,Uq),revert:(r,e=()=>{})=>yk(r,e,Kq)};function bk(r,e){function t(n,i){let o=r.store("readwrite"),a=o.transaction,u=0,l;a.onabort=()=>i(l||a.error||new Error("aborted by user")),a.oncomplete=()=>i();function h(){let m=n[u++],y=m.key,E;try{E=m.type==="del"?o.delete(y):o.put(m.value,y)}catch(k){l=k,a.abort();return}u<n.length&&(E.onsuccess=h)}h()}return new Promise((n,i)=>{let o=r.iterator(),a=l=>l;o._deserializeKey=o._deserializeValue=a,u();function u(){let l=(h,m,y)=>{if(h||m===void 0){let E=k=>{if(k){i(k);return}n()};o.end(E);return}t(e(m,y),u)};o.next(l)}})}var Gc=new Ye("/local/filesroot");async function $q(r,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await r.root.open(),await r.datastore.open(),await r.root.has(Gc)){let t=await r.root.get(Gc);await r.datastore.put(Gc,t),await r.root.delete(Gc)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo datastore")}async function zq(r,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await r.root.open(),await r.datastore.open(),await r.datastore.has(Gc)){let t=await r.datastore.get(Gc);await r.root.put(Gc,t),await r.datastore.delete(Gc)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo root datastore")}var vk={version:11,description:"Store mfs root in the datastore",migrate:$q,revert:zq};var mx=Ie(Vc(),1);var af=Ie(Vc(),1),_k=af.default.Reader,jq=af.default.Writer,qq=af.default.util,tw=af.default.roots.default||(af.default.roots.default={}),Z1=tw.Protocols=(()=>{function r(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.protocols=qq.emptyArray,r.encode=function(t,n){if(n||(n=jq.create()),t.protocols!=null&&t.protocols.length)for(var i=0;i<t.protocols.length;++i)n.uint32(10).string(t.protocols[i]);return n},r.decode=function(t,n){t instanceof _k||(t=_k.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new tw.Protocols;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(t.string());break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof tw.Protocols)return t;var n=new tw.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var i=0;i<t.protocols.length;++i)n.protocols[i]=String(t.protocols[i])}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.protocols=[]),t.protocols&&t.protocols.length){i.protocols=[];for(var o=0;o<t.protocols.length;++o)i.protocols[o]=t.protocols[o]}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,af.default.util.toJSONOptions)},r})();var Ua=Ie(Vc(),1),Gl=Ua.default.Reader,ex=Ua.default.Writer,br=Ua.default.util,bn=Ua.default.roots.default||(Ua.default.roots.default={}),tx=bn.Addresses=(()=>{function r(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.addrs=br.emptyArray,r.prototype.certifiedRecord=null,r.encode=function(t,n){if(n||(n=ex.create()),t.addrs!=null&&t.addrs.length)for(var i=0;i<t.addrs.length;++i)bn.Addresses.Address.encode(t.addrs[i],n.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&bn.Addresses.CertifiedRecord.encode(t.certifiedRecord,n.uint32(18).fork()).ldelim(),n},r.decode=function(t,n){t instanceof Gl||(t=Gl.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new bn.Addresses;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(bn.Addresses.Address.decode(t,t.uint32()));break;case 2:o.certifiedRecord=bn.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof bn.Addresses)return t;var n=new bn.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var i=0;i<t.addrs.length;++i){if(typeof t.addrs[i]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[i]=bn.Addresses.Address.fromObject(t.addrs[i])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=bn.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addrs=[]),n.defaults&&(i.certifiedRecord=null),t.addrs&&t.addrs.length){i.addrs=[];for(var o=0;o<t.addrs.length;++o)i.addrs[o]=bn.Addresses.Address.toObject(t.addrs[o],n)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(i.certifiedRecord=bn.Addresses.CertifiedRecord.toObject(t.certifiedRecord,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ua.default.util.toJSONOptions)},r.Address=function(){function e(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}e.prototype.multiaddr=br.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:br.oneOfGetter(t=["isCertified"]),set:br.oneOfSetter(t)}),e.encode=function(i,o){return o||(o=ex.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&o.uint32(10).bytes(i.multiaddr),i.isCertified!=null&&Object.hasOwnProperty.call(i,"isCertified")&&o.uint32(16).bool(i.isCertified),o},e.decode=function(i,o){i instanceof Gl||(i=Gl.create(i));for(var a=o===void 0?i.len:i.pos+o,u=new bn.Addresses.Address;i.pos<a;){var l=i.uint32();switch(l>>>3){case 1:u.multiaddr=i.bytes();break;case 2:u.isCertified=i.bool();break;default:i.skipType(l&7);break}}return u},e.fromObject=function(i){if(i instanceof bn.Addresses.Address)return i;var o=new bn.Addresses.Address;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?br.base64.decode(i.multiaddr,o.multiaddr=br.newBuffer(br.base64.length(i.multiaddr)),0):i.multiaddr.length&&(o.multiaddr=i.multiaddr)),i.isCertified!=null&&(o.isCertified=Boolean(i.isCertified)),o},e.toObject=function(i,o){o||(o={});var a={};return o.defaults&&(o.bytes===String?a.multiaddr="":(a.multiaddr=[],o.bytes!==Array&&(a.multiaddr=br.newBuffer(a.multiaddr)))),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(a.multiaddr=o.bytes===String?br.base64.encode(i.multiaddr,0,i.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),i.isCertified!=null&&i.hasOwnProperty("isCertified")&&(a.isCertified=i.isCertified,o.oneofs&&(a._isCertified="isCertified")),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ua.default.util.toJSONOptions)},e}(),r.CertifiedRecord=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.seq=br.Long?br.Long.fromBits(0,0,!0):0,e.prototype.raw=br.newBuffer([]),e.encode=function(n,i){return i||(i=ex.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&i.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&i.uint32(18).bytes(n.raw),i},e.decode=function(n,i){n instanceof Gl||(n=Gl.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new bn.Addresses.CertifiedRecord;n.pos<o;){var u=n.uint32();switch(u>>>3){case 1:a.seq=n.uint64();break;case 2:a.raw=n.bytes();break;default:n.skipType(u&7);break}}return a},e.fromObject=function(n){if(n instanceof bn.Addresses.CertifiedRecord)return n;var i=new bn.Addresses.CertifiedRecord;return n.seq!=null&&(br.Long?(i.seq=br.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?i.seq=parseInt(n.seq,10):typeof n.seq=="number"?i.seq=n.seq:typeof n.seq=="object"&&(i.seq=new br.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?br.base64.decode(n.raw,i.raw=br.newBuffer(br.base64.length(n.raw)),0):n.raw.length&&(i.raw=n.raw)),i},e.toObject=function(n,i){i||(i={});var o={};if(i.defaults){if(br.Long){var a=new br.Long(0,0,!0);o.seq=i.longs===String?a.toString():i.longs===Number?a.toNumber():a}else o.seq=i.longs===String?"0":0;i.bytes===String?o.raw="":(o.raw=[],i.bytes!==Array&&(o.raw=br.newBuffer(o.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?o.seq=i.longs===String?String(n.seq):n.seq:o.seq=i.longs===String?br.Long.prototype.toString.call(n.seq):i.longs===Number?new br.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(o.raw=i.bytes===String?br.base64.encode(n.raw,0,n.raw.length):i.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ua.default.util.toJSONOptions)},e}(),r})();var Ka=Ie(Vc(),1),Yl=Ka.default.Reader,rx=Ka.default.Writer,Jt=Ka.default.util,Qr=Ka.default.roots.default||(Ka.default.roots.default={}),nx=Qr.Peer=(()=>{function r(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.addresses=Jt.emptyArray,r.prototype.protocols=Jt.emptyArray,r.prototype.metadata=Jt.emptyArray,r.prototype.pubKey=null,r.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(r.prototype,"_pubKey",{get:Jt.oneOfGetter(e=["pubKey"]),set:Jt.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_peerRecordEnvelope",{get:Jt.oneOfGetter(e=["peerRecordEnvelope"]),set:Jt.oneOfSetter(e)}),r.encode=function(n,i){if(i||(i=rx.create()),n.addresses!=null&&n.addresses.length)for(var o=0;o<n.addresses.length;++o)Qr.Address.encode(n.addresses[o],i.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var o=0;o<n.protocols.length;++o)i.uint32(18).string(n.protocols[o]);if(n.metadata!=null&&n.metadata.length)for(var o=0;o<n.metadata.length;++o)Qr.Metadata.encode(n.metadata[o],i.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&i.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&i.uint32(42).bytes(n.peerRecordEnvelope),i},r.decode=function(n,i){n instanceof Yl||(n=Yl.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new Qr.Peer;n.pos<o;){var u=n.uint32();switch(u>>>3){case 1:a.addresses&&a.addresses.length||(a.addresses=[]),a.addresses.push(Qr.Address.decode(n,n.uint32()));break;case 2:a.protocols&&a.protocols.length||(a.protocols=[]),a.protocols.push(n.string());break;case 3:a.metadata&&a.metadata.length||(a.metadata=[]),a.metadata.push(Qr.Metadata.decode(n,n.uint32()));break;case 4:a.pubKey=n.bytes();break;case 5:a.peerRecordEnvelope=n.bytes();break;default:n.skipType(u&7);break}}return a},r.fromObject=function(n){if(n instanceof Qr.Peer)return n;var i=new Qr.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");i.addresses=[];for(var o=0;o<n.addresses.length;++o){if(typeof n.addresses[o]!="object")throw TypeError(".Peer.addresses: object expected");i.addresses[o]=Qr.Address.fromObject(n.addresses[o])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");i.protocols=[];for(var o=0;o<n.protocols.length;++o)i.protocols[o]=String(n.protocols[o])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");i.metadata=[];for(var o=0;o<n.metadata.length;++o){if(typeof n.metadata[o]!="object")throw TypeError(".Peer.metadata: object expected");i.metadata[o]=Qr.Metadata.fromObject(n.metadata[o])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?Jt.base64.decode(n.pubKey,i.pubKey=Jt.newBuffer(Jt.base64.length(n.pubKey)),0):n.pubKey.length&&(i.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?Jt.base64.decode(n.peerRecordEnvelope,i.peerRecordEnvelope=Jt.newBuffer(Jt.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(i.peerRecordEnvelope=n.peerRecordEnvelope)),i},r.toObject=function(n,i){i||(i={});var o={};if((i.arrays||i.defaults)&&(o.addresses=[],o.protocols=[],o.metadata=[]),n.addresses&&n.addresses.length){o.addresses=[];for(var a=0;a<n.addresses.length;++a)o.addresses[a]=Qr.Address.toObject(n.addresses[a],i)}if(n.protocols&&n.protocols.length){o.protocols=[];for(var a=0;a<n.protocols.length;++a)o.protocols[a]=n.protocols[a]}if(n.metadata&&n.metadata.length){o.metadata=[];for(var a=0;a<n.metadata.length;++a)o.metadata[a]=Qr.Metadata.toObject(n.metadata[a],i)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(o.pubKey=i.bytes===String?Jt.base64.encode(n.pubKey,0,n.pubKey.length):i.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,i.oneofs&&(o._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(o.peerRecordEnvelope=i.bytes===String?Jt.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):i.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,i.oneofs&&(o._peerRecordEnvelope="peerRecordEnvelope")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ka.default.util.toJSONOptions)},r})(),jse=Qr.Address=(()=>{function r(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.multiaddr=Jt.newBuffer([]),r.prototype.isCertified=null;let e;return Object.defineProperty(r.prototype,"_isCertified",{get:Jt.oneOfGetter(e=["isCertified"]),set:Jt.oneOfSetter(e)}),r.encode=function(n,i){return i||(i=rx.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&i.uint32(16).bool(n.isCertified),i},r.decode=function(n,i){n instanceof Yl||(n=Yl.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new Qr.Address;n.pos<o;){var u=n.uint32();switch(u>>>3){case 1:a.multiaddr=n.bytes();break;case 2:a.isCertified=n.bool();break;default:n.skipType(u&7);break}}return a},r.fromObject=function(n){if(n instanceof Qr.Address)return n;var i=new Qr.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?Jt.base64.decode(n.multiaddr,i.multiaddr=Jt.newBuffer(Jt.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),n.isCertified!=null&&(i.isCertified=Boolean(n.isCertified)),i},r.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=Jt.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?Jt.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(o.isCertified=n.isCertified,i.oneofs&&(o._isCertified="isCertified")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ka.default.util.toJSONOptions)},r})(),qse=Qr.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value=Jt.newBuffer([]),r.encode=function(t,n){return n||(n=rx.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&n.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&n.uint32(18).bytes(t.value),n},r.decode=function(t,n){t instanceof Yl||(t=Yl.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Qr.Metadata;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.key=t.string();break;case 2:o.value=t.bytes();break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof Qr.Metadata)return t;var n=new Qr.Metadata;return t.key!=null&&(n.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?Jt.base64.decode(t.value,n.value=Jt.newBuffer(Jt.base64.length(t.value)),0):t.value.length&&(n.value=t.value)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.key="",n.bytes===String?i.value="":(i.value=[],n.bytes!==Array&&(i.value=Jt.newBuffer(i.value)))),t.key!=null&&t.hasOwnProperty("key")&&(i.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(i.value=n.bytes===String?Jt.base64.encode(t.value,0,t.value.length):n.bytes===Array?Array.prototype.slice.call(t.value):t.value),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ka.default.util.toJSONOptions)},r})();var cf=Ie(Vc(),1),xk=cf.default.Reader,Hq=cf.default.Writer,vr=cf.default.util,rw=cf.default.roots.default||(cf.default.roots.default={}),Ek=rw.Envelope=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.publicKey=vr.newBuffer([]),r.prototype.payloadType=vr.newBuffer([]),r.prototype.payload=vr.newBuffer([]),r.prototype.signature=vr.newBuffer([]),r.encode=function(t,n){return n||(n=Hq.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&n.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&n.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&n.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&n.uint32(42).bytes(t.signature),n},r.decode=function(t,n){t instanceof xk||(t=xk.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new rw.Envelope;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.publicKey=t.bytes();break;case 2:o.payloadType=t.bytes();break;case 3:o.payload=t.bytes();break;case 5:o.signature=t.bytes();break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof rw.Envelope)return t;var n=new rw.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?vr.base64.decode(t.publicKey,n.publicKey=vr.newBuffer(vr.base64.length(t.publicKey)),0):t.publicKey.length&&(n.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?vr.base64.decode(t.payloadType,n.payloadType=vr.newBuffer(vr.base64.length(t.payloadType)),0):t.payloadType.length&&(n.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?vr.base64.decode(t.payload,n.payload=vr.newBuffer(vr.base64.length(t.payload)),0):t.payload.length&&(n.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?vr.base64.decode(t.signature,n.signature=vr.newBuffer(vr.base64.length(t.signature)),0):t.signature.length&&(n.signature=t.signature)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.publicKey="":(i.publicKey=[],n.bytes!==Array&&(i.publicKey=vr.newBuffer(i.publicKey))),n.bytes===String?i.payloadType="":(i.payloadType=[],n.bytes!==Array&&(i.payloadType=vr.newBuffer(i.payloadType))),n.bytes===String?i.payload="":(i.payload=[],n.bytes!==Array&&(i.payload=vr.newBuffer(i.payload))),n.bytes===String?i.signature="":(i.signature=[],n.bytes!==Array&&(i.signature=vr.newBuffer(i.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(i.publicKey=n.bytes===String?vr.base64.encode(t.publicKey,0,t.publicKey.length):n.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(i.payloadType=n.bytes===String?vr.base64.encode(t.payloadType,0,t.payloadType.length):n.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(i.payload=n.bytes===String?vr.base64.encode(t.payload,0,t.payload.length):n.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(i.signature=n.bytes===String?vr.base64.encode(t.signature,0,t.signature.length):n.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,cf.default.util.toJSONOptions)},r})();var Yc=Ie(Vc(),1),nw=Yc.default.Reader,Ak=Yc.default.Writer,Mr=Yc.default.util,ds=Yc.default.roots.default||(Yc.default.roots.default={}),Sk=ds.PeerRecord=(()=>{function r(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.peerId=Mr.newBuffer([]),r.prototype.seq=Mr.Long?Mr.Long.fromBits(0,0,!0):0,r.prototype.addresses=Mr.emptyArray,r.encode=function(t,n){if(n||(n=Ak.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&n.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)ds.PeerRecord.AddressInfo.encode(t.addresses[i],n.uint32(26).fork()).ldelim();return n},r.decode=function(t,n){t instanceof nw||(t=nw.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new ds.PeerRecord;t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:o.peerId=t.bytes();break;case 2:o.seq=t.uint64();break;case 3:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(ds.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(a&7);break}}return o},r.fromObject=function(t){if(t instanceof ds.PeerRecord)return t;var n=new ds.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?Mr.base64.decode(t.peerId,n.peerId=Mr.newBuffer(Mr.base64.length(t.peerId)),0):t.peerId.length&&(n.peerId=t.peerId)),t.seq!=null&&(Mr.Long?(n.seq=Mr.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new Mr.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var i=0;i<t.addresses.length;++i){if(typeof t.addresses[i]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[i]=ds.PeerRecord.AddressInfo.fromObject(t.addresses[i])}}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addresses=[]),n.defaults)if(n.bytes===String?i.peerId="":(i.peerId=[],n.bytes!==Array&&(i.peerId=Mr.newBuffer(i.peerId))),Mr.Long){var o=new Mr.Long(0,0,!0);i.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.seq=n.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(i.peerId=n.bytes===String?Mr.base64.encode(t.peerId,0,t.peerId.length):n.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?i.seq=n.longs===String?String(t.seq):t.seq:i.seq=n.longs===String?Mr.Long.prototype.toString.call(t.seq):n.longs===Number?new Mr.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){i.addresses=[];for(var a=0;a<t.addresses.length;++a)i.addresses[a]=ds.PeerRecord.AddressInfo.toObject(t.addresses[a],n)}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Yc.default.util.toJSONOptions)},r.AddressInfo=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.multiaddr=Mr.newBuffer([]),e.encode=function(n,i){return i||(i=Ak.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),i},e.decode=function(n,i){n instanceof nw||(n=nw.create(n));for(var o=i===void 0?n.len:n.pos+i,a=new ds.PeerRecord.AddressInfo;n.pos<o;){var u=n.uint32();switch(u>>>3){case 1:a.multiaddr=n.bytes();break;default:n.skipType(u&7);break}}return a},e.fromObject=function(n){if(n instanceof ds.PeerRecord.AddressInfo)return n;var i=new ds.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?Mr.base64.decode(n.multiaddr,i.multiaddr=Mr.newBuffer(Mr.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),i},e.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=Mr.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?Mr.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Yc.default.util.toJSONOptions)},e}(),r})();var px=Ie(aI(),1);mx.default.util.Long=void 0;mx.default.configure();async function gH(r,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let a=i.toString(),[u,l,h,m,y]=a.split("/");if(l==="peers"&&!!["protos","addrs","metadata","keys"].includes(h)&&!!m)if(t[m]=t[m]||{addresses:[],protocols:[],metadata:[]},h==="protos"){let E=Z1.decode(o);t[m].protocols=E.protocols.sort()}else if(h==="addrs"){let E=tx.decode(o);t[m].addresses=E.addrs.sort((k,T)=>new px.Multiaddr(k.multiaddr).toString().localeCompare(new px.Multiaddr(T.multiaddr).toString())),E.certifiedRecord&&E.certifiedRecord.raw&&(t[m].peerRecordEnvelope=E.certifiedRecord.raw)}else h==="metadata"?t[m].metadata.push({key:y,value:o}):h==="keys"&&(t[m].pubKey=o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let i of Object.keys(t)){let o=t[i];o.metadata=o.metadata.sort((u,l)=>u.key.localeCompare(l.key));let a=nx.encode(o).finish();await r.datastore.put(new Ye(`/peers/${i}`),a)}await r.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function wH(r,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let a=i.toString(),[u,l,h]=a.split("/");t[h]=nx.decode(o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let[i,o]of Object.entries(t)){if(o.protocols&&o.protocols.length>0&&await r.datastore.put(new Ye(`/peers/protos/${i}`),Z1.encode({protocols:o.protocols}).finish()),o.addresses&&o.addresses.length>0){let a=o.peerRecordEnvelope,u;if(a){let l=Ek.decode(a),h=Sk.decode(l.payload);u={raw:a,seq:h.seq}}await r.datastore.put(new Ye(`/peers/addrs/${i}`),tx.encode({addrs:o.addresses,certifiedRecord:u}).finish())}if(o.metadata&&o.metadata.length>0)for(let{key:a,value:u}of o.metadata)await r.datastore.put(new Ye(`/peers/metadata/${i}/${a}`),u);o.pubKey&&await r.datastore.put(new Ye(`/peers/keys/${i}`),o.pubKey)}await r.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}var cI={version:12,description:"Store each peerstore peer under a single datastore key",migrate:gH,revert:wH};var uf={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},lw=[Object.assign({version:1},uf),Object.assign({version:2},uf),Object.assign({version:3},uf),Object.assign({version:4},uf),Object.assign({version:5},uf),Object.assign({version:6},uf),Object.assign({version:7},uf),eC,pk,wk,vk,cI];var uI=Ie(fs(),1);var yx={};Me(yx,{InvalidValueError:()=>th,MissingRepoOptionsError:()=>Zs,NonReversibleMigrationError:()=>Zl,NotInitializedRepoError:()=>Xc,RequiredParameterError:()=>eh});var Zl=class extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=Zl.code,this.message=e}};Zl.code="ERR_NON_REVERSIBLE_MIGRATION";var Xc=class extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=Xc.code,this.message=e}};Xc.code="ERR_NOT_INITIALIZED_REPO";var eh=class extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=eh.code,this.message=e}};eh.code="ERR_REQUIRED_PARAMETER";var th=class extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=th.code,this.message=e}};th.code="ERR_INVALID_VALUE";var Zs=class extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=Zs.code,this.message=e}};Zs.code="ERR_MISSING_REPO_OPTIONS";var gx=(0,uI.default)("ipfs:repo:migrator:repo:init");async function fI(r){if(!r)throw new Zs("Please pass repo options when trying to open a repo");let e=r.root;try{await e.open();let t=await e.has(pp),n=await e.has(mk);return!t||!n?(gx(`Version entry present: ${t}`),gx(`Config entry present: ${n}`),!1):!0}catch(t){return gx("While checking if repo is initialized error was thrown: "+t.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}mo();Dn();async function wx(r){if(!await fI(r))throw new Xc("Repo is not initialized!");let e=r.root;await e.open();try{return parseInt(Ze(await e.get(pp)))}finally{await e.close()}}async function bp(r,e){if(!e)throw new Zs("Please pass repo options when trying to open a repo");let t=e.root;await t.open(),await t.put(pp,wt(String(r))),await t.close()}var lI=Ie(fs(),1),ys=(0,lI.default)("ipfs:repo:migrator");function vH(r){return r=r||lw,!Array.isArray(r)||r.length===0?0:r[r.length-1].version}async function hI(r,e,t,n,{ignoreLock:i=!1,onProgress:o,isDryRun:a=!1,migrations:u}){if(u=u||lw,!r)throw new ko.RequiredParameterError("Path argument is required!");if(!t)throw new ko.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ko.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new ko.InvalidValueError("Version has to be positive integer!");e=Q1(e);let l=await wx(e);if(l===n){ys("Nothing to migrate.");return}if(l>n)throw new ko.InvalidValueError(`Current repo's version (${l}) is higher then toVersion (${n}), you probably wanted to revert it?`);pI(u,l,n);let h;!a&&!i&&(h=await t.repoLock.lock(r));try{for(let m of u){if(n!==void 0&&m.version>n)break;if(!(m.version<=l)){ys(`Migrating version ${m.version}`);try{if(!a){let y=()=>{};o&&(y=(E,k)=>o(m.version,E.toFixed(2),k)),await m.migrate(e,y)}}catch(y){let E=m.version-1;throw ys(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${E}`),await bp(E,e),new Error(`During migration to version ${m.version} exception was raised: ${y.stack||y.message||y}`)}ys(`Migrating to version ${m.version} finished`)}}a||await bp(n||vH(u),e),ys("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!a&&!i&&h&&await h.close()}}async function dI(r,e,t,n,{ignoreLock:i=!1,onProgress:o,isDryRun:a=!1,migrations:u}){if(u=u||lw,!r)throw new ko.RequiredParameterError("Path argument is required!");if(!t)throw new ko.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ko.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new ko.InvalidValueError("Version has to be positive integer!");e=Q1(e);let l=await wx(e);if(l===n){ys("Nothing to revert.");return}if(l<n)throw new ko.InvalidValueError(`Current repo's version (${l}) is lower then toVersion (${n}), you probably wanted to migrate it?`);pI(u,n,l,!0);let h;!a&&!i&&(h=await t.repoLock.lock(r)),ys(`Reverting from version ${l} to ${n}`);try{let m=u.slice().reverse();for(let y of m){if(y.version<=n)break;if(!(y.version>l)){ys(`Reverting migration version ${y.version}`);try{if(!a){let E=()=>{};o&&(E=(k,T)=>o(y.version,k.toFixed(2),T)),await y.revert(e,E)}}catch(E){let k=y.version;throw ys(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${k}`),await bp(k,e),E.message=`During reversion to version ${y.version} exception was raised: ${E.message}`,E}ys(`Reverting to version ${y.version} finished`)}}a||await bp(n,e),ys(`All migrations successfully reverted to version ${n}!`)}finally{!a&&!i&&h&&await h.close()}}function pI(r,e,t,n=!1){let i=0;for(let o of r){if(o.version>t)break;if(o.version>e){if(n&&!o.revert)throw new ko.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${o.version} is not reversible. Cancelling reversion.`);i++}}if(i!==t-e)throw new ko.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${t}`)}var ko=yx;var KT=Ie(gI(),1);var PI=Ie(SI(),1),DI=PI.default;var TI=Ie(fs(),1);Dn();mo();var ff=class extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=ff.code}};ff.code="ERR_LOCK_EXISTS";var Ui=class extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=Ui.code}};Ui.code="ERR_NOT_FOUND";var lf=class extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=lf.code}};lf.code="ERR_INVALID_REPO_VERSION";var vp="ERR_REPO_NOT_INITIALIZED",CI="ERR_REPO_ALREADY_OPEN",kI="ERR_REPO_ALREADY_CLOSED";async function mw(r,e,t){let n=await e(r);if(n)return n;let i=II(t);return i?new Promise((o,a)=>{let u=i.store("readonly").get(r.toString());u.transaction.onabort=()=>{a(u.transaction.error)},u.transaction.oncomplete=()=>{o(Boolean(u.result))}}):!1}async function yw(r,e,t,n){if(await t(r))return e(r);let i=II(n);if(!i)throw new Ui;return new Promise((o,a)=>{let u=i.store("readonly").get(r.toString());u.transaction.onabort=()=>{a(u.transaction.error)},u.transaction.oncomplete=()=>{if(u.result)return o(u.result);a(new Ui)}})}function II(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}var BH=(0,TI.default)("ipfs:repo:version"),vx=new Ye("version");function FI(r){return{async exists(){return mw(vx,r.has.bind(r),r)},async get(){let e=await yw(vx,r.get.bind(r),r.has.bind(r),r);return parseInt(Ze(e),10)},set(e){return r.put(vx,wt(String(e)))},async check(e){let t=await this.get();return BH("comparing version: %s and %s",t,e),t===e||(t===6&&e===7||e===6&&t===7)}}}var jI=Ie(LI(),1);var xp=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},xx=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},OI=r=>globalThis.DOMException===void 0?new xx(r):new DOMException(r),NI=r=>{let e=r.reason===void 0?OI("This operation was aborted."):r.reason;return e instanceof Error?e:OI(e)};function Ep(r,e,t,n){let i,o=new Promise((a,u)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){a(r);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:l}=n;l.aborted&&u(NI(l)),l.addEventListener("abort",()=>{u(NI(l))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof t=="function"){try{a(t())}catch(m){u(m)}return}let l=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,h=t instanceof Error?t:new xp(l);typeof r.cancel=="function"&&r.cancel(),u(h)},e),(async()=>{try{a(await r)}catch(l){u(l)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}function Ex(r,e,t){let n=0,i=r.length;for(;i>0;){let o=Math.trunc(i/2),a=n+o;t(r[a],e)<=0?(n=++a,i-=o+1):i=o}return n}var hf=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},$a,Ap=class{constructor(){$a.set(this,[])}enqueue(e,t){t={priority:0,...t};let n={priority:t.priority,run:e};if(this.size&&hf(this,$a,"f")[this.size-1].priority>=t.priority){hf(this,$a,"f").push(n);return}let i=Ex(hf(this,$a,"f"),n,(o,a)=>a.priority-o.priority);hf(this,$a,"f").splice(i,0,n)}dequeue(){let e=hf(this,$a,"f").shift();return e?.run}filter(e){return hf(this,$a,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return hf(this,$a,"f").length}};$a=new WeakMap;var Pr=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},We=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Hr,Pp,Dp,eu,Ew,Cp,ww,gs,Sp,Ki,bw,$i,kp,Zc,vw,RI,MI,zI,UI,KI,$I,_w,Ax,Sx,Aw,xw,NH=new xp,Px=class extends Error{},ea=class extends jI.default{constructor(e){var t,n,i,o;if(super(),Hr.add(this),Pp.set(this,void 0),Dp.set(this,void 0),eu.set(this,0),Ew.set(this,void 0),Cp.set(this,void 0),ww.set(this,0),gs.set(this,void 0),Sp.set(this,void 0),Ki.set(this,void 0),bw.set(this,void 0),$i.set(this,0),kp.set(this,void 0),Zc.set(this,void 0),vw.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Ap,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);Pr(this,Pp,e.carryoverConcurrencyCount,"f"),Pr(this,Dp,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),Pr(this,Ew,e.intervalCap,"f"),Pr(this,Cp,e.interval,"f"),Pr(this,Ki,new e.queueClass,"f"),Pr(this,bw,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Pr(this,vw,e.throwOnTimeout===!0,"f"),Pr(this,Zc,e.autoStart===!1,"f")}get concurrency(){return We(this,kp,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Pr(this,kp,e,"f"),We(this,Hr,"m",Aw).call(this)}async add(e,t={}){return new Promise((n,i)=>{let o=async()=>{var a,u,l;Pr(this,$i,(u=We(this,$i,"f"),u++,u),"f"),Pr(this,eu,(l=We(this,eu,"f"),l++,l),"f");try{if(!((a=t.signal)===null||a===void 0)&&a.aborted){i(new Px("The task was aborted."));return}let m=await(this.timeout===void 0&&t.timeout===void 0?e({signal:t.signal}):Ep(Promise.resolve(e({signal:t.signal})),t.timeout===void 0?this.timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?We(this,vw,"f"):t.throwOnTimeout)&&i(NH)}));n(m),this.emit("completed",m)}catch(h){i(h),this.emit("error",h)}We(this,Hr,"m",zI).call(this)};We(this,Ki,"f").enqueue(o,t),We(this,Hr,"m",_w).call(this),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return We(this,Zc,"f")?(Pr(this,Zc,!1,"f"),We(this,Hr,"m",Aw).call(this),this):this}pause(){Pr(this,Zc,!0,"f")}clear(){Pr(this,Ki,new(We(this,bw,"f")),"f")}async onEmpty(){We(this,Ki,"f").size!==0&&await We(this,Hr,"m",xw).call(this,"empty")}async onSizeLessThan(e){We(this,Ki,"f").size<e||await We(this,Hr,"m",xw).call(this,"next",()=>We(this,Ki,"f").size<e)}async onIdle(){We(this,$i,"f")===0&&We(this,Ki,"f").size===0||await We(this,Hr,"m",xw).call(this,"idle")}get size(){return We(this,Ki,"f").size}sizeBy(e){return We(this,Ki,"f").filter(e).length}get pending(){return We(this,$i,"f")}get isPaused(){return We(this,Zc,"f")}};Pp=new WeakMap,Dp=new WeakMap,eu=new WeakMap,Ew=new WeakMap,Cp=new WeakMap,ww=new WeakMap,gs=new WeakMap,Sp=new WeakMap,Ki=new WeakMap,bw=new WeakMap,$i=new WeakMap,kp=new WeakMap,Zc=new WeakMap,vw=new WeakMap,Hr=new WeakSet,RI=function(){return We(this,Dp,"f")||We(this,eu,"f")<We(this,Ew,"f")},MI=function(){return We(this,$i,"f")<We(this,kp,"f")},zI=function(){var e;Pr(this,$i,(e=We(this,$i,"f"),e--,e),"f"),We(this,Hr,"m",_w).call(this),this.emit("next")},UI=function(){this.emit("empty"),We(this,$i,"f")===0&&this.emit("idle")},KI=function(){We(this,Hr,"m",Sx).call(this),We(this,Hr,"m",Ax).call(this),Pr(this,Sp,void 0,"f")},$I=function(){let e=Date.now();if(We(this,gs,"f")===void 0){let t=We(this,ww,"f")-e;if(t<0)Pr(this,eu,We(this,Pp,"f")?We(this,$i,"f"):0,"f");else return We(this,Sp,"f")===void 0&&Pr(this,Sp,setTimeout(()=>{We(this,Hr,"m",KI).call(this)},t),"f"),!0}return!1},_w=function(){if(We(this,Ki,"f").size===0)return We(this,gs,"f")&&clearInterval(We(this,gs,"f")),Pr(this,gs,void 0,"f"),We(this,Hr,"m",UI).call(this),!1;if(!We(this,Zc,"f")){let e=!We(this,Hr,"a",$I);if(We(this,Hr,"a",RI)&&We(this,Hr,"a",MI)){let t=We(this,Ki,"f").dequeue();return t?(this.emit("active"),t(),e&&We(this,Hr,"m",Ax).call(this),!0):!1}}return!1},Ax=function(){We(this,Dp,"f")||We(this,gs,"f")!==void 0||(Pr(this,gs,setInterval(()=>{We(this,Hr,"m",Sx).call(this)},We(this,Cp,"f")),"f"),Pr(this,ww,Date.now()+We(this,Cp,"f"),"f"))},Sx=function(){We(this,eu,"f")===0&&We(this,$i,"f")===0&&We(this,gs,"f")&&(clearInterval(We(this,gs,"f")),Pr(this,gs,void 0,"f")),Pr(this,eu,We(this,Pp,"f")?We(this,$i,"f"):0,"f"),We(this,Hr,"m",Aw).call(this)},Aw=function(){for(;We(this,Hr,"m",_w).call(this););},xw=async function(e,t){return new Promise(n=>{let i=()=>{t&&!t()||(this.off(e,i),n())};this.on(e,i)})};var HI=RH;function RH(r,e,t){var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(i=n.pop(),!i)return!1;qI(i);for(var o;o=n.shift();)if(qI(o),typeof r[o]>"u"&&(r[o]={}),r=r[o],!r||typeof r!="object")return!1;return r[i]=t,!0}function qI(r){if(r=="__proto__"||r=="constructor"||r=="prototype")throw new Error("setting of prototype values not supported")}var Sw=Ie(So(),1);Dn();mo();var MH=ea.default?ea.default:ea,Dx=new Ye("config");function WI(r){let e=new MH({concurrency:1}),t={async getAll(o={}){let a=await yw(Dx,r.get.bind(r),r.has.bind(r),r);return JSON.parse(Ze(a))},async get(o,a={}){if(o==null)throw new Ui(`Key ${o} does not exist in config`);let u=await this.getAll(a),l=op(u,o);if(l===void 0)throw new Ui(`Key ${o} does not exist in config`);return l},set(o,a,u={}){if(typeof o!="string"&&!(o instanceof String))throw(0,Sw.default)(new Error("Invalid key type: "+typeof o),"ERR_INVALID_KEY");if(a===void 0||a instanceof Uint8Array)throw(0,Sw.default)(new Error("Invalid value type: "+typeof a),"ERR_INVALID_VALUE");return e.add(()=>n({key:o,value:a},u.signal))},replace(o,a={}){if(!o||o instanceof Uint8Array)throw(0,Sw.default)(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return e.add(()=>n({key:void 0,value:o},a.signal))},async exists(){return mw(Dx,r.has.bind(r),r)}};return t;async function n(o,a){if(a&&a.aborted)return;let u=o.key,l=o.value;if(u){let h=await t.getAll();return typeof h=="object"&&h!==null&&HI(h,u,l),i(h)}return i(l)}function i(o){let a=wt(JSON.stringify(o,null,2));return r.put(Dx,a)}}function Ip(r){if(typeof r!="object"||r===null)return!1;let e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function Cx(r,e={}){if(!Ip(r)&&!Array.isArray(r))throw new TypeError("Expected a plain object or array");let{deep:t,compare:n}=e,i=[],o=[],a=l=>{let h=i.indexOf(l);if(h!==-1)return o[h];let m=[];return i.push(l),o.push(m),m.push(...l.map(y=>Array.isArray(y)?a(y):Ip(y)?u(y):y)),m},u=l=>{let h=i.indexOf(l);if(h!==-1)return o[h];let m={},y=Object.keys(l).sort(n);i.push(l),o.push(m);for(let E of y){let k=l[E],T;t&&Array.isArray(k)?T=a(k):T=t&&Ip(k)?u(k):k,Object.defineProperty(m,E,{...Object.getOwnPropertyDescriptor(l,E),value:T})}return m};return Array.isArray(r)?t?a(r):r.slice():u(r)}Dn();mo();var kx=new Ye("datastore_spec");function VI(r){return{exists(){return r.has(kx)},async get(){let e=await r.get(kx);return JSON.parse(Ze(e))},async set(e){return r.put(kx,wt(JSON.stringify(Cx(e,{deep:!0}))))}}}mo();var Ix=new Ye("api");function GI(r){return{async get(){let e=await r.get(Ix);return e&&e.toString()},set(e){return r.put(Ix,wt(e.toString()))},delete(){return r.delete(Ix)}}}var XI=Ie(df(),1);var Pw=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},ih=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new Pw(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new Pw(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function tu(r={}){return KH(t=>{let n=t.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function KH(r,e){e=e??{};let t=e.onEnd,n=new ih,i,o,a,u=async()=>n.isEmpty()?a?{done:!0}:await new Promise((O,ce)=>{o=ne=>{o=null,n.push(ne);try{O(r(n))}catch(ve){ce(ve)}return i}}):r(n),l=O=>o!=null?o(O):(n.push(O),i),h=O=>(n=new ih,o!=null?o({error:O}):(n.push({error:O}),i)),m=O=>{if(a)return i;if(e?.objectMode!==!0&&O?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return l({done:!1,value:O})},y=O=>a?i:(a=!0,O!=null?h(O):l({done:!0})),E=()=>(n=new ih,y(),{done:!0}),k=O=>(y(O),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:u,return:E,throw:k,push:m,end:y,get readableLength(){return n.size}},t==null)return i;let T=i;return i={[Symbol.asyncIterator](){return this},next(){return T.next()},throw(O){return T.throw(O),t!=null&&(t(O),t=void 0),{done:!0}},return(){return T.return(),t!=null&&(t(),t=void 0),{done:!0}},push:m,end(O){return T.end(O),t!=null&&(t(O),t=void 0),i},get readableLength(){return T.readableLength}},i}var QI=Ie(oh(),1);cr();var ZI=Ie(So(),1);Rv();function eT(r){return{open(){return r.open()},close(){return r.close()},query(e,t){return r.query(e,t)},queryKeys(e,t){return r.queryKeys(e,t)},async get(e,t){let n=ru(e);return n.isIdentity?Promise.resolve(n.digest):r.get(e,t)},async*getMany(e,t){for await(let n of e)yield this.get(n,t)},async put(e,t,n){let{isIdentity:i}=ru(e);i||await r.put(e,t,n)},async*putMany(e,t){let n=tu({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await(0,QI.default)(r.putMany(async function*(){for await(let{key:o,value:a}of e)ru(o).isIdentity||(yield{key:o,value:a}),n.push({key:o,value:a})}())),n.end()}catch(o){n.end(o)}}),yield*n},has(e,t){let{isIdentity:n}=ru(e);return n?Promise.resolve(!0):r.has(e,t)},delete(e,t){let{isIdentity:n}=ru(e);return n?Promise.resolve():r.delete(e,t)},deleteMany(e,t){return r.deleteMany((0,XI.default)(e,n=>!ru(n).isIdentity),t)},batch(){let e=r.batch();return{put(t,n){let{isIdentity:i}=ru(t);i||e.put(t,n)},delete(t){let{isIdentity:n}=ru(t);n||e.delete(t)},commit:t=>e.commit(t)}}}}function ru(r){let e=we.asCID(r);if(e==null)throw(0,ZI.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==Ov.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}var tT=Ie(fs(),1),rT=(0,tT.default)("ipfs:repo:lock:memory"),nT="repo.lock",Tp={};async function zH(r){let e=r+"/"+nT;if(rT("locking %s",e),Tp[e]===!0)throw new ff(`Lock already being held for file: ${e}`);return Tp[e]=!0,{async close(){Tp[e]&&delete Tp[e]}}}async function jH(r){let e=r+"/"+nT;return rT(`checking lock: ${e}`),Boolean(Tp[e])}var iT={lock:zH,locked:jH};var oT={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:iT};var Tx={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};cr();var fT=Ie(So(),1),lT=Ie(fs(),1),Nx=Ie(aT(),1);Ed();var Dw=({enumerable:r=!0,configurable:e=!1}={})=>({enumerable:r,configurable:e,writable:!1}),Fx=function*(r,e){if(r!=null&&!(r instanceof Uint8Array))for(let[t,n]of Object.entries(r)){let i=[...e,t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[o,a]of n.entries()){let u=[...i,o],l=we.asCID(a);l?yield[u.join("/"),l]:typeof a=="object"&&(yield*Fx(a,u))}else{let o=we.asCID(n);o?yield[i.join("/"),o]:yield*Fx(n,i)}}},Bx=function*(r,e){if(r!=null)for(let[t,n]of Object.entries(r)){let i=[...e,t];if(yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!we.asCID(n))if(Array.isArray(n))for(let[o,a]of n.entries()){let u=[...i,o];yield u.join("/"),typeof a=="object"&&!we.asCID(a)&&(yield*Bx(a,u))}else yield*Bx(n,i)}},HH=(r,e)=>{let t=r;for(let[n,i]of e.entries()){if(t=t[i],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);let o=we.asCID(t);if(o)return{value:o,remaining:e.slice(n+1).join("/")}}return{value:t}},Lx=class{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:Dw(),bytes:Dw(),value:Dw(),asBlock:Dw()})}links(){return Fx(this.value,[])}tree(){return Bx(this.value,[])}get(e="/"){return HH(this.value,e.split("/").filter(Boolean))}};var Cw=({bytes:r,cid:e,value:t,codec:n})=>{let i=t!==void 0?t:n&&n.decode(r);if(i===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Lx({cid:e,bytes:r,value:i})};cr();var Cce=new TextDecoder;var Ice=new TextEncoder,Tce=2**32,Fce=2**31;cr();var Oce=new TextEncoder;var Fp=112;Ed();ju();var cT=Ie(So(),1);Qo();Zo();function Bp(r){let e=we.asCID(r);if(e==null)throw(0,cT.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let t=Vt.encode(e.multihash.bytes);return new Ye("/"+t.slice(1).toUpperCase(),!1)}function Ox(r){return Ci(Vt.decode(`b${r.toString().toLowerCase().substring(1)}`))}var uT=Ie(fs(),1);var VH=(0,uT.default)("ipfs:repo:utils:walk-dag");async function*sh(r,e,t,n){try{let i=await e.get(r,n),o=await t(r.code),a=Cw({bytes:i,cid:r,codec:o});for(let[,u]of a.links())yield u,yield*sh(u,e,t,n)}catch(i){throw VH("Could not walk DAG for CID",r.toString(),i),i}}var di={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function GH(r){let e=`Invalid type '${r}', must be one of {direct, indirect, recursive, all}`;return(0,fT.default)(new Error(e),"ERR_INVALID_PIN_TYPE")}var kw=class{constructor({pinstore:e,blockstore:t,loadCodec:n}){this.pinstore=e,this.blockstore=t,this.loadCodec=n,this.log=(0,lT.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);let n={depth:0};return e.version!==0&&(n.version=e.version),e.code!==Fp&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),this.pinstore.put(Bp(e),Fa(n))}unpin(e,t){return this.pinstore.delete(Bp(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);let n={depth:1/0};e.version!==0&&(n.version=e.version),e.code!==Fp&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),await this.pinstore.put(Bp(e),Fa(n))}async*directKeys(e){for await(let t of this.pinstore.query({filters:[n=>Ao(n.value).depth===0]})){let n=Ao(t.value),i=n.version||0,o=n.codec!=null?n.codec:Fp,a=Ox(t.key);yield{cid:we.create(i,o,a),metadata:n.metadata}}}async*recursiveKeys(e){for await(let t of this.pinstore.query({filters:[n=>Ao(n.value).depth===1/0]})){let n=Ao(t.value),i=n.version||0,o=n.codec!=null?n.codec:Fp,a=Ox(t.key);yield{cid:we.create(i,o,a),metadata:n.metadata}}}async*indirectKeys(e){for await(let{cid:t}of this.recursiveKeys())for await(let n of sh(t,this.blockstore,this.loadCodec,e)){let i=[di.recursive];(await this.isPinnedWithType(n,i)).pinned||(yield n)}}async isPinnedWithType(e,t,n){Array.isArray(t)||(t=[t]);let i=t.includes(di.all),o=t.includes(di.direct),a=t.includes(di.recursive),u=t.includes(di.indirect);if(a||o||i){let m=await(0,Nx.default)(this.pinstore.query({prefix:Bp(e).toString(),filters:[y=>{if(i)return!0;let E=Ao(y.value);return t.includes(E.depth===0?di.direct:di.recursive)}],limit:1}));if(m){let y=Ao(m.value);return{cid:e,pinned:!0,reason:y.depth===0?di.direct:di.recursive,metadata:y.metadata}}}let l=this;async function*h(m,y){for await(let{cid:E}of y)for await(let k of sh(E,l.blockstore,l.loadCodec))if(k.equals(m)){yield E;return}}if(i||u){let m=await(0,Nx.default)(h(e,this.recursiveKeys()));if(m)return{cid:e,pinned:!0,reason:di.indirect,parent:m}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t){let n=new Set,i=async(o,a)=>{if(n.has(o.toString()))return;n.add(o.toString());let u=await this.blockstore.get(o,a),l=await this.loadCodec(o.code),h=Cw({bytes:u,cid:o,codec:l});await Promise.all([...h.links()].map(([,m])=>i(m,a)))};await i(e,t)}static checkPinType(e){if(typeof e!="string"||!Object.keys(di).includes(e))throw GH(e);return!0}};var pT=Ie(Lp(),1),mT=Ie(So(),1);function yT(r,e){return{open(){return e.open()},close(){return e.close()},query(t,n){return e.query(t,n)},queryKeys(t,n){return e.queryKeys(t,n)},async get(t,n){return e.get(t,n)},async*getMany(t,n){yield*e.getMany(t,n)},async put(t,n,i){await e.put(t,n,i)},async*putMany(t,n){yield*e.putMany(t,n)},has(t,n){return e.has(t,n)},async delete(t,n){return await dT(t,r),e.delete(t,n)},deleteMany(t,n){return e.deleteMany((0,pT.default)(t,async i=>(await dT(i,r),i)),n)},batch(){return e.batch()}}}async function dT(r,e){let{pinned:t,reason:n}=await e.isPinnedWithType(r,di.all);if(t)throw(0,mT.default)(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}var Rx="lock:worker:request-read",Mx="lock:worker:release-read",Ux="lock:master:grant-read",Kx="lock:worker:request-write",$x="lock:worker:release-write",zx="lock:master:grant-write";var nu={},ah=r=>{r.addEventListener("message",e=>{ah.dispatchEvent("message",r,e)}),r.port!=null&&r.port.addEventListener("message",e=>{ah.dispatchEvent("message",r,e)})};ah.addEventListener=(r,e)=>{nu[r]==null&&(nu[r]=[]),nu[r].push(e)};ah.removeEventListener=(r,e)=>{nu[r]!=null&&(nu[r]=nu[r].filter(t=>t===e))};ah.dispatchEvent=function(r,e,t){nu[r]!=null&&nu[r].forEach(n=>n(e,t))};var jx=ah;var gT=(r,e,t,n,i)=>(o,a)=>{if(a.data.type!==t)return;let u={type:a.data.type,name:a.data.name,identifier:a.data.identifier};r.dispatchEvent(new MessageEvent(e,{data:{name:u.name,handler:async()=>(o.postMessage({type:i,name:u.name,identifier:u.identifier}),await new Promise(l=>{let h=m=>{if(m==null||m.data==null)return;let y={type:m.data.type,name:m.data.name,identifier:m.data.identifier};y.type===n&&y.identifier===u.identifier&&(o.removeEventListener("message",h),l())};o.addEventListener("message",h)}))}}))},wT=(r,e,t,n)=>async()=>{let i=$g();return globalThis.postMessage({type:e,identifier:i,name:r}),await new Promise(o=>{let a=u=>{if(u==null||u.data==null)return;let l={type:u.data.type,identifier:u.data.identifier};l.type===t&&l.identifier===i&&(globalThis.removeEventListener("message",a),o(()=>{globalThis.postMessage({type:n,identifier:i,name:r})}))};globalThis.addEventListener("message",a)})},JH={singleProcess:!1},bT=r=>{if(r=Object.assign({},JH,r),Boolean(globalThis.document)||r.singleProcess){let t=new EventTarget;return jx.addEventListener("message",gT(t,"requestReadLock",Rx,Mx,Ux)),jx.addEventListener("message",gT(t,"requestWriteLock",Kx,$x,zx)),t}return{isWorker:!0,readLock:t=>wT(t,Rx,Ux,Mx),writeLock:t=>wT(t,Kx,zx,$x)}};var pf={},iu;async function qx(r,e){let t,n=new Promise(i=>{t=i});return r.add(async()=>await Ep((async()=>await new Promise(i=>{t(()=>{i()})}))(),e.timeout)),await n}var XH=(r,e)=>{if(iu.isWorker===!0)return{readLock:iu.readLock(r,e),writeLock:iu.writeLock(r,e)};let t=new ea({concurrency:1}),n;return{async readLock(){if(n!=null)return await qx(n,e);n=new ea({concurrency:e.concurrency,autoStart:!1});let i=n,o=qx(n,e);return t.add(async()=>(i.start(),await i.onIdle().then(()=>{n===i&&(n=null)}))),await o},async writeLock(){return n=null,await qx(t,e)}}},QH={name:"lock",concurrency:1/0,timeout:846e5,global:globalThis,singleProcess:!1};function Hx(r){let e=Object.assign({},QH,r);return iu==null&&(iu=bT(e),iu.isWorker!==!0&&(iu.addEventListener("requestReadLock",t=>{pf[t.data.name]!=null&&pf[t.data.name].readLock().then(async n=>await t.data.handler().finally(()=>n()))}),iu.addEventListener("requestWriteLock",async t=>{pf[t.data.name]!=null&&pf[t.data.name].writeLock().then(async n=>await t.data.handler().finally(()=>n()))}))),pf[e.name]==null&&(pf[e.name]=XH(e.name,e)),pf[e.name]}cr();var LT=Ie(fs(),1);var OT=Ie(ET(),1);var FT=Ie(Iw(),1),iW=(...r)=>{let e;for(;r.length>0;)e=r.shift()(e);return e},BT=r=>r!=null&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),Vx=r=>r!=null&&typeof r.sink=="function"&&BT(r.source),oW=r=>e=>{let t=r.sink(e);if(t.then!=null){let n=tu({objectMode:!0});return t.then(()=>{n.end()},o=>{n.end(o)}),(0,FT.default)(n,async function*(){yield*r.source,n.end()}())}return r.source};function Gx(r,...e){if(Vx(r)){let n=r;r=()=>n.source}else if(BT(r)){let n=r;r=()=>n}let t=[r,...e];if(t.length>1&&Vx(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let n=1;n<t.length-1;n++)Vx(t[n])&&(t[n]=oW(t[n]));return iW(...t)}var Yx=Ie(Iw(),1),Tw=Ie(Lp(),1),NT=Ie(df(),1);Qo();var Op=(0,LT.default)("ipfs:repo:gc"),sW=Qs().code,aW=256,cW=new Ye("/local/filesroot");function RT({gcLock:r,pins:e,blockstore:t,root:n,loadCodec:i}){async function*o(){let a=Date.now();Op("Creating set of marked blocks");let u=await r.writeLock();try{let l=await uW({pins:e,blockstore:t,root:n,loadCodec:i}),h=t.queryKeys({});yield*fW({blockstore:t},l,h),Op(`Complete (${Date.now()-a}ms)`)}finally{u()}}return o}async function uW({pins:r,blockstore:e,loadCodec:t,root:n}){let i=async function*(){let u;try{u=await n.get(cW)}catch(h){if(h.code===sW){Op("No blocks in MFS");return}throw h}let l=we.decode(u);yield l,yield*sh(l,e,t)}(),o=(0,Yx.default)((0,Tw.default)(r.recursiveKeys(),({cid:u})=>u),r.indirectKeys(),(0,Tw.default)(r.directKeys(),({cid:u})=>u),i),a=new Set;for await(let u of(0,Yx.default)(o,i))a.add(Vt.encode(u.multihash.bytes));return a}async function*fW({blockstore:r},e,t){let n=0,i=0;yield*Gx((0,OT.default)((0,Tw.default)(t,async a=>async function(){n++;try{let l=Vt.encode(a.multihash.bytes);if(e.has(l))return null;try{await r.delete(a),i++}catch(h){return{err:new Error(`Could not delete block with CID ${a}: ${h.message}`)}}return{cid:a}}catch(l){let h=`Could delete block with CID ${a}`;return Op(h,l),{err:new Error(h+`: ${l.message}`)}}}),aW),a=>(0,NT.default)(a,Boolean)),Op(`Marked set has ${e.size} unique blocks. Blockstore has ${n} blocks. Deleted ${i} blocks.`)}var pi=(0,UT.default)("ipfs:repo"),lW=Number.MAX_SAFE_INTEGER,hW="repoAutoMigrate",Xx=class{constructor(e,t,n,i){if(typeof e!="string")throw new Error("missing repo path");if(typeof t!="function")throw new Error("missing codec loader");this.options=DI(oT,i),this.closed=!0,this.path=e,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;let o=n.blocks,a=n.pins;this.pins=new kw({pinstore:a,blockstore:o,loadCodec:t});let u=yT(this.pins,o);this.blocks=eT(u),this.version=FI(this.root),this.config=WI(this.root),this.spec=VI(this.root),this.apiAddr=GI(this.root),this.gcLock=Hx({name:e,singleProcess:this.options.repoOwner!==!1}),this.gc=RT({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){pi("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(dW(e)),await this.spec.set(pW(e)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw(0,mf.default)(new Error("repo is already open"),CI);pi("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),pi("acquired repo.lock"),!await this.version.check(12))if(await this._isAutoMigrationEnabled())await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new lf("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");pi("creating datastore"),await this.datastore.open(),pi("creating blocks"),await this.blocks.open(),pi("creating keystore"),await this.keys.open(),pi("creating pins"),await this.pins.pinstore.open(),this.closed=!1,pi("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(t){pi("error removing lock",t)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,mf.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){pi("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(t){throw t.code==="ERR_NOT_FOUND"?(0,mf.default)(new Error("repo is not initialized yet"),vp,{path:this.path}):t}if(!e)throw(0,mf.default)(new Error("repo is not initialized yet"),vp,{path:this.path})}async close(){if(this.closed)throw(0,mf.default)(new Error("repo is already closed"),kI);pi("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==vp&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),pi("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,t,n,i,o]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),MT(this.datastore),MT(this.keys)]),a=t.size+i+o;return{repoPath:this.path,storageMax:e,version:n,numObjects:t.count,repoSize:a}}throw(0,mf.default)(new Error("repo is not initialized yet"),vp,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(hW)}catch(t){if(t.code===Ui.code)e=!0;else throw t}return e}async _migrate(e,t){return await this.version.get()>e?(pi(`reverting to version ${e}`),dI(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(pi(`migrating to version ${e}`),hI(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt((0,KT.default)(e))}catch{return BigInt(lW)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(let{key:n,value:i}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(i.byteLength),t+=BigInt(n.bytes.byteLength);return{count:e,size:t}}};async function MT(r){let e=BigInt(0);for await(let t of r.query({}))e+=BigInt(t.value.byteLength),e+=BigInt(t.key.uint8Array().byteLength);return e}function $T(r,e,t,n){return new Xx(r,e,t,n)}function dW(r){return r.Datastore=Object.assign({},Tx,op(r,"datastore")),r}function pW(r){let e={...Tx.Spec,...op(r,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(t=>({mountpoint:t.mountpoint,type:t.child.type,path:t.child.path,shardFunc:t.child.shardFunc}))}}var eE=Ie(oh(),1);cr();ju();Zo();Qo();Ec();var WT=Ie(So(),1);var Qx=Ie(oh(),1),yf=Ie(df(),1),Zx=Ie(Np(),1),HT=Ie(Fw(),1),qT=(r,e)=>async function*(){yield*(await(0,HT.default)(r)).sort(e)}(),Bw=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,Qx.default)(this.putMany(e,n)),e=[],await(0,Qx.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,yf.default)(n,i=>i.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,yf.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>qT(i,o),n)),e.offset!=null){let i=0;n=(0,yf.default)(n,()=>i++>=(e.offset||0))}return e.limit!=null&&(n=(0,Zx.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,yf.default)(n,i=>i.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,yf.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>qT(i,o),n)),e.offset!=null){let i=0;n=(0,yf.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,Zx.default)(n,e.limit)),n}};function ch(r){let e=we.asCID(r);if(!e)throw(0,WT.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Ye("/"+Vt.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function ou(r){return we.createV1(Ls,Ci(Vt.decode("b"+r.toString().slice(1).toLowerCase())))}function tE(r){let e=r.substring(0,1);if(e==="/")return tE(r.substring(1));let t;e.toLowerCase()==="b"?t=o=>Vt.decode(o.toLowerCase()).subarray(2):e.toLowerCase()==="c"?t=o=>Pv.decode(o.toLowerCase()).subarray(2):e==="z"?t=o=>Pn.decode(o).subarray(2):e==="Q"?t=o=>Pn.decode("z"+o):t=o=>Vt.decode("b"+o.toLowerCase()).subarray(2);let n;for(let o=1;o<r.length;o++)try{n=t(r.substring(0,o))}catch(a){if(a.message!=="Unexpected end of data")throw a}let i="/C";return n&&(i=`/${Vt.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}function gW(r){return{...r,prefix:r.prefix?tE(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e({key:ou(t.key),value:t.value})):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e({key:ou(t.key),value:t.value},{key:ou(n.key),value:n.value})):void 0}}function wW(r){return{...r,prefix:r.prefix?tE(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e(ou(t))):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e(ou(t),ou(n))):void 0}}var Lw=class extends Bw{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(let{key:n,value:i}of this.child.query(gW(e),t))yield{key:ou(n),value:i}}async*queryKeys(e,t){for await(let n of this.child.queryKeys(wW(e),t))yield ou(n)}async get(e,t){return this.child.get(ch(e),t)}async*getMany(e,t){for await(let n of e)yield this.get(n,t)}async put(e,t,n){await this.child.put(ch(e),t,n)}async*putMany(e,t){let n=tu({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let o=this.child;await(0,eE.default)(this.child.putMany(async function*(){for await(let a of e){let u=ch(a.key);await o.has(u,t)||(yield{key:u,value:a.value}),n.push(a)}}())),n.end()}catch(o){n.end(o)}}),yield*n}has(e,t){return this.child.has(ch(e),t)}delete(e,t){return this.child.delete(ch(e),t)}deleteMany(e,t){let n=tu({objectMode:!0});return(0,eE.default)(this.child.deleteMany(async function*(){for await(let i of e)yield ch(i),n.push(i);n.end()}(),t)).catch(i=>{n.end(i)}),n}};var VT=Ie(Fw(),1),Ow=(r,e)=>async function*(){yield*(await(0,VT.default)(r)).sort(e)}();var rE=Ie(oh(),1),gf=Ie(df(),1),nE=Ie(Np(),1),ws=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,rE.default)(this.putMany(e,n)),e=[],await(0,rE.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,gf.default)(n,i=>i.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,gf.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>Ow(i,o),n)),e.offset!=null){let i=0;n=(0,gf.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,nE.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,gf.default)(n,i=>i.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,gf.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>Ow(i,o),n)),e.offset!=null){let i=0;n=(0,gf.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,nE.default)(n,e.limit)),n}};var Rp=class extends ws{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){if(!await this.has(e))throw Qs();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:new Ye(e),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Ye(e))}};var GT="SHARDING",YT="_README";var _W=Ie(Lp(),1);var Sfe=new Ye(GT),Pfe=new Ye(YT);var xW=Ie(df(),1),EW=Ie(Np(),1),AW=Ie(Iw(),1);var ta=Ie(fs(),1);function SW(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),a=o.charCodeAt(0);if(t[a]!==255)throw new TypeError(o+" is ambiguous");t[a]=i}var u=r.length,l=r.charAt(0),h=Math.log(u)/Math.log(256),m=Math.log(256)/Math.log(u);function y(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var O=0,ce=0,ne=0,ve=T.length;ne!==ve&&T[ne]===0;)ne++,O++;for(var X=(ve-ne)*m+1>>>0,me=new Uint8Array(X);ne!==ve;){for(var be=T[ne],W=0,de=X-1;(be!==0||W<ce)&&de!==-1;de--,W++)be+=256*me[de]>>>0,me[de]=be%u>>>0,be=be/u>>>0;if(be!==0)throw new Error("Non-zero carry");ce=W,ne++}for(var ge=X-ce;ge!==X&&me[ge]===0;)ge++;for(var Ue=l.repeat(O);ge<X;++ge)Ue+=r.charAt(me[ge]);return Ue}function E(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var O=0;if(T[O]!==" "){for(var ce=0,ne=0;T[O]===l;)ce++,O++;for(var ve=(T.length-O)*h+1>>>0,X=new Uint8Array(ve);T[O];){var me=t[T.charCodeAt(O)];if(me===255)return;for(var be=0,W=ve-1;(me!==0||be<ne)&&W!==-1;W--,be++)me+=u*X[W]>>>0,X[W]=me%256>>>0,me=me/256>>>0;if(me!==0)throw new Error("Non-zero carry");ne=be,O++}if(T[O]!==" "){for(var de=ve-ne;de!==ve&&X[de]===0;)de++;for(var ge=new Uint8Array(ce+(ve-de)),Ue=ce;de!==ve;)ge[Ue++]=X[de++];return ge}}}function k(T){var O=E(T);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:E,decode:k}}var PW=SW,DW=PW,XT=DW;var Ffe=new Uint8Array(0);var QT=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var iE=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},oE=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ZT(this,e)}},sE=class{constructor(e){this.decoders=e}or(e){return ZT(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ZT=(r,e)=>new sE({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),aE=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new iE(e,t,n),this.decoder=new oE(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},e4=({name:r,prefix:e,encode:t,decode:n})=>new aE(r,e,t,n),cE=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=XT(t,e);return e4({prefix:r,name:e,encode:n,decode:o=>QT(i(o))})},CW=(r,e,t,n)=>{let i={};for(let m=0;m<e.length;++m)i[e[m]]=m;let o=r.length;for(;r[o-1]==="=";)--o;let a=new Uint8Array(o*t/8|0),u=0,l=0,h=0;for(let m=0;m<o;++m){let y=i[r[m]];if(y===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<t|y,u+=t,u>=8&&(u-=8,a[h++]=255&l>>u)}if(u>=t||255&l<<8-u)throw new SyntaxError("Unexpected end of data");return a},kW=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",a=0,u=0;for(let l=0;l<r.length;++l)for(u=u<<8|r[l],a+=8;a>t;)a-=t,o+=e[i&u>>a];if(a&&(o+=e[i&u<<t-a]),n)for(;o.length*t&7;)o+="=";return o},Yn=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>e4({prefix:e,name:r,encode(i){return kW(i,n,t)},decode(i){return CW(i,n,t,r)}});var t4=cE({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Mfe=cE({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var r4=Yn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$fe=Yn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zfe=Yn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jfe=Yn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qfe=Yn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Hfe=Yn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Wfe=Yn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Vfe=Yn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Gfe=Yn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var n4=Yn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Xfe=Yn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Qfe=Yn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Zfe=Yn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});ta.default.formatters.b=r=>r==null?"undefined":t4.baseEncode(r);ta.default.formatters.t=r=>r==null?"undefined":r4.baseEncode(r);ta.default.formatters.m=r=>r==null?"undefined":n4.baseEncode(r);ta.default.formatters.p=r=>r==null?"undefined":r.toString();ta.default.formatters.c=r=>r==null?"undefined":r.toString();ta.default.formatters.k=r=>r==null?"undefined":r.toString();function i4(r){return Object.assign((0,ta.default)(r),{error:(0,ta.default)(`${r}:error`),trace:(0,ta.default)(`${r}:trace`)})}var IW=Ie(oh(),1),cle=i4("datastore:core:tiered");var om=Ie(df(),1),$F=Ie(Lp(),1),f2=Ie(Np(),1),l2=Ie(s4(),1),zF=Ie(KF(),1),Of=class extends ws{constructor(e,t={}){super(),this.db=typeof e=="string"?new zF.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw Do.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(n){throw Do.dbWriteFailedError(n)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(n){throw n.notFound?Do.notFoundError(n):Do.dbWriteFailedError(n)}return t}async has(e){try{await this.db.get(e.toString())}catch(t){if(t.notFound)return!1;throw t}return!0}async delete(e){try{await this.db.del(e.toString())}catch(t){throw Do.dbDeleteFailedError(t)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(t,n)=>{e.push({type:"put",key:t.toString(),value:n})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((o,a)=>(0,om.default)(o,a),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,a)=>(0,l2.default)(o,a),t));let{offset:n,limit:i}=e;if(n){let o=0;t=(0,om.default)(t,()=>o++>=n)}return i&&(t=(0,f2.default)(t,i)),t}queryKeys(e){let t=(0,$F.default)(this._query({values:!1,prefix:e.prefix}),({key:o})=>o);Array.isArray(e.filters)&&(t=e.filters.reduce((o,a)=>(0,om.default)(o,a),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,a)=>(0,l2.default)(o,a),t));let{offset:n,limit:i}=e;if(n){let o=0;t=(0,om.default)(t,()=>o++>=n)}return i&&(t=(0,f2.default)(t,i)),t}_query(e){let t={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){let i=e.prefix.toString();t.gte=i,t.lt=i+"\xFF"}let n=this.db.iterator(t);if(n[Symbol.asyncIterator])return yG(n);if(n.next!=null&&n.end!=null)return gG(n);throw new Error("Level returned incompatible iterator")}};async function*yG(r){for await(let[e,t]of r)yield{key:new Ye(e,!1),value:t};await r.close()}function gG(r){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,t)=>{r.next((n,i,o)=>{if(n)return t(n);if(i==null)return r.end(a=>{if(a)return t(a);e({done:!0,value:void 0})});e({done:!1,value:{key:new Ye(i,!1),value:o}})})}),return:()=>new Promise((e,t)=>{r.end(n=>{if(n)return t(n);e({done:!0,value:void 0})})})}}}}function jF(){let r=new Rp;return $T("fission-ipfs",e=>{let t={[Gd]:Ys,[J_]:Ys,[Wd]:Gs,[Hd]:Gs,[Ls]:Os,[Mv]:Os};return Promise.resolve(t[e])},{root:new Of("fission-ipfs/root",{prefix:"",version:2}),blocks:new Lw(new Of("fission-ipfs/blocks",{prefix:"",version:2})),keys:new Of("fission-ipfs/keys",{prefix:"",version:2}),datastore:r,pins:new Of("fission-ipfs/pins",{prefix:"",version:2})},{repoLock:{lock:async()=>({close:async()=>{}}),locked:async()=>!1},autoMigrate:!1})}var d2={},bG=/^((?!chrome|android).)*safari/i.test(globalThis.navigator?.userAgent||""),HF=1*60*1e3,p2=5*60*1e3,m2={retryNumber:0,lastBackoff:0,currentBackoff:1e3},WF={config:{Addresses:{Delegates:[]},Bootstrap:[],Discovery:{webRTCStar:{Enabled:!1}},Pubsub:{Enabled:!1}},preload:{enabled:!1,addresses:[]},libp2p:{peerDiscovery:[],connectionManager:{autoDial:!1}},init:{algorithm:bG?V3:void 0},repo:jF()};async function b2(r){let e=await d0();if(e.length===0)throw new Error("\u{1F4A5} Couldn't start IPFS node, peer list is empty");let t=await r.create(WF);return e.forEach(n=>{d2[n.toString()]=null,g2(t,n)}),globalThis.addEventListener("online",async()=>{(await d0()).filter(n=>{let i=n.toString();return!i.includes("/localhost/")&&!i.includes("/127.0.0.1/")&&!i.includes("/0.0.0.0/")}).forEach(n=>{g2(t,n)})}),ke.debug&&console.log("\u{1F680} Started IPFS node"),t}var h2="ipfs_peers_1661540056";function y2(){let r=`${ke.endpoints.api}/ipfs/peers`;return fetch(r).then(e=>e.json()).then(e=>Array.isArray(e)?e:[]).then(e=>e.filter(t=>rr(t)&&t.includes("/wss/"))).catch(e=>{throw new Error("\u{1F4A5} Couldn't start IPFS node, failed to fetch peer list")})}async function d0(){let r,e=await h0.default.getItem(h2);return rr(e)&&e.trim()!==""?(r=JSON.parse(e),y2().then(t=>h0.default.setItem(h2,JSON.stringify(t))).catch(t=>{console.error(t)})):(r=await y2(),await h0.default.setItem(h2,JSON.stringify(r))),r.map(_D)}function sm(r,e,t,n){let i=null;t.currentBackoff<p2?i=setTimeout(()=>qF(r,e,t,n),t.currentBackoff):i=setTimeout(()=>qF(r,e,t,n),p2),d2[e.toString()]=i,v2(r,e).then(({latency:o})=>{let a={connected:!0,lastConnectedAt:Date.now(),latency:o};p0(e,a),i&&clearTimeout(i),i===d2[e.toString()]&&setTimeout(()=>sm(r,e,m2,a),HF)}).catch(()=>{})}async function qF(r,e,t,n){let i={...n,connected:!1,latency:null};p0(e,i);try{await r.swarm.disconnect(e),await r.swarm.connect(e)}catch{}if(t.currentBackoff<p2){let o={retryNumber:t.retryNumber+1,lastBackoff:t.currentBackoff,currentBackoff:t.lastBackoff+t.currentBackoff};sm(r,e,o,i)}else sm(r,e,t,i)}function g2(r,e){v2(r,e).then(({latency:t})=>r.swarm.connect(e,{timeout:60*1e3}).then(()=>{ke.debug&&console.log(`\u{1FA90} Connected to ${e}`);let n={connected:!0,lastConnectedAt:Date.now(),latency:t};p0(e,n),setTimeout(()=>sm(r,e,m2,n),HF)})).catch(()=>{ke.debug&&console.log(`\u{1FA93} Could not connect to ${e}`);let t={connected:!1,lastConnectedAt:null,latency:null};p0(e,t),sm(r,e,m2,t)})}async function v2(r,e){return r.libp2p.ping(e).then(t=>({latency:t}))}var Nf=[],_2=!1;function p0(r,e){Nf=Nf.filter(a=>a.peer!==r).concat({peer:r,status:e});let t=Nf.every(a=>!a.status.connected),n=Nf.reduce((a,{status:u})=>a>=(u.lastConnectedAt||0)?a:u.lastConnectedAt||0,0),i=Nf.filter(a=>a.status.latency!==null),o=i.length>0?Nf.reduce((a,u)=>a+(u.status.latency||0),0)/i.length:null;_2&&(console.table(Nf),console.log("offline",t),console.log("last connected at",n===0?null:n),console.log("average latency",o))}async function vG(){_2=!0,console.log("\u{1F4E1} Monitoring IPFS peers")}function _G(){_2=!1}var w2=null;async function xG(r,e){let t={},n=[],i=await d0();e=e!==void 0,console.log("\u{1F575}\uFE0F\u200D\u2640\uFE0F Monitoring IPFS bitswap requests"),await VF(),w2=setInterval(async()=>{i.map(async a=>{let u=a.getPeerId();if(!u)return;let l=C1(u);(await r.bitswap.wantlistForPeer(l,{timeout:120*1e3})).forEach(async m=>{let y=m.toString(),E=a+"-"+y;if(!n.includes(E)){let k=!!t[y],O=`${k?"\u{1F4E1}":"\u{1F52E}"} Peer ${a} requested CID ${y}`;if(t[y]=(t[y]||0)+1,k){e&&console.log(O+` (#${t[y]})`);return}else console.log(O);let ce=performance.now();n.push(E);let ne=await r.dag.get(m),me=`loaded locally in ${(performance.now()-ce).toFixed(2)} ms`;ne.value.Links?(console.log(`\u{1F9F1} ${y} is a \u{1F449} DAG structure (${me})`),(console.table||console.log)(ne.value.Links.map(be=>Xe(be)&&Rt(be,"Name")&&Rt(be,"Hash")?{name:be.Name,cid:be.Hash.toString()}:null).filter(be=>be))):(console.log(`\u{1F4E6} ${y} is \u{1F449} Data (${me})`),console.log(ne.value))}})})},20)}async function VF(){w2&&clearInterval(w2)}var GF="https://unpkg.com/ipfs-core@0.15.4/dist/index.min.js",y0=null,EG=r=>{y0=r},gi=async()=>(y0||(y0=await YF(await JF(GF))),y0),YF=r=>b2(r),JF=async r=>{if(!r)throw new Error("This function requires a URL to a CDN");return import(r).then(e=>self.IpfsCore)};cr();var am=new Uint8Array([8,1]);var AG=r=>cs(r.Name,r.Tsize,De(r.Hash)),XF=r=>{let e=r?.value?.Data,t=r?.value?.Links?.map(AG);return Na(e,t)};var Ja=async r=>{let t=await(await gi()).add(r,{cidVersion:1,pin:ke.shouldPin});return{cid:De(t.cid),size:t.size,isFile:!0}},QF=async r=>{let e=Ah(r),t=await gi(),n=[];await E2(e);for await(let i of t.cat(e))n.push(i);return n},aa=async r=>{let e=Ah(r),t=await QF(e);return pn(t)},cm=async r=>{let e=Ah(r);return(await aa(e)).toString()},x2=async r=>{let e=Ah(r),t=await gi(),n=[];for await(let i of t.ls(e))n.push({...i,cid:De(i.cid)});return n},Rf=async r=>{let e=Ah(r),t=await gi();await E2(e);let n=await t.dag.get(e);return XF(n)},g0=async r=>{let e=await gi(),t=Na(r.Data||new Uint8Array,r.Links.map(o=>cs(o.Name||"",o.Tsize||0,o.Hash))),n=await e.dag.put(t,{storeCodec:"dag-pb",hashAlg:"sha2-256"}).then(De);await E2(n);let i=await yu(n);return{cid:n,size:i,isFile:!1}},um=async r=>{let e=Na(am,r);return g0(e)},yu=async r=>{let e=Ah(r);return(await(await gi()).files.stat(`/ipfs/${e}`)).cumulativeSize},E2=async r=>{if(!ke.shouldPin)return;let e=await gi();try{await e.pin.add(r,{recursive:!1})}catch(t){if(!Xe(t)||!rr(t.message)||!t.message||!t.message.includes("already pinned recursively"))throw t}},Ah=r=>{let e=we.asCID(r);if(!e)throw new Error(`Expected a CID class instance: Found ${r}`);return e};var Bo={};Me(Bo,{add:()=>PG,catAndDecode:()=>DG});var PG=async(r,e)=>{let t=Wv(r)?await qv(r):r,n=Uc(t);if(!By(e))return Ja(n);let i=Tr.AES_GCM,o=await sn.encrypt(n,e,i),a=Uc({alg:i,cip:o});return Ja(a)},DG=async(r,e)=>{let t=await aa(r);if(!By(e))return Ba(t);let n=Ba(t);if(!CG(n.alg)||!Fy(n.cip))throw new Error('Unexpected private block. Expected "alg" and "cip" field.');let i=n.alg,o=await sn.decrypt(n.cip,e,i);return Ba(o)};function CG(r){return rr(r)&&Object.values(Tr).includes(r)}var w0=r=>{let{name:e,cid:t,size:n}=r;return cs(e,n,De(t))},ZF=r=>{let{name:e="",cid:t,size:n,type:i}=r;return{name:e,cid:t,size:n,isFile:i!=="dir"}},Sh=r=>{let e=r.Name||"",t=r.Hash,n=r.Tsize||0;return{name:e,cid:t,size:n}},Jn=(r,e,t,n)=>({name:r,cid:e,size:n,isFile:t}),Ph=r=>r.reduce((e,t)=>(e[t.name]=t,e),{});var kG=async r=>aa(r),IG=async(r,e)=>Bo.catAndDecode(r,e),fm=async r=>Ja(r),S2=async(r,e)=>Bo.add(r,e),Ch=async r=>{let e=await Rf(r);return Ph(e.Links.map(Sh))},TG=async r=>{let e=await Rf(r),t=await Promise.all(e.Links.map(async n=>{let i=await Rf(n.Hash),o=Ph(i.Links.map(Sh));if(!!o.softLink){let l=await aa(De(o.softLink.cid)),h=new TextDecoder().decode(l);return JSON.parse(h)}let u=await Bo.catAndDecode(De(o.metadata.cid),null);return{...Sh(n),isFile:Rt(u,"isFile")?u.isFile:!1}}));return Ph(t)},Mf=async r=>{let e=Object.values(r).filter(t=>t!==void 0).map(async t=>{if(Jr(t)){let n=await Ja(JSON.stringify(t)),i=await g0(Na(am,[cs("softLink",n.size,n.cid)]));return cs(t.name,i.size,i.cid)}else return t.Hash?t:w0(t)});return um(await Promise.all(e))};var xs={};Me(xs,{checkValue:()=>tB,get:()=>LG,getAndCheckValue:()=>D2,getValue:()=>eB,getValueFromLinks:()=>P2,normalizeFileContent:()=>v0,putAndMakeLink:()=>b0,putFile:()=>BG,putTree:()=>FG});cr();var FG=async(r,e,t,n)=>{let i=await Mf(r),o=Jn("userland",i.cid,!0,i.size),[a,u]=await Promise.all([b0("metadata",t),b0("skeleton",e)]),l=n!=null?Jn("previous",n,!1,await yu(n)):void 0,h={metadata:a,skeleton:u,userland:o,previous:l},{cid:m,size:y}=await Mf(h);return{cid:m,userland:De(o.cid),metadata:De(a.cid),size:y,isFile:!1,skeleton:e}},BG=async(r,e,t)=>{let n=await fm(await v0(r)),i=Jn("userland",n.cid,!0,n.size),o=await b0("metadata",e),a=t!=null?Jn("previous",t,!1,await yu(t)):void 0,u={metadata:o,userland:i,previous:a},{cid:l,size:h}=await Mf(u);return{cid:l,userland:De(i.cid),metadata:De(o.cid),size:h,isFile:!0,skeleton:{}}},b0=async(r,e)=>{let{cid:t,size:n}=await Bo.add(e,null);return Jn(r,t,!0,n)},LG=async r=>{let e=await Ch(r),t=await D2(e,"metadata",Zu),n=t.isFile?void 0:await D2(e,"skeleton",Ag),i=e.userland?.cid||null;if(!La(i))throw new Error("Could not find userland");let o=e.previous?.cid||void 0;return{userland:i,metadata:t,previous:o,skeleton:n}},eB=async(r,e)=>{let t=we.asCID(r);if(La(r)){if(!t)return null;let n=await Ch(t);return P2(n,e)}return P2(r,e)},P2=async(r,e)=>{let t=r[e]?.cid;return t?Bo.catAndDecode(De(t),null):null},D2=async(r,e,t,n=!1)=>{let i=await eB(r,e);return tB(i,e,t,n)},tB=(r,e,t,n=!1)=>{if(!Hv(r)){if(n)return r;throw new Error(`Could not find header value: ${e}`)}if(t(r))return r;throw new Error(`Improperly formatted header value: ${e}`)};async function v0(r){if(r instanceof Uint8Array)return r;if(typeof Blob<"u"&&r instanceof Blob)return await vl.toUint8Array(r);let e=new TextEncoder;if(typeof r=="string")return e.encode(r);let t=JSON.stringify(r);return e.encode(t)}var _n={};Me(_n,{addNode:()=>yX,findLatestRevision:()=>kL,getByCID:()=>z0,getByName:()=>gX,getLatestByBareNameFilter:()=>wX,getLatestByCID:()=>CL,getLatestByName:()=>DL,getRevision:()=>e8,readNode:()=>PL});var _0=r=>lm(r)||Qa(r)||Jr(r),Qa=r=>Xe(r)&&Zu(r.metadata)&&r.metadata.isFile&&rr(r.key)&&_l(r.content),lm=r=>Xe(r)&&Zu(r.metadata)&&r.metadata.isFile===!1&&es(r.revision)&&OG(r.links)&&rB(r.skeleton),C2=r=>j_(r)&&rr(r.key)&&rr(r.pointer),OG=r=>Xe(r)&&Object.values(r).every(e=>C2(e)||Jr(e)),rB=r=>Xe(r)&&Object.values(r).every(e=>NG(e)||Jr(e)),NG=r=>Xe(r)&&_l(r.cid)&&rr(r.key)&&rB(r.subSkeleton);var xL=Ie(vL(),1);var K0=r=>Array.prototype.map.call(r,e=>("00"+e.toString(16)).slice(-2)).join(""),_L=r=>{let e=new Uint8Array(r.length/2);for(let t=0;t<e.length;t++)e[t]=parseInt(r.slice(t*2,t*2+2),16);return e};var fX=1024,lX=16,EL=320,X2=async r=>{let e="0".repeat(fX/4);return Ro(e,r)},Ro=async(r,e)=>{let t=Z2(r),n=await bo.sha256Str(e);return t.add(n),await SL(t)},nc=async(r,e,t)=>await Ro(r,`${t}${e}`),ic=async r=>{let e=await Q2(Z2(r));return hX(e)},hX=async r=>{let e=new Uint8Array(r.toBytes()),t=await bo.sha256(e);return K0(t)},AL=async(r,e=EL)=>{let t=await Q2(Z2(r),e);return await SL(t)},Q2=async(r,e=EL)=>{if(e>r.toBytes().byteLength*8)throw new Error("threshold is bigger than filter size");if(dX(r)>=e)return r;let n=r.toBytes(),i=n;do{let o=await bo.sha256(i);r.add(K0(o)),i=o}while(pX(n,r.toBytes()));return Q2(r,e)},dX=r=>{let e=new Uint32Array(r.toBytes()),t=0;for(let n=0;n<e.length;n++)t+=mX(e[n]);return t},SL=r=>K0(r.toBytes()),Z2=r=>{let e=_L(r);return xL.BloomFilter.fromBytes(e,lX)},pX=(r,e)=>{if(r.byteLength!==e.byteLength)return!1;let t=new Uint8Array(r),n=new Uint8Array(e);for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0},mX=r=>{let e=r-(r>>1&1431655765),t=(e&858993459)+(e>>2&858993459);return(t+(t>>4)&252645135)*16843009>>24};var yX=async(r,e,t)=>{let{cid:n,size:i}=await S2(e,t),o=await nc(e.bareNameFilter,t,e.revision),a=await ic(o);if(await r.add(a,n),Qa(e)){let h=await Ro(e.bareNameFilter,e.key),m=await nc(h,e.key,e.revision),y=await ic(m);await r.add(y,De(e.content))}let[u,l]=Qa(e)?[{},!0]:[e.skeleton,!1];return{cid:n,name:a,key:t,size:i,isFile:l,skeleton:u}},PL=async(r,e)=>{let t=await Bo.catAndDecode(r,e);if(!_0(t))throw new Error(`Could not parse a valid filesystem object, ${r}`);return t},gX=async(r,e,t)=>{let n=await r.get(e);return n===null?null:z0(n,t)},z0=async(r,e)=>await PL(r,e),DL=async(r,e,t)=>{let n=await r.get(e);return n===null?null:CL(r,n,t)},CL=async(r,e,t)=>{let n=await z0(e,t),i=await kL(r,n.bareNameFilter,t,n.revision);return i?.cid?await z0(De(i?.cid),t):n},wX=async(r,e,t)=>{let n=await nc(e,t,1),i=await ic(n);return DL(r,i,t)},kL=async(r,e,t,n)=>{let i=n,o=null,a=0,u=null;for(;o===null;){let l=n+Math.pow(2,a),h=await e8(r,e,t,l);h!==null?(u=h,i=l):o=l,a++}for(;i<o-1;){let l=Math.floor((o+i)/2),h=await e8(r,e,t,l);h!==null?(u=h,i=l):o=l}return u},e8=async(r,e,t,n)=>{let i=await nc(e,t,n),o=await ic(i),a=await r.get(o);return a?{cid:a,name:o,number:n}:null};var Cm=class{constructor(e){this.content=e,this.readOnly=!1}async put(){let{cid:e}=await this.putDetailed();return e}async updateContent(e){if(this.readOnly)throw new Error("File is read-only");return this.content=e,this}},Rh=Cm;var Mh=class extends Rh{static create(e){return new Mh(e)}static async fromCID(e){let t=await It.getFile(e);return new Mh(t)}static instanceOf(e){return Xe(e)&&Rt(e,"content")}async put(){let{cid:e}=await this.putDetailed();return e}async putDetailed(){return It.putFile(await xs.normalizeFileContent(this.content))}},j0=Mh;var t8=class{constructor(){this.readOnly=!1}async put(){let{cid:e}=await this.putDetailed();return e}async ls(e){let t=await this.get(e);if(t===null)throw new Error("Path does not exist");if(Or(t))throw new Error("Can not `ls` a file");return t.getLinks()}async cat(e){let t=await this.get(e);if(t===null)throw new Error("Path does not exist");if(!Or(t))throw new Error("Can not `cat` a directory");return t.content}async mkdir(e){return this.mkdirRecurse(e,()=>this.put())}async mkdirRecurse(e,t){let[n,...i]=e;if(!n)throw new Error("Invalid path: empty");let o=await this.getOrCreateDirectChild(n,t);if(Or(o))throw new Error(`There is a file along the given path: ${os(e)}`);return i.length&&await o.mkdirRecurse(i,()=>this.updateDirectChild(o,n,t)),this}async add(e,t){return await this.addRecurse(e,t,()=>this.put()),this}async addRecurse(e,t,n){let[i,...o]=e;if(!i)throw new Error("Invalid path: empty");if(o.length===0)await this.createOrUpdateChildFile(t,i,n);else{let a=await this.getOrCreateDirectChild(i,n);if(Or(a))throw new Error(`There is a file along the given path: ${os(e)}`);await a.addRecurse(o,t,async()=>{await this.updateDirectChild(a,i,n)})}return this}async rm(e){return await this.rmRecurse(e,()=>this.put()),this}async rmRecurse(e,t){let[n,...i]=e;if(!n)throw new Error("Invalid path: empty");if(i.length===0)this.removeDirectChild(n),t&&await t();else{let o=await this.getDirectChild(n);if(o===null)throw new Error("Invalid path: does not exist");if(Or(o))throw new Error(`There is a file along the given path: ${os(e)}`);await o.rmRecurse(i,async()=>{await this.updateDirectChild(o,n,t)})}return this}async mv(e,t){let n=await this.get(e);if(n===null)throw new Error(`Path does not exist: ${os(e)}`);if(t.length<1)throw new Error(`Path does not exist: ${os(t)}`);let i=t.slice(0,-1),o=await this.get(i);if(!o)await this.mkdir(i),o=await this.get(i);else if(Or(o))throw new Error(`Can not \`mv\` to a file: ${os(i)}`);return await this.rm(e),await[...t].reverse().reduce((a,u,l)=>a.then(async h=>{let m=t.slice(0,-(l+1)),y=m.length?await this.get(m):this;if(y&&!Or(y))return await y.updateDirectChild(h,u,null),y;throw new Error("Failed to update tree while moving node")}),Promise.resolve(n)),this}async exists(e){return await this.get(e)!==null}read(e){return this.get(e)}write(e,t){return this.add(e,t)}async getOrCreateDirectChild(e,t){let n=await this.getDirectChild(e);return n!==null?n:this.createChildTree(e,t)}async updateChild(e,t){let n=[];return await t.reduce(async(i,o,a)=>{let u=await i;if(n.push([o,u]),a+1===t.length)return u;let l=await u.getDirectChild(o);if(!Eg(l)){let h=t.slice(a+1);throw new Error(`Expected a tree at the given path: ${os(h)}`)}return l},Promise.resolve(this)),await n.reverse().reduce(async(i,[o,a])=>(await a.updateDirectChild(await i,o,null),a),Promise.resolve(e)),this}},Uh=t8;var oc=class extends Uh{constructor(t){super();this.type="BareTree",this.links=t,this.children={}}static async empty(){return new oc({})}static async fromCID(t){let n=Ph((await x2(t)).map(ZF));return new oc(n)}static fromLinks(t){return new oc(t)}static instanceOf(t){return Xe(t)&&Rt(t,"links")&&Rt(t,"children")&&Rt(t,"type")&&t.type==="BareTree"}async createChildTree(t,n){let i=await oc.empty(),o=this.children[t];if(o){if(Or(o))throw new Error(`There is a file at the given path: ${t}`);return o}return await this.updateDirectChild(i,t,n),i}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null)a=await j0.create(t);else if(j0.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){return It.putLinks(this.links)}async putAndUpdateLink(t,n,i){let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}async updateDirectChild(t,n,i){return this.children[n]=t,this.putAndUpdateLink(t,n,i)}removeDirectChild(t){return delete this.links[t],this.children[t]&&delete this.children[t],this}async getDirectChild(t){if(this.children[t])return this.children[t];let n=this.links[t]||null;if(n===null)return null;let i=De(n.cid),o=n.isFile?await j0.fromCID(i):await oc.fromCID(i);return this.children[t]?this.children[t]:(this.children[t]=o,o)}async get(t){let[n,...i]=t;if(!n)return this;let o=await this.getDirectChild(n);if(i.length){if(o===null||Or(o))return null}else return o;return o.get(i)}updateLink(t,n){let{cid:i,size:o,isFile:a}=n;return this.links[t]=Jn(t,i,a,o),this}getLinks(){return this.links}},sc=oc;var bX={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,a:!0,b:!0,c:!0,d:!0,e:!0,f:!0},vX=r=>bX[r]===!0,In=class{constructor(e){this.links=e,this.children={}}static create(){return new In({})}static async fromCID(e){let t=await Ch(e);return new In(t)}async putDetailed(){return Mf(this.links)}async put(){let{cid:e}=await this.putDetailed();return e}async add(e,t){if(!vX(e[0]))throw new Error("Not a valid name, must be hexadecimal");let n=this.nextTreeOrSiblingName(e);if(e===n)ke.debug&&this.links[e]?.cid!==t&&console.warn(`Adding \`${e}\` to the MMPT again with a different value. This should not happen. The original value will still be used and can loading issues on other ipfs repos. Current CID is \`${this.links[e]?.cid}\`, new CID is \`${t}\`.`);else if(n===null)this.links[e]=Jn(e,t,!0,0);else if(n.length===1)await(await this.getDirectChild(n)).add(e.slice(1),t),await this.putAndUpdateChildLink(n);else{let i=this.addEmptyChild(e[0]),o=this.links[n].cid;this.removeChild(n),await Promise.all([i.add(e.slice(1),t),i.add(n.slice(1),De(o))]),await this.putAndUpdateChildLink(e[0])}}async putAndUpdateChildLink(e){let t=this.links[e]?.cid,{cid:n,size:i}=await this.children[e].putDetailed(),o=this.links[e]?.cid;if(t!=o)return await this.putAndUpdateChildLink(e);this.links[e]=Jn(e,n,!1,i)}addEmptyChild(e){let t=In.create();return this.children[e]=t,t}async get(e){let t=this.nextTreeName(e);return t===null?null:t.length>1?De(this.links[t].cid):(await this.getDirectChild(t)).get(e.slice(1))}async exists(e){return await this.get(e)!==null}async members(){return(await Promise.all(Object.values(this.links).map(async({name:t,cid:n})=>t.length>1?[{name:t,cid:De(n)}]:(await(await In.fromCID(De(n))).members()).map(a=>({...a,name:t+a.name}))))).reduce((t,n)=>t.concat(n))}async getDirectChild(e){if(this.children[e])return this.children[e];let t=await In.fromCID(De(this.links[e].cid));return this.children[e]?this.children[e]:(this.children[e]=t,t)}removeChild(e){delete this.links[e],this.children[e]&&delete this.children[e]}directChildExists(e){return this.links[e]!==void 0||this.children[e]!==void 0}nextTreeName(e){return this.directChildExists(e[0])?e[0]:this.directChildExists(e)?e:null}nextTreeOrSiblingName(e){let t=e[0];return this.directChildExists(t)?t:Object.keys(this.links).find(n=>t===n[0])||null}};var wi=class{constructor(e){this.node=e}back(e=-1){let t=Math.abs(Math.min(e,-1));return Array.from({length:t},(n,i)=>i).reduce(n=>n.then(i=>i?wi._getPreviousVersion(i):null),Promise.resolve(this.node))}async prior(e){return wi._prior(this.node,e)}async list(e=5){let{acc:t}=await Array.from({length:e},(n,i)=>i).reduce((n,i)=>n.then(({node:o,acc:a})=>o?wi._getPreviousVersion(o).then(u=>({node:u,acc:[...a,{delta:-(i+1),timestamp:o.header.metadata.unixMeta.mtime}]})):Promise.resolve({node:null,acc:a})),wi._getPreviousVersion(this.node).then(n=>({node:n,acc:[]})));return t}static async _getPreviousVersion(e){return e.header.previous?e.constructor.fromCID(e.header.previous):Promise.resolve(null)}static async _prior(e,t){if(e.header.metadata.unixMeta.mtime<t)return e;let n=await wi._getPreviousVersion(e);return n?wi._prior(n,t):null}};var _X=r=>({mtime:Date.now(),ctime:Date.now(),mode:r?644:755,_type:r?"file":"dir"}),bu=(r,e)=>({isFile:r,version:e,unixMeta:_X(r)}),q0=r=>({...r,unixMeta:{...r.unixMeta,mtime:Date.now()}});var Yf=class extends Rh{constructor({content:t,header:n,cid:i}){super(t);this.cid=i,this.header=n,this.history=new wi(this)}static instanceOf(t){return Xe(t)&&Rt(t,"content")&&Rt(t,"header")&&H_(t.header)}static async create(t){return new Yf({content:t,header:{metadata:bu(!0,Hn)},cid:null})}static async fromCID(t){let n=await xs.get(t);return Yf.fromInfo(n,t)}static async fromInfo(t,n){let{userland:i,metadata:o,previous:a}=t,u=await It.getFile(De(i));return new Yf({content:u,header:{metadata:o,previous:a},cid:n})}async putDetailed(){let t=await xs.putFile(this.content,q0(this.header.metadata),this.cid);return this.cid=t.cid,t}},Kh=Yf;function IL(r){let e=r.slice(1);return e.length<1?null:e}var ti=class extends Uh{constructor({links:t,header:n,cid:i}){super();this.children={},this.cid=i,this.links=t,this.header=n,this.history=new wi(this)}static async empty(){return new ti({links:{},header:{metadata:bu(!1,Hn),skeleton:{}},cid:null})}static async fromCID(t){let n=await xs.get(t);if(!R3(n))throw new Error(`Could not parse a valid public tree at: ${t}`);return ti.fromInfo(n,t)}static async fromInfo(t,n){let{userland:i,metadata:o,previous:a,skeleton:u}=t,l=await It.getFileSystemLinks(De(i));return new ti({links:l,header:{metadata:o,previous:a,skeleton:u},cid:n})}static instanceOf(t){return Rt(t,"links")&&Rt(t,"header")&&N3(t.links)&&q_(t.header)}async createChildTree(t,n){let i=await ti.empty(),o=this.children[t];if(o){if(Kh.instanceOf(o))throw new Error(`There is a file at the given path: ${t}`);if(ti.instanceOf(o))return o;throw new Error(`Not a public tree at the given path: ${t}`)}return await this.updateDirectChild(i,t,n),i}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null)a=await Kh.create(t);else if(Kh.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){let t=await xs.putTree(this.links,this.header.skeleton,this.header.metadata,this.cid);return this.header.previous=this.cid||void 0,this.cid=t.cid,t}async updateDirectChild(t,n,i){if(this.readOnly)throw new Error("Tree is read-only");this.children[n]=t;let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}removeDirectChild(t){return delete this.links[t],delete this.header.skeleton[t],this.children[t]&&delete this.children[t],this}async getDirectChild(t){let n=null;if(this.children[t])return this.children[t];let i=this.header.skeleton[t]||null;if(i===null)return null;if(Sg(i)){let o=De(i.cid);n=i.isFile?await Kh.fromCID(o):await ti.fromCID(o)}else if(Jr(i))return ti.resolveSoftLink(i);return this.children[t]?this.children[t]:(n&&(this.children[t]=n),n)}async get(t){if(t.length<1)return this;let n=await this.getRecurse(this.header.skeleton,t);if(Sg(n)){let i=De(n.cid),o=await xs.get(i);return M3(o)?Kh.fromInfo(o,i):ti.fromInfo(o,i)}return n}async getRecurse(t,n){let i=n[0],o=t[i]||null,a=IL(n);if(Jr(o)){let u=await ti.resolveSoftLink(o);return a?ti.instanceOf(u)?u.get(a).then(EX):null:u}else return o===null||a===null?o:o.subSkeleton?this.getRecurse(o.subSkeleton,a):null}assignLink({name:t,link:n,skeleton:i}){this.links[t]=n,this.header.skeleton[t]=i,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(t){let[n,...i]=t.ipns.split("/"),o=Rd(i.join("/"));if(!(qs("public",o)||qs("p",o)))throw new Error("Mixing public and private soft links is not supported yet.");let u=n===await Pd({withFiles:!0})?await Jo():await Mu(n);if(!u)throw new Error(`Failed to resolve the soft link: ${t.ipns} - Could not resolve DNSLink`);let l=(await It.getSimpleLinks(De(u))).public.cid,h=Ju(o),y=await(await ti.fromCID(De(l))).get(ir(h));return y&&(y.readOnly=!0),y}getLinks(){return Object.values(this.links).reduce((t,n)=>{let i=this.header.skeleton[n.name];return{...t,[n.name]:i&&i.isFile!==void 0?{...n,isFile:i.isFile}:{...n}}},{})}updateLink(t,n){let{cid:i,metadata:o,userland:a,size:u,isFile:l,skeleton:h}=n;return this.assignLink({name:t,link:Jn(t,i,!1,u),skeleton:{cid:i,metadata:o,userland:a,subSkeleton:h,isFile:l}}),this}insertSoftLink({name:t,path:n,username:i}){let o={ipns:`${i}.files.${ke.endpoints.user}/public/${Lr(n)}`,name:t};return this.assignLink({name:t,link:o,skeleton:o}),this}};function EX(r){return r&&(r.readOnly=!0),r}var ca=ti;var Jf=class{constructor(e){this.node=e}async back(e=-1){let t=Math.min(e,-1),n=this.node.header?.revision;return n&&await this._getRevision(n+t)||null}async prior(e){return this.node.header.metadata.unixMeta.mtime<e?this.node:this._prior(this.node.header.revision-1,e)}async list(e=5){let t=this.node.header.revision;return Promise.all(Array.from({length:e},(n,i)=>{let o=i+1;return this._getRevisionInfoFromNumber(t-o).then(a=>({revisionInfo:a,delta:-o}))})).then(n=>n.filter(i=>!!i.revisionInfo)).then(n=>n.map(i=>{let o=i.revisionInfo.metadata.unixMeta.mtime;return{delta:i.delta,timestamp:o}}))}async _getRevision(e){let t=await this._getRevisionInfoFromNumber(e);return t&&await this.node.constructor.fromInfo(this.node.mmpt,this.node.key,t)}_getRevisionInfo(e){return _n.readNode(De(e.cid),this.node.key)}async _getRevisionInfoFromNumber(e){let{key:t,mmpt:n}=this.node,{bareNameFilter:i}=this.node.header,o=await _n.getRevision(n,i,t,e);return o&&this._getRevisionInfo(o)}async _prior(e,t){let n=await this._getRevisionInfoFromNumber(e);return n?.revision?n.metadata.unixMeta.mtime<t?this._getRevision(n.revision):this._prior(n.revision-1,t):null}};var vu=class extends Rh{constructor({content:t,mmpt:n,key:i,header:o}){super(t);this.header=o,this.history=new Jf(this),this.key=i,this.mmpt=n}static instanceOf(t){return Xe(t)&&Rt(t,"content")&&Rt(t,"mmpt")&&Rt(t,"header")&&Qa(t.header)}static async create(t,n,i,o){let a=await Ro(i,o),u=await sn.genKeyStr(),l=await It.putEncryptedFile(n,u);return new vu({content:n,mmpt:t,key:o,header:{bareNameFilter:a,key:u,revision:1,metadata:bu(!0,Hn),content:l.cid}})}static async fromBareNameFilter(t,n,i){let o=await _n.getLatestByBareNameFilter(t,n,i);return this.fromInfo(t,i,o)}static async fromLatestName(t,n,i){let o=await _n.getLatestByName(t,n,i);return vu.fromInfo(t,i,o)}static async fromName(t,n,i){let o=await _n.getByName(t,n,i);return vu.fromInfo(t,i,o)}static async fromInfo(t,n,i){if(!Qa(i))throw new Error("Could not parse a valid private file using the given key");let o=await It.getEncryptedFile(De(i.content),i.key);return new vu({content:o,key:n,mmpt:t,header:i})}async getName(){let{bareNameFilter:t,revision:n}=this.header,i=await nc(t,this.key,n);return ic(i)}async updateParentNameFilter(t){return this.header.bareNameFilter=await Ro(t,this.header.key),this}async updateContent(t){let n=await It.putEncryptedFile(t,this.header.key);return this.content=t,this.header={...this.header,revision:this.header.revision+1,content:n.cid},this}async putDetailed(){return _n.addNode(this.mmpt,{...this.header,metadata:q0(this.header.metadata)},this.key)}},Qi=vu;var or=class extends Uh{constructor({mmpt:t,key:n,header:i}){super();this.children={},this.header=i,this.history=new Jf(this),this.key=n,this.mmpt=t}static instanceOf(t){return Xe(t)&&Rt(t,"mmpt")&&Rt(t,"header")&&lm(t.header)}static async create(t,n,i){let o=i?await Ro(i,n):await X2(n);return new or({mmpt:t,key:n,header:{metadata:bu(!1,Hn),bareNameFilter:o,revision:1,links:{},skeleton:{}}})}static async fromBaseKey(t,n){let i=await X2(n);return this.fromBareNameFilter(t,i,n)}static async fromBareNameFilter(t,n,i){let o=await _n.getLatestByBareNameFilter(t,n,i);return this.fromInfo(t,i,o)}static async fromLatestName(t,n,i){let o=await _n.getLatestByName(t,n,i);return this.fromInfo(t,i,o)}static async fromName(t,n,i){let o=await _n.getByName(t,n,i);return this.fromInfo(t,i,o)}static async fromInfo(t,n,i){if(!lm(i))throw new Error("Could not parse a valid private tree using the given key");return new or({mmpt:t,key:n,header:i})}async createChildTree(t,n){let i=await sn.genKeyStr(),o=await or.create(this.mmpt,i,this.header.bareNameFilter),a=this.children[t];if(a){if(Qi.instanceOf(a))throw new Error(`There is a file at the given path: ${t}`);return a}return await this.updateDirectChild(o,t,n),o}async createOrUpdateChildFile(t,n,i){let o=await this.getDirectChild(n),a;if(o===null){let u=await sn.genKeyStr();a=await Qi.create(this.mmpt,t,this.header.bareNameFilter,u)}else if(Qi.instanceOf(o))a=await o.updateContent(t);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(a,n,i),a}async putDetailed(){let t=Object.assign({},this.header);return _n.addNode(this.mmpt,t,this.key)}async updateDirectChild(t,n,i){if(this.readOnly)throw new Error("Tree is read-only");await t.updateParentNameFilter(this.header.bareNameFilter),this.children[n]=t;let o=await t.putDetailed();return this.updateLink(n,o),i&&await i(),this}removeDirectChild(t){return this.header={...this.header,revision:this.header.revision+1,links:Sd(this.header.links,t),skeleton:Sd(this.header.skeleton,t)},this.children[t]&&delete this.children[t],this}async getDirectChild(t){let n=null;if(this.children[t])return this.children[t];let i=this.header.links[t];if(i===void 0)return null;if(C2(i))n=i.isFile?await Qi.fromLatestName(this.mmpt,i.pointer,i.key):await or.fromLatestName(this.mmpt,i.pointer,i.key);else if(Jr(i))return or.resolveSoftLink(i);return this.children[t]?this.children[t]:(n&&(this.children[t]=n),n)}async getName(){let{bareNameFilter:t,revision:n}=this.header,i=await nc(t,this.key,n);return ic(i)}async updateParentNameFilter(t){return this.header.bareNameFilter=await Ro(t,this.key),this}async get(t){if(t.length===0)return this;let[n,...i]=t,o=this.header.skeleton[n];return o===void 0?null:this.getRecurse(o,i)}async getRecurse(t,n){let[i,...o]=n;if(Jr(t)){let h=await or.resolveSoftLink(t);if(!h)return null;if(i===void 0)return h;if(or.instanceOf(h))return h.get(n).then(SX);throw new Error("Was expecting a directory at: "+os(n))}if(i===void 0)return AX(this.mmpt,t);let a=t.subSkeleton[i];if(a!==void 0)return this.getRecurse(a,o);let u=await _n.getLatestByCID(this.mmpt,De(t.cid),t.key);if(!lm(u))return null;let l=u.skeleton[i];return l===void 0?null:this.getRecurse(l,o)}assignLink({name:t,link:n,skeleton:i}){this.header.links[t]=n,this.header.skeleton[t]=i,this.header.revision=this.header.revision+1,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(t){let n=t.ipns.split("/")[0];if(!t.privateName||!t.key)throw new Error("Mixing public and private soft links is not supported yet.");let i=n===await Pd({withFiles:!0})?await Jo():await Mu(n);if(!i)throw new Error(`Failed to resolve the soft link: ${t.ipns} - Could not resolve DNSLink`);let o=(await It.getSimpleLinks(De(i))).private.cid,a=await In.fromCID(De(o)),u=await _n.getLatestByName(a,t.privateName,t.key);if(!u)return null;let l=u.metadata.isFile?await Qi.fromInfo(a,t.key,u):await or.fromInfo(a,t.key,u);return l&&(l.readOnly=!0),l}getLinks(){return Vv(this.header.links,t=>{if(Jr(t))return{...t};{let{key:n,...i}=t;return{...i}}})}updateLink(t,n){let{cid:i,size:o,key:a,isFile:u,skeleton:l}=n,h=n.name;return this.assignLink({name:t,link:{name:t,key:a,pointer:h,size:o,isFile:u},skeleton:{cid:i,key:a,subSkeleton:l}}),this}insertSoftLink({name:t,username:n,key:i,privateName:o}){let a={ipns:`${n}.files.${ke.endpoints.user}`,name:t,privateName:o,key:i};return this.assignLink({name:t,link:a,skeleton:a}),this}};async function AX(r,e){let t=await _n.getLatestByCID(r,De(e.cid),e.key);return Qa(t)?await Qi.fromInfo(r,e.key,t):await or.fromInfo(r,e.key,t)}function SX(r){return r&&(r.readOnly=!0),r}Ed();var NX={},ue,Dr=new Array(32).fill(void 0);Dr.push(void 0,null,!0,!1);function Xt(r){return Dr[r]}var Ds=0,W0;function $h(){return W0.byteLength===0&&(W0=new Uint8Array(ue.memory.buffer)),W0}var V0=new TextEncoder("utf-8"),PX=typeof V0.encodeInto=="function"?function(r,e){return V0.encodeInto(r,e)}:function(r,e){let t=V0.encode(r);return e.set(t),{read:r.length,written:t.length}};function G0(r,e,t){if(t===void 0){let u=V0.encode(r),l=e(u.length);return $h().subarray(l,l+u.length).set(u),Ds=u.length,l}let n=r.length,i=e(n),o=$h(),a=0;for(;a<n;a++){let u=r.charCodeAt(a);if(u>127)break;o[i+a]=u}if(a!==n){a!==0&&(r=r.slice(a)),i=t(i,n,n=a+r.length*3);let u=$h().subarray(i+a,i+n);a+=PX(r,u).written}return Ds=a,i}function DX(r){return r==null}var Y0;function Oe(){return Y0.byteLength===0&&(Y0=new Int32Array(ue.memory.buffer)),Y0}var km=Dr.length;function CX(r){r<36||(Dr[r]=km,km=r)}function Tt(r){let e=Xt(r);return CX(r),e}var NL=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});NL.decode();function _u(r,e){return NL.decode($h().subarray(r,r+e))}function At(r){km===Dr.length&&Dr.push(Dr.length+1);let e=km;return km=Dr[e],Dr[e]=r,e}function r8(r){let e=typeof r;if(e=="number"||e=="boolean"||r==null)return`${r}`;if(e=="string")return`"${r}"`;if(e=="symbol"){let i=r.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){let i=r.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(r)){let i=r.length,o="[";i>0&&(o+=r8(r[0]));for(let a=1;a<i;a++)o+=", "+r8(r[a]);return o+="]",o}let t=/\[object ([^\]]+)\]/.exec(toString.call(r)),n;if(t.length>1)n=t[1];else return toString.call(r);if(n=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:n}var TL=new FinalizationRegistry(r=>{ue.__wbindgen_export_2.get(r.dtor)(r.a,r.b)});function kX(r,e,t,n){let i={a:r,b:e,cnt:1,dtor:t},o=(...a)=>{i.cnt++;let u=i.a;i.a=0;try{return n(u,i.b,...a)}finally{--i.cnt===0?(ue.__wbindgen_export_2.get(i.dtor)(u,i.b),TL.unregister(i)):i.a=u}};return o.original=i,TL.register(o,i,i),o}function IX(r,e,t){ue._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__ha1ec3a5271c97341(r,e,At(t))}var Mn=32;function Zi(r){if(Mn==1)throw new Error("out of js stack");return Dr[--Mn]=r,Mn}function J0(r,e){let t=e(r.length*1);return $h().set(r,t/1),Ds=r.length,t}function TX(r,e){if(!(r instanceof e))throw new Error(`expected instance of ${e.name}`);return r.ptr}function n8(r,e){return $h().subarray(r/1,r/1+e)}function FL(r,e){try{return r.apply(this,e)}catch(t){ue.__wbindgen_exn_store(At(t))}}function FX(r,e,t,n){ue.wasm_bindgen__convert__closures__invoke2_mut__h1338dfb1e5ae1cd8(r,e,At(t),At(n))}var ope=Object.freeze({DagProtobuf:112,112:"DagProtobuf",DagCbor:113,113:"DagCbor",DagJson:297,297:"DagJson",Raw:85,85:"Raw"}),spe=new FinalizationRegistry(r=>ue.__wbg_foreignblockstore_free(r));var BL=new FinalizationRegistry(r=>ue.__wbg_publicdirectory_free(r)),Cs=class{static __wrap(e){let t=Object.create(Cs.prototype);return t.ptr=e,BL.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,BL.unregister(this),e}free(){let e=this.__destroy_into_raw();ue.__wbg_publicdirectory_free(e)}constructor(e){try{let t=ue.publicdirectory_new(Zi(e));return Cs.__wrap(t)}finally{Dr[Mn++]=void 0}}getNode(e,t){try{let a=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicdirectory_getNode(a,this.ptr,Zi(e),At(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw Tt(i);return Tt(n)}finally{ue.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0}}lookupNode(e,t){try{let a=ue.__wbindgen_add_to_stack_pointer(-16),u=G0(e,ue.__wbindgen_malloc,ue.__wbindgen_realloc),l=Ds;ue.publicdirectory_lookupNode(a,this.ptr,u,l,At(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw Tt(i);return Tt(n)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}store(e){try{let o=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicdirectory_store(o,this.ptr,At(e));var t=Oe()[o/4+0],n=Oe()[o/4+1],i=Oe()[o/4+2];if(i)throw Tt(n);return Tt(t)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}static load(e,t){try{let a=ue.__wbindgen_add_to_stack_pointer(-16),u=J0(e,ue.__wbindgen_malloc),l=Ds;ue.publicdirectory_load(a,u,l,At(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw Tt(i);return Tt(n)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}read(e,t){try{let a=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicdirectory_read(a,this.ptr,Zi(e),At(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw Tt(i);return Tt(n)}finally{ue.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0}}ls(e,t){try{let a=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicdirectory_ls(a,this.ptr,Zi(e),At(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw Tt(i);return Tt(n)}finally{ue.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0}}rm(e,t){try{let a=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicdirectory_rm(a,this.ptr,Zi(e),At(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw Tt(i);return Tt(n)}finally{ue.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0}}write(e,t,n,i){try{let l=ue.__wbindgen_add_to_stack_pointer(-16),h=J0(t,ue.__wbindgen_malloc),m=Ds;ue.publicdirectory_write(l,this.ptr,Zi(e),h,m,Zi(n),At(i));var o=Oe()[l/4+0],a=Oe()[l/4+1],u=Oe()[l/4+2];if(u)throw Tt(a);return Tt(o)}finally{ue.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0,Dr[Mn++]=void 0}}basicMv(e,t,n,i){try{let l=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicdirectory_basicMv(l,this.ptr,Zi(e),Zi(t),Zi(n),At(i));var o=Oe()[l/4+0],a=Oe()[l/4+1],u=Oe()[l/4+2];if(u)throw Tt(a);return Tt(o)}finally{ue.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0,Dr[Mn++]=void 0,Dr[Mn++]=void 0}}mkdir(e,t,n){try{let u=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicdirectory_mkdir(u,this.ptr,Zi(e),Zi(t),At(n));var i=Oe()[u/4+0],o=Oe()[u/4+1],a=Oe()[u/4+2];if(a)throw Tt(o);return Tt(i)}finally{ue.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0,Dr[Mn++]=void 0}}baseHistoryOn(e,t){try{let a=ue.__wbindgen_add_to_stack_pointer(-16);TX(e,Cs),ue.publicdirectory_baseHistoryOn(a,this.ptr,e.ptr,At(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw Tt(i);return Tt(n)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}previousCid(){let e=ue.publicdirectory_previousCid(this.ptr);return Tt(e)}metadata(){try{let i=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicdirectory_metadata(i,this.ptr);var e=Oe()[i/4+0],t=Oe()[i/4+1],n=Oe()[i/4+2];if(n)throw Tt(t);return Tt(e)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}asNode(){let e=ue.publicdirectory_asNode(this.ptr);return zh.__wrap(e)}getId(){try{let n=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicdirectory_getId(n,this.ptr);var e=Oe()[n/4+0],t=Oe()[n/4+1];return _u(e,t)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(e,t)}}},LL=new FinalizationRegistry(r=>ue.__wbg_publicfile_free(r)),Xf=class{static __wrap(e){let t=Object.create(Xf.prototype);return t.ptr=e,LL.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,LL.unregister(this),e}free(){let e=this.__destroy_into_raw();ue.__wbg_publicfile_free(e)}constructor(e,t){try{let a=ue.__wbindgen_add_to_stack_pointer(-16),u=J0(t,ue.__wbindgen_malloc),l=Ds;ue.publicfile_new(a,Zi(e),u,l);var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw Tt(i);return Xf.__wrap(n)}finally{ue.__wbindgen_add_to_stack_pointer(16),Dr[Mn++]=void 0}}getId(){try{let n=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicfile_getId(n,this.ptr);var e=Oe()[n/4+0],t=Oe()[n/4+1];return _u(e,t)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(e,t)}}store(e){try{let o=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicfile_store(o,this.ptr,At(e));var t=Oe()[o/4+0],n=Oe()[o/4+1],i=Oe()[o/4+2];if(i)throw Tt(n);return Tt(t)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}static load(e,t){try{let a=ue.__wbindgen_add_to_stack_pointer(-16),u=J0(e,ue.__wbindgen_malloc),l=Ds;ue.publicfile_load(a,u,l,At(t));var n=Oe()[a/4+0],i=Oe()[a/4+1],o=Oe()[a/4+2];if(o)throw Tt(i);return Tt(n)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}previousCid(){let e=ue.publicfile_previousCid(this.ptr);return Tt(e)}metadata(){try{let i=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicfile_metadata(i,this.ptr);var e=Oe()[i/4+0],t=Oe()[i/4+1],n=Oe()[i/4+2];if(n)throw Tt(t);return Tt(e)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}contentCid(){try{let i=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicfile_contentCid(i,this.ptr);var e=Oe()[i/4+0],t=Oe()[i/4+1],n=n8(e,t).slice();return ue.__wbindgen_free(e,t*1),n}finally{ue.__wbindgen_add_to_stack_pointer(16)}}},OL=new FinalizationRegistry(r=>ue.__wbg_publicnode_free(r)),zh=class{static __wrap(e){let t=Object.create(zh.prototype);return t.ptr=e,OL.register(t,t.ptr,t),t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,OL.unregister(this),e}free(){let e=this.__destroy_into_raw();ue.__wbg_publicnode_free(e)}asDir(){try{let i=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicnode_asDir(i,this.ptr);var e=Oe()[i/4+0],t=Oe()[i/4+1],n=Oe()[i/4+2];if(n)throw Tt(t);return Cs.__wrap(e)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}asFile(){try{let i=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicnode_asFile(i,this.ptr);var e=Oe()[i/4+0],t=Oe()[i/4+1],n=Oe()[i/4+2];if(n)throw Tt(t);return Xf.__wrap(e)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}isDir(){return ue.publicnode_isDir(this.ptr)!==0}isFile(){return ue.publicnode_isFile(this.ptr)!==0}getId(){try{let n=ue.__wbindgen_add_to_stack_pointer(-16);ue.publicnode_getId(n,this.ptr);var e=Oe()[n/4+0],t=Oe()[n/4+1];return _u(e,t)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(e,t)}}};async function BX(r,e){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,e)}catch(n){if(r.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}let t=await r.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{let t=await WebAssembly.instantiate(r,e);return t instanceof WebAssembly.Instance?{instance:t,module:r}:t}}function LX(){let r={};return r.wbg={},r.wbg.__wbindgen_string_get=function(e,t){let n=Xt(t),i=typeof n=="string"?n:void 0;var o=DX(i)?0:G0(i,ue.__wbindgen_malloc,ue.__wbindgen_realloc),a=Ds;Oe()[e/4+1]=a,Oe()[e/4+0]=o},r.wbg.__wbindgen_object_drop_ref=function(e){Tt(e)},r.wbg.__wbg_publicdirectory_new=function(e){let t=Cs.__wrap(e);return At(t)},r.wbg.__wbg_publicfile_new=function(e){let t=Xf.__wrap(e);return At(t)},r.wbg.__wbg_publicnode_new=function(e){let t=zh.__wrap(e);return At(t)},r.wbg.__wbindgen_string_new=function(e,t){let n=_u(e,t);return At(n)},r.wbg.__wbg_putBlock_88cdb3be9020efb7=function(e,t,n,i){var o=n8(t,n).slice();ue.__wbindgen_free(t,n*1);let a=Xt(e).putBlock(o,i>>>0);return At(a)},r.wbg.__wbg_getBlock_ef67031e09d5c6fd=function(e,t,n){var i=n8(t,n).slice();ue.__wbindgen_free(t,n*1);let o=Xt(e).getBlock(i);return At(o)},r.wbg.__wbindgen_bigint_new=function(e,t){let n=BigInt(_u(e,t));return At(n)},r.wbg.__wbindgen_number_new=function(e){return At(e)},r.wbg.__wbindgen_cb_drop=function(e){let t=Tt(e).original;return t.cnt--==1?(t.a=0,!0):!1},r.wbg.__wbg_new_693216e109162396=function(){let e=new Error;return At(e)},r.wbg.__wbg_stack_0ddaca5d1abfb52f=function(e,t){let n=Xt(t).stack,i=G0(n,ue.__wbindgen_malloc,ue.__wbindgen_realloc),o=Ds;Oe()[e/4+1]=o,Oe()[e/4+0]=i},r.wbg.__wbg_error_09919627ac0992f5=function(e,t){try{console.error(_u(e,t))}finally{ue.__wbindgen_free(e,t)}},r.wbg.__wbg_get_f0f4f1608ebf633e=function(e,t){let n=Xt(e)[t>>>0];return At(n)},r.wbg.__wbg_length_93debb0e2e184ab6=function(e){return Xt(e).length},r.wbg.__wbg_new_2ab697f1555e0dbc=function(){let e=new Array;return At(e)},r.wbg.__wbg_new_306ce8d57919e6ae=function(){let e=new Object;return At(e)},r.wbg.__wbg_push_811c8b08bf4ff9d5=function(e,t){return Xt(e).push(Xt(t))},r.wbg.__wbg_new_651776e932b7e9c7=function(e,t){let n=new Error(_u(e,t));return At(n)},r.wbg.__wbg_call_9855a4612eb496cb=function(){return FL(function(e,t,n){let i=Xt(e).call(Xt(t),Xt(n));return At(i)},arguments)},r.wbg.__wbg_getTime_7c8d3b79f51e2b87=function(e){return Xt(e).getTime()},r.wbg.__wbg_new_78403b138428b684=function(e,t){try{var n={a:e,b:t},i=(a,u)=>{let l=n.a;n.a=0;try{return FX(l,n.b,a,u)}finally{n.a=l}};let o=new Promise(i);return At(o)}finally{n.a=n.b=0}},r.wbg.__wbg_resolve_f269ce174f88b294=function(e){let t=Promise.resolve(Xt(e));return At(t)},r.wbg.__wbg_then_1c698eedca15eed6=function(e,t){let n=Xt(e).then(Xt(t));return At(n)},r.wbg.__wbg_then_4debc41d4fc92ce5=function(e,t,n){let i=Xt(e).then(Xt(t),Xt(n));return At(i)},r.wbg.__wbg_buffer_de1150f91b23aa89=function(e){let t=Xt(e).buffer;return At(t)},r.wbg.__wbg_newwithbyteoffsetandlength_9ca61320599a2c84=function(e,t,n){let i=new Uint8Array(Xt(e),t>>>0,n>>>0);return At(i)},r.wbg.__wbg_new_97cf52648830a70d=function(e){let t=new Uint8Array(Xt(e));return At(t)},r.wbg.__wbg_set_a0172b213e2469e9=function(e,t,n){Xt(e).set(Xt(t),n>>>0)},r.wbg.__wbg_length_e09c0b925ab8de5d=function(e){return Xt(e).length},r.wbg.__wbg_set_b12cd0ab82903c2f=function(){return FL(function(e,t,n){return Reflect.set(Xt(e),Xt(t),Xt(n))},arguments)},r.wbg.__wbindgen_debug_string=function(e,t){let n=r8(Xt(t)),i=G0(n,ue.__wbindgen_malloc,ue.__wbindgen_realloc),o=Ds;Oe()[e/4+1]=o,Oe()[e/4+0]=i},r.wbg.__wbindgen_throw=function(e,t){throw new Error(_u(e,t))},r.wbg.__wbindgen_memory=function(){let e=ue.memory;return At(e)},r.wbg.__wbindgen_closure_wrapper945=function(e,t,n){let i=kX(e,t,417,IX);return At(i)},r}function OX(r,e){return ue=r.exports,RL.__wbindgen_wasm_module=e,Y0=new Int32Array(ue.memory.buffer),W0=new Uint8Array(ue.memory.buffer),ue}async function RL(r){typeof r>"u"&&(r=new URL("wasm_wnfs_bg.wasm",NX.url));let e=LX();(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));let{instance:t,module:n}=await BX(await r,e);return OX(t,n)}var ML=RL;cr();ju();var RX={[Gd]:Ys,[Wd]:Gs,[Ls]:Os},Im=class{constructor(e){this.ipfs=e}async getBlock(e){let t=we.decode(e);return await this.ipfs.block.get(t)}async putBlock(e,t){let n=RX[t].name;if(n==null)throw new Error(`Error during putBlock: Unknown codec: ${MX(t)}. Is it part of the multicodec table (https://github.com/multiformats/multicodec/blob/master/table.csv)?`);let i="sha2-256",o=1,a=!1;return(await this.ipfs.block.put(e,{format:n,mhtype:i,version:o,pin:a})).bytes}};function MX(r){let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,r),`0x${Ze(e,"hex").replace(/^(00)*/,"")}`}var UL=!1;async function KL(){if(!UL){UL=!0,Vr("\u23EC Loading WNFS WASM");let r=performance.now();await ML(ke.wnfsWasmLookup(Ny));let e=performance.now()-r;Vr(`\u{1F9EA} Loaded WNFS WASM (${e.toFixed(0)}ms)`)}}var xu=class{constructor(e,t,n,i){this.root=Promise.resolve(e),this.lastRoot=e,this.store=t,this.ipfs=n,this.readOnly=i}static async empty(e){await KL();let t=new Im(e),n=new Cs(new Date);return new xu(n,t,e,!1)}static async fromCID(e,t){await KL();let n=new Im(e),i=await Cs.load(t.bytes,n);return new xu(i,n,e,!1)}async atomically(e){let t=await this.root;this.root=e(t),await this.root}async withError(e,t){try{return await e}catch(n){throw console.error(`Error during WASM operation ${t}:`),n}}async ls(e){let t=await this.root,{result:n}=await this.withError(t.getNode(e,this.store),`ls(${e.join("/")})`);if(n==null)throw new Error(`Can't ls ${e.join("/")}: No such directory`);if(!n.isDir())throw new Error(`Can't ls ${e.join("/")}: Not a directory`);let i=n.asDir(),{result:o}=await this.withError(t.ls(e,this.store),`ls(${e.join("/")})`),a={};for(let u of o){let l=await i.lookupNode(u.name,this.store),h=l.isFile()?we.decode(await l.asFile().store(this.store)):we.decode(await l.asDir().store(this.store));a[u.name]={name:u.name,isFile:u.metadata.unixMeta.kind==="file",size:0,cid:h}}return a}async mkdir(e){return await this.atomically(async t=>{let{rootDir:n}=await this.withError(t.mkdir(e,new Date,this.store),`mkdir(${e.join("/")})`);return n}),this}async cat(e){let t=await this.root,{result:n}=await this.withError(t.read(e,this.store),`read(${e.join("/")})`),i=we.decode(n),o=[];for await(let a of this.ipfs.cat(i,{preload:!1}))o.push(a);return pn(o)}async add(e,t){let n=await v0(t),{cid:i}=await this.ipfs.add(n,{cidVersion:1,hashAlg:"sha2-256",rawLeaves:!0,wrapWithDirectory:!1,preload:!1,pin:!1});return await this.atomically(async o=>{let{rootDir:a}=await this.withError(o.write(e,i.bytes,new Date,this.store),`write(${e.join("/")})`);return a}),this}async rm(e){return await this.atomically(async t=>{let{rootDir:n}=await this.withError(t.rm(e,this.store),`rm(${e.join("/")})`);return n}),this}async mv(e,t){return await this.atomically(async n=>{let{rootDir:i}=await this.withError(n.basicMv(e,t,new Date,this.store),`basicMv(${e.join("/")}, ${t.join("/")})`);return i}),this}async get(e){let t=await this.root,{result:n}=await this.withError(t.getNode(e,this.store),`getNode(${e.join("/")})`);if(n==null)return null;if(n.isFile()){let i=n.asFile(),o=await this.cat(e),a=e.slice(0,-1),u=e[e.length-1];return new o8(o,a,u,this,i)}else if(n.isDir()){let i=n.asDir();return new i8(this.readOnly,e,this,i)}throw new Error("Unknown node type. Can only handle files and directories.")}async exists(e){let t=await this.root;try{return await t.getNode(e,this.store),!0}catch{return!1}}async historyStep(){return await this.atomically(async e=>{let{rootDir:t}=await e.baseHistoryOn(this.lastRoot,this.store);return this.lastRoot=e,t}),await this.root}async put(){let t=await(await this.historyStep()).store(this.store);return we.decode(t)}async putDetailed(){return{cid:await this.put(),size:0,isFile:!1}}},i8=class{constructor(e,t,n,i){this.readOnly=e,this.directory=t,this.publicRoot=n,this.cachedDir=i}checkMutability(e){if(this.readOnly)throw new Error(`Directory is read-only. Cannot ${e}`)}async updateCache(){let t=await(await this.publicRoot.root).getNode(this.directory,this.publicRoot.store);this.cachedDir=t.asDir()}get header(){return $L(this.cachedDir)}async ls(e){return await this.publicRoot.ls([...this.directory,...e])}async mkdir(e){return this.checkMutability(`mkdir at ${[...this.directory,...e].join("/")}`),await this.publicRoot.mkdir([...this.directory,...e]),await this.updateCache(),this}async cat(e){return await this.publicRoot.cat([...this.directory,...e])}async add(e,t){return this.checkMutability(`write at ${[...this.directory,...e].join("/")}`),await this.publicRoot.add([...this.directory,...e],t),await this.updateCache(),this}async rm(e){return this.checkMutability(`remove at ${[...this.directory,...e].join("/")}`),await this.publicRoot.rm([...this.directory,...e]),await this.updateCache(),this}async mv(e,t){return this.checkMutability(`mv from ${[...this.directory,...e].join("/")} to ${[...this.directory,...t].join("/")}`),await this.publicRoot.mv([...this.directory,...e],[...this.directory,...t]),await this.updateCache(),this}async get(e){return await this.publicRoot.get([...this.directory,...e])}async exists(e){return await this.publicRoot.exists([...this.directory,...e])}async put(){await this.publicRoot.put();let t=await(await this.publicRoot.root).store(this.publicRoot.store);return we.decode(t)}async putDetailed(){return{isFile:!1,size:0,cid:await this.put()}}},o8=class extends Cm{constructor(t,n,i,o,a){super(t);this.directory=n,this.filename=i,this.publicRoot=o,this.cachedFile=a}async updateCache(){let n=await(await this.publicRoot.root).getNode([...this.directory,this.filename],this.publicRoot.store);this.cachedFile=n.asFile()}get header(){return $L(this.cachedFile)}async updateContent(t){return await super.updateContent(t),await this.updateCache(),this}async putDetailed(){let t=await this.publicRoot.root,n=[...this.directory,this.filename],{result:i}=await t.getNode(n,this.publicRoot.store);if(i==null)throw new Error(`No file at /${n.join("/")}.`);if(!i.isFile())throw new Error(`Not a file at /${n.join("/")}`);let o=i.asFile();return{isFile:!0,size:0,cid:we.decode(await o.store(this.publicRoot.store))}}};function $L(r){let e=r.metadata(),t={isFile:e.unixMeta.kind==="file",version:e.version,unixMeta:{_type:e.unixMeta.kind,ctime:Number(e.unixMeta.created),mtime:Number(e.unixMeta.modified),mode:e.unixMeta.mode}},n=r.previousCid();return n==null?{metadata:t}:{metadata:t,previous:we.decode(n)}}var jh=class{constructor({links:e,mmpt:t,privateLog:n,sharedCounter:i,sharedLinks:o,publicTree:a,prettyTree:u,privateNodes:l}){this.links=e,this.mmpt=t,this.privateLog=n,this.sharedCounter=i,this.sharedLinks=o,this.publicTree=a,this.prettyTree=u,this.privateNodes=l}static async empty({rootKey:e,wnfsWasm:t}){t&&Vr("\u26A0\uFE0F Running an EXPERIMENTAL new version of the file system: 3.0.0");let n=t?await xu.empty(await gi()):await ca.empty(),i=await sc.empty(),o=In.create(),a=Lr(un("private")),u=await or.create(o,e,null);await u.put();let l=new jh({links:{},mmpt:o,privateLog:[],sharedCounter:1,sharedLinks:{},publicTree:n,prettyTree:i,privateNodes:{[a]:u}});return await jh.storeRootKey(e),await l.setVersion(t?Ru:Hn),await Promise.all([l.updatePuttable("public",n),l.updatePuttable("p",i),l.updatePuttable("private",o)]),l}static async fromCID({cid:e,permissions:t}){let n=await It.getSimpleLinks(e),i=t?await $X(t):[],o=await zL(n),a=NS(o,Ru);a&&Vr("\u26A0\uFE0F Running an EXPERIMENTAL new version of the file system: 3.0.0");let u=n["public"]?.cid||null,l=u===null?await ca.empty():a?await xu.fromCID(await gi(),De(u)):await ca.fromCID(De(u)),h=n["p"]?await sc.fromCID(De(n["p"].cid)):await sc.empty(),m=n["private"]?.cid||null,y,E;m===null?(y=In.create(),E={}):(y=await In.fromCID(De(m)),E=await KX(i,y));let k=n["privateLog"]?.cid,T=k?await Rf(De(k)).then(me=>me.Links.map(Sh)).then(me=>me.sort((be,W)=>parseInt(be.name,10)-parseInt(W.name,10))):[],O=n["shared"]?.cid||null,ce=O?await this.getSharedLinks(De(O)):{},ne=n["sharedCounter"]?.cid||null,ve=ne?await It.getFile(De(ne)).then(me=>JSON.parse(Ze(me,"utf8"))):1,X=new jh({links:n,mmpt:y,privateLog:T,sharedCounter:ve,sharedLinks:ce,publicTree:l,prettyTree:h,privateNodes:E});return n["version"]==null&&await X.setVersion(Hn),X}async put(){let{cid:e}=await this.putDetailed();return e}async putDetailed(){return It.putLinks(this.links)}updateLink(e,t){let{cid:n,size:i,isFile:o}=t;return this.links[e]=Jn(e,n,o,i),this}async updatePuttable(e,t){return this.updateLink(e,await t.putDetailed())}static async storeRootKey(e){let t=un("private"),n=await Nc({path:t});await Yr.importSymmKey(e,n)}static async retrieveRootKey(){let e=un("private"),t=await Nc({path:e});return await Yr.exportSymmKey(t)}findPrivateNode(e){return s8(this.privateNodes,e)}async addPrivateLogEntry(e){let t=[...this.privateLog],n=Math.max(0,t.length-1),i=t[n]?.cid?(await cm(De(t[n].cid))).split(","):[];i.length+1>jh.LOG_CHUNK_SIZE&&(n=n+1,i=[]);let a=await bo.sha256Str(e.toString()),u=[...i,a],l=await It.putFile(u.join(","));t[n]={name:n.toString(),cid:l.cid,size:l.size};let h=await um(t.map(w0));this.updateLink("privateLog",{cid:h.cid,isFile:!1,size:await yu(h.cid)}),this.privateLog=t}async addShares(e){this.sharedLinks=e.reduce((o,a)=>({...o,[a.name]:a}),this.sharedLinks);let t=Object.values(this.sharedLinks).reduce((o,{cid:a,name:u,size:l})=>({...o,[u]:{cid:a,name:u,size:l}}),{}),i=await(await gi()).block.put(Uc(t),{format:Hd,mhtype:"sha2-256",pin:!1,version:1});return this.updateLink("shared",{cid:i,isFile:!1,size:await yu(i)}),this}static async getSharedLinks(e){let n=await(await gi()).block.get(e),i=Ba(n);if(!Xe(i))throw new Error("Invalid shared section, not an object");return Object.values(i).reduce((o,a)=>{if(!Xe(a))return o;let u=a.name?a.name:null,l=a.cid?De(a.cid):null;return!u||!l?o:{...o,[u]:{name:u,cid:l,size:a.size||0}}},{})}async setSharedCounter(e){this.sharedCounter=e;let{cid:t,size:n}=await It.putFile(JSON.stringify(e));return this.updateLink("sharedCounter",{cid:t,isFile:!0,size:n}),e}async bumpSharedCounter(){let e=this.sharedCounter+1;return this.setSharedCounter(e)}async setVersion(e){let t=await It.putFile(_a(e));return this.updateLink("version",t)}async getVersion(){return await zL(this.links)}},Mo=jh;Mo.LOG_CHUNK_SIZE=1020;async function zL(r){let e=await It.getFile(De(r["version"].cid));return ml(Ze(e))??US}async function UX(r,e){let t=await lg({path:e}),n=await wr(t);if(n)return n;let[i,o]=s8(r,e);if(!o)return null;let u=ir(e).slice(ir(i).length);return Qi.instanceOf(o)?u.length===0?o.header.bareNameFilter:null:(o.exists(u)||(cn(e)?await o.mkdir(u):await o.add(u,"")),o.get(u).then(l=>l?l.header.bareNameFilter:null))}function s8(r,e){let t=r[Lr(e)];if(t)return[e,t];let n=D_(e);return n?s8(r,n):[e,null]}function KX(r,e){return zX(r).reduce((t,{path:n,key:i})=>t.then(async o=>{let a,u=ir(n);if(u.length===1&&u[0]==="private")a=await or.fromBaseKey(e,i);else{let h=await UX(o,n);if(!h)throw new Error(`Was trying to load the PrivateTree for the path \`${n}\`, but couldn't find the bare name filter for it.`);cn(n)?a=await or.fromBareNameFilter(e,h,i):a=await Qi.fromBareNameFilter(e,h,i)}let l=Lr(n);return{...o,[l]:a}}),Promise.resolve({}))}async function $X(r){return ag(r).reduce(async(e,t)=>{if(qs("public",t))return e;let n=await Nc({path:t}),i=await Yr.exportSymmKey(n),o={path:t,key:i};return e.then(a=>[...a,o])},Promise.resolve([]))}function zX(r){return r.sort((e,t)=>Lr(e.path).localeCompare(Lr(t.path)))}function X0({counter:r,recipientExchangeDid:e,senderRootDid:t}){return Zy(`${e}${t}${r}`)}function jL({entryIndexCid:r,symmKey:e,symmKeyAlgo:t}){let n=r;return{algo:t,key:typeof e=="string"?wt(e,"base64pad"):e,cid:n}}async function HL({bareFilter:r,shareKey:e}){let t=await bo.sha256Str(e);return AL(await Ro(r,t))}var Q0=un("public",".well-known","exchange");async function WL(r,e,{shareWith:t,sharedBy:n}){let i=Array.isArray(t)?t:t.startsWith("did:")?[t]:await qX(t),o=r.sharedCounter||1,a=r.mmpt,u=await Promise.all(i.map(async O=>[O,await X0({counter:o,recipientExchangeDid:O,senderRootDid:n.rootDid})])),l=await sn.genKeyStr(Tr.AES_GCM),h=await or.create(a,l,null);await Promise.all(e.map(async([O,ce])=>{let ne=await ce.getName();return h.insertSoftLink({key:ce.key,name:O,privateName:ne,username:n.username})}));let m=Tr.AES_GCM,y=Object.assign({},h.header),E=await fm(await sn.encrypt(new TextEncoder().encode(JSON.stringify(y)),h.key,m));if(u.length){let O=await HL({bareFilter:y.bareNameFilter,shareKey:u[0][1]});await a.add(O,E.cid)}let k=Uc(jL({entryIndexCid:E.cid.toString(),symmKey:h.key,symmKeyAlgo:m})),T=await Promise.all(u.map(async([O,ce])=>{let{publicKey:ne}=Yu(O),ve=await Gu.encrypt(k,ne),X=await Ja(ve);return{name:ce,cid:X.cid,size:X.size}}));return await r.addShares(T),{shareId:o.toString(),sharedBy:n}}async function qX(r){let e=await Ws(r);if(!e)throw new Error("This person doesn't have a filesystem yet.");let n=(await It.getSimpleLinks(e))["p"]?.cid||null;if(!n)throw new Error("This person's filesystem doesn't have a pretty tree.");let i=await sc.fromCID(De(n)),o=ir(Ju(Q0)),a=await i.get(o);return a&&a instanceof sc?Object.keys(a.getLinks()):[]}var a8={};Me(a8,{NoPermissionError:()=>Qf});var Qf=class extends Error{constructor(e){super(e),this.name="NoPermissionError"}};var qh=class{constructor({root:e,permissions:t,localOnly:n}){this.localOnly=n||!1,this.proofs={},this.publishHooks=[],this.root=e,this._publishWhenOnline=[],this._publishing=!1,this._whenOnline=this._whenOnline.bind(this),this._beforeLeaving=this._beforeLeaving.bind(this);let i=globalThis;i.filesystems=i.filesystems||[],i.filesystems.push(this),t&&t.app&&t.app.creator&&t.app.name&&(this.appPath=WX(t));let o=async u=>{await pd(u.toString()),Vr("\u{1F4D3} Adding to the CID ledger:",u.toString())},a=B3(3e3,!1,(u,l)=>{if(globalThis.navigator.onLine)return this._publishing=[u,!0],T_(u,l).then(()=>{this._publishing&&this._publishing[0]===u&&(this._publishing=!1)});this._publishWhenOnline.push([u,l])},!1);this.publishHooks.push(o),this.publishHooks.push(a),this.localOnly||(globalThis.addEventListener("online",this._whenOnline),globalThis.addEventListener("beforeunload",this._beforeLeaving))}static async empty(e={}){let{permissions:t,localOnly:n}=e,i=e.rootKey||await sn.genKeyStr(),o=ke.fsVersion===_a(Ru),a=await Mo.empty({rootKey:i,wnfsWasm:o});return new qh({root:a,permissions:t,localOnly:n})}static async fromCID(e,t={}){let{permissions:n,localOnly:i}=t,o=await Mo.fromCID({cid:e,permissions:n});return new qh({root:o,permissions:n,localOnly:i})}deactivate(){if(this.localOnly)return;let e=globalThis;e.filesystems=e.filesystems.filter(t=>t!==this),e.removeEventListener("online",this._whenOnline),e.removeEventListener("beforeunload",this._beforeLeaving)}async ls(e){if(js(e))throw new Error("`ls` only accepts directory paths");return this.runOnNode(e,{public:async(t,n)=>t.ls(n),private:async(t,n)=>{if(Or(t))throw new Error("Tried to `ls` a file");return t.ls(n)}})}async mkdir(e,t={}){if(js(e))throw new Error("`mkdir` only accepts directory paths");return await this.runMutationOnNode(e,{public:async(n,i)=>{await n.mkdir(i)},private:async(n,i)=>{if(Or(n))throw new Error("Tried to `mkdir` a file");await n.mkdir(i)}}),t.publish&&await this.publish(),this}async add(e,t,n={}){if(Jr(t)||L3(t)||O3(t)){if(js(e))throw new Error("Can't add soft links to a file");await this.runMutationOnNode(e,{public:async(o,a)=>{let u=Array.isArray(t)?t:Xe(t)?Object.values(t):[t];await this.runOnChildTree(o,a,async l=>(u.forEach(h=>{(or.instanceOf(l)||ca.instanceOf(l))&&l.assignLink({name:h.name,link:h,skeleton:h})}),l))},private:async(o,a)=>{let u=Array.isArray(t)?t:Xe(t)?Object.values(t):[t];await this.runOnChildTree(o,a,async l=>(u.forEach(h=>{(or.instanceOf(l)||ca.instanceOf(l))&&l.assignLink({name:h.name,link:h,skeleton:h})}),l))}})}else{if(cn(e))throw new Error("`add` only accepts file paths when working with regular files");await this.runMutationOnNode(e,{public:async(o,a)=>{await o.add(a,t)},private:async(o,a)=>{Or(o)?await o.updateContent(t):await o.add(a,t)}})}return n.publish&&await this.publish(),this}async cat(e){if(cn(e))throw new Error("`cat` only accepts file paths");return this.runOnNode(e,{public:async(t,n)=>await t.cat(n),private:async(t,n)=>Or(t)?t.content:await t.cat(n)})}async read(e){if(cn(e))throw new Error("`read` only accepts file paths");return this.cat(e)}async write(e,t,n={}){if(cn(e))throw new Error("`write` only accepts file paths");return this.add(e,t,n)}async exists(e){return this.runOnNode(e,{public:async(t,n)=>await t.exists(n),private:async(t,n)=>Or(t)||await t.exists(n)})}async get(e){return this.runOnNode(e,{public:async(t,n)=>await t.get(n),private:async(t,n)=>Or(t)?t:await t.get(n)})}async mv(e,t){let n=ng(e,t);if(!S_(e,t)){let i=ig(e),o=ig(t);throw new Error(`Can't move to a different kind of path, from is a ${i} and to is a ${o}`)}if(!n)throw new Error("`mv` is only supported on the same tree for now");if(await this.exists(t))throw new Error("Destination already exists");return await this.runOnNode(e,{public:async(i,o)=>{let[a,...u]=ir(t);await i.mv(o,u)},private:async(i,o)=>{if(Or(i))throw new Error("Tried to `mv` within a file");let[a,...u]=ir(t);await i.mv(o,u)}}),this}async rm(e){return await this.runMutationOnNode(e,{public:async(t,n)=>{await t.rm(n)},private:async(t,n)=>{if(Or(t))throw new Error("Cannot `rm` a file you've asked permission for");await t.rm(n)}}),this}async symlink(e){let{at:t,referringTo:n,name:i}=e;if(t==null)throw new Error("Missing parameter `symlink.at`");if(js(t))throw new Error("`symlink.at` only accepts directory paths");let o=e.username||await mn(),a=ng(t,n);if(!o)throw new Error("I need a username in order to use this method");if(!a)throw new Error("`link` is only supported on the same tree for now");if(!_o.lookupFilesystemUcan(un("shared")))throw new Error("Not allowed to share private items");return await this.runMutationOnNode(t,{public:async(l,h)=>{if(!sc.instanceOf(l))if(ca.instanceOf(l))await this.runOnChildTree(l,h,async m=>(ca.instanceOf(m)&&m.insertSoftLink({path:Ju(n),name:i,username:o}),m));else throw new Error("Symlinks not supported in WASM-WNFS yet.")},private:async(l,h)=>{if(Or(l))throw new Error("Cannot add a soft link to a file");await this.runOnChildTree(l,h,async m=>{if(or.instanceOf(m)){let y=await this.runOnNode(n,{public:async()=>{throw new Error("File system hit a public node within a private node. This is not supported/this should not happen.")},private:async(E,k)=>{let T=Or(E)?E:await E.get(k);if(or.instanceOf(T))return T;if(Qi.instanceOf(T))return T;throw new Error("`symlink.referringTo` is not of the right type")}});if(!y)throw new Error("Could not find the item the symlink is referring to");m.insertSoftLink({name:i,username:o,key:y.key,privateName:await y.getName()})}return m})}}),this}async publish(){let e=Array.from(Object.entries(this.proofs));this.proofs={};let t=await this.root.put();return e.forEach(([n,i])=>{this.publishHooks.forEach(o=>o(t,i))}),t}async historyStep(){let e=this.root.publicTree;Rt(e,"historyStep")&&typeof e.historyStep=="function"&&await e.historyStep()}async acceptShare({shareId:e,sharedBy:t}){let n=await this.loadShare({shareId:e,sharedBy:t});return await this.add(un("private","Shared with me",t),await n.ls([])),this}async loadShare({shareId:e,sharedBy:t}){let n=await ka(),i=await Ti(t),o=await X0({counter:parseInt(e,10),recipientExchangeDid:n,senderRootDid:i}),a=await Ws(t);if(!a)throw new Error("This user doesn't have a filesystem yet.");let u=await It.getSimpleLinks(a),l=u["shared"]?.cid||null;if(!l)throw new Error("This user hasn't shared anything yet.");let h=await Mo.getSharedLinks(De(l)),m=Xe(h)?h[o]:null;if(!m)throw new Error("Couldn't find a matching share.");let y=Xe(m)?m.cid:null;if(!y)throw new Error("Couldn't find a matching share.");let E=await aa(De(y)),T=await(await Ii()).exchangeKey();if(!T.privateKey)throw new Error("Missing private key in exchange key-pair");let O=await Gu.decrypt(E,T.privateKey),ce=Ba(new Uint8Array(O));if(!Rt(ce,"cid"))throw new Error("Share payload is missing the `cid` property");if(!Rt(ce,"key"))throw new Error("Share payload is missing the `key` property");if(!Rt(ce,"algo"))throw new Error("Share payload is missing the `algo` property");let ne=ce.cid,ve=Ze(ce.key,"base64pad"),X=ce.algo;if(!u["private"]?.cid)throw new Error("This user's filesystem doesn't have a private branch");let be=await In.fromCID(De(u["private"]?.cid)),W=await aa(De(ne)),de=await sn.decrypt(W,ve,X),ge=JSON.parse(Ze(de,"utf8"));if(!_0(ge))throw new Error("The share payload did not point to a valid entry index");return await or.fromInfo(be,ve,ge)}async sharePrivate(e,{sharedBy:t,shareWith:n}){let i=e.filter(u=>qs("private",u));if(!t){let u=await mn();if(!u)throw new Error("I need a username in order to use this method");t={rootDid:await E_(),username:u}}let o=await i.reduce(async(u,l)=>{let h=await u,m=C_(l),y=await this.get(l);return m&&(Qi.instanceOf(y)||or.instanceOf(y))?[...h,[m,y]]:h},Promise.resolve([]));if(!o.length)throw new Error("Didn't find any items to share");let a=await WL(this.root,o,{shareWith:n,sharedBy:t});return await this.root.bumpSharedCounter(),await this.root.updatePuttable("private",this.root.mmpt),await this.publish(),a}async addPublicExchangeKey(){let e=await ka();await this.mkdir(Lc(Q0,un(e)))}async hasPublicExchangeKey(){let e=await ka();return this.exists(Lc(Q0,un(e)))}resolveSymlink(e){return Rt(e,"privateName")?or.resolveSoftLink(e):ca.resolveSoftLink(e)}async checkMutationPermissionAndAddProof(e,t){let n=t?"make changes to":"query";if(!this.localOnly){let i=await _o.lookupFilesystemUcan(e),o=i&&ur(i);if(!i||!o||is(o)||!o.signature)throw new Qf(`I don't have the necessary permissions to ${n} the file system at "${Lr(e)}"`);this.proofs[o.signature]=i}}async runMutationOnNode(e,t){let n=ir(e),i=n[0],o=n.slice(1);if(await this.checkMutationPermissionAndAddProof(e,!0),i==="public")await t.public(this.root.publicTree,o),await t.public(this.root.prettyTree,o),await Promise.all([this.root.updatePuttable("public",this.root.publicTree),this.root.updatePuttable("p",this.root.prettyTree)]);else if(i==="private"){let[a,u]=this.root.findPrivateNode(e);if(!u)throw new Qf(`I don't have the necessary permissions to make changes to the file system at "${Lr(e)}"`);await t.private(u,n.slice(ir(a).length)),await u.put(),await this.root.updatePuttable("private",this.root.mmpt);let l=await this.root.mmpt.put();await this.root.addPrivateLogEntry(l)}else throw i==="p"?new Error("The pretty path is read only"):new Error("Not a valid FileSystem path")}async runOnNode(e,t){let n=ir(e),i=n[0],o=n.slice(1);if(await this.checkMutationPermissionAndAddProof(e,!1),i==="public")return await t.public(this.root.publicTree,o);if(i==="private"){let[a,u]=this.root.findPrivateNode(e);if(!u)throw new Qf(`I don't have the necessary permissions to query the file system at "${Lr(e)}"`);return await t.private(u,n.slice(ir(a).length))}else{if(i==="p")return await t.public(this.root.prettyTree,o);throw new Error("Not a valid FileSystem path")}}async runOnChildTree(e,t,n){let i=e;if(t.length){await i.exists(t)||await i.mkdir(t);let o=await i.get(t);if(Eg(o))i=o;else throw new Error("Path does not point to a directory")}return i=await n(i),t.length?await e.updateChild(i,t):e}_whenOnline(){let e=[...this._publishWhenOnline];this._publishWhenOnline=[],e.forEach(([t,n])=>{this.publishHooks.forEach(i=>i(t,n))})}_beforeLeaving(e){let t="Are you sure you want to leave? We don't control the browser so you may lose your data.";if(this._publishing||this._publishWhenOnline.length)return(e||globalThis.event).returnValue=t,t}},VL=qh;function WX(r){if(!r.app)throw Error("Only works with app permissions");let e=Md(r.app);return t=>t?Lc(e,t):e}var Hh=VL;async function Zf(r,e,t){let n,i;if(e=e||await mn()||void 0,!e)throw new Error("User hasn't authenticated yet");await Oc([]);let o=navigator.onLine?await Ws(e):null,[a,u]=o?await $S(o.toString()):[-1,0];if(!navigator.onLine)n=De(await Jo());else if(!o)n=De(await Jo()),n?Vr("\u{1F4D3} No DNSLink, using local CID:",n.toString()):Vr("\u{1F4D3} Creating a new file system");else if(a===0)n=o,Vr("\u{1F4D3} DNSLink is up to date:",n.toString());else if(a>0){n=De(await Jo());let h=a===1?"1 newer local entry":a+" newer local entries";Vr("\u{1F4D3} DNSLink is outdated ("+h+"), using local CID:",n.toString())}else n=o,await pd(n.toString()),Vr("\u{1F4D3} DNSLink is newer:",n.toString());let l=r||void 0;if(n!=null&&(await GL(n),i=await Hh.fromCID(n,{permissions:l}),i!=null))return i;if(!t)throw new Error("Can't make new filesystem without a root AES key");return i=await Hh.empty({permissions:l,rootKey:t}),await YX(i),i}var Z0=async(r,e={reset:!1})=>{let{reset:t}=e,n=await mn();if(n){if(!t){let m=navigator.onLine?await Ws(n):null,y=await Jo();if(m!==null||y!==void 0)throw new Error('Bootstrap operation will "reset" an existing filesystem. Please set reset to true if this behavior is desired.')}}else throw new Error("Cannot bootstrap filesystem because an authed user could not be found.");let i=await JL(),o=await Hh.empty({permissions:r,rootKey:i}),a=await jt(),u=await wr("ucan"),l=await Fr({potency:"APPEND",resource:"*",proof:u||void 0,lifetimeInSeconds:60*60*24*30*12*1e3,audience:a,issuer:a});await Oc([Br(l)]);let h=await o.publish();return await Ey(),await pd(h.toString()),o};async function GL(r){let e=await It.getSimpleLinks(r),t=e["version"]==null?"1.0.0":new TextDecoder().decode(await It.getFile(De(e["version"].cid))),n=async()=>(await ke.userMessages.versionMismatch.newer(t),new Error(`Incompatible filesystem version. Version: ${t} Supported versions: ${lv.map(u=>_a(u)).join(", ")}. Please upgrade this app's webnative version.`)),i=async()=>(await ke.userMessages.versionMismatch.older(t),new Error(`Incompatible filesystem version. Version: ${t} Supported versions: ${lv.map(u=>_a(u)).join(", ")}. The user should migrate their filesystem.`)),o=ml(t);if(o==null)throw await n();let a=MS(o);if(a==="too-high")throw await n();if(a==="too-low")throw await i()}var YL={fs:{private:[Bc()],public:[Bc()]}},VX=async()=>await Zf(YL),GX=async(r={reset:!1})=>await Z0(YL,r);async function YX(r){await r.mkdir({directory:["private","Apps"]}),await r.mkdir({directory:["private","Audio"]}),await r.mkdir({directory:["private","Documents"]}),await r.mkdir({directory:["private","Photos"]}),await r.mkdir({directory:["private","Video"]}),await r.publish()}async function JL(){let r=await wr("readKey");if(r)return r;let e=await sn.genKeyStr();return await on("readKey",e),e}var c8=(i=>(i.NotAuthorised="NOT_AUTHORISED",i.AuthSucceeded="AUTH_SUCCEEDED",i.AuthCancelled="AUTH_CANCELLED",i.Continuation="CONTINUATION",i))(c8||{});function XL(r,e,t,n){return{kind:"permissionedAppState",scenario:"AUTH_SUCCEEDED",permissions:r,authenticated:!0,throughLobby:!0,fs:n,newUser:e,username:t}}function QL(r,e){return{kind:"permissionedAppState",scenario:"AUTH_CANCELLED",permissions:r,authenticated:!1,throughLobby:!0,cancellationReason:e}}function u8(r,e,t){return{kind:"permissionedAppState",scenario:"CONTINUATION",permissions:r,authenticated:!0,newUser:!1,throughLobby:!1,fs:t,username:e}}function Wh(r){return{kind:"permissionedAppState",scenario:"NOT_AUTHORISED",permissions:r,authenticated:!1}}var ZL=["fission","ipfs","ipns","did","id","identity",".htaccess","htaccess",".htpasswd","htpasswd",".well-known","well-known","400","401","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","421","422","423","424","426","428","429","431","500","501","502","503","504","505","506","507","508","509","510","511","_domainkey","about","about-us","abuse","access","account","accounts","ad","add","admin","administration","administrator","ads","ads.txt","advertise","advertising","aes128-ctr","aes128-gcm","aes192-ctr","aes256-ctr","aes256-gcm","affiliate","affiliates","ajax","alert","alerts","alpha","amp","analytics","api","app","app-ads.txt","apps","asc","assets","atom","auth","authentication","authorize","autoconfig","autodiscover","avatar","backup","banner","banners","bbs","beta","billing","billings","blog","blogs","board","bookmark","bookmarks","broadcasthost","business","buy","cache","calendar","campaign","captcha","careers","cart","cas","categories","category","cdn","cgi","cgi-bin","chacha20-poly1305","change","channel","channels","chart","chat","checkout","clear","client","close","cloud","cms","com","comment","comments","community","compare","compose","config","connect","contact","contest","cookies","copy","copyright","count","cp","cpanel","create","crossdomain.xml","css","curve25519-sha256","customer","customers","customize","dashboard","db","deals","debug","delete","desc","destroy","dev","developer","developers","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha1","disconnect","discuss","dns","dns0","dns1","dns2","dns3","dns4","docs","documentation","domain","download","downloads","downvote","draft","drop","ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","edit","editor","email","enterprise","error","errors","event","events","example","exception","exit","explore","export","extensions","false","family","faq","faqs","favicon.ico","features","feed","feedback","feeds","file","files","filter","follow","follower","followers","following","fonts","forgot","forgot-password","forgotpassword","form","forms","forum","forums","friend","friends","ftp","get","git","go","graphql","group","groups","guest","guidelines","guides","head","header","help","hide","hmac-sha","hmac-sha1","hmac-sha1-etm","hmac-sha2-256","hmac-sha2-256-etm","hmac-sha2-512","hmac-sha2-512-etm","home","host","hosting","hostmaster","htpasswd","http","httpd","https","humans.txt","icons","images","imap","img","import","index","info","insert","investors","invitations","invite","invites","invoice","is","isatap","issues","it","jobs","join","js","json","keybase.txt","learn","legal","license","licensing","like","limit","live","load","local","localdomain","localhost","lock","login","logout","lost-password","m","mail","mail0","mail1","mail2","mail3","mail4","mail5","mail6","mail7","mail8","mail9","mailer-daemon","mailerdaemon","map","marketing","marketplace","master","me","media","member","members","message","messages","metrics","mis","mobile","moderator","modify","more","mx","mx1","my","net","network","new","news","newsletter","newsletters","next","nil","no-reply","nobody","noc","none","noreply","notification","notifications","ns","ns0","ns1","ns2","ns3","ns4","ns5","ns6","ns7","ns8","ns9","null","oauth","oauth2","offer","offers","online","openid","order","orders","overview","owa","owner","page","pages","partners","passwd","password","pay","payment","payments","photo","photos","pixel","plans","plugins","policies","policy","pop","pop3","popular","portal","portfolio","post","postfix","postmaster","poweruser","preferences","premium","press","previous","pricing","print","privacy","privacy-policy","private","prod","product","production","profile","profiles","project","projects","public","purchase","put","quota","recover","recovery","redirect","reduce","refund","refunds","register","registration","remove","replies","reply","report","request","request-password","reset","reset-password","response","return","returns","review","reviews","robots.txt","root","rootuser","rsa-sha2-2","rsa-sha2-512","rss","rules","sales","save","script","sdk","search","secure","security","select","services","session","sessions","settings","setup","share","shift","shop","signin","signup","site","sitemap","sites","smtp","sort","source","sql","ssh","ssh-rsa","ssl","ssladmin","ssladministrator","sslwebmaster","stage","staging","stat","static","statistics","stats","status","store","style","styles","stylesheet","stylesheets","subdomain","subscribe","sudo","super","superuser","support","survey","sync","sysadmin","system","tablet","tag","tags","team","telnet","terms","terms-of-use","test","testimonials","theme","themes","today","tools","topic","topics","tour","training","translate","translations","trending","trial","true","umac-128","umac-128-etm","umac-64","umac-64-etm","undefined","unfollow","unlike","unsubscribe","update","upgrade","usenet","user","username","users","uucp","var","verify","video","view","void","vote","vpn","webmail","webmaster","website","widget","widgets","wiki","wpad","write","www","www-data","www1","www2","www3","www4","you","yourname","yourusername","zlib"];async function Tm(r){let e=ke.getApiEndpoint();return!(await fetch(`${e}/user/data/${r}`)).ok}function Fm(r){return!r.startsWith("-")&&!r.endsWith("-")&&!r.startsWith("_")&&/^[a-zA-Z0-9_-]+$/.test(r)&&!ZL.includes(r.toLowerCase())}var mr=class extends Error{constructor(e){super(e),this.name="LinkingError"}},Uo=class extends Error{constructor(e){super(e),this.name="LinkingWarning"}},bi=r=>{switch(r.name){case"LinkingWarning":SP(r.message);break;case"LinkingError":throw r;default:throw r}},Vh=(r,e,t)=>{try{let n=JSON.parse(r);return e(n)?{ok:!0,value:n}:{ok:!1,error:new Uo(`${t.participant} received an unexpected message in ${t.callSite}: ${r}. Ignoring message.`)}}catch{return{ok:!1,error:new Uo(`${t.participant} received a message in ${t.callSite} that it could not parse: ${r}. Ignoring message.`)}}};var eb=async r=>{let{username:e,handleMessage:t}=r,n=await XX(e);if(!n)throw new mr(`Failed to lookup DID for ${e}`);let o=ke.getApiEndpoint().replace(/^https?:\/\//,"wss://"),a=`deviceLink#${n}`;console.log("Opening channel",a);let u=new WebSocket(`${o}/user/link/${n}`);await QX(u),u.onmessage=t;let l=eQ(u),h=ZX(u);return{send:l,close:h}},XX=async r=>{let e=await Ti(r);return e||new Promise(t=>{let i=0,o=setInterval(async()=>{if(console.log("Could not fetch root DID. Retrying"),e=await Ti(r).catch(a=>{throw clearInterval(o),a}),!e&&i<3){i++;return}clearInterval(o),t(e)},2e3)})},QX=async r=>new Promise((e,t)=>{r.onopen=()=>{e()},r.onerror=()=>{t("Websocket channel could not be opened")}}),ZX=r=>function(){r&&r.close(1e3)},eQ=r=>function(e){let t=typeof e=="string"?new TextEncoder().encode(e).buffer:e;r?.send(t)};var tQ=async r=>{let e=r.permissions||null,{autoRemoveUrlParams:t=!0,rootKey:n}=r,i=async l=>r.loadFileSystem===!1?void 0:await Zf(e,l,n),o=new URL(window.location.href),a=o.searchParams.get("authorised"),u=o.searchParams.get("cancelled");if(a){let l=o.searchParams.get("newUser")==="t",h=o.searchParams.get("username")||"";return await fQ(async()=>hQ(a==="via-postmessage"?await dQ():JSON.parse(await cm(De(a)))),{tries:10,timeout:1e4,timeoutMessage:"Trying to retrieve UCAN(s) and readKey(s) from the auth lobby timed out after 10 seconds."}),await on(Ns,h),t&&(o.searchParams.delete("authorised"),o.searchParams.delete("newUser"),o.searchParams.delete("username"),history.replaceState(null,document.title,o.toString())),e&&await hg(e)===!1?(console.warn("Unable to validate filesystem secrets"),Wh(e)):e&&cg(e,h)===!1?(console.warn("Unable to validate UCAN permissions"),Wh(e)):XL(e,l,h,await i(h))}else if(u){let l=(()=>{switch(u){case"DENIED":return"User denied authorisation";default:return"Unknown reason"}})();return QL(e,l)}else await Oc([]);return null},rQ=async r=>new Promise(e=>e({success:!1})),nQ=async r=>Fm(r),iQ=async r=>Tm(r),oQ=r=>eb(r),sQ=async r=>{if(!await wr("readKey"))return!1;let t=await Ti(r),n=await wr("ucan");if(n){let i=zs(n),o=ur(n),{ptc:a}=o.payload;return t===i&&a==="SUPER_USER"}else{let i=await jt();return t===i}},aQ=async(r,e)=>{let t=await wr("readKey"),n=await wr("ucan"),i=await Fr({audience:e,issuer:await jt(),lifetimeInSeconds:60*60*24*30*12*1e3,potency:"SUPER_USER",proof:n});return{readKey:t,ucan:Br(i)}};function cQ(r){return Xe(r)&&"readKey"in r&&typeof r.readKey=="string"&&"ucan"in r&&typeof r.ucan=="string"}var uQ=async r=>{if(!cQ(r))throw new mr(`Consumer received invalid link device response from producer: Expected read key and ucan, but got ${JSON.stringify(r)}`);let{readKey:e,ucan:t}=r,n=ur(t);if(await $s(n))await on("ucan",t),await on("readKey",e);else throw new mr(`Consumer received invalid link device response from producer. Given ucan is invalid: ${r.ucan}`)},tb={auth:{init:tQ,register:rQ,isUsernameValid:nQ,isUsernameAvailable:iQ,createChannel:oQ,checkCapability:sQ,delegateAccount:aQ,linkDevice:uQ}};async function fQ(r,e){return await Promise.race([(async()=>{let t=1;for(;t<=e.tries;){try{await r();return}catch(n){if(t==e.tries)throw n}t++}})(),new Promise((t,n)=>setTimeout(()=>n(new Error(e.timeoutMessage)),e.timeout))])}function lQ(r){return Xe(r)&&rr(r.sessionKey)&&rr(r.secrets)&&rr(r.iv)}async function hQ(r){let e=await Yr.decrypt(r.sessionKey),t=await sn.decryptGCM(r.secrets,e,r.iv),n=JSON.parse(t),i=n.fs,o=n.ucans;await Promise.all(Object.entries(i).map(async([a,{bareNameFilter:u,key:l}])=>{let h=Rd(a),m=await Nc({path:h}),y=await lg({path:h});await Yr.importSymmKey(l,m),await on(y,u)})),await Oc(o)}async function dQ(){let r=await new Promise(e=>{let t=document.createElement("iframe");t.id="webnative-secret-exchange",t.style.width="0",t.style.height="0",t.style.border="none",t.style.display="none",document.body.appendChild(t),t.onload=()=>{e(t)},t.src=`${ke.endpoints.lobby}/exchange.html`});try{let e=new Promise((n,i)=>{let o=10;window.addEventListener("message",u);function a(l){console.warn(`When importing UCANs & readKey(s): Can't parse: ${l}. Might be due to extensions.`),--o===0&&(window.removeEventListener("message",u),i(new Error("Couldn't parse message from auth lobby after 10 tries. See warnings above.")))}function u(l){if(new URL(l.origin).host!==new URL(ke.endpoints.lobby).host){console.log(`Got a message from ${l.origin} while waiting for login credentials. Ignoring.`);return}if(l.data==null)return;let h=null;try{h=JSON.parse(l.data)}catch{a(l.data);return}if(!lQ(h)){a(l.data);return}window.removeEventListener("message",u),n(h)}});if(r.contentWindow==null)throw new Error("Can't import UCANs & readKey(s): No access to its contentWindow");let t={webnative:"exchange-secrets",didExchange:await ka()};return r.contentWindow.postMessage(t,r.src),await e}finally{document.body.removeChild(r)}}var ri=tb.auth;function rO(r){ri={...ri,...r}}var f8={};Me(f8,{debug:()=>mQ,endpoints:()=>bQ,fsVersion:()=>gQ,setImplementations:()=>Bm,shouldPin:()=>yQ,userMessages:()=>vQ,wnfsWasmLoopkup:()=>wQ});function mQ({enabled:r}){return ke.debug=r,ke.debug}function yQ({enabled:r}){return ke.shouldPin=r,ke.shouldPin}function gQ({version:r}){if(ml(r)==null)throw new Error(`Can't parse semantic version for fsVersion setup: ${r}`);return ke.fsVersion=r,ke.fsVersion}function wQ(r){if(typeof r!="function")throw new Error(`Expected a function as an argument to 'setup.wasmWnfsLookup', but got ${r}`);ke.wnfsWasmLookup=r}function bQ(r){return ke.endpoints={...ke.endpoints,...r},{...ke.endpoints}}function Bm(r){r.auth&&rO(r.auth),r.crypto&&y6(r.crypto),r.dns&&HS(r.dns),r.storage&&OS(r.storage)}function vQ(r){return ke.userMessages={...ke.userMessages,...r},{...ke.userMessages}}var h8={};Me(h8,{createAccount:()=>l8,isUsernameAvailable:()=>Tm,isUsernameValid:()=>Fm,resendVerificationEmail:()=>_Q,shareLink:()=>xQ,storeFileSystemRootKey:()=>EQ});async function l8(r){let e=ke.getApiEndpoint(),t=Br(await Fr({audience:await Di.did(),issuer:await jt()}));return{success:(await fetch(`${e}/user`,{method:"PUT",headers:{authorization:`Bearer ${t}`,"content-type":"application/json"},body:JSON.stringify(r)})).status<300}}async function _Q(){let r=ke.getApiEndpoint(),e=Object.values(Aa())[0];if(e===null)throw"Could not find your local UCAN";let t=Br(await Fr({audience:await Di.did(),issuer:await jt(),proof:e,potency:null}));return{success:(await fetch(`${r}/user/email/resend`,{method:"POST",headers:{authorization:`Bearer ${t}`}})).status<300}}function xQ(r){return ke.endpoints.lobby+"/#/share/"+encodeURIComponent(r.sharedBy.username)+"/"+encodeURIComponent(r.shareId)+"/"}function EQ(r){return Mo.storeRootKey(r)}var d8=async()=>new Promise(r=>r(null)),p8=async r=>{let{success:e}=await l8(r);return e?(await on(Ns,r.username),{success:!0}):{success:!1}},m8=async r=>Fm(r),y8=async r=>Tm(r),g8=r=>eb(r),AQ=async r=>{let e=await Ti(r),t=await wr("ucan");if(t){let n=zs(t),i=ur(t),{ptc:o}=i.payload;return e===n&&o==="SUPER_USER"}else{let n=await jt();return e===n}},SQ=async(r,e)=>{let t=await wr("ucan"),n=await Fr({audience:e,issuer:await jt(),lifetimeInSeconds:60*60*24*30*12*1e3,potency:"SUPER_USER",proof:t});return{token:Br(n)}},PQ=async r=>{let{token:e}=r,t=ur(e);await $s(t)&&await on("ucan",e)},nO={auth:{init:d8,register:p8,isUsernameValid:m8,isUsernameAvailable:y8,createChannel:g8,checkCapability:AQ,delegateAccount:SQ,linkDevice:PQ}};var CQ=async r=>{if(!await wr("readKey"))return!1;let t=await Ti(r),n=await wr("ucan");if(n){let i=zs(n),o=ur(n),{ptc:a}=o.payload;return t===i&&a==="SUPER_USER"}else{let i=await jt();return t===i}},kQ=async(r,e)=>{let t=await wr("readKey"),n=await wr("ucan"),i=await Fr({audience:e,issuer:await jt(),lifetimeInSeconds:60*60*24*30*12*1e3,potency:"SUPER_USER",proof:n});return{readKey:t,ucan:Br(i)}};function IQ(r){return Xe(r)&&"readKey"in r&&typeof r.readKey=="string"&&"ucan"in r&&typeof r.ucan=="string"}var TQ=async r=>{if(!IQ(r))throw new mr(`Consumer received invalid link device response from producer: Expected read key and ucan, but got ${JSON.stringify(r)}`);let{readKey:e,ucan:t}=r,n=ur(t);if(await $s(n)){await on("ucan",t),await on("readKey",e),await Mo.storeRootKey(e);let i=await jt(),o=await Fr({potency:"APPEND",resource:"*",proof:t,lifetimeInSeconds:60*60*24*30*12*1e3,audience:i,issuer:i});await Oc([Br(o)])}else throw new mr(`Consumer received invalid link device response from producer. Given ucan is invalid: ${r.ucan}`)},iO={auth:{init:d8,register:p8,isUsernameValid:m8,isUsernameAvailable:y8,createChannel:g8,checkCapability:CQ,delegateAccount:kQ,linkDevice:TQ}};var w8=(t=>(t.NotAuthed="NOT_AUTHORIZED",t.Authed="AUTHORIZED",t))(w8||{});function rb(r,e){return{kind:"appState",scenario:"AUTHORIZED",authenticated:!0,fs:e,username:r}}function oO(){return{kind:"appState",scenario:"NOT_AUTHORIZED",authenticated:!1}}async function BQ(){return mn()}async function LQ({withoutRedirect:r}={}){await pl(Ns),await DP(),await Ey(),await Yr.clear(),(globalThis.filesystems||[]).forEach(e=>e.deactivate()),!r&&globalThis.location&&(globalThis.location.href=ke.endpoints.lobby)}async function OQ(r,e,t){let n=r?.app,i=r?.fs,o=r?.platform,a=r?.raw,u=r?.sharing,l=await ka(),h=await jt(),m=!!document.body.querySelector("iframe#webnative-ipfs")&&typeof SharedWorker=="function";e=e||window.location.href;let y=[["didExchange",l],["didWrite",h],["redirectTo",e],["sdk",Oy.toString()],["sharedRepo",m?"t":"f"],["sharing",u?"t":"f"]].concat(n?[["appFolder",`${n.creator}/${n.name}`]]:[],i?.private?i.private.map(E=>["privatePath",Lr(E,{absolute:!0})]):[],i?.public?i.public.map(E=>["publicPath",Lr(E,{absolute:!0})]):[],a?[["raw",jv(JSON.stringify(a))]]:[],t?Object.entries(t):[]).concat((()=>{let E=o?.apps;switch(typeof E){case"string":return[["app",E]];case"object":return E.map(k=>["app",k]);default:return[]}})());window.location.href=ke.endpoints.lobby+"?"+y.map(([E,k])=>encodeURIComponent(E)+"="+encodeURIComponent(k)).join("&")}var b8={};Me(b8,{createConsumer:()=>aO,createProducer:()=>sO,isUsernameAvailable:()=>VQ,isUsernameValid:()=>WQ,register:()=>HQ});var Gh=class{constructor(){this.events=new Map}on(e,t){let n=this.events.get(e);n===void 0?this.events.set(e,new Set([t])):n.add(t)}removeListener(e,t){let n=this.events.get(e);n!==void 0&&(n.delete(t),n.size===0&&this.events.delete(e))}emit(e,t){this.events.get(e)?.forEach(n=>{n.apply(this,[t])})}};var sO=async r=>{let{username:e}=r;if(!await ri.checkCapability(e))throw new mr(`Producer cannot delegate for username ${e}`);let n=new Gh,i={username:e,sessionKey:null,step:"BROADCAST"},o=async m=>{let{data:y}=m,E=y.arrayBuffer?new TextDecoder().decode(await y.arrayBuffer()):y;if(i.step==="BROADCAST"){let{sessionKey:k,sessionKeyMessage:T}=await RQ(E);i.sessionKey=k,i.step="NEGOTIATION",h.send(T)}else if(i.step==="NEGOTIATION")if(i.sessionKey){let k=await MQ(i.sessionKey,E);if(i.step="DELEGATION",k.ok){let{pin:T,audience:O}=k.value,ce=()=>{let X=!1;return{confirmPin:async()=>{X||(X=!0,i.sessionKey?await UQ(i.sessionKey,e,O,a):bi(new mr("Producer missing session key when delegating account")))},rejectPin:async()=>{X||(X=!0,i.sessionKey?await KQ(i.sessionKey,a):bi(new mr("Producer missing session key when declining account delegation")))}}},{confirmPin:ne,rejectPin:ve}=ce();n?.emit("challenge",{pin:T,confirmPin:ne,rejectPin:ve})}else bi(k.error)}else bi(new mr("Producer missing session key when handling user challenge"));else i.step==="DELEGATION"&&bi(new Uo("Producer received an unexpected message while delegating an account. The message will be ignored."))},a=async(m,y)=>{await h.send(m),i.username!=null&&(n?.emit("link",{approved:y,username:i.username}),u())},u=()=>{i.sessionKey=null,i.step="BROADCAST"},l=async()=>{n?.emit("done",void 0),n=null,h.close()},h=await ri.createChannel({username:e,handleMessage:o});return{on:(...m)=>n?.on(...m),cancel:l}},RQ=async r=>{let e=await ui.makeKey({alg:Tr.AES_GCM,length:256}),t=await ui.exportKey(e),{publicKey:n}=Yu(r),i=await Ks.importPublicKey(n,qu.SHA_256,Nt.Exchange),o=je.arrBufToStr(je.base64ToArrBuf(t),Rs.B16),a=await Ks.encrypt(o,i),u=await Fr({issuer:await jt(),audience:r,lifetimeInSeconds:60*5,facts:[{sessionKey:t}],potency:null}),l=je.randomBuf(16),h=je.arrBufToBase64(await yt.subtle.encrypt({name:"AES-GCM",iv:l},e,wt(Br(u),"utf8"))),m=JSON.stringify({iv:je.arrBufToBase64(l),msg:h,sessionKey:je.arrBufToBase64(a)});return{sessionKey:e,sessionKeyMessage:m}},MQ=async(r,e)=>{let n=Vh(e,i=>Xe(i)&&"iv"in i&&typeof i.iv=="string"&&"msg"in i&&typeof i.msg=="string",{participant:"Producer",callSite:"handleUserChallenge"});if(n.ok){let{iv:i,msg:o}=n.value,a=je.base64ToArrBuf(i),u=null;try{u=Ze(await yt.subtle.decrypt({name:"AES-GCM",iv:a},r,je.base64ToArrBuf(o)),"utf8")}catch{return{ok:!1,error:new Uo("Ignoring message that could not be decrypted.")}}let l=JSON.parse(u),h=l.pin??null,m=l.did??null;return h!==null&&m!==null?{ok:!0,value:{pin:h,audience:m}}:{ok:!1,error:new mr(`Producer received invalid pin ${l.pin} or audience ${l.audience}`)}}else return n},UQ=async(r,e,t,n)=>{let i=await ri.delegateAccount(e,t),o=JSON.stringify(i),a=je.randomBuf(16),u=je.arrBufToBase64(await yt.subtle.encrypt({name:"AES-GCM",iv:a},r,wt(o,"utf8"))),l=JSON.stringify({iv:je.arrBufToBase64(a),msg:u});await n(l,!0)},KQ=async(r,e)=>{let t=JSON.stringify({linkStatus:"DENIED"}),n=je.randomBuf(16),i=je.arrBufToBase64(await yt.subtle.encrypt({name:"AES-GCM",iv:n},r,wt(t,"utf8"))),o=JSON.stringify({iv:je.arrBufToBase64(n),msg:i});await e(o,!1)};var aO=async r=>{let{username:e}=r,t=new Gh,n={username:e,sessionKey:null,temporaryRsaPair:null,step:"BROADCAST"},i=async l=>{let{data:h}=l,m=h.arrayBuffer?new TextDecoder().decode(await h.arrayBuffer()):h;if(n.step==="BROADCAST")bi(new Uo("Consumer is not ready to start linking"));else if(n.step==="NEGOTIATION")if(n.sessionKey)bi(new Uo("Consumer already received a session key"));else if(!n.temporaryRsaPair||!n.temporaryRsaPair.privateKey)bi(new mr("Consumer missing RSA key pair when handling session key message"));else{let y=await zQ(n.temporaryRsaPair.privateKey,m);if(y.ok){n.sessionKey=y.value;let{pin:E,challenge:k}=await jQ(n.sessionKey);a.send(k),t?.emit("challenge",{pin:Array.from(E)}),n.step="DELEGATION"}else bi(y.error)}else if(n.step==="DELEGATION")if(!n.sessionKey)bi(new mr("Consumer was missing session key when linking device"));else if(!n.username)bi(new mr("Consumer was missing username when linking device"));else{let y=await qQ(n.sessionKey,n.username,m);if(y.ok){let{approved:E}=y.value;t?.emit("link",{approved:E,username:n.username}),await o()}else bi(y.error)}},o=async()=>{t?.emit("done",void 0),t=null,a.close(),clearInterval(u)},a=await ri.createChannel({username:e,handleMessage:i}),u=setInterval(async()=>{if(n.sessionKey)clearInterval(u);else{let{temporaryRsaPair:l,temporaryDID:h}=await $Q();n.temporaryRsaPair=l,n.step="NEGOTIATION",await a.send(h)}},2e3);return{on:(...l)=>t?.on(...l),cancel:o}},$Q=async()=>{let r=nr.normalize(),{rsaSize:e,hashAlg:t}=r,n=await Ks.makeKeypair(e,t,Nt.Exchange),i=await Ks.getPublicKey(n),o=Dl(i,"rsa");return{temporaryRsaPair:n,temporaryDID:o}},zQ=async(r,e)=>{let n=Vh(e,i=>Xe(i)&&"iv"in i&&typeof i.iv=="string"&&"msg"in i&&typeof i.msg=="string"&&"sessionKey"in i&&typeof i.sessionKey=="string",{participant:"Consumer",callSite:"handleSessionKey"});if(n.ok){let{iv:i,msg:o,sessionKey:a}=n.value,u=je.base64ToArrBuf(i),l,h;try{let T=je.base64ToArrBuf(a);h=await Ks.decrypt(T,r),l=await ui.importKey(je.arrBufToBase64(h),{alg:Tr.AES_GCM,length:256})}catch{return{ok:!1,error:new Uo(`Consumer received a session key in handleSessionKey that it could not decrypt: ${e}. Ignoring message`)}}let m=null;try{m=Ze(await yt.subtle.decrypt({name:"AES-GCM",iv:u},l,je.base64ToArrBuf(o)),"utf8")}catch{return{ok:!1,error:new mr("Consumer could not decrypt closed UCAN with provided session key.")}}let y=ur(m);if(await $s(y)===!1)return{ok:!1,error:new mr("Consumer received an invalid closed UCAN")};if(y.payload.ptc)return{ok:!1,error:new mr("Consumer received a closed UCAN with potency. Closed UCAN must not have potency.")};let E=y.payload.fct[0]&&y.payload.fct[0].sessionKey;if(!E)return{ok:!1,error:new mr("Consumer received a closed UCAN that was missing a session key in facts.")};let k=je.arrBufToBase64(h);return E!==k?{ok:!1,error:new mr("Consumer received a closed UCAN session key does not match the session key")}:{ok:!0,value:l}}else return n},jQ=async r=>{let e=Array.from(new Uint8Array(je.randomBuf(6,{max:9}))),t=je.randomBuf(16),n=je.arrBufToBase64(await yt.subtle.encrypt({name:"AES-GCM",iv:t},r,wt(JSON.stringify({did:await jt(),pin:e}),"utf8"))),i=JSON.stringify({iv:je.arrBufToBase64(t),msg:n});return{pin:e,challenge:i}},qQ=async(r,e,t)=>{let i=Vh(t,o=>Xe(o)&&"iv"in o&&typeof o.iv=="string"&&"msg"in o&&typeof o.msg=="string",{participant:"Consumer",callSite:"linkDevice"});if(i.ok){let{iv:o,msg:a}=i.value,u=je.base64ToArrBuf(o),l=null;try{l=Ze(await yt.subtle.decrypt({name:"AES-GCM",iv:u},r,je.base64ToArrBuf(a)),"utf8")}catch{return{ok:!1,error:new Uo("Consumer ignoring message that could not be decrypted in linkDevice.")}}let h=Vh(l,Xe,{participant:"Consumer",callSite:"linkDevice"});return h.ok?h.value.linkStatus==="DENIED"?{ok:!0,value:{approved:!1}}:(await on(Ns,e),await ri.linkDevice(h.value),{ok:!0,value:{approved:!0}}):h}else return i};var HQ=async r=>ri.register(r),WQ=async r=>ri.isUsernameValid(r),VQ=async r=>ri.isUsernameAvailable(r);var v8={};Me(v8,{create:()=>YQ,deleteByDomain:()=>JQ,index:()=>GQ,publish:()=>XQ});async function GQ(){let r=ke.getApiEndpoint(),e=await _o.lookupAppUcan("*");if(e===null)throw"Could not find your local UCAN";let t=Br(await Fr({audience:await Di.did(),issuer:await jt(),proof:e,potency:null})),i=await(await fetch(`${r}/app`,{method:"GET",headers:{authorization:`Bearer ${t}`}})).json();return Object.values(i).filter(o=>o.urls.length>0).map(({urls:o,insertedAt:a,modifiedAt:u})=>({domains:o,insertedAt:a,modifiedAt:u}))}async function YQ(r){let e=ke.getApiEndpoint(),t=await _o.lookupAppUcan("*");if(t===null)throw"Could not find your local UCAN";let n=Br(await Fr({audience:await Di.did(),issuer:await jt(),proof:t,potency:null})),i=rr(r)?`${e}/app?subdomain=${encodeURIComponent(r)}`:`${e}/app`,a=await(await fetch(i,{method:"POST",headers:{authorization:`Bearer ${n}`}})).json(),u=new Date().toISOString();return{domains:[a],insertedAt:u,modifiedAt:u}}async function JQ(r){let e=ke.getApiEndpoint(),t=await _o.lookupAppUcan(r);if(t===null)throw new Error("Could not find your local UCAN");let n=Br(await Fr({audience:await Di.did(),issuer:await jt(),proof:t,potency:null})),o=await(await fetch(`${e}/app`,{method:"GET",headers:{authorization:`Bearer ${n}`}})).json(),a=Object.entries(o).find(([u,l])=>l.urls.includes(r));if(a==null)throw new Error(`Couldn't find an app with domain ${r}`);await fetch(`${e}/app/${encodeURIComponent(a[0])}`,{method:"DELETE",headers:{authorization:`Bearer ${n}`}})}async function XQ(r,e){let t=ke.getApiEndpoint(),n=await _o.lookupAppUcan(r);if(n===null)throw"Could not find your local UCAN";let i=Br(await Fr({audience:await Di.did(),issuer:await jt(),proof:n,potency:null})),o=`${t}/app/${r}/${e}`;await fetch(o,{method:"PUT",headers:{authorization:`Bearer ${i}`}})}async function QQ(r){r=r||{};let{useWnfs:e=!1}=r;if(e?Bm(iO):Bm(nO),globalThis.isSecureContext===!1)throw"INSECURE_CONTEXT";if(await x8()===!1)throw"UNSUPPORTED_BROWSER";let t=await mn();if(t&&e){let n=navigator.onLine?await Ws(t):null,i=await Jo(),o={fs:{private:[Bc()],public:[Bc()]}};if(n===null&&i===void 0)return rb(t,await Z0(o));{let a=r.loadFileSystem===!1?void 0:await Zf(o,t);return rb(t,a)}}else return t?rb(t,void 0):oO()}async function ZQ(r){r=r||{};let e=r.permissions||null,{rootKey:t}=r;Bm(tb);let n=async a=>r.loadFileSystem===!1?void 0:await Zf(e,a,t);if(globalThis.isSecureContext===!1)throw"INSECURE_CONTEXT";if(await x8()===!1)throw"UNSUPPORTED_BROWSER";let i=await ri.init(r);if(i&&P6(i))return i;let o=await mn();if(o&&e){let a=await hg(e),u=cg(e,o);return a&&u?u8(e,o,await n(o)):Wh(e)}else return o?u8(e,o,await n(o)):Wh(e)}async function x8(){return _8.default.supports(_8.default.INDEXEDDB)&&await(()=>new Promise(r=>{let e=indexedDB.open("testDatabase");e.onsuccess=()=>r(!0),e.onerror=()=>r(!1)}))()}var eZ=Hh;return qn(tZ);})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
//# sourceMappingURL=index.umd.min.js.map
